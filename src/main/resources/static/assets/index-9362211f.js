import{i as S,c as E,d as L,j as $,_ as z}from"./_plugin-vue_export-helper-e6061c00.js";import{b as F,r as i,v as M,o as A,e as n,h as U,l as d,i as e,w as t,F as j,f as R,s as _,x as W,y as q,E as h,p as G,n as H}from"./index-b1128ddc.js";const J=r=>(G("data-v-5d07f4c5"),r=r(),H(),r),K={class:"container"},O={class:"box"},P=J(()=>d("div",{class:"card-header"},[d("h2",null,"设备类型设置")],-1)),Q={m:"4"},X={class:"dialog-footer"},Y=F({__name:"index",setup(r){const p=i("");let b=i([]);const w=M(()=>b.value.filter(l=>!p.value||l.value.toLowerCase().includes(p.value.toLowerCase()))),c=i(!1);let g;const C=l=>{c.value=!0,g=l.value,D(l.value)};let y=i([]);const D=async l=>{const o=await E(l,"2");o.status==200&&(y.value=o.data)},x=i([]),T=l=>{x.value=l},V=async()=>{await L({deviceType:g,devices:x.value}),await m(),c.value=!1},N=async(l,o)=>{q.confirm("将删除设备"+o.deviceName+"，是否继续？","Warning",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{await $(o.deviceName),m(),h({type:"success",message:"删除成功"})}catch(a){h.error("删除失败："+a.message)}}).catch(()=>{h({type:"info",message:"Delete canceled"})})},m=async()=>{const l=await S();l.status==200&&(b.value=l.data)};return A(async()=>{m()}),(l,o)=>{const a=n("el-table-column"),u=n("el-button"),v=n("el-table"),k=n("el-input"),I=n("el-card"),B=n("el-dialog");return R(),U(j,null,[d("div",K,[d("div",O,[e(I,null,{default:t(()=>[P,e(v,{ref:"singleTableRef",data:w.value,style:{width:"100%"},height:"600"},{default:t(()=>[e(a,{type:"expand"},{default:t(s=>[d("div",Q,[e(v,{data:s.row.devices,border:""},{default:t(()=>[e(a,{type:"index"}),e(a,{label:"序列号",prop:"serialNumber"}),e(a,{label:"设备名",prop:"deviceName"}),e(a,{label:"分区",prop:"comboId"}),e(a,{align:"right"},{default:t(f=>[e(u,{size:"small",type:"danger",text:"",onClick:Z=>N(f.$index,f.row)},{default:t(()=>[_("删除")]),_:2},1032,["onClick"])]),_:1})]),_:2},1032,["data"])])]),_:1}),e(a,{type:"index",width:"80"}),e(a,{prop:"value",label:"设备类型",width:"480"}),e(a,{align:"right",width:"380"},{header:t(()=>[e(k,{modelValue:p.value,"onUpdate:modelValue":o[0]||(o[0]=s=>p.value=s),size:"small",placeholder:"搜索 设备类型"},null,8,["modelValue"])]),default:t(s=>[e(u,{size:"small",onClick:f=>C(s.row)},{default:t(()=>[_("编辑")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})])]),e(B,{modelValue:c.value,"onUpdate:modelValue":o[2]||(o[2]=s=>c.value=s),title:"新增设备",width:"50%","align-center":""},{footer:t(()=>[d("span",X,[e(u,{onClick:o[1]||(o[1]=s=>c.value=!1)},{default:t(()=>[_("取消")]),_:1}),e(u,{type:"primary",onClick:V},{default:t(()=>[_("确认")]),_:1})])]),default:t(()=>[e(v,{data:W(y),style:{width:"100%",height:"500px"},onSelectionChange:T},{default:t(()=>[e(a,{type:"selection",width:"55"}),e(a,{type:"index"}),e(a,{label:"序列号",prop:"serialNumber"}),e(a,{label:"设备名",prop:"deviceName"}),e(a,{label:"设备类型",prop:"deviceType"}),e(a,{label:"分区",prop:"comboId"})]),_:1},8,["data"])]),_:1},8,["modelValue"])],64)}}});const te=z(Y,[["__scopeId","data-v-5d07f4c5"]]);export{te as default};
