import{g as Zi,a as qi,c as we,d as Q3,b as cf,r as xl,o as Fw,e as ia,f as Qn,h as oa,i as kr,w as qn,F as Sg,j as Lw,k as Dw,T as R3,l as yA,m as Cm,p as OT,n as UT,q as H3,t as G3,s as qx,u as z3}from"./index-b1128ddc.js";import{g as K3,a as NT,_ as mc,s as j3}from"./_plugin-vue_export-helper-e6061c00.js";function $3(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in r)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(r,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}const Ow=Object.freeze(Object.defineProperty({__proto__:null,get Base(){return vi},get Circle(){return A7},get Ellipse(){return s7},get Image(){return u7},get Line(){return f7},get Marker(){return c7},get Path(){return LB},get Polygon(){return m7},get Polyline(){return w7},get Rect(){return b7},get Text(){return x7}},Symbol.toStringTag,{value:"Module"})),Uw=Object.freeze(Object.defineProperty({__proto__:null,get Base(){return Ya},get Circle(){return M7},get Dom(){return I7},get Ellipse(){return T7},get Image(){return F7},get Line(){return L7},get Marker(){return D7},get Path(){return O7},get Polygon(){return U7},get Polyline(){return N7},get Rect(){return P7},get Text(){return G7}},Symbol.toStringTag,{value:"Module"}));var _m=function(r,e){return _m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])},_m(r,e)};function Lt(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");_m(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var P=function(){return P=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},P.apply(this,arguments)};function mn(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(t[n[a]]=r[n[a]]);return t}function kT(r,e,t,n){var a=arguments.length,i=a<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,e,t,n);else for(var A=r.length-1;A>=0;A--)(o=r[A])&&(i=(a<3?o(i):a>3?o(e,t,i):o(e,t))||i);return a>3&&i&&Object.defineProperty(e,t,i),i}function PT(r,e){return function(t,n){e(t,n,r)}}function W3(r,e,t,n,a,i){function o(p){if(p!==void 0&&typeof p!="function")throw new TypeError("Function expected");return p}for(var A=n.kind,s=A==="getter"?"get":A==="setter"?"set":"value",u=!e&&r?n.static?r:r.prototype:null,f=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),l,c=!1,h=t.length-1;h>=0;h--){var d={};for(var v in n)d[v]=v==="access"?{}:n[v];for(var v in n.access)d.access[v]=n.access[v];d.addInitializer=function(p){if(c)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(p||null))};var g=(0,t[h])(A==="accessor"?{get:f.get,set:f.set}:f[s],d);if(A==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(l=o(g.get))&&(f.get=l),(l=o(g.set))&&(f.set=l),(l=o(g.init))&&a.unshift(l)}else(l=o(g))&&(A==="field"?a.unshift(l):f[s]=l)}u&&Object.defineProperty(u,n.name,f),c=!0}function V3(r,e,t){for(var n=arguments.length>2,a=0;a<e.length;a++)t=n?e[a].call(r,t):e[a].call(r);return n?t:void 0}function X3(r){return typeof r=="symbol"?r:"".concat(r)}function Y3(r,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function QT(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function Ba(r,e,t,n){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function A(f){try{u(n.next(f))}catch(l){o(l)}}function s(f){try{u(n.throw(f))}catch(l){o(l)}}function u(f){f.done?i(f.value):a(f.value).then(A,s)}u((n=n.apply(r,e||[])).next())})}function Ea(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function A(u){return function(f){return s([u,f])}}function s(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(n=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,a=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(f){u=[6,f],a=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Mg=Object.create?function(r,e,t,n){n===void 0&&(n=t);var a=Object.getOwnPropertyDescriptor(e,t);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,a)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]};function RT(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Mg(e,r,t)}function xv(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Nw(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),a,i=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(A){o={error:A}}finally{try{a&&!a.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return i}function HT(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Nw(arguments[e]));return r}function Ig(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),a=0,e=0;e<t;e++)for(var i=arguments[e],o=0,A=i.length;o<A;o++,a++)n[a]=i[o];return n}function li(r,e,t){if(t||arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))}function ju(r){return this instanceof ju?(this.v=r,this):new ju(r)}function GT(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),a,i=[];return a={},o("next"),o("throw"),o("return"),a[Symbol.asyncIterator]=function(){return this},a;function o(c){n[c]&&(a[c]=function(h){return new Promise(function(d,v){i.push([c,h,d,v])>1||A(c,h)})})}function A(c,h){try{s(n[c](h))}catch(d){l(i[0][3],d)}}function s(c){c.value instanceof ju?Promise.resolve(c.value.v).then(u,f):l(i[0][2],c)}function u(c){A("next",c)}function f(c){A("throw",c)}function l(c,h){c(h),i.shift(),i.length&&A(i[0][0],i[0][1])}}function zT(r){var e,t;return e={},n("next"),n("throw",function(a){throw a}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(a,i){e[a]=r[a]?function(o){return(t=!t)?{value:ju(r[a](o)),done:!1}:i?i(o):o}:i}}function KT(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof xv=="function"?xv(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(i){t[i]=r[i]&&function(o){return new Promise(function(A,s){o=r[i](o),a(A,s,o.done,o.value)})}}function a(i,o,A,s){Promise.resolve(s).then(function(u){i({value:u,done:A})},o)}}function jT(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}var Z3=Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e};function $T(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Mg(e,r,t);return Z3(e,r),e}function WT(r){return r&&r.__esModule?r:{default:r}}function VT(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function XT(r,e,t,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!a:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(r,t):a?a.value=t:e.set(r,t),t}function YT(r,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof r=="function"?e===r:r.has(e)}function ZT(r,e,t){if(e!=null){if(typeof e!="object")throw new TypeError("Object expected.");var n;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose]}if(typeof n!="function")throw new TypeError("Object not disposable.");r.stack.push({value:e,dispose:n,async:t})}else t&&r.stack.push({async:!0});return e}var q3=typeof SuppressedError=="function"?SuppressedError:function(r,e,t){var n=new Error(t);return n.name="SuppressedError",n.error=r,n.suppressed=e,n};function qT(r){function e(n){r.error=r.hasError?new q3(n,r.error,"An error was suppressed during disposal."):n,r.hasError=!0}function t(){for(;r.stack.length;){var n=r.stack.pop();try{var a=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(a).then(t,function(i){return e(i),t()})}catch(i){e(i)}}if(r.hasError)throw r.error}return t()}const J3={__extends:Lt,__assign:P,__rest:mn,__decorate:kT,__param:PT,__metadata:QT,__awaiter:Ba,__generator:Ea,__createBinding:Mg,__exportStar:RT,__values:xv,__read:Nw,__spread:HT,__spreadArrays:Ig,__spreadArray:li,__await:ju,__asyncGenerator:GT,__asyncDelegator:zT,__asyncValues:KT,__makeTemplateObject:jT,__importStar:$T,__importDefault:WT,__classPrivateFieldGet:VT,__classPrivateFieldSet:XT,__classPrivateFieldIn:YT,__addDisposableResource:ZT,__disposeResources:qT},e5=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:ZT,get __assign(){return P},__asyncDelegator:zT,__asyncGenerator:GT,__asyncValues:KT,__await:ju,__awaiter:Ba,__classPrivateFieldGet:VT,__classPrivateFieldIn:YT,__classPrivateFieldSet:XT,__createBinding:Mg,__decorate:kT,__disposeResources:qT,__esDecorate:W3,__exportStar:RT,__extends:Lt,__generator:Ea,__importDefault:WT,__importStar:$T,__makeTemplateObject:jT,__metadata:QT,__param:PT,__propKey:X3,__read:Nw,__rest:mn,__runInitializers:V3,__setFunctionName:Y3,__spread:HT,__spreadArray:li,__spreadArrays:Ig,__values:xv,default:J3},Symbol.toStringTag,{value:"Module"}));var fa=function(r){return r!==null&&typeof r!="function"&&isFinite(r.length)},Cv=function(r,e){return fa(r)?r.indexOf(e)>-1:!1},Tg=function(r,e){if(!fa(r))return r;for(var t=[],n=0;n<r.length;n++){var a=r[n];e(a,n)&&t.push(a)}return t},t5=function(r,e){return e===void 0&&(e=[]),Tg(r,function(t){return!Cv(e,t)})},r5={}.toString,di=function(r,e){return r5.call(r)==="[object "+e+"]"};const Lr=function(r){return di(r,"Function")};var ht=function(r){return r==null};const yt=function(r){return Array.isArray?Array.isArray(r):di(r,"Array")},On=function(r){var e=typeof r;return r!==null&&e==="object"||e==="function"};function ye(r,e){if(r){var t;if(yt(r))for(var n=0,a=r.length;n<a&&(t=e(r[n],n),t!==!1);n++);else if(On(r)){for(var i in r)if(r.hasOwnProperty(i)&&(t=e(r[i],i),t===!1))break}}}var JT=Object.keys?function(r){return Object.keys(r)}:function(r){var e=[];return ye(r,function(t,n){Lr(r)&&n==="prototype"||e.push(n)}),e};function eF(r,e){var t=JT(e),n=t.length;if(ht(r))return!n;for(var a=0;a<n;a+=1){var i=t[a];if(e[i]!==r[i]||!(i in r))return!1}return!0}var _v=function(r){return typeof r=="object"&&r!==null},Ln=function(r){if(!_v(r)||!di(r,"Object"))return!1;if(Object.getPrototypeOf(r)===null)return!0;for(var e=r;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e};function n5(r,e){if(!yt(r))return null;var t;if(Lr(e)&&(t=e),Ln(e)&&(t=function(a){return eF(a,e)}),t){for(var n=0;n<r.length;n+=1)if(t(r[n]))return r[n]}return null}function a5(r,e,t){t===void 0&&(t=0);for(var n=t;n<r.length;n++)if(e(r[n],n))return n;return-1}var i5=function(r,e){for(var t=null,n=0;n<r.length;n++){var a=r[n],i=a[e];if(!ht(i)){yt(i)?t=i[0]:t=i;break}}return t},o5=function(r){if(!yt(r))return[];for(var e=[],t=0;t<r.length;t++)e=e.concat(r[t]);return e},tF=function(r,e){if(e===void 0&&(e=[]),!yt(r))e.push(r);else for(var t=0;t<r.length;t+=1)tF(r[t],e);return e};const Vi=function(r){if(yt(r))return r.reduce(function(e,t){return Math.max(e,t)},r[0])},Xi=function(r){if(yt(r))return r.reduce(function(e,t){return Math.min(e,t)},r[0])};var rF=function(r){var e=r.filter(function(o){return!isNaN(o)});if(!e.length)return{min:0,max:0};if(yt(r[0])){for(var t=[],n=0;n<r.length;n++)t=t.concat(r[n]);e=t}var a=Vi(e),i=Xi(e);return{min:i,max:a}},nF=Array.prototype,A5=nF.splice,s5=nF.indexOf,u5=function(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var n=0;n<e.length;n++)for(var a=e[n],i=-1;(i=s5.call(r,a))>-1;)A5.call(r,i,1);return r},f5=Array.prototype.splice,aF=function(e,t){if(!fa(e))return[];for(var n=e?t.length:0,a=n-1;n--;){var i=void 0,o=t[n];(n===a||o!==i)&&(i=o,f5.call(e,o,1))}return e},iF=function(r,e,t){if(!yt(r)&&!Ln(r))return r;var n=t;return ye(r,function(a,i){n=e(n,a,i)}),n},l5=function(r,e){var t=[];if(!fa(r))return t;for(var n=-1,a=[],i=r.length;++n<i;){var o=r[n];e(o,n,r)&&(t.push(o),a.push(n))}return aF(r,a),t};const Oe=function(r){return di(r,"String")};function c5(r,e){var t;if(Lr(e))t=function(a,i){return e(a)-e(i)};else{var n=[];Oe(e)?n.push(e):yt(e)&&(n=e),t=function(a,i){for(var o=0;o<n.length;o+=1){var A=n[o];if(a[A]>i[A])return 1;if(a[A]<i[A])return-1}return 0}}return r.sort(t),r}function Kl(r,e){e===void 0&&(e=new Map);var t=[];if(Array.isArray(r))for(var n=0,a=r.length;n<a;n++){var i=r[n];e.has(i)||(t.push(i),e.set(i,!0))}return t}var h5=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return Kl([].concat.apply([],r))};const d5=function(r,e){for(var t=[],n={},a=0;a<r.length;a++){var i=r[a],o=i[e];if(!ht(o)){yt(o)||(o=[o]);for(var A=0;A<o.length;A++){var s=o[A];n[s]||(t.push(s),n[s]=!0)}}}return t};function ji(r){if(fa(r))return r[0]}function $a(r){if(fa(r)){var e=r;return e[e.length-1]}}function v5(r,e){return yt(r)||Oe(r)?r[0]===e:!1}function g5(r,e){return yt(r)||Oe(r)?r[r.length-1]===e:!1}var p5=function(r,e){for(var t=0;t<r.length;t++)if(!e(r[t],t))return!1;return!0},y5=function(r,e){for(var t=0;t<r.length;t++)if(e(r[t],t))return!0;return!1},m5=Object.prototype.hasOwnProperty;function Sv(r,e){if(!e||!yt(r))return{};for(var t={},n=Lr(e)?e:function(A){return A[e]},a,i=0;i<r.length;i++){var o=r[i];a=n(o),m5.call(t,a)?t[a].push(o):t[a]=[o]}return t}function oF(r,e){if(!e)return{0:r};if(!Lr(e)){var t=yt(e)?e:e.replace(/\s+/g,"").split("*");e=function(n){for(var a="_",i=0,o=t.length;i<o;i++)a+=n[t[i]]&&n[t[i]].toString();return a}}return Sv(r,e)}const w5=function(r,e){if(!e)return[r];var t=oF(r,e),n=[];for(var a in t)n.push(t[a]);return n};function B5(r,e){return r["_wrap_"+e]}function ls(r,e){if(r["_wrap_"+e])return r["_wrap_"+e];var t=function(n){r[e](n)};return r["_wrap_"+e]=t,t}var Jx={};function E5(r){var e=Jx[r];if(!e){for(var t=r.toString(16),n=t.length;n<6;n++)t="0"+t;e="#"+t,Jx[r]=e}return e}function b5(r){var e=0,t=0,n=0,a=0;return yt(r)?r.length===1?e=t=n=a=r[0]:r.length===2?(e=n=r[0],t=a=r[1]):r.length===3?(e=r[0],t=a=r[1],n=r[2]):(e=r[0],t=r[1],n=r[2],a=r[3]):e=t=n=a=r,{r1:e,r2:t,r3:n,r4:a}}var x5=function(r,e,t){return r<e?e:r>t?t:r},Xd=function(r,e){var t=e.toString(),n=t.indexOf(".");if(n===-1)return Math.round(r);var a=t.substr(n+1).length;return a>20&&(a=20),parseFloat(r.toFixed(a))},vt=function(r){return di(r,"Number")},C5=function(r){return vt(r)&&r%1!==0},_5=function(r){return vt(r)&&r%2===0},S5=Number.isInteger?Number.isInteger:function(r){return vt(r)&&r%1===0},M5=function(r){return vt(r)&&r<0},I5=1e-5;function AF(r,e,t){return t===void 0&&(t=I5),Math.abs(r-e)<t}var T5=function(r){return vt(r)&&r%2!==0},F5=function(r){return vt(r)&&r>0};const L5=function(r,e){if(yt(r)){for(var t,n=-1/0,a=0;a<r.length;a++){var i=r[a],o=Lr(e)?e(i):i[e];o>n&&(t=i,n=o)}return t}},D5=function(r,e){if(yt(r)){for(var t,n=1/0,a=0;a<r.length;a++){var i=r[a],o=Lr(e)?e(i):i[e];o<n&&(t=i,n=o)}return t}};var Fg=function(r,e){return(r%e+e)%e},O5=180/Math.PI,U5=function(r){return O5*r};const N5=parseInt;var k5=Math.PI/180,Lg=function(r){return k5*r};const eC=function(r,e){return r.hasOwnProperty(e)};var kw=Object.values?function(r){return Object.values(r)}:function(r){var e=[];return ye(r,function(t,n){Lr(r)&&n==="prototype"||e.push(t)}),e};const P5=function(r,e){return Cv(kw(r),e)},hf=function(r){return ht(r)?"":r.toString()};var Q5=function(r){return hf(r).toLowerCase()},R5=function(r){var e=hf(r);return e.charAt(0).toLowerCase()+e.substring(1)};function H5(r,e){return!r||!e?r:r.replace(/\\?\{([^{}]+)\}/g,function(t,n){return t.charAt(0)==="\\"?t.slice(1):e[n]===void 0?"":e[n]})}var G5=function(r){return hf(r).toUpperCase()},$u=function(r){var e=hf(r);return e.charAt(0).toUpperCase()+e.substring(1)},z5={}.toString,sF=function(r){return z5.call(r).replace(/^\[object /,"").replace(/]$/,"")},K5=function(r){return di(r,"Arguments")},wc=function(r){return di(r,"Boolean")},Pw=function(r){return di(r,"Date")},j5=function(r){return di(r,"Error")};function $5(r){return vt(r)&&isFinite(r)}var W5=function(r){return r===null},V5=Object.prototype,uF=function(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||V5;return r===t},X5=function(r){return di(r,"RegExp")},Y5=function(r){return r===void 0},Z5=function(r){return r instanceof Element||r instanceof HTMLDocument};function fF(r){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)};return e(r)}function lF(r){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;e(r)}function $0(r,e){for(var t in e)e.hasOwnProperty(t)&&t!=="constructor"&&e[t]!==void 0&&(r[t]=e[t])}function mt(r,e,t,n){return e&&$0(r,e),t&&$0(r,t),n&&$0(r,n),r}var q5=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];for(var t=r[0],n=1;n<r.length;n++){var a=r[n];Lr(a)&&(a=a.prototype),mt(t.prototype,a)}},Xt=function(r){if(typeof r!="object"||r===null)return r;var e;if(yt(r)){e=[];for(var t=0,n=r.length;t<n;t++)typeof r[t]=="object"&&r[t]!=null?e[t]=Xt(r[t]):e[t]=r[t]}else{e={};for(var a in r)typeof r[a]=="object"&&r[a]!=null?e[a]=Xt(r[a]):e[a]=r[a]}return e};function Bc(r,e,t){var n;return function(){var a=this,i=arguments,o=function(){n=null,t||r.apply(a,i)},A=t&&!n;clearTimeout(n),n=setTimeout(o,e),A&&r.apply(a,i)}}const cF=function(r,e){if(!Lr(r))throw new TypeError("Expected a function");var t=function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];var i=e?e.apply(this,n):n[0],o=t.cache;if(o.has(i))return o.get(i);var A=r.apply(this,n);return o.set(i,A),A};return t.cache=new Map,t};var J5=5;function hF(r,e,t,n){t=t||0,n=n||J5;for(var a in e)if(e.hasOwnProperty(a)){var i=e[a];i!==null&&Ln(i)?(Ln(r[a])||(r[a]={}),t<n?hF(r[a],i,t+1,n):r[a]=e[a]):yt(i)?(r[a]=[],r[a]=r[a].concat(i)):i!==void 0&&(r[a]=i)}}var br=function(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var n=0;n<e.length;n+=1)hF(r,e[n]);return r},eH=function(r,e,t,n){Lr(e)||(t=e,e=r,r=function(){});var a=Object.create?function(o,A){return Object.create(o,{constructor:{value:A}})}:function(o,A){function s(){}s.prototype=o;var u=new s;return u.constructor=A,u},i=a(e.prototype,r);return r.prototype=mt(i,r.prototype),r.superclass=a(e.prototype,e),mt(i,t),mt(r,n),r},Qw=function(r,e){if(!fa(r))return-1;var t=Array.prototype.indexOf;if(t)return t.call(r,e);for(var n=-1,a=0;a<r.length;a++)if(r[a]===e){n=a;break}return n},tH=Object.prototype.hasOwnProperty;function dF(r){if(ht(r))return!0;if(fa(r))return!r.length;var e=sF(r);if(e==="Map"||e==="Set")return!r.size;if(uF(r))return!Object.keys(r).length;for(var t in r)if(tH.call(r,t))return!1;return!0}var bA=function(r,e){if(r===e)return!0;if(!r||!e||Oe(r)||Oe(e))return!1;if(fa(r)||fa(e)){if(r.length!==e.length)return!1;for(var t=!0,n=0;n<r.length&&(t=bA(r[n],e[n]),!!t);n++);return t}if(_v(r)||_v(e)){var a=Object.keys(r),i=Object.keys(e);if(a.length!==i.length)return!1;for(var t=!0,n=0;n<a.length&&(t=bA(r[a[n]],e[a[n]]),!!t);n++);return t}return!1};const rH=function(r,e,t){return Lr(t)?!!t(r,e):bA(r,e)};var _s=function(r,e){if(!fa(r))return r;for(var t=[],n=0;n<r.length;n++){var a=r[n];t.push(e(a,n))}return t},nH=function(r){return r};const aH=function(r,e){e===void 0&&(e=nH);var t={};return On(r)&&!ht(r)&&Object.keys(r).forEach(function(n){t[n]=e(r[n],n)}),t},xo=function(r,e,t){for(var n=0,a=Oe(e)?e.split("."):e;r&&n<a.length;)r=r[a[n++]];return r===void 0||n<a.length?t:r},iH=function(r,e,t){var n=r,a=Oe(e)?e.split("."):e;return a.forEach(function(i,o){o<a.length-1?(On(n[i])||(n[i]=vt(a[o+1])?[]:{}),n=n[i]):n[i]=t}),r};var oH=Object.prototype.hasOwnProperty;const AH=function(r,e){if(r===null||!Ln(r))return{};var t={};return ye(e,function(n){oH.call(r,n)&&(t[n]=r[n])}),t},sH=function(r,e){return iF(r,function(t,n,a){return e.includes(a)||(t[a]=n),t},{})},jl=function(r,e,t){var n,a,i,o,A=0;t||(t={});var s=function(){A=t.leading===!1?0:Date.now(),n=null,o=r.apply(a,i),n||(a=i=null)},u=function(){var f=Date.now();!A&&t.leading===!1&&(A=f);var l=e-(f-A);return a=this,i=arguments,l<=0||l>e?(n&&(clearTimeout(n),n=null),A=f,o=r.apply(a,i),n||(a=i=null)):!n&&t.trailing!==!1&&(n=setTimeout(s,l)),o};return u.cancel=function(){clearTimeout(n),A=0,n=a=i=null},u},vF=function(r){return fa(r)?Array.prototype.slice.call(r):[]};var Ih={};const Yi=function(r){return r=r||"g",Ih[r]?Ih[r]+=1:Ih[r]=1,r+Ih[r]},ol=function(){},uH=function(r){return r};function Dg(r){return ht(r)?0:fa(r)?r.length:Object.keys(r).length}var Th;const Al=cF(function(r,e){e===void 0&&(e={});var t=e.fontSize,n=e.fontFamily,a=e.fontWeight,i=e.fontStyle,o=e.fontVariant;return Th||(Th=document.createElement("canvas").getContext("2d")),Th.font=[i,o,a,t+"px",n].join(" "),Th.measureText(Oe(r)?r:"").width},function(r,e){return e===void 0&&(e={}),Ig([r],kw(e)).join("")}),fH=function(r,e,t,n){n===void 0&&(n="...");var a=16,i=Al(n,t),o=Oe(r)?r:hf(r),A=e,s=[],u,f;if(Al(r,t)<=e)return r;for(;u=o.substr(0,a),f=Al(u,t),!(f+i>A&&f>A);)if(s.push(u),A-=f,o=o.substr(a),!o)return s.join("");for(;u=o.substr(0,1),f=Al(u,t),!(f+i>A);)if(s.push(u),A-=f,o=o.substr(1),!o)return s.join("");return""+s.join("")+n};var lH=function(){function r(){this.map={}}return r.prototype.has=function(e){return this.map[e]!==void 0},r.prototype.get=function(e,t){var n=this.map[e];return n===void 0?t:n},r.prototype.set=function(e,t){this.map[e]=t},r.prototype.clear=function(){this.map={}},r.prototype.delete=function(e){delete this.map[e]},r.prototype.size=function(){return Object.keys(this.map).length},r}();const cH=Object.freeze(Object.defineProperty({__proto__:null,Cache:lH,assign:mt,augment:q5,clamp:x5,clearAnimationFrame:lF,clone:Xt,contains:Cv,debounce:Bc,deepMix:br,difference:t5,each:ye,endsWith:g5,every:p5,extend:eH,filter:Tg,find:n5,findIndex:a5,firstValue:i5,fixedBase:Xd,flatten:o5,flattenDeep:tF,forIn:ye,get:xo,getEllipsisText:fH,getRange:rF,getType:sF,getWrapBehavior:B5,group:w5,groupBy:Sv,groupToMap:oF,has:eC,hasKey:eC,hasValue:P5,head:ji,identity:uH,includes:Cv,indexOf:Qw,isArguments:K5,isArray:yt,isArrayLike:fa,isBoolean:wc,isDate:Pw,isDecimal:C5,isElement:Z5,isEmpty:dF,isEqual:bA,isEqualWith:rH,isError:j5,isEven:_5,isFinite:$5,isFunction:Lr,isInteger:S5,isMatch:eF,isNegative:M5,isNil:ht,isNull:W5,isNumber:vt,isNumberEqual:AF,isObject:On,isObjectLike:_v,isOdd:T5,isPlainObject:Ln,isPositive:F5,isPrototype:uF,isRegExp:X5,isString:Oe,isType:di,isUndefined:Y5,keys:JT,last:$a,lowerCase:Q5,lowerFirst:R5,map:_s,mapValues:aH,max:Vi,maxBy:L5,measureTextWidth:Al,memoize:cF,min:Xi,minBy:D5,mix:mt,mod:Fg,noop:ol,number2color:E5,omit:sH,parseRadius:b5,pick:AH,pull:u5,pullAt:aF,reduce:iF,remove:l5,requestAnimationFrame:fF,set:iH,size:Dg,some:y5,sortBy:c5,startsWith:v5,substitute:H5,throttle:jl,toArray:vF,toDegree:U5,toInteger:N5,toRadian:Lg,toString:hf,union:h5,uniq:Kl,uniqueId:Yi,upperCase:G5,upperFirst:$u,values:kw,valuesOfKey:d5,wrapBehavior:ls},Symbol.toStringTag,{value:"Module"})),hH={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(e){return Object.assign(this,e),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(e){var t=this,n=this.events;this.graph=e,(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!0),ye(n,function(a,i){e.on(i,a)}),document.addEventListener("visibilitychange",function(){t.keydown=!1})},unbind:function(e){var t=this.events,n=e.get("canvas").get("draggable");(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!1),ye(t,function(a,i){e.off(i,a)}),e.get("canvas").set("draggable",n)},get:function(e){return this[e]},set:function(e,t){return this[e]=t,this}};var Rw=function(){function r(){}return r.registerBehavior=function(e,t){if(!t)throw new Error("please specify handler for this behavior: ".concat(e));var n=Xt(hH);Object.assign(n,t);var a=function(o){var A=this;Object.assign(this,this.getDefaultCfg(),o);var s=this.getEvents();this.events=null;var u={};s&&(ye(s,function(f,l){u[l]=ls(A,f)}),this.events=u)};a.prototype=n,r.types[e]=a},r.hasBehavior=function(e){return!!r.types[e]},r.getBehavior=function(e){return r.types[e]},r.types={},r}(),dH="*",gF=function(){function r(){this._events={}}return r.prototype.on=function(e,t,n){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!n}),this},r.prototype.once=function(e,t){return this.on(e,t,!0)},r.prototype.emit=function(e){for(var t=this,n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];var i=this._events[e]||[],o=this._events[dH]||[],A=function(s){for(var u=s.length,f=0;f<u;f++)if(s[f]){var l=s[f],c=l.callback,h=l.once;h&&(s.splice(f,1),s.length===0&&delete t._events[e],u--,f--),c.apply(t,n)}};A(i),A(o)},r.prototype.off=function(e,t){if(!e)this._events={};else if(!t)delete this._events[e];else{for(var n=this._events[e]||[],a=n.length,i=0;i<a;i++)n[i].callback===t&&(n.splice(i,1),a--,i--);n.length===0&&delete this._events[e]}return this},r.prototype.getEvents=function(){return this._events},r}(),Ct=1e-6,er=typeof Float32Array<"u"?Float32Array:Array,ui=Math.random;function vH(r){er=r}var gH=Math.PI/180;function pH(r){return r*gH}function yH(r,e){return Math.abs(r-e)<=Ct*Math.max(1,Math.abs(r),Math.abs(e))}Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});const mH=Object.freeze(Object.defineProperty({__proto__:null,get ARRAY_TYPE(){return er},EPSILON:Ct,RANDOM:ui,equals:yH,setMatrixArrayType:vH,toRadian:pH},Symbol.toStringTag,{value:"Module"}));function wH(){var r=new er(4);return er!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r}function BH(r){var e=new er(4);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}function EH(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r}function bH(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r}function xH(r,e,t,n){var a=new er(4);return a[0]=r,a[1]=e,a[2]=t,a[3]=n,a}function CH(r,e,t,n,a){return r[0]=e,r[1]=t,r[2]=n,r[3]=a,r}function _H(r,e){if(r===e){var t=e[1];r[1]=e[2],r[2]=t}else r[0]=e[0],r[1]=e[2],r[2]=e[1],r[3]=e[3];return r}function SH(r,e){var t=e[0],n=e[1],a=e[2],i=e[3],o=t*i-a*n;return o?(o=1/o,r[0]=i*o,r[1]=-n*o,r[2]=-a*o,r[3]=t*o,r):null}function MH(r,e){var t=e[0];return r[0]=e[3],r[1]=-e[1],r[2]=-e[2],r[3]=t,r}function IH(r){return r[0]*r[3]-r[2]*r[1]}function pF(r,e,t){var n=e[0],a=e[1],i=e[2],o=e[3],A=t[0],s=t[1],u=t[2],f=t[3];return r[0]=n*A+i*s,r[1]=a*A+o*s,r[2]=n*u+i*f,r[3]=a*u+o*f,r}function TH(r,e,t){var n=e[0],a=e[1],i=e[2],o=e[3],A=Math.sin(t),s=Math.cos(t);return r[0]=n*s+i*A,r[1]=a*s+o*A,r[2]=n*-A+i*s,r[3]=a*-A+o*s,r}function FH(r,e,t){var n=e[0],a=e[1],i=e[2],o=e[3],A=t[0],s=t[1];return r[0]=n*A,r[1]=a*A,r[2]=i*s,r[3]=o*s,r}function LH(r,e){var t=Math.sin(e),n=Math.cos(e);return r[0]=n,r[1]=t,r[2]=-t,r[3]=n,r}function DH(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=e[1],r}function OH(r){return"mat2("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+")"}function UH(r){return Math.hypot(r[0],r[1],r[2],r[3])}function NH(r,e,t,n){return r[2]=n[2]/n[0],t[0]=n[0],t[1]=n[1],t[3]=n[3]-r[2]*t[1],[r,e,t]}function kH(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r}function yF(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r}function PH(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]}function QH(r,e){var t=r[0],n=r[1],a=r[2],i=r[3],o=e[0],A=e[1],s=e[2],u=e[3];return Math.abs(t-o)<=Ct*Math.max(1,Math.abs(t),Math.abs(o))&&Math.abs(n-A)<=Ct*Math.max(1,Math.abs(n),Math.abs(A))&&Math.abs(a-s)<=Ct*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(i-u)<=Ct*Math.max(1,Math.abs(i),Math.abs(u))}function RH(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r}function HH(r,e,t,n){return r[0]=e[0]+t[0]*n,r[1]=e[1]+t[1]*n,r[2]=e[2]+t[2]*n,r[3]=e[3]+t[3]*n,r}var GH=pF,zH=yF;const KH=Object.freeze(Object.defineProperty({__proto__:null,LDU:NH,add:kH,adjoint:MH,clone:BH,copy:EH,create:wH,determinant:IH,equals:QH,exactEquals:PH,frob:UH,fromRotation:LH,fromScaling:DH,fromValues:xH,identity:bH,invert:SH,mul:GH,multiply:pF,multiplyScalar:RH,multiplyScalarAndAdd:HH,rotate:TH,scale:FH,set:CH,str:OH,sub:zH,subtract:yF,transpose:_H},Symbol.toStringTag,{value:"Module"}));function jH(){var r=new er(6);return er!=Float32Array&&(r[1]=0,r[2]=0,r[4]=0,r[5]=0),r[0]=1,r[3]=1,r}function $H(r){var e=new er(6);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e}function WH(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r}function VH(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=0,r[5]=0,r}function XH(r,e,t,n,a,i){var o=new er(6);return o[0]=r,o[1]=e,o[2]=t,o[3]=n,o[4]=a,o[5]=i,o}function YH(r,e,t,n,a,i,o){return r[0]=e,r[1]=t,r[2]=n,r[3]=a,r[4]=i,r[5]=o,r}function ZH(r,e){var t=e[0],n=e[1],a=e[2],i=e[3],o=e[4],A=e[5],s=t*i-n*a;return s?(s=1/s,r[0]=i*s,r[1]=-n*s,r[2]=-a*s,r[3]=t*s,r[4]=(a*A-i*o)*s,r[5]=(n*o-t*A)*s,r):null}function qH(r){return r[0]*r[3]-r[1]*r[2]}function mF(r,e,t){var n=e[0],a=e[1],i=e[2],o=e[3],A=e[4],s=e[5],u=t[0],f=t[1],l=t[2],c=t[3],h=t[4],d=t[5];return r[0]=n*u+i*f,r[1]=a*u+o*f,r[2]=n*l+i*c,r[3]=a*l+o*c,r[4]=n*h+i*d+A,r[5]=a*h+o*d+s,r}function JH(r,e,t){var n=e[0],a=e[1],i=e[2],o=e[3],A=e[4],s=e[5],u=Math.sin(t),f=Math.cos(t);return r[0]=n*f+i*u,r[1]=a*f+o*u,r[2]=n*-u+i*f,r[3]=a*-u+o*f,r[4]=A,r[5]=s,r}function eG(r,e,t){var n=e[0],a=e[1],i=e[2],o=e[3],A=e[4],s=e[5],u=t[0],f=t[1];return r[0]=n*u,r[1]=a*u,r[2]=i*f,r[3]=o*f,r[4]=A,r[5]=s,r}function tG(r,e,t){var n=e[0],a=e[1],i=e[2],o=e[3],A=e[4],s=e[5],u=t[0],f=t[1];return r[0]=n,r[1]=a,r[2]=i,r[3]=o,r[4]=n*u+i*f+A,r[5]=a*u+o*f+s,r}function rG(r,e){var t=Math.sin(e),n=Math.cos(e);return r[0]=n,r[1]=t,r[2]=-t,r[3]=n,r[4]=0,r[5]=0,r}function nG(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=e[1],r[4]=0,r[5]=0,r}function aG(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=e[0],r[5]=e[1],r}function iG(r){return"mat2d("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+")"}function oG(r){return Math.hypot(r[0],r[1],r[2],r[3],r[4],r[5],1)}function AG(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r}function wF(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r}function sG(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r}function uG(r,e,t,n){return r[0]=e[0]+t[0]*n,r[1]=e[1]+t[1]*n,r[2]=e[2]+t[2]*n,r[3]=e[3]+t[3]*n,r[4]=e[4]+t[4]*n,r[5]=e[5]+t[5]*n,r}function fG(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]}function lG(r,e){var t=r[0],n=r[1],a=r[2],i=r[3],o=r[4],A=r[5],s=e[0],u=e[1],f=e[2],l=e[3],c=e[4],h=e[5];return Math.abs(t-s)<=Ct*Math.max(1,Math.abs(t),Math.abs(s))&&Math.abs(n-u)<=Ct*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-f)<=Ct*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(i-l)<=Ct*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(o-c)<=Ct*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(A-h)<=Ct*Math.max(1,Math.abs(A),Math.abs(h))}var cG=mF,hG=wF;const dG=Object.freeze(Object.defineProperty({__proto__:null,add:AG,clone:$H,copy:WH,create:jH,determinant:qH,equals:lG,exactEquals:fG,frob:oG,fromRotation:rG,fromScaling:nG,fromTranslation:aG,fromValues:XH,identity:VH,invert:ZH,mul:cG,multiply:mF,multiplyScalar:sG,multiplyScalarAndAdd:uG,rotate:JH,scale:eG,set:YH,str:iG,sub:hG,subtract:wF,translate:tG},Symbol.toStringTag,{value:"Module"}));function BF(){var r=new er(9);return er!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function vG(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[4],r[4]=e[5],r[5]=e[6],r[6]=e[8],r[7]=e[9],r[8]=e[10],r}function gG(r){var e=new er(9);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e}function pG(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function yG(r,e,t,n,a,i,o,A,s){var u=new er(9);return u[0]=r,u[1]=e,u[2]=t,u[3]=n,u[4]=a,u[5]=i,u[6]=o,u[7]=A,u[8]=s,u}function mG(r,e,t,n,a,i,o,A,s,u){return r[0]=e,r[1]=t,r[2]=n,r[3]=a,r[4]=i,r[5]=o,r[6]=A,r[7]=s,r[8]=u,r}function wG(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function BG(r,e){if(r===e){var t=e[1],n=e[2],a=e[5];r[1]=e[3],r[2]=e[6],r[3]=t,r[5]=e[7],r[6]=n,r[7]=a}else r[0]=e[0],r[1]=e[3],r[2]=e[6],r[3]=e[1],r[4]=e[4],r[5]=e[7],r[6]=e[2],r[7]=e[5],r[8]=e[8];return r}function Hw(r,e){var t=e[0],n=e[1],a=e[2],i=e[3],o=e[4],A=e[5],s=e[6],u=e[7],f=e[8],l=f*o-A*u,c=-f*i+A*s,h=u*i-o*s,d=t*l+n*c+a*h;return d?(d=1/d,r[0]=l*d,r[1]=(-f*n+a*u)*d,r[2]=(A*n-a*o)*d,r[3]=c*d,r[4]=(f*t-a*s)*d,r[5]=(-A*t+a*i)*d,r[6]=h*d,r[7]=(-u*t+n*s)*d,r[8]=(o*t-n*i)*d,r):null}function EG(r,e){var t=e[0],n=e[1],a=e[2],i=e[3],o=e[4],A=e[5],s=e[6],u=e[7],f=e[8];return r[0]=o*f-A*u,r[1]=a*u-n*f,r[2]=n*A-a*o,r[3]=A*s-i*f,r[4]=t*f-a*s,r[5]=a*i-t*A,r[6]=i*u-o*s,r[7]=n*s-t*u,r[8]=t*o-n*i,r}function bG(r){var e=r[0],t=r[1],n=r[2],a=r[3],i=r[4],o=r[5],A=r[6],s=r[7],u=r[8];return e*(u*i-o*s)+t*(-u*a+o*A)+n*(s*a-i*A)}function Ji(r,e,t){var n=e[0],a=e[1],i=e[2],o=e[3],A=e[4],s=e[5],u=e[6],f=e[7],l=e[8],c=t[0],h=t[1],d=t[2],v=t[3],g=t[4],p=t[5],y=t[6],m=t[7],w=t[8];return r[0]=c*n+h*o+d*u,r[1]=c*a+h*A+d*f,r[2]=c*i+h*s+d*l,r[3]=v*n+g*o+p*u,r[4]=v*a+g*A+p*f,r[5]=v*i+g*s+p*l,r[6]=y*n+m*o+w*u,r[7]=y*a+m*A+w*f,r[8]=y*i+m*s+w*l,r}function xG(r,e,t){var n=e[0],a=e[1],i=e[2],o=e[3],A=e[4],s=e[5],u=e[6],f=e[7],l=e[8],c=t[0],h=t[1];return r[0]=n,r[1]=a,r[2]=i,r[3]=o,r[4]=A,r[5]=s,r[6]=c*n+h*o+u,r[7]=c*a+h*A+f,r[8]=c*i+h*s+l,r}function CG(r,e,t){var n=e[0],a=e[1],i=e[2],o=e[3],A=e[4],s=e[5],u=e[6],f=e[7],l=e[8],c=Math.sin(t),h=Math.cos(t);return r[0]=h*n+c*o,r[1]=h*a+c*A,r[2]=h*i+c*s,r[3]=h*o-c*n,r[4]=h*A-c*a,r[5]=h*s-c*i,r[6]=u,r[7]=f,r[8]=l,r}function _G(r,e,t){var n=t[0],a=t[1];return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=a*e[3],r[4]=a*e[4],r[5]=a*e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function Gw(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=e[0],r[7]=e[1],r[8]=1,r}function zw(r,e){var t=Math.sin(e),n=Math.cos(e);return r[0]=n,r[1]=t,r[2]=0,r[3]=-t,r[4]=n,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function Kw(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=e[1],r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function SG(r,e){return r[0]=e[0],r[1]=e[1],r[2]=0,r[3]=e[2],r[4]=e[3],r[5]=0,r[6]=e[4],r[7]=e[5],r[8]=1,r}function MG(r,e){var t=e[0],n=e[1],a=e[2],i=e[3],o=t+t,A=n+n,s=a+a,u=t*o,f=n*o,l=n*A,c=a*o,h=a*A,d=a*s,v=i*o,g=i*A,p=i*s;return r[0]=1-l-d,r[3]=f-p,r[6]=c+g,r[1]=f+p,r[4]=1-u-d,r[7]=h-v,r[2]=c-g,r[5]=h+v,r[8]=1-u-l,r}function IG(r,e){var t=e[0],n=e[1],a=e[2],i=e[3],o=e[4],A=e[5],s=e[6],u=e[7],f=e[8],l=e[9],c=e[10],h=e[11],d=e[12],v=e[13],g=e[14],p=e[15],y=t*A-n*o,m=t*s-a*o,w=t*u-i*o,B=n*s-a*A,E=n*u-i*A,b=a*u-i*s,C=f*v-l*d,_=f*g-c*d,x=f*p-h*d,M=l*g-c*v,S=l*p-h*v,I=c*p-h*g,D=y*I-m*S+w*M+B*x-E*_+b*C;return D?(D=1/D,r[0]=(A*I-s*S+u*M)*D,r[1]=(s*x-o*I-u*_)*D,r[2]=(o*S-A*x+u*C)*D,r[3]=(a*S-n*I-i*M)*D,r[4]=(t*I-a*x+i*_)*D,r[5]=(n*x-t*S-i*C)*D,r[6]=(v*b-g*E+p*B)*D,r[7]=(g*w-d*b-p*m)*D,r[8]=(d*E-v*w+p*y)*D,r):null}function TG(r,e,t){return r[0]=2/e,r[1]=0,r[2]=0,r[3]=0,r[4]=-2/t,r[5]=0,r[6]=-1,r[7]=1,r[8]=1,r}function FG(r){return"mat3("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+")"}function LG(r){return Math.hypot(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8])}function DG(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r}function EF(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r}function OG(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r}function UG(r,e,t,n){return r[0]=e[0]+t[0]*n,r[1]=e[1]+t[1]*n,r[2]=e[2]+t[2]*n,r[3]=e[3]+t[3]*n,r[4]=e[4]+t[4]*n,r[5]=e[5]+t[5]*n,r[6]=e[6]+t[6]*n,r[7]=e[7]+t[7]*n,r[8]=e[8]+t[8]*n,r}function NG(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]}function kG(r,e){var t=r[0],n=r[1],a=r[2],i=r[3],o=r[4],A=r[5],s=r[6],u=r[7],f=r[8],l=e[0],c=e[1],h=e[2],d=e[3],v=e[4],g=e[5],p=e[6],y=e[7],m=e[8];return Math.abs(t-l)<=Ct*Math.max(1,Math.abs(t),Math.abs(l))&&Math.abs(n-c)<=Ct*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(a-h)<=Ct*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(i-d)<=Ct*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(o-v)<=Ct*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(A-g)<=Ct*Math.max(1,Math.abs(A),Math.abs(g))&&Math.abs(s-p)<=Ct*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(u-y)<=Ct*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(f-m)<=Ct*Math.max(1,Math.abs(f),Math.abs(m))}var PG=Ji,QG=EF;const bF=Object.freeze(Object.defineProperty({__proto__:null,add:DG,adjoint:EG,clone:gG,copy:pG,create:BF,determinant:bG,equals:kG,exactEquals:NG,frob:LG,fromMat2d:SG,fromMat4:vG,fromQuat:MG,fromRotation:zw,fromScaling:Kw,fromTranslation:Gw,fromValues:yG,identity:wG,invert:Hw,mul:PG,multiply:Ji,multiplyScalar:OG,multiplyScalarAndAdd:UG,normalFromMat4:IG,projection:TG,rotate:CG,scale:_G,set:mG,str:FG,sub:QG,subtract:EF,translate:xG,transpose:BG},Symbol.toStringTag,{value:"Module"}));function RG(){var r=new er(16);return er!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r}function HG(r){var e=new er(16);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}function GG(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function zG(r,e,t,n,a,i,o,A,s,u,f,l,c,h,d,v){var g=new er(16);return g[0]=r,g[1]=e,g[2]=t,g[3]=n,g[4]=a,g[5]=i,g[6]=o,g[7]=A,g[8]=s,g[9]=u,g[10]=f,g[11]=l,g[12]=c,g[13]=h,g[14]=d,g[15]=v,g}function KG(r,e,t,n,a,i,o,A,s,u,f,l,c,h,d,v,g){return r[0]=e,r[1]=t,r[2]=n,r[3]=a,r[4]=i,r[5]=o,r[6]=A,r[7]=s,r[8]=u,r[9]=f,r[10]=l,r[11]=c,r[12]=h,r[13]=d,r[14]=v,r[15]=g,r}function xF(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function jG(r,e){if(r===e){var t=e[1],n=e[2],a=e[3],i=e[6],o=e[7],A=e[11];r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=t,r[6]=e[9],r[7]=e[13],r[8]=n,r[9]=i,r[11]=e[14],r[12]=a,r[13]=o,r[14]=A}else r[0]=e[0],r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=e[1],r[5]=e[5],r[6]=e[9],r[7]=e[13],r[8]=e[2],r[9]=e[6],r[10]=e[10],r[11]=e[14],r[12]=e[3],r[13]=e[7],r[14]=e[11],r[15]=e[15];return r}function $G(r,e){var t=e[0],n=e[1],a=e[2],i=e[3],o=e[4],A=e[5],s=e[6],u=e[7],f=e[8],l=e[9],c=e[10],h=e[11],d=e[12],v=e[13],g=e[14],p=e[15],y=t*A-n*o,m=t*s-a*o,w=t*u-i*o,B=n*s-a*A,E=n*u-i*A,b=a*u-i*s,C=f*v-l*d,_=f*g-c*d,x=f*p-h*d,M=l*g-c*v,S=l*p-h*v,I=c*p-h*g,D=y*I-m*S+w*M+B*x-E*_+b*C;return D?(D=1/D,r[0]=(A*I-s*S+u*M)*D,r[1]=(a*S-n*I-i*M)*D,r[2]=(v*b-g*E+p*B)*D,r[3]=(c*E-l*b-h*B)*D,r[4]=(s*x-o*I-u*_)*D,r[5]=(t*I-a*x+i*_)*D,r[6]=(g*w-d*b-p*m)*D,r[7]=(f*b-c*w+h*m)*D,r[8]=(o*S-A*x+u*C)*D,r[9]=(n*x-t*S-i*C)*D,r[10]=(d*E-v*w+p*y)*D,r[11]=(l*w-f*E-h*y)*D,r[12]=(A*_-o*M-s*C)*D,r[13]=(t*M-n*_+a*C)*D,r[14]=(v*m-d*B-g*y)*D,r[15]=(f*B-l*m+c*y)*D,r):null}function WG(r,e){var t=e[0],n=e[1],a=e[2],i=e[3],o=e[4],A=e[5],s=e[6],u=e[7],f=e[8],l=e[9],c=e[10],h=e[11],d=e[12],v=e[13],g=e[14],p=e[15];return r[0]=A*(c*p-h*g)-l*(s*p-u*g)+v*(s*h-u*c),r[1]=-(n*(c*p-h*g)-l*(a*p-i*g)+v*(a*h-i*c)),r[2]=n*(s*p-u*g)-A*(a*p-i*g)+v*(a*u-i*s),r[3]=-(n*(s*h-u*c)-A*(a*h-i*c)+l*(a*u-i*s)),r[4]=-(o*(c*p-h*g)-f*(s*p-u*g)+d*(s*h-u*c)),r[5]=t*(c*p-h*g)-f*(a*p-i*g)+d*(a*h-i*c),r[6]=-(t*(s*p-u*g)-o*(a*p-i*g)+d*(a*u-i*s)),r[7]=t*(s*h-u*c)-o*(a*h-i*c)+f*(a*u-i*s),r[8]=o*(l*p-h*v)-f*(A*p-u*v)+d*(A*h-u*l),r[9]=-(t*(l*p-h*v)-f*(n*p-i*v)+d*(n*h-i*l)),r[10]=t*(A*p-u*v)-o*(n*p-i*v)+d*(n*u-i*A),r[11]=-(t*(A*h-u*l)-o*(n*h-i*l)+f*(n*u-i*A)),r[12]=-(o*(l*g-c*v)-f*(A*g-s*v)+d*(A*c-s*l)),r[13]=t*(l*g-c*v)-f*(n*g-a*v)+d*(n*c-a*l),r[14]=-(t*(A*g-s*v)-o*(n*g-a*v)+d*(n*s-a*A)),r[15]=t*(A*c-s*l)-o*(n*c-a*l)+f*(n*s-a*A),r}function VG(r){var e=r[0],t=r[1],n=r[2],a=r[3],i=r[4],o=r[5],A=r[6],s=r[7],u=r[8],f=r[9],l=r[10],c=r[11],h=r[12],d=r[13],v=r[14],g=r[15],p=e*o-t*i,y=e*A-n*i,m=e*s-a*i,w=t*A-n*o,B=t*s-a*o,E=n*s-a*A,b=u*d-f*h,C=u*v-l*h,_=u*g-c*h,x=f*v-l*d,M=f*g-c*d,S=l*g-c*v;return p*S-y*M+m*x+w*_-B*C+E*b}function CF(r,e,t){var n=e[0],a=e[1],i=e[2],o=e[3],A=e[4],s=e[5],u=e[6],f=e[7],l=e[8],c=e[9],h=e[10],d=e[11],v=e[12],g=e[13],p=e[14],y=e[15],m=t[0],w=t[1],B=t[2],E=t[3];return r[0]=m*n+w*A+B*l+E*v,r[1]=m*a+w*s+B*c+E*g,r[2]=m*i+w*u+B*h+E*p,r[3]=m*o+w*f+B*d+E*y,m=t[4],w=t[5],B=t[6],E=t[7],r[4]=m*n+w*A+B*l+E*v,r[5]=m*a+w*s+B*c+E*g,r[6]=m*i+w*u+B*h+E*p,r[7]=m*o+w*f+B*d+E*y,m=t[8],w=t[9],B=t[10],E=t[11],r[8]=m*n+w*A+B*l+E*v,r[9]=m*a+w*s+B*c+E*g,r[10]=m*i+w*u+B*h+E*p,r[11]=m*o+w*f+B*d+E*y,m=t[12],w=t[13],B=t[14],E=t[15],r[12]=m*n+w*A+B*l+E*v,r[13]=m*a+w*s+B*c+E*g,r[14]=m*i+w*u+B*h+E*p,r[15]=m*o+w*f+B*d+E*y,r}function XG(r,e,t){var n=t[0],a=t[1],i=t[2],o,A,s,u,f,l,c,h,d,v,g,p;return e===r?(r[12]=e[0]*n+e[4]*a+e[8]*i+e[12],r[13]=e[1]*n+e[5]*a+e[9]*i+e[13],r[14]=e[2]*n+e[6]*a+e[10]*i+e[14],r[15]=e[3]*n+e[7]*a+e[11]*i+e[15]):(o=e[0],A=e[1],s=e[2],u=e[3],f=e[4],l=e[5],c=e[6],h=e[7],d=e[8],v=e[9],g=e[10],p=e[11],r[0]=o,r[1]=A,r[2]=s,r[3]=u,r[4]=f,r[5]=l,r[6]=c,r[7]=h,r[8]=d,r[9]=v,r[10]=g,r[11]=p,r[12]=o*n+f*a+d*i+e[12],r[13]=A*n+l*a+v*i+e[13],r[14]=s*n+c*a+g*i+e[14],r[15]=u*n+h*a+p*i+e[15]),r}function YG(r,e,t){var n=t[0],a=t[1],i=t[2];return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r[4]=e[4]*a,r[5]=e[5]*a,r[6]=e[6]*a,r[7]=e[7]*a,r[8]=e[8]*i,r[9]=e[9]*i,r[10]=e[10]*i,r[11]=e[11]*i,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function ZG(r,e,t,n){var a=n[0],i=n[1],o=n[2],A=Math.hypot(a,i,o),s,u,f,l,c,h,d,v,g,p,y,m,w,B,E,b,C,_,x,M,S,I,D,O;return A<Ct?null:(A=1/A,a*=A,i*=A,o*=A,s=Math.sin(t),u=Math.cos(t),f=1-u,l=e[0],c=e[1],h=e[2],d=e[3],v=e[4],g=e[5],p=e[6],y=e[7],m=e[8],w=e[9],B=e[10],E=e[11],b=a*a*f+u,C=i*a*f+o*s,_=o*a*f-i*s,x=a*i*f-o*s,M=i*i*f+u,S=o*i*f+a*s,I=a*o*f+i*s,D=i*o*f-a*s,O=o*o*f+u,r[0]=l*b+v*C+m*_,r[1]=c*b+g*C+w*_,r[2]=h*b+p*C+B*_,r[3]=d*b+y*C+E*_,r[4]=l*x+v*M+m*S,r[5]=c*x+g*M+w*S,r[6]=h*x+p*M+B*S,r[7]=d*x+y*M+E*S,r[8]=l*I+v*D+m*O,r[9]=c*I+g*D+w*O,r[10]=h*I+p*D+B*O,r[11]=d*I+y*D+E*O,e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r)}function qG(r,e,t){var n=Math.sin(t),a=Math.cos(t),i=e[4],o=e[5],A=e[6],s=e[7],u=e[8],f=e[9],l=e[10],c=e[11];return e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[4]=i*a+u*n,r[5]=o*a+f*n,r[6]=A*a+l*n,r[7]=s*a+c*n,r[8]=u*a-i*n,r[9]=f*a-o*n,r[10]=l*a-A*n,r[11]=c*a-s*n,r}function JG(r,e,t){var n=Math.sin(t),a=Math.cos(t),i=e[0],o=e[1],A=e[2],s=e[3],u=e[8],f=e[9],l=e[10],c=e[11];return e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=i*a-u*n,r[1]=o*a-f*n,r[2]=A*a-l*n,r[3]=s*a-c*n,r[8]=i*n+u*a,r[9]=o*n+f*a,r[10]=A*n+l*a,r[11]=s*n+c*a,r}function e6(r,e,t){var n=Math.sin(t),a=Math.cos(t),i=e[0],o=e[1],A=e[2],s=e[3],u=e[4],f=e[5],l=e[6],c=e[7];return e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=i*a+u*n,r[1]=o*a+f*n,r[2]=A*a+l*n,r[3]=s*a+c*n,r[4]=u*a-i*n,r[5]=f*a-o*n,r[6]=l*a-A*n,r[7]=c*a-s*n,r}function t6(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r}function r6(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=e[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function n6(r,e,t){var n=t[0],a=t[1],i=t[2],o=Math.hypot(n,a,i),A,s,u;return o<Ct?null:(o=1/o,n*=o,a*=o,i*=o,A=Math.sin(e),s=Math.cos(e),u=1-s,r[0]=n*n*u+s,r[1]=a*n*u+i*A,r[2]=i*n*u-a*A,r[3]=0,r[4]=n*a*u-i*A,r[5]=a*a*u+s,r[6]=i*a*u+n*A,r[7]=0,r[8]=n*i*u+a*A,r[9]=a*i*u-n*A,r[10]=i*i*u+s,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r)}function a6(r,e){var t=Math.sin(e),n=Math.cos(e);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=n,r[6]=t,r[7]=0,r[8]=0,r[9]=-t,r[10]=n,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function i6(r,e){var t=Math.sin(e),n=Math.cos(e);return r[0]=n,r[1]=0,r[2]=-t,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=t,r[9]=0,r[10]=n,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function o6(r,e){var t=Math.sin(e),n=Math.cos(e);return r[0]=n,r[1]=t,r[2]=0,r[3]=0,r[4]=-t,r[5]=n,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function _F(r,e,t){var n=e[0],a=e[1],i=e[2],o=e[3],A=n+n,s=a+a,u=i+i,f=n*A,l=n*s,c=n*u,h=a*s,d=a*u,v=i*u,g=o*A,p=o*s,y=o*u;return r[0]=1-(h+v),r[1]=l+y,r[2]=c-p,r[3]=0,r[4]=l-y,r[5]=1-(f+v),r[6]=d+g,r[7]=0,r[8]=c+p,r[9]=d-g,r[10]=1-(f+h),r[11]=0,r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r}function A6(r,e){var t=new er(3),n=-e[0],a=-e[1],i=-e[2],o=e[3],A=e[4],s=e[5],u=e[6],f=e[7],l=n*n+a*a+i*i+o*o;return l>0?(t[0]=(A*o+f*n+s*i-u*a)*2/l,t[1]=(s*o+f*a+u*n-A*i)*2/l,t[2]=(u*o+f*i+A*a-s*n)*2/l):(t[0]=(A*o+f*n+s*i-u*a)*2,t[1]=(s*o+f*a+u*n-A*i)*2,t[2]=(u*o+f*i+A*a-s*n)*2),_F(r,e,t),r}function SF(r,e){return r[0]=e[12],r[1]=e[13],r[2]=e[14],r}function MF(r,e){var t=e[0],n=e[1],a=e[2],i=e[4],o=e[5],A=e[6],s=e[8],u=e[9],f=e[10];return r[0]=Math.hypot(t,n,a),r[1]=Math.hypot(i,o,A),r[2]=Math.hypot(s,u,f),r}function IF(r,e){var t=new er(3);MF(t,e);var n=1/t[0],a=1/t[1],i=1/t[2],o=e[0]*n,A=e[1]*a,s=e[2]*i,u=e[4]*n,f=e[5]*a,l=e[6]*i,c=e[8]*n,h=e[9]*a,d=e[10]*i,v=o+f+d,g=0;return v>0?(g=Math.sqrt(v+1)*2,r[3]=.25*g,r[0]=(l-h)/g,r[1]=(c-s)/g,r[2]=(A-u)/g):o>f&&o>d?(g=Math.sqrt(1+o-f-d)*2,r[3]=(l-h)/g,r[0]=.25*g,r[1]=(A+u)/g,r[2]=(c+s)/g):f>d?(g=Math.sqrt(1+f-o-d)*2,r[3]=(c-s)/g,r[0]=(A+u)/g,r[1]=.25*g,r[2]=(l+h)/g):(g=Math.sqrt(1+d-o-f)*2,r[3]=(A-u)/g,r[0]=(c+s)/g,r[1]=(l+h)/g,r[2]=.25*g),r}function s6(r,e,t,n){var a=e[0],i=e[1],o=e[2],A=e[3],s=a+a,u=i+i,f=o+o,l=a*s,c=a*u,h=a*f,d=i*u,v=i*f,g=o*f,p=A*s,y=A*u,m=A*f,w=n[0],B=n[1],E=n[2];return r[0]=(1-(d+g))*w,r[1]=(c+m)*w,r[2]=(h-y)*w,r[3]=0,r[4]=(c-m)*B,r[5]=(1-(l+g))*B,r[6]=(v+p)*B,r[7]=0,r[8]=(h+y)*E,r[9]=(v-p)*E,r[10]=(1-(l+d))*E,r[11]=0,r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r}function u6(r,e,t,n,a){var i=e[0],o=e[1],A=e[2],s=e[3],u=i+i,f=o+o,l=A+A,c=i*u,h=i*f,d=i*l,v=o*f,g=o*l,p=A*l,y=s*u,m=s*f,w=s*l,B=n[0],E=n[1],b=n[2],C=a[0],_=a[1],x=a[2],M=(1-(v+p))*B,S=(h+w)*B,I=(d-m)*B,D=(h-w)*E,O=(1-(c+p))*E,F=(g+y)*E,U=(d+m)*b,Q=(g-y)*b,N=(1-(c+v))*b;return r[0]=M,r[1]=S,r[2]=I,r[3]=0,r[4]=D,r[5]=O,r[6]=F,r[7]=0,r[8]=U,r[9]=Q,r[10]=N,r[11]=0,r[12]=t[0]+C-(M*C+D*_+U*x),r[13]=t[1]+_-(S*C+O*_+Q*x),r[14]=t[2]+x-(I*C+F*_+N*x),r[15]=1,r}function f6(r,e){var t=e[0],n=e[1],a=e[2],i=e[3],o=t+t,A=n+n,s=a+a,u=t*o,f=n*o,l=n*A,c=a*o,h=a*A,d=a*s,v=i*o,g=i*A,p=i*s;return r[0]=1-l-d,r[1]=f+p,r[2]=c-g,r[3]=0,r[4]=f-p,r[5]=1-u-d,r[6]=h+v,r[7]=0,r[8]=c+g,r[9]=h-v,r[10]=1-u-l,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function l6(r,e,t,n,a,i,o){var A=1/(t-e),s=1/(a-n),u=1/(i-o);return r[0]=i*2*A,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=i*2*s,r[6]=0,r[7]=0,r[8]=(t+e)*A,r[9]=(a+n)*s,r[10]=(o+i)*u,r[11]=-1,r[12]=0,r[13]=0,r[14]=o*i*2*u,r[15]=0,r}function TF(r,e,t,n,a){var i=1/Math.tan(e/2),o;return r[0]=i/t,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=i,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,a!=null&&a!==1/0?(o=1/(n-a),r[10]=(a+n)*o,r[14]=2*a*n*o):(r[10]=-1,r[14]=-2*n),r}var c6=TF;function h6(r,e,t,n,a){var i=1/Math.tan(e/2),o;return r[0]=i/t,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=i,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,a!=null&&a!==1/0?(o=1/(n-a),r[10]=a*o,r[14]=a*n*o):(r[10]=-1,r[14]=-n),r}function d6(r,e,t,n){var a=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),A=Math.tan(e.rightDegrees*Math.PI/180),s=2/(o+A),u=2/(a+i);return r[0]=s,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=u,r[6]=0,r[7]=0,r[8]=-((o-A)*s*.5),r[9]=(a-i)*u*.5,r[10]=n/(t-n),r[11]=-1,r[12]=0,r[13]=0,r[14]=n*t/(t-n),r[15]=0,r}function FF(r,e,t,n,a,i,o){var A=1/(e-t),s=1/(n-a),u=1/(i-o);return r[0]=-2*A,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*s,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*u,r[11]=0,r[12]=(e+t)*A,r[13]=(a+n)*s,r[14]=(o+i)*u,r[15]=1,r}var v6=FF;function g6(r,e,t,n,a,i,o){var A=1/(e-t),s=1/(n-a),u=1/(i-o);return r[0]=-2*A,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*s,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=u,r[11]=0,r[12]=(e+t)*A,r[13]=(a+n)*s,r[14]=i*u,r[15]=1,r}function p6(r,e,t,n){var a,i,o,A,s,u,f,l,c,h,d=e[0],v=e[1],g=e[2],p=n[0],y=n[1],m=n[2],w=t[0],B=t[1],E=t[2];return Math.abs(d-w)<Ct&&Math.abs(v-B)<Ct&&Math.abs(g-E)<Ct?xF(r):(f=d-w,l=v-B,c=g-E,h=1/Math.hypot(f,l,c),f*=h,l*=h,c*=h,a=y*c-m*l,i=m*f-p*c,o=p*l-y*f,h=Math.hypot(a,i,o),h?(h=1/h,a*=h,i*=h,o*=h):(a=0,i=0,o=0),A=l*o-c*i,s=c*a-f*o,u=f*i-l*a,h=Math.hypot(A,s,u),h?(h=1/h,A*=h,s*=h,u*=h):(A=0,s=0,u=0),r[0]=a,r[1]=A,r[2]=f,r[3]=0,r[4]=i,r[5]=s,r[6]=l,r[7]=0,r[8]=o,r[9]=u,r[10]=c,r[11]=0,r[12]=-(a*d+i*v+o*g),r[13]=-(A*d+s*v+u*g),r[14]=-(f*d+l*v+c*g),r[15]=1,r)}function y6(r,e,t,n){var a=e[0],i=e[1],o=e[2],A=n[0],s=n[1],u=n[2],f=a-t[0],l=i-t[1],c=o-t[2],h=f*f+l*l+c*c;h>0&&(h=1/Math.sqrt(h),f*=h,l*=h,c*=h);var d=s*c-u*l,v=u*f-A*c,g=A*l-s*f;return h=d*d+v*v+g*g,h>0&&(h=1/Math.sqrt(h),d*=h,v*=h,g*=h),r[0]=d,r[1]=v,r[2]=g,r[3]=0,r[4]=l*g-c*v,r[5]=c*d-f*g,r[6]=f*v-l*d,r[7]=0,r[8]=f,r[9]=l,r[10]=c,r[11]=0,r[12]=a,r[13]=i,r[14]=o,r[15]=1,r}function m6(r){return"mat4("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+", "+r[9]+", "+r[10]+", "+r[11]+", "+r[12]+", "+r[13]+", "+r[14]+", "+r[15]+")"}function w6(r){return Math.hypot(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])}function B6(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r[9]=e[9]+t[9],r[10]=e[10]+t[10],r[11]=e[11]+t[11],r[12]=e[12]+t[12],r[13]=e[13]+t[13],r[14]=e[14]+t[14],r[15]=e[15]+t[15],r}function LF(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r[9]=e[9]-t[9],r[10]=e[10]-t[10],r[11]=e[11]-t[11],r[12]=e[12]-t[12],r[13]=e[13]-t[13],r[14]=e[14]-t[14],r[15]=e[15]-t[15],r}function E6(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r[9]=e[9]*t,r[10]=e[10]*t,r[11]=e[11]*t,r[12]=e[12]*t,r[13]=e[13]*t,r[14]=e[14]*t,r[15]=e[15]*t,r}function b6(r,e,t,n){return r[0]=e[0]+t[0]*n,r[1]=e[1]+t[1]*n,r[2]=e[2]+t[2]*n,r[3]=e[3]+t[3]*n,r[4]=e[4]+t[4]*n,r[5]=e[5]+t[5]*n,r[6]=e[6]+t[6]*n,r[7]=e[7]+t[7]*n,r[8]=e[8]+t[8]*n,r[9]=e[9]+t[9]*n,r[10]=e[10]+t[10]*n,r[11]=e[11]+t[11]*n,r[12]=e[12]+t[12]*n,r[13]=e[13]+t[13]*n,r[14]=e[14]+t[14]*n,r[15]=e[15]+t[15]*n,r}function x6(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]&&r[9]===e[9]&&r[10]===e[10]&&r[11]===e[11]&&r[12]===e[12]&&r[13]===e[13]&&r[14]===e[14]&&r[15]===e[15]}function C6(r,e){var t=r[0],n=r[1],a=r[2],i=r[3],o=r[4],A=r[5],s=r[6],u=r[7],f=r[8],l=r[9],c=r[10],h=r[11],d=r[12],v=r[13],g=r[14],p=r[15],y=e[0],m=e[1],w=e[2],B=e[3],E=e[4],b=e[5],C=e[6],_=e[7],x=e[8],M=e[9],S=e[10],I=e[11],D=e[12],O=e[13],F=e[14],U=e[15];return Math.abs(t-y)<=Ct*Math.max(1,Math.abs(t),Math.abs(y))&&Math.abs(n-m)<=Ct*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(a-w)<=Ct*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(i-B)<=Ct*Math.max(1,Math.abs(i),Math.abs(B))&&Math.abs(o-E)<=Ct*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(A-b)<=Ct*Math.max(1,Math.abs(A),Math.abs(b))&&Math.abs(s-C)<=Ct*Math.max(1,Math.abs(s),Math.abs(C))&&Math.abs(u-_)<=Ct*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(f-x)<=Ct*Math.max(1,Math.abs(f),Math.abs(x))&&Math.abs(l-M)<=Ct*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(c-S)<=Ct*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(h-I)<=Ct*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(d-D)<=Ct*Math.max(1,Math.abs(d),Math.abs(D))&&Math.abs(v-O)<=Ct*Math.max(1,Math.abs(v),Math.abs(O))&&Math.abs(g-F)<=Ct*Math.max(1,Math.abs(g),Math.abs(F))&&Math.abs(p-U)<=Ct*Math.max(1,Math.abs(p),Math.abs(U))}var _6=CF,S6=LF;const M6=Object.freeze(Object.defineProperty({__proto__:null,add:B6,adjoint:WG,clone:HG,copy:GG,create:RG,determinant:VG,equals:C6,exactEquals:x6,frob:w6,fromQuat:f6,fromQuat2:A6,fromRotation:n6,fromRotationTranslation:_F,fromRotationTranslationScale:s6,fromRotationTranslationScaleOrigin:u6,fromScaling:r6,fromTranslation:t6,fromValues:zG,fromXRotation:a6,fromYRotation:i6,fromZRotation:o6,frustum:l6,getRotation:IF,getScaling:MF,getTranslation:SF,identity:xF,invert:$G,lookAt:p6,mul:_6,multiply:CF,multiplyScalar:E6,multiplyScalarAndAdd:b6,ortho:v6,orthoNO:FF,orthoZO:g6,perspective:c6,perspectiveFromFieldOfView:d6,perspectiveNO:TF,perspectiveZO:h6,rotate:ZG,rotateX:qG,rotateY:JG,rotateZ:e6,scale:YG,set:KG,str:m6,sub:S6,subtract:LF,targetTo:y6,translate:XG,transpose:jG},Symbol.toStringTag,{value:"Module"}));function jw(){var r=new er(3);return er!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function I6(r){var e=new er(3);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}function DF(r){var e=r[0],t=r[1],n=r[2];return Math.hypot(e,t,n)}function Sm(r,e,t){var n=new er(3);return n[0]=r,n[1]=e,n[2]=t,n}function T6(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r}function F6(r,e,t,n){return r[0]=e,r[1]=t,r[2]=n,r}function L6(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r}function OF(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r}function UF(r,e,t){return r[0]=e[0]*t[0],r[1]=e[1]*t[1],r[2]=e[2]*t[2],r}function NF(r,e,t){return r[0]=e[0]/t[0],r[1]=e[1]/t[1],r[2]=e[2]/t[2],r}function D6(r,e){return r[0]=Math.ceil(e[0]),r[1]=Math.ceil(e[1]),r[2]=Math.ceil(e[2]),r}function O6(r,e){return r[0]=Math.floor(e[0]),r[1]=Math.floor(e[1]),r[2]=Math.floor(e[2]),r}function U6(r,e,t){return r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.min(e[2],t[2]),r}function N6(r,e,t){return r[0]=Math.max(e[0],t[0]),r[1]=Math.max(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r}function k6(r,e){return r[0]=Math.round(e[0]),r[1]=Math.round(e[1]),r[2]=Math.round(e[2]),r}function P6(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r}function Q6(r,e,t,n){return r[0]=e[0]+t[0]*n,r[1]=e[1]+t[1]*n,r[2]=e[2]+t[2]*n,r}function kF(r,e){var t=e[0]-r[0],n=e[1]-r[1],a=e[2]-r[2];return Math.hypot(t,n,a)}function PF(r,e){var t=e[0]-r[0],n=e[1]-r[1],a=e[2]-r[2];return t*t+n*n+a*a}function QF(r){var e=r[0],t=r[1],n=r[2];return e*e+t*t+n*n}function R6(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r}function H6(r,e){return r[0]=1/e[0],r[1]=1/e[1],r[2]=1/e[2],r}function RF(r,e){var t=e[0],n=e[1],a=e[2],i=t*t+n*n+a*a;return i>0&&(i=1/Math.sqrt(i)),r[0]=e[0]*i,r[1]=e[1]*i,r[2]=e[2]*i,r}function $w(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}function Yd(r,e,t){var n=e[0],a=e[1],i=e[2],o=t[0],A=t[1],s=t[2];return r[0]=a*s-i*A,r[1]=i*o-n*s,r[2]=n*A-a*o,r}function G6(r,e,t,n){var a=e[0],i=e[1],o=e[2];return r[0]=a+n*(t[0]-a),r[1]=i+n*(t[1]-i),r[2]=o+n*(t[2]-o),r}function z6(r,e,t,n,a,i){var o=i*i,A=o*(2*i-3)+1,s=o*(i-2)+i,u=o*(i-1),f=o*(3-2*i);return r[0]=e[0]*A+t[0]*s+n[0]*u+a[0]*f,r[1]=e[1]*A+t[1]*s+n[1]*u+a[1]*f,r[2]=e[2]*A+t[2]*s+n[2]*u+a[2]*f,r}function K6(r,e,t,n,a,i){var o=1-i,A=o*o,s=i*i,u=A*o,f=3*i*A,l=3*s*o,c=s*i;return r[0]=e[0]*u+t[0]*f+n[0]*l+a[0]*c,r[1]=e[1]*u+t[1]*f+n[1]*l+a[1]*c,r[2]=e[2]*u+t[2]*f+n[2]*l+a[2]*c,r}function j6(r,e){e=e||1;var t=ui()*2*Math.PI,n=ui()*2-1,a=Math.sqrt(1-n*n)*e;return r[0]=Math.cos(t)*a,r[1]=Math.sin(t)*a,r[2]=n*e,r}function $6(r,e,t){var n=e[0],a=e[1],i=e[2],o=t[3]*n+t[7]*a+t[11]*i+t[15];return o=o||1,r[0]=(t[0]*n+t[4]*a+t[8]*i+t[12])/o,r[1]=(t[1]*n+t[5]*a+t[9]*i+t[13])/o,r[2]=(t[2]*n+t[6]*a+t[10]*i+t[14])/o,r}function Og(r,e,t){var n=e[0],a=e[1],i=e[2];return r[0]=n*t[0]+a*t[3]+i*t[6],r[1]=n*t[1]+a*t[4]+i*t[7],r[2]=n*t[2]+a*t[5]+i*t[8],r}function W6(r,e,t){var n=t[0],a=t[1],i=t[2],o=t[3],A=e[0],s=e[1],u=e[2],f=a*u-i*s,l=i*A-n*u,c=n*s-a*A,h=a*c-i*l,d=i*f-n*c,v=n*l-a*f,g=o*2;return f*=g,l*=g,c*=g,h*=2,d*=2,v*=2,r[0]=A+f+h,r[1]=s+l+d,r[2]=u+c+v,r}function V6(r,e,t,n){var a=[],i=[];return a[0]=e[0]-t[0],a[1]=e[1]-t[1],a[2]=e[2]-t[2],i[0]=a[0],i[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),i[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),r[0]=i[0]+t[0],r[1]=i[1]+t[1],r[2]=i[2]+t[2],r}function X6(r,e,t,n){var a=[],i=[];return a[0]=e[0]-t[0],a[1]=e[1]-t[1],a[2]=e[2]-t[2],i[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),i[1]=a[1],i[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),r[0]=i[0]+t[0],r[1]=i[1]+t[1],r[2]=i[2]+t[2],r}function Y6(r,e,t,n){var a=[],i=[];return a[0]=e[0]-t[0],a[1]=e[1]-t[1],a[2]=e[2]-t[2],i[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),i[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),i[2]=a[2],r[0]=i[0]+t[0],r[1]=i[1]+t[1],r[2]=i[2]+t[2],r}function Z6(r,e){var t=r[0],n=r[1],a=r[2],i=e[0],o=e[1],A=e[2],s=Math.sqrt(t*t+n*n+a*a),u=Math.sqrt(i*i+o*o+A*A),f=s*u,l=f&&$w(r,e)/f;return Math.acos(Math.min(Math.max(l,-1),1))}function q6(r){return r[0]=0,r[1]=0,r[2]=0,r}function J6(r){return"vec3("+r[0]+", "+r[1]+", "+r[2]+")"}function e8(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]}function t8(r,e){var t=r[0],n=r[1],a=r[2],i=e[0],o=e[1],A=e[2];return Math.abs(t-i)<=Ct*Math.max(1,Math.abs(t),Math.abs(i))&&Math.abs(n-o)<=Ct*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(a-A)<=Ct*Math.max(1,Math.abs(a),Math.abs(A))}var r8=OF,n8=UF,a8=NF,i8=kF,o8=PF,HF=DF,A8=QF,s8=function(){var r=jw();return function(e,t,n,a,i,o){var A,s;for(t||(t=3),n||(n=0),a?s=Math.min(a*t+n,e.length):s=e.length,A=n;A<s;A+=t)r[0]=e[A],r[1]=e[A+1],r[2]=e[A+2],i(r,r,o),e[A]=r[0],e[A+1]=r[1],e[A+2]=r[2];return e}}();const u8=Object.freeze(Object.defineProperty({__proto__:null,add:L6,angle:Z6,bezier:K6,ceil:D6,clone:I6,copy:T6,create:jw,cross:Yd,dist:i8,distance:kF,div:a8,divide:NF,dot:$w,equals:t8,exactEquals:e8,floor:O6,forEach:s8,fromValues:Sm,hermite:z6,inverse:H6,len:HF,length:DF,lerp:G6,max:N6,min:U6,mul:n8,multiply:UF,negate:R6,normalize:RF,random:j6,rotateX:V6,rotateY:X6,rotateZ:Y6,round:k6,scale:P6,scaleAndAdd:Q6,set:F6,sqrDist:o8,sqrLen:A8,squaredDistance:PF,squaredLength:QF,str:J6,sub:r8,subtract:OF,transformMat3:Og,transformMat4:$6,transformQuat:W6,zero:q6},Symbol.toStringTag,{value:"Module"}));function GF(){var r=new er(4);return er!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}function zF(r){var e=new er(4);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}function KF(r,e,t,n){var a=new er(4);return a[0]=r,a[1]=e,a[2]=t,a[3]=n,a}function jF(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r}function $F(r,e,t,n,a){return r[0]=e,r[1]=t,r[2]=n,r[3]=a,r}function WF(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r}function VF(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r}function XF(r,e,t){return r[0]=e[0]*t[0],r[1]=e[1]*t[1],r[2]=e[2]*t[2],r[3]=e[3]*t[3],r}function YF(r,e,t){return r[0]=e[0]/t[0],r[1]=e[1]/t[1],r[2]=e[2]/t[2],r[3]=e[3]/t[3],r}function f8(r,e){return r[0]=Math.ceil(e[0]),r[1]=Math.ceil(e[1]),r[2]=Math.ceil(e[2]),r[3]=Math.ceil(e[3]),r}function l8(r,e){return r[0]=Math.floor(e[0]),r[1]=Math.floor(e[1]),r[2]=Math.floor(e[2]),r[3]=Math.floor(e[3]),r}function c8(r,e,t){return r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.min(e[2],t[2]),r[3]=Math.min(e[3],t[3]),r}function h8(r,e,t){return r[0]=Math.max(e[0],t[0]),r[1]=Math.max(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r[3]=Math.max(e[3],t[3]),r}function d8(r,e){return r[0]=Math.round(e[0]),r[1]=Math.round(e[1]),r[2]=Math.round(e[2]),r[3]=Math.round(e[3]),r}function ZF(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r}function v8(r,e,t,n){return r[0]=e[0]+t[0]*n,r[1]=e[1]+t[1]*n,r[2]=e[2]+t[2]*n,r[3]=e[3]+t[3]*n,r}function qF(r,e){var t=e[0]-r[0],n=e[1]-r[1],a=e[2]-r[2],i=e[3]-r[3];return Math.hypot(t,n,a,i)}function JF(r,e){var t=e[0]-r[0],n=e[1]-r[1],a=e[2]-r[2],i=e[3]-r[3];return t*t+n*n+a*a+i*i}function Ww(r){var e=r[0],t=r[1],n=r[2],a=r[3];return Math.hypot(e,t,n,a)}function Vw(r){var e=r[0],t=r[1],n=r[2],a=r[3];return e*e+t*t+n*n+a*a}function g8(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r[3]=-e[3],r}function p8(r,e){return r[0]=1/e[0],r[1]=1/e[1],r[2]=1/e[2],r[3]=1/e[3],r}function eL(r,e){var t=e[0],n=e[1],a=e[2],i=e[3],o=t*t+n*n+a*a+i*i;return o>0&&(o=1/Math.sqrt(o)),r[0]=t*o,r[1]=n*o,r[2]=a*o,r[3]=i*o,r}function tL(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]+r[3]*e[3]}function y8(r,e,t,n){var a=t[0]*n[1]-t[1]*n[0],i=t[0]*n[2]-t[2]*n[0],o=t[0]*n[3]-t[3]*n[0],A=t[1]*n[2]-t[2]*n[1],s=t[1]*n[3]-t[3]*n[1],u=t[2]*n[3]-t[3]*n[2],f=e[0],l=e[1],c=e[2],h=e[3];return r[0]=l*u-c*s+h*A,r[1]=-(f*u)+c*o-h*i,r[2]=f*s-l*o+h*a,r[3]=-(f*A)+l*i-c*a,r}function rL(r,e,t,n){var a=e[0],i=e[1],o=e[2],A=e[3];return r[0]=a+n*(t[0]-a),r[1]=i+n*(t[1]-i),r[2]=o+n*(t[2]-o),r[3]=A+n*(t[3]-A),r}function m8(r,e){e=e||1;var t,n,a,i,o,A;do t=ui()*2-1,n=ui()*2-1,o=t*t+n*n;while(o>=1);do a=ui()*2-1,i=ui()*2-1,A=a*a+i*i;while(A>=1);var s=Math.sqrt((1-o)/A);return r[0]=e*t,r[1]=e*n,r[2]=e*a*s,r[3]=e*i*s,r}function w8(r,e,t){var n=e[0],a=e[1],i=e[2],o=e[3];return r[0]=t[0]*n+t[4]*a+t[8]*i+t[12]*o,r[1]=t[1]*n+t[5]*a+t[9]*i+t[13]*o,r[2]=t[2]*n+t[6]*a+t[10]*i+t[14]*o,r[3]=t[3]*n+t[7]*a+t[11]*i+t[15]*o,r}function B8(r,e,t){var n=e[0],a=e[1],i=e[2],o=t[0],A=t[1],s=t[2],u=t[3],f=u*n+A*i-s*a,l=u*a+s*n-o*i,c=u*i+o*a-A*n,h=-o*n-A*a-s*i;return r[0]=f*u+h*-o+l*-s-c*-A,r[1]=l*u+h*-A+c*-o-f*-s,r[2]=c*u+h*-s+f*-A-l*-o,r[3]=e[3],r}function E8(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r}function b8(r){return"vec4("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+")"}function nL(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]}function aL(r,e){var t=r[0],n=r[1],a=r[2],i=r[3],o=e[0],A=e[1],s=e[2],u=e[3];return Math.abs(t-o)<=Ct*Math.max(1,Math.abs(t),Math.abs(o))&&Math.abs(n-A)<=Ct*Math.max(1,Math.abs(n),Math.abs(A))&&Math.abs(a-s)<=Ct*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(i-u)<=Ct*Math.max(1,Math.abs(i),Math.abs(u))}var x8=VF,C8=XF,_8=YF,S8=qF,M8=JF,I8=Ww,T8=Vw,F8=function(){var r=GF();return function(e,t,n,a,i,o){var A,s;for(t||(t=4),n||(n=0),a?s=Math.min(a*t+n,e.length):s=e.length,A=n;A<s;A+=t)r[0]=e[A],r[1]=e[A+1],r[2]=e[A+2],r[3]=e[A+3],i(r,r,o),e[A]=r[0],e[A+1]=r[1],e[A+2]=r[2],e[A+3]=r[3];return e}}();const L8=Object.freeze(Object.defineProperty({__proto__:null,add:WF,ceil:f8,clone:zF,copy:jF,create:GF,cross:y8,dist:S8,distance:qF,div:_8,divide:YF,dot:tL,equals:aL,exactEquals:nL,floor:l8,forEach:F8,fromValues:KF,inverse:p8,len:I8,length:Ww,lerp:rL,max:h8,min:c8,mul:C8,multiply:XF,negate:g8,normalize:eL,random:m8,round:d8,scale:ZF,scaleAndAdd:v8,set:$F,sqrDist:M8,sqrLen:T8,squaredDistance:JF,squaredLength:Vw,str:b8,sub:x8,subtract:VF,transformMat4:w8,transformQuat:B8,zero:E8},Symbol.toStringTag,{value:"Module"}));function Mv(){var r=new er(4);return er!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function D8(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r}function iL(r,e,t){t=t*.5;var n=Math.sin(t);return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=Math.cos(t),r}function O8(r,e){var t=Math.acos(e[3])*2,n=Math.sin(t/2);return n>Ct?(r[0]=e[0]/n,r[1]=e[1]/n,r[2]=e[2]/n):(r[0]=1,r[1]=0,r[2]=0),t}function U8(r,e){var t=Yw(r,e);return Math.acos(2*t*t-1)}function oL(r,e,t){var n=e[0],a=e[1],i=e[2],o=e[3],A=t[0],s=t[1],u=t[2],f=t[3];return r[0]=n*f+o*A+a*u-i*s,r[1]=a*f+o*s+i*A-n*u,r[2]=i*f+o*u+n*s-a*A,r[3]=o*f-n*A-a*s-i*u,r}function AL(r,e,t){t*=.5;var n=e[0],a=e[1],i=e[2],o=e[3],A=Math.sin(t),s=Math.cos(t);return r[0]=n*s+o*A,r[1]=a*s+i*A,r[2]=i*s-a*A,r[3]=o*s-n*A,r}function sL(r,e,t){t*=.5;var n=e[0],a=e[1],i=e[2],o=e[3],A=Math.sin(t),s=Math.cos(t);return r[0]=n*s-i*A,r[1]=a*s+o*A,r[2]=i*s+n*A,r[3]=o*s-a*A,r}function uL(r,e,t){t*=.5;var n=e[0],a=e[1],i=e[2],o=e[3],A=Math.sin(t),s=Math.cos(t);return r[0]=n*s+a*A,r[1]=a*s-n*A,r[2]=i*s+o*A,r[3]=o*s-i*A,r}function N8(r,e){var t=e[0],n=e[1],a=e[2];return r[0]=t,r[1]=n,r[2]=a,r[3]=Math.sqrt(Math.abs(1-t*t-n*n-a*a)),r}function fL(r,e){var t=e[0],n=e[1],a=e[2],i=e[3],o=Math.sqrt(t*t+n*n+a*a),A=Math.exp(i),s=o>0?A*Math.sin(o)/o:0;return r[0]=t*s,r[1]=n*s,r[2]=a*s,r[3]=A*Math.cos(o),r}function lL(r,e){var t=e[0],n=e[1],a=e[2],i=e[3],o=Math.sqrt(t*t+n*n+a*a),A=o>0?Math.atan2(o,i)/o:0;return r[0]=t*A,r[1]=n*A,r[2]=a*A,r[3]=.5*Math.log(t*t+n*n+a*a+i*i),r}function k8(r,e,t){return lL(r,e),hL(r,r,t),fL(r,r),r}function Zd(r,e,t,n){var a=e[0],i=e[1],o=e[2],A=e[3],s=t[0],u=t[1],f=t[2],l=t[3],c,h,d,v,g;return h=a*s+i*u+o*f+A*l,h<0&&(h=-h,s=-s,u=-u,f=-f,l=-l),1-h>Ct?(c=Math.acos(h),d=Math.sin(c),v=Math.sin((1-n)*c)/d,g=Math.sin(n*c)/d):(v=1-n,g=n),r[0]=v*a+g*s,r[1]=v*i+g*u,r[2]=v*o+g*f,r[3]=v*A+g*l,r}function P8(r){var e=ui(),t=ui(),n=ui(),a=Math.sqrt(1-e),i=Math.sqrt(e);return r[0]=a*Math.sin(2*Math.PI*t),r[1]=a*Math.cos(2*Math.PI*t),r[2]=i*Math.sin(2*Math.PI*n),r[3]=i*Math.cos(2*Math.PI*n),r}function Q8(r,e){var t=e[0],n=e[1],a=e[2],i=e[3],o=t*t+n*n+a*a+i*i,A=o?1/o:0;return r[0]=-t*A,r[1]=-n*A,r[2]=-a*A,r[3]=i*A,r}function R8(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r[3]=e[3],r}function cL(r,e){var t=e[0]+e[4]+e[8],n;if(t>0)n=Math.sqrt(t+1),r[3]=.5*n,n=.5/n,r[0]=(e[5]-e[7])*n,r[1]=(e[6]-e[2])*n,r[2]=(e[1]-e[3])*n;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[a*3+a]&&(a=2);var i=(a+1)%3,o=(a+2)%3;n=Math.sqrt(e[a*3+a]-e[i*3+i]-e[o*3+o]+1),r[a]=.5*n,n=.5/n,r[3]=(e[i*3+o]-e[o*3+i])*n,r[i]=(e[i*3+a]+e[a*3+i])*n,r[o]=(e[o*3+a]+e[a*3+o])*n}return r}function H8(r,e,t,n){var a=.5*Math.PI/180;e*=a,t*=a,n*=a;var i=Math.sin(e),o=Math.cos(e),A=Math.sin(t),s=Math.cos(t),u=Math.sin(n),f=Math.cos(n);return r[0]=i*s*f-o*A*u,r[1]=o*A*f+i*s*u,r[2]=o*s*u-i*A*f,r[3]=o*s*f+i*A*u,r}function G8(r){return"quat("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+")"}var z8=zF,K8=KF,Xw=jF,j8=$F,$8=WF,W8=oL,hL=ZF,Yw=tL,V8=rL,Zw=Ww,X8=Zw,qw=Vw,Y8=qw,Jw=eL,Z8=nL,q8=aL,J8=function(){var r=jw(),e=Sm(1,0,0),t=Sm(0,1,0);return function(n,a,i){var o=$w(a,i);return o<-.999999?(Yd(r,e,a),HF(r)<1e-6&&Yd(r,t,a),RF(r,r),iL(n,r,Math.PI),n):o>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(Yd(r,a,i),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=1+o,Jw(n,n))}}(),ez=function(){var r=Mv(),e=Mv();return function(t,n,a,i,o,A){return Zd(r,n,o,A),Zd(e,a,i,A),Zd(t,r,e,2*A*(1-A)),t}}(),tz=function(){var r=BF();return function(e,t,n,a){return r[0]=n[0],r[3]=n[1],r[6]=n[2],r[1]=a[0],r[4]=a[1],r[7]=a[2],r[2]=-t[0],r[5]=-t[1],r[8]=-t[2],Jw(e,cL(e,r))}}();const rz=Object.freeze(Object.defineProperty({__proto__:null,add:$8,calculateW:N8,clone:z8,conjugate:R8,copy:Xw,create:Mv,dot:Yw,equals:q8,exactEquals:Z8,exp:fL,fromEuler:H8,fromMat3:cL,fromValues:K8,getAngle:U8,getAxisAngle:O8,identity:D8,invert:Q8,len:X8,length:Zw,lerp:V8,ln:lL,mul:W8,multiply:oL,normalize:Jw,pow:k8,random:P8,rotateX:AL,rotateY:sL,rotateZ:uL,rotationTo:J8,scale:hL,set:j8,setAxes:tz,setAxisAngle:iL,slerp:Zd,sqlerp:ez,sqrLen:Y8,squaredLength:qw,str:G8},Symbol.toStringTag,{value:"Module"}));function nz(){var r=new er(8);return er!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[4]=0,r[5]=0,r[6]=0,r[7]=0),r[3]=1,r}function az(r){var e=new er(8);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e}function iz(r,e,t,n,a,i,o,A){var s=new er(8);return s[0]=r,s[1]=e,s[2]=t,s[3]=n,s[4]=a,s[5]=i,s[6]=o,s[7]=A,s}function oz(r,e,t,n,a,i,o){var A=new er(8);A[0]=r,A[1]=e,A[2]=t,A[3]=n;var s=a*.5,u=i*.5,f=o*.5;return A[4]=s*n+u*t-f*e,A[5]=u*n+f*r-s*t,A[6]=f*n+s*e-u*r,A[7]=-s*r-u*e-f*t,A}function dL(r,e,t){var n=t[0]*.5,a=t[1]*.5,i=t[2]*.5,o=e[0],A=e[1],s=e[2],u=e[3];return r[0]=o,r[1]=A,r[2]=s,r[3]=u,r[4]=n*u+a*s-i*A,r[5]=a*u+i*o-n*s,r[6]=i*u+n*A-a*o,r[7]=-n*o-a*A-i*s,r}function Az(r,e){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r[4]=e[0]*.5,r[5]=e[1]*.5,r[6]=e[2]*.5,r[7]=0,r}function sz(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=0,r[5]=0,r[6]=0,r[7]=0,r}function uz(r,e){var t=Mv();IF(t,e);var n=new er(3);return SF(n,e),dL(r,t,n),r}function vL(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r}function fz(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r[4]=0,r[5]=0,r[6]=0,r[7]=0,r}function lz(r,e,t,n,a,i,o,A,s){return r[0]=e,r[1]=t,r[2]=n,r[3]=a,r[4]=i,r[5]=o,r[6]=A,r[7]=s,r}var cz=Xw;function hz(r,e){return r[0]=e[4],r[1]=e[5],r[2]=e[6],r[3]=e[7],r}var dz=Xw;function vz(r,e){return r[4]=e[0],r[5]=e[1],r[6]=e[2],r[7]=e[3],r}function gz(r,e){var t=e[4],n=e[5],a=e[6],i=e[7],o=-e[0],A=-e[1],s=-e[2],u=e[3];return r[0]=(t*u+i*o+n*s-a*A)*2,r[1]=(n*u+i*A+a*o-t*s)*2,r[2]=(a*u+i*s+t*A-n*o)*2,r}function pz(r,e,t){var n=e[0],a=e[1],i=e[2],o=e[3],A=t[0]*.5,s=t[1]*.5,u=t[2]*.5,f=e[4],l=e[5],c=e[6],h=e[7];return r[0]=n,r[1]=a,r[2]=i,r[3]=o,r[4]=o*A+a*u-i*s+f,r[5]=o*s+i*A-n*u+l,r[6]=o*u+n*s-a*A+c,r[7]=-n*A-a*s-i*u+h,r}function yz(r,e,t){var n=-e[0],a=-e[1],i=-e[2],o=e[3],A=e[4],s=e[5],u=e[6],f=e[7],l=A*o+f*n+s*i-u*a,c=s*o+f*a+u*n-A*i,h=u*o+f*i+A*a-s*n,d=f*o-A*n-s*a-u*i;return AL(r,e,t),n=r[0],a=r[1],i=r[2],o=r[3],r[4]=l*o+d*n+c*i-h*a,r[5]=c*o+d*a+h*n-l*i,r[6]=h*o+d*i+l*a-c*n,r[7]=d*o-l*n-c*a-h*i,r}function mz(r,e,t){var n=-e[0],a=-e[1],i=-e[2],o=e[3],A=e[4],s=e[5],u=e[6],f=e[7],l=A*o+f*n+s*i-u*a,c=s*o+f*a+u*n-A*i,h=u*o+f*i+A*a-s*n,d=f*o-A*n-s*a-u*i;return sL(r,e,t),n=r[0],a=r[1],i=r[2],o=r[3],r[4]=l*o+d*n+c*i-h*a,r[5]=c*o+d*a+h*n-l*i,r[6]=h*o+d*i+l*a-c*n,r[7]=d*o-l*n-c*a-h*i,r}function wz(r,e,t){var n=-e[0],a=-e[1],i=-e[2],o=e[3],A=e[4],s=e[5],u=e[6],f=e[7],l=A*o+f*n+s*i-u*a,c=s*o+f*a+u*n-A*i,h=u*o+f*i+A*a-s*n,d=f*o-A*n-s*a-u*i;return uL(r,e,t),n=r[0],a=r[1],i=r[2],o=r[3],r[4]=l*o+d*n+c*i-h*a,r[5]=c*o+d*a+h*n-l*i,r[6]=h*o+d*i+l*a-c*n,r[7]=d*o-l*n-c*a-h*i,r}function Bz(r,e,t){var n=t[0],a=t[1],i=t[2],o=t[3],A=e[0],s=e[1],u=e[2],f=e[3];return r[0]=A*o+f*n+s*i-u*a,r[1]=s*o+f*a+u*n-A*i,r[2]=u*o+f*i+A*a-s*n,r[3]=f*o-A*n-s*a-u*i,A=e[4],s=e[5],u=e[6],f=e[7],r[4]=A*o+f*n+s*i-u*a,r[5]=s*o+f*a+u*n-A*i,r[6]=u*o+f*i+A*a-s*n,r[7]=f*o-A*n-s*a-u*i,r}function Ez(r,e,t){var n=e[0],a=e[1],i=e[2],o=e[3],A=t[0],s=t[1],u=t[2],f=t[3];return r[0]=n*f+o*A+a*u-i*s,r[1]=a*f+o*s+i*A-n*u,r[2]=i*f+o*u+n*s-a*A,r[3]=o*f-n*A-a*s-i*u,A=t[4],s=t[5],u=t[6],f=t[7],r[4]=n*f+o*A+a*u-i*s,r[5]=a*f+o*s+i*A-n*u,r[6]=i*f+o*u+n*s-a*A,r[7]=o*f-n*A-a*s-i*u,r}function bz(r,e,t,n){if(Math.abs(n)<Ct)return vL(r,e);var a=Math.hypot(t[0],t[1],t[2]);n=n*.5;var i=Math.sin(n),o=i*t[0]/a,A=i*t[1]/a,s=i*t[2]/a,u=Math.cos(n),f=e[0],l=e[1],c=e[2],h=e[3];r[0]=f*u+h*o+l*s-c*A,r[1]=l*u+h*A+c*o-f*s,r[2]=c*u+h*s+f*A-l*o,r[3]=h*u-f*o-l*A-c*s;var d=e[4],v=e[5],g=e[6],p=e[7];return r[4]=d*u+p*o+v*s-g*A,r[5]=v*u+p*A+g*o-d*s,r[6]=g*u+p*s+d*A-v*o,r[7]=p*u-d*o-v*A-g*s,r}function xz(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r}function gL(r,e,t){var n=e[0],a=e[1],i=e[2],o=e[3],A=t[4],s=t[5],u=t[6],f=t[7],l=e[4],c=e[5],h=e[6],d=e[7],v=t[0],g=t[1],p=t[2],y=t[3];return r[0]=n*y+o*v+a*p-i*g,r[1]=a*y+o*g+i*v-n*p,r[2]=i*y+o*p+n*g-a*v,r[3]=o*y-n*v-a*g-i*p,r[4]=n*f+o*A+a*u-i*s+l*y+d*v+c*p-h*g,r[5]=a*f+o*s+i*A-n*u+c*y+d*g+h*v-l*p,r[6]=i*f+o*u+n*s-a*A+h*y+d*p+l*g-c*v,r[7]=o*f-n*A-a*s-i*u+d*y-l*v-c*g-h*p,r}var Cz=gL;function _z(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r}var pL=Yw;function Sz(r,e,t,n){var a=1-n;return pL(e,t)<0&&(n=-n),r[0]=e[0]*a+t[0]*n,r[1]=e[1]*a+t[1]*n,r[2]=e[2]*a+t[2]*n,r[3]=e[3]*a+t[3]*n,r[4]=e[4]*a+t[4]*n,r[5]=e[5]*a+t[5]*n,r[6]=e[6]*a+t[6]*n,r[7]=e[7]*a+t[7]*n,r}function Mz(r,e){var t=Ug(e);return r[0]=-e[0]/t,r[1]=-e[1]/t,r[2]=-e[2]/t,r[3]=e[3]/t,r[4]=-e[4]/t,r[5]=-e[5]/t,r[6]=-e[6]/t,r[7]=e[7]/t,r}function Iz(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r[3]=e[3],r[4]=-e[4],r[5]=-e[5],r[6]=-e[6],r[7]=e[7],r}var yL=Zw,Tz=yL,Ug=qw,Fz=Ug;function Lz(r,e){var t=Ug(e);if(t>0){t=Math.sqrt(t);var n=e[0]/t,a=e[1]/t,i=e[2]/t,o=e[3]/t,A=e[4],s=e[5],u=e[6],f=e[7],l=n*A+a*s+i*u+o*f;r[0]=n,r[1]=a,r[2]=i,r[3]=o,r[4]=(A-n*l)/t,r[5]=(s-a*l)/t,r[6]=(u-i*l)/t,r[7]=(f-o*l)/t}return r}function Dz(r){return"quat2("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+")"}function Oz(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]}function Uz(r,e){var t=r[0],n=r[1],a=r[2],i=r[3],o=r[4],A=r[5],s=r[6],u=r[7],f=e[0],l=e[1],c=e[2],h=e[3],d=e[4],v=e[5],g=e[6],p=e[7];return Math.abs(t-f)<=Ct*Math.max(1,Math.abs(t),Math.abs(f))&&Math.abs(n-l)<=Ct*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(a-c)<=Ct*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(i-h)<=Ct*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(o-d)<=Ct*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(A-v)<=Ct*Math.max(1,Math.abs(A),Math.abs(v))&&Math.abs(s-g)<=Ct*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(u-p)<=Ct*Math.max(1,Math.abs(u),Math.abs(p))}const Nz=Object.freeze(Object.defineProperty({__proto__:null,add:xz,clone:az,conjugate:Iz,copy:vL,create:nz,dot:pL,equals:Uz,exactEquals:Oz,fromMat4:uz,fromRotation:sz,fromRotationTranslation:dL,fromRotationTranslationValues:oz,fromTranslation:Az,fromValues:iz,getDual:hz,getReal:cz,getTranslation:gz,identity:fz,invert:Mz,len:Tz,length:yL,lerp:Sz,mul:Cz,multiply:gL,normalize:Lz,rotateAroundAxis:bz,rotateByQuatAppend:Bz,rotateByQuatPrepend:Ez,rotateX:yz,rotateY:mz,rotateZ:wz,scale:_z,set:lz,setDual:vz,setReal:dz,sqrLen:Fz,squaredLength:Ug,str:Dz,translate:pz},Symbol.toStringTag,{value:"Module"}));function mL(){var r=new er(2);return er!=Float32Array&&(r[0]=0,r[1]=0),r}function kz(r){var e=new er(2);return e[0]=r[0],e[1]=r[1],e}function Pz(r,e){var t=new er(2);return t[0]=r,t[1]=e,t}function Qz(r,e){return r[0]=e[0],r[1]=e[1],r}function Rz(r,e,t){return r[0]=e,r[1]=t,r}function Tn(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r}function wL(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r}function BL(r,e,t){return r[0]=e[0]*t[0],r[1]=e[1]*t[1],r}function EL(r,e,t){return r[0]=e[0]/t[0],r[1]=e[1]/t[1],r}function Hz(r,e){return r[0]=Math.ceil(e[0]),r[1]=Math.ceil(e[1]),r}function Gz(r,e){return r[0]=Math.floor(e[0]),r[1]=Math.floor(e[1]),r}function tA(r,e,t){return r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r}function rA(r,e,t){return r[0]=Math.max(e[0],t[0]),r[1]=Math.max(e[1],t[1]),r}function zz(r,e){return r[0]=Math.round(e[0]),r[1]=Math.round(e[1]),r}function Wn(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r}function Kz(r,e,t,n){return r[0]=e[0]+t[0]*n,r[1]=e[1]+t[1]*n,r}function Iv(r,e){var t=e[0]-r[0],n=e[1]-r[1];return Math.hypot(t,n)}function bL(r,e){var t=e[0]-r[0],n=e[1]-r[1];return t*t+n*n}function xL(r){var e=r[0],t=r[1];return Math.hypot(e,t)}function CL(r){var e=r[0],t=r[1];return e*e+t*t}function jz(r,e){return r[0]=-e[0],r[1]=-e[1],r}function $z(r,e){return r[0]=1/e[0],r[1]=1/e[1],r}function mA(r,e){var t=e[0],n=e[1],a=t*t+n*n;return a>0&&(a=1/Math.sqrt(a)),r[0]=e[0]*a,r[1]=e[1]*a,r}function eB(r,e){return r[0]*e[0]+r[1]*e[1]}function Wz(r,e,t){var n=e[0]*t[1]-e[1]*t[0];return r[0]=r[1]=0,r[2]=n,r}function Vz(r,e,t,n){var a=e[0],i=e[1];return r[0]=a+n*(t[0]-a),r[1]=i+n*(t[1]-i),r}function Xz(r,e){e=e||1;var t=ui()*2*Math.PI;return r[0]=Math.cos(t)*e,r[1]=Math.sin(t)*e,r}function Yz(r,e,t){var n=e[0],a=e[1];return r[0]=t[0]*n+t[2]*a,r[1]=t[1]*n+t[3]*a,r}function Zz(r,e,t){var n=e[0],a=e[1];return r[0]=t[0]*n+t[2]*a+t[4],r[1]=t[1]*n+t[3]*a+t[5],r}function qz(r,e,t){var n=e[0],a=e[1];return r[0]=t[0]*n+t[3]*a+t[6],r[1]=t[1]*n+t[4]*a+t[7],r}function Jz(r,e,t){var n=e[0],a=e[1];return r[0]=t[0]*n+t[4]*a+t[12],r[1]=t[1]*n+t[5]*a+t[13],r}function eK(r,e,t,n){var a=e[0]-t[0],i=e[1]-t[1],o=Math.sin(n),A=Math.cos(n);return r[0]=a*A-i*o+t[0],r[1]=a*o+i*A+t[1],r}function _L(r,e){var t=r[0],n=r[1],a=e[0],i=e[1],o=Math.sqrt(t*t+n*n)*Math.sqrt(a*a+i*i),A=o&&(t*a+n*i)/o;return Math.acos(Math.min(Math.max(A,-1),1))}function tK(r){return r[0]=0,r[1]=0,r}function rK(r){return"vec2("+r[0]+", "+r[1]+")"}function tB(r,e){return r[0]===e[0]&&r[1]===e[1]}function nK(r,e){var t=r[0],n=r[1],a=e[0],i=e[1];return Math.abs(t-a)<=Ct*Math.max(1,Math.abs(t),Math.abs(a))&&Math.abs(n-i)<=Ct*Math.max(1,Math.abs(n),Math.abs(i))}var aK=xL,qd=wL,iK=BL,oK=EL,AK=Iv,sK=bL,uK=CL,fK=function(){var r=mL();return function(e,t,n,a,i,o){var A,s;for(t||(t=2),n||(n=0),a?s=Math.min(a*t+n,e.length):s=e.length,A=n;A<s;A+=t)r[0]=e[A],r[1]=e[A+1],i(r,r,o),e[A]=r[0],e[A+1]=r[1];return e}}();const lK=Object.freeze(Object.defineProperty({__proto__:null,add:Tn,angle:_L,ceil:Hz,clone:kz,copy:Qz,create:mL,cross:Wz,dist:AK,distance:Iv,div:oK,divide:EL,dot:eB,equals:nK,exactEquals:tB,floor:Gz,forEach:fK,fromValues:Pz,inverse:$z,len:aK,length:xL,lerp:Vz,max:rA,min:tA,mul:iK,multiply:BL,negate:jz,normalize:mA,random:Xz,rotate:eK,round:zz,scale:Wn,scaleAndAdd:Kz,set:Rz,sqrDist:sK,sqrLen:uK,squaredDistance:bL,squaredLength:CL,str:rK,sub:qd,subtract:wL,transformMat2:Yz,transformMat2d:Zz,transformMat3:qz,transformMat4:Jz,zero:tK},Symbol.toStringTag,{value:"Module"})),cK=Object.freeze(Object.defineProperty({__proto__:null,glMatrix:mH,mat2:KH,mat2d:dG,mat3:bF,mat4:M6,quat:rz,quat2:Nz,vec2:lK,vec3:u8,vec4:L8},Symbol.toStringTag,{value:"Module"}));function hK(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return Gw(n,t),Ji(r,n,e)}function dK(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return zw(n,t),Ji(r,n,e)}function vK(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return Kw(n,t),Ji(r,n,e)}function gK(r,e,t){return Ji(r,t,e)}function Xa(r,e){for(var t=r?[].concat(r):[1,0,0,0,1,0,0,0,1],n=0,a=e.length;n<a;n++){var i=e[n];switch(i[0]){case"t":hK(t,t,[i[1],i[2]]);break;case"s":vK(t,t,[i[1],i[2]]);break;case"r":dK(t,t,i[1]);break;case"m":gK(t,t,i[1]);break}}return t}var Ss=function(e,t){var n=e.nodes,a=e.edges,i=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(function(A,s){o[A.id]=s;var u=[];i.push(u)}),a&&a.forEach(function(A){var s=A.source,u=A.target,f=o[s],l=o[u];!f&&f!==0||!l&&l!==0||(i[f][l]=1,t||(i[l][f]=1))}),i},pK=function(e,t){return e===t},tC=function(){function r(e,t){t===void 0&&(t=null),this.value=e,this.next=t}return r.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},r}(),SL=function(){function r(e){e===void 0&&(e=pK),this.head=null,this.tail=null,this.compare=e}return r.prototype.prepend=function(e){var t=new tC(e,this.head);return this.head=t,this.tail||(this.tail=t),this},r.prototype.append=function(e){var t=new tC(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},r.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var n=this.head;if(n!==null)for(;n.next;)this.compare(n.next.value,e)?(t=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,e)&&(this.tail=n),t},r.prototype.find=function(e){var t=e.value,n=t===void 0?void 0:t,a=e.callback,i=a===void 0?void 0:a;if(!this.head)return null;for(var o=this.head;o;){if(i&&i(o.value)||n!==void 0&&this.compare(o.value,n))return o;o=o.next}return null},r.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},r.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},r.prototype.fromArray=function(e){var t=this;return e.forEach(function(n){return t.append(n)}),this},r.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},r.prototype.reverse=function(){for(var e=this.head,t=null,n=null;e;)n=e.next,e.next=t,t=e,e=n;this.tail=this.head,this.head=t},r.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(t){return t.toString(e)}).toString()},r}(),yK=function(){function r(){this.linkedList=new SL}return r.prototype.isEmpty=function(){return!this.linkedList.head},r.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},r.prototype.enqueue=function(e){this.linkedList.append(e)},r.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},r.prototype.toString=function(e){return this.linkedList.toString(e)},r}(),Ca=function(e,t,n){t===void 0&&(t=[]);var a=t.filter(function(s){return s.source===e||s.target===e});if(n==="target"){var i=function(u){return u.source===e};return a.filter(i).map(function(s){return s.target})}if(n==="source"){var o=function(u){return u.target===e};return a.filter(o).map(function(s){return s.source})}var A=function(u){return u.source===e?u.target:u.source};return a.map(A)},mK=function(e,t){return t.filter(function(n){return n.source===e})},Jd=function(e,t){return t.filter(function(n){return n.source===e||n.target===e})},ML=function(e){e===void 0&&(e=0);var t="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(t).concat(n)};function wK(r){r===void 0&&(r={});var e=r,t=function(){},n=function(){var a={};return function(i){var o=i.next,A=o;return a[A]?!1:(a[A]=!0,!0)}}();return e.allowTraversal=r.allowTraversal||n,e.enter=r.enter||t,e.leave=r.leave||t,e}var IL=function(e,t,n,a){a===void 0&&(a=!0);var i=wK(n),o=new yK,A=e.edges,s=A===void 0?[]:A;o.enqueue(t);for(var u="",f=function(){var c=o.dequeue();i.enter({current:c,previous:u}),Ca(c,s,a?"target":void 0).forEach(function(h){i.allowTraversal({previous:u,current:c,next:h})&&o.enqueue(h)}),i.leave({current:c,previous:u}),u=c};!o.isEmpty();)f()},BK=function(e){for(var t=e.nodes,n=t===void 0?[]:t,a=e.edges,i=a===void 0?[]:a,o=[],A={},s=[],u=function h(d){s.push(d),A[d.id]=!0;for(var v=Ca(d.id,i),g=function(m){var w=v[m];if(!A[w]){var B=n.filter(function(E){return E.id===w});B.length>0&&h(B[0])}},p=0;p<v.length;++p)g(p)},f=0;f<n.length;f++){var l=n[f];if(!A[l.id]){u(l);for(var c=[];s.length>0;)c.push(s.pop());o.push(c)}}return o},TL=function(e){for(var t=e.nodes,n=t===void 0?[]:t,a=e.edges,i=a===void 0?[]:a,o=[],A={},s={},u={},f=[],l=0,c=function g(p){s[p.id]=l,u[p.id]=l,l+=1,o.push(p),A[p.id]=!0;for(var y=Ca(p.id,i,"target").filter(function(b){return n.map(function(C){return C.id}).indexOf(b)>-1}),m=function(C){var _=y[C];if(!s[_]&&s[_]!==0){var x=n.filter(function(M){return M.id===_});x.length>0&&g(x[0]),u[p.id]=Math.min(u[p.id],u[_])}else A[_]&&(u[p.id]=Math.min(u[p.id],s[_]))},w=0;w<y.length;w++)m(w);if(u[p.id]===s[p.id]){for(var B=[];o.length>0;){var E=o.pop();if(A[E.id]=!1,B.push(E),E===p)break}B.length>0&&f.push(B)}},h=0,d=n;h<d.length;h++){var v=d[h];!s[v.id]&&s[v.id]!==0&&c(v)}return f};function rB(r,e){return e?TL(r):BK(r)}var Oo=function(e){var t={},n=e.nodes,a=n===void 0?[]:n,i=e.edges,o=i===void 0?[]:i;return a.forEach(function(A){t[A.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(A){t[A.source].degree++,t[A.source].outDegree++,t[A.target].degree++,t[A.target].inDegree++}),t},FL=function(e,t){var n=Oo(e);return n[t]?Oo(e)[t].inDegree:0},LL=function(e,t){var n=Oo(e);return n[t]?Oo(e)[t].outDegree:0};function EK(r){r===void 0&&(r={});var e=r,t=function(){},n=function(){var a={};return function(i){var o=i.next;return a[o]?!1:(a[o]=!0,!0)}}();return e.allowTraversal=r.allowTraversal||n,e.enter=r.enter||t,e.leave=r.leave||t,e}function DL(r,e,t,n){n.enter({current:e,previous:t});var a=r.edges,i=a===void 0?[]:a;Ca(e,i,"target").forEach(function(o){n.allowTraversal({previous:t,current:e,next:o})&&DL(r,o,e,n)}),n.leave({current:e,previous:t})}function nB(r,e,t){DL(r,e,"",EK(t))}var aB=function(e){var t=null,n=e.nodes,a=n===void 0?[]:n,i={},o={},A={},s={};a.forEach(function(l){o[l.id]=l});for(var u={enter:function(c){var h=c.current,d=c.previous;if(A[h]){t={};for(var v=h,g=d;g!==h;)t[v]=g,v=g,g=i[g];t[v]=g}else A[h]=h,delete o[h],i[h]=d},leave:function(c){var h=c.current;s[h]=h,delete A[h]},allowTraversal:function(c){var h=c.next;return t?!1:!s[h]}};Object.keys(o).length;){var f=Object.keys(o)[0];nB(e,f,u)}return t},iB=function(e,t,n){var a,i;n===void 0&&(n=!0);for(var o=[],A=rB(e,!1),s=0,u=A;s<u.length;s++){var f=u[s];if(f.length)for(var l=f[0],c=l.id,h=[l],d=(a={},a[c]=l,a),v=(i={},i[c]=new Set,i);h.length>0;)for(var g=h.pop(),p=g.id,y=Ca(p,e.edges),m=function(E){var b,C=y[E],_=e.nodes.find(function(O){return O.id===C});if(C===p)o.push((b={},b[C]=g,b));else if(!(C in v))d[C]=g,h.push(_),v[C]=new Set([g]);else if(!v[p].has(_)){for(var x=!0,M=[_,g],S=d[p];v[C].size&&!v[C].has(S)&&(M.push(S),S!==d[S.id]);)S=d[S.id];if(M.push(S),t&&n?(x=!1,M.findIndex(function(O){return t.indexOf(O.id)>-1})>-1&&(x=!0)):t&&!n&&M.findIndex(function(O){return t.indexOf(O.id)>-1})>-1&&(x=!1),x){for(var I={},D=1;D<M.length;D+=1)I[M[D-1].id]=M[D];M.length&&(I[M[M.length-1].id]=M[0]),o.push(I)}v[C].add(g)}},w=0;w<y.length;w+=1)m(w)}return o},oB=function(e,t,n){n===void 0&&(n=!0);for(var a=[],i=new Set,o=[],A=[],s={},u={},f=function(S){for(var I=[S];I.length>0;){var D=I.pop();i.has(D)&&(i.delete(D),o[D.id].forEach(function(O){I.push(O)}),o[D.id].clear())}},l=function M(S,I,D){var O=!1;if(t&&n===!1&&t.indexOf(S.id)>-1)return O;a.push(S),i.add(S);for(var F=D[S.id],U=0;U<F.length;U+=1){var Q=s[F[U]];if(Q===I){for(var N={},R=1;R<a.length;R+=1)N[a[R-1].id]=a[R];a.length&&(N[a[a.length-1].id]=a[0]),A.push(N),O=!0}else i.has(Q)||M(Q,I,D)&&(O=!0)}if(O)f(S);else for(var U=0;U<F.length;U+=1){var Q=s[F[U]];o[Q.id].has(S)||o[Q.id].add(S)}return a.pop(),O},c=e.nodes,h=c===void 0?[]:c,d=0;d<h.length;d+=1){var v=h[d],g=v.id;u[g]=d,s[d]=v}if(t&&n)for(var p=function(S){var I=t[S];u[h[S].id]=u[I],u[I]=0,s[0]=h.find(function(D){return D.id===I}),s[u[h[S].id]]=h[S]},d=0;d<t.length;d++)p(d);for(var y=function(S){for(var I,D,O=1/0,F=0;F<S.length;F+=1)for(var U=S[F],Q=0;Q<U.length;Q++){var N=u[U[Q].id];N<O&&(O=N,D=F)}for(var R=S[D],J=[],F=0;F<R.length;F+=1){var re=R[F];J[re.id]=[];for(var ee=0,q=Ca(re.id,e.edges,"target").filter(function(Re){return R.map(function(tt){return tt.id}).indexOf(Re)>-1});ee<q.length;ee++){var ve=q[ee];ve===re.id&&!(n===!1&&t.indexOf(re.id)>-1)?A.push((I={},I[re.id]=re,I)):J[re.id].push(u[ve])}}return{component:R,adjList:J,minIdx:O}},m=0;m<h.length;){var w=h.filter(function(M){return u[M.id]>=m}),B=TL({nodes:w,edges:e.edges}).filter(function(M){return M.length>1});if(B.length===0)break;var E=y(B),b=E.minIdx,C=E.adjList,_=E.component;if(_.length>1){_.forEach(function(M){o[M.id]=new Set});var x=s[b];if(t&&n&&t.indexOf(x.id)===-1)return A;l(x,x,C),m=b+1}else break}return A},OL=function(e,t,n,a){return a===void 0&&(a=!0),t?oB(e,n,a):iB(e,n,a)},bK=function(e,t,n){for(var a=1/0,i,o=0;o<t.length;o++){var A=t[o].id;!n[A]&&e[A]<=a&&(a=e[A],i=t[o])}return i},$l=function(e,t,n,a){var i=e.nodes,o=i===void 0?[]:i,A=e.edges,s=A===void 0?[]:A,u={},f={},l={};o.forEach(function(y,m){var w=y.id;f[w]=1/0,w===t&&(f[w]=0)});for(var c=o.length,h=function(m){var w=bK(f,o,u),B=w.id;if(u[B]=!0,f[B]===1/0)return"continue";var E=[];n?E=mK(B,s):E=Jd(B,s),E.forEach(function(b){var C=b.target,_=b.source,x=C===B?_:C,M=a&&b[a]?b[a]:1;f[x]>f[w.id]+M?(f[x]=f[w.id]+M,l[x]=[w.id]):f[x]===f[w.id]+M&&l[x].push(w.id)})},d=0;d<c;d++)h();l[t]=[t];var v={};for(var g in f)f[g]!==1/0&&UL(t,g,l,v);var p={};for(var g in v)p[g]=v[g][0];return{length:f,path:p,allPath:v}};function UL(r,e,t,n){if(r===e)return[r];if(n[e])return n[e];for(var a=[],i=0,o=t[e];i<o.length;i++){var A=o[i],s=UL(r,A,t,n);if(!s)return;for(var u=0,f=s;u<f.length;u++){var l=f[u];yt(l)?a.push(li(li([],l,!0),[e],!1)):a.push([l,e])}}return n[e]=a,n[e]}var NL=function(e,t,n,a,i){var o=$l(e,t,a,i),A=o.length,s=o.path,u=o.allPath;return{length:A[n],path:s[n],allPath:u[n]}},kL=function(e,t,n,a){var i;if(t===n)return[[t]];var o=e.edges,A=o===void 0?[]:o,s=[t],u=(i={},i[t]=!0,i),f=[],l=[],c=a?Ca(t,A,"target"):Ca(t,A);for(f.push(c);s.length>0&&f.length>0;){var h=f[f.length-1];if(h.length){var d=h.shift();d&&(s.push(d),u[d]=!0,c=a?Ca(d,A,"target"):Ca(d,A),f.push(c.filter(function(p){return!u[p]})))}else{var v=s.pop();u[v]=!1,f.pop();continue}if(s[s.length-1]===n){var g=s.map(function(y){return y});l.push(g);var v=s.pop();u[v]=!1,f.pop()}}return l},Wl=function(e,t){for(var n=Ss(e,t),a=[],i=n.length,o=0;o<i;o+=1){a[o]=[];for(var A=0;A<i;A+=1)o===A?a[o][A]=0:n[o][A]===0||!n[o][A]?a[o][A]=1/0:a[o][A]=n[o][A]}for(var s=0;s<i;s+=1)for(var o=0;o<i;o+=1)for(var A=0;A<i;A+=1)a[o][A]>a[o][s]+a[s][A]&&(a[o][A]=a[o][s]+a[s][A]);return a},PL=function(e,t,n,a){t===void 0&&(t=!1),n===void 0&&(n="weight"),a===void 0&&(a=1e3);var i=e.nodes,o=i===void 0?[]:i,A=e.edges,s=A===void 0?[]:A,u={},f={};o.forEach(function(m,w){var B=ML();m.clusterId=B,u[B]={id:B,nodes:[m]},f[m.id]={node:m,idx:w}});var l=Ss(e,t),c={};l.forEach(function(m,w){var B=o[w].id;c[B]={},m.forEach(function(E,b){if(E){var C=o[b].id;c[B][C]=E}})});for(var h=0,d=function(){var w=!1;if(o.forEach(function(B){var E={};Object.keys(c[B.id]).forEach(function(D){var O=c[B.id][D],F=f[D].node,U=F.clusterId;E[U]||(E[U]=0),E[U]+=O});var b=-1/0,C=[];if(Object.keys(E).forEach(function(D){b<E[D]?(b=E[D],C=[D]):b===E[D]&&C.push(D)}),!(C.length===1&&C[0]===B.clusterId)){var _=C.indexOf(B.clusterId);if(_>=0&&C.splice(_,1),C&&C.length){w=!0;var x=u[B.clusterId],M=x.nodes.indexOf(B);x.nodes.splice(M,1);var S=Math.floor(Math.random()*C.length),I=u[C[S]];I.nodes.push(B),B.clusterId=I.id}}}),!w)return"break";h++};h<a;){var v=d();if(v==="break")break}Object.keys(u).forEach(function(m){var w=u[m];(!w.nodes||!w.nodes.length)&&delete u[m]});var g=[],p={};s.forEach(function(m){var w=m.source,B=m.target,E=m[n]||1,b=f[w].node.clusterId,C=f[B].node.clusterId,_="".concat(b,"---").concat(C);if(p[_])p[_].weight+=E,p[_].count++;else{var x={source:b,target:C,weight:E,count:1};p[_]=x,g.push(x)}});var y=[];return Object.keys(u).forEach(function(m){y.push(u[m])}),{clusters:y,clusterEdges:g}},za=function(){function r(e){this.arr=e}return r.prototype.getArr=function(){return this.arr||[]},r.prototype.add=function(e){var t,n=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new r(n);if(!(n!=null&&n.length))return new r(this.arr);if(this.arr.length===n.length){var a=[];for(var i in this.arr)a[i]=this.arr[i]+n[i];return new r(a)}},r.prototype.subtract=function(e){var t,n=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new r(n);if(!(n!=null&&n.length))return new r(this.arr);if(this.arr.length===n.length){var a=[];for(var i in this.arr)a[i]=this.arr[i]-n[i];return new r(a)}},r.prototype.avg=function(e){var t=[];if(e!==0)for(var n in this.arr)t[n]=this.arr[n]/e;return new r(t)},r.prototype.negate=function(){var e=[];for(var t in this.arr)e[t]=-this.arr[t];return new r(e)},r.prototype.squareEuclideanDistance=function(e){var t,n=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var a=0;for(var i in this.arr)a+=Math.pow(this.arr[i]-e.arr[i],2);return a}},r.prototype.euclideanDistance=function(e){var t,n=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var a=0;for(var i in this.arr)a+=Math.pow(this.arr[i]-e.arr[i],2);return Math.sqrt(a)}else console.error("The two vectors are unequal in length.")},r.prototype.normalize=function(){var e=[],t=Xt(this.arr);t.sort(function(o,A){return o-A});var n=t[t.length-1],a=t[0];for(var i in this.arr)e[i]=(this.arr[i]-a)/(n-a);return new r(e)},r.prototype.norm2=function(){var e;if(!(!((e=this.arr)===null||e===void 0)&&e.length))return 0;var t=0;for(var n in this.arr)t+=Math.pow(this.arr[n],2);return Math.sqrt(t)},r.prototype.dot=function(e){var t,n=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var a=0;for(var i in this.arr)a+=this.arr[i]*e.arr[i];return a}else console.error("The two vectors are unequal in length.")},r.prototype.equal=function(e){var t,n=e.arr;if(((t=this.arr)===null||t===void 0?void 0:t.length)!==(n==null?void 0:n.length))return!1;for(var a in this.arr)if(this.arr[a]!==n[a])return!1;return!0},r}(),AB=function(e,t){t===void 0&&(t=void 0);var n=[];return e.forEach(function(a){t===void 0&&n.push(a),a[t]!==void 0&&n.push(a[t])}),n},Ai;(function(r){r.EuclideanDistance="euclideanDistance"})(Ai||(Ai={}));var xK=function(e,t,n){var a=[];t!=null&&t.length?a=t:(e.forEach(function(o){a=a.concat(Object.keys(o))}),a=Kl(a));var i={};return a.forEach(function(o){var A=[];e.forEach(function(s){s[o]!==void 0&&s[o]!==""&&A.push(s[o])}),A.length&&!(n!=null&&n.includes(o))&&(i[o]=Kl(A))}),i},sB=function(e,t,n){var a=xK(e,t,n),i=[];if(!Object.keys(a).length)return i;var o=Object.values(a),A=o.every(function(s){return s.every(function(u){return typeof u=="number"})});return e.forEach(function(s,u){var f=[];Object.keys(a).forEach(function(l){var c=s[l],h=a[l],d=h.findIndex(function(p){return c===p}),v=[];if(A)v.push(c);else for(var g=0;g<h.length;g++)g===d?v.push(1):v.push(0);f=f.concat(v)}),i[u]=f}),i},rC=function(e,t,n,a){n===void 0&&(n=Ai.EuclideanDistance);var i=0;switch(n){case Ai.EuclideanDistance:i=new za(e).euclideanDistance(new za(t));break}return i},nC=function(e,t,n,a){for(var i=t.length,o=2*a,A=0,s=0;s<i;s++)for(var u=e[s].clusterId,f=0;f<i;f++){var l=e[f].clusterId;if(u===l){var c=t[s][f]||0,h=n[s]||0,d=n[f]||0;A+=c-h*d/o}}return A*=1/o,A},W0=function(e,t){e===void 0&&(e=[]);for(var n=e.length,a=new za([]),i=0;i<n;i++)a=a.add(new za(t[i]));var o=a.avg(n);o.normalize();for(var A=0,i=0;i<n;i++){var s=new za(t[i]),u=s.squareEuclideanDistance(o);A+=u}var f=[];e.forEach(function(){f.push([])});for(var i=0;i<n;i++){var s=new za(t[i]);e[i].clusterInertial=0;for(var l=0;l<n;l++){if(i===l){f[i][l]=0;continue}var c=new za(t[l]);f[i][l]=s.squareEuclideanDistance(c),e[i].clusterInertial+=f[i][l]}}for(var h=0,d=2*n*A,i=0;i<n;i++)for(var v=e[i].clusterId,l=0;l<n;l++){var g=e[l].clusterId;if(!(i===l||v!==g)){var p=e[i].clusterInertial*e[l].clusterInertial/Math.pow(d,2)-f[i][l]/d;h+=p}}return Number(h.toFixed(4))},uB=function(e,t,n,a,i,o,A,s,u){t===void 0&&(t=!1),n===void 0&&(n="weight"),a===void 0&&(a=1e-4),i===void 0&&(i=!1),o===void 0&&(o=void 0),A===void 0&&(A=[]),s===void 0&&(s=["id"]),u===void 0&&(u=1);var f=e.nodes,l=f===void 0?[]:f,c=e.edges,h=c===void 0?[]:c,d=[];if(i){l.forEach(function(N,R){N.properties=N.properties||{},N.originIndex=R});var v=[];l.every(function(N){return N.hasOwnProperty("nodeType")})&&(v=Array.from(new Set(l.map(function(N){return N.nodeType}))),l.forEach(function(N){N.properties.nodeType=v.findIndex(function(R){return R===N.nodeType})}));var g=AB(l,o);d=sB(g,A,s)}var p=1,y={},m={};l.forEach(function(N,R){var J=String(p++);N.clusterId=J,y[J]={id:J,nodes:[N]},m[N.id]={node:N,idx:R}});var w=Ss(e,t),B=[],E={},b=0;w.forEach(function(N,R){var J=0,re=l[R].id;E[re]={},N.forEach(function(ee,q){if(ee){J+=ee;var ve=l[q].id;E[re][ve]=ee,b+=ee}}),B.push(J)}),b/=2;for(var C=1/0,_=1/0,x=0,M=[],S={};;){i&&l.every(function(N){return N.hasOwnProperty("properties")})?C=nC(l,w,B,b)+W0(l,d)*u:C=nC(l,w,B,b),x===0&&(_=C,M=l,S=y);var I=C>0&&C>_&&C-_<a;if(C>_&&(M=l.map(function(N){return{node:N,clusterId:N.clusterId}}),S=Xt(y),_=C),I||x>100)break;x++,Object.keys(y).forEach(function(N){var R=0;h.forEach(function(J){var re=J.source,ee=J.target,q=m[re].node.clusterId,ve=m[ee].node.clusterId;(q===N&&ve!==N||ve===N&&q!==N)&&(R=R+(J[n]||1))}),y[N].sumTot=R}),l.forEach(function(N,R){var J=y[N.clusterId],re=0,ee,q=B[R]/(2*b),ve=0,Me=J.nodes;Me.forEach(function(Kt){var gr=m[Kt.id].idx;ve+=w[R][gr]||0});var Re=ve-J.sumTot*q,tt=Me.filter(function(Kt){return Kt.id!==N.id});tt.forEach(function(Kt,gr){d[Kt.originIndex]});var st=W0(tt,d)*u,at=E[N.id];if(Object.keys(at).forEach(function(Kt){var gr=m[Kt].node,lr=gr.clusterId;if(lr!==N.clusterId){var Ht=y[lr],tr=Ht.nodes;if(!(!tr||!tr.length)){var Kr=0;tr.forEach(function(Ne){var pe=m[Ne.id].idx;Kr+=w[R][pe]||0});var et=Kr-Ht.sumTot*q,ae=tr.concat([N]);ae.forEach(function(Ne,pe){d[Ne.originIndex]});var L=W0(ae,d)*u,be=et-Re;i&&(be=et+L-(Re+st)),be>re&&(re=be,ee=Ht)}}}),re>0){ee.nodes.push(N);var Et=N.clusterId;N.clusterId=ee.id;var bt=J.nodes.indexOf(N);J.nodes.splice(bt,1);var fr=0,Qt=0;h.forEach(function(Kt){var gr=Kt.source,lr=Kt.target,Ht=m[gr].node.clusterId,tr=m[lr].node.clusterId;(Ht===ee.id&&tr!==ee.id||tr===ee.id&&Ht!==ee.id)&&(fr=fr+(Kt[n]||1)),(Ht===Et&&tr!==Et||tr===Et&&Ht!==Et)&&(Qt=Qt+(Kt[n]||1))}),ee.sumTot=fr,J.sumTot=Qt}})}var D={},O=0;Object.keys(S).forEach(function(N){var R=S[N];if(!R.nodes||!R.nodes.length){delete S[N];return}var J=String(O+1);J!==N&&(R.id=J,R.nodes=R.nodes.map(function(re){return{id:re.id,clusterId:J}}),S[J]=R,D[N]=J,delete S[N],O++)}),M.forEach(function(N){var R=N.node,J=N.clusterId;R&&(R.clusterId=J,R.clusterId&&D[R.clusterId]&&(R.clusterId=D[R.clusterId]))});var F=[],U={};h.forEach(function(N){var R=N.source,J=N.target,re=N[n]||1,ee=m[R].node.clusterId,q=m[J].node.clusterId;if(!(!ee||!q)){var ve="".concat(ee,"---").concat(q);if(U[ve])U[ve].weight+=re,U[ve].count++;else{var Me={source:ee,target:q,weight:re,count:1};U[ve]=Me,F.push(Me)}}});var Q=[];return Object.keys(S).forEach(function(N){Q.push(S[N])}),{clusters:Q,clusterEdges:F}},QL=function(e,t,n,a,i,o,A,s){return t===void 0&&(t=!1),n===void 0&&(n="weight"),a===void 0&&(a=1e-4),i===void 0&&(i=void 0),o===void 0&&(o=[]),A===void 0&&(A=["id"]),s===void 0&&(s=1),uB(e,t,n,a,!0,i,o,A,s)},RL=function(e,t){var n;t===void 0&&(t=1);for(var a=Xt(e),i=a.nodes,o=i===void 0?[]:i,A=a.edges,s=A===void 0?[]:A,u=function(){var c=Oo({nodes:o,edges:s}),h=Object.keys(c);h.sort(function(g,p){var y,m;return((y=c[g])===null||y===void 0?void 0:y.degree)-((m=c[p])===null||m===void 0?void 0:m.degree)});var d=h[0];if(!o.length||((n=c[d])===null||n===void 0?void 0:n.degree)>=t)return"break";var v=o.findIndex(function(g){return g.id===d});o.splice(v,1),s=s.filter(function(g){return!(g.source===d||g.target===d)})};;){var f=u();if(f==="break")break}return{nodes:o,edges:s}},aC=function(e,t,n){var a=[];switch(e){case Ai.EuclideanDistance:a=t[n];break;default:a=[];break}return a},HL=function(e,t,n,a,i,o){t===void 0&&(t=3),n===void 0&&(n=void 0),a===void 0&&(a=[]),i===void 0&&(i=["id"]),o===void 0&&(o=Ai.EuclideanDistance);var A=e.nodes,s=A===void 0?[]:A,u=e.edges,f=u===void 0?[]:u,l={clusters:[{id:"0",nodes:s}],clusterEdges:[]};if(o===Ai.EuclideanDistance&&!s.every(function(J){return J.hasOwnProperty(n)}))return l;var c=[],h=[];if(o===Ai.EuclideanDistance&&(c=AB(s,n),h=sB(c,a,i)),!h.length)return l;for(var d=Kl(h.map(function(J){return J.join("")})),v=Math.min(t,s.length,d.length),g=0;g<s.length;g++)s[g].originIndex=g;for(var p=[],y=[],m=[],g=0;g<v;g++)if(g===0){var w=Math.floor(Math.random()*s.length);switch(o){case Ai.EuclideanDistance:p[g]=h[w];break;default:p[g]=[];break}y.push(w),m[g]=[s[w]],s[w].clusterId=String(g)}else{for(var B=-1/0,E=0,b=function(ee){if(!y.includes(ee)){for(var q=0,ve=0;ve<p.length;ve++){var Me=0;switch(o){case Ai.EuclideanDistance:Me=rC(h[s[ee].originIndex],p[ve],o);break}q+=Me}var Re=q/p.length;Re>B&&!p.find(function(tt){return bA(tt,aC(o,h,s[ee].originIndex))})&&(B=Re,E=ee)}},C=0;C<s.length;C++)b(C);p[g]=aC(o,h,E),y.push(E),m[g]=[s[E]],s[E].clusterId=String(g)}for(var _=0;;){for(var g=0;g<s.length;g++){var x=0,M=1/0;if(!(_===0&&y.includes(g))){for(var S=0;S<p.length;S++){var I=0;switch(o){case Ai.EuclideanDistance:I=rC(h[g],p[S],o);break}I<M&&(M=I,x=S)}if(s[g].clusterId!==void 0)for(var D=m[Number(s[g].clusterId)].length-1;D>=0;D--)m[Number(s[g].clusterId)][D].id===s[g].id&&m[Number(s[g].clusterId)].splice(D,1);s[g].clusterId=String(x),m[x].push(s[g])}}for(var O=!1,g=0;g<m.length;g++){for(var F=m[g],U=new za([]),S=0;S<F.length;S++)U=U.add(new za(h[F[S].originIndex]));var Q=U.avg(F.length);Q.equal(new za(p[g]))||(O=!0,p[g]=Q.getArr())}if(_++,s.every(function(J){return J.clusterId!==void 0})&&O||_>=1e3)break}var N=[],R={};return f.forEach(function(J){var re,ee,q=J.source,ve=J.target,Me=(re=s.find(function(at){return at.id===q}))===null||re===void 0?void 0:re.clusterId,Re=(ee=s.find(function(at){return at.id===ve}))===null||ee===void 0?void 0:ee.clusterId,tt="".concat(Me,"---").concat(Re);if(R[tt])R[tt].count++;else{var st={source:Me,target:Re,count:1};R[tt]=st,N.push(st)}}),{clusters:m,clusterEdges:N}},fB=function(e,t){var n=new za(t),a=n.norm2(),i=new za(e),o=i.norm2(),A=n.dot(i),s=a*o,u=s?A/s:0;return u},GL=function(e,t,n,a,i){e===void 0&&(e=[]),n===void 0&&(n=void 0),a===void 0&&(a=[]),i===void 0&&(i=[]);var o=Xt(e.filter(function(c){return c.id!==t.id})),A=e.findIndex(function(c){return c.id===t.id}),s=AB(e,n),u=sB(s,a,i),f=u[A],l=[];return o.forEach(function(c,h){if(c.id!==t.id){var d=u[h],v=fB(d,f);l.push(v),c.cosineSimilarity=v}}),o.sort(function(c,h){return h.cosineSimilarity-c.cosineSimilarity}),{allCosineSimilarity:l,similarNodes:o}},CK=function(){function r(e){this.count=e.length,this.parent={};for(var t=0,n=e;t<n.length;t++){var a=n[t];this.parent[a]=a}}return r.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},r.prototype.union=function(e,t){var n=this.find(e),a=this.find(t);n!==a&&(n<a?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},r.prototype.connected=function(e,t){return this.find(e)===this.find(t)},r}(),_K=function(e,t){return e-t},SK=function(){function r(e){e===void 0&&(e=_K),this.compareFn=e,this.list=[]}return r.prototype.getLeft=function(e){return 2*e+1},r.prototype.getRight=function(e){return 2*e+2},r.prototype.getParent=function(e){return e===0?null:Math.floor((e-1)/2)},r.prototype.isEmpty=function(){return this.list.length<=0},r.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},r.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},r.prototype.insert=function(e){if(e!==null){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},r.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var n=this.list[t];this.list[t]=this.list[e],this.list[e]=n,e=t,t=this.getParent(e)}},r.prototype.moveDown=function(e){var t,n=e,a=this.getLeft(e),i=this.getRight(e),o=this.list.length;a!==null&&a<o&&this.compareFn(this.list[n],this.list[a])>0?n=a:i!==null&&i<o&&this.compareFn(this.list[n],this.list[i])>0&&(n=i),e!==n&&(t=[this.list[n],this.list[e]],this.list[e]=t[0],this.list[n]=t[1],this.moveDown(n))},r}(),MK=function(e,t){var n=[],a=e.nodes,i=a===void 0?[]:a,o=e.edges,A=o===void 0?[]:o;if(i.length===0)return n;var s=i[0],u=new Set;u.add(s);var f=function(g,p){return t?g.weight-p.weight:0},l=new SK(f);for(Jd(s.id,A).forEach(function(v){l.insert(v)});!l.isEmpty();){var c=l.delMin(),h=c.source,d=c.target;u.has(h)&&u.has(d)||(n.push(c),u.has(h)||(u.add(h),Jd(h,A).forEach(function(v){l.insert(v)})),u.has(d)||(u.add(d),Jd(d,A).forEach(function(v){l.insert(v)})))}return n},iC=function(e,t){var n=[],a=e.nodes,i=a===void 0?[]:a,o=e.edges,A=o===void 0?[]:o;if(i.length===0)return n;var s=A.map(function(h){return h});t&&s.sort(function(h,d){return h.weight-d.weight});for(var u=new CK(i.map(function(h){return h.id}));s.length>0;){var f=s.shift(),l=f.source,c=f.target;u.connected(l,c)||(n.push(f),u.union(l,c))}return n},zL=function(e,t,n){var a={prim:MK,kruskal:iC};return n?a[n](e,t):iC(e,t)},KL=function(e,t,n){typeof t!="number"&&(t=1e-6),typeof n!="number"&&(n=.85);for(var a=1,i=0,o=1e3,A=e.nodes,s=A===void 0?[]:A,u=e.edges,f=u===void 0?[]:u,l=s.length,c,h={},d={},v=0;v<l;++v){var g=s[v],p=g.id;h[p]=1/l,d[p]=1/l}for(var y=Oo(e);o>0&&a>t;){i=0;for(var v=0;v<l;++v){var g=s[v],p=g.id;if(c=0,y[g.id].inDegree===0)h[p]=0;else{for(var m=Ca(p,f,"source"),w=0;w<m.length;++w){var B=m[w],E=y[B].outDegree;E>0&&(c+=d[B]/E)}h[p]=n*c,i+=h[p]}}i=(1-i)/l,a=0;for(var v=0;v<l;++v){var g=s[v],p=g.id;c=h[p]+i,a+=Math.abs(c-d[p]),d[p]=c}o-=1}return d},IK=-1,Tv=-1,jL="-1",Pi="-1",$L=-1,oC=function(){function r(e,t,n,a){e===void 0&&(e=IK),t===void 0&&(t=Tv),n===void 0&&(n=Tv),a===void 0&&(a=jL),this.id=e,this.from=t,this.to=n,this.label=a}return r}(),TK=function(){function r(e,t){e===void 0&&(e=Tv),t===void 0&&(t=Pi),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return r.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},r}(),WL=function(){function r(e,t,n){e===void 0&&(e=Tv),t===void 0&&(t=!0),n===void 0&&(n=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return r.prototype.getNodeNum=function(){return this.nodes.length},r.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var n=new TK(e,t);this.nodes.push(n),this.nodeMap[e]=n,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},r.prototype.addEdge=function(e,t,n,a){if((this.edgeIdAutoIncrease||e===void 0)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[e])){var i=new oC(e,t,n,a);if(this.edges.push(i),this.edgeMap[e]=i,this.nodeMap[t].addEdge(i),this.edgeLabelMap[a]||(this.edgeLabelMap[a]=[]),this.edgeLabelMap[a].push(i),!this.directed){var o=new oC(e,n,t,a);this.nodeMap[n].addEdge(o),this.edgeLabelMap[a].push(o)}}},r}(),as=function(){function r(e,t,n,a,i){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:n||Pi,edgeLabel:a||jL,nodeLabel2:i||Pi}}return r.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},r.prototype.notEqualTo=function(e){return!this.equalTo(e)},r}(),AC=function(){function r(){this.rmpath=[],this.dfsEdgeList=[]}return r.prototype.equalTo=function(e){var t=this.dfsEdgeList.length,n=e.length;if(t!==n)return!1;for(var a=0;a<t;a++)if(this.dfsEdgeList[a]!==e[a])return!1;return!0},r.prototype.notEqualTo=function(e){return!this.equalTo(e)},r.prototype.pushBack=function(e,t,n,a,i){return this.dfsEdgeList.push(new as(e,t,n,a,i)),this.dfsEdgeList},r.prototype.toGraph=function(e,t){e===void 0&&(e=$L),t===void 0&&(t=!1);var n=new WL(e,!0,t);return this.dfsEdgeList.forEach(function(a){var i=a.fromNode,o=a.toNode,A=a.nodeEdgeNodeLabel,s=A.nodeLabel1,u=A.edgeLabel,f=A.nodeLabel2;s!==Pi&&n.addNode(i,s),f!==Pi&&n.addNode(o,f),s!==Pi&&f!==s&&n.addEdge(void 0,i,o,u)}),n},r.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length,n=t-1;n>=0;n--){var a=this.dfsEdgeList[n],i=a.fromNode,o=a.toNode;i<o&&(e===void 0||o===e)&&(this.rmpath.push(n),e=i)}return this.rmpath},r.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach(function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)}),Object.keys(e).length},r}(),Fh=function(){function r(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return r.prototype.hasNode=function(e){return this.nodesUsed[e.id]===1},r.prototype.hasEdge=function(e){return this.edgesUsed[e.id]===1},r}(),FK=function(){function r(e){var t=e.graphs,n=e.minSupport,a=n===void 0?2:n,i=e.minNodeNum,o=i===void 0?1:i,A=e.maxNodeNum,s=A===void 0?4:A,u=e.top,f=u===void 0?10:u,l=e.directed,c=l===void 0?!1:l,h=e.verbose,d=h===void 0?!1:h;this.graphs=t,this.dfsCode=new AC,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=a,this.top=f,this.directed=c,this.counter=0,this.maxNodeNum=s,this.minNodeNum=o,this.verbose=d,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return r.prototype.findForwardRootEdges=function(e,t){var n=this,a=[],i=e.nodeMap;return t.edges.forEach(function(o){(n.directed||t.label<=i[o.to].label)&&a.push(o)}),a},r.prototype.findBackwardEdge=function(e,t,n,a){if(!this.directed&&t===n)return null;for(var i=e.nodeMap,o=i[n.to],A=o.edges,s=A.length,u=0;u<s;u++){var f=A[u];if(!(a.hasEdge(f)||f.to!==t.from)){if(this.directed){if(i[t.from].label<i[n.to].label||i[t.from].label===i[n.to].label&&t.label<=f.label)return f}else if(t.label<f.label||t.label===f.label&&i[t.to].label<=i[n.to].label)return f}}return null},r.prototype.findForwardPureEdges=function(e,t,n,a){for(var i=[],o=t.to,A=e.nodeMap[o].edges,s=A.length,u=0;u<s;u++){var f=A[u],l=e.nodeMap[f.to];n<=l.label&&!a.hasNode(l)&&i.push(f)}return i},r.prototype.findForwardRmpathEdges=function(e,t,n,a){for(var i=[],o=e.nodeMap,A=o[t.to].label,s=o[t.from],u=s.edges,f=u.length,l=0;l<f;l++){var c=u[l],h=o[c.to].label;t.to===c.to||n>h||a.hasNode(o[c.to])||(t.label<c.label||t.label===c.label&&A<=h)&&i.push(c)}return i},r.prototype.getSupport=function(e){var t={};return e.forEach(function(n){t[n.graphId]||(t[n.graphId]=!0)}),Object.keys(t).length},r.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach(function(n){var a=e[n],i=a.nodeLabel1,o=a.edgeLabel,A=a.nodeLabel2;if(!t){t={nodeLabel1:i,edgeLabel:o,nodeLabel2:A};return}(i<t.nodeLabel1||i===t.nodeLabel1&&o<t.edgeLabel||i===t.nodeLabel1&&o===t.edgeLabel&&A<t.nodeLabel2)&&(t={nodeLabel1:i,edgeLabel:o,nodeLabel2:A})}),t},r.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose&&console.log("isMin checking",t),t.dfsEdgeList.length===1)return!0;var n=this.directed,a=t.toGraph($L,n),i=a.nodeMap,o=new AC,A={};a.nodes.forEach(function(l){var c=e.findForwardRootEdges(a,l);c.forEach(function(h){var d=i[h.to],v="".concat(l.label,"-").concat(h.label,"-").concat(d.label);A[v]||(A[v]={projected:[],nodeLabel1:l.label,edgeLabel:h.label,nodeLabel2:d.label});var g={graphId:a.id,edge:h,preNode:null};A[v].projected.push(g)})});var s=this.findMinLabel(A);if(s){o.dfsEdgeList.push(new as(0,1,s.nodeLabel1,s.edgeLabel,s.nodeLabel2));var u=function l(c){for(var h=o.buildRmpath(),d=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,v=o.dfsEdgeList[h[0]].toNode,g={},p=!1,y=0,m=n?-1:0,w=function(U){if(p)return"break";c.forEach(function(Q){var N=new Fh(Q),R=e.findBackwardEdge(a,N.edges[h[U]],N.edges[h[0]],N);R&&(g[R.label]||(g[R.label]={projected:[],edgeLabel:R.label}),g[R.label].projected.push({graphId:a.id,edge:g,preNode:Q}),y=o.dfsEdgeList[h[U]].fromNode,p=!0)})},B=h.length-1;B>m;B--){var E=w(B);if(E==="break")break}if(p){var b=e.findMinLabel(g);o.dfsEdgeList.push(new as(v,y,Pi,b.edgeLabel,Pi));var C=o.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[C]!==o.dfsEdgeList[C]?!1:l(g[b.edgeLabel].projected)}var _={};p=!1;var x=0;c.forEach(function(F){var U=new Fh(F),Q=e.findForwardPureEdges(a,U.edges[h[0]],d,U);Q.length>0&&(p=!0,x=v,Q.forEach(function(N){var R="".concat(N.label,"-").concat(i[N.to].label);_[R]||(_[R]={projected:[],edgeLabel:N.label,nodeLabel2:i[N.to].label}),_[R].projected.push({graphId:a.id,edge:N,preNode:F})}))});for(var M=h.length,S=function(U){if(p)return"break";var Q=h[U];c.forEach(function(N){var R=new Fh(N),J=e.findForwardRmpathEdges(a,R.edges[Q],d,R);J.length>0&&(p=!0,x=o.dfsEdgeList[Q].fromNode,J.forEach(function(re){var ee="".concat(re.label,"-").concat(i[re.to].label);_[ee]||(_[ee]={projected:[],edgeLabel:re.label,nodeLabel2:i[re.to].label}),_[ee].projected.push({graphId:a.id,edge:re,preNode:N})}))})},B=0;B<M;B++){var I=S(B);if(I==="break")break}if(!p)return!0;var D=e.findMinLabel(_);o.dfsEdgeList.push(new as(x,v+1,Pi,D.edgeLabel,D.nodeLabel2));var O=o.dfsEdgeList.length-1;return t.dfsEdgeList[O]!==o.dfsEdgeList[O]?!1:l(_["".concat(D.edgeLabel,"-").concat(D.nodeLabel2)].projected)},f="".concat(s.nodeLabel1,"-").concat(s.edgeLabel,"-").concat(s.nodeLabel2);return u(A[f].projected)}},r.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push(Xt(e))}},r.prototype.subGraphMining=function(e){var t=this,n=this.getSupport(e);if(!(n<this.minSupport)&&this.isMin()){this.report();var a=this.dfsCode.getNodeNum(),i=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[i[0]].toNode,A=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,s={},u={};e.forEach(function(f){for(var l=t.graphs[f.graphId],c=l.nodeMap,h=new Fh(f),d=i.length-1;d>=0;d--){var v=t.findBackwardEdge(l,h.edges[i[d]],h.edges[i[0]],h);if(v){var g="".concat(t.dfsCode.dfsEdgeList[i[d]].fromNode,"-").concat(v.label);u[g]||(u[g]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[i[d]].fromNode,edgeLabel:v.label}),u[g].projected.push({graphId:f.graphId,edge:v,preNode:f})}}if(!(a>=t.maxNodeNum)){var p=t.findForwardPureEdges(l,h.edges[i[0]],A,h);p.forEach(function(m){var w="".concat(o,"-").concat(m.label,"-").concat(c[m.to].label);s[w]||(s[w]={projected:[],fromNodeId:o,edgeLabel:m.label,nodeLabel2:c[m.to].label}),s[w].projected.push({graphId:f.graphId,edge:m,preNode:f})});for(var y=function(w){var B=t.findForwardRmpathEdges(l,h.edges[i[w]],A,h);B.forEach(function(E){var b="".concat(t.dfsCode.dfsEdgeList[i[w]].fromNode,"-").concat(E.label,"-").concat(c[E.to].label);s[b]||(s[b]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[i[w]].fromNode,edgeLabel:E.label,nodeLabel2:c[E.to].label}),s[b].projected.push({graphId:f.graphId,edge:E,preNode:f})})},d=0;d<i.length;d++)y(d)}}),Object.keys(u).forEach(function(f){var l=u[f],c=l.toNodeId,h=l.edgeLabel;t.dfsCode.dfsEdgeList.push(new as(o,c,"-1",h,"-1")),t.subGraphMining(u[f].projected),t.dfsCode.dfsEdgeList.pop()}),Object.keys(s).forEach(function(f){var l=s[f],c=l.fromNodeId,h=l.edgeLabel,d=l.nodeLabel2;t.dfsCode.dfsEdgeList.push(new as(c,o+1,Pi,h,d)),t.subGraphMining(s[f].projected),t.dfsCode.dfsEdgeList.pop()})}},r.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,n=this.minSupport,a=this.frequentSize1Subgraphs,i={},o={},A={};return Object.keys(e).forEach(function(s){var u=e[s],f=u.nodeMap;u.nodes.forEach(function(l,c){var h=l.label,d="".concat(s,"-").concat(h);if(!A[d]){var v=i[h]||0;v++,i[h]=v}A[d]={graphKey:s,label:h},l.edges.forEach(function(g){var p=h,y=f[g.to].label;if(!t&&p>y){var m=y;y=p,p=m}var w=g.label,B="".concat(p,"-").concat(w,"-").concat(y);if(!o[B]){var E=o[B]||0;E++,o[B]=E}})})}),Object.keys(i).forEach(function(s){var u=i[s];if(!(u<n)){var f={nodes:[],edges:[]};f.nodes.push({id:"0",label:s}),a.push(f)}}),a},r.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs;this.directed;var n={};Object.keys(t).forEach(function(a){var i=t[a],o=i.nodeMap;i.nodes.forEach(function(A){var s=e.findForwardRootEdges(i,A);s.forEach(function(u){var f=o[u.to],l="".concat(A.label,"-").concat(u.label,"-").concat(f.label);n[l]||(n[l]={projected:[],nodeLabel1:A.label,edgeLabel:u.label,nodeLabel2:f.label});var c={graphId:a,edge:u,preNode:null};n[l].projected.push(c)})})}),Object.keys(n).forEach(function(a){var i=n[a],o=i.projected,A=i.nodeLabel1,s=i.edgeLabel,u=i.nodeLabel2;e.dfsCode.dfsEdgeList.push(new as(0,1,A,s,u)),e.subGraphMining(o),e.dfsCode.dfsEdgeList.pop()})}},r}(),LK=function(e,t,n,a){var i={};return Object.keys(e).forEach(function(o,A){var s=e[o],u=new WL(A,!0,t),f={};s.nodes.forEach(function(l,c){u.addNode(c,l[n]),f[l.id]=c}),s.edges.forEach(function(l,c){var h=f[l.source],d=f[l.target];u.addEdge(-1,h,d,l[a])}),u&&u.getNodeNum()&&(i[u.id]=u)}),i},DK=function(e,t,n){var a=[];return e.forEach(function(i){var o={nodes:[],edges:[]};i.nodes.forEach(function(A){var s;o.nodes.push((s={id:"".concat(A.id)},s[t]=A.label,s))}),i.edges.forEach(function(A){var s;o.edges.push((s={source:"".concat(A.from),target:"".concat(A.to)},s[n]=A.label,s))}),a.push(o)}),a},sC="cluster",OK=function(e){var t=e.graphs,n=e.directed,a=n===void 0?!1:n,i=e.nodeLabelProp,o=i===void 0?sC:i,A=e.edgeLabelProp,s=A===void 0?sC:A,u=LK(t,a,o,s),f=e.minSupport,l=e.maxNodeNum,c=e.minNodeNum,h=e.verbose,d=e.top,v={graphs:u,minSupport:f,maxNodeNum:l,minNodeNum:c,top:d,verbose:h,directed:a},g=new FK(v);g.run();var p=DK(g.frequentSubgraphs,o,s);return p},uC=function(e,t,n,a){n===void 0&&(n="cluster"),a===void 0&&(a=2);var i=[],o=e.nodes;return t.forEach(function(A,s){i.push(VL(o,A,s,n,a))}),i},VL=function(e,t,n,a,i){var o=[n],A=[],s={};return t.forEach(function(u,f){if(u<=i&&n!==f){o.push(f),A.push(e[f]);var l=e[f][a];s[l]?(s[l].count++,s[l].dists.push(u)):s[l]={count:1,dists:[u]}}}),Object.keys(s).forEach(function(u){s[u].dists=s[u].dists.sort(function(f,l){return f-l})}),{nodeIdx:n,nodeId:e[n].id,nodeIdxs:o,neighbors:A,neighborNum:o.length-1,nodeLabelCountMap:s}},UK=function(e,t,n,a,i){var o=Math.ceil(n/t),A={},s=0;return a.forEach(function(u,f){for(var l=0,c=0,h=u.nodeIdxs,d=u.neighborNum-1;l<o;){for(var v=h[1+Math.floor(Math.random()*d)],g=0;(A["".concat(f,"-").concat(v)]||A["".concat(v,"-").concat(f)])&&(v=Math.floor(Math.random()*t),g++,!(g>2*t)););if(g<2*t&&(A["".concat(f,"-").concat(v)]={start:f,end:v,distance:i[f][v]},l++,s++,s>=n))return A;if(c++,c>2*t)break}if(l<o){var p=o-l;o=(o+p)/(t-f-1)}}),A},ev=function(e,t,n,a){var i=n.nodes;return a||(a={}),Object.keys(e).forEach(function(o){var A,s;if(!(a&&a[o])){a[o]={nodes:[],edges:[]};var u=e[o],f=(A=t[u.start])===null||A===void 0?void 0:A.nodeIdxs,l=(s=t[u.end])===null||s===void 0?void 0:s.nodeIdxs;if(!(!f||!l)){var c=new Set(l),h=f.filter(function(y){return c.has(y)});if(!(!h||!h.length)){for(var d={},v=h.length,g=0;g<v;g++){var p=i[h[g]];a[o].nodes.push(p),d[p.id]=!0}n.edges.forEach(function(y){d[y.source]&&d[y.target]&&a[o].edges.push(y)})}}}}),a},tv=function(e,t,n,a){var i,o,A={};e.nodes.forEach(function(u){A[u.id]=u});var s=0;return!(!((i=t==null?void 0:t.edges)===null||i===void 0)&&i.length)||((o=t==null?void 0:t.nodes)===null||o===void 0?void 0:o.length)<2?0:(e.edges.forEach(function(u){var f=A[u.source][n],l=A[u.target][n],c=t==null?void 0:t.nodes[0][n],h=t==null?void 0:t.nodes[1][n],d=t==null?void 0:t.edges[0][a];u[a]===d&&(f===c&&l===h||f===h&&l===c)&&s++}),s)},NK=function(e,t,n){for(var a=1/0,i=0,o=function(u){var f=e[u],l=Object.keys(f).sort(function(y,m){return f[y]-f[m]}),c=10,h=[];l.forEach(function(y,m){h[m%c]||(h[m%c]={graphs:[],totalCount:0,aveCount:0}),h[m%c].graphs.push(y),h[m%c].totalCount+=f[y]});var d=0,v=[];h.forEach(function(y){var m=y.totalCount/y.graphs.length;y.aveCount=m,v.push(m);var w=0,B=y.length;y.graphs.forEach(function(E,b){var C=f[E];y.graphs.forEach(function(_,x){b!==x&&(w+=Math.abs(C-f[_]))})}),w/=B*(B-1)/2,d+=w}),d/=h.length;var g=0;v.forEach(function(y,m){v.forEach(function(w,B){m!==B&&(g+=Math.abs(y-w))}),g/=v.length*(v.length-1)/2});var p=g-d;a<p&&(a=p,i=u)},A=0;A<t;A++)o(A);return{structure:n[i],structureCountMap:e[i]}},fC=function(e,t){var n={},a={};return e.forEach(function(i,o){n[i.id]={idx:o,node:i,degree:0,inDegree:0,outDegree:0};var A=i[t];a[A]||(a[A]=[]),a[A].push(i)}),{nodeMap:n,nodeLabelMap:a}},lC=function(e,t,n){var a={},i={};return e.forEach(function(o,A){a["".concat(ML)]={idx:A,edge:o};var s=o[t];i[s]||(i[s]=[]),i[s].push(o);var u=n[o.source];u&&(u.degree++,u.outDegree++);var f=n[o.target];f&&(f.degree++,f.inDegree++)}),{edgeMap:a,edgeLabelMap:i}},cC=function(e,t,n){var a=t.length,i={};return t.forEach(function(o,A){for(var s=n?0:A+1,u=e[A].id,f=s;f<a;f++)if(A!==f){var l=e[f].id,c=o[f];i["".concat(u,"-").concat(l)]=c,n||(i["".concat(l,"-").concat(u)]=c)}}),i},kK=function(e,t,n,a,i,o,A,s,u,f,l){var c,h="".concat(t.id,"-").concat(n.id);if(f&&f[h])return f[h];var d=l?l[h]:void 0;if(!d){var v=(c={},c[h]={start:a[t.id].idx,end:a[n.id].idx,distance:i},c);l=ev(v,o,e,l),d=l[h]}return tv(d,A,s,u)},hC=function(e,t,n,a){var i,o,A,s=(i=e[t])===null||i===void 0?void 0:i.degree,u=(o=e[t])===null||o===void 0?void 0:o.inDegree,f=(A=e[t])===null||A===void 0?void 0:A.outDegree;return e[t]===void 0&&(s=1/0,u=1/0,f=1/0,a[t].forEach(function(l){var c=n[l.id].degree;s>c&&(s=c);var h=n[l.id].inDegree;u>h&&(u=h);var d=n[l.id].outDegree;f>d&&(f=d)}),e[t]={degree:s,inDegree:u,outDegree:f}),{minPatternNodeLabelDegree:s,minPatternNodeLabelInDegree:u,minPatternNodeLabelOutDegree:f}},XL=function(e,t,n,a,i,o,A){var s;if(n===void 0&&(n=!1),o===void 0&&(o="cluster"),A===void 0&&(A="cluster"),!(!e||!e.nodes)){var u=e.nodes.length;if(u){var f=Wl(e,n),l=Wl(t,n),c=cC(e.nodes,f,n),h=cC(t.nodes,l,n),d=fC(e.nodes,o),v=d.nodeMap,g=d.nodeLabelMap,p=fC(t.nodes,o),y=p.nodeMap,m=p.nodeLabelMap;lC(e.edges,A,v);var w=lC(t.edges,A,y).edgeLabelMap,B=[];l==null||l.forEach(function(et){B=B.concat(et)}),i||(i=Math.max.apply(Math,li(li([],B,!1),[2],!1))),a||(a=i);var E=uC(e,f,o,a),b=uC(t,l,o,a),C=Math.min(100,u*(u-1)/2),_=UK(a,u,C,E,f),x=ev(_,E,e),M=10,S=1,I=1,D=4,O={graphs:x,nodeLabelProp:o,edgeLabelProp:A,minSupport:S,minNodeNum:I,maxNodeNum:D,directed:n},F=OK(O).slice(0,M),U=F.length,Q=[];F.forEach(function(et,ae){Q[ae]={},Object.keys(x).forEach(function(L){var be=x[L],Ne=tv(be,et,o,A);Q[ae][L]=Ne})});var N=NK(Q,U,F),R=N.structure,J=N.structureCountMap,re=t.nodes[0],ee=[],q=(s=t.nodes[0])===null||s===void 0?void 0:s[o],ve=-1/0;t.nodes.forEach(function(et){var ae=et[o],L=g[ae];(L==null?void 0:L.length)>ve&&(ve=L.length,ee=L,q=ae,re=et)});var Me={},Re={},tt={},st={},at={},Et={};Object.keys(m).forEach(function(et,ae){at[et]=[],n&&(Et[et]=[]);var L=m[et],be={};L.forEach(function(Xe){var Ze=h["".concat(re.id,"-").concat(Xe.id)];if(Ze&&at[et].push(Ze),be["".concat(re.id,"-").concat(Xe.id)]={start:0,end:y[Xe.id].idx,distance:Ze},n){var gt=h["".concat(Xe.id,"-").concat(re.id)];gt&&Et[et].push(gt)}}),at[et]=at[et].sort(function(Xe,Ze){return Xe-Ze}),n&&(Et[et]=Et[et].sort(function(Xe,Ze){return Xe-Ze})),Re=ev(be,b,t,Re);var Ne=[];if(Object.keys(be).forEach(function(Xe){if(tt[Xe]){Ne.push(tt[Xe]);return}var Ze=Re[Xe];tt[Xe]=tv(Ze,R,o,A),Ne.push(tt[Xe])}),Ne=Ne.sort(function(Xe,Ze){return Ze-Xe}),st["".concat(re.id,"-").concat(et)]=Ne,et!==q)for(var pe=(ee==null?void 0:ee.length)||0,ze=function(Ze){var gt=ee[Ze],Ot=E[v[gt.id].idx],cr=Ot.nodeLabelCountMap[et],Ut=m[et].length;if(!cr||cr.count<Ut)return ee.splice(Ze,1),"continue";for(var vr=!1,sr=0;sr<Ut;sr++)if(cr.dists[sr]>at[et][sr]){vr=!0;break}if(vr)return ee.splice(Ze,1),"continue";var wr={};Ot.neighbors.forEach(function(rr){var Pr=c["".concat(gt.id,"-").concat(rr.id)];wr["".concat(gt.id,"-").concat(rr.id)]={start:v[gt.id].idx,end:v[rr.id].idx,distance:Pr}}),x=ev(wr,E,e,x);var pr=[];Object.keys(wr).forEach(function(rr){if(J[rr]){pr.push(J[rr]);return}var Pr=x[rr];J[rr]=tv(Pr,R,o,A),pr.push(J[rr])}),pr=pr.sort(function(rr,Pr){return Pr-rr});for(var hn=!1,sr=0;sr<Ut;sr++)if(pr[sr]<Ne[sr]){hn=!0;break}if(hn)return ee.splice(Ze,1),"continue"},Ke=pe-1;Ke>=0;Ke--)ze(Ke)});var bt=[];ee==null||ee.forEach(function(et){for(var ae=v[et.id].idx,L=VL(e.nodes,f[ae],ae,o,i),be=L.neighbors,Ne=be.length,pe=!1,ze=Ne-1;ze>=0;ze--){if(be.length+1<t.nodes.length){pe=!0;return}var Ke=be[ze],Xe=Ke[o];if(!m[Xe]||!m[Xe].length){be.splice(ze,1);continue}if(!at[Xe]||!at[Xe].length){be.splice(ze,1);continue}var Ze="".concat(et.id,"-").concat(Ke.id),gt=c[Ze],Ot=at[Xe].length-1,cr=at[Xe][Ot];if(gt>cr){be.splice(ze,1);continue}if(n){var Ut="".concat(Ke.id,"-").concat(et.id),vr=c[Ut];Ot=Et[Xe].length-1;var sr=Et[Xe][Ot];if(vr>sr){be.splice(ze,1);continue}}var wr=J[Ze]?J[Ze]:kK(e,et,Ke,v,gt,E,R,o,A,J,x),pr="".concat(re.id,"-").concat(Xe),hn=st[pr][st[pr].length-1];if(wr<hn){be.splice(ze,1);continue}var rr=hC(Me,Xe,y,m),Pr=rr.minPatternNodeLabelDegree;if(rr.minPatternNodeLabelInDegree,rr.minPatternNodeLabelOutDegree,v[Ke.id].degree<Pr){be.splice(ze,1);continue}}pe||bt.push({nodes:[et].concat(be)})});var fr=$l(t,re.id,!1).length,Qt={};n?(Object.keys(fr).forEach(function(et){var ae=y[et].node[o];Qt[ae]?Qt[ae].push(fr[et]):Qt[ae]=[fr[et]]}),Object.keys(Qt).forEach(function(et){Qt[et].sort(function(ae,L){return ae-L})})):Qt=at;for(var Kt=bt.length,gr=function(ae){var L=bt[ae],be=L.nodes[0],Ne={},pe={};L.nodes.forEach(function(It,yr){pe[It.id]={idx:yr,node:It,degree:0,inDegree:0,outDegree:0};var wt=It[o];Ne[wt]?Ne[wt]++:Ne[wt]=1});var ze=[],Ke={};e.edges.forEach(function(It){pe[It.source]&&pe[It.target]&&(ze.push(It),Ke[It[A]]?Ke[It[A]]++:Ke[It[A]]=1,pe[It.source].degree++,pe[It.target].degree++,pe[It.source].outDegree++,pe[It.target].inDegree++)});for(var Xe=Object.keys(w).length,Ze=!1,gt=0;gt<Xe;gt++){var Ot=Object.keys(w)[gt];if(!Ke[Ot]||Ke[Ot]<w[Ot].length){Ze=!0;break}}if(Ze)return bt.splice(ae,1),"continue";var cr=ze.length;if(cr<t.edges.length)return bt.splice(ae,1),"break";for(var Ut=!1,vr=function(yr){var wt=ze[yr],Ir=wt[A],dn=w[Ir];if(!dn||!dn.length)return Ke[Ir]--,dn&&Ke[Ir]<dn.length?(Ut=!0,"break"):(ze.splice(yr,1),pe[wt.source].degree--,pe[wt.target].degree--,pe[wt.source].outDegree--,pe[wt.target].inDegree--,"continue");var so=pe[wt.source].node[o],uo=pe[wt.target].node[o],qa=!1;if(dn.forEach(function(Ei){var fo=y[Ei.source].node,lo=y[Ei.target].node;fo[o]===so&&lo[o]===uo&&(qa=!0),!n&&fo[o]===uo&&lo[o]===so&&(qa=!0)}),!qa)return Ke[Ir]--,dn&&Ke[Ir]<dn.length?(Ut=!0,"break"):(ze.splice(yr,1),pe[wt.source].degree--,pe[wt.target].degree--,pe[wt.source].outDegree--,pe[wt.target].inDegree--,"continue")},gt=cr-1;gt>=0;gt--){var sr=vr(gt);if(sr==="break")break}if(Ut)return bt.splice(ae,1),"continue";L.edges=ze;var wr=$l(L,L.nodes[0].id,!1).length;if(Object.keys(wr).reverse().forEach(function(It){if(!(It===L.nodes[0].id||Ut)){if(wr[It]===1/0){var yr=pe[It].node[o];if(Ne[yr]--,Ne[yr]<m[yr].length){Ut=!0;return}var wt=L.nodes.indexOf(pe[It].node);L.nodes.splice(wt,1),pe[It]=void 0;return}var Ir=v[It].node[o];if(!Qt[Ir]||!Qt[Ir].length||wr[It]>Qt[Ir][Qt[Ir].length-1]){var yr=pe[It].node[o];if(Ne[yr]--,Ne[yr]<m[yr].length){Ut=!0;return}var wt=L.nodes.indexOf(pe[It].node);L.nodes.splice(wt,1),pe[It]=void 0}}}),Ut)return bt.splice(ae,1),"continue";for(var pr=!0,hn=0;pr&&!Ut;){pr=!1;var rr=n?pe[be.id].degree<y[re.id].degree||pe[be.id].inDegree<y[re.id].inDegree||pe[be.id].outDegree<y[re.id].outDegree:pe[be.id].degree<y[re.id].degree;if(rr){Ut=!0;break}if(Ne[be[o]]<m[be[o]].length){Ut=!0;break}for(var Pr=L.nodes.length,da=Pr-1;da>=0;da--){var jr=L.nodes[da],Bi=pe[jr.id].degree,NA=pe[jr.id].inDegree,kA=pe[jr.id].outDegree,An=jr[o],Za=hC(Me,An,y,m),Ao=Za.minPatternNodeLabelDegree,PA=Za.minPatternNodeLabelInDegree,QA=Za.minPatternNodeLabelOutDegree,RA=n?Bi<Ao||NA<PA||kA<QA:Bi<Ao;if(RA){if(Ne[jr[o]]--,Ne[jr[o]]<m[jr[o]].length){Ut=!0;break}L.nodes.splice(da,1),pe[jr.id]=void 0,pr=!0}}if(Ut||!pr&&hn!==0)break;cr=ze.length;for(var va=cr-1;va>=0;va--){var Qr=ze[va];if(!pe[Qr.source]||!pe[Qr.target]){ze.splice(va,1);var ga=Qr[A];if(Ke[ga]--,pe[Qr.source]&&(pe[Qr.source].degree--,pe[Qr.source].outDegree--),pe[Qr.target]&&(pe[Qr.target].degree--,pe[Qr.target].inDegree--),w[ga]&&Ke[ga]<w[ga].length){Ut=!0;break}pr=!0}}hn++}if(Ut||Ut||L.nodes.length<t.nodes.length||ze.length<t.edges.length)return bt.splice(ae,1),"continue"},lr=Kt-1;lr>=0;lr--){var Ht=gr(lr);if(Ht==="break")break}for(var tr=bt.length,Kr=function(ae){var L=bt[ae],be={};L.edges.forEach(function(ze){var Ke="".concat(ze.source,"-").concat(ze.target,"-").concat(ze.label);be[Ke]?be[Ke]++:be[Ke]=1});for(var Ne=function(Ke){var Xe=bt[Ke],Ze={};Xe.edges.forEach(function(Ot){var cr="".concat(Ot.source,"-").concat(Ot.target,"-").concat(Ot.label);Ze[cr]?Ze[cr]++:Ze[cr]=1});var gt=!0;Object.keys(Ze).length!==Object.keys(be).length?gt=!1:Object.keys(be).forEach(function(Ot){Ze[Ot]!==be[Ot]&&(gt=!1)}),gt&&bt.splice(Ke,1)},pe=tr-1;pe>ae;pe--)Ne(pe);tr=bt.length},lr=0;lr<=tr-1;lr++)Kr(lr);return bt}}},Lu=function(){function r(e){e===void 0&&(e=10),this.linkedList=new SL,this.maxStep=e}return Object.defineProperty(r.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),r.prototype.isEmpty=function(){return!this.linkedList.head},r.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},r.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},r.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},r.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},r.prototype.toArray=function(){return this.linkedList.toArray().map(function(e){return e.value})},r.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},r}(),YL=aB;const PK={getAdjMatrix:Ss,breadthFirstSearch:IL,connectedComponent:rB,getDegree:Oo,getInDegree:FL,getOutDegree:LL,detectCycle:aB,detectDirectedCycle:YL,detectAllCycles:OL,detectAllDirectedCycle:oB,detectAllUndirectedCycle:iB,depthFirstSearch:nB,dijkstra:$l,findAllPath:kL,findShortestPath:NL,floydWarshall:Wl,labelPropagation:PL,louvain:uB,iLouvain:QL,kCore:RL,kMeans:HL,cosineSimilarity:fB,nodesCosineSimilarity:GL,minimumSpanningTree:zL,pageRank:KL,getNeighbors:Ca,Stack:Lu,GADDI:XL},QK=Object.freeze(Object.defineProperty({__proto__:null,GADDI:XL,Stack:Lu,breadthFirstSearch:IL,connectedComponent:rB,cosineSimilarity:fB,default:PK,depthFirstSearch:nB,detectAllCycles:OL,detectAllDirectedCycle:oB,detectAllUndirectedCycle:iB,detectCycle:aB,detectDirectedCycle:YL,dijkstra:$l,findAllPath:kL,findShortestPath:NL,floydWarshall:Wl,getAdjMatrix:Ss,getDegree:Oo,getInDegree:FL,getNeighbors:Ca,getOutDegree:LL,iLouvain:QL,kCore:RL,kMeans:HL,labelPropagation:PL,louvain:uB,minimumSpanningTree:zL,nodesCosineSimilarity:GL,pageRank:KL},Symbol.toStringTag,{value:"Module"}));var Fv=Xa,RK=function(e){return function(t,n){return t[e]-n[e]}},dC=function(e,t,n){return e>=t&&e<=n},Ng=function(e,t,n,a){var i=1e-4,o={x:n.x-e.x,y:n.y-e.y},A={x:t.x-e.x,y:t.y-e.y},s={x:a.x-n.x,y:a.y-n.y},u=A.x*s.y-A.y*s.x,f=u*u,l=1/u,c=A.x*A.x+A.y*A.y,h=s.x*s.x+s.y*s.y;if(f>i*c*h){var d=(o.x*s.y-o.y*s.x)*l,v=(o.x*A.y-o.y*A.x)*l;return!dC(d,0,1)||!dC(v,0,1)?null:{x:e.x+d*A.x,y:e.y+d*A.y}}return null},ZL=function(e,t){var n=e.x,a=e.y,i=e.width,o=e.height,A=n+i/2,s=a+o/2,u=[],f={x:A,y:s};u.push({x:n,y:a}),u.push({x:n+i,y:a}),u.push({x:n+i,y:a+o}),u.push({x:n,y:a+o}),u.push({x:n,y:a});for(var l=null,c=1;c<u.length&&(l=Ng(u[c-1],u[c],f,t),!l);c++);return l},qL=function(e,t){var n=e.x,a=e.y,i=e.r,o=t.x,A=t.y,s=o-n,u=A-a;if(s*s+u*u<i*i)return null;var f=Math.atan(u/s);return{x:n+Math.abs(i*Math.cos(f))*Math.sign(s),y:a+Math.abs(i*Math.sin(f))*Math.sign(u)}},JL=function(e,t){var n=e.rx,a=e.ry,i=e.x,o=e.y,A=t.x-i,s=t.y-o,u=Math.atan2(s/a,A/n);return u<0&&(u+=2*Math.PI),{x:i+n*Math.cos(u),y:o+a*Math.sin(u)}},ku=function(e,t,n){n===void 0&&(n=1);var a=[e.x,e.y,n];return(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]),Og(a,a,t),{x:a[0],y:a[1]}},eD=function(e,t,n){n===void 0&&(n=1),(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]);var a=Hw([1,0,0,0,1,0,0,0,1],t);a||(a=[1,0,0,0,1,0,0,0,1]);var i=[e.x,e.y,n];return Og(i,i,a),{x:i[0],y:i[1]}},Mm=function(e,t,n){var a=e.x-t.x,i=e.y-t.y,o=e.x-n.x,A=e.y-n.y,s=(e.x*e.x-t.x*t.x-t.y*t.y+e.y*e.y)/2,u=(e.x*e.x-n.x*n.x-n.y*n.y+e.y*e.y)/2,f=i*o-a*A;return{x:-(A*s-i*u)/f,y:-(a*u-o*s)/f}},Lv=function(e,t){var n=e.x-t.x,a=e.y-t.y;return Math.sqrt(n*n+a*a)},HK=function(e,t){var n=[];return e.forEach(function(a){var i=[];a.forEach(function(o){i.push(o*t)}),n.push(i)}),n},GK=function(e){for(var t=[],n=e.length,a=0;a<n;a+=1){t[a]=[];for(var i=0;i<n;i+=1)a===i?t[a][i]=0:e[a][i]===0||!e[a][i]?t[a][i]=1/0:t[a][i]=e[a][i]}for(var o=0;o<n;o+=1)for(var a=0;a<n;a+=1)for(var i=0;i<n;i+=1)t[a][i]>t[a][o]+t[o][i]&&(t[a][i]=t[a][o]+t[o][i]);return t},zK=function(e,t){var n=e.nodes,a=e.edges,i=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(function(A,s){o[A.id]=s;var u=[];i.push(u)}),a&&a.forEach(function(A){var s=A.source,u=A.target,f=o[s],l=o[u];i[f][l]=1,t||(i[l][f]=1)}),i},tD=function(e,t){e.translate(t.x,t.y)},Im=function(e,t,n,a){a===void 0&&(a={duration:500});var i=e.getMatrix();i||(i=[1,0,0,0,1,0,0,0,1]);var o=e.getCanvasBBox(),A=t.x-o.minX,s=t.y-o.minY;if(n){var u=A*i[0],f=s*i[4],l=0,c=0,h=0,d=0;e.animate(function(g){return h=u*g,d=f*g,i=Fv(i,[["t",h-l,d-c]]),l=h,c=d,{matrix:i}},a)}else{var v=Fv(i,[["t",A,s]]);e.setMatrix(v)}},KK=function(e,t){var n=e.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var a=t;yt(t)||(a=[t,t]),yt(t)&&t.length===1&&(a=[t[0],t[0]]),n=Fv(n,[["s",a[0],a[1]]]),e.setMatrix(n)},jK=function(e,t){var n=e.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]),n=Fv(n,[["r",t]]),e.setMatrix(n)},$K=function(e,t,n){for(var a=[],i=0;i<e;i++)a[i]=0;return n.forEach(function(o){o.source&&(a[t[o.source]]+=1),o.target&&(a[t[o.target]]+=1)}),a};function WK(r,e,t){return(t[0]-r[0])*(e[1]-r[1])===(e[0]-r[0])*(t[1]-r[1])&&Math.min(r[0],e[0])<=t[0]&&t[0]<=Math.max(r[0],e[0])&&Math.min(r[1],e[1])<=t[1]&&t[1]<=Math.max(r[1],e[1])}var Vl=function(e,t,n){var a=!1,i=e.length,o=1e-6;function A(l){return Math.abs(l)<o?0:l<0?-1:1}if(i<=2)return!1;for(var s=0;s<i;s++){var u=e[s],f=e[(s+1)%i];if(WK(u,f,[t,n]))return!0;A(u[1]-n)>0!=A(f[1]-n)>0&&A(t-(n-u[1])*(u[0]-f[0])/(u[1]-f[1])-u[0])<0&&(a=!a)}return a},rD=function(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)},VK=function(e,t){var n=!1;return ye(e,function(a){if(Ng(a.from,a.to,t.from,t.to))return n=!0,!1}),n},nD=function(e,t){var n=function(c){var h=c.map(function(v){return v[0]}),d=c.map(function(v){return v[1]});return{minX:Math.min.apply(null,h),maxX:Math.max.apply(null,h),minY:Math.min.apply(null,d),maxY:Math.max.apply(null,d)}},a=function(c){for(var h=[],d=c.length,v=0;v<d-1;v++){var g=c[v],p=c[v+1];h.push({from:{x:g[0],y:g[1]},to:{x:p[0],y:p[1]}})}if(h.length>1){var y=c[0],m=c[d-1];h.push({from:{x:m[0],y:m[1]},to:{x:y[0],y:y[1]}})}return h};if(e.length<2||t.length<2)return!1;var i=n(e),o=n(t);if(!rD(i,o))return!1;var A=!1;if(ye(t,function(l){if(Vl(e,l[0],l[1]))return A=!0,!1}),A||(ye(e,function(l){if(Vl(t,l[0],l[1]))return A=!0,!1}),A))return!0;var s=a(e),u=a(t),f=!1;return ye(u,function(l){if(VK(s,l))return f=!0,!1}),f},Ms=function(){function r(e,t,n,a){this.x1=e,this.y1=t,this.x2=n,this.y2=a}return r.prototype.getBBox=function(){var e=Math.min(this.x1,this.x2),t=Math.min(this.y1,this.y2),n=Math.max(this.x1,this.x2),a=Math.max(this.y1,this.y2),i={x:e,y:t,minX:e,minY:t,maxX:n,maxY:a,width:n-e,height:a-t};return i},r}(),lB=function(e,t){var n={top:[e.minX,e.minY,e.maxX,e.minY],left:[e.minX,e.minY,e.minX,e.maxY],bottom:[e.minX,e.maxY,e.maxX,e.maxY],right:[e.maxX,e.minY,e.maxX,e.maxY]};return n[t]},XK=function(e,t){var n=(t.x2-t.x1)*(e.y1-t.y1)-(t.y2-t.y1)*(e.x1-t.x1),a=(e.x2-e.x1)*(e.y1-t.y1)-(e.y2-e.y1)*(e.x1-t.x1),i=(t.y2-t.y1)*(e.x2-e.x1)-(t.x2-t.x1)*(e.y2-e.y1);if(i){var o=n/i,A=a/i;if(o>=0&&o<=1&&A>=0&&A<=1)return o}return Number.POSITIVE_INFINITY},aD=function(e,t){for(var n=["top","left","bottom","right"],a=e.getBBox(),i=0,o=[],A=0;A<4;A++){var s=lB(a,n[A]),u=s[0],f=s[1],l=s[2],c=s[3];o[A]=Ng({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:u,y:f},{x:l,y:c}),o[A]&&(i+=1)}return[o,i]},cB=function(e,t){for(var n=["top","left","bottom","right"],a=e.getBBox(),i=Number.POSITIVE_INFINITY,o=0,A=0;A<4;A++){var s=lB(a,n[A]),u=s[0],f=s[1],l=s[2],c=s[3],h=XK(t,new Ms(u,f,l,c));h=Math.abs(h-.5),h>=0&&h<=1&&(o+=1,i=h<i?h:i)}return o===0?-1:i},iD=function(e){var t=0,n=0;if(e.length>0){for(var a=0,i=e;a<i.length;a++){var o=i[a];t+=o.x,n+=o.y}t/=e.length,n/=e.length}return{x:t,y:n}},Dv=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},oD=function(e,t){var n=t.x1,a=t.y1,i=t.x2-n,o=t.y2-a,A=e.x-n,s=e.y-a,u=A*i+s*o,f;u<=0?f=0:(A=i-A,s=o-s,u=A*i+s*o,u<=0?f=0:f=u*u/(i*i+o*o));var l=A*A+s*s-f;return l<0&&(l=0),l},Tm=function(e,t,n){return n===void 0&&(n=.001),Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(n,2)},AD=function(e,t){var n=e.x<t.x,a=e.x>t.x+t.width,i=e.y>t.y+t.height,o=e.y<t.y,A=n||a||i||o;if(!A)return 0;if(i&&!n&&!a)return Math.pow(t.y+t.height-e.y,2);if(o&&!n&&!a)return Math.pow(e.y-t.y,2);if(n&&!i&&!o)return Math.pow(t.x-e.x,2);if(a&&!i&&!o)return Math.pow(t.x+t.width-e.x,2);var s=Math.min(Math.abs(t.x-e.x),Math.abs(t.x+t.width-e.x)),u=Math.min(Math.abs(t.y-e.y),Math.abs(t.y+t.height-e.y));return s*s+u*u},YK=function(e,t){var n=e[0],a=e[1],i=e[2],o=e[3],A=t.x,s=t.y,u=[i-n,o-a];if(tB(u,[0,0]))return NaN;var f=[-u[1],u[0]];mA(f,f);var l=[A-n,s-a];return Math.abs(eB(l,f))},hB=function(e,t,n){return e+(t-e)*n},Fm=function(e,t,n){for(var a=Math.min(e.length,t.length),i=new Array(a),o=0;o<a;o++)i[o]=hB(e[o],t[o],n);return i};const ZK=Object.freeze(Object.defineProperty({__proto__:null,Line:Ms,applyMatrix:ku,compare:RK,distance:Lv,floydWarshall:GK,fractionToLine:cB,getAdjMatrix:zK,getBBoxBoundLine:lB,getCircleCenterByPoints:Mm,getCircleIntersectByPoint:qL,getDegree:$K,getEllipseIntersectByPoint:JL,getLineIntersect:Ng,getPointsCenter:iD,getRectIntersectByPoint:ZL,intersectBBox:rD,invertMatrix:eD,isPointInPolygon:Vl,isPointsOverlap:Tm,isPolygonsIntersect:nD,itemIntersectByLine:aD,lerp:hB,lerpArray:Fm,move:Im,pointLineDistance:YK,pointLineSquareDist:oD,pointRectSquareDist:AD,rotate:jK,scale:KK,scaleMatrix:HK,squareDist:Dv,translate:tD},Symbol.toStringTag,{value:"Module"}));var Xo="rgb(95, 149, 255)",qK="rgb(255, 255, 255)",vC="rgb(0, 0, 0)",V0="rgb(247, 250, 255)",sD="rgb(239, 244, 255)",Lh="rgb(253, 253, 253)",gC="rgb(250, 250, 250)",Dh="rgb(224, 224, 224)",pC="rgb(234, 234, 234)",JK="rgb(245, 245, 245)",ej="rgb(191, 213, 255)",yC="#4572d9",tj="rgb(223, 234, 255)",or={mainStroke:Xo,mainFill:sD,activeStroke:Xo,activeFill:V0,inactiveStroke:ej,inactiveFill:V0,selectedStroke:Xo,selectedFill:qK,highlightStroke:yC,highlightFill:tj,disableStroke:Dh,disableFill:gC,edgeMainStroke:Dh,edgeActiveStroke:Xo,edgeInactiveStroke:pC,edgeSelectedStroke:Xo,edgeHighlightStroke:Xo,edgeDisableStroke:JK,comboMainStroke:Dh,comboMainFill:Lh,comboActiveStroke:Xo,comboActiveFill:V0,comboInactiveStroke:Dh,comboInactiveFill:Lh,comboSelectedStroke:Xo,comboSelectedFill:Lh,comboHighlightStroke:yC,comboHighlightFill:Lh,comboDisableStroke:pC,comboDisableFill:gC};const ct={version:"0.8.20",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:or.mainStroke,fill:sD},size:20,color:or.mainStroke,linkPoints:{size:8,lineWidth:1,fill:or.activeFill,stroke:or.activeStroke}},nodeStateStyles:{active:{fill:or.activeFill,stroke:or.activeStroke,lineWidth:2,shadowColor:or.mainStroke,shadowBlur:10},selected:{fill:or.selectedFill,stroke:or.selectedStroke,lineWidth:4,shadowColor:or.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:or.highlightFill,stroke:or.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:or.inactiveFill,stroke:or.inactiveStroke,lineWidth:1},disable:{fill:or.disableFill,stroke:or.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:vC,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:or.edgeMainStroke,lineAppendWidth:2},color:or.edgeMainStroke},edgeStateStyles:{active:{stroke:or.edgeActiveStroke,lineWidth:1},selected:{stroke:or.edgeSelectedStroke,lineWidth:2,shadowColor:or.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:or.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:or.edgeInactiveStroke,lineWidth:1},disable:{stroke:or.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:vC,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:or.comboMainFill,lineWidth:1,stroke:or.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:or.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:or.comboActiveStroke,lineWidth:1,fill:or.comboActiveFill},selected:{stroke:or.comboSelectedStroke,lineWidth:2,fill:or.comboSelectedFill,shadowColor:or.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:or.comboHighlightStroke,lineWidth:2,fill:or.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:or.comboInactiveStroke,fill:or.comboInactiveFill,lineWidth:1},disable:{stroke:or.comboDisableStroke,fill:or.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:typeof window<"u"&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},rj={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875};var Di=Math.PI,Lm=Math.sin,Dm=Math.cos,Sn=Lm(Di/8),Mn=Dm(Di/8),Ov=function(e,t){var n=e.getBBox(),a={x:n.minX,y:n.minY},i={x:n.maxX,y:n.maxY};if(t){var o=t.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),a=ku(a,o),i=ku(i,o)}var A=a.x,s=a.y,u=i.x,f=i.y;return{x:A,y:s,minX:A,minY:s,maxX:u,maxY:f,width:u-A,height:f-s}},uD=function(e){var t=e.sourceNode||e.targetNode,n=t.get("group"),a=n.getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]);var i=t.getKeyShape(),o=i.getBBox(),A=e.loopCfg||{},s=A.dist||Math.max(o.width,o.height)*2,u=A.position||ct.defaultLoopPosition,f=[(o.minX+o.maxX)/2+a[6],(o.minY+o.maxY)/2+a[7]],l=[e.startPoint.x,e.startPoint.y],c=[e.endPoint.x,e.endPoint.y],h=o.height/2,d=o.width/2,v=h,g=h,p=v*Sn,y=v*Mn,m=g*Sn,w=g*Mn,B=i.get("type"),E=Math.min(h/2,d/2),b=Math.min(h,d),C=A!=null&&A.pointPadding?Math.min(b,A==null?void 0:A.pointPadding):E;if(l[0]===c[0]&&l[1]===c[1]){switch(u){case"top":B==="circle"?(l=[f[0]-p,f[1]-y],c=[f[0]+m,f[1]-w]):(l=[f[0]-C,f[1]-h],c=[f[0]+C,f[1]-h]);break;case"top-right":v=h,g=d,B==="circle"?(p=v*Sn,y=v*Mn,m=g*Sn,w=g*Mn,l=[f[0]+p,f[1]-y],c=[f[0]+w,f[1]-m]):(l=[f[0]+d-C,f[1]-h],c=[f[0]+d,f[1]-h+C]);break;case"right":v=d,g=d,B==="circle"?(p=v*Sn,y=v*Mn,m=g*Sn,w=g*Mn,l=[f[0]+y,f[1]-p],c=[f[0]+w,f[1]+m]):(l=[f[0]+d,f[1]-C],c=[f[0]+d,f[1]+C]);break;case"bottom-right":v=d,g=h,B==="circle"?(p=v*Sn,y=v*Mn,m=g*Sn,w=g*Mn,l=[f[0]+y,f[1]+p],c=[f[0]+m,f[1]+w]):(l=[f[0]+d,f[1]+h-C],c=[f[0]+d-C,f[1]+h]);break;case"bottom":v=h,g=h,B==="circle"?(p=v*Sn,y=v*Mn,m=g*Sn,w=g*Mn,l=[f[0]+p,f[1]+y],c=[f[0]-m,f[1]+w]):(l=[f[0]-C,f[1]+h],c=[f[0]+C,f[1]+h]);break;case"bottom-left":v=h,g=d,B==="circle"?(p=v*Sn,y=v*Mn,m=g*Sn,w=g*Mn,l=[f[0]-p,f[1]+y],c=[f[0]-w,f[1]+m]):(l=[f[0]-d,f[1]+h-C],c=[f[0]-d+C,f[1]+h]);break;case"left":v=d,g=d,B==="circle"?(p=v*Sn,y=v*Mn,m=g*Sn,w=g*Mn,l=[f[0]-y,f[1]+p],c=[f[0]-w,f[1]-m]):(l=[f[0]-d,f[1]-C],c=[f[0]-d,f[1]+C]);break;case"top-left":v=d,g=h,B==="circle"?(p=v*Sn,y=v*Mn,m=g*Sn,w=g*Mn,l=[f[0]-y,f[1]-p],c=[f[0]-m,f[1]-w]):(l=[f[0]-d+C,f[1]-h],c=[f[0]-d,f[1]-h+C]);break;default:v=d,g=d,p=v*Sn,y=v*Mn,m=g*Sn,w=g*Mn,l=[f[0]-p,f[1]-y],c=[f[0]+m,f[1]-w]}if(A.clockwise===!1){var _=[l[0],l[1]];l=[c[0],c[1]],c=[_[0],_[1]]}}var x=[l[0]-f[0],l[1]-f[1]],M=(v+s)/v,S=(g+s)/g;A.clockwise===!1&&(M=(g+s)/g,S=(v+s)/v);var I=Wn([0,0],x,M),D=[f[0]+I[0],f[1]+I[1]],O=[c[0]-f[0],c[1]-f[1]],F=Wn([0,0],O,S),U=[f[0]+F[0],f[1]+F[1]];return e.startPoint={x:l[0],y:l[1]},e.endPoint={x:c[0],y:c[1]},e.controlPoints=[{x:D[0],y:D[1]},{x:U[0],y:U[1]}],e},fD=function(e,t,n,a,i){var o=1e-4,A=[],s=e==null?void 0:e.getPoint(t);if(!s)return{x:0,y:0,angle:0};if(t<o)A=e.getStartTangent().reverse();else if(t>1-o)A=e.getEndTangent();else{var u=e==null?void 0:e.getPoint(t+o);A.push([s.x,s.y]),A.push([u.x,u.y])}var f=Math.atan2(A[1][1]-A[0][1],A[1][0]-A[0][0]);if(f<0&&(f+=Di*2),n&&(s.x+=Dm(f)*n,s.y+=Lm(f)*n),a){var l=f-Di/2;f>1/2*Di&&f<3*1/2*Di&&(l-=Di),s.x+=Dm(l)*a,s.y+=Lm(l)*a}var c={x:s.x,y:s.y,angle:f};return i?(f>.5*Di&&f<1.5*Di&&(f-=Di),P({rotate:f},c)):c},nj=function r(e,t,n,a){if(a(e,t,n)===!1)return!1;if(e&&e.children){for(var i=e.children.length-1;i>=0;i--)if(!r(e.children[i],e,i,a))return!1}return!0},aj=function r(e,t,n,a){if(e&&e.children){for(var i=e.children.length-1;i>=0;i--)if(!r(e.children[i],e,i,a))return}return a(e,t,n)!==!1},$n=function(e,t){typeof t=="function"&&nj(e,null,-1,t)},Oi=function(e,t){typeof t=="function"&&aj(e,null,-1,t)},lD=function(e,t){return t*(rj[e]||1)},cD=function(e,t){var n=0,a=new RegExp("[一-龥]+");return e.split("").forEach(function(i){a.test(i)?n+=t:n+=lD(i,t)}),[n,t]},hD=function(e,t){return typeof t!="number"||t<=0||t>=e.length?e:e.substring(0,t)+"..."},Om=function(e,t){var n=[],a={},i={};e.forEach(function(s){i[s.id]=s}),e.forEach(function(s,u){var f=Xt(s);f.itemType="combo",f.children=void 0,f.parentId===f.id?(console.warn("The parentId for combo ".concat(f.id," can not be the same as the combo's id")),delete f.parentId):f.parentId&&!i[f.parentId]&&(console.warn("The parent combo for combo ".concat(f.id," does not exist!")),delete f.parentId);var l=a[f.id];if(l){if(f.children=l.children,a[f.id]=f,l=f,!l.parentId){n.push(l);return}var c=a[l.parentId];if(c)c.children?c.children.push(f):c.children=[f];else{var h={id:l.parentId,children:[l]};a[l.parentId]=h,a[f.id]=f}return}if(Oe(s.parentId)){var d=a[s.parentId];if(d)d.children?d.children.push(f):d.children=[f],a[f.id]=f;else{var v={id:s.parentId,children:[f]};a[v.id]=v,a[f.id]=f}}else n.push(f),a[f.id]=f});var o={};(t||[]).forEach(function(s){o[s.id]=s;var u=a[s.comboId];if(u){var f={id:s.id,comboId:s.comboId};u.children?u.children.push(f):u.children=[f],f.itemType="node",a[s.id]=f}});var A=0;return n.forEach(function(s){s.depth=A+10,$n(s,function(u){var f,l=a[u.id].itemType;l==="node"?f=a[u.comboId]:f=a[u.parentId],f&&l==="node"?u.depth=A+1:u.depth=A+10,A<u.depth&&(A=u.depth);var c=o[u.id];return c&&(c.depth=u.depth),!0})}),n},Um=function(e,t,n){var a,i=e,o,A={root:{children:e}},s=!1,u="root";(e||[]).forEach(function(d){if(!s){if(d.id===t){o=d,d.itemType==="combo"?o.parentId=n:o.comboId=n,s=!0;return}$n(d,function(v){var g;return A[v.id]={children:(v==null?void 0:v.children)||[]},i=(g=A[v.parentId||v.comboId||"root"])===null||g===void 0?void 0:g.children,v&&(v.removed||t===v.id)&&i?(u=v.parentId||v.comboId||"root",o=v,v.itemType==="combo"?o.parentId=n:o.comboId=n,s=!0,!1):!0})}}),i=(a=A[u])===null||a===void 0?void 0:a.children;var f=i?i.indexOf(o):-1;if(f>-1&&i.splice(f,1),s||(o={id:t,itemType:"node",comboId:n},A[t]={children:void 0}),t){var l=!1;if(n){var c=0;(e||[]).forEach(function(d){l||$n(d,function(v){return n===v.id?(l=!0,v.children?v.children.push(o):v.children=[o],c=v.depth,o.itemType==="node"?o.depth=c+2:o.depth=c+1,!1):!0})})}else(!n||!l)&&o.itemType!=="node"&&e.push(o);var h=o.depth;$n(o,function(d){return d.itemType==="node"?h+=2:h+=1,d.depth=h,!0})}return e},rv=function(e,t,n){var a={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};if(!e||e.length===0){var i=n==null?void 0:n.getModel(),o=i||{},A=o.x,s=o.y,u=o.fixSize,f=o.collapsed,l=o.fixCollapseSize,c=f?l:u,h=yt(c)?c:[c,c],d=h[0],v=h[1],g=[d/2,v/2];return{minX:A-g[0],minY:s-g[1],maxX:A+g[0],maxY:s+g[1],x:A,y:s,width:d,height:v}}return e.forEach(function(p){var y=t.findById(p.id);if(!(!y||!y.isVisible())){y.set("bboxCanvasCache",void 0);var m=y.getCanvasBBox();m.x&&a.minX>m.minX&&(a.minX=m.minX),m.y&&a.minY>m.minY&&(a.minY=m.minY),m.x&&a.maxX<m.maxX&&(a.maxX=m.maxX),m.y&&a.maxY<m.maxY&&(a.maxY=m.maxY)}}),a.x=(a.minX+a.maxX)/2,a.y=(a.minY+a.maxY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY,a.centerX=(a.minX+a.maxX)/2,a.centerY=(a.minY+a.maxY)/2,(n==null?void 0:n.getKeyShape().get("type"))==="circle"&&(a.width=Math.hypot(a.height,a.width),a.height=a.width),Object.keys(a).forEach(function(p){(a[p]===1/0||a[p]===-1/0)&&(a[p]=void 0)}),a},ij=function(e){var t=vt(e.x)||vt(e.y)||e.type||e.anchorPoints||e.size;return e.style&&(t=t||vt(e.style.r)||vt(e.style.width)||vt(e.style.height)||vt(e.style.rx)||vt(e.style.ry)),t},nv=function(e){var t={};return Object.keys(e).forEach(function(n){var a=e[n];if(!(n==="img"&&!Oe(a)))if(On(a)&&!yt(a)){var i={};Object.keys(a).forEach(function(o){var A=a[o];o==="img"&&!Oe(A)||(i[o]=Xt(A))}),t[n]=i}else t[n]=Xt(a)}),t},Xl=function(e){var t=e.animateCfg,n=e.callback,a;if(!t)a={duration:500,callback:n};else if(a=Xt(t),t.callback){var i=t.callback;a.callback=function(){n(),i()}}else a.callback=n;return a};const oj=Object.freeze(Object.defineProperty({__proto__:null,cloneBesidesImg:nv,getAnimateCfgWithCallback:Xl,getBBox:Ov,getComboBBox:rv,getLabelPosition:fD,getLetterWidth:lD,getLoopCfgs:uD,getTextSize:cD,plainCombosToTrees:Om,reconstructTree:Um,shouldRefreshEdge:ij,traverseTree:$n,traverseTreeUp:Oi,truncateLabelByLength:hD},Symbol.toStringTag,{value:"Module"}));var mC=function(e){if(!e)return console.error("G6 Error Tips: the data must be defined"),!1;var t=e.nodes,n=e.edges,a=e.combos,i=a===void 0?[]:a;if(!t&&!n){var o=!0;return $n(e,function(c){return Oe(c.id)?!0:(o=!1,!1)}),o}var A=(t||[]).find(function(c){return!Oe(c.id)});if(A)return console.warn("G6 Warning Tips: missing 'id' property, or %c".concat(A.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1;var s=(t||[]).map(function(c){return c.id}),u=i==null?void 0:i.map(function(c){return c.id}),f=li(li([],s,!0),u,!0),l=(n||[]).find(function(c){return!f.includes(c.source)||!f.includes(c.target)});return l?(console.warn("G6 Warning Tips: The source %c".concat(l.source,"%c or the target %c").concat(l.target,"%c of the edge do not exist in the nodes or combos."),"font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1):!0},Aj=function(e,t){if(e==="node"||e==="combo"){if(t.id&&!Oe(t.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c".concat(t.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1}else if(e==="edge"&&(!t.source||!t.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0},sj=function(){function r(e){this.graph=e,this.destroyed=!1,this.modes=e.get("modes")||{default:[]},this.formatModes(),this.mode=e.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return r.prototype.formatModes=function(){var e=this.modes;ye(e,function(t){ye(t,function(n,a){Oe(n)&&(t[a]={type:n})})})},r.prototype.setBehaviors=function(e){var t=this.graph,n=this.modes[e],a=[],i;ye(n||[],function(o){var A=Rw.getBehavior(o.type||o);A&&(i=new A(o),i&&(i.bind(t),a.push(i)))}),this.currentBehaves=a},r.mergeBehaviors=function(e,t){return ye(t,function(n){e.indexOf(n)<0&&(Oe(n)&&(n={type:n}),e.push(n))}),e},r.filterBehaviors=function(e,t){var n=[];return e.forEach(function(a){var i="";Oe(a)?i=a:i=a.type,t.indexOf(i)<0&&n.push(a)}),n},r.prototype.setMode=function(e){var t=this,n=t.modes,a=t.graph,i=e,o=n[i];o&&(a.emit("beforemodechange",{mode:e}),ye(this.currentBehaves,function(A){A.delegate&&A.delegate.remove(),A.unbind(a)}),this.setBehaviors(i),a.emit("aftermodechange",{mode:e}),this.mode=e)},r.prototype.getMode=function(){return this.mode},r.prototype.manipulateBehaviors=function(e,t,n){var a=this,i;if(yt(e)?i=e:i=[e],yt(t))return ye(t,function(A){a.modes[A]?n?a.modes[A]=r.mergeBehaviors(a.modes[A]||[],i):a.modes[A]=r.filterBehaviors(a.modes[A]||[],i):n&&(a.modes[A]=i)}),this;var o=t;return t||(o=this.mode),this.modes[o]||n&&(this.modes[o]=i),n?this.modes[o]=r.mergeBehaviors(this.modes[o]||[],i):this.modes[o]=r.filterBehaviors(this.modes[o]||[],i),this.formatModes(),this.setMode(this.mode),this},r.prototype.updateBehavior=function(e,t,n){Oe(e)&&(e={type:e});var a=[];if(!n||n===this.mode||n==="default"){if(a=this.currentBehaves,!a||!a.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var i=a.length,o=0;o<i;o++){var A=a[o];if(A.type===e.type)return A.updateCfg(t),this;o===i-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(a=this.modes[n],!a||!a.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var s=a.length,o=0;o<s;o++){var A=a[o];if(A.type===e.type||A===e.type)return A===e.type&&(A={type:A}),Object.assign(A,t),a[o]=A,this;o===s-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},r.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},r}(),Cl=`	
\v\f\r   ᠎             　\u2028\u2029`,uj=new RegExp("([a-z])["+Cl+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Cl+"]*,?["+Cl+"]*)+)","ig"),fj=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Cl+"]*,?["+Cl+"]*","ig"),Du=function(r){if(!r)return null;if(yt(r))return r;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(r).replace(uj,function(n,a,i){var o=[],A=a.toLowerCase();if(i.replace(fj,function(s,u){u&&o.push(+u)}),A==="m"&&o.length>2&&(t.push([a].concat(o.splice(0,2))),A="l",a=a==="m"?"l":"L"),A==="o"&&o.length===1&&t.push([a,o[0]]),A==="r")t.push([a].concat(o));else for(;o.length>=e[A]&&(t.push([a].concat(o.splice(0,e[A]))),!!e[A]););return r}),t},Nm=function(r,e){for(var t=[],n=0,a=r.length;a-2*!e>n;n+=2){var i=[{x:+r[n-2],y:+r[n-1]},{x:+r[n],y:+r[n+1]},{x:+r[n+2],y:+r[n+3]},{x:+r[n+4],y:+r[n+5]}];e?n?a-4===n?i[3]={x:+r[0],y:+r[1]}:a-2===n&&(i[2]={x:+r[0],y:+r[1]},i[3]={x:+r[2],y:+r[3]}):i[0]={x:+r[a-2],y:+r[a-1]}:a-4===n?i[3]=i[2]:n||(i[0]={x:+r[n],y:+r[n+1]}),t.push(["C",(-i[0].x+6*i[1].x+i[2].x)/6,(-i[0].y+6*i[1].y+i[2].y)/6,(i[1].x+6*i[2].x-i[3].x)/6,(i[1].y+6*i[2].y-i[3].y)/6,i[2].x,i[2].y])}return t},Oh=function(r,e,t,n,a){var i=[];if(a===null&&n===null&&(n=t),r=+r,e=+e,t=+t,n=+n,a!==null){var o=Math.PI/180,A=r+t*Math.cos(-n*o),s=r+t*Math.cos(-a*o),u=e+t*Math.sin(-n*o),f=e+t*Math.sin(-a*o);i=[["M",A,u],["A",t,t,0,+(a-n>180),0,s,f]]}else i=[["M",r,e],["m",0,-n],["a",t,n,0,1,1,0,2*n],["a",t,n,0,1,1,0,-2*n],["z"]];return i},km=function(r){if(r=Du(r),!r||!r.length)return[["M",0,0]];var e=[],t=0,n=0,a=0,i=0,o=0,A,s;r[0][0]==="M"&&(t=+r[0][1],n=+r[0][2],a=t,i=n,o++,e[0]=["M",t,n]);for(var u=r.length===3&&r[0][0]==="M"&&r[1][0].toUpperCase()==="R"&&r[2][0].toUpperCase()==="Z",f=void 0,l=void 0,c=o,h=r.length;c<h;c++){if(e.push(f=[]),l=r[c],A=l[0],A!==A.toUpperCase())switch(f[0]=A.toUpperCase(),f[0]){case"A":f[1]=l[1],f[2]=l[2],f[3]=l[3],f[4]=l[4],f[5]=l[5],f[6]=+l[6]+t,f[7]=+l[7]+n;break;case"V":f[1]=+l[1]+n;break;case"H":f[1]=+l[1]+t;break;case"R":s=[t,n].concat(l.slice(1));for(var d=2,v=s.length;d<v;d++)s[d]=+s[d]+t,s[++d]=+s[d]+n;e.pop(),e=e.concat(Nm(s,u));break;case"O":e.pop(),s=Oh(t,n,l[1],l[2]),s.push(s[0]),e=e.concat(s);break;case"U":e.pop(),e=e.concat(Oh(t,n,l[1],l[2],l[3])),f=["U"].concat(e[e.length-1].slice(-2));break;case"M":a=+l[1]+t,i=+l[2]+n;break;default:for(var d=1,v=l.length;d<v;d++)f[d]=+l[d]+(d%2?t:n)}else if(A==="R")s=[t,n].concat(l.slice(1)),e.pop(),e=e.concat(Nm(s,u)),f=["R"].concat(l.slice(-2));else if(A==="O")e.pop(),s=Oh(t,n,l[1],l[2]),s.push(s[0]),e=e.concat(s);else if(A==="U")e.pop(),e=e.concat(Oh(t,n,l[1],l[2],l[3])),f=["U"].concat(e[e.length-1].slice(-2));else for(var g=0,p=l.length;g<p;g++)f[g]=l[g];if(A=A.toUpperCase(),A!=="O")switch(f[0]){case"Z":t=+a,n=+i;break;case"H":t=f[1];break;case"V":n=f[1];break;case"M":a=f[f.length-2],i=f[f.length-1];break;default:t=f[f.length-2],n=f[f.length-1]}}return e},Uh=function(r,e,t,n){return[r,e,t,n,t,n]},wC=function(r,e,t,n,a,i){var o=.3333333333333333,A=2/3;return[o*r+A*t,o*e+A*n,o*a+A*t,o*i+A*n,a,i]},dD=function(r,e,t,n,a,i,o,A,s,u){t===n&&(t+=1);var f=Math.PI*120/180,l=Math.PI/180*(+a||0),c=[],h,d,v,g,p,y=function(Re,tt,st){var at=Re*Math.cos(st)-tt*Math.sin(st),Et=Re*Math.sin(st)+tt*Math.cos(st);return{x:at,y:Et}};if(u)d=u[0],v=u[1],g=u[2],p=u[3];else{h=y(r,e,-l),r=h.x,e=h.y,h=y(A,s,-l),A=h.x,s=h.y,r===A&&e===s&&(A+=1,s+=1);var m=(r-A)/2,w=(e-s)/2,B=m*m/(t*t)+w*w/(n*n);B>1&&(B=Math.sqrt(B),t=B*t,n=B*n);var E=t*t,b=n*n,C=(i===o?-1:1)*Math.sqrt(Math.abs((E*b-E*w*w-b*m*m)/(E*w*w+b*m*m)));g=C*t*w/n+(r+A)/2,p=C*-n*m/t+(e+s)/2,d=Math.asin(((e-p)/n).toFixed(9)),v=Math.asin(((s-p)/n).toFixed(9)),d=r<g?Math.PI-d:d,v=A<g?Math.PI-v:v,d<0&&(d=Math.PI*2+d),v<0&&(v=Math.PI*2+v),o&&d>v&&(d=d-Math.PI*2),!o&&v>d&&(v=v-Math.PI*2)}var _=v-d;if(Math.abs(_)>f){var x=v,M=A,S=s;v=d+f*(o&&v>d?1:-1),A=g+t*Math.cos(v),s=p+n*Math.sin(v),c=dD(A,s,t,n,a,0,o,M,S,[v,x,g,p])}_=v-d;var I=Math.cos(d),D=Math.sin(d),O=Math.cos(v),F=Math.sin(v),U=Math.tan(_/4),Q=4/3*t*U,N=4/3*n*U,R=[r,e],J=[r+Q*D,e-N*I],re=[A+Q*F,s-N*O],ee=[A,s];if(J[0]=2*R[0]-J[0],J[1]=2*R[1]-J[1],u)return[J,re,ee].concat(c);c=[J,re,ee].concat(c).join().split(",");for(var q=[],ve=0,Me=c.length;ve<Me;ve++)q[ve]=ve%2?y(c[ve-1],c[ve],l).y:y(c[ve],c[ve+1],l).x;return q},Pm=function(r,e){var t=km(r),n=e&&km(e),a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],A=[],s="",u="",f,l=function(m,w,B){var E,b;if(!m)return["C",w.x,w.y,w.x,w.y,w.x,w.y];switch(!(m[0]in{T:1,Q:1})&&(w.qx=w.qy=null),m[0]){case"M":w.X=m[1],w.Y=m[2];break;case"A":m=["C"].concat(dD.apply(0,[w.x,w.y].concat(m.slice(1))));break;case"S":B==="C"||B==="S"?(E=w.x*2-w.bx,b=w.y*2-w.by):(E=w.x,b=w.y),m=["C",E,b].concat(m.slice(1));break;case"T":B==="Q"||B==="T"?(w.qx=w.x*2-w.qx,w.qy=w.y*2-w.qy):(w.qx=w.x,w.qy=w.y),m=["C"].concat(wC(w.x,w.y,w.qx,w.qy,m[1],m[2]));break;case"Q":w.qx=m[1],w.qy=m[2],m=["C"].concat(wC(w.x,w.y,m[1],m[2],m[3],m[4]));break;case"L":m=["C"].concat(Uh(w.x,w.y,m[1],m[2]));break;case"H":m=["C"].concat(Uh(w.x,w.y,m[1],w.y));break;case"V":m=["C"].concat(Uh(w.x,w.y,w.x,m[1]));break;case"Z":m=["C"].concat(Uh(w.x,w.y,w.X,w.Y));break}return m},c=function(m,w){if(m[w].length>7){m[w].shift();for(var B=m[w];B.length;)o[w]="A",n&&(A[w]="A"),m.splice(w++,0,["C"].concat(B.splice(0,6)));m.splice(w,1),f=Math.max(t.length,n&&n.length||0)}},h=function(m,w,B,E,b){m&&w&&m[b][0]==="M"&&w[b][0]!=="M"&&(w.splice(b,0,["M",E.x,E.y]),B.bx=0,B.by=0,B.x=m[b][1],B.y=m[b][2],f=Math.max(t.length,n&&n.length||0))};f=Math.max(t.length,n&&n.length||0);for(var d=0;d<f;d++){t[d]&&(s=t[d][0]),s!=="C"&&(o[d]=s,d&&(u=o[d-1])),t[d]=l(t[d],a,u),o[d]!=="A"&&s==="C"&&(o[d]="C"),c(t,d),n&&(n[d]&&(s=n[d][0]),s!=="C"&&(A[d]=s,d&&(u=A[d-1])),n[d]=l(n[d],i,u),A[d]!=="A"&&s==="C"&&(A[d]="C"),c(n,d)),h(t,n,a,i,d),h(n,t,i,a,d);var v=t[d],g=n&&n[d],p=v.length,y=n&&g.length;a.x=v[p-2],a.y=v[p-1],a.bx=parseFloat(v[p-4])||a.x,a.by=parseFloat(v[p-3])||a.y,i.bx=n&&(parseFloat(g[y-4])||i.x),i.by=n&&(parseFloat(g[y-3])||i.y),i.x=n&&g[y-2],i.y=n&&g[y-1]}return n?[t,n]:t},lj=/,?([a-z]),?/gi,vD=function(r){return r.join(",").replace(lj,"$1")},BC=function(r,e,t,n,a){var i=-3*e+9*t-9*n+3*a,o=r*i+6*e-12*t+6*n;return r*o-3*e+3*t},EC=function(r,e,t,n,a,i,o,A,s){s===null&&(s=1),s=s>1?1:s<0?0:s;for(var u=s/2,f=12,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],c=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],h=0,d=0;d<f;d++){var v=u*l[d]+u,g=BC(v,r,t,a,o),p=BC(v,e,n,i,A),y=g*g+p*p;h+=c[d]*Math.sqrt(y)}return u*h},cj=function(r,e,t,n,a,i,o,A){for(var s=[],u=[[],[]],f,l,c,h,d=0;d<2;++d){if(d===0?(l=6*r-12*t+6*a,f=-3*r+9*t-9*a+3*o,c=3*t-3*r):(l=6*e-12*n+6*i,f=-3*e+9*n-9*i+3*A,c=3*n-3*e),Math.abs(f)<1e-12){if(Math.abs(l)<1e-12)continue;h=-c/l,h>0&&h<1&&s.push(h);continue}var v=l*l-4*c*f,g=Math.sqrt(v);if(!(v<0)){var p=(-l+g)/(2*f);p>0&&p<1&&s.push(p);var y=(-l-g)/(2*f);y>0&&y<1&&s.push(y)}}for(var m=s.length,w=m,B;m--;)h=s[m],B=1-h,u[0][m]=B*B*B*r+3*B*B*h*t+3*B*h*h*a+h*h*h*o,u[1][m]=B*B*B*e+3*B*B*h*n+3*B*h*h*i+h*h*h*A;return u[0][w]=r,u[1][w]=e,u[0][w+1]=o,u[1][w+1]=A,u[0].length=u[1].length=w+2,{min:{x:Math.min.apply(0,u[0]),y:Math.min.apply(0,u[1])},max:{x:Math.max.apply(0,u[0]),y:Math.max.apply(0,u[1])}}},hj=function(r,e,t,n,a,i,o,A){if(!(Math.max(r,t)<Math.min(a,o)||Math.min(r,t)>Math.max(a,o)||Math.max(e,n)<Math.min(i,A)||Math.min(e,n)>Math.max(i,A))){var s=(r*n-e*t)*(a-o)-(r-t)*(a*A-i*o),u=(r*n-e*t)*(i-A)-(e-n)*(a*A-i*o),f=(r-t)*(i-A)-(e-n)*(a-o);if(f){var l=s/f,c=u/f,h=+l.toFixed(2),d=+c.toFixed(2);if(!(h<+Math.min(r,t).toFixed(2)||h>+Math.max(r,t).toFixed(2)||h<+Math.min(a,o).toFixed(2)||h>+Math.max(a,o).toFixed(2)||d<+Math.min(e,n).toFixed(2)||d>+Math.max(e,n).toFixed(2)||d<+Math.min(i,A).toFixed(2)||d>+Math.max(i,A).toFixed(2)))return{x:l,y:c}}}},Yo=function(r,e,t){return e>=r.x&&e<=r.x+r.width&&t>=r.y&&t<=r.y+r.height},gD=function(r,e,t,n,a){if(a)return[["M",+r+ +a,e],["l",t-a*2,0],["a",a,a,0,0,1,a,a],["l",0,n-a*2],["a",a,a,0,0,1,-a,a],["l",a*2-t,0],["a",a,a,0,0,1,-a,-a],["l",0,a*2-n],["a",a,a,0,0,1,a,-a],["z"]];var i=[["M",r,e],["l",t,0],["l",0,n],["l",-t,0],["z"]];return i.parsePathArray=vD,i},Qm=function(r,e,t,n){return r===null&&(r=e=t=n=0),e===null&&(e=r.y,t=r.width,n=r.height,r=r.x),{x:r,y:e,width:t,w:t,height:n,h:n,x2:r+t,y2:e+n,cx:r+t/2,cy:e+n/2,r1:Math.min(t,n)/2,r2:Math.max(t,n)/2,r0:Math.sqrt(t*t+n*n)/2,path:gD(r,e,t,n),vb:[r,e,t,n].join(" ")}},dj=function(r,e){return r=Qm(r),e=Qm(e),Yo(e,r.x,r.y)||Yo(e,r.x2,r.y)||Yo(e,r.x,r.y2)||Yo(e,r.x2,r.y2)||Yo(r,e.x,e.y)||Yo(r,e.x2,e.y)||Yo(r,e.x,e.y2)||Yo(r,e.x2,e.y2)||(r.x<e.x2&&r.x>e.x||e.x<r.x2&&e.x>r.x)&&(r.y<e.y2&&r.y>e.y||e.y<r.y2&&e.y>r.y)},bC=function(r,e,t,n,a,i,o,A){yt(r)||(r=[r,e,t,n,a,i,o,A]);var s=cj.apply(null,r);return Qm(s.min.x,s.min.y,s.max.x-s.min.x,s.max.y-s.min.y)},xC=function(r,e,t,n,a,i,o,A,s){var u=1-s,f=Math.pow(u,3),l=Math.pow(u,2),c=s*s,h=c*s,d=f*r+l*3*s*t+u*3*s*s*a+h*o,v=f*e+l*3*s*n+u*3*s*s*i+h*A,g=r+2*s*(t-r)+c*(a-2*t+r),p=e+2*s*(n-e)+c*(i-2*n+e),y=t+2*s*(a-t)+c*(o-2*a+t),m=n+2*s*(i-n)+c*(A-2*i+n),w=u*r+s*t,B=u*e+s*n,E=u*a+s*o,b=u*i+s*A,C=90-Math.atan2(g-y,p-m)*180/Math.PI;return{x:d,y:v,m:{x:g,y:p},n:{x:y,y:m},start:{x:w,y:B},end:{x:E,y:b},alpha:C}},vj=function(r,e,t){var n=bC(r),a=bC(e);if(!dj(n,a))return t?0:[];for(var i=EC.apply(0,r),o=EC.apply(0,e),A=~~(i/8),s=~~(o/8),u=[],f=[],l={},c=t?0:[],h=0;h<A+1;h++){var d=xC.apply(0,r.concat(h/A));u.push({x:d.x,y:d.y,t:h/A})}for(var h=0;h<s+1;h++){var d=xC.apply(0,e.concat(h/s));f.push({x:d.x,y:d.y,t:h/s})}for(var h=0;h<A;h++)for(var v=0;v<s;v++){var g=u[h],p=u[h+1],y=f[v],m=f[v+1],w=Math.abs(p.x-g.x)<.001?"y":"x",B=Math.abs(m.x-y.x)<.001?"y":"x",E=hj(g.x,g.y,p.x,p.y,y.x,y.y,m.x,m.y);if(E){if(l[E.x.toFixed(4)]===E.y.toFixed(4))continue;l[E.x.toFixed(4)]=E.y.toFixed(4);var b=g.t+Math.abs((E[w]-g[w])/(p[w]-g[w]))*(p.t-g.t),C=y.t+Math.abs((E[B]-y[B])/(m[B]-y[B]))*(m.t-y.t);b>=0&&b<=1&&C>=0&&C<=1&&(t?c+=1:c.push({x:E.x,y:E.y,t1:b,t2:C}))}}return c},gj=function(r,e,t){r=Pm(r),e=Pm(e);for(var n,a,i,o,A,s,u,f,l,c,h=t?0:[],d=0,v=r.length;d<v;d++){var g=r[d];if(g[0]==="M")n=A=g[1],a=s=g[2];else{g[0]==="C"?(l=[n,a].concat(g.slice(1)),n=l[6],a=l[7]):(l=[n,a,n,a,A,s,A,s],n=A,a=s);for(var p=0,y=e.length;p<y;p++){var m=e[p];if(m[0]==="M")i=u=m[1],o=f=m[2];else{m[0]==="C"?(c=[i,o].concat(m.slice(1)),i=c[6],o=c[7]):(c=[i,o,i,o,u,f,u,f],i=u,o=f);var w=vj(l,c,t);if(t)h+=w;else{for(var B=0,E=w.length;B<E;B++)w[B].segment1=d,w[B].segment2=p,w[B].bez1=l,w[B].bez2=c;h=h.concat(w)}}}}}return h},pj=function(r,e){return gj(r,e)};function yj(r,e){var t=[],n=[];function a(i,o){if(i.length===1)t.push(i[0]),n.push(i[0]);else{for(var A=[],s=0;s<i.length-1;s++)s===0&&t.push(i[0]),s===i.length-2&&n.push(i[s+1]),A[s]=[(1-o)*i[s][0]+o*i[s+1][0],(1-o)*i[s][1]+o*i[s+1][1]];a(A,o)}}return r.length&&a(r,e),{left:t,right:n.reverse()}}function mj(r,e,t){var n=[[r[1],r[2]]];t=t||2;var a=[];e[0]==="A"?(n.push(e[6]),n.push(e[7])):e[0]==="C"?(n.push([e[1],e[2]]),n.push([e[3],e[4]]),n.push([e[5],e[6]])):e[0]==="S"||e[0]==="Q"?(n.push([e[1],e[2]]),n.push([e[3],e[4]])):n.push([e[1],e[2]]);for(var i=n,o=1/t,A=0;A<t-1;A++){var s=o/(1-o*A),u=yj(i,s);a.push(u.left),i=u.right}a.push(i);var f=a.map(function(l){var c=[];return l.length===4&&(c.push("C"),c=c.concat(l[2])),l.length>=3&&(l.length===3&&c.push("Q"),c=c.concat(l[1])),l.length===2&&c.push("L"),c=c.concat(l[l.length-1]),c});return f}var wj=function(r,e,t){if(t===1)return[[].concat(r)];var n=[];if(e[0]==="L"||e[0]==="C"||e[0]==="Q")n=n.concat(mj(r,e,t));else{var a=[].concat(r);a[0]==="M"&&(a[0]="L");for(var i=0;i<=t-1;i++)n.push(a)}return n},Bj=function(r,e){if(r.length===1)return r;var t=r.length-1,n=e.length-1,a=t/n,i=[];if(r.length===1&&r[0][0]==="M"){for(var o=0;o<n-t;o++)r.push(r[0]);return r}for(var o=0;o<n;o++){var A=Math.floor(a*o);i[A]=(i[A]||0)+1}var s=i.reduce(function(u,f,l){return l===t?u.concat(r[t]):u.concat(wj(r[l],r[l+1],f))},[]);return s.unshift(r[0]),(e[n]==="Z"||e[n]==="z")&&s.push("Z"),s},Ej=function(r,e){if(r.length!==e.length)return!1;var t=!0;return ye(r,function(n,a){if(n!==e[a])return t=!1,!1}),t};function bj(r,e,t){var n=null,a=t;return e<a&&(a=e,n="add"),r<a&&(a=r,n="del"),{type:n,min:a}}var xj=function(r,e){var t=r.length,n=e.length,a,i,o=0;if(t===0||n===0)return null;for(var A=[],s=0;s<=t;s++)A[s]=[],A[s][0]={min:s};for(var u=0;u<=n;u++)A[0][u]={min:u};for(var s=1;s<=t;s++){a=r[s-1];for(var u=1;u<=n;u++){i=e[u-1],Ej(a,i)?o=0:o=1;var f=A[s-1][u].min+1,l=A[s][u-1].min+1,c=A[s-1][u-1].min+o;A[s][u]=bj(f,l,c)}}return A},pD=function(r,e){var t=xj(r,e),n=r.length,a=e.length,i=[],o=1,A=1;if(t[n][a].min!==n){for(var s=1;s<=n;s++){var u=t[s][s].min;A=s;for(var f=o;f<=a;f++)t[s][f].min<u&&(u=t[s][f].min,A=f);o=A,t[s][o].type&&i.push({index:s-1,type:t[s][o].type})}for(var s=i.length-1;s>=0;s--)o=i[s].index,i[s].type==="add"?r.splice(o,0,[].concat(r[o])):r.splice(o,1)}n=r.length;var l=a-n;if(n<a)for(var s=0;s<l;s++)r[n-1][0]==="z"||r[n-1][0]==="Z"?r.splice(n-2,0,r[n-2]):r.push(r[n-1]),n+=1;return r};function X0(r,e,t){for(var n=[].concat(r),a,i=1/(t+1),o=yD(e)[0],A=1;A<=t;A++)i*=A,a=Math.floor(r.length*i),a===0?n.unshift([o[0]*i+r[a][0]*(1-i),o[1]*i+r[a][1]*(1-i)]):n.splice(a,0,[o[0]*i+r[a][0]*(1-i),o[1]*i+r[a][1]*(1-i)]);return n}function yD(r){var e=[];switch(r[0]){case"M":e.push([r[1],r[2]]);break;case"L":e.push([r[1],r[2]]);break;case"A":e.push([r[6],r[7]]);break;case"Q":e.push([r[3],r[4]]),e.push([r[1],r[2]]);break;case"T":e.push([r[1],r[2]]);break;case"C":e.push([r[5],r[6]]),e.push([r[1],r[2]]),e.push([r[3],r[4]]);break;case"S":e.push([r[3],r[4]]),e.push([r[1],r[2]]);break;case"H":e.push([r[1],r[1]]);break;case"V":e.push([r[1],r[1]]);break}return e}var Rm=function(r,e){if(r.length<=1)return r;for(var t,n=0;n<e.length;n++)if(r[n][0]!==e[n][0])switch(t=yD(r[n]),e[n][0]){case"M":r[n]=["M"].concat(t[0]);break;case"L":r[n]=["L"].concat(t[0]);break;case"A":r[n]=[].concat(e[n]),r[n][6]=t[0][0],r[n][7]=t[0][1];break;case"Q":if(t.length<2)if(n>0)t=X0(t,r[n-1],1);else{r[n]=e[n];break}r[n]=["Q"].concat(t.reduce(function(a,i){return a.concat(i)},[]));break;case"T":r[n]=["T"].concat(t[0]);break;case"C":if(t.length<3)if(n>0)t=X0(t,r[n-1],2);else{r[n]=e[n];break}r[n]=["C"].concat(t.reduce(function(a,i){return a.concat(i)},[]));break;case"S":if(t.length<2)if(n>0)t=X0(t,r[n-1],1);else{r[n]=e[n];break}r[n]=["S"].concat(t.reduce(function(a,i){return a.concat(i)},[]));break;default:r[n]=e[n]}return r};const Cj=Object.freeze(Object.defineProperty({__proto__:null,catmullRomToBezier:Nm,fillPath:Bj,fillPathByDiff:pD,formatPath:Rm,intersection:pj,parsePathArray:vD,parsePathString:Du,pathToAbsolute:km,pathToCurve:Pm,rectPath:gD},Symbol.toStringTag,{value:"Module"}));var mD=function(){function r(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return r.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},r.prototype.stopPropagation=function(){this.propagationStopped=!0},r.prototype.toString=function(){var e=this.type;return"[Event (type="+e+")]"},r.prototype.save=function(){},r.prototype.restore=function(){},r}();function wD(r,e){var t=r.indexOf(e);t!==-1&&r.splice(t,1)}var CC=typeof window<"u"&&typeof window.document<"u";function BD(r,e){if(r.isCanvas())return!0;for(var t=e.getParent(),n=!1;t;){if(t===r){n=!0;break}t=t.getParent()}return n}function Hm(r){return r.cfg.visible&&r.cfg.capture}var _j=function(r){Lt(e,r);function e(t){var n=r.call(this)||this;n.destroyed=!1;var a=n.getDefaultCfg();return n.cfg=mt(a,t),n}return e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,n){this.cfg[t]=n},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(gF),_C=globalThis&&globalThis.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},Sj=function(){function r(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"}return r}(),Mj=function(){function r(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return r}(),Ij=function(){function r(e,t,n,a){this.name=e,this.version=t,this.os=n,this.bot=a,this.type="bot-device"}return r}(),Tj=function(){function r(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return r}(),Fj=function(){function r(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return r}(),Lj=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Dj=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,SC=3,Oj=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Lj]],MC=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function ED(r){return r?IC(r):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Fj:typeof navigator<"u"?IC(navigator.userAgent):kj()}function Uj(r){return r!==""&&Oj.reduce(function(e,t){var n=t[0],a=t[1];if(e)return e;var i=a.exec(r);return!!i&&[n,i]},!1)}function IC(r){var e=Uj(r);if(!e)return null;var t=e[0],n=e[1];if(t==="searchbot")return new Tj;var a=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);a?a.length<SC&&(a=_C(_C([],a,!0),Pj(SC-a.length),!0)):a=[];var i=a.join("."),o=Nj(r),A=Dj.exec(r);return A&&A[1]?new Ij(t,i,o,A[1]):new Sj(t,i,o)}function Nj(r){for(var e=0,t=MC.length;e<t;e++){var n=MC[e],a=n[0],i=n[1],o=i.exec(r);if(o)return a}return null}function kj(){var r=typeof process<"u"&&process.version;return r?new Mj(process.version.slice(1)):null}function Pj(r){for(var e=[],t=0;t<r;t++)e.push("0");return e}function TC(r,e){var t=[],n=r[0],a=r[1],i=r[2],o=r[3],A=r[4],s=r[5],u=r[6],f=r[7],l=r[8],c=e[0],h=e[1],d=e[2],v=e[3],g=e[4],p=e[5],y=e[6],m=e[7],w=e[8];return t[0]=c*n+h*o+d*u,t[1]=c*a+h*A+d*f,t[2]=c*i+h*s+d*l,t[3]=v*n+g*o+p*u,t[4]=v*a+g*A+p*f,t[5]=v*i+g*s+p*l,t[6]=y*n+m*o+w*u,t[7]=y*a+m*A+w*f,t[8]=y*i+m*s+w*l,t}function cs(r,e){var t=[],n=e[0],a=e[1];return t[0]=r[0]*n+r[3]*a+r[6],t[1]=r[1]*n+r[4]*a+r[7],t}function bD(r){var e=[],t=r[0],n=r[1],a=r[2],i=r[3],o=r[4],A=r[5],s=r[6],u=r[7],f=r[8],l=f*o-A*u,c=-f*i+A*s,h=u*i-o*s,d=t*l+n*c+a*h;return d?(d=1/d,e[0]=l*d,e[1]=(-f*n+a*u)*d,e[2]=(A*n-a*o)*d,e[3]=c*d,e[4]=(f*t-a*s)*d,e[5]=(-A*t+a*i)*d,e[6]=h*d,e[7]=(-u*t+n*s)*d,e[8]=(o*t-n*i)*d,e):null}var Pf=Xa,Y0="matrix",Qj=["zIndex","capture","visible","type"],Rj=["repeat"],Hj=":",Gj="*";function zj(r){for(var e=[],t=0;t<r.length;t++)yt(r[t])?e.push([].concat(r[t])):e.push(r[t]);return e}function Kj(r,e){var t={},n=e.attrs;for(var a in r)t[a]=n[a];return t}function jj(r,e){var t={},n=e.attr();return ye(r,function(a,i){Rj.indexOf(i)===-1&&!bA(n[i],a)&&(t[i]=a)}),t}function $j(r,e){if(e.onFrame)return r;var t=e.startTime,n=e.delay,a=e.duration,i=Object.prototype.hasOwnProperty;return ye(r,function(o){t+n<o.startTime+o.delay+o.duration&&a>o.delay&&ye(e.toAttrs,function(A,s){i.call(o.toAttrs,s)&&(delete o.toAttrs[s],delete o.fromAttrs[s])})}),r}var xD=function(r){Lt(e,r);function e(t){var n=r.call(this,t)||this;n.attrs={};var a=n.getDefaultAttrs();return mt(a,t.attrs),n.attrs=a,n.initAttrs(a),n.initAnimate(),n}return e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];var i=n[0],o=n[1];if(!i)return this.attrs;if(On(i)){for(var A in i)this.setAttr(A,i[A]);return this.afterAttrsChange(i),this}return n.length===2?(this.setAttr(i,o),this.afterAttrsChange((t={},t[i]=o,t)),this):this.attrs[i]},e.prototype.isClipped=function(t,n){var a=this.getClip();return a&&!a.isHit(t,n)},e.prototype.setAttr=function(t,n){var a=this.attrs[t];a!==n&&(this.attrs[t]=n,this.onAttrChange(t,n,a))},e.prototype.onAttrChange=function(t,n,a){t==="matrix"&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var n=this.cfg.applyTo;n&&n.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var n=this.getParent();return n&&n.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var n=t.getChildren();this.get("el");var a=n.indexOf(this);n.splice(a,1),n.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var n=t.getChildren();this.get("el");var a=n.indexOf(this);n.splice(a,1),n.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){t===void 0&&(t=!0);var n=this.getParent();n?(wD(n.getChildren(),this),n.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(Y0,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(Y0)},e.prototype.setMatrix=function(t){this.attr(Y0,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var n=this.attr("matrix"),a=this.cfg.parentMatrix;a&&n?t=TC(a,n):t=n||a,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var n=this.attr("matrix"),a=null;t&&n?a=TC(t,n):a=n||t,this.set("totalMatrix",a),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var n=this.attr("matrix");return n?cs(n,t):t},e.prototype.invertFromMatrix=function(t){var n=this.attr("matrix");if(n){var a=bD(n);if(a)return cs(a,t)}return t},e.prototype.setClip=function(t){var n=this.getCanvas(),a=null;if(t){var i=this.getShapeBase(),o=$u(t.type),A=i[o];A&&(a=new A({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:n}))}return this.set("clipShape",a),this.onCanvasChange("clip"),a},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,n=this.attrs,a={};ye(n,function(A,s){yt(n[s])?a[s]=zj(n[s]):a[s]=n[s]});var i=this.constructor,o=new i({attrs:a});return ye(Qj,function(A){o.set(A,t.get(A))}),o},e.prototype.destroy=function(){var t=this.destroyed;t||(this.attrs={},r.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var a=this.get("timeline");a||(a=this.get("canvas").get("timeline"),this.set("timeline",a));var i=this.get("animations")||[];a.timer||a.initTimer();var o=t[0],A=t[1],s=t[2],u=s===void 0?"easeLinear":s,f=t[3],l=f===void 0?ol:f,c=t[4],h=c===void 0?0:c,d,v,g,p,y;Lr(o)?(d=o,o={}):On(o)&&o.onFrame&&(d=o.onFrame,v=o.repeat),On(A)?(y=A,A=y.duration,u=y.easing||"easeLinear",h=y.delay||0,v=y.repeat||v||!1,l=y.callback||ol,g=y.pauseCallback||ol,p=y.resumeCallback||ol):(vt(l)&&(h=l,l=null),Lr(u)?(l=u,u="easeLinear"):u=u||"easeLinear");var m=jj(o,this),w={fromAttrs:Kj(m,this),toAttrs:m,duration:A,easing:u,repeat:v,callback:l,pauseCallback:g,resumeCallback:p,delay:h,startTime:a.getTime(),id:Yi(),onFrame:d,pathFormatted:!1};i.length>0?i=$j(i,w):a.addAnimator(this),i.push(w),this.set("animations",i),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var n=this;t===void 0&&(t=!0);var a=this.get("animations");ye(a,function(i){t&&(i.onFrame?n.attr(i.onFrame(1)):n.attr(i.toAttrs)),i.callback&&i.callback()}),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),n=this.get("animations"),a=t.getTime();return ye(n,function(i){i._paused=!0,i._pauseTime=a,i.pauseCallback&&i.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:a}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline"),n=t.getTime(),a=this.get("animations"),i=this.get("_pause").pauseTime;return ye(a,function(o){o.startTime=o.startTime+(n-i),o._paused=!1,o._pauseTime=null,o.resumeCallback&&o.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",a),this},e.prototype.emitDelegation=function(t,n){var a=this,i=n.propagationPath;this.getEvents();var o;t==="mouseenter"?o=n.fromShape:t==="mouseleave"&&(o=n.toShape);for(var A=function(l){var c=i[l],h=c.get("name");if(h){if((c.isGroup()||c.isCanvas&&c.isCanvas())&&o&&BD(c,o))return"break";yt(h)?ye(h,function(d){a.emitDelegateEvent(c,d,n)}):s.emitDelegateEvent(c,h,n)}},s=this,u=0;u<i.length;u++){var f=A(u);if(f==="break")break}},e.prototype.emitDelegateEvent=function(t,n,a){var i=this.getEvents(),o=n+Hj+a.type;(i[o]||i[Gj])&&(a.name=o,a.currentTarget=t,a.delegateTarget=this,a.delegateObject=t.get("delegateObject"),this.emit(o,a))},e.prototype.translate=function(t,n){t===void 0&&(t=0),n===void 0&&(n=0);var a=this.getMatrix(),i=Pf(a,[["t",t,n]]);return this.setMatrix(i),this},e.prototype.move=function(t,n){var a=this.attr("x")||0,i=this.attr("y")||0;return this.translate(t-a,n-i),this},e.prototype.moveTo=function(t,n){return this.move(t,n)},e.prototype.scale=function(t,n){var a=this.getMatrix(),i=Pf(a,[["s",t,n||t]]);return this.setMatrix(i),this},e.prototype.rotate=function(t){var n=this.getMatrix(),a=Pf(n,[["r",t]]);return this.setMatrix(a),this},e.prototype.rotateAtStart=function(t){var n=this.attr(),a=n.x,i=n.y,o=this.getMatrix(),A=Pf(o,[["t",-a,-i],["r",t],["t",a,i]]);return this.setMatrix(A),this},e.prototype.rotateAtPoint=function(t,n,a){var i=this.getMatrix(),o=Pf(i,[["t",-t,-n],["r",a],["t",t,n]]);return this.setMatrix(o),this},e}(_j),FC={},Gm="_INDEX";function CD(r,e){if(r.set("canvas",e),r.isGroup()){var t=r.get("children");t.length&&t.forEach(function(n){CD(n,e)})}}function _D(r,e){if(r.set("timeline",e),r.isGroup()){var t=r.get("children");t.length&&t.forEach(function(n){_D(n,e)})}}function Wj(r,e,t){t===void 0&&(t=!0),t?e.destroy():(e.set("parent",null),e.set("canvas",null)),wD(r.getChildren(),e)}function Vj(r){return function(e,t){var n=r(e,t);return n===0?e[Gm]-t[Gm]:n}}var SD=function(r){Lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,n=-1/0,a=1/0,i=-1/0,o=this.getChildren().filter(function(s){return s.get("visible")&&(!s.isGroup()||s.isGroup()&&s.getChildren().length>0)});o.length>0?ye(o,function(s){var u=s.getBBox(),f=u.minX,l=u.maxX,c=u.minY,h=u.maxY;f<t&&(t=f),l>n&&(n=l),c<a&&(a=c),h>i&&(i=h)}):(t=0,n=0,a=0,i=0);var A={x:t,y:a,minX:t,minY:a,maxX:n,maxY:i,width:n-t,height:i-a};return A},e.prototype.getCanvasBBox=function(){var t=1/0,n=-1/0,a=1/0,i=-1/0,o=this.getChildren().filter(function(s){return s.get("visible")&&(!s.isGroup()||s.isGroup()&&s.getChildren().length>0)});o.length>0?ye(o,function(s){var u=s.getCanvasBBox(),f=u.minX,l=u.maxX,c=u.minY,h=u.maxY;f<t&&(t=f),l>n&&(n=l),c<a&&(a=c),h>i&&(i=h)}):(t=0,n=0,a=0,i=0);var A={x:t,y:a,minX:t,minY:a,maxX:n,maxY:i,width:n-t,height:i-a};return A},e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return t.children=[],t},e.prototype.onAttrChange=function(t,n,a){if(r.prototype.onAttrChange.call(this,t,n,a),t==="matrix"){var i=this.getTotalMatrix();this._applyChildrenMarix(i)}},e.prototype.applyMatrix=function(t){var n=this.getTotalMatrix();r.prototype.applyMatrix.call(this,t);var a=this.getTotalMatrix();a!==n&&this._applyChildrenMarix(a)},e.prototype._applyChildrenMarix=function(t){var n=this.getChildren();ye(n,function(a){a.applyMatrix(t)})},e.prototype.addShape=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var a=t[0],i=t[1];On(a)?i=a:i.type=a;var o=FC[i.type];o||(o=$u(i.type),FC[i.type]=o);var A=this.getShapeBase(),s=new A[o](i);return this.add(s),s},e.prototype.addGroup=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var a=t[0],i=t[1],o;if(Lr(a))i?o=new a(i):o=new a({parent:this});else{var A=a||{},s=this.getGroupBase();o=new s(A)}return this.add(o),o},e.prototype.getCanvas=function(){var t;return this.isCanvas()?t=this:t=this.get("canvas"),t},e.prototype.getShape=function(t,n,a){if(!Hm(this))return null;var i=this.getChildren(),o;if(this.isCanvas())o=this._findShape(i,t,n,a);else{var A=[t,n,1];A=this.invertFromMatrix(A),this.isClipped(A[0],A[1])||(o=this._findShape(i,A[0],A[1],a))}return o},e.prototype._findShape=function(t,n,a,i){for(var o=null,A=t.length-1;A>=0;A--){var s=t[A];if(Hm(s)&&(s.isGroup()?o=s.getShape(n,a,i):s.isHit(n,a)&&(o=s)),o)break}return o},e.prototype.add=function(t){var n=this.getCanvas(),a=this.getChildren(),i=this.get("timeline"),o=t.getParent();o&&Wj(o,t,!1),t.set("parent",this),n&&CD(t,n),i&&_D(t,i),a.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var n=this.getTotalMatrix();n&&t.applyMatrix(n)},e.prototype.getChildren=function(){return this.get("children")},e.prototype.sort=function(){var t=this.getChildren();ye(t,function(n,a){return n[Gm]=a,n}),t.sort(Vj(function(n,a){return n.get("zIndex")-a.get("zIndex")})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),n=t.length-1;n>=0;n--)t[n].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),r.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){var n=this.getChildren();return n[t]},e.prototype.getCount=function(){var t=this.getChildren();return t.length},e.prototype.contain=function(t){var n=this.getChildren();return n.indexOf(t)>-1},e.prototype.removeChild=function(t,n){n===void 0&&(n=!0),this.contain(t)&&t.remove(n)},e.prototype.findAll=function(t){var n=[],a=this.getChildren();return ye(a,function(i){t(i)&&n.push(i),i.isGroup()&&(n=n.concat(i.findAll(t)))}),n},e.prototype.find=function(t){var n=null,a=this.getChildren();return ye(a,function(i){if(t(i)?n=i:i.isGroup()&&(n=i.find(t)),n)return!1}),n},e.prototype.findById=function(t){return this.find(function(n){return n.get("id")===t})},e.prototype.findByClassName=function(t){return this.find(function(n){return n.get("className")===t})},e.prototype.findAllByName=function(t){return this.findAll(function(n){return n.get("name")===t})},e}(xD),Wu=0,sl=0,Qf=0,MD=1e3,Uv,ul,Nv=0,Is=0,kg=0,Yl=typeof performance=="object"&&performance.now?performance:Date,ID=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function TD(){return Is||(ID(Xj),Is=Yl.now()+kg)}function Xj(){Is=0}function zm(){this._call=this._time=this._next=null}zm.prototype=FD.prototype={constructor:zm,restart:function(r,e,t){if(typeof r!="function")throw new TypeError("callback is not a function");t=(t==null?TD():+t)+(e==null?0:+e),!this._next&&ul!==this&&(ul?ul._next=this:Uv=this,ul=this),this._call=r,this._time=t,Km()},stop:function(){this._call&&(this._call=null,this._time=1/0,Km())}};function FD(r,e,t){var n=new zm;return n.restart(r,e,t),n}function Yj(){TD(),++Wu;for(var r=Uv,e;r;)(e=Is-r._time)>=0&&r._call.call(null,e),r=r._next;--Wu}function LC(){Is=(Nv=Yl.now())+kg,Wu=sl=0;try{Yj()}finally{Wu=0,qj(),Is=0}}function Zj(){var r=Yl.now(),e=r-Nv;e>MD&&(kg-=e,Nv=r)}function qj(){for(var r,e=Uv,t,n=1/0;e;)e._call?(n>e._time&&(n=e._time),r=e,e=e._next):(t=e._next,e._next=null,e=r?r._next=t:Uv=t);ul=r,Km(n)}function Km(r){if(!Wu){sl&&(sl=clearTimeout(sl));var e=r-Is;e>24?(r<1/0&&(sl=setTimeout(LC,r-Yl.now()-kg)),Qf&&(Qf=clearInterval(Qf))):(Qf||(Nv=Yl.now(),Qf=setInterval(Zj,MD)),Wu=1,ID(LC))}}function dB(r,e,t){r.prototype=e.prototype=t,t.constructor=r}function LD(r,e){var t=Object.create(r.prototype);for(var n in e)t[n]=e[n];return t}function Ec(){}var Zl=.7,kv=1/Zl,Pu="\\s*([+-]?\\d+)\\s*",ql="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$i="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Jj=/^#([0-9a-f]{3,8})$/,e$=new RegExp(`^rgb\\(${Pu},${Pu},${Pu}\\)$`),t$=new RegExp(`^rgb\\(${$i},${$i},${$i}\\)$`),r$=new RegExp(`^rgba\\(${Pu},${Pu},${Pu},${ql}\\)$`),n$=new RegExp(`^rgba\\(${$i},${$i},${$i},${ql}\\)$`),a$=new RegExp(`^hsl\\(${ql},${$i},${$i}\\)$`),i$=new RegExp(`^hsla\\(${ql},${$i},${$i},${ql}\\)$`),DC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};dB(Ec,Jl,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:OC,formatHex:OC,formatHex8:o$,formatHsl:A$,formatRgb:UC,toString:UC});function OC(){return this.rgb().formatHex()}function o$(){return this.rgb().formatHex8()}function A$(){return DD(this).formatHsl()}function UC(){return this.rgb().formatRgb()}function Jl(r){var e,t;return r=(r+"").trim().toLowerCase(),(e=Jj.exec(r))?(t=e[1].length,e=parseInt(e[1],16),t===6?NC(e):t===3?new ua(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Nh(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Nh(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=e$.exec(r))?new ua(e[1],e[2],e[3],1):(e=t$.exec(r))?new ua(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=r$.exec(r))?Nh(e[1],e[2],e[3],e[4]):(e=n$.exec(r))?Nh(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=a$.exec(r))?QC(e[1],e[2]/100,e[3]/100,1):(e=i$.exec(r))?QC(e[1],e[2]/100,e[3]/100,e[4]):DC.hasOwnProperty(r)?NC(DC[r]):r==="transparent"?new ua(NaN,NaN,NaN,0):null}function NC(r){return new ua(r>>16&255,r>>8&255,r&255,1)}function Nh(r,e,t,n){return n<=0&&(r=e=t=NaN),new ua(r,e,t,n)}function s$(r){return r instanceof Ec||(r=Jl(r)),r?(r=r.rgb(),new ua(r.r,r.g,r.b,r.opacity)):new ua}function jm(r,e,t,n){return arguments.length===1?s$(r):new ua(r,e,t,n??1)}function ua(r,e,t,n){this.r=+r,this.g=+e,this.b=+t,this.opacity=+n}dB(ua,jm,LD(Ec,{brighter(r){return r=r==null?kv:Math.pow(kv,r),new ua(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=r==null?Zl:Math.pow(Zl,r),new ua(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new ua(ps(this.r),ps(this.g),ps(this.b),Pv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:kC,formatHex:kC,formatHex8:u$,formatRgb:PC,toString:PC}));function kC(){return`#${hs(this.r)}${hs(this.g)}${hs(this.b)}`}function u$(){return`#${hs(this.r)}${hs(this.g)}${hs(this.b)}${hs((isNaN(this.opacity)?1:this.opacity)*255)}`}function PC(){const r=Pv(this.opacity);return`${r===1?"rgb(":"rgba("}${ps(this.r)}, ${ps(this.g)}, ${ps(this.b)}${r===1?")":`, ${r})`}`}function Pv(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function ps(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function hs(r){return r=ps(r),(r<16?"0":"")+r.toString(16)}function QC(r,e,t,n){return n<=0?r=e=t=NaN:t<=0||t>=1?r=e=NaN:e<=0&&(r=NaN),new si(r,e,t,n)}function DD(r){if(r instanceof si)return new si(r.h,r.s,r.l,r.opacity);if(r instanceof Ec||(r=Jl(r)),!r)return new si;if(r instanceof si)return r;r=r.rgb();var e=r.r/255,t=r.g/255,n=r.b/255,a=Math.min(e,t,n),i=Math.max(e,t,n),o=NaN,A=i-a,s=(i+a)/2;return A?(e===i?o=(t-n)/A+(t<n)*6:t===i?o=(n-e)/A+2:o=(e-t)/A+4,A/=s<.5?i+a:2-i-a,o*=60):A=s>0&&s<1?0:o,new si(o,A,s,r.opacity)}function f$(r,e,t,n){return arguments.length===1?DD(r):new si(r,e,t,n??1)}function si(r,e,t,n){this.h=+r,this.s=+e,this.l=+t,this.opacity=+n}dB(si,f$,LD(Ec,{brighter(r){return r=r==null?kv:Math.pow(kv,r),new si(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?Zl:Math.pow(Zl,r),new si(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+(this.h<0)*360,e=isNaN(r)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*e,a=2*t-n;return new ua(Z0(r>=240?r-240:r+120,a,n),Z0(r,a,n),Z0(r<120?r+240:r-120,a,n),this.opacity)},clamp(){return new si(RC(this.h),kh(this.s),kh(this.l),Pv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const r=Pv(this.opacity);return`${r===1?"hsl(":"hsla("}${RC(this.h)}, ${kh(this.s)*100}%, ${kh(this.l)*100}%${r===1?")":`, ${r})`}`}}));function RC(r){return r=(r||0)%360,r<0?r+360:r}function kh(r){return Math.max(0,Math.min(1,r||0))}function Z0(r,e,t){return(r<60?e+(t-e)*r/60:r<180?t:r<240?e+(t-e)*(240-r)/60:e)*255}const vB=r=>()=>r;function l$(r,e){return function(t){return r+t*e}}function c$(r,e,t){return r=Math.pow(r,t),e=Math.pow(e,t)-r,t=1/t,function(n){return Math.pow(r+n*e,t)}}function h$(r){return(r=+r)==1?OD:function(e,t){return t-e?c$(e,t,r):vB(isNaN(e)?t:e)}}function OD(r,e){var t=e-r;return t?l$(r,t):vB(isNaN(r)?e:r)}const HC=function r(e){var t=h$(e);function n(a,i){var o=t((a=jm(a)).r,(i=jm(i)).r),A=t(a.g,i.g),s=t(a.b,i.b),u=OD(a.opacity,i.opacity);return function(f){return a.r=o(f),a.g=A(f),a.b=s(f),a.opacity=u(f),a+""}}return n.gamma=r,n}(1);function UD(r,e){e||(e=[]);var t=r?Math.min(e.length,r.length):0,n=e.slice(),a;return function(i){for(a=0;a<t;++a)n[a]=r[a]*(1-i)+e[a]*i;return n}}function ND(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function d$(r,e){return(ND(e)?UD:kD)(r,e)}function kD(r,e){var t=e?e.length:0,n=r?Math.min(t,r.length):0,a=new Array(n),i=new Array(t),o;for(o=0;o<n;++o)a[o]=Qv(r[o],e[o]);for(;o<t;++o)i[o]=e[o];return function(A){for(o=0;o<n;++o)i[o]=a[o](A);return i}}function v$(r,e){var t=new Date;return r=+r,e=+e,function(n){return t.setTime(r*(1-n)+e*n),t}}function $m(r,e){return r=+r,e=+e,function(t){return r*(1-t)+e*t}}function g$(r,e){var t={},n={},a;(r===null||typeof r!="object")&&(r={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in r?t[a]=Qv(r[a],e[a]):n[a]=e[a];return function(i){for(a in t)n[a]=t[a](i);return n}}var Wm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,q0=new RegExp(Wm.source,"g");function p$(r){return function(){return r}}function y$(r){return function(e){return r(e)+""}}function m$(r,e){var t=Wm.lastIndex=q0.lastIndex=0,n,a,i,o=-1,A=[],s=[];for(r=r+"",e=e+"";(n=Wm.exec(r))&&(a=q0.exec(e));)(i=a.index)>t&&(i=e.slice(t,i),A[o]?A[o]+=i:A[++o]=i),(n=n[0])===(a=a[0])?A[o]?A[o]+=a:A[++o]=a:(A[++o]=null,s.push({i:o,x:$m(n,a)})),t=q0.lastIndex;return t<e.length&&(i=e.slice(t),A[o]?A[o]+=i:A[++o]=i),A.length<2?s[0]?y$(s[0].x):p$(e):(e=s.length,function(u){for(var f=0,l;f<e;++f)A[(l=s[f]).i]=l.x(u);return A.join("")})}function Qv(r,e){var t=typeof e,n;return e==null||t==="boolean"?vB(e):(t==="number"?$m:t==="string"?(n=Jl(e))?(e=n,HC):m$:e instanceof Jl?HC:e instanceof Date?v$:ND(e)?UD:Array.isArray(e)?kD:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?g$:$m)(r,e)}function w$(r){return+r}function B$(r){return r*r}function E$(r){return r*(2-r)}function GC(r){return((r*=2)<=1?r*r:--r*(2-r)+1)/2}function b$(r){return r*r*r}function x$(r){return--r*r*r+1}function zC(r){return((r*=2)<=1?r*r*r:(r-=2)*r*r+2)/2}var gB=3,C$=function r(e){e=+e;function t(n){return Math.pow(n,e)}return t.exponent=r,t}(gB),_$=function r(e){e=+e;function t(n){return 1-Math.pow(1-n,e)}return t.exponent=r,t}(gB),KC=function r(e){e=+e;function t(n){return((n*=2)<=1?Math.pow(n,e):2-Math.pow(2-n,e))/2}return t.exponent=r,t}(gB),PD=Math.PI,QD=PD/2;function S$(r){return+r==1?1:1-Math.cos(r*QD)}function M$(r){return Math.sin(r*QD)}function jC(r){return(1-Math.cos(PD*r))/2}function xA(r){return(Math.pow(2,-10*r)-.0009765625)*1.0009775171065494}function I$(r){return xA(1-+r)}function T$(r){return 1-xA(r)}function $C(r){return((r*=2)<=1?xA(1-r):2-xA(r-1))/2}function F$(r){return 1-Math.sqrt(1-r*r)}function L$(r){return Math.sqrt(1- --r*r)}function WC(r){return((r*=2)<=1?1-Math.sqrt(1-r*r):Math.sqrt(1-(r-=2)*r)+1)/2}var Vm=4/11,D$=6/11,O$=8/11,U$=3/4,N$=9/11,k$=10/11,P$=15/16,Q$=21/22,R$=63/64,Ph=1/Vm/Vm;function H$(r){return 1-ec(1-r)}function ec(r){return(r=+r)<Vm?Ph*r*r:r<O$?Ph*(r-=D$)*r+U$:r<k$?Ph*(r-=N$)*r+P$:Ph*(r-=Q$)*r+R$}function G$(r){return((r*=2)<=1?1-ec(1-r):ec(r-1)+1)/2}var pB=1.70158,z$=function r(e){e=+e;function t(n){return(n=+n)*n*(e*(n-1)+n)}return t.overshoot=r,t}(pB),K$=function r(e){e=+e;function t(n){return--n*n*((n+1)*e+n)+1}return t.overshoot=r,t}(pB),VC=function r(e){e=+e;function t(n){return((n*=2)<1?n*n*((e+1)*n-e):(n-=2)*n*((e+1)*n+e)+2)/2}return t.overshoot=r,t}(pB),Vu=2*Math.PI,yB=1,mB=.3,j$=function r(e,t){var n=Math.asin(1/(e=Math.max(1,e)))*(t/=Vu);function a(i){return e*xA(- --i)*Math.sin((n-i)/t)}return a.amplitude=function(i){return r(i,t*Vu)},a.period=function(i){return r(e,i)},a}(yB,mB),XC=function r(e,t){var n=Math.asin(1/(e=Math.max(1,e)))*(t/=Vu);function a(i){return 1-e*xA(i=+i)*Math.sin((i+n)/t)}return a.amplitude=function(i){return r(i,t*Vu)},a.period=function(i){return r(e,i)},a}(yB,mB),$$=function r(e,t){var n=Math.asin(1/(e=Math.max(1,e)))*(t/=Vu);function a(i){return((i=i*2-1)<0?e*xA(-i)*Math.sin((n-i)/t):2-e*xA(i)*Math.sin((n+i)/t))/2}return a.amplitude=function(i){return r(i,t*Vu)},a.period=function(i){return r(e,i)},a}(yB,mB);const W$=Object.freeze(Object.defineProperty({__proto__:null,easeBack:VC,easeBackIn:z$,easeBackInOut:VC,easeBackOut:K$,easeBounce:ec,easeBounceIn:H$,easeBounceInOut:G$,easeBounceOut:ec,easeCircle:WC,easeCircleIn:F$,easeCircleInOut:WC,easeCircleOut:L$,easeCubic:zC,easeCubicIn:b$,easeCubicInOut:zC,easeCubicOut:x$,easeElastic:XC,easeElasticIn:j$,easeElasticInOut:$$,easeElasticOut:XC,easeExp:$C,easeExpIn:I$,easeExpInOut:$C,easeExpOut:T$,easeLinear:w$,easePoly:KC,easePolyIn:C$,easePolyInOut:KC,easePolyOut:_$,easeQuad:GC,easeQuadIn:B$,easeQuadInOut:GC,easeQuadOut:E$,easeSin:jC,easeSinIn:S$,easeSinInOut:jC,easeSinOut:M$},Symbol.toStringTag,{value:"Module"}));var V$={};function X$(r){return V$[r.toLowerCase()]||W$[r]}var Y$=function(r){return["fill","stroke","fillStyle","strokeStyle"].includes(r)},Z$=function(r){return/^[r,R,L,l]{1}[\s]*\(/.test(r)},YC=[1,0,0,0,1,0,0,0,1];function q$(r,e,t){var n={},a=e.fromAttrs,i=e.toAttrs;if(!r.destroyed){var o;for(var A in i)if(!bA(a[A],i[A]))if(A==="path"){var s=i[A],u=a[A];s.length>u.length?(s=Du(i[A]),u=Du(a[A]),u=pD(u,s),u=Rm(u,s),e.fromAttrs.path=u,e.toAttrs.path=s):e.pathFormatted||(s=Du(i[A]),u=Du(a[A]),u=Rm(u,s),e.fromAttrs.path=u,e.toAttrs.path=s,e.pathFormatted=!0),n[A]=[];for(var f=0;f<s.length;f++){for(var l=s[f],c=u[f],h=[],d=0;d<l.length;d++)vt(l[d])&&c&&vt(c[d])?(o=Qv(c[d],l[d]),h.push(o(t))):h.push(l[d]);n[A].push(h)}}else if(A==="matrix"){var v=d$(a[A]||YC,i[A]||YC),g=v(t);n[A]=g}else Y$(A)&&Z$(i[A])?n[A]=i[A]:Lr(i[A])||(o=Qv(a[A],i[A]),n[A]=o(t));r.attr(n)}}function J$(r,e,t){var n=e.startTime,a=e.delay;if(t<n+a||e._paused)return!1;var i,o=e.duration,A=e.easing,s=X$(A);if(t=t-n-e.delay,e.repeat)i=t%o/o,i=s(i);else if(i=t/o,i<1)i=s(i);else return e.onFrame?r.attr(e.onFrame(1)):r.attr(e.toAttrs),!0;if(e.onFrame){var u=e.onFrame(i);r.attr(u)}else q$(r,e,i);return!1}var eW=function(){function r(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return r.prototype.initTimer=function(){var e=this,t=!1,n,a,i;this.timer=FD(function(o){if(e.current=o,e.animators.length>0){for(var A=e.animators.length-1;A>=0;A--){if(n=e.animators[A],n.destroyed){e.removeAnimator(A);continue}if(!n.isAnimatePaused()){a=n.get("animations");for(var s=a.length-1;s>=0;s--)i=a[s],t=J$(n,i,o),t&&(a.splice(s,1),t=!1,i.callback&&i.callback())}a.length===0&&e.removeAnimator(A)}var u=e.canvas.get("autoDraw");u||e.canvas.draw()}})},r.prototype.addAnimator=function(e){this.animators.push(e)},r.prototype.removeAnimator=function(e){this.animators.splice(e,1)},r.prototype.isAnimating=function(){return!!this.animators.length},r.prototype.stop=function(){this.timer&&this.timer.stop()},r.prototype.stopAllAnimations=function(e){e===void 0&&(e=!0),this.animators.forEach(function(t){t.stopAnimate(e)}),this.animators=[],this.canvas.draw()},r.prototype.getTime=function(){return this.current},r}(),tW=40,ZC=0,qC=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function JC(r,e,t){t.name=e,t.target=r,t.currentTarget=r,t.delegateTarget=r,r.emit(e,t)}function rW(r,e,t){if(t.bubbles){var n=void 0,a=!1;if(e==="mouseenter"?(n=t.fromShape,a=!0):e==="mouseleave"&&(a=!0,n=t.toShape),r.isCanvas()&&a)return;if(n&&BD(r,n)){t.bubbles=!1;return}t.name=e,t.currentTarget=r,t.delegateTarget=r,r.emit(e,t)}}var nW=function(){function r(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(n){var a=n.type;t._triggerEvent(a,n)},this._onDocumentMove=function(n){var a=t.canvas,i=a.get("el");if(i!==n.target&&(t.dragging||t.currentShape)){var o=t._getPointInfo(n);t.dragging&&t._emitEvent("drag",n,o,t.draggingShape)}},this._onDocumentMouseUp=function(n){var a=t.canvas,i=a.get("el");if(i!==n.target&&t.dragging){var o=t._getPointInfo(n);t.draggingShape&&t._emitEvent("drop",n,o,null),t._emitEvent("dragend",n,o,t.draggingShape),t._afterDrag(t.draggingShape,o,n)}},this.canvas=e.canvas}return r.prototype.init=function(){this._bindEvents()},r.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");ye(qC,function(n){t.addEventListener(n,e._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},r.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");ye(qC,function(n){t.removeEventListener(n,e._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},r.prototype._getEventObj=function(e,t,n,a,i,o){var A=new mD(e,t);return A.fromShape=i,A.toShape=o,A.x=n.x,A.y=n.y,A.clientX=n.clientX,A.clientY=n.clientY,A.propagationPath.push(a),A},r.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},r.prototype._getPointInfo=function(e){var t=this.canvas,n=t.getClientByEvent(e),a=t.getPointByEvent(e);return{x:a.x,y:a.y,clientX:n.x,clientY:n.y}},r.prototype._triggerEvent=function(e,t){var n=this._getPointInfo(t),a=this._getShape(n,t),i=this["_on"+e],o=!1;if(i)i.call(this,n,a,t);else{var A=this.currentShape;e==="mouseenter"||e==="dragenter"||e==="mouseover"?(this._emitEvent(e,t,n,null,null,a),a&&this._emitEvent(e,t,n,a,null,a),e==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",t,n,null)):e==="mouseleave"||e==="dragleave"||e==="mouseout"?(o=!0,A&&this._emitEvent(e,t,n,A,A,null),this._emitEvent(e,t,n,null,A,null),e==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",t,n,null)):this._emitEvent(e,t,n,a,null,null)}if(o||(this.currentShape=a),a&&!a.get("destroyed")){var s=this.canvas,u=s.get("el");u.style.cursor=a.attr("cursor")||s.get("cursor")}},r.prototype._onmousedown=function(e,t,n){n.button===ZC&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,e,t,null,null)},r.prototype._emitMouseoverEvents=function(e,t,n,a){var i=this.canvas.get("el");n!==a&&(n&&(this._emitEvent("mouseout",e,t,n,n,a),this._emitEvent("mouseleave",e,t,n,n,a),(!a||a.get("destroyed"))&&(i.style.cursor=this.canvas.get("cursor"))),a&&(this._emitEvent("mouseover",e,t,a,n,a),this._emitEvent("mouseenter",e,t,a,n,a)))},r.prototype._emitDragoverEvents=function(e,t,n,a,i){a?(a!==n&&(n&&this._emitEvent("dragleave",e,t,n,n,a),this._emitEvent("dragenter",e,t,a,n,a)),i||this._emitEvent("dragover",e,t,a)):n&&this._emitEvent("dragleave",e,t,n,n,a),i&&this._emitEvent("dragover",e,t,a)},r.prototype._afterDrag=function(e,t,n){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var a=this._getShape(t,n);a!==e&&this._emitMouseoverEvents(n,t,e,a),this.currentShape=a},r.prototype._onmouseup=function(e,t,n){if(n.button===ZC){var a=this.draggingShape;this.dragging?(a&&this._emitEvent("drop",n,e,t),this._emitEvent("dragend",n,e,a),this._afterDrag(a,e,n)):(this._emitEvent("mouseup",n,e,t),t===this.mousedownShape&&this._emitEvent("click",n,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},r.prototype._ondragover=function(e,t,n){n.preventDefault();var a=this.currentShape;this._emitDragoverEvents(n,e,a,t,!0)},r.prototype._onmousemove=function(e,t,n){var a=this.canvas,i=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(n,e,i,t,!1),this._emitEvent("drag",n,e,o);else{var A=this.mousedownPoint;if(A){var s=this.mousedownShape,u=n.timeStamp,f=u-this.mousedownTimeStamp,l=A.clientX-e.clientX,c=A.clientY-e.clientY,h=l*l+c*c;f>120||h>tW?s&&s.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",n,e,o),this.mousedownShape=null,this.mousedownPoint=null):!s&&a.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t)):(this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t))}else this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t)}},r.prototype._emitEvent=function(e,t,n,a,i,o){var A=this._getEventObj(e,t,n,a,i,o);if(a){A.shape=a,JC(a,e,A);for(var s=a.getParent();s;)s.emitDelegation(e,A),A.propagationStopped||rW(s,e,A),A.propagationPath.push(s),s=s.getParent()}else{var u=this.canvas;JC(u,e,A)}},r.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},r}(),e_="px",t_=ED(),aW=t_&&t_.name==="firefox",RD=function(r){Lt(e,r);function e(t){var n=r.call(this,t)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},e.prototype.initContainer=function(){var t=this.get("container");Oe(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t);var n=this.get("container");n.appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new nW({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new eW(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,n){var a=this.get("el");CC&&(a.style.width=t+e_,a.style.height=n+e_)},e.prototype.changeSize=function(t,n){this.setDOMSize(t,n),this.set("width",t),this.set("height",n),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var n=this.get("el");CC&&n&&(n.style.cursor=t)},e.prototype.getPointByEvent=function(t){var n=this.get("supportCSSTransform");if(n){if(aW&&!ht(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!ht(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var a=this.getClientByEvent(t),i=a.x,o=a.y;return this.getPointByClient(i,o)},e.prototype.getClientByEvent=function(t){var n=t;return t.touches&&(t.type==="touchend"?n=t.changedTouches[0]:n=t.touches[0]),{x:n.clientX,y:n.clientY}},e.prototype.getPointByClient=function(t,n){var a=this.get("el"),i=a.getBoundingClientRect();return{x:t-i.left,y:n-i.top}},e.prototype.getClientByPoint=function(t,n){var a=this.get("el"),i=a.getBoundingClientRect();return{x:t+i.left,y:n+i.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){var t=this.get("eventController");t.destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),r.prototype.destroy.call(this))},e}(SD),HD=function(r){Lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var t=r.prototype.clone.call(this),n=this.getChildren(),a=0;a<n.length;a++){var i=n[a];t.add(i.clone())}return t},e}(SD),GD=function(r){Lt(e,r);function e(t){return r.call(this,t)||this}return e.prototype._isInBBox=function(t,n){var a=this.getBBox();return a.minX<=t&&a.maxX>=t&&a.minY<=n&&a.maxY>=n},e.prototype.afterAttrsChange=function(t){r.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(t){r.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),n=this.getTotalMatrix(),a=t.minX,i=t.minY,o=t.maxX,A=t.maxY;if(n){var s=cs(n,[t.minX,t.minY]),u=cs(n,[t.maxX,t.minY]),f=cs(n,[t.minX,t.maxY]),l=cs(n,[t.maxX,t.maxY]);a=Math.min(s[0],u[0],f[0],l[0]),o=Math.max(s[0],u[0],f[0],l[0]),i=Math.min(s[1],u[1],f[1],l[1]),A=Math.max(s[1],u[1],f[1],l[1])}var c=this.attrs;if(c.shadowColor){var h=c.shadowBlur,d=h===void 0?0:h,v=c.shadowOffsetX,g=v===void 0?0:v,p=c.shadowOffsetY,y=p===void 0?0:p,m=a-d+g,w=o+d+g,B=i-d+y,E=A+d+y;a=Math.min(a,m),o=Math.max(o,w),i=Math.min(i,B),A=Math.max(A,E)}return{x:a,y:i,minX:a,minY:i,maxX:o,maxY:A,width:o-a,height:A-i}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,n){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,n){var a=this.get("startArrowShape"),i=this.get("endArrowShape"),o=[t,n,1];o=this.invertFromMatrix(o);var A=o[0],s=o[1],u=this._isInBBox(A,s);return this.isOnlyHitBox()?u:!!(u&&!this.isClipped(A,s)&&(this.isInShape(A,s)||a&&a.isHit(A,s)||i&&i.isHit(A,s)))},e}(xD),zD=new Map;function eo(r,e){zD.set(r,e)}function KD(r){return zD.get(r)}function jD(r){var e=r.attr(),t=e.x,n=e.y,a=e.width,i=e.height;return{x:t,y:n,width:a,height:i}}function $D(r){var e=r.attr(),t=e.x,n=e.y,a=e.r;return{x:t-a,y:n-a,width:a*2,height:a*2}}function Vn(r,e,t,n){var a=r-t,i=e-n;return Math.sqrt(a*a+i*i)}function av(r,e){return Math.abs(r-e)<.001}function df(r,e){var t=Xi(r),n=Xi(e),a=Vi(r),i=Vi(e);return{x:t,y:n,width:a-t,height:i-n}}function Pg(r){return(r+Math.PI*2)%(Math.PI*2)}const Dn={box:function(r,e,t,n){return df([r,t],[e,n])},length:function(r,e,t,n){return Vn(r,e,t,n)},pointAt:function(r,e,t,n,a){return{x:(1-a)*r+a*t,y:(1-a)*e+a*n}},pointDistance:function(r,e,t,n,a,i){var o=(t-r)*(a-r)+(n-e)*(i-e);if(o<0)return Vn(r,e,a,i);var A=(t-r)*(t-r)+(n-e)*(n-e);return o>A?Vn(t,n,a,i):this.pointToLine(r,e,t,n,a,i)},pointToLine:function(r,e,t,n,a,i){var o=[t-r,n-e];if(tB(o,[0,0]))return Math.sqrt((a-r)*(a-r)+(i-e)*(i-e));var A=[-o[1],o[0]];mA(A,A);var s=[a-r,i-e];return Math.abs(eB(s,A))},tangentAngle:function(r,e,t,n){return Math.atan2(n-e,t-r)}};var iW=1e-4;function WD(r,e,t,n,a,i){var o,A=1/0,s=[t,n],u=20;i&&i>200&&(u=i/10);for(var f=1/u,l=f/10,c=0;c<=u;c++){var h=c*f,d=[a.apply(null,r.concat([h])),a.apply(null,e.concat([h]))],v=Vn(s[0],s[1],d[0],d[1]);v<A&&(o=h,A=v)}if(o===0)return{x:r[0],y:e[0]};if(o===1){var g=r.length;return{x:r[g-1],y:e[g-1]}}A=1/0;for(var c=0;c<32&&!(l<iW);c++){var p=o-l,y=o+l,d=[a.apply(null,r.concat([p])),a.apply(null,e.concat([p]))],v=Vn(s[0],s[1],d[0],d[1]);if(p>=0&&v<A)o=p,A=v;else{var m=[a.apply(null,r.concat([y])),a.apply(null,e.concat([y]))],w=Vn(s[0],s[1],m[0],m[1]);y<=1&&w<A?(o=y,A=w):l*=.5}}return{x:a.apply(null,r.concat([o])),y:a.apply(null,e.concat([o]))}}function oW(r,e){for(var t=0,n=r.length,a=0;a<n;a++){var i=r[a],o=e[a],A=r[(a+1)%n],s=e[(a+1)%n];t+=Vn(i,o,A,s)}return t/2}function oA(r,e,t,n){var a=1-n;return a*a*r+2*n*a*e+n*n*t}function r_(r,e,t){var n=r+t-2*e;if(av(n,0))return[.5];var a=(r-e)/n;return a<=1&&a>=0?[a]:[]}function n_(r,e,t,n){return 2*(1-n)*(e-r)+2*n*(t-e)}function VD(r,e,t,n,a,i,o){var A=oA(r,t,a,o),s=oA(e,n,i,o),u=Dn.pointAt(r,e,t,n,o),f=Dn.pointAt(t,n,a,i,o);return[[r,e,u.x,u.y,A,s],[A,s,f.x,f.y,a,i]]}function Xm(r,e,t,n,a,i,o){if(o===0)return(Vn(r,e,t,n)+Vn(t,n,a,i)+Vn(r,e,a,i))/2;var A=VD(r,e,t,n,a,i,.5),s=A[0],u=A[1];return s.push(o-1),u.push(o-1),Xm.apply(null,s)+Xm.apply(null,u)}const XD={box:function(r,e,t,n,a,i){var o=r_(r,t,a)[0],A=r_(e,n,i)[0],s=[r,a],u=[e,i];return o!==void 0&&s.push(oA(r,t,a,o)),A!==void 0&&u.push(oA(e,n,i,A)),df(s,u)},length:function(r,e,t,n,a,i){return Xm(r,e,t,n,a,i,3)},nearestPoint:function(r,e,t,n,a,i,o,A){return WD([r,t,a],[e,n,i],o,A,oA)},pointDistance:function(r,e,t,n,a,i,o,A){var s=this.nearestPoint(r,e,t,n,a,i,o,A);return Vn(s.x,s.y,o,A)},interpolationAt:oA,pointAt:function(r,e,t,n,a,i,o){return{x:oA(r,t,a,o),y:oA(e,n,i,o)}},divide:function(r,e,t,n,a,i,o){return VD(r,e,t,n,a,i,o)},tangentAngle:function(r,e,t,n,a,i,o){var A=n_(r,t,a,o),s=n_(e,n,i,o),u=Math.atan2(s,A);return Pg(u)}};function AA(r,e,t,n,a){var i=1-a;return i*i*i*r+3*e*a*i*i+3*t*a*a*i+n*a*a*a}function a_(r,e,t,n,a){var i=1-a;return 3*(i*i*(e-r)+2*i*a*(t-e)+a*a*(n-t))}function J0(r,e,t,n){var a=-3*r+9*e-9*t+3*n,i=6*r-12*e+6*t,o=3*e-3*r,A=[],s,u,f;if(av(a,0))av(i,0)||(s=-o/i,s>=0&&s<=1&&A.push(s));else{var l=i*i-4*a*o;av(l,0)?A.push(-i/(2*a)):l>0&&(f=Math.sqrt(l),s=(-i+f)/(2*a),u=(-i-f)/(2*a),s>=0&&s<=1&&A.push(s),u>=0&&u<=1&&A.push(u))}return A}function YD(r,e,t,n,a,i,o,A,s){var u=AA(r,t,a,o,s),f=AA(e,n,i,A,s),l=Dn.pointAt(r,e,t,n,s),c=Dn.pointAt(t,n,a,i,s),h=Dn.pointAt(a,i,o,A,s),d=Dn.pointAt(l.x,l.y,c.x,c.y,s),v=Dn.pointAt(c.x,c.y,h.x,h.y,s);return[[r,e,l.x,l.y,d.x,d.y,u,f],[u,f,v.x,v.y,h.x,h.y,o,A]]}function Ym(r,e,t,n,a,i,o,A,s){if(s===0)return oW([r,t,a,o],[e,n,i,A]);var u=YD(r,e,t,n,a,i,o,A,.5),f=u[0],l=u[1];return f.push(s-1),l.push(s-1),Ym.apply(null,f)+Ym.apply(null,l)}const _l={extrema:J0,box:function(r,e,t,n,a,i,o,A){for(var s=[r,o],u=[e,A],f=J0(r,t,a,o),l=J0(e,n,i,A),c=0;c<f.length;c++)s.push(AA(r,t,a,o,f[c]));for(var c=0;c<l.length;c++)u.push(AA(e,n,i,A,l[c]));return df(s,u)},length:function(r,e,t,n,a,i,o,A){return Ym(r,e,t,n,a,i,o,A,3)},nearestPoint:function(r,e,t,n,a,i,o,A,s,u,f){return WD([r,t,a,o],[e,n,i,A],s,u,AA,f)},pointDistance:function(r,e,t,n,a,i,o,A,s,u,f){var l=this.nearestPoint(r,e,t,n,a,i,o,A,s,u,f);return Vn(l.x,l.y,s,u)},interpolationAt:AA,pointAt:function(r,e,t,n,a,i,o,A,s){return{x:AA(r,t,a,o,s),y:AA(e,n,i,A,s)}},divide:function(r,e,t,n,a,i,o,A,s){return YD(r,e,t,n,a,i,o,A,s)},tangentAngle:function(r,e,t,n,a,i,o,A,s){var u=a_(r,t,a,o,s),f=a_(e,n,i,A,s);return Pg(Math.atan2(f,u))}};function i_(r,e){var t=Math.abs(r);return e>0?t:t*-1}const AW={box:function(r,e,t,n){return{x:r-t,y:e-n,width:t*2,height:n*2}},length:function(r,e,t,n){return Math.PI*(3*(t+n)-Math.sqrt((3*t+n)*(t+3*n)))},nearestPoint:function(r,e,t,n,a,i){var o=t,A=n;if(o===0||A===0)return{x:r,y:e};for(var s=a-r,u=i-e,f=Math.abs(s),l=Math.abs(u),c=o*o,h=A*A,d=Math.PI/4,v,g,p=0;p<4;p++){v=o*Math.cos(d),g=A*Math.sin(d);var y=(c-h)*Math.pow(Math.cos(d),3)/o,m=(h-c)*Math.pow(Math.sin(d),3)/A,w=v-y,B=g-m,E=f-y,b=l-m,C=Math.hypot(B,w),_=Math.hypot(b,E),x=C*Math.asin((w*b-B*E)/(C*_)),M=x/Math.sqrt(c+h-v*v-g*g);d+=M,d=Math.min(Math.PI/2,Math.max(0,d))}return{x:r+i_(v,s),y:e+i_(g,u)}},pointDistance:function(r,e,t,n,a,i){var o=this.nearestPoint(r,e,t,n,a,i);return Vn(o.x,o.y,a,i)},pointAt:function(r,e,t,n,a){var i=2*Math.PI*a;return{x:r+t*Math.cos(i),y:e+n*Math.sin(i)}},tangentAngle:function(r,e,t,n,a){var i=2*Math.PI*a,o=Math.atan2(n*Math.cos(i),-t*Math.sin(i));return Pg(o)}};function sW(r,e,t,n,a,i,o,A){return-1*t*Math.cos(a)*Math.sin(A)-n*Math.sin(a)*Math.cos(A)}function uW(r,e,t,n,a,i,o,A){return-1*t*Math.sin(a)*Math.sin(A)+n*Math.cos(a)*Math.cos(A)}function fW(r,e,t){return Math.atan(-e/r*Math.tan(t))}function lW(r,e,t){return Math.atan(e/(r*Math.tan(t)))}function o_(r,e,t,n,a,i){return t*Math.cos(a)*Math.cos(i)-n*Math.sin(a)*Math.sin(i)+r}function A_(r,e,t,n,a,i){return t*Math.sin(a)*Math.cos(i)+n*Math.cos(a)*Math.sin(i)+e}function cW(r,e,t,n){var a=Math.atan2(n*r,t*e);return(a+Math.PI*2)%(Math.PI*2)}function s_(r,e,t){return{x:r*Math.cos(t),y:e*Math.sin(t)}}function u_(r,e,t){var n=Math.cos(t),a=Math.sin(t);return[r*n-e*a,r*a+e*n]}const hW={box:function(r,e,t,n,a,i,o){for(var A=fW(t,n,a),s=1/0,u=-1/0,f=[i,o],l=-Math.PI*2;l<=Math.PI*2;l+=Math.PI){var c=A+l;i<o?i<c&&c<o&&f.push(c):o<c&&c<i&&f.push(c)}for(var l=0;l<f.length;l++){var h=o_(r,e,t,n,a,f[l]);h<s&&(s=h),h>u&&(u=h)}for(var d=lW(t,n,a),v=1/0,g=-1/0,p=[i,o],l=-Math.PI*2;l<=Math.PI*2;l+=Math.PI){var y=d+l;i<o?i<y&&y<o&&p.push(y):o<y&&y<i&&p.push(y)}for(var l=0;l<p.length;l++){var m=A_(r,e,t,n,a,p[l]);m<v&&(v=m),m>g&&(g=m)}return{x:s,y:v,width:u-s,height:g-v}},length:function(r,e,t,n,a,i,o){},nearestPoint:function(r,e,t,n,a,i,o,A,s){var u=u_(A-r,s-e,-a),f=u[0],l=u[1],c=AW.nearestPoint(0,0,t,n,f,l),h=cW(t,n,c.x,c.y);h<i?c=s_(t,n,i):h>o&&(c=s_(t,n,o));var d=u_(c.x,c.y,a);return{x:d[0]+r,y:d[1]+e}},pointDistance:function(r,e,t,n,a,i,o,A,s){var u=this.nearestPoint(r,e,t,n,A,s);return Vn(u.x,u.y,A,s)},pointAt:function(r,e,t,n,a,i,o,A){var s=(o-i)*A+i;return{x:o_(r,e,t,n,a,s),y:A_(r,e,t,n,a,s)}},tangentAngle:function(r,e,t,n,a,i,o,A){var s=(o-i)*A+i,u=sW(r,e,t,n,a,i,o,s),f=uW(r,e,t,n,a,i,o,s);return Pg(Math.atan2(f,u))}};function ZD(r){for(var e=0,t=[],n=0;n<r.length-1;n++){var a=r[n],i=r[n+1],o=Vn(a[0],a[1],i[0],i[1]),A={from:a,to:i,length:o};t.push(A),e+=o}return{segments:t,totalLength:e}}function dW(r){if(r.length<2)return 0;for(var e=0,t=0;t<r.length-1;t++){var n=r[t],a=r[t+1];e+=Vn(n[0],n[1],a[0],a[1])}return e}function vW(r,e){if(e>1||e<0||r.length<2)return null;var t=ZD(r),n=t.segments,a=t.totalLength;if(a===0)return{x:r[0][0],y:r[0][1]};for(var i=0,o=null,A=0;A<n.length;A++){var s=n[A],u=s.from,f=s.to,l=s.length/a;if(e>=i&&e<=i+l){var c=(e-i)/l;o=Dn.pointAt(u[0],u[1],f[0],f[1],c);break}i+=l}return o}function gW(r,e){if(e>1||e<0||r.length<2)return 0;for(var t=ZD(r),n=t.segments,a=t.totalLength,i=0,o=0,A=0;A<n.length;A++){var s=n[A],u=s.from,f=s.to,l=s.length/a;if(e>=i&&e<=i+l){o=Math.atan2(f[1]-u[1],f[0]-u[0]);break}i+=l}return o}function pW(r,e,t){for(var n=1/0,a=0;a<r.length-1;a++){var i=r[a],o=r[a+1],A=Dn.pointDistance(i[0],i[1],o[0],o[1],e,t);A<n&&(n=A)}return n}const qD={box:function(r){for(var e=[],t=[],n=0;n<r.length;n++){var a=r[n];e.push(a[0]),t.push(a[1])}return df(e,t)},length:function(r){return dW(r)},pointAt:function(r,e){return vW(r,e)},pointDistance:function(r,e,t){return pW(r,e,t)},tangentAngle:function(r,e){return gW(r,e)}};function f_(r,e){return!r||!e?r||e:{minX:Math.min(r.minX,e.minX),minY:Math.min(r.minY,e.minY),maxX:Math.max(r.maxX,e.maxX),maxY:Math.max(r.maxY,e.maxY)}}function wB(r,e){var t=r.get("startArrowShape"),n=r.get("endArrowShape"),a=null,i=null;return t&&(a=t.getCanvasBBox(),e=f_(e,a)),n&&(i=n.getCanvasBBox(),e=f_(e,i)),e}function yW(r){for(var e=r.attr(),t=e.points,n=[],a=[],i=0;i<t.length;i++){var o=t[i];n.push(o[0]),a.push(o[1])}var A=df(n,a),s=A.x,u=A.y,f=A.width,l=A.height,c={minX:s,minY:u,maxX:s+f,maxY:u+l};return c=wB(r,c),{x:c.minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}function mW(r){for(var e=r.attr(),t=e.points,n=[],a=[],i=0;i<t.length;i++){var o=t[i];n.push(o[0]),a.push(o[1])}return df(n,a)}var ey=null;function JD(){if(!ey){var r=document.createElement("canvas");r.width=1,r.height=1,ey=r.getContext("2d")}return ey}function eO(r,e,t){var n=1;if(Oe(r)&&(n=r.split(`
`).length),n>1){var a=wW(e,t);return e*n+a*(n-1)}return e}function wW(r,e){return e?e-r:r*.14}function BW(r,e){var t=JD(),n=0;if(ht(r)||r==="")return n;if(t.save(),t.font=e,Oe(r)&&r.includes(`
`)){var a=r.split(`
`);ye(a,function(i){var o=t.measureText(i).width;n<o&&(n=o)})}else n=t.measureText(r).width;return t.restore(),n}function tO(r){var e=r.fontSize,t=r.fontFamily,n=r.fontWeight,a=r.fontStyle,i=r.fontVariant;return[a,i,n,e+"px",t].join(" ").trim()}function EW(r){var e=r.attr(),t=e.x,n=e.y,a=e.text,i=e.fontSize,o=e.lineHeight,A=e.font;A||(A=tO(e));var s=BW(a,A),u;if(!s)u={x:t,y:n,width:0,height:0};else{var f=e.textAlign,l=e.textBaseline,c=eO(a,i,o),h={x:t,y:n-c};f&&(f==="end"||f==="right"?h.x-=s:f==="center"&&(h.x-=s/2)),l&&(l==="top"?h.y+=c:l==="middle"&&(h.y+=c/2)),u={x:h.x,y:h.y,width:s,height:c}}return u}var bW=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,xW=/[^\s\,]+/ig;function CW(r){var e=r||[];if(yt(e))return e;if(Oe(e))return e=e.match(bW),ye(e,function(t,n){if(t=t.match(xW),t[0].length>1){var a=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=a}ye(t,function(i,o){isNaN(i)||(t[o]=+i)}),e[n]=t}),e}function _W(r,e,t,n){var a=[],i=!!n,o,A,s,u,f,l,c;if(i){s=n[0],u=n[1];for(var h=0,d=r.length;h<d;h+=1){var v=r[h];s=tA([0,0],s,v),u=rA([0,0],u,v)}}for(var h=0,g=r.length;h<g;h+=1){var v=r[h];if(h===0&&!t)c=v;else if(h===g-1&&!t)l=v,a.push(c),a.push(l);else{var p=[h?h-1:g-1,h-1][t?0:1];o=r[p],A=r[t?(h+1)%g:h+1];var y=[0,0];y=qd(y,A,o),y=Wn(y,y,e);var m=Iv(v,o),w=Iv(v,A),B=m+w;B!==0&&(m/=B,w/=B);var E=Wn([0,0],y,-m),b=Wn([0,0],y,w);l=Tn([0,0],v,E),f=Tn([0,0],v,b),f=tA([0,0],f,rA([0,0],A,v)),f=rA([0,0],f,tA([0,0],A,v)),E=qd([0,0],f,v),E=Wn([0,0],E,-m/w),l=Tn([0,0],v,E),l=tA([0,0],l,rA([0,0],o,v)),l=rA([0,0],l,tA([0,0],o,v)),b=qd([0,0],v,l),b=Wn([0,0],b,w/m),f=Tn([0,0],v,b),i&&(l=rA([0,0],l,s),l=tA([0,0],l,u),f=rA([0,0],f,s),f=tA([0,0],f,u)),a.push(c),a.push(l),c=f}}return t&&a.push(a.shift()),a}function rO(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=[[0,0],[1,1]]);for(var n=!!e,a=[],i=0,o=r.length;i<o;i+=2)a.push([r[i],r[i+1]]);for(var A=_W(a,.4,n,t),s=a.length,u=[],f,l,c,i=0;i<s-1;i+=1)f=A[i*2],l=A[i*2+1],c=a[i+1],u.push(["C",f[0],f[1],l[0],l[1],c[0],c[1]]);return n&&(f=A[s],l=A[s+1],c=a[0],u.push(["C",f[0],f[1],l[0],l[1],c[0],c[1]])),u}var Sl=`	
\v\f\r   ᠎             　\u2028\u2029`,SW=new RegExp("([a-z])["+Sl+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Sl+"]*,?["+Sl+"]*)+)","ig"),MW=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Sl+"]*,?["+Sl+"]*","ig");function Zm(r){if(!r)return null;if(yt(r))return r;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(r).replace(SW,function(n,a,i){var o=[],A=a.toLowerCase();if(i.replace(MW,function(s,u){u&&o.push(+u)}),A==="m"&&o.length>2&&(t.push([a].concat(o.splice(0,2))),A="l",a=a==="m"?"l":"L"),A==="o"&&o.length===1&&t.push([a,o[0]]),A==="r")t.push([a].concat(o));else for(;o.length>=e[A]&&(t.push([a].concat(o.splice(0,e[A]))),!!e[A]););return""}),t}var IW=/[a-z]/;function l_(r,e){return[e[0]+(e[0]-r[0]),e[1]+(e[1]-r[1])]}function nO(r){var e=Zm(r);if(!e||!e.length)return[["M",0,0]];for(var t=!1,n=0;n<e.length;n++){var a=e[n][0];if(IW.test(a)||["V","H","T","S"].indexOf(a)>=0){t=!0;break}}if(!t)return e;var i=[],o=0,A=0,s=0,u=0,f=0,l=e[0];(l[0]==="M"||l[0]==="m")&&(o=+l[1],A=+l[2],s=o,u=A,f++,i[0]=["M",o,A]);for(var n=f,c=e.length;n<c;n++){var h=e[n],d=i[n-1],v=[],a=h[0],g=a.toUpperCase();if(a!==g)switch(v[0]=g,g){case"A":v[1]=h[1],v[2]=h[2],v[3]=h[3],v[4]=h[4],v[5]=h[5],v[6]=+h[6]+o,v[7]=+h[7]+A;break;case"V":v[1]=+h[1]+A;break;case"H":v[1]=+h[1]+o;break;case"M":s=+h[1]+o,u=+h[2]+A,v[1]=s,v[2]=u;break;default:for(var p=1,y=h.length;p<y;p++)v[p]=+h[p]+(p%2?o:A)}else v=e[n];switch(g){case"Z":o=+s,A=+u;break;case"H":o=v[1],v=["L",o,A];break;case"V":A=v[1],v=["L",o,A];break;case"T":o=v[1],A=v[2];var m=l_([d[1],d[2]],[d[3],d[4]]);v=["Q",m[0],m[1],o,A];break;case"S":o=v[v.length-2],A=v[v.length-1];var w=d.length,B=l_([d[w-4],d[w-3]],[d[w-2],d[w-1]]);v=["C",B[0],B[1],v[1],v[2],o,A];break;case"M":s=v[v.length-2],u=v[v.length-1];break;default:o=v[v.length-2],A=v[v.length-1]}i.push(v)}return i}function Qh(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function qm(r,e){return Qh(r)*Qh(e)?(r[0]*e[0]+r[1]*e[1])/(Qh(r)*Qh(e)):1}function c_(r,e){return(r[0]*e[1]<r[1]*e[0]?-1:1)*Math.acos(qm(r,e))}function Jm(r,e){return r[0]===e[0]&&r[1]===e[1]}function TW(r,e){var t=e[1],n=e[2],a=Fg(Lg(e[3]),Math.PI*2),i=e[4],o=e[5],A=r[0],s=r[1],u=e[6],f=e[7],l=Math.cos(a)*(A-u)/2+Math.sin(a)*(s-f)/2,c=-1*Math.sin(a)*(A-u)/2+Math.cos(a)*(s-f)/2,h=l*l/(t*t)+c*c/(n*n);h>1&&(t*=Math.sqrt(h),n*=Math.sqrt(h));var d=t*t*(c*c)+n*n*(l*l),v=d?Math.sqrt((t*t*(n*n)-d)/d):1;i===o&&(v*=-1),isNaN(v)&&(v=0);var g=n?v*t*c/n:0,p=t?v*-n*l/t:0,y=(A+u)/2+Math.cos(a)*g-Math.sin(a)*p,m=(s+f)/2+Math.sin(a)*g+Math.cos(a)*p,w=[(l-g)/t,(c-p)/n],B=[(-1*l-g)/t,(-1*c-p)/n],E=c_([1,0],w),b=c_(w,B);return qm(w,B)<=-1&&(b=Math.PI),qm(w,B)>=1&&(b=0),o===0&&b>0&&(b=b-2*Math.PI),o===1&&b<0&&(b=b+2*Math.PI),{cx:y,cy:m,rx:Jm(r,[u,f])?0:t,ry:Jm(r,[u,f])?0:n,startAngle:E,endAngle:E+b,xRotation:a,arcFlag:i,sweepFlag:o}}function h_(r,e){return[e[0]+(e[0]-r[0]),e[1]+(e[1]-r[1])]}function aO(r){r=CW(r);for(var e=[],t=null,n=null,a=null,i=0,o=r.length,A=0;A<o;A++){var s=r[A];n=r[A+1];var u=s[0],f={command:u,prePoint:t,params:s,startTangent:null,endTangent:null};switch(u){case"M":a=[s[1],s[2]],i=A;break;case"A":var l=TW(t,s);f.arcParams=l;break}if(u==="Z")t=a,n=r[i+1];else{var c=s.length;t=[s[c-2],s[c-1]]}n&&n[0]==="Z"&&(n=r[i],e[i]&&(e[i].prePoint=t)),f.currentPoint=t,e[i]&&Jm(t,e[i].currentPoint)&&(e[i].prePoint=f.prePoint);var h=n?[n[n.length-2],n[n.length-1]]:null;f.nextPoint=h;var d=f.prePoint;if(["L","H","V"].includes(u))f.startTangent=[d[0]-t[0],d[1]-t[1]],f.endTangent=[t[0]-d[0],t[1]-d[1]];else if(u==="Q"){var v=[s[1],s[2]];f.startTangent=[d[0]-v[0],d[1]-v[1]],f.endTangent=[t[0]-v[0],t[1]-v[1]]}else if(u==="T"){var g=e[A-1],v=h_(g.currentPoint,d);g.command==="Q"?(f.command="Q",f.startTangent=[d[0]-v[0],d[1]-v[1]],f.endTangent=[t[0]-v[0],t[1]-v[1]]):(f.command="TL",f.startTangent=[d[0]-t[0],d[1]-t[1]],f.endTangent=[t[0]-d[0],t[1]-d[1]])}else if(u==="C"){var p=[s[1],s[2]],y=[s[3],s[4]];f.startTangent=[d[0]-p[0],d[1]-p[1]],f.endTangent=[t[0]-y[0],t[1]-y[1]],f.startTangent[0]===0&&f.startTangent[1]===0&&(f.startTangent=[p[0]-y[0],p[1]-y[1]]),f.endTangent[0]===0&&f.endTangent[1]===0&&(f.endTangent=[y[0]-p[0],y[1]-p[1]])}else if(u==="S"){var g=e[A-1],p=h_(g.currentPoint,d),y=[s[1],s[2]];g.command==="C"?(f.command="C",f.startTangent=[d[0]-p[0],d[1]-p[1]],f.endTangent=[t[0]-y[0],t[1]-y[1]]):(f.command="SQ",f.startTangent=[d[0]-y[0],d[1]-y[1]],f.endTangent=[t[0]-y[0],t[1]-y[1]])}else if(u==="A"){var m=.001,w=f.arcParams||{},B=w.cx,E=B===void 0?0:B,b=w.cy,C=b===void 0?0:b,_=w.rx,x=_===void 0?0:_,M=w.ry,S=M===void 0?0:M,I=w.sweepFlag,D=I===void 0?0:I,O=w.startAngle,F=O===void 0?0:O,U=w.endAngle,Q=U===void 0?0:U;D===0&&(m*=-1);var N=x*Math.cos(F-m)+E,R=S*Math.sin(F-m)+C;f.startTangent=[N-a[0],R-a[1]];var J=x*Math.cos(F+Q+m)+E,re=S*Math.sin(F+Q-m)+C;f.endTangent=[d[0]-J,d[1]-re]}e.push(f)}return e}function FW(r,e){for(var t=[],n=[],a=[],i=0;i<r.length;i++){var o=r[i],A=o.currentPoint,s=o.params,u=o.prePoint,f=void 0;switch(o.command){case"Q":f=XD.box(u[0],u[1],s[1],s[2],s[3],s[4]);break;case"C":f=_l.box(u[0],u[1],s[1],s[2],s[3],s[4],s[5],s[6]);break;case"A":var l=o.arcParams;f=hW.box(l.cx,l.cy,l.rx,l.ry,l.xRotation,l.startAngle,l.endAngle);break;default:t.push(A[0]),n.push(A[1]);break}f&&(o.box=f,t.push(f.x,f.x+f.width),n.push(f.y,f.y+f.height)),e&&(o.command==="L"||o.command==="M")&&o.prePoint&&o.nextPoint&&a.push(o)}t=t.filter(function(p){return!Number.isNaN(p)&&p!==1/0&&p!==-1/0}),n=n.filter(function(p){return!Number.isNaN(p)&&p!==1/0&&p!==-1/0});var c=Xi(t),h=Xi(n),d=Vi(t),v=Vi(n);if(a.length===0)return{x:c,y:h,width:d-c,height:v-h};for(var i=0;i<a.length;i++){var o=a[i],A=o.currentPoint,g=void 0;A[0]===c?(g=Rh(o,e),c=c-g.xExtra):A[0]===d&&(g=Rh(o,e),d=d+g.xExtra),A[1]===h?(g=Rh(o,e),h=h-g.yExtra):A[1]===v&&(g=Rh(o,e),v=v+g.yExtra)}return{x:c,y:h,width:d-c,height:v-h}}function Rh(r,e){var t=r.prePoint,n=r.currentPoint,a=r.nextPoint,i=Math.pow(n[0]-t[0],2)+Math.pow(n[1]-t[1],2),o=Math.pow(n[0]-a[0],2)+Math.pow(n[1]-a[1],2),A=Math.pow(t[0]-a[0],2)+Math.pow(t[1]-a[1],2),s=Math.acos((i+o-A)/(2*Math.sqrt(i)*Math.sqrt(o)));if(!s||Math.sin(s)===0||AF(s,0))return{xExtra:0,yExtra:0};var u=Math.abs(Math.atan2(a[1]-n[1],a[0]-n[0])),f=Math.abs(Math.atan2(a[0]-n[0],a[1]-n[1]));u=u>Math.PI/2?Math.PI-u:u,f=f>Math.PI/2?Math.PI-f:f;var l={xExtra:Math.cos(s/2-u)*(e/2*(1/Math.sin(s/2)))-e/2||0,yExtra:Math.cos(f-s/2)*(e/2*(1/Math.sin(s/2)))-e/2||0};return l}function LW(r){var e=r.attr(),t=e.path,n=e.stroke,a=n?e.lineWidth:0,i=r.get("segments")||aO(t),o=FW(i,a),A=o.x,s=o.y,u=o.width,f=o.height,l={minX:A,minY:s,maxX:A+u,maxY:s+f};return l=wB(r,l),{x:l.minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY}}function DW(r){var e=r.attr(),t=e.x1,n=e.y1,a=e.x2,i=e.y2,o=Math.min(t,a),A=Math.max(t,a),s=Math.min(n,i),u=Math.max(n,i),f={minX:o,maxX:A,minY:s,maxY:u};return f=wB(r,f),{x:f.minX,y:f.minY,width:f.maxX-f.minX,height:f.maxY-f.minY}}function OW(r){var e=r.attr(),t=e.x,n=e.y,a=e.rx,i=e.ry;return{x:t-a,y:n-i,width:a*2,height:i*2}}eo("rect",jD);eo("image",jD);eo("circle",$D);eo("marker",$D);eo("polyline",yW);eo("polygon",mW);eo("text",EW);eo("path",LW);eo("line",DW);eo("ellipse",OW);var UW=function(r){Lt(e,r);function e(t,n){var a=r.call(this,t,n)||this;return a.item=n.item,a.canvasX=n.canvasX,a.canvasY=n.canvasY,a.wheelDelta=n.wheelDelta,a.detail=n.detail,a}return e}(mD),e1=function(e){return"".concat(e,"-").concat(Math.random()).concat(Date.now())},BB=function(e){if(yt(e))switch(e.length){case 4:return e;case 3:return e.push(e[1]),e;case 2:return e.concat(e);case 1:return[e[0],e[0],e[0],e[0]];default:return[0,0,0,0]}if(vt(e))return[e,e,e,e];if(Oe(e)){var t=parseInt(e,10);return[t,t,t,t]}return[0,0,0,0]},NW=function(e){var t=new UW(e.type,e);return t.clientX=e.clientX,t.clientY=e.clientY,t.x=e.x,t.y=e.y,t.target=e.target,t.currentTarget=e.currentTarget,t.bubbles=!0,t.item=e.item,t},kW=function(e){if(!e)return!1;for(var t=9,n=[1,0,0,0,1,0,0,0,1],a=0;a<t;a++)if(e[a]!==n[a])return!0;return!1},Ni=function(e){return Number.isNaN(Number(e))},iO=function(e){for(var t=1/0,n=-1/0,a=1/0,i=-1/0,o=0;o<e.length;o++){var A=e[o],s=A.getBBox(),u=s.minX,f=s.minY,l=s.maxX,c=s.maxY;u<t&&(t=u),f<a&&(a=f),l>n&&(n=l),c>i&&(i=c)}var h=Math.floor(t),d=Math.floor(a),v=Math.ceil(n)-Math.floor(t),g=Math.ceil(i)-Math.floor(a);return{x:h,y:d,width:v,height:g,minX:t,minY:a,maxX:n,maxY:i}},PW=function(e,t,n,a,i){t===void 0&&(t=15),n===void 0&&(n="quadratic"),a===void 0&&(a=void 0),i===void 0&&(i=void 0);for(var o=e.length,A=t*2,s=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],u={},f=[],l={},c=0;c<o;c++){var h=e[c],d=h.source,v=h.target,g="".concat(d,"-").concat(v);if(!f[c]){u[g]||(u[g]=[]),f[c]=!0,u[g].push(h);for(var p=0;p<o;p++)if(c!==p){var y=e[p],m=y.source,w=y.target;f[p]||(d===w&&v===m?(u[g].push(y),f[p]=!0,l["".concat(m,"|").concat(w,"|").concat(u[g].length-1)]=!0):d===m&&v===w&&(u[g].push(y),f[p]=!0))}}}for(var B in u)for(var E=u[B],b=E.length,C=0;C<b;C++){var _=E[C];if(_.source===_.target){i&&(_.type=i),_.loopCfg={position:s[C%8],dist:Math.floor(C/8)*20+50};continue}if(b===1&&a&&_.source!==_.target){_.type=a;continue}_.type=n;var x=(C%2===0?1:-1)*(l["".concat(_.source,"|").concat(_.target,"|").concat(C)]?-1:1);b%2===1?_.curveOffset=x*Math.ceil(C/2)*A:_.curveOffset=x*(Math.floor(C/2)*A+t)}return e};const QW=Object.freeze(Object.defineProperty({__proto__:null,calculationItemsBBox:iO,cloneEvent:NW,formatPadding:BB,isNaN:Ni,isViewportChanged:kW,processParallelEdges:PW,uniqueId:e1},Symbol.toStringTag,{value:"Module"}));var LA={};const RW=Zi(cK);Object.defineProperty(LA,"__esModule",{value:!0});var CA=RW;function oO(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return CA.mat3.fromTranslation(n,t),CA.mat3.multiply(r,n,e)}LA.leftTranslate=oO;function AO(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return CA.mat3.fromRotation(n,t),CA.mat3.multiply(r,n,e)}LA.leftRotate=AO;function sO(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return CA.mat3.fromScaling(n,t),CA.mat3.multiply(r,n,e)}LA.leftScale=sO;function HW(r,e,t){return CA.mat3.multiply(r,t,e)}function GW(r,e){for(var t=r?[].concat(r):[1,0,0,0,1,0,0,0,1],n=0,a=e.length;n<a;n++){var i=e[n];switch(i[0]){case"t":oO(t,t,[i[1],i[2]]);break;case"s":sO(t,t,[i[1],i[2]]);break;case"r":AO(t,t,i[1]);break;case"m":HW(t,t,i[1]);break}}return t}var d_=LA.transform=GW;function uO(r,e){return r[0]*e[1]-e[0]*r[1]}LA.direction=uO;function zW(r,e,t){var n=CA.vec2.angle(r,e),a=uO(r,e)>=0;return t?a?Math.PI*2-n:n:a?n:Math.PI*2-n}LA.angleTo=zW;function KW(r,e,t){return t?(r[0]=e[1],r[1]=-1*e[0]):(r[0]=-1*e[1],r[1]=e[0]),r}LA.vertical=KW;var jW=function(){function r(e){this.destroyed=!1,this.graph=e,this.destroyed=!1}return r.prototype.getViewCenter=function(){var e=this.getFormatPadding(),t=this.graph,n=this.graph.get("width"),a=t.get("height");return{x:(n-e[1]-e[3])/2+e[3],y:(a-e[0]-e[2])/2+e[0]}},r.prototype.fitCenter=function(e,t){var n=this.graph,a=n.get("group"),i,o=n.getNodes();if(o.length>n.get("optimizeThreshold")){var A=1/0,s=1/0,u=-1/0,f=-1/0;o.forEach(function(w){var B=w.getModel(),E=B.x,b=B.y;A>E&&(A=E),s>b&&(s=b),u<E&&(u=E),f<b&&(f=b)});var l=a.getMatrix()||[1,0,0,0,1,0,0,0,1],c=ku({x:A,y:s},l),h=c.x,d=c.y,v=ku({x:u,y:f},l),g=v.x,p=v.y;i={minX:h,maxX:g,minY:d,maxY:p,width:g-h,height:p-d,x:h,y:d}}else i=a.getCanvasBBox();if(!(i.width===0||i.height===0)){var y=this.getViewCenter(),m={x:i.x+i.width/2,y:i.y+i.height/2};n.translate(y.x-m.x,y.y-m.y,e,t)}},r.prototype.animatedFitView=function(e,t,n,a,i,o,A,s){var u=this.graph;n=n||{duration:500,easing:"easeCubic"};var f=[1,0,0,0,1,0,0,0,1],l=a.x+i.x-o.x-a.minX,c=a.y+i.y-o.y-a.minY;if(!(Ni(l)||Ni(c))){var h=d_(f,[["t",l,c]]);if(!s){var d=Xl({animateCfg:n,callback:function(){u.emit("viewportchange",{action:"translate",matrix:h})}});e.animate(function(w){return{matrix:Fm(t,h,w)}},d);return}var v=u.get("minZoom"),g=u.get("maxZoom"),p=A;v&&A<v?(p=v,console.warn("fitview failed, ratio out of range, ratio: %f",A,"graph minzoom has been used instead")):g&&A>g&&(p=g,console.warn("fitview failed, ratio out of range, ratio: %f",A,"graph maxzoom has been used instead"));var y=d_(h,[["t",-i.x,-i.y],["s",p,p],["t",i.x,i.y]]),m=Xl({animateCfg:n,callback:function(){e.setMatrix(y),u.emit("viewportchange",{action:"translate",matrix:h}),u.emit("viewportchange",{action:"zoom",matrix:y})}});e.stopAnimate(),e.setMatrix(t),e.animate(function(w){return{matrix:Fm(t,y,w)}},m)}},r.prototype.fitView=function(e,t){var n=this.graph,a=this.getFormatPadding(),i=n.get("width"),o=n.get("height"),A=n.get("group"),s=A.getMatrix()||[1,0,0,0,1,0,0,0,1];A.resetMatrix();var u,f=n.getNodes();if(f.length>n.get("optimizeThreshold")){var l=1/0,c=1/0,h=-1/0,d=-1/0;f.forEach(function(E){var b=E.getModel(),C=b.x,_=b.y;l>C&&(l=C),c>_&&(c=_),h<C&&(h=C),d<_&&(d=_)}),u={minX:l,maxX:h,minY:c,maxY:d,width:h-l,height:d-c,x:l,y:c}}else u=A.getCanvasBBox();if(!(u.width===0||u.height===0)){var v=this.getViewCenter(),g={x:u.x+u.width/2,y:u.y+u.height/2},p=(i-a[1]-a[3])/u.width,y=(o-a[0]-a[2])/u.height,m=p;if(p>y&&(m=y),e)this.animatedFitView(A,s,t,u,v,g,m,!0);else{var w=v.x-g.x,B=v.y-g.y;if(Ni(w)||Ni(B))return;n.translate(w,B),n.zoom(m,v)||console.warn("zoom failed, ratio out of range, ratio: %f",m)}}},r.prototype.fitViewByRules=function(e,t,n){var a=e.onlyOutOfViewPort,i=a===void 0?!1:a,o=e.direction,A=o===void 0?"both":o,s=e.ratioRule,u=s===void 0?"min":s,f=this.graph,l=this.getFormatPadding(),c=f.get("width"),h=f.get("height"),d=f.get("group"),v=d.getMatrix()||[1,0,0,0,1,0,0,0,1];d.resetMatrix();var g,p=f.getNodes();if(p.length>f.get("optimizeThreshold")){var y=1/0,m=1/0,w=-1/0,B=-1/0;p.forEach(function(D){var O=D.getModel(),F=O.x,U=O.y;y>F&&(y=F),m>U&&(m=U),w<F&&(w=F),B<U&&(B=U)}),g={minX:y,maxX:w,minY:m,maxY:B,width:w-y,height:B-m,x:y,y:m}}else g=d.getCanvasBBox();if(!(g.width===0||g.height===0)){var E=this.getViewCenter(),b={x:g.x+g.width/2,y:g.y+g.height/2},C=(c-l[1]-l[3])/g.width,_=(h-l[0]-l[2])/g.height,x;if(A==="x"?x=C:A==="y"?x=_:x=u==="max"?Math.max(C,_):Math.min(C,_),i&&(x=x<1?x:1),t)this.animatedFitView(d,v,n,g,E,b,x,!0);else{var M=f.getZoom(),S=M*x,I=f.get("minZoom");S<I&&(S=I,console.warn("fitview failed, ratio out of range, ratio: %f",x,"graph minzoom has been used instead")),f.translate(E.x-b.x,E.y-b.y),f.zoomTo(S,E)}}},r.prototype.getFormatPadding=function(){var e=this.graph.get("fitViewPadding");return BB(e)},r.prototype.focusPoint=function(e,t,n){var a=this,i=this.getViewCenter(),o=this.getPointByCanvas(i.x,i.y),A=this.graph.get("group").getMatrix();if(A||(A=[1,0,0,0,1,0,0,0,1]),t){var s=(o.x-e.x)*A[0],u=(o.y-e.y)*A[4],f=0,l=0,c=0,h=0;this.graph.get("canvas").animate(function(d){c=s*d,h=u*d,a.graph.translate(c-f,h-l),f=c,l=h},P({},n))}else this.graph.translate((o.x-e.x)*A[0],(o.y-e.y)*A[4])},r.prototype.getPointByCanvas=function(e,t){var n=this.graph.get("group").getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var a=eD({x:e,y:t},n);return a},r.prototype.getPointByClient=function(e,t){var n=this.graph.get("canvas"),a=n.getPointByClient(e,t);return this.getPointByCanvas(a.x,a.y)},r.prototype.getClientByPoint=function(e,t){var n=this.graph.get("canvas"),a=this.getCanvasByPoint(e,t),i=n.getClientByPoint(a.x,a.y);return{x:i.x,y:i.y}},r.prototype.getCanvasByPoint=function(e,t){var n=this.graph.get("group").getMatrix();return n||(n=[1,0,0,0,1,0,0,0,1]),ku({x:e,y:t},n)},r.prototype.focus=function(e,t,n){if(Oe(e)&&(e=this.graph.findById(e)),e){var a=0,i=0;if(e.getType&&e.getType()==="edge"){var o=e.getSource().get("group").getMatrix(),A=e.getTarget().get("group").getMatrix();o&&A?(a=(o[6]+A[6])/2,i=(o[7]+A[7])/2):(o||A)&&(a=o?o[6]:A[6],i=o?o[7]:A[7])}else{var s=e.get("group"),u=s.getMatrix();u||(u=[1,0,0,0,1,0,0,0,1]),a=u[6],i=u[7]}this.focusPoint({x:a,y:i},t,n)}},r.prototype.focusItems=function(e,t,n,a){if(e.length){var i=this.graph,o=this.getFormatPadding(),A=i.get("width"),s=i.get("height"),u=i.get("group"),f=u.getMatrix()||[1,0,0,0,1,0,0,0,1];u.resetMatrix();for(var l={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},c=0,h=e;c<h.length;c++){var d=h[c],v=d.getBBox();v.minX<l.minX&&(l.minX=v.minX),v.minY<l.minY&&(l.minY=v.minY),v.maxX>l.maxX&&(l.maxX=v.maxX),v.maxY>l.maxY&&(l.maxY=v.maxY)}if(l.x=l.minX,l.y=l.minY,l.width=l.maxX-l.minX,l.height=l.maxY-l.minY,!(l.width===0||l.height===0)){var g=this.getViewCenter(),p={x:l.x+l.width/2,y:l.y+l.height/2},y=(A-o[1]-o[3])/l.width,m=(s-o[0]-o[2])/l.height,w=y;y>m&&(w=m),n?this.animatedFitView(u,f,a,l,g,p,w,t):(i.translate(g.x-p.x,g.y-p.y),t&&!i.zoom(w,g)&&console.warn("zoom failed, ratio out of range, ratio: %f",w))}}},r.prototype.changeSize=function(e,t){var n=this.graph;if(!vt(e)||!vt(t))throw Error("invalid canvas width & height, please make sure width & height type is number");n.set({width:e,height:t});var a=n.get("canvas");a.changeSize(e,t);var i=n.get("plugins");i.forEach(function(o){o.get("gridContainer")&&o.positionInit()})},r.prototype.destroy=function(){this.graph=null,this.destroyed=!1},r}();function t1(r){"@babel/helpers - typeof";return t1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t1(r)}function v_(r){if(typeof r!="string")return r;var e=function(b){if(typeof b!="string")return b;try{return JSON.parse(b.trim())}catch{return b.trim()}},t=e(r);if(typeof t!="string")return t;for(var n=function(b){return b[b.length-1]},a=r.trim(),i=[],o=[],A=function(){for(var b=[],C=0;C<arguments.length;C++)b[C]=arguments[C];return b.some(function(_){return n(o)===_})},s=function(){return n(i)},u=null,f=0,l="";f<a.length;){var c=a[f],h=A('"',"'");if(!h&&!c.trim()){f+=1;continue}var d=a[f-1]==="\\",v=A("}"),g=A("]"),p=A(","),y=s();if(h)if(n(o)===c&&!d){o.pop();var m=e(l);y.push(m),u=m,l=""}else l+=c;else if(g&&c===",")l&&(y.push(e(l)),l="");else if(v&&c===":")o.push(","),l&&(y.push(l),l="");else if(p&&c===",")l&&(y.push(e(l)),l=""),o.pop();else if(c==="}"&&(v||p)){l&&(y.push(e(l)),l=""),p&&o.pop();for(var w={},B=1;B<y.length;B+=2)w[y[B-1]]=y[B];i.pop(),i.length&&n(i).push(w),o.pop(),u=w}else c==="]"&&g?(l&&(y.push(e(l)),l=""),i.pop(),i.length&&n(i).push(y),o.pop(),u=y):c==="{"?(i.push([]),o.push("}")):c==="["?(i.push([]),o.push("]")):c==='"'?o.push('"'):c==="'"?o.push("'"):l+=c;f+=1}return u||l}var $W=function(e){return e.split("-").reduce(function(t,n){return t+n.charAt(0).toUpperCase()+n.slice(1)})},WW=function(e){return function(t){for(var n=e.length,a=[],i=0,o="";i<n;)if(e[i]==="{"&&e[i+1]==="{")a.push(o),o="",i+=2;else if(e[i]==="}"&&e[i+1]==="}"){if(a.length){var A=a.pop();o=xo(t,o,A.endsWith("=")?'"{'.concat(o,'}"'):o),a.push(A+o)}i+=2,o=""}else o+=e[i],i+=1;return a.push(o),a.map(function(s,u){return a[u-1]&&a[u-1].endsWith("=")?'"{'.concat(s,'}"'):s}).join("")}};function fO(r,e){var t={},n=r.getAttributeNames&&r.getAttributeNames()||[],a=r.children&&Array.from(r.children).map(function(A){return fO(A,e)}),i={},o=r.tagName?r.tagName.toLowerCase():"group";return o==="text"&&(t.text=r.innerText),i.type=o,o==="img"&&(i.type="image"),Array.from(n).forEach(function(A){var s=$W(A),u=r.getAttribute(A);try{if(s==="style"||s==="attrs"){var f=v_(u);t=P(P({},t),f)}else i[s]=v_(u)}catch(l){if(s==="style")throw l;i[s]=u}}),i.attrs=t,e&&e.style&&i.name&&t1(e.style[i.name])==="object"&&(i.attrs=P(P({},i.attrs),e.style[i.name])),e&&e.style&&i.keyshape&&(i.attrs=P(P({},i.attrs),e.style)),a.length&&(i.children=a),i}function VW(r,e,t){var n=r.attrs,a=n===void 0?{}:n,i={x:e.x||0,y:e.y||0,width:t.width||0,height:t.height||0},o,A;switch(r.type){case"maker":case"circle":a.r&&(A=2*a.r,o=2*a.r);break;case"text":a.text&&(A=cD(a.text,a.fontSize||12)[0],o=16,i.y+=o,i.height=o,i.width=A,r.attrs=P({fontSize:12,fill:"#000"},a));break;default:a.width&&(A=a.width),a.height&&(o=a.height)}return o>=0&&(i.height=o),A>=0&&(i.width=A),a.marginTop&&(i.y+=a.marginTop),a.marginLeft&&(i.x+=a.marginLeft),i}function lO(r,e){var t;e===void 0&&(e={x:0,y:0});var n=P({x:0,y:0,width:0,height:0},e);if(!((t=r.children)===null||t===void 0)&&t.length){var a=r.attrs,i=a===void 0?{}:a,o=i.marginTop,A=P({},e);o&&(A.y+=o);for(var s=0;s<r.children.length;s++){r.children[s].attrs.key="".concat(i.key||"root"," -").concat(s," ");var u=lO(r.children[s],A);if(u.bbox){var f=u.bbox;u.attrs.next==="inline"?A.x+=u.bbox.width:A.y+=u.bbox.height,f.width+f.x>n.width&&(n.width=f.width+f.x),f.height+f.y>n.height&&(n.height=f.height+f.y)}}}return r.bbox=VW(r,e,n),r.attrs=P(P({},r.attrs),r.bbox),r}function cO(r,e){var t,n,a,i,o=(r||{}).type,A=((e==null?void 0:e.attrs)||{}).key;if(A&&r&&(r.attrs.key=A),!r&&e)return{action:"delete",val:e,type:o,key:A};if(r&&!e)return{action:"add",val:r,type:o};if(!r&&!e)return{action:"same",type:o};var s=[];if(((t=r.children)===null||t===void 0?void 0:t.length)>0||((n=e.children)===null||n===void 0?void 0:n.length)>0)for(var u=Math.max((a=r.children)===null||a===void 0?void 0:a.length,(i=e.children)===null||i===void 0?void 0:i.length),f=e.children||[],l=r.children||[],c=0;c<u;c+=1)s.push(cO(l[c],f[c]));var h=Object.keys(e.attrs),d=Object.keys(r.attrs);return e.type!==r.type?{action:"restructure",nowTarget:r,formerTarget:e,key:A,children:s}:h.filter(function(v){return v!=="children"}).some(function(v){return r.attrs[v]!==e.attrs[v]||!d.includes(v)})?{action:"change",val:r,children:s,type:o,key:A}:{action:"same",children:s,type:o,key:A}}function g_(r){var e={},t=function(a){var i=typeof r=="function"?r(a):r,o=WW(i)(a),A=document.createElement("div");A.innerHTML=o;var s=A.children[0],u=lO(fO(s,a));return A.remove(),u};return{draw:function(a,i){var o=t(a),A=i,s=function u(f){var l=f.attrs,c=l===void 0?{}:l,h=f.bbox,d=f.type,v=f.children,g=mn(f,["attrs","bbox","type","children"]);if(f.type!=="group"){var p=i.addShape(f.type,P({attrs:c,origin:{bbox:h,type:d,children:v}},g));f.keyshape&&(A=p)}f.children&&f.children.forEach(function(y){return u(y)})};return s(o),e[a.id]=[o],A},update:function(a,i){e[a.id]||(e[a.id]=[]);var o=i.getContainer(),A=o.get("children"),s=t(a),u=e[a.id].pop(),f=cO(s,u),l=function d(v){var g;v.type!=="group"&&o.addShape(v.type,{attrs:v.attrs}),!((g=v.children)===null||g===void 0)&&g.length&&v.children.map(function(p){return d(p)})},c=function d(v){var g,p=A.find(function(y){return y.attrs.key===v.attrs.key});p&&o.removeChild(p),!((g=v.children)===null||g===void 0)&&g.length&&v.children.map(function(y){return d(y)})},h=function d(v){var g=v.key;if(v.type!=="group"){var p=A.find(function(m){return m.attrs.key===g});switch(v.action){case"change":if(p){var y=v.val.keyshape?i.getOriginStyle():{};p.attr(P(P({},y),v.val.attrs))}break;case"add":l(v.val);break;case"delete":c(v.val);break;case"restructure":c(v.formerTarget),l(v.nowTarget);break}}v.children&&v.children.forEach(function(m){return d(m)})};h(f),e[a.id].push(s)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var ty={};function p_(r){return ty[r]||(ty[r]=$u(r)),ty[r]}var XW={defaultShapeType:"defaultType",className:null,getShape:function(e){var t=this,n=t[e]||t[t.defaultShapeType]||t["simple-circle"];return n},draw:function(e,t,n){var a=this.getShape(e);n.shapeMap={};var i=a.draw(t,n);return a.afterDraw&&a.afterDraw(t,n,i),i},baseUpdate:function(e,t,n,a){var i,o,A=this.getShape(e);A.update&&(A.mergeStyle=(i=A.getOptions)===null||i===void 0?void 0:i.call(A,t,a),(o=A.update)===null||o===void 0||o.call(A,t,n,a)),A.afterUpdate&&A.afterUpdate(t,n)},setState:function(e,t,n,a){var i=this.getShape(e);i.setState(t,n,a)},shouldUpdate:function(e){var t=this.getShape(e);return!!t.update},getControlPoints:function(e,t){var n=this.getShape(e);return n.getControlPoints(t)},getAnchorPoints:function(e,t){var n=this.getShape(e);return n.getAnchorPoints(t)}},ry={options:{},draw:function(e,t){return this.drawShape(e,t)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t=this.options.anchorPoints,n=e.anchorPoints||t;return n}},xr=function(){function r(){}return r.registerFactory=function(e,t){var n=p_(e),a=XW,i=P(P({},a),t);return r[n]=i,i.className=n,i},r.getFactory=function(e){var t=p_(e);return r[t]},r.registerNode=function(e,t,n){var a=r.Node,i;if(typeof t=="string"||typeof t=="function"){var o=g_(t);i=P(P({},a.getShape("single-node")),o)}else if(t.jsx){var A=t.jsx,o=g_(A);i=P(P(P({},a.getShape("single-node")),o),t)}else{a.getShape(n);var s=n?a.getShape(n):ry;i=P(P({},s),t)}return i.type=e,i.itemType="node",a[e]=i,i},r.registerEdge=function(e,t,n){var a=r.Edge,i=n?a.getShape(n):ry,o=P(P({},i),t);return o.type=e,o.itemType="edge",a[e]=o,o},r.registerCombo=function(e,t,n){var a=r.Combo,i=n?a.getShape(n):ry,o=P(P({},i),t);return o.type=e,o.itemType="combo",a[e]=o,o},r}();xr.registerFactory("node",{defaultShapeType:"circle"});xr.registerFactory("edge",{defaultShapeType:"line"});xr.registerFactory("combo",{defaultShapeType:"circle"});var ny="bboxCache",ay="bboxCanvasCache",hO=function(){function r(e){this._cfg={},this.destroyed=!1,this.optimize=!1;var t={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(t,this.getDefaultCfg(),e);var n=this.get("model"),a=n.id,i=this.get("type");typeof a>"u"?a=e1(i):typeof a!="string"&&(a=String(a)),this.get("model").id=a,this.set("id",a);var o=e.group;o&&(o.set("item",this),o.set("id",a)),this.init(),this.draw();var A=n.shape||n.type||(i==="edge"?"line":"circle"),s=this.get("shapeFactory");if(s&&s[A]){var u=s[A].options;if(u&&u.stateStyles){var f=this.get("styles")||n.stateStyles;f=br({},u.stateStyles,f),this.set("styles",f)}}}return r.prototype.calculateBBox=function(){var e=this.get("keyShape"),t=this.get("group"),n=Ov(e,t);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},r.prototype.calculateCanvasBBox=function(){var e=this.get("keyShape"),t=this.get("group"),n=Ov(e,t);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},r.prototype.drawInner=function(){var e=this,t=e.get("shapeFactory"),n=e.get("group"),a=e.get("model");n.clear();var i=a.visible;if(i!==void 0&&!i&&e.changeVisibility(i),!!t){e.updatePosition(a);var o=e.getShapeCfg(a),A=o.type,s=t.draw(A,o,n);s&&(e.set("keyShape",s),s.set("isKeyShape",!0),s.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",A),this.restoreStates(t,A)}},r.prototype.setOriginStyle=function(){var e=this.get("group"),t=e.get("children"),n=this.getKeyShape(),a=this,i=n.get("name");if(this.get("originStyle")){var h=this.get("originStyle");i&&!h[i]&&(h[i]={});for(var d=this.getCurrentStatesStyle(),v=function(p){var y=t[p],m=y.get("name"),w=y.attr();if(m&&m!==i){var B=d[m];h[m]||(h[m]={}),B?Object.keys(w).forEach(function(C){var _=w[C];_!==B[C]&&(h[m][C]=_)}):h[m]=y.get("type")!=="image"?Xt(w):a.getShapeStyleByName(m)}else{var E=y.attr(),b={};Object.keys(d).forEach(function(C){var _=d[C];(C===i||!Ln(_))&&(b[C]=_)}),Object.keys(E).forEach(function(C){var _=E[C];b[C]!==_&&(i?h[i][C]=_:h[C]=_)})}},A=0;A<t.length;A++)v(A);delete h.path,delete h.matrix,delete h.x,delete h.y,h[i]&&(delete h[i].x,delete h[i].y,delete h[i].matrix,delete h[i].path),a.set("originStyle",h)}else{for(var o={},A=0;A<t.length;A++){var s=t[A],u=s.get("type"),f=s.get("name");if(f&&f!==i)o[f]=u!=="image"?Xt(s.attr()):a.getShapeStyleByName(f),u==="text"&&o[f]&&(delete o[f].x,delete o[f].y,delete o[f].matrix);else{var l=a.getShapeStyleByName();if(delete l.path,delete l.matrix,!i)Object.assign(o,l);else if(f)o[i]=l;else{var c=e1("shape");s.set("name",c),e.shapeMap[c]=s,o[c]=u!=="image"?Xt(s.attr()):a.getShapeStyleByName(f)}}}a.set("originStyle",o)}},r.prototype.restoreStates=function(e,t){var n=this,a=n.get("states");ye(a,function(i){e.setState(t,i,!0,n)})},r.prototype.init=function(){var e=xr.getFactory(this.get("type"));this.set("shapeFactory",e)},r.prototype.get=function(e){return this._cfg[e]},r.prototype.set=function(e,t){Ln(e)?this._cfg=P(P({},this._cfg),e):this._cfg[e]=t},r.prototype.getDefaultCfg=function(){return{}},r.prototype.clearCache=function(){this.set(ny,null),this.set(ay,null)},r.prototype.beforeDraw=function(){},r.prototype.afterDraw=function(){},r.prototype.afterUpdate=function(){},r.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},r.prototype.getShapeStyleByName=function(e){var t=this.get("group"),n;if(e?n=t.shapeMap[e]||t.find(function(i){return i.get("name")===e}):n=this.getKeyShape(),n){var a={};return ye(n.attr(),function(i,o){(o!=="img"||Oe(i))&&(a[o]=i)}),a}return{}},r.prototype.getShapeCfg=function(e,t){var n=this.get("styles");if(n){var a=e;return a.style=P(P({},n),e.style),a}return e},r.prototype.getStateStyle=function(e){var t=this.get("styles"),n=t&&t[e];return n},r.prototype.getOriginStyle=function(){return this.get("originStyle")},r.prototype.getCurrentStatesStyle=function(){var e=this,t={},n=e.getStates();return!n||!n.length?this.get("originStyle"):(ye(e.getStates(),function(a){t=Object.assign(t,e.getStateStyle(a))}),t)},r.prototype.setState=function(e,t){var n=this.get("states"),a=this.get("shapeFactory"),i=e,o=e;Oe(t)&&(i="".concat(e,":").concat(t),o="".concat(e,":"));var A=n;if(wc(t)){var s=n.indexOf(o);if(t){if(s>-1)return;n.push(i)}else s>-1&&n.splice(s,1)}else if(Oe(t)){var u=n.filter(function(c){return c.includes(o)});u.length>0&&this.clearStates(u),A=A.filter(function(c){return!c.includes(o)}),A.push(i),this.set("states",A)}if(a){var f=this.get("model"),l=f.type;a.setState(l,e,t,this)}},r.prototype.clearStates=function(e){var t=this,n=t.getStates(),a=t.get("shapeFactory"),i=t.get("model"),o=i.type;e||(e=n),Oe(e)&&(e=[e]);var A=n.filter(function(s){return e.indexOf(s)===-1});t.set("states",A),e.forEach(function(s){a.setState(o,s,!1,t)})},r.prototype.setOptimize=function(e){this.optimize=e},r.prototype.getContainer=function(){return this.get("group")},r.prototype.getKeyShape=function(){return this.get("keyShape")},r.prototype.getModel=function(){return this.get("model")},r.prototype.getType=function(){return this.get("type")},r.prototype.getID=function(){return this.get("id")},r.prototype.isItem=function(){return!0},r.prototype.getStates=function(){return this.get("states")},r.prototype.hasState=function(e){var t=this.getStates();return t.indexOf(e)>=0},r.prototype.refresh=function(e){var t=this.get("model");this.updatePosition(t),this.updateShape(e),this.afterUpdate(),this.clearCache()},r.prototype.getUpdateType=function(e){},r.prototype.update=function(e,t){t===void 0&&(t=void 0);var n=this.get("model");if(t==="move")this.updatePosition(e);else{var a=n.visible,i=e.visible;a!==i&&i!==void 0&&this.changeVisibility(i);var o={x:n.x,y:n.y};e.x=isNaN(+e.x)?n.x:+e.x,e.y=isNaN(+e.y)?n.y:+e.y;var A=this.get("styles");if(e.stateStyles){var s=e.stateStyles;mt(A,s),delete e.stateStyles}Object.assign(n,e),(o.x!==e.x||o.y!==e.y)&&this.updatePosition(e),this.updateShape(t)}this.afterUpdate(),this.clearCache()},r.prototype.updateShape=function(e){var t=this.get("shapeFactory"),n=this.get("model"),a=n.type;if(t.shouldUpdate(a)&&a===this.get("currentShape")){var i=this.getShapeCfg(n,e);t.baseUpdate(a,i,this,e),e!=="move"&&this.setOriginStyle()}else this.draw();this.restoreStates(t,a)},r.prototype.updatePosition=function(e){var t=this.get("model"),n=isNaN(+e.x)?+t.x:+e.x,a=isNaN(+e.y)?+t.y:+e.y,i=this.get("group");if(isNaN(n)||isNaN(a))return!1;t.x=n,t.y=a;var o=i.getMatrix();return o&&o[6]===n&&o[7]===a?!1:(i.resetMatrix(),tD(i,{x:n,y:a}),this.clearCache(),!0)},r.prototype.getBBox=function(){var e=this.get(ny);return e||(e=this.calculateBBox(),this.set(ny,e)),e},r.prototype.getCanvasBBox=function(){var e=this.get(ay);return e||(e=this.calculateCanvasBBox(),this.set(ay,e)),e},r.prototype.toFront=function(){var e=this.get("group");e.toFront()},r.prototype.toBack=function(){var e=this.get("group");e.toBack()},r.prototype.show=function(){this.changeVisibility(!0)},r.prototype.hide=function(){this.changeVisibility(!1)},r.prototype.changeVisibility=function(e){var t=this.get("group");e?t.show():t.hide(),this.set("visible",e)},r.prototype.isVisible=function(){return this.get("visible")},r.prototype.enableCapture=function(e){var t=this.get("group");t&&t.set("capture",e)},r.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),t=this.get("group");e&&t.stopAnimate(),t.shapeMap={},this.clearCache(),t.remove(),this._cfg=null,this.destroyed=!0}},r}(),Hh={source:"start",target:"end"},_i="Node",au="Point",YW="Anchor",dO=function(r){Lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},e.prototype.setEnd=function(t,n){var a=Hh[t]+au,i=t+_i,o=this.get(i);o&&!o.destroyed&&o.removeEdge(this),Ln(n)?(this.set(a,n),this.set(i,null)):n&&(n.addEdge(this),this.set(i,n),this.set(a,null))},e.prototype.getLinkPoint=function(t,n,a){var i=Hh[t]+au,o=t+_i,A=this.get(i);if(!A){var s=this.get(o),u=t+YW,f=this.getPrePoint(t,a),l=n[u];ht(l)||(A=s.getLinkPointByAnchor(l)),A=A||s.getLinkPoint(f),ht(A.index)||this.set("".concat(t,"AnchorIndex"),A.index)}return A},e.prototype.getPrePoint=function(t,n){if(n&&n.length){var a=t==="source"?0:n.length-1;return n[a]}var i=t==="source"?"target":"source";return this.getEndPoint(i)},e.prototype.getEndPoint=function(t){var n=t+_i,a=Hh[t]+au,i=this.get(n);return i&&!i.destroyed?i.get("model"):this.get(a)},e.prototype.getControlPointsByCenter=function(t){var n=this.getEndPoint("source"),a=this.getEndPoint("target"),i=this.get("shapeFactory"),o=t.type;return i.getControlPoints(o,{startPoint:n,endPoint:a})},e.prototype.getEndCenter=function(t){var n=t+_i,a=Hh[t]+au,i=this.get(n);if(i){var o=i.getBBox();return{x:o.centerX,y:o.centerY}}return this.get(a)},e.prototype.init=function(){r.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},e.prototype.getShapeCfg=function(t,n){var a=this,i=a.get("linkCenter"),o=n!=null&&n.includes("move")?t:r.prototype.getShapeCfg.call(this,t);if(i)o.startPoint=a.getEndCenter("source"),o.endPoint=a.getEndCenter("target");else{var A=o.controlPoints||a.getControlPointsByCenter(o);o.startPoint=a.getLinkPoint("source",t,A),o.endPoint=a.getLinkPoint("target",t,A)}return o.sourceNode=a.get("sourceNode"),o.targetNode=a.get("targetNode"),o},e.prototype.getModel=function(){var t=this.get("model"),n=this.get("source".concat(_i)),a=this.get("target".concat(_i));return n?delete t["source".concat(_i)]:t.source=this.get("start".concat(au)),a?delete t["target".concat(_i)]:t.target=this.get("end".concat(au)),!Oe(t.source)&&!Ln(t.source)&&(t.source=t.source.getID()),!Oe(t.target)&&!Ln(t.target)&&(t.target=t.target.getID()),t},e.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},e.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},e.prototype.getSource=function(){return this.get("source")},e.prototype.getTarget=function(){return this.get("target")},e.prototype.updatePosition=function(){return!1},e.prototype.update=function(t,n){n===void 0&&(n=void 0);var a=this.get("model"),i=a.visible,o=t.visible;i!==o&&o!==void 0&&this.changeVisibility(o);var A=this.get("source"),s=this.get("target");if(!(!A||A.destroyed||!s||s.destroyed)){var u=this.get("styles");if(t.stateStyles){var f=t.stateStyles;mt(u,f),delete t.stateStyles}Object.assign(a,t),this.updateShape(n),this.afterUpdate(),this.clearCache()}},e.prototype.destroy=function(){var t=this.get("source".concat(_i)),n=this.get("target".concat(_i));t&&!t.destroyed&&t.removeEdge(this),n&&!n.destroyed&&n.removeEdge(this),r.prototype.destroy.call(this)},e}(hO),iy="anchorPointsCache",ZW="bboxCache",EB=function(r){Lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getNearestPoint=function(t,n){for(var a=0,i=t[0],o=Lv(t[0],n),A=0;A<t.length;A++){var s=t[A],u=Lv(s,n);u<o&&(i=s,o=u,a=A)}return i.anchorIndex=a,i},e.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getInEdges=function(){var t=this;return this.get("edges").filter(function(n){return n.get("target")===t})},e.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter(function(n){return n.get("source")===t})},e.prototype.getNeighbors=function(t){var n=this,a=this.get("edges");if(t==="target"){var i=function(u){return u.getSource()===n};return a.filter(i).map(function(s){return s.getTarget()})}if(t==="source"){var o=function(u){return u.getTarget()===n};return a.filter(o).map(function(s){return s.getSource()})}var A=function(u){return u.getSource()===n?u.getTarget():u.getSource()};return a.map(A)},e.prototype.getLinkPointByAnchor=function(t){var n=this.getAnchorPoints();return n[t]},e.prototype.getLinkPoint=function(t){var n=this.get("keyShape"),a=n.get("type"),i=this.get("type"),o,A,s=this.getBBox();i==="combo"?(o=s.centerX||(s.maxX+s.minX)/2,A=s.centerY||(s.maxY+s.minY)/2):(o=s.centerX,A=s.centerY);var u=this.getAnchorPoints(),f;switch(a){case"circle":f=qL({x:o,y:A,r:s.width/2},t);break;case"ellipse":f=JL({x:o,y:A,rx:s.width/2,ry:s.height/2},t);break;default:f=ZL(s,t)}var l=f;return u.length&&(l||(l=t),l=this.getNearestPoint(u,l)),l||(l={x:o,y:A}),l},e.prototype.getAnchorPoints=function(){var t=this.get(iy);if(!t){t=[];var n=this.get("shapeFactory"),a=this.getBBox(),i=this.get("model"),o=this.getShapeCfg(i),A=i.type,s=n.getAnchorPoints(A,o)||[];ye(s,function(u,f){var l={x:a.minX+u[0]*a.width,y:a.minY+u[1]*a.height,anchorIndex:f};t.push(l)}),this.set(iy,t)}return t},e.prototype.addEdge=function(t){this.get("edges").push(t)},e.prototype.lock=function(){this.set("locked",!0)},e.prototype.unlock=function(){this.set("locked",!1)},e.prototype.hasLocked=function(){return this.get("locked")},e.prototype.removeEdge=function(t){var n=this.getEdges(),a=n.indexOf(t);a>-1&&n.splice(a,1)},e.prototype.clearCache=function(){this.set(ZW,null),this.set(iy,null)},e.prototype.getUpdateType=function(t){var n,a,i,o,A;if(t){var s=!ht(t.x),u=!ht(t.y),f=Object.keys(t);if(f.length===1&&(s||u)||f.length===2&&s&&u)return"move";if(vt(t.x)||vt(t.y)||t.type||t.anchorPoints||t.size||t!=null&&t.style&&(!((n=t==null?void 0:t.style)===null||n===void 0)&&n.r||!((a=t==null?void 0:t.style)===null||a===void 0)&&a.width||!((i=t==null?void 0:t.style)===null||i===void 0)&&i.height||!((o=t==null?void 0:t.style)===null||o===void 0)&&o.rx||!((A=t==null?void 0:t.style)===null||A===void 0)&&A.ry))return"bbox|label";var l=f.includes("label")||f.includes("labelCfg");return l?"style|label":"style"}},e.prototype.setState=function(t,n){var a=this;if(this.optimize){r.prototype.setState.call(this,t,n);return}this.runWithBBoxAffected(function(){return r.prototype.setState.call(a,t,n)})},e.prototype.clearStates=function(t){var n=this;if(this.optimize){r.prototype.clearStates.call(this,t);return}this.runWithBBoxAffected(function(){return r.prototype.clearStates.call(n,t)})},e.prototype.runWithBBoxAffected=function(t){var n=["r","width","height","rx","ry","lineWidth"],a=this.getKeyShape().attr(),i={};Object.keys(this.getKeyShape().attr()).forEach(function(u){n.includes(u)&&(i[u]=a[u])}),t();for(var o=this.getKeyShape().attr(),A=0;A<n.length;A++){var s=n[A];if(o[s]!==i[s]){this.clearCache(),this.getEdges().forEach(function(u){return u.refresh()});break}}},e}(hO),y_="bboxCache",m_="bboxCanvasCache",Gh="sizeCache",w_="anchorPointsCache",vO=function(r){Lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},e.prototype.getShapeCfg=function(t){var n=this.get("styles"),a=this.get("bbox");if(n&&a){var i=t,o=vt(t.size)?[t.size,t.size]:t.size,A=vt(t.fixSize)?[t.fixSize,t.fixSize]:t.fixSize,s=o||A||ct.defaultCombo.size,u={r:(Math.max(a.width,a.height)||Math.max(s[0],s[1]))/2,width:a.width||s[0],height:a.height||s[1]};i.style=P(P(P({},n),t.style),u);var f=t.padding||ct.defaultCombo.padding;return vt(f)?(u.r+=f,u.width+=f*2,u.height+=f*2):(u.r=u.r+Math.max.apply(Math,f),u.width+=f[1]+f[3]||f[1]*2,u.height+=f[0]+f[2]||f[0]*2),this.set(Gh,u),i}return t},e.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var t=this.get("keyShape"),n=this.get("group"),a=this.get(y_)||{},i=a.x,o=a.x,A=this.get(Gh),s=Ov(t,n);if(s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2,A){A.width=Math.max(A.width,s.width),A.height=Math.max(A.height,s.height),this.set(Gh,A);var u=t.get("type");u==="circle"?(s.width=A.r*2,s.height=A.r*2):(s.width=A.width,s.height=A.height),s.minX=s.centerX-s.width/2,s.minY=s.centerY-s.height/2,s.maxX=s.centerX+s.width/2,s.maxY=s.centerY+s.height/2}else s.width=s.maxX-s.minX,s.height=s.maxY-s.minY,s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2;return s.x=s.minX,s.y=s.minY,(s.x!==i||s.y!==o)&&this.set(w_,null),s}},e.prototype.getChildren=function(){var t=this;return{nodes:t.getNodes(),combos:t.getCombos()}},e.prototype.getNodes=function(){var t=this;return t.get("nodes")},e.prototype.getCombos=function(){var t=this;return t.get("combos")},e.prototype.addChild=function(t){var n=this,a=t.getType();switch(a){case"node":n.addNode(t);break;case"combo":n.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.addCombo=function(t){var n=this;return n.get("combos").push(t),!0},e.prototype.addNode=function(t){var n=this;return n.get("nodes").push(t),!0},e.prototype.removeChild=function(t){var n=this,a=t.getType();switch(a){case"node":n.removeNode(t);break;case"combo":n.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.removeCombo=function(t){if(t){var n=this.getCombos(),a=n.indexOf(t);return a>-1?(n.splice(a,1),!0):!1}},e.prototype.removeNode=function(t){if(t){var n=this.getNodes(),a=n.indexOf(t);return a>-1?(n.splice(a,1),!0):!1}},e.prototype.getUpdateType=function(t){},e.prototype.getBBox=function(){this.set(m_,null);var t=this.calculateCanvasBBox();return t},e.prototype.clearCache=function(){this.set(y_,null),this.set(m_,null),this.set(w_,null)},e.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),n=this.get("group");t&&n.stopAnimate(),n.shapeMap={},this.clearCache(),this.set(Gh,null),this.set("bbox",null),n.remove(),this._cfg=null,this.destroyed=!0}},e}(EB),zh="node",Kh="edge",B_="vedge",Rf="combo",qW="default",E_="Mapper",vo="stateStyles",JW=function(){function r(e){var t=this;this.edgeToBeUpdateMap={},this.throttleRefresh=jl(function(n){var a=t.graph;if(!(!a||a.get("destroyed"))){var i=t.edgeToBeUpdateMap;if(i){var o=Object.values(i);o.length&&(o.forEach(function(A){var s=A.edge;if(!(!s||s.destroyed)){var u=s.getSource(),f=s.getTarget();!u||u.destroyed||!f||f.destroyed||s.refresh(A.updateType)}}),t.edgeToBeUpdateMap={})}}},16,{trailing:!0,leading:!0}),this.graph=e,this.destroyed=!1}return r.prototype.addItem=function(e,t){var n=this.graph,a=e===B_?Kh:e,i=n.get("".concat(a,"Group"))||n.get("group"),o=$u(a),A=null,s=n.get(a+$u(vo))||{},u=n.get(qW+o);t[vo]&&(s=t[vo]),u&&ye(u,function(E,b){On(E)&&!yt(E)?t[b]=br({},E,t[b]):yt(E)?t[b]=t[b]||Xt(u[b]):t[b]=t[b]||u[b]});var f=n.get(a+E_);if(f){var l=f(t);l[vo]&&(s=l[vo],delete l[vo]),ye(l,function(E,b){On(E)&&!yt(E)?t[b]=br({},t[b],E):t[b]=l[b]||t[b]})}if(n.emit("beforeadditem",{type:e,model:t}),e===Kh||e===B_){var c=void 0,h=void 0;if(c=t.source,h=t.target,c&&Oe(c)&&(c=n.findById(c)),h&&Oe(h)&&(h=n.findById(h)),!c||!h){console.warn("The source or target node of edge ".concat(t.id," does not exist!"));return}c.getType&&c.getType()==="combo"&&(t.isComboEdge=!0),h.getType&&h.getType()==="combo"&&(t.isComboEdge=!0),A=new dO({model:t,source:c,target:h,styles:s,linkCenter:n.get("linkCenter"),group:i.addGroup()})}else if(e===zh)A=new EB({model:t,styles:s,group:i.addGroup()});else if(e===Rf){var d=t.children,v=rv(d,n),g=void 0,p=void 0;if(isNaN(v.x)?isNaN(t.x)&&(g=Math.random()*100):g=v.x,isNaN(v.y)?isNaN(t.y)&&(p=Math.random()*100):p=v.y,isNaN(t.x)||isNaN(t.y))t.x=g,t.y=p;else{var y=t.x-g,m=t.y-p;this.updateComboSucceeds(t.id,y,m,d)}var w=i.addGroup();w.setZIndex(t.depth),A=new vO({model:t,styles:s,animate:n.get("animate"),bbox:t.collapsed?rv([],n):v,group:w}),!t.collapsed&&A.getKeyShape().get("type")==="circle"&&(v.width=Math.hypot(v.height,v.width),v.height=v.width,A.set("bbox",v),A.refresh());var B=A.getModel();(d||[]).forEach(function(E){var b=n.findById(E.id);A.addChild(b),E.depth=B.depth+2})}if(A)return A.setOptimize(n.getNodes().length>n.get("optimizeThreshold")),n.get("".concat(e,"s")).push(A),n.get("itemMap")[A.get("id")]=A,n.emit("afteradditem",{item:A,model:t}),A},r.prototype.updateItem=function(e,t){var n=this,a,i,o=this.graph;if(Oe(e)&&(e=o.findById(e)),!(!e||e.destroyed)){var A="";e.getType&&(A=e.getType());var s=o.get(A+E_),u=e.getModel(),f=u.x,l=u.y,c=e.getUpdateType(t);if(s){var h=br({},u,t),d=s(h),v=br({},u,d,t);d[vo]&&(e.set("styles",v[vo]),delete v[vo]),ye(v,function(x,M){t[M]=x})}else ye(t,function(x,M){u[M]&&On(x)&&!yt(x)&&(t[M]=P(P({},u[M]),t[M]))});if(o.emit("beforeupdateitem",{item:e,cfg:t}),A===Kh){if(t.source){var g=t.source;Oe(g)&&(g=o.findById(g)),e.setSource(g)}if(t.target){var p=t.target;Oe(p)&&(p=o.findById(p)),e.setTarget(p)}e.update(t)}else if(A===zh){e.update(t,c);var y=e.getEdges();c==="move"?ye(y,function(x){n.edgeToBeUpdateMap[x.getID()]={edge:x,updateType:c},n.throttleRefresh()}):c!=null&&c.includes("bbox")&&ye(y,function(x){x.refresh(c)})}else if(A===Rf){if(e.update(t,c),!isNaN(t.x)||!isNaN(t.y)){var m=t.x-f||0,w=t.y-l||0;this.updateComboSucceeds(u.id,m,w)}var B=e.getEdges(),E=(c==null?void 0:c.includes("bbox"))||c==="move";if(E&&A===Rf){var b=e.get("shapeFactory"),C=u.type||"circle",_=u.animate===void 0||t.animate===void 0?(i=(a=b[C])===null||a===void 0?void 0:a.options)===null||i===void 0?void 0:i.animate:u.animate||t.animate;_?setTimeout(function(){if(!(!e||e.destroyed)){var x=e.getKeyShape();!x||x.destroyed||ye(B,function(M){M&&!M.destroyed&&M.refresh()})}},201):ye(B,function(x){x.refresh()})}}e.setOptimize(o.getNodes().length>o.get("optimizeThreshold")),o.emit("afterupdateitem",{item:e,cfg:t})}},r.prototype.updateCombo=function(e,t,n){var a=this,i,o,A=this.graph;if(Oe(e)&&(e=A.findById(e)),!(!e||e.destroyed)){var s=e.getModel(),u=rv(t,A,e),f=u.x,l=u.y;e.set("bbox",u);var c=f,h=l;n?(c=isNaN(s.x)?f:s.x,h=isNaN(s.y)?l:s.y):(c=isNaN(f)?s.x:f,h=isNaN(l)?s.y:l),e.update({x:c,y:h});var d=e.get("shapeFactory"),v=s.type||"circle",g=s.animate===void 0?(o=(i=d[v])===null||i===void 0?void 0:i.options)===null||o===void 0?void 0:o.animate:s.animate;g?setTimeout(function(){if(!(!e||e.destroyed)){var p=e.getKeyShape();!p||p.destroyed||(e.getShapeCfg(s),a.updateComboEdges(e))}},201):this.updateComboEdges(e)}},r.prototype.updateComboEdges=function(e){for(var t,n,a=e.getEdges()||[],i=0;i<a.length;i++){var o=a[i];!(o!=null&&o.destroyed)&&!(!((t=o==null?void 0:o.getSource())===null||t===void 0)&&t.destroyed)&&!(!((n=o==null?void 0:o.getTarget())===null||n===void 0)&&n.destroyed)&&o.refresh()}},r.prototype.collapseCombo=function(e,t){t===void 0&&(t=!0);var n=this.graph;Oe(e)&&(e=n.findById(e));var a=e.getChildren();a.nodes.forEach(function(i){n.hideItem(i,t)}),a.combos.forEach(function(i){n.hideItem(i,t)})},r.prototype.updateComboSucceeds=function(e,t,n,a){var i=this;a===void 0&&(a=[]);var o=this.graph;if(!(!t&&!n)){var A=a;if(!(A!=null&&A.length)){var s=o.get("comboTrees");s==null||s.forEach(function(u){$n(u,function(f){return f.id===e?(A=f.children,!1):!0})})}A==null||A.forEach(function(u){var f=o.findById(u.id);if(f){var l=f.getModel();i.updateItem(u.id,{x:(l.x||0)+t,y:(l.y||0)+n})}})}},r.prototype.expandCombo=function(e,t){t===void 0&&(t=!0);var n=this.graph;Oe(e)&&(e=n.findById(e));var a=e.getChildren(),i=new Set;a.nodes.forEach(function(o){n.showItem(o,t),o.getEdges().forEach(function(A){return i.add(A)})}),a.combos.forEach(function(o){o.getModel().collapsed?o.show():n.showItem(o,t),o.getEdges().forEach(function(A){return i.add(A)})}),i.forEach(function(o){return o.refresh()})},r.prototype.removeItem=function(e){var t=this,n=this.graph;if(Oe(e)&&(e=n.findById(e)),!(!e||e.destroyed)){var a=Xt(e.getModel()),i="";e.getType&&(i=e.getType()),n.emit("beforeremoveitem",{item:a,type:i});var o=n.get("".concat(i,"s")),A=o.indexOf(e);if(A>-1&&o.splice(A,1),i===Kh){var s=n.get("v".concat(i,"s")),u=s.indexOf(e);u>-1&&s.splice(u,1)}var f=e.get("id"),l=n.get("itemMap");delete l[f];var c=n.get("comboTrees"),h=e.get("id");if(i===zh){var d=e.getModel().comboId;if(c&&d){var v=c,g=!1;c.forEach(function(E){g||$n(E,function(b){if(b.id===h&&v){var C=v.indexOf(b);return v.splice(C,1),g=!0,!1}return v=b.children,!0})})}for(var p=e.getEdges(),y=p.length-1;y>=0;y--)n.removeItem(p[y],!1);d&&n.updateCombo(d)}else if(i===Rf){var m=e.getModel().parentId,w,B=!1;(c||[]).forEach(function(b){B||$n(b,function(C){return C.id===h?(w=C,B=!0,!1):!0})}),w.removed=!0,w&&w.children&&w.children.forEach(function(b){t.removeItem(b.id)});for(var p=e.getEdges(),y=p.length;y>=0;y--)n.removeItem(p[y],!1);m&&n.updateCombo(m)}e.destroy(),n.emit("afterremoveitem",{item:a,type:i})}},r.prototype.setItemState=function(e,t,n){var a=this.graph,i=t;Oe(n)&&(i="".concat(t,":").concat(n)),!(e.hasState(i)===n&&n||Oe(n)&&e.hasState(i))&&(a.emit("beforeitemstatechange",{item:e,state:i,enabled:n}),e.setState(t,n),a.autoPaint(),a.emit("afteritemstatechange",{item:e,state:i,enabled:n}))},r.prototype.priorityState=function(e,t){var n=this.graph,a=e;Oe(e)&&(a=n.findById(e)),this.setItemState(a,t,!1),this.setItemState(a,t,!0)},r.prototype.clearItemStates=function(e,t){var n=this.graph;Oe(e)&&(e=n.findById(e)),n.emit("beforeitemstatesclear",{item:e,states:t}),e.clearStates(t),n.emit("afteritemstatesclear",{item:e,states:t})},r.prototype.refreshItem=function(e){var t=this.graph;Oe(e)&&(e=t.findById(e)),t.emit("beforeitemrefresh",{item:e}),e.refresh(),t.emit("afteritemrefresh",{item:e})},r.prototype.addCombos=function(e,t){var n=this,a=this.graph;(e||[]).forEach(function(o){Oi(o,function(A){var s;return t.forEach(function(u){u.id===A.id&&(u.children=A.children,u.depth=A.depth,s=u)}),s&&n.addItem("combo",s),!0})});var i=a.get("comboGroup");i&&i.sort()},r.prototype.changeItemVisibility=function(e,t){var n=this,a=this.graph;if(Oe(e)&&(e=a.findById(e)),!e){console.warn("The item to be shown or hidden does not exist!");return}if(a.emit("beforeitemvisibilitychange",{item:e,visible:t}),e.changeVisibility(t),e.getType&&e.getType()===zh){var i=e.getEdges();ye(i,function(f){t&&!(f.get("source").isVisible()&&f.get("target").isVisible())||n.changeItemVisibility(f,t)})}else if(e.getType&&e.getType()===Rf){var o=a.get("comboTrees"),A=e.get("id"),s=[],u=!1;(o||[]).forEach(function(l){u||!l.children||l.children.length===0||$n(l,function(c){return c.id===A?(s=c.children,u=!0,!1):!0})}),s&&(!t||t&&!e.getModel().collapsed)&&s.forEach(function(l){var c=a.findById(l.id);n.changeItemVisibility(c,t)});var i=e.getEdges();ye(i,function(l){t&&!(l.get("source").isVisible()&&l.get("target").isVisible())||n.changeItemVisibility(l,t)})}return a.emit("afteritemvisibilitychange",{item:e,visible:t}),e},r.prototype.destroy=function(){this.graph=null,this.destroyed=!0},r}(),eV=function(){function r(e){this.graph=e,this.destroyed=!1}return r.prototype.updateState=function(e,t,n){var a=this.graph.get("states"),i=t;Oe(n)&&(i="".concat(t,":").concat(n)),a[i]||(a[i]=[]),n?a[i].push(e):a[i]=a[i].filter(function(o){return o!==e}),this.graph.set("states",a),this.graph.emit("graphstatechange",{states:a})},r.prototype.updateStates=function(e,t,n){var a=this.graph.get("states"),i=Oe(t)?[t]:t;i.forEach(function(o){var A=o;a[A]||(a[A]=[]),Oe(n)&&(A="".concat(o,":").concat(n)),n?a[A].push(e):a[A]=a[A].filter(function(s){return s!==e})}),this.graph.set("states",a),this.graph.emit("graphstatechange",{states:t})},r.prototype.destroy=function(){this.graph=null,this.destroyed=!0},r}(),tV=function(e,t){return!e||!t?e:e.replace(/\\?\{([^{}]+)\}/g,function(n,a){if(n.charAt(0)==="\\")return n.slice(1);var i=t[a];return i===0&&(i="0"),i||""})},gO=function(e){var t=[];if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));for(var n=0,a=e;n<a.length;n++){var i=a[n],o=i.x,A=i.y;t.push(o),t.push(A)}var s=rO(t);return s.unshift(["M",e[0].x,e[0].y]),s},Rv=function(e,t,n,a){n===void 0&&(n=0),a===void 0&&(a=0);var i={x:(1-n)*e.x+n*t.x,y:(1-n)*e.y+n*t.y},o=[0,0];mA(o,[t.x-e.x,t.y-e.y]),(!o||!o[0]&&!o[1])&&(o=[0,0]);var A=[-o[1]*a,o[0]*a];return i.x+=A[0],i.y+=A[1],i},rV=function(e,t){var n=e.length;if(!n)return"";for(var a="",i="",o=0;o<n;o++){var A=e[o];o===0?i="M{x} {y}":i="L{x} {y}",a+=tV(i,A)}return t&&(a+="Z"),a},r1=function(e){var t=[];return e.forEach(function(n){var a=n[0];if(a!=="A")for(var i=1;i<n.length;i=i+2)t.push([n[i],n[i+1]]);else{var o=n.length;t.push([n[o-2],n[o-1]])}}),t},n1=function(e){if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));var t=e[0],n=e[1],a=e[e.length-1],i=e[e.length-2];e.unshift(a),e.unshift(i),e.push(t),e.push(n);for(var o=[],A=1;A<e.length-2;A+=1){var s=e[A-1].x,u=e[A-1].y,f=e[A].x,l=e[A].y,c=e[A+1].x,h=e[A+1].y,d=A!==e.length-2?e[A+2].x:c,v=A!==e.length-2?e[A+2].y:h,g=f+(c-s)/6,p=l+(h-u)/6,y=c-(d-f)/6,m=h-(v-l)/6;o.push(["C",g,p,y,m,c,h])}return o.unshift(["M",a.x,a.y]),o},b_=function(e,t){return Wn([0,0],mA([0,0],e),t)},x_=function(e,t){var n=[e[1]-t[1],t[0]-e[0]],a=Math.sqrt(n[0]*n[0]+n[1]*n[1]);if(a===0)throw new Error("p0 should not be equal to p1");return[n[0]/a,n[1]/a]},C_=function(e,t){return[t[0]-e[0],t[1]-e[1]]};function a1(r,e){var t=function(l){var c=[l[0][0],l[0][1]-e],h=[l[0][0],l[0][1]+e];return"M ".concat(c," A ").concat(e,",").concat(e,",0,0,0,").concat(h," A ").concat(e,",").concat(e,",0,0,0,").concat(c)},n=function(l){var c=Wn([0,0],x_(l[0],l[1]),e),h=Wn([0,0],c,-1),d=Tn([0,0],l[0],c),v=Tn([0,0],l[1],c),g=Tn([0,0],l[1],h),p=Tn([0,0],l[0],h);return"M ".concat(d," L ").concat(v," A ").concat([e,e,"0,0,0",g].join(",")," L ").concat(p," A ").concat([e,e,"0,0,0",d].join(","))};if(!r||r.length<1)return"";if(r.length===1)return t(r);if(r.length===2)return n(r);for(var a=new Array(r.length),i=0;i<a.length;++i){var o=i===0?r[r.length-1]:r[i-1],A=r[i],s=Wn([0,0],x_(o,A),e);a[i]=[Tn([0,0],o,s),Tn([0,0],A,s)]}var u="A ".concat([e,e,"0,0,0,"].join(","));return a=a.map(function(f,l){var c="";return l===0&&(c="M ".concat(a[a.length-1][1]," ")),c+="".concat(u+f[0]," L ").concat(f[1]),c}),a.join(" ")}function pO(r,e){var t=r.length,n=function(f){var l=[f[0][0],f[0][1]-e],c=[f[0][0],f[0][1]+e];return"M ".concat(l," A ").concat([e,e,"0,0,0",c].join(",")," A ").concat([e,e,"0,0,0",l].join(","))},a=function(f){var l=C_(f[0],f[1]),c=b_(l,e),h=Tn([0,0],f[0],Wn([0,0],c,-1)),d=Tn([0,0],f[1],c),v=1.2*e,g=b_(mA([0,0],l),v),p=Wn([0,0],g,-1),y=Tn([0,0],h,p),m=Tn([0,0],d,p),w=Tn([0,0],h,g);return"M ".concat(h," C ").concat([y,m,d].join(",")," S ").concat([w,h].join(",")," Z")};if(!r||t<1)return"";if(t===1)return n(r);if(t===2)return a(r);for(var i=r.map(function(u,f){var l=r[(f+1)%t];return{p:u,v:mA([0,0],C_(u,l))}}),o=0;o<i.length;++o){var A=o>0?o-1:t-1,s=mA([0,0],Tn([0,0],i[A].v,Wn([0,0],i[o].v,-1)));i[o].p=Tn([0,0],i[o].p,Wn([0,0],s,e))}return i.map(function(u){var f=u.p;return{x:f[0],y:f[1]}})}var nV=function(e,t){for(var n=[],a=0;a<5;a++){var i=Math.cos((18+72*a)/180*Math.PI)*e,o=Math.sin((18+72*a)/180*Math.PI)*e,A=Math.cos((54+72*a)/180*Math.PI)*t,s=Math.sin((54+72*a)/180*Math.PI)*t;a===0?n.push(["M",i,-o]):n.push(["L",i,-o]),n.push(["L",A,-s])}return n.push(["Z"]),n};const aV=Object.freeze(Object.defineProperty({__proto__:null,getClosedSpline:n1,getControlPoint:Rv,getSpline:gO,getStarPath:nV,paddedHull:pO,pathToPoints:r1,pointsToPolygon:rV,roundedHull:a1},Symbol.toStringTag,{value:"Module"}));var __=function(e,t,n){return(e.y-n.y)*(t.x-n.x)-(e.x-n.x)*(t.y-n.y)},S_=function(e){var t=e.map(function(l){return{x:l.getModel().x,y:l.getModel().y}});t.sort(function(l,c){return l.x===c.x?l.y-c.y:l.x-c.x});for(var n={},a=t.length-1;a>=0;a--){var i=t[a],o=i.x,A=i.y;n["".concat(o,"-").concat(A)]&&t.splice(a,1),n["".concat(o,"-").concat(A)]=!0}if(t.length===1)return t;for(var s=[],a=0;a<t.length;a++){for(;s.length>=2&&__(s[s.length-2],s[s.length-1],t[a])<=0;)s.pop();s.push(t[a])}for(var u=[],a=t.length-1;a>=0;a--){for(;u.length>=2&&__(u[u.length-2],u[u.length-1],t[a])<=0;)u.pop();u.push(t[a])}u.pop(),s.pop();var f=s.concat(u);return f},iV={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function oV(r,e,t){var n=!1,a=function(s,u){return e.cells[s+u*e.width]},i=function(s,u){var f=0;return a(s-1,u-1)>=t&&(f+=1),a(s,u-1)>t&&(f+=2),a(s-1,u)>t&&(f+=4),a(s,u)>t&&(f+=8),f},o=function(s,u){for(var f=s,l=u,c,h,d=0;d<e.width*e.height;d++){if(c=f,h=l,r.findIndex(function(g){return g.x===f&&g.y===l})>-1){if(!(r[0].x!==f||r[0].y!==l))return!0}else r.push({x:f,y:l});var v=i(f,l);switch(v){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:f++;break;case 12:case 14:case 4:f--;break;case 6:c===0&&(h===-1?f-=1:f+=1);break;case 1:case 13:case 5:l--;break;case 9:c===1&&(h===0?l-=1:l+=1);break;case 10:case 8:case 11:l++;break;default:return console.warn("Marching squares invalid state: ".concat(v)),!0}}};this.march=function(){for(var A=0;A<e.width&&!n;A+=1)for(var s=0;s<e.height&&!n;s+=1)a(A,s)>t&&i(A,s)!==15&&(n=o(A,s));return n}}var AV=function(e,t,n){var a=Math.ceil(e/n),i=Math.ceil(t/n),o=new Float32Array(Math.max(0,a*i)).fill(0);return{cells:o,width:a,height:i}},sV=function(e,t,n){var a=null,i=Number.POSITIVE_INFINITY;return t.forEach(function(o){var A={x:e.getModel().x,y:e.getModel().y},s={x:o.getModel().x,y:o.getModel().y},u=Dv(A,s),f=new Ms(A.x,A.y,s.x,s.y),l=n.reduce(function(c,h){return cB(h,f)>0?c+1:c},0);u*Math.pow(l+1,2)<i&&(a=o,i=u*Math.pow(l+1,2))}),a},yO=function(e,t){var n=Number.POSITIVE_INFINITY,a=null;return e.forEach(function(i){var o=cB(i,t);o>=0&&o<n&&(a=i,n=o)}),a},uV=function(e,t,n,a){var i=[],o=[];o.push(e);for(var A=!0,s=0,u=function(h,d){var v=!1;return d.forEach(function(g){v||(Tm(h,{x:g.x1,y:g.y1})||Tm(h,{x:g.x2,y:g.y2}))&&(v=!0)}),v},f=function(h,d){for(var v=0,g=d;v<g.length;v++){var p=g[v],y=p.getBBox(),m=[[y.x,y.y],[y.x+y.width,y.y],[y.x,y.y+y.height],[y.x+y.width,y.y+y.height]];if(Vl(m,h.x,h.y))return!0}return!1};A&&s<n;){A=!1;for(var l=function(){var h=o.pop(),d=yO(t,h);if(d){var v=aD(d,h),g=v[0],p=v[1];if(p===2){var y=function(w){for(var B=a,E=M_(d,B,g,w),b=u(E,o)||u(E,i),C=f(E,t);!b&&C&&B>=1;)B/=1.5,E=M_(d,B,g,w),b=u(E,o)||u(E,i),C=f(E,t);E&&!b&&(!w||!C)&&(o.push(new Ms(h.x1,h.y1,E.x,E.y)),o.push(new Ms(E.x,E.y,h.x2,h.y2)),A=!0)};y(!0),A||y(!1)}}A||i.push(h),s+=1};!A&&o.length;)l()}for(;o.length;)i.push(o.pop());return i};function fV(r,e,t,n,a){var i=sV(r,t,e);if(i===null)return[];var o=function(l){for(var c=[];l.length>0;){var h=l.pop();if(l.length===0){c.push(h);break}var d=l.pop(),v=new Ms(h.x1,h.y1,d.x2,d.y2),g=yO(e,v);g?(c.push(h),l.push(d)):l.push(v)}return c},A=new Ms(r.getModel().x,r.getModel().y,i.getModel().x,i.getModel().y),s=uV(A,e,n,a),u=o(s);return u}var lV=function(e,t,n){var a=Object.assign(iV,n),i=iD(e.map(function(y){return{x:y.getModel().x,y:y.getModel().y}}));e=e.sort(function(y,m){return Dv({x:y.getModel().x,y:y.getModel().y},i)-Dv({x:m.getModel().x,y:m.getModel().y},i)});var o=[],A=[];e.forEach(function(y){var m=fV(y,t,o,a.maxRoutingIterations,a.morphBuffer);m.forEach(function(w){A.push(w)}),o.push(y)});for(var s=cV(e,A,a.nodeR0),u=AV(s.width,s.height,a.pixelGroupSize),f=[],l=[],c=0;c<a.maxMarchingIterations;c++)if(hV(e,t,A,s,u,a),f=[],l=[],!!new oV(f,u,a.threshold).march()){var h=f.map(function(y){return{x:Math.round(y.x*a.pixelGroupSize+s.minX),y:Math.round(y.y*a.pixelGroupSize+s.minY)}});if(h){var d=h.length;if(a.skip>1)for(d=Math.floor(h.length/a.skip);d<3&&a.skip>1;)a.skip-=1,d=Math.floor(h.length/a.skip);for(var v=0,g=0;g<d;g+=1,v+=a.skip)l.push({x:h[v].x,y:h[v].y})}var p=function(){for(var m=0,w=e;m<w.length;m++){var B=w[m],E=l.map(function(b){return[b.x,b.y]});if(!Vl(E,B.getBBox().centerX,B.getBBox().centerY))return!1}return!0};if(l&&p())return l;if(a.threshold*=.9,c<=a.maxMarchingIterations*.5)a.memberInfluenceFactor*=1.2,a.edgeInfluenceFactor*=1.2;else if(a.nonMemberInfluenceFactor!==0&&t.length>0)a.nonMemberInfluenceFactor*=.8;else break}return l};function cV(r,e,t){var n={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},a=[];r.forEach(function(s){a.push(s.getBBox())}),e.forEach(function(s){a.push(s.getBBox())});for(var i=0,o=a;i<o.length;i++){var A=o[i];n.minX=(A.minX<n.minX?A.minX:n.minX)-t,n.minY=(A.minY<n.minY?A.minY:n.minY)-t,n.maxX=(A.maxX>n.maxX?A.maxX:n.maxX)+t,n.maxY=(A.maxY>n.maxY?A.maxY:n.maxY)+t}return n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.x=n.minX,n.y=n.minY,n}function hV(r,e,t,n,a,i){function o(h,d){var v=Math.floor((h-d)/i.pixelGroupSize);return v<0?0:v}function A(h,d){return h*i.pixelGroupSize+d}var s=(i.nodeR0-i.nodeR1)*(i.nodeR0-i.nodeR1),u=(i.edgeR0-i.edgeR1)*(i.edgeR0-i.edgeR1),f=function(d,v){var g=Math.min(o(d.minX,v+n.minX),a.width),p=Math.min(o(d.minY,v+n.minY),a.height),y=Math.min(o(d.maxX,-v+n.minX),a.width),m=Math.min(o(d.maxY,-v+n.minY),a.height);return[g,p,y,m]},l=function(d,v){for(var g=d.getBBox(),p=f(g,i.nodeR1),y=p[0],m=p[1],w=p[2],B=p[3],E=m;E<B;E+=1)for(var b=y;b<w;b+=1)if(!(v<0&&a[b+E*a.width]<=0)){var C=A(b,n.minX),_=A(E,n.minY),x=AD({x:C,y:_},{x:g.minX,y:g.minY,width:g.width,height:g.height});if(x<Math.pow(i.nodeR1,2)){var M=Math.sqrt(x)-i.nodeR1;a.cells[b+E*a.width]+=v*M*M}}},c=function(d,v){for(var g=d.getBBox(),p=f(g,i.edgeR1),y=p[0],m=p[1],w=p[2],B=p[3],E=m;E<B;E+=1)for(var b=y;b<w;b+=1)if(!(v<0&&a.cells[b+E*a.width]<=0)){var C=A(b,n.minX),_=A(E,n.minY),x=oD({x:C,y:_},d);if(x<Math.pow(i.edgeR1,2)){var M=Math.sqrt(x)-i.edgeR1;a.cells[b+E*a.width]+=v*M*M}}};i.nodeInfluenceFactor&&r.forEach(function(h){l(h,i.nodeInfluenceFactor/s)}),i.edgeInfluenceFactor&&t.forEach(function(h){c(h,i.edgeInfluenceFactor/u)}),i.negativeNodeInfluenceFactor&&e.forEach(function(h){l(h,i.negativeNodeInfluenceFactor/s)})}function M_(r,e,t,n){var a=r.getBBox(),i=t[0],o=t[1],A=t[2],s=t[3],u={topLeft:{x:a.minX-e,y:a.minY-e},topRight:{x:a.maxX+e,y:a.minY-e},bottomLeft:{x:a.minX-e,y:a.maxY+e},bottomRight:{x:a.maxX+e,y:a.maxY+e}},f=a.height*a.width;function l(d,v){return a.width*((d.y-a.minY+(v.y-a.minY))*.5)}if(o){if(i)return n?u.topLeft:u.bottomRight;if(A)return n?u.bottomLeft:u.topRight;var c=l(o,s);return c<f*.5?o.y>s.y?n?u.topLeft:u.bottomRight:n?u.topRight:u.bottomLeft:o.y<s.y?n?u.bottomLeft:u.topRight:n?u.bottomRight:u.topLeft}if(s){if(i)return n?u.topRight:u.bottomLeft;if(A)return n?u.bottomRight:u.topLeft}var h=l(i,A);return h<f*.5?i.x>A.x?n?u.topLeft:u.bottomRight:n?u.bottomLeft:u.topRight:i.x<A.x?n?u.topRight:u.bottomLeft:n?u.bottomRight:u.topLeft}var mO=function(){function r(e,t){this.cfg=br(this.getDefaultCfg(),t),this.graph=e,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(n){return Oe(n)?e.findById(n):n}),this.nonMembers=this.cfg.nonMembers.map(function(n){return Oe(n)?e.findById(n):n}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return r.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},r.prototype.setPadding=function(){var e=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+e:10+e,this.cfg.bubbleCfg={nodeR0:this.padding-e,nodeR1:this.padding-e,morphBuffer:this.padding-e}},r.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},r.prototype.calcPath=function(e,t){var n,a,i;switch(this.type){case"round-convex":n=S_(e),i=a1(n.map(function(o){return[o.x,o.y]}),this.padding),a=Zm(i);break;case"smooth-convex":n=S_(e),n.length===2?(i=a1(n.map(function(o){return[o.x,o.y]}),this.padding),a=Zm(i)):n.length>2&&(i=pO(n.map(function(o){return[o.x,o.y]}),this.padding),a=n1(i));break;case"bubble":n=lV(e,t,this.cfg.bubbleCfg),a=n.length>=2&&n1(n);break}return a},r.prototype.render=function(){this.group.addShape("path",{attrs:P({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},r.prototype.addMember=function(e){if(e){Oe(e)&&(e=this.graph.findById(e)),this.members.push(e);var t=this.nonMembers.indexOf(e);return t>-1&&this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},r.prototype.addNonMember=function(e){if(e){Oe(e)&&(e=this.graph.findById(e)),this.nonMembers.push(e);var t=this.members.indexOf(e);return t>-1&&this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},r.prototype.removeMember=function(e){if(e){Oe(e)&&(e=this.graph.findById(e));var t=this.members.indexOf(e);return t>-1?(this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},r.prototype.removeNonMember=function(e){if(e){Oe(e)&&(e=this.graph.findById(e));var t=this.nonMembers.indexOf(e);return t>-1?(this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},r.prototype.updateData=function(e,t){var n=this;this.group.findById(this.id).remove(),e&&(this.members=e.map(function(a){return Oe(a)?n.graph.findById(a):a})),t&&(this.nonMembers=t.map(function(a){return Oe(a)?n.graph.findById(a):a})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},r.prototype.updateStyle=function(e){var t=this.group.findById(this.id);t.attr(P({},e))},r.prototype.updateCfg=function(e){var t=this;this.cfg=br(this.cfg,e),this.id=this.cfg.id,this.group=this.cfg.group,e.members&&(this.members=this.cfg.members.map(function(n){return Oe(n)?t.graph.findById(n):n})),e.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(n){return Oe(n)?t.graph.findById(n):n})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},r.prototype.contain=function(e){var t=this,n;Oe(e)?n=this.graph.findById(e):n=e;var a,i=n.getKeyShape();if(n.get("type")==="path")a=r1(i.attr("path"));else{var o=i.getCanvasBBox();a=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return a=a.map(function(A){var s=t.graph.getPointByCanvas(A[0],A[1]);return[s.x,s.y]}),nD(a,r1(this.path))},r.prototype.destroy=function(){this.group.remove(),this.cfg=null},r}(),Hf=Xa,dV="node",wO=function(r){Lt(e,r);function e(t){var n=r.call(this)||this;return n.sortCombos=Bc(function(){var a=n.get("comboSorted");if(!(!n||n.destroyed||a)){n.set("comboSorted",!0);var i=[],o={},A=n.get("comboTrees");(A||[]).forEach(function(u){$n(u,function(f){return i[f.depth]?i[f.depth].push(f.id):i[f.depth]=[f.id],o[f.id]=f.depth,!0})});var s=n.getEdges().concat(n.get("vedges"));(s||[]).forEach(function(u){var f=u.getModel(),l=o[f.source]||0,c=o[f.target]||0,h=Math.max(l,c);i[h]?i[h].push(f.id):i[h]=[f.id]}),i.forEach(function(u){if(!(!u||!u.length))for(var f=u.length-1;f>=0;f--){var l=n.findById(u[f]);l&&l.toFront()}})}},500,!1),n.cfg=br(n.getDefaultCfg(),t),n.init(),n.animating=!1,n.destroyed=!1,n.cfg.enabledStack&&(n.undoStack=new Lu(n.cfg.maxStep),n.redoStack=new Lu(n.cfg.maxStep)),n}return e.prototype.init=function(){this.initCanvas();var t=new jW(this),n=new sj(this),a=new JW(this),i=new eV(this);this.set({viewController:t,modeController:n,itemController:a,stateController:i}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},e.prototype.initGroups=function(){var t=this.get("canvas");if(t){var n=t.get("el"),a=(n||{}).id,i=a===void 0?"g6":a,o=t.addGroup({id:"".concat(i,"-root"),className:ct.rootContainerClassName});if(this.get("groupByTypes")){var A=o.addGroup({id:"".concat(i,"-edge"),className:ct.edgeContainerClassName}),s=o.addGroup({id:"".concat(i,"-node"),className:ct.nodeContainerClassName}),u=o.addGroup({id:"".concat(i,"-combo"),className:ct.comboContainerClassName});u.toBack(),this.set({nodeGroup:s,edgeGroup:A,comboGroup:u})}var f=o.addGroup({id:"".concat(i,"-delegate"),className:ct.delegateContainerClassName});this.set({delegateGroup:f}),this.set("group",o)}},e.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},e.prototype.set=function(t,n){return Ln(t)?this.cfg=P(P({},this.cfg),t):this.cfg[t]=n,t==="enabledStack"&&n&&!this.undoStack&&!this.redoStack&&(this.undoStack=new Lu(this.cfg.maxStep),this.redoStack=new Lu(this.cfg.maxStep)),this},e.prototype.get=function(t){var n;return(n=this.cfg)===null||n===void 0?void 0:n[t]},e.prototype.getGroup=function(){return this.get("group")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.getMinZoom=function(){return this.get("minZoom")},e.prototype.setMinZoom=function(t){return this.set("minZoom",t)},e.prototype.getMaxZoom=function(){return this.get("maxZoom")},e.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},e.prototype.getWidth=function(){return this.get("width")},e.prototype.getHeight=function(){return this.get("height")},e.prototype.clearItemStates=function(t,n){Oe(t)&&(t=this.findById(t));var a=this.get("itemController");n||(n=t.get("states")),a.clearItemStates(t,n);var i=this.get("stateController");i.updateStates(t,n,!1)},e.prototype.node=function(t){typeof t=="function"&&this.set("nodeMapper",t)},e.prototype.edge=function(t){typeof t=="function"&&this.set("edgeMapper",t)},e.prototype.combo=function(t){typeof t=="function"&&this.set("comboMapper",t)},e.prototype.findById=function(t){return this.get("itemMap")[t]},e.prototype.find=function(t,n){var a,i=this.get("".concat(t,"s"));return ye(i,function(o,A){if(n(o,A))return a=o,a}),a},e.prototype.findAll=function(t,n){var a=[];return ye(this.get("".concat(t,"s")),function(i,o){n(i,o)&&a.push(i)}),a},e.prototype.findAllByState=function(t,n,a){return a?this.findAll(t,function(i){return i.hasState(n)&&a(i)}):this.findAll(t,function(i){return i.hasState(n)})},e.prototype.translate=function(t,n,a,i){var o=this,A=this.get("group"),s=Xt(A.getMatrix());if(s||(s=[1,0,0,0,1,0,0,0,1]),a){var u=Xl({animateCfg:i,callback:function(){return o.emit("viewportchange",{action:"translate",matrix:A.getMatrix()})}});Im(A,{x:A.getCanvasBBox().x+t,y:A.getCanvasBBox().y+n},a,u||{duration:500,easing:"easeCubic"})}else s=Hf(s,[["t",t,n]]),A.setMatrix(s),this.emit("viewportchange",{action:"translate",matrix:s}),this.autoPaint()},e.prototype.moveTo=function(t,n,a,i){var o=this.get("group");Im(o,{x:t,y:n},a,i||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:o.getMatrix()})},e.prototype.fitView=function(t,n,a,i){t&&this.set("fitViewPadding",t);var o=this.get("viewController");n?o.fitViewByRules(n,a,i):o.fitView(a,i),this.autoPaint()},e.prototype.fitCenter=function(t,n){var a=this.get("viewController");a.fitCenter(t,n),this.autoPaint()},e.prototype.addBehaviors=function(t,n){var a=this.get("modeController");return a.manipulateBehaviors(t,n,!0),this},e.prototype.removeBehaviors=function(t,n){var a=this.get("modeController");return a.manipulateBehaviors(t,n,!1),this},e.prototype.updateBehavior=function(t,n,a){var i=this.get("modeController");return i.updateBehavior(t,n,a),this},e.prototype.zoom=function(t,n,a,i){var o=this,A=this.get("group"),s=Xt(A.getMatrix())||[1,0,0,0,1,0,0,0,1],u=this.get("minZoom"),f=this.get("maxZoom"),l=this.getZoom()||1,c=l*t,h=t,d=!1;if(u&&c<u?(h=u/l,d=!0):f&&c>f&&(h=f/l,d=!0),n?s=Hf(s,[["t",-n.x,-n.y],["s",h,h],["t",n.x,n.y]]):s=Hf(s,[["s",h,h]]),a){var v=Xt(A.getMatrix());v||(v=[1,0,0,0,1,0,0,0,1]);var g=v[0],p=g*h,y=Xl({animateCfg:i,callback:function(){return o.emit("viewportchange",{action:"zoom",matrix:A.getMatrix()})}});A.animate(function(m){if(m===1)v=s;else{var w=hB(g,p,m)/v[0];n?v=Hf(v,[["t",-n.x,-n.y],["s",w,w],["t",n.x,n.y]]):v=Hf(v,[["s",w,w]])}return{matrix:v}},y)}else A.setMatrix(s),this.emit("viewportchange",{action:"zoom",matrix:s}),this.autoPaint();return!d},e.prototype.zoomTo=function(t,n,a,i){var o=t/this.getZoom();return this.zoom(o,n,a,i)},e.prototype.focusItem=function(t,n,a){var i=this.get("viewController"),o=!1;n?o=!0:n===void 0&&(o=this.get("animate"));var A={};a?A=a:a===void 0&&(A=this.get("animateCfg")),i.focus(t,o,A),this.autoPaint()},e.prototype.focusItems=function(t,n,a,i){var o=this.get("viewController");o.focusItems(t,n,a,i)},e.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},e.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},e.prototype.getPointByClient=function(t,n){var a=this.get("viewController");return a.getPointByClient(t,n)},e.prototype.getClientByPoint=function(t,n){var a=this.get("viewController");return a.getClientByPoint(t,n)},e.prototype.getPointByCanvas=function(t,n){var a=this.get("viewController");return a.getPointByCanvas(t,n)},e.prototype.getCanvasByPoint=function(t,n){var a=this.get("viewController");return a.getCanvasByPoint(t,n)},e.prototype.getGraphCenterPoint=function(){var t=this.get("group").getCanvasBBox();return{x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2}},e.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},e.prototype.showItem=function(t,n){n===void 0&&(n=!0);var a=this.get("itemController"),i=a.changeItemVisibility(t,!0);if(n&&this.get("enabledStack")){var o=i.getID(),A=i.getType(),s={},u={};switch(A){case"node":s.nodes=[{id:o,visible:!1}],u.nodes=[{id:o,visible:!0}];break;case"edge":s.nodes=[{id:o,visible:!1}],u.edges=[{id:o,visible:!0}];break;case"combo":s.nodes=[{id:o,visible:!1}],u.combos=[{id:o,visible:!0}];break}this.pushStack("visible",{before:s,after:u})}},e.prototype.hideItem=function(t,n){n===void 0&&(n=!0);var a=this.get("itemController"),i=a.changeItemVisibility(t,!1);if(n&&this.get("enabledStack")){var o=i.getID(),A=i.getType(),s={},u={};switch(A){case"node":s.nodes=[{id:o,visible:!0}],u.nodes=[{id:o,visible:!1}];break;case"edge":s.nodes=[{id:o,visible:!0}],u.edges=[{id:o,visible:!1}];break;case"combo":s.nodes=[{id:o,visible:!0}],u.combos=[{id:o,visible:!1}];break}this.pushStack("visible",{before:s,after:u})}},e.prototype.refreshItem=function(t){var n=this.get("itemController");n.refreshItem(t)},e.prototype.setAutoPaint=function(t){var n=this;n.set("autoPaint",t);var a=n.get("canvas");a.set("autoDraw",t)},e.prototype.remove=function(t,n){n===void 0&&(n=!0),this.removeItem(t,n)},e.prototype.removeItem=function(t,n){n===void 0&&(n=!0);var a=t;if(Oe(t)&&(a=this.findById(t)),!a&&Oe(t))console.warn("The item ".concat(t," to be removed does not exist!"));else if(a){var i="";if(a.getType&&(i=a.getType()),n&&this.get("enabledStack")){var o=P(P({},a.getModel()),{itemType:i}),A={};switch(i){case"node":{A.nodes=[o],A.edges=[];for(var s=a.getEdges(),u=s.length-1;u>=0;u--)A.edges.push(P(P({},s[u].getModel()),{itemType:"edge"}));break}case"edge":A.edges=[o];break;case"combo":A.combos=[o];break}this.pushStack("delete",{before:A,after:{}})}if(i==="node"){var f=a.getModel();f.comboId&&this.updateComboTree(a,void 0,!1)}var l=this.get("itemController");if(l.removeItem(a),i==="combo"){var c=Um(this.get("comboTrees"));this.set("comboTrees",c)}}},e.prototype.innerAddItem=function(t,n,a){if(!Aj(t,n))return!1;if(n.id&&this.findById(n.id)){console.warn("This item exists already. Be sure the id %c".concat(n.id,"%c is unique."),"font-size: 20px; color: red;","");return}var i,o=this.get("comboTrees")||[];if(t==="combo"){var A=this.get("itemMap"),s=!1;if(o.forEach(function(d){s||Oi(d,function(v){if(n.parentId===v.id){s=!0;var g=P({id:n.id,depth:v.depth+2},n);v.children?v.children.push(g):v.children=[g],n.depth=g.depth,i=a.addItem(t,n)}var p=A[v.id];return s&&p&&p.getType&&p.getType()==="combo"&&a.updateCombo(p,v.children),!0})}),!s){var u=P({id:n.id,depth:0},n);n.depth=u.depth,o.push(u),i=a.addItem(t,n)}this.set("comboTrees",o),n.collapsed&&(this.collapseCombo(i,!1),this.updateCombo(i))}else if(t==="node"&&Oe(n.comboId)&&o){var f=this.findById(n.comboId);f&&f.getType&&f.getType()!=="combo"&&console.warn("'".concat(n.comboId,"' is not a id of a combo in the graph, the node will be added without combo.")),i=a.addItem(t,n);var l=this.get("itemMap"),c=!1,h=!1;o.forEach(function(d){h||c||Oi(d,function(v){if(v.id===n.id)return h=!0,!1;if(n.comboId===v.id&&!h){c=!0;var g=Xt(n);g.itemType="node",v.children?v.children.push(g):v.children=[g],g.depth=v.depth+1}return c&&l[v.id].getType&&l[v.id].getType()==="combo"&&a.updateCombo(l[v.id],v.children),!0})})}else i=a.addItem(t,n);if(t==="node"&&n.comboId||t==="combo"&&n.parentId){var f=this.findById(n.comboId||n.parentId);f&&f.getType&&f.getType()==="combo"&&f.addChild(i)}return i},e.prototype.addItem=function(t,n,a,i){a===void 0&&(a=!0),i===void 0&&(i=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!i);var A=this.get("itemController"),s=this.innerAddItem(t,n,A);if(s===!1||s===!0)return s;var u=this.get("combos");if(u&&u.length>0&&this.sortCombos(),this.autoPaint(),a&&this.get("enabledStack")){var f=P(P({},s.getModel()),{itemType:t}),l={};switch(t){case"node":l.nodes=[f];break;case"edge":l.edges=[f];break;case"combo":l.combos=[f];break}this.pushStack("add",{before:{},after:l})}return s},e.prototype.addItems=function(t,n,a){t===void 0&&(t=[]),n===void 0&&(n=!0),a===void 0&&(a=!0);var i=this.get("comboSorted");this.set("comboSorted",i&&!a);for(var o=this.get("itemController"),A=[],s=0;s<t.length;s++){var u=t[s];u.type!=="edge"&&u.type!=="vedge"?A.push(this.innerAddItem(u.type,u.model,o)):A.push(void 0)}for(var s=0;s<t.length;s++){var u=t[s];(u.type==="edge"||u.type==="vedge")&&(A[s]=this.innerAddItem(u.type,u.model,o))}if(a){var f=this.get("combos");f&&f.length>0&&this.sortCombos()}if(this.autoPaint(),n&&this.get("enabledStack")){for(var l={nodes:[],edges:[],combos:[]},s=0;s<t.length;s++){var c=t[s].type,h=A[s];if(h&&h!==!0){var d=P(P({},h.getModel()),{itemType:c});switch(c){case"node":l.nodes.push(d);break;case"edge":l.edges.push(d);break;case"combo":l.combos.push(d);break}}}this.pushStack("addItems",{before:{},after:l})}return A},e.prototype.add=function(t,n,a,i){return a===void 0&&(a=!0),i===void 0&&(i=!0),this.addItem(t,n,a,i)},e.prototype.updateItem=function(t,n,a){var i=this;a===void 0&&(a=!0);var o=this.get("itemController"),A;Oe(t)?A=this.findById(t):A=t;var s=a&&this.get("enabledStack"),u;s&&(u=Xt(A.getModel()));var f="";A.getType&&(f=A.getType());var l=li([],A.getStates(),!0);if(f==="combo"&&ye(l,function(v){return i.setItemState(A,v,!1)}),o.updateItem(A,n),f==="combo"&&ye(l,function(v){return i.setItemState(A,v,!0)}),s){var c={nodes:[],edges:[],combos:[]},h={nodes:[],edges:[],combos:[]},d=P({id:u.id},n);switch(f){case"node":c.nodes.push(u),h.nodes.push(d);break;case"edge":c.edges.push(u),h.edges.push(d);break;case"combo":c.combos.push(u),h.combos.push(d);break}this.pushStack("update",{before:c,after:h})}},e.prototype.update=function(t,n,a){a===void 0&&(a=!0),this.updateItem(t,n,a)},e.prototype.setItemState=function(t,n,a){Oe(t)&&(t=this.findById(t));var i=this.get("itemController");i.setItemState(t,n,a);var o=this.get("stateController");o.updateState(t,n,a)},e.prototype.priorityState=function(t,n){var a=this.get("itemController");a.priorityState(t,n)},e.prototype.data=function(t){mC(t),this.set("data",t)},e.prototype.render=function(){var t=this;this.set("comboSorted",!1);var n=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!n)throw new Error("data must be defined first");var a=n.nodes,i=a===void 0?[]:a,o=n.edges,A=o===void 0?[]:o,s=n.combos,u=s===void 0?[]:s;if(this.clear(!0),this.emit("beforerender"),t.addItems(i.map(function(g){return{type:"node",model:g}}),!1,!1),(u==null?void 0:u.length)!==0){var f=Om(u,i);this.set("comboTrees",f),t.addCombos(u)}t.addItems(A.map(function(g){return{type:"edge",model:g}}),!1,!1);var l=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var c=t.get("layoutController");if(c){if(c.layout(h),this.destroyed)return}else h();function h(){(t.get("comboTrees")||[]).forEach(function(g){Oi(g,function(p){var y=t.findById(p.id);return y.getType()==="combo"&&p.collapsed&&(t.collapseCombo(p.id,!1),t.updateCombo(y)),!0})}),t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",l),setTimeout(function(){var g;(g=t.getCombos())===null||g===void 0||g.forEach(function(p){p.set("animate",!0)})},0)}if(!this.get("groupByTypes"))if(u&&u.length!==0)this.sortCombos();else if(n.nodes&&n.edges&&n.nodes.length<n.edges.length){var d=this.getNodes();d.forEach(function(g){g.toFront()})}else{var v=this.getEdges();v.forEach(function(g){g.toBack()})}},e.prototype.read=function(t){this.data(t),this.render()},e.prototype.diffItems=function(t,n,a){var i=this,o,A=this.get("itemMap");ye(a,function(s){if(o=A[s.id],o){if(i.get("animate")&&t===dV){var u=o.getContainer().getMatrix();u||(u=[1,0,0,0,1,0,0,0,1]),o.set("originAttrs",{x:u[6],y:u[7]})}i.updateItem(o,s,!1)}else o=i.addItem(t,s,!1);o&&n["".concat(t,"s")].push(o)})},e.prototype.changeData=function(t,n){var a=this,i;n===void 0&&(n=!0);var o=this,A=t||o.get("data");if(!mC(A))return this;this.emit("beforechangedata"),n&&this.get("enabledStack")&&this.pushStack("changedata",{before:o.save(),after:A}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(y){return o.clearItemStates(y)}),this.getEdges().map(function(y){return o.clearItemStates(y)});var s=this.get("canvas"),u=s.get("localRefresh");s.set("localRefresh",!1),o.get("data")||(o.data(A),o.render());var f=this.get("itemMap"),l={nodes:[],edges:[]},c=A.combos;if(c){var h=Om(c,A.nodes);this.set("comboTrees",h)}else this.set("comboTrees",[]);this.diffItems("node",l,A.nodes),ye(f,function(y,m){f[m].getModel().depth=0,!(y.getType&&y.getType()==="edge")&&(y.getType&&y.getType()==="combo"?(delete f[m],y.destroy()):l.nodes.indexOf(y)<0&&(delete f[m],o.remove(y,!1)))});for(var d=this.getCombos(),v=d.length,g=v-1;g>=0;g--)d[g].destroyed&&d.splice(g,1);c&&(o.addCombos(c),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",l,A.edges),ye(f,function(y,m){y.getType&&(y.getType()==="node"||y.getType()==="combo")||l.edges.indexOf(y)<0&&(delete f[m],o.remove(y,!1))}),(this.get("comboTrees")||[]).forEach(function(y){Oi(y,function(m){var w=a.findById(m.id);return w.getType()==="combo"&&m.collapsed&&a.collapseCombo(m.id,!1),!0})}),this.set({nodes:l.nodes,edges:l.edges});var p=this.get("layoutController");return p&&(p.changeData(function(){setTimeout(function(){var y;(y=o.getCombos())===null||y===void 0||y.forEach(function(m){m.set("animate",!0)})},0)}),o.get("animate")&&!p.getLayoutType()?(o.positionsAnimate(),(i=o.getCombos())===null||i===void 0||i.forEach(function(y){return y.set("animate",!0)})):o.autoPaint()),setTimeout(function(){s.set("localRefresh",u)},16),this.set("data",A),this.emit("afterchangedata"),this},e.prototype.addCombos=function(t){var n=this,a=n.get("comboTrees"),i=this.get("itemController");i.addCombos(a,t)},e.prototype.createCombo=function(t,n,a){var i=this;a===void 0&&(a=!0);var o=this.get("itemController");this.set("comboSorted",!1);var A="",s;if(t){if(Oe(t))A=t,s={id:t};else{if(A=t.id,!A){console.warn("Create combo failed. Please assign a unique string id for the adding combo.");return}s=t}var u=a&&this.get("enabledStack"),f={nodes:[],combos:[]};u&&n.forEach(function(p){var y=i.findById(p),m=y.getType();if(!(m!=="node"&&m!=="combo")){var w=y.getModel();f["".concat(m,"s")].push({id:p,parentId:m==="node"?w.comboId:w.parentId})}});var l=this.get("comboTrees"),c=new Set(n),h=new Map;l&&(l.forEach(function(p){Oi(p,function(y,m,w){if(c.has(y.id)){if(m){var B=i.findById(m.id),E=i.findById(y.id);m.children.splice(w,1),B.removeChild(E),o.updateCombo(B,m.children)}y.itemType==="combo"&&h.set(y.id,y)}return!0})}),l=l.filter(function(p){return!c.has(p.id)}),this.set("comboTrees",l));var d={nodes:[],combos:[]},v=n.map(function(p){var y=i.findById(p),m=y.getModel(),w="";y.getType&&(w=y.getType());var B=h.get(p)||{id:y.getID(),itemType:w};return w==="combo"?(B.parentId=A,m.parentId=A):w==="node"&&(B.comboId=A,m.comboId=A),u&&d["".concat(w,"s")].push({id:m.id,parentId:A}),B});s.children=v,this.addItem("combo",s,!1),this.set("comboSorted",!1),l&&(l.forEach(function(p){$n(p,function(y){return y.id===A?(y.itemType="combo",y.children=v,!1):!0})}),this.sortCombos()),u&&(d.combos.push(s),this.pushStack("createCombo",{before:f,after:d}));var g=this.findById(A);!g.getModel().parentId&&g.getChildren().combos.length&&this.updateComboTree(g,void 0,!1),setTimeout(function(){g.set("animate",!0)},0)}},e.prototype.uncombo=function(t,n){var a=this,i,o;n===void 0&&(n=!0);var A=this,s=t;if(Oe(t)&&(s=this.findById(t)),!s||s.getType&&s.getType()!=="combo"){console.warn("The item is not a combo!");return}var u=s.getModel(),f=s.getModel().parentId,l=A.get("comboTrees");l||(l=[]);var c=this.get("itemMap"),h=s.get("id"),d,v=[],g=this.get("combos"),p=this.findById(f),y=n&&this.get("enabledStack"),m={};if(y&&(m=Xt(u),m.children=[]),l.forEach(function(b){d||Oi(b,function(C){var _;if(C.id===h){d=C;var x=s.getEdges().map(function(I){return I.getID()});x.forEach(function(I){a.removeItem(I,!1)});var M=g.indexOf(s);g.splice(M,1),delete c[h];var S=Xt(s.getModel());s.destroy(),a.emit("afterremoveitem",{item:S,type:"combo"})}if(f&&d&&C.id===f){p.removeCombo(s),v=C.children;var M=v.indexOf(d);return M!==-1&&v.splice(M,1),(_=d.children)===null||_===void 0||_.forEach(function(D){var O=a.findById(D.id),F=O.getModel();O.getType&&O.getType()==="combo"?(D.parentId=f,delete D.comboId,F.parentId=f,delete F.comboId):O.getType&&O.getType()==="node"&&(D.comboId=f,F.comboId=f),p.addChild(O),v.push(D)}),a.updateCombo(p),!1}return!0})}),!f&&d){var w=l.indexOf(d);l.splice(w,1),(i=d.children)===null||i===void 0||i.forEach(function(b){b.parentId=void 0;var C=a.findById(b.id).getModel();delete C.parentId,delete C.comboId,b.itemType!=="node"&&l.push(b)})}if(y){var B={nodes:[],combos:[]},E={nodes:[],combos:[]};(o=d.children)===null||o===void 0||o.forEach(function(b){var C=a.findById(b.id),_=C.getType();_!=="node"&&_!=="combo"||(B["".concat(_,"s")].push({id:b.id,parentId:h}),E["".concat(_,"s")].push({id:b.id,parentId:f}))}),B.combos.push(m),this.pushStack("uncombo",{before:B,after:E})}},e.prototype.updateCombos=function(t){var n=this;t===void 0&&(t=!1);var a=this,i=this.get("comboTrees"),o=a.get("itemController"),A=a.get("itemMap");(i||[]).forEach(function(s){Oi(s,function(u){var f;if(!u)return!0;var l=A[u.id];if(((f=l==null?void 0:l.getType)===null||f===void 0?void 0:f.call(l))==="combo"){var c=li([],l.getStates(),!0);ye(c,function(h){return n.setItemState(l,h,!1)}),o.updateCombo(l,u.children,t),ye(c,function(h){return n.setItemState(l,h,!0)})}return!0})}),a.sortCombos()},e.prototype.updateCombo=function(t){var n=this,a=this,i=t,o;if(Oe(t)&&(i=this.findById(t)),!i||i.getType&&i.getType()!=="combo"){console.warn("The item to be updated is not a combo!");return}o=i.get("id");var A=this.get("comboTrees"),s=a.get("itemController"),u=a.get("itemMap");(A||[]).forEach(function(f){Oi(f,function(l){if(!l)return!0;var c=u[l.id];if(o===l.id&&c&&c.getType&&c.getType()==="combo"){var h=li([],c.getStates(),!0);ye(h,function(d){c.getStateStyle(d)&&n.setItemState(c,d,!1)}),s.updateCombo(c,l.children),ye(h,function(d){c.getStateStyle(d)&&n.setItemState(c,d,!0)}),o&&(o=l.parentId)}return!0})})},e.prototype.updateComboTree=function(t,n,a){a===void 0&&(a=!0);var i=this;this.set("comboSorted",!1);var o;Oe(t)?o=i.findById(t):o=t;var A=o.getModel(),s=A.comboId||A.parentId,u="";if(o.getType&&(u=o.getType()),n&&u==="combo"){var f=this.get("comboTrees"),l=!0,c;if((f||[]).forEach(function(y){c||$n(y,function(m){if(!c)return m.id===o.getID()&&(c=m),!0})}),$n(c,function(y){return y.id===n?(l=!1,!1):!0}),!l){console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");return}}if(a&&this.get("enabledStack")){var h={},d={};u==="combo"?(h.combos=[{id:A.id,parentId:A.parentId}],d.combos=[{id:A.id,parentId:n}]):u==="node"&&(h.nodes=[{id:A.id,parentId:A.comboId}],d.nodes=[{id:A.id,parentId:n}]),this.pushStack("updateComboTree",{before:h,after:d})}if(A.parentId||A.comboId){var v=this.findById(A.parentId||A.comboId);v&&v.removeChild(o)}if(u==="combo"?A.parentId=n:u==="node"&&(A.comboId=n),n){var g=this.findById(n);g&&g.addChild(o)}if(s){var g=this.findById(s);g&&g.removeChild(o)}var p=Um(this.get("comboTrees"),A.id,n);this.set("comboTrees",p),this.updateCombos()},e.prototype.save=function(){var t=[],n=[],a=[];return ye(this.get("nodes"),function(i){t.push(i.getModel())}),ye(this.get("edges"),function(i){n.push(i.getModel())}),ye(this.get("combos"),function(i){a.push(i.getModel())}),{nodes:t,edges:n,combos:a}},e.prototype.changeSize=function(t,n){var a=this.get("viewController");return a.changeSize(t,n),this},e.prototype.refresh=function(){var t=this;if(t.emit("beforegraphrefresh"),t.get("animate"))t.positionsAnimate();else{var n=t.get("nodes"),a=t.get("edges"),i=t.get("edges");ye(n,function(o){o.refresh()}),ye(a,function(o){o.refresh()}),ye(i,function(o){o.refresh()})}t.emit("aftergraphrefresh"),t.autoPaint()},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.getComboChildren=function(t){if(Oe(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo does not exist!");return}return t.getChildren()},e.prototype.positionsAnimate=function(t){var n=this;n.emit("beforeanimate");var a=n.get("animateCfg"),i=a.onFrame,o=t?n.getNodes().concat(n.getCombos()):n.getNodes(),A=o.map(function(u){var f=u.getModel();return{id:f.id,x:f.x,y:f.y}});n.stopAnimate();var s=n.get("canvas");n.animating=!0,setTimeout(function(){s.animate(function(u){ye(A,function(f){var l=n.findById(f.id);if(!(!l||l.destroyed)){var c=l.get("originAttrs"),h=l.get("model"),d=l.getContainer().getMatrix();if(c==null&&(d&&(c={x:d[6],y:d[7]}),l.set("originAttrs",c||0)),i){var v=i(l,u,f,c||{x:0,y:0});l.set("model",Object.assign(h,v))}else c?(h.x=c.x+(f.x-c.x)*u,h.y=c.y+(f.y-c.y)*u):(h.x=f.x,h.y=f.y)}}),n.refreshPositions(t)},{duration:a.duration,easing:a.easing,callback:function(){ye(o,function(f){f.set("originAttrs",null)}),a.callback&&a.callback(),n.emit("afteranimate"),n.animating=!1}})},0)},e.prototype.refreshPositions=function(t){var n=this;n.emit("beforegraphrefreshposition");var a=n.get("nodes"),i=n.get("edges"),o=n.get("vedges"),A=n.get("combos"),s,u={},f=function(c){ye(c,function(h){s=h.getModel();var d=h.get("originAttrs");if(!(d&&s.x===d.x&&s.y===d.y)){var v=h.updatePosition({x:s.x,y:s.y});u[s.id]=v,s.comboId&&(u[s.comboId]=u[s.comboId]||v),s.parentId&&(u[s.parentId]=u[s.parentId]||v)}})};f(A),f(a),A&&A.length!==0&&(t&&f(A),n.updateCombos()),ye(i,function(l){var c=l.getSource().getModel(),h=l.getTarget();if(!Ln(h)){var d=h.getModel();(u[c.id]||u[d.id]||l.getModel().isComboEdge)&&l.refresh()}}),ye(o,function(l){l.refresh()}),n.emit("aftergraphrefreshposition"),n.autoPaint()},e.prototype.stopAnimate=function(){var t=this.get("canvas"),n=t.cfg.timeline;n&&n.stopAllAnimations()},e.prototype.isAnimating=function(){return this.animating},e.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},e.prototype.getCurrentMode=function(){var t=this.get("modeController");return t.getMode()},e.prototype.setMode=function(t){var n=this.get("modeController");return n.setMode(t),this},e.prototype.clear=function(t){var n;return t===void 0&&(t=!1),(n=this.get("canvas"))===null||n===void 0||n.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),t||this.emit("afterrender"),this},e.prototype.updateLayout=function(t,n,a,i){var o=this;t===void 0&&(t={}),i===void 0&&(i=!0);var A=this.get("layoutController");if(Oe(t)&&(t={type:t}),n){var s=a;s||(n==="begin"?s={x:0,y:0}:s={x:this.getWidth()/2,y:this.getHeight()/2}),s=this.getPointByCanvas(s.x,s.y);var u=["force","gForce","fruchterman","force2"];u.includes(t.type)||!t.type&&u.includes(A==null?void 0:A.layoutType)?t.center=[s.x,s.y]:this.once("afterlayout",function(c){var h=o.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];s.x=s.x*h[0]+h[6],s.y=s.y*h[0]+h[7];var d=o.getGroup().getCanvasBBox(),v=d.minX,g=d.maxX,p=d.minY,y=d.maxY,m={x:(v+g)/2,y:(p+y)/2};n==="begin"&&(m.x=v,m.y=p),o.translate(s.x-m.x,s.y-m.y)})}var f=P({},this.get("layout")),l={};Object.assign(l,f,t),t.pipes&&!t.type?delete l.type:!t.pipes&&l.type&&delete l.pipes,this.set("layout",l),A&&(A.isLayoutTypeSame(l)&&l.gpuEnabled===f.gpuEnabled?A.updateLayoutCfg(l):A.changeLayout(l),i&&this.get("enabledStack")&&this.pushStack("layout",{before:f,after:l}))},e.prototype.destroyLayout=function(){var t=this.get("layoutController");t==null||t.destroyLayout()},e.prototype.layout=function(){var t,n=this.get("layoutController"),a=this.get("layout");if(!(!a||!n)){if(a.workerEnabled){n.layout();return}!((t=n.layoutMethods)===null||t===void 0)&&t.length?n.relayout(!0):n.layout()}},e.prototype.collapseCombo=function(t,n){var a=this;if(n===void 0&&(n=!0),!this.destroyed){if(Oe(t)&&(t=this.findById(t)),!t){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"collapse",item:t});var i=t.getModel(),o=this.get("itemController");o.collapseCombo(t,n),i.collapsed=!0;var A=this.getEdges().concat(this.get("vedges")),s=[],u=this.get("comboTrees"),f=!1;(u||[]).forEach(function(c){f||$n(c,function(h){if(f&&h.depth<=i.depth)return!1;if(i.id===h.id&&(f=!0),f){var d=a.findById(h.id);d&&d.getType&&d.getType()==="combo"&&(s=s.concat(d.getNodes()),s=s.concat(d.getCombos()))}return!0})});var l={};A.forEach(function(c){var h=c.getModel(),d=h.isVEdge,v=h.size,g=v===void 0?1:v;if(!(c.isVisible()&&!d)){var p=c.getSource(),y=c.getTarget(),m=null,w;if(p.getModel().id===i.id||s.includes(p)&&!s.includes(y)?(m=y,w=!1):(y.getModel().id===i.id||!s.includes(p)&&s.includes(y))&&(m=p,w=!0),m){if(d){a.removeItem(c,!1);return}for(var B=m.getModel();!m.isVisible();){var E=B.parentId,b=B.comboId,C=E||b;if(m=a.findById(C),!m||!C)return;B=m.getModel()}var _=B.id,x=w?{source:_,target:i.id,size:g,isVEdge:!0}:{source:i.id,target:_,size:g,isVEdge:!0},M="".concat(x.source,"-").concat(x.target);if(l[M]){l[M].size+=g;return}l[M]=x}}}),this.addItems(Object.values(l).map(function(c){return{type:"vedge",model:c}}),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:t})}},e.prototype.expandCombo=function(t,n){var a=this;if(n===void 0&&(n=!0),Oe(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var i=t.getModel(),o=this.get("itemController");o.expandCombo(t,n),i.collapsed=!1;var A=this.getEdges().concat(this.get("vedges")),s=[],u=this.get("comboTrees"),f=!1;(u||[]).forEach(function(c){f||$n(c,function(h){if(f&&h.depth<=i.depth)return!1;if(i.id===h.id&&(f=!0),f){var d=a.findById(h.id);d&&d.getType&&d.getType()==="combo"&&(s=s.concat(d.getNodes()),s=s.concat(d.getCombos()))}return!0})});var l={};A.forEach(function(c){if(!(c.isVisible()&&!c.getModel().isVEdge)){var h=c.getSource(),d=c.getTarget(),v=h.get("id"),g=d.get("id"),p=null,y;if(v===i.id||s.includes(h)&&!s.includes(d)?(p=d,y=!1):g===i.id||!s.includes(h)&&s.includes(d)?(p=h,y=!0):s.includes(h)&&s.includes(d)&&h.isVisible()&&d.isVisible()&&c.show(),p){var m=c.getModel(),w=m.isVEdge,B=m.size,E=B===void 0?1:B;if(w){a.removeItem(c,!1);return}for(var b=p.getModel();!p.isVisible();){var C=b.parentId,_=b.comboId,x=C||_;if(p=a.findById(x),!p||!x)return;b=p.getModel()}for(var M=b.id,S=y?d:h,I=S.getModel();!S.isVisible();){var D=I.parentId,O=I.comboId,F=D||O;if(S=a.findById(F),!S||!F)return;if(I.comboId===i.id||I.parentId===i.id)break;I=S.getModel()}var U=I.id;if(M){var Q=y?{source:M,target:U,isVEdge:!0,size:E}:{source:U,target:M,isVEdge:!0,size:E},N="".concat(Q.source,"-").concat(Q.target);if(l[N]){l[N].size+=E;return}l[N]=Q}}}}),this.addItems(Object.values(l).map(function(c){return{type:"vedge",model:c}}),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:t})},e.prototype.collapseExpandCombo=function(t,n){if(n===void 0&&(n=!0),Oe(t)&&(t=this.findById(t)),!(!t||t.getType&&t.getType()!=="combo")){for(var a=t.getModel(),i=this.findById(a.parentId);i;){var o=i.getModel();if(o.collapsed){console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),i=void 0;return}i=this.findById(o.parentId)}var A=a.collapsed;A?this.expandCombo(t,n):this.collapseCombo(t,n),this.updateCombo(t)}},e.prototype.getNeighbors=function(t,n){var a=t;return Oe(t)&&(a=this.findById(t)),a.getNeighbors(n)},e.prototype.getNodeDegree=function(t,n,a){n===void 0&&(n=void 0),a===void 0&&(a=!1);var i=t;Oe(t)&&(i=this.findById(t));var o=this.get("degrees");(!o||a)&&(o=Oo(this.save()),this.set("degrees",o));var A=o[i.getID()],s=0;if(!A)return 0;switch(n){case"in":s=A.inDegree;break;case"out":s=A.outDegree;break;case"all":s=A;break;default:s=A.degree;break}return s},e.prototype.getUndoStack=function(){return this.undoStack},e.prototype.getRedoStack=function(){return this.redoStack},e.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},e.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},e.prototype.pushStack=function(t,n,a){if(t===void 0&&(t="update"),a===void 0&&(a="undo"),!this.get("enabledStack")){console.warn("请先启用 undo & redo 功能，在实例化 Graph 时候配置 enabledStack: true !");return}var i=n?Xt(n):{before:{},after:Xt(this.save())};a==="redo"?this.redoStack.push({action:t,data:i}):this.undoStack.push({action:t,data:i}),this.emit("stackchange",{action:t,stackType:a,undoStack:this.undoStack,redoStack:this.redoStack})},e.prototype.getAdjMatrix=function(t,n){t===void 0&&(t=!0),n===void 0&&(n=this.get("directed"));var a=this.get("adjMatrix");return(!a||!t)&&(a=Ss(this.save(),n),this.set("adjMatrix",a)),a},e.prototype.getShortestPathMatrix=function(t,n){t===void 0&&(t=!0),n===void 0&&(n=this.get("directed"));var a=this.get("adjMatrix"),i=this.get("shortestPathMatrix");return(!a||!t)&&(a=Ss(this.save(),n),this.set("adjMatrix",a)),(!i||!t)&&(i=Wl(this.save(),n),this.set("shortestPathMatrix",i)),i},e.prototype.on=function(t,n,a){return r.prototype.on.call(this,t,n,a)},e.prototype.destroy=function(){var t,n,a,i,o;this.emit("beforedestroy"),this.clear(),this.clearStack(),(t=this.get("itemController"))===null||t===void 0||t.destroy(),(n=this.get("modeController"))===null||n===void 0||n.destroy(),(a=this.get("viewController"))===null||a===void 0||a.destroy(),(i=this.get("stateController"))===null||i===void 0||i.destroy(),(o=this.get("canvas"))===null||o===void 0||o.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null,this.emit("afterdestroy")},e.prototype.createHull=function(t){if(!t.members||t.members.length<1){console.warn("Create hull failed! The members is empty.");return}var n=this.get("hullGroup"),a=this.get("hullMap");if(a||(a={},this.set("hullMap",a)),(!n||n.get("destroyed"))&&(n=this.get("group").addGroup({id:"hullGroup"}),n.toBack(),this.set("hullGroup",n)),a[t.id])return console.warn("Existed hull id."),a[t.id];var i=n.addGroup({id:"".concat(t.id,"-container")}),o=new mO(this,P(P({},t),{group:i})),A=o.id;return a[A]=o,o},e.prototype.getHulls=function(){return this.get("hullMap")},e.prototype.getHullById=function(t){return this.get("hullMap")[t]},e.prototype.removeHull=function(t){var n,a;Oe(t)?a=this.getHullById(t):a=t,(n=this.get("hullMap"))===null||n===void 0||delete n[a.id],a.destroy()},e.prototype.removeHulls=function(){var t=this.getHulls();!t||!Object.keys(t).length||(Object.keys(t).forEach(function(n){var a=t[n];a.destroy()}),this.set("hullMap",{}))},e}(gF);function i1(r){"@babel/helpers - typeof";return i1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i1(r)}var iu=Xa,I_="-shape",oy="-label",jh=["startArrow","endArrow"],T_={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},vV={lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},$h={edge:vV,node:T_,combo:T_},o1="-label-bg",bB={options:{labelCfg:{style:{fontFamily:ct.windowFontFamily}},descriptionCfg:{style:{fontFamily:ct.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(e){return{}},getOptions:function(e,t){return t==="move"||t!=null&&t.includes("bbox")?e:br({},this.options,this.getCustomConfig(e)||{},e)},draw:function(e,t){t.shapeMap={},this.mergeStyle=this.getOptions(e);var n=this.drawShape(e,t);if(n.set("className",this.itemType+I_),t.shapeMap[this.itemType+I_]=n,e.label){var a=this.drawLabel(e,t);a.set("className",this.itemType+oy),t.shapeMap[this.itemType+oy]=a}return n},afterDraw:function(e,t,n){},drawShape:function(e,t){return null},drawLabel:function(e,t){var n=(this.mergeStyle||this.getOptions(e)||{}).labelCfg,a=n||{},i=this.getLabelStyle(e,a,t),o=i.rotate;delete i.rotate;var A=t.addShape("text",{attrs:i,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(t.shapeMap["text-shape"]=A,!isNaN(o)&&o!==""){var s=A.getBBox(),u=[1,0,0,0,1,0,0,0,1];if(i.rotateCenter)switch(i.rotateCenter){case"center":u=iu(u,[["t",-s.width/2,-s.height/2],["r",o],["t",s.width/2,s.height/2]]);break;case"lefttop":u=iu(u,[["t",-i.x,-i.y],["r",o],["t",i.x,i.y]]);break;case"leftcenter":u=iu(u,[["t",-i.x,-i.y-s.height/2],["r",o],["t",i.x,i.y+s.height/2]]);break;default:u=iu(u,[["t",-s.width/2,-s.height/2],["r",o],["t",s.width/2,s.height/2]]);break}else u=iu(u,[["t",-i.x,-i.y-s.height/2],["r",o],["t",i.x,i.y+s.height/2]]);A.setMatrix(u)}if(i.background){var f=this.drawLabelBg(e,t,A),l=this.itemType+o1;f.set("classname",l),t.shapeMap[l]=f,A.toFront()}return A},drawLabelBg:function(e,t,n){var a=this.options.labelCfg,i=mt({},a,e.labelCfg),o=this.getLabelBgStyleByPosition(n,i),A=t.addShape("rect",{name:"text-bg-shape",attrs:o,labelRelated:!0});return t.shapeMap["text-bg-shape"]=A,A},getLabelStyleByPosition:function(e,t,n){return{text:e.label}},getLabelBgStyleByPosition:function(e,t){return{}},getLabelStyle:function(e,t,n){var a=this.getLabelStyleByPosition(e,t,n),i="".concat(this.itemType,"Label"),o=ct[i]?ct[i].style:null;return P(P(P({},o),a),t.style)},getShapeStyle:function(e){return e.style},update:function(e,t,n){this.updateShapeStyle(e,t,n),this.updateLabel(e,t,n)},updateShapeStyle:function(e,t,n){var a,i=t.getContainer(),o=t.getKeyShape(),A=mt({},o.attr(),e.style),s=function(l){var c,h=A[l];if(Ln(h)){var d=((a=i.shapeMap)===null||a===void 0?void 0:a[l])||i.find(function(v){return v.get("name")===l});d==null||d.attr(h)}else o.attr((c={},c[l]=h,c))};for(var u in A)s(u)},updateLabel:function(e,t,n){var a,i,o=t.getContainer(),A=(this.mergeStyle||this.getOptions({},n)||{}).labelCfg,s=A===void 0?{}:A,u=this.itemType+oy,f=o.shapeMap[u]||o.find(function(w){return w.get("className")===u}),l=this.itemType+o1,c=o.shapeMap[l]||o.find(function(w){return w.get("className")===l});if(f&&e.label===void 0&&(o.removeChild(f),delete o.shapeMap[u],c&&(o.removeChild(c),delete o.shapeMap[l])),e.label||e.label==="")if(f){(!n||n==="bbox|label"||this.itemType==="edge"&&n!=="style")&&(s=br(s,e.labelCfg));var d=this.getLabelStyleByPosition(e,s,o),v=(a=e.labelCfg)===null||a===void 0?void 0:a.style,g=P(P({},d),v),p=g.rotate;if(delete g.rotate,!isNaN(p)&&p!==""){var y=[1,0,0,0,1,0,0,0,1];y=iu(y,[["t",-g.x,-g.y],["r",p],["t",g.x,g.y]]),g.matrix=y,f.attr(g)}else((i=f.getMatrix())===null||i===void 0?void 0:i[4])!==1&&f.resetMatrix(),f.attr(g);if(!c)g.background&&(c=this.drawLabelBg(e,o,f),c.set("classname",l),o.shapeMap[l]=c,f.toFront());else if(g.background){var m=this.getLabelBgStyleByPosition(f,s);c.attr(m)}else o.removeChild(c)}else{var h=this.drawLabel(e,o);h.set("className",u),o.shapeMap[u]=h}},afterUpdate:function(e,t){},setState:function(e,t,n){var a,i,o,A=n.get("keyShape");if(!(!A||A.destroyed)){var s=n.getType(),u=wc(t)?e:"".concat(e,":").concat(t),f=this.getStateStyle(u,n),l=n.getStateStyle(u);if(!(!l&&!f)){var c=mt({},l||f),h=n.getContainer(),d={x:1,y:1,cx:1,cy:1,matrix:1};if(s==="combo"&&(d.r=1,d.width=1,d.height=1),t){var v=function(F){var U,Q=c[F];if(Ln(Q)&&!jh.includes(F)){var N=((o=h.shapeMap)===null||o===void 0?void 0:o[F])||h.find(function(R){return R.get("name")===F});N==null||N.attr(Q)}else A.attr((U={},U[F]=Q,U))};for(var g in c)v(g)}else{var p=nv(n.getCurrentStatesStyle()),y=n.getModel(),m=mt({},y.style,nv(n.getOriginStyle())),w=A.get("name"),B=A.attr(),E={};Object.keys(B).forEach(function(O){if(O!=="img"){var F=B[O];F&&i1(F)==="object"?E[O]=Xt(F):E[O]=F}});var b={},C=function(F){var U=c[F];if(Ln(U)&&!jh.includes(F)){var Q=h.shapeMap[F]||h.find(function(J){return J.get("name")===F});if(Q){var N=nv(Q.attr());ye(U,function(J,re){if(F===w&&E[re]&&!d[re]){delete E[re];var ee=m[F][re]||$h[s][re];A.attr(re,ee)}else if(N[re]||N[re]===0){delete N[re];var q=m[F][re]||$h[s][re];Q.attr(re,q)}}),b[F]=N}}else if(E[F]&&!d[F]){delete E[F];var R=m[F]||(m[w]?m[w][F]:void 0)||$h[s][F];A.attr(F,R)}};for(var _ in c)C(_);w?b[w]=E:mt(b,E);for(var g in p)if(!d[g]){var x=p[g];(!Ln(x)||jh.includes(g))&&(w?(mt(m[w],(i={},i[g]=x,i)),delete m[g]):mt(m,(a={},a[g]=x,a)),delete p[g])}var M={};br(M,m,b,p);var S=!1,I=function(F){var U,Q,N=M[F];if(Ln(N)&&!jh.includes(F)){var R=h.shapeMap[F]||h.find(function(re){return re.get("name")===F});R&&((R.get("type")==="text"||R.get("labelRelated"))&&(delete N.x,delete N.y,delete N.matrix),F===w&&(s==="combo"&&(delete N.r,delete N.width,delete N.height),S=!0),R.attr(N))}else if(!S){var J=N||$h[s][F];s==="combo"?w||A.attr((U={},U[F]=J,U)):A.attr((Q={},Q[F]=J,Q))}};for(var D in M)I(D)}}}},getStateStyle:function(e,t){var n=t.getModel(),a=t.getType(),i=this.getOptions(n),o=i.stateStyles,A=i.style,s=A===void 0?{}:A,u=n.stateStyles?n.stateStyles[e]:o&&o[e];return a==="combo"?Xt(u):mt({},s,u)},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t,n,a=(e==null?void 0:e.anchorPoints)||((t=this.getCustomConfig(e))===null||t===void 0?void 0:t.anchorPoints)||((n=this.options)===null||n===void 0?void 0:n.anchorPoints);return a}},gV={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:ct.nodeLabel.offset,getSize:function(e){var t,n=((t=this.mergeStyle)===null||t===void 0?void 0:t.size)||e.size||this.getOptions({}).size||ct.defaultNode.size;return yt(n)&&n.length===1&&(n=[n[0],n[0]]),yt(n)||(n=[n,n]),n},getLabelStyleByPosition:function(e,t){var n=t.maxLength,a=e.label;n&&(a=hD(a,n));var i=t.position||this.labelPosition;if(i==="center")return{x:0,y:0,text:a,textBaseline:"middle",textAlign:"center"};var o=t.offset;ht(o)&&(o=this.offset);var A=this.getSize(e),s;switch(i){case"top":s={x:0,y:-A[1]/2-o,textBaseline:"bottom",textAlign:"center"};break;case"bottom":s={x:0,y:A[1]/2+o,textBaseline:"top",textAlign:"center"};break;case"left":s={x:-A[0]/2-o,y:0,textBaseline:"middle",textAlign:"right"};break;default:s={x:A[0]/2+o,y:0,textBaseline:"middle",textAlign:"left"};break}return s.text=a,s},getLabelBgStyleByPosition:function(e,t){var n;if(!e)return{};var a=(n=t.style)===null||n===void 0?void 0:n.background;if(!a)return{};var i=e.getBBox(),o=BB(a.padding),A=i.width+o[1]+o[3],s=i.height+o[0]+o[2];return P(P({x:i.minX-o[3],y:i.minY-o[0]},a),{width:A,height:s})},drawShape:function(e,t){var n=this.shapeType,a=this.getShapeStyle(e),i=t.addShape(n,{attrs:a,draggable:!0,name:"node-shape"});return t.shapeMap["node-shape"]=i,i},updateLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,a=t.shapeMap["link-point-left"]||t.find(function(M){return M.get("className")==="link-point-left"}),i=t.shapeMap["link-point-right"]||t.find(function(M){return M.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(M){return M.get("className")==="link-point-top"}),A=t.shapeMap["link-point-bottom"]||t.find(function(M){return M.get("className")==="link-point-bottom"}),s;a&&(s=a.attr()),i&&!s&&(s=i.attr()),o&&!s&&(s=o.attr()),A&&!s&&(s=A.attr()),s||(s=n);var u=mt({},s,e.linkPoints),f=u.fill,l=u.stroke,c=u.lineWidth,h=u.size/2;h||(h=u.r);var d=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},v=d.left,g=d.right,p=d.top,y=d.bottom,m=this.getSize(e),w=m[0],B=m[1],E={r:h,fill:f,stroke:l,lineWidth:c};if(a)!v&&v!==void 0?(a.remove(),delete t.shapeMap["link-point-left"]):a.attr(P(P({},E),{x:-w/2,y:0}));else if(v){var b="link-point-left";t.shapeMap[b]=t.addShape("circle",{attrs:P(P({},E),{x:-w/2,y:0}),className:b,name:b,isAnchorPoint:!0})}if(i)!g&&g!==void 0&&(i.remove(),delete t.shapeMap["link-point-right"]),i.attr(P(P({},E),{x:w/2,y:0}));else if(g){var C="link-point-right";t.shapeMap[C]=t.addShape("circle",{attrs:P(P({},E),{x:w/2,y:0}),className:C,name:C,isAnchorPoint:!0})}if(o)!p&&p!==void 0&&(o.remove(),delete t.shapeMap["link-point-top"]),o.attr(P(P({},E),{x:0,y:-B/2}));else if(p){var _="link-point-top";t.shapeMap[_]=t.addShape("circle",{attrs:P(P({},E),{x:0,y:-B/2}),className:_,name:_,isAnchorPoint:!0})}if(A)!y&&y!==void 0?(A.remove(),delete t.shapeMap["link-point-bottom"]):A.attr(P(P({},E),{x:0,y:B/2}));else if(y){var x="link-point-bottom";t.shapeMap[x]=t.addShape("circle",{attrs:P(P({},E),{x:0,y:B/2}),className:x,name:x,isAnchorPoint:!0})}},updateShape:function(e,t,n,a,i){var o=t.get("keyShape");o.attr(P({},n)),this.updateLabel(e,t,i),a&&this.updateIcon(e,t)},updateIcon:function(e,t){var n=this,a=t.getContainer(),i=(this.mergeStyle||this.getOptions(e)).icon,o=e.icon?e.icon:{show:void 0,text:void 0},A=o.show,s=o.text,u=a.shapeMap["".concat(this.type,"-icon")]||a.find(function(p){return p.get("name")==="".concat(n.type,"-icon")});if(u)if(A||A===void 0){var f=mt({},u.attr(),i),l=f.width,c=l===void 0?20:l,h=f.height,d=h===void 0?20:h;(f.fontFamily==="iconfont"||f.hasOwnProperty("text"))&&(c=0,d=0),u.attr(P(P({},f),{x:-c/2,y:-d/2}))}else u.remove(),delete a.shapeMap["".concat(this.type,"-icon")];else if(A){var v="".concat(this.type,"-icon");if(s)a.shapeMap[v]=a.addShape("text",{attrs:P({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:v,name:v});else{var c=i.width,d=i.height;a.shapeMap[v]=a.addShape("image",{attrs:P(P({},i),{x:-c/2,y:-d/2}),className:v,name:v})}var g=a.shapeMap["node-label"]||a.find(function(p){return p.get("name")==="node-label"});g&&g.toFront()}}},pV=P(P({},bB),gV);xr.registerNode("single-node",pV);var Wh="edge-shape";function yV(r){var e=r;return r==="start"?e="end":r==="end"&&(e="start"),e}var mV={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:ct.defaultEdge.size,style:{x:0,y:0,stroke:ct.defaultEdge.style.stroke,lineAppendWidth:ct.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:ct.edgeLabel.style.fill,fontSize:ct.edgeLabel.style.fontSize,fontFamily:ct.windowFontFamily}},stateStyles:P({},ct.edgeStateStyles)},getPath:function(e){var t=[];return ye(e,function(n,a){a===0?t.push(["M",n.x,n.y]):t.push(["L",n.x,n.y])}),t},getShapeStyle:function(e){var t=this.options.style,n={stroke:e.color},a=mt({},t,n,e.style),i=e.size||ct.defaultEdge.size;e=this.getPathPoints(e);var o=e.startPoint,A=e.endPoint,s=this.getControlPoints(e),u=[o];s&&(u=u.concat(s)),u.push(A);var f=this.getPath(u),l=mt({},ct.defaultEdge.style,{stroke:ct.defaultEdge.color,lineWidth:i,path:f},a);return l},updateShapeStyle:function(e,t,n){var a,i=t.getContainer(),o=((a=t.getKeyShape)===null||a===void 0?void 0:a.call(t))||i.shapeMap["edge-shape"],A=e.size;e=this.getPathPoints(e);var s=e.startPoint,u=e.endPoint,f=this.getControlPoints(e),l=[s];f&&(l=l.concat(f)),l.push(u);var c=o.attr(),h=e.style||{};h.stroke===void 0&&(h.stroke=e.color);var d=e.sourceNode,v=e.targetNode,g={radius:h.radius};f||(g={source:d,target:v,offset:h.offset,radius:h.radius});var p=this.getPath(l,g),y={};n==="move"?y={path:p}:(c.endArrow&&h.endArrow===!1&&(e.style.endArrow={path:""}),c.startArrow&&h.startArrow===!1&&(e.style.startArrow={path:""}),y=P({},e.style),y.lineWidth===void 0&&(y.lineWdith=(vt(A)?A:A==null?void 0:A[0])||c.lineWidth),y.path===void 0&&(y.path=p),y.stroke===void 0&&(y.stroke=c.stroke||e.color)),o&&o.attr(y)},getLabelStyleByPosition:function(e,t,n){var a=t.position||this.labelPosition,i={},o=n==null?void 0:n.shapeMap[Wh],A;a==="start"?A=0:a==="end"?A=1:A=.5;var s=t.refX||this.refX,u=t.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return i.x=e.startPoint.x+s,i.y=e.startPoint.y+u,i.text=e.label,i;var f;ht(t.autoRotate)?f=this.labelAutoRotate:f=t.autoRotate;var l=fD(o,A,s,u,f);return i.x=l.x,i.y=l.y,i.rotate=l.rotate,i.textAlign=this._getTextAlign(a,l.angle),i.text=e.label,i},getLabelBgStyleByPosition:function(e,t){if(!e)return{};var n=e.getBBox(),a=t.style&&t.style.background;if(!a)return{};var i=a.padding,o=n.width+i[1]+i[3],A=n.height+i[0]+i[2],s=P(P({},a),{width:o,height:A,x:n.minX-i[3],y:n.minY-i[0],matrix:[1,0,0,0,1,0,0,0,1]}),u;return ht(t.autoRotate)?u=this.labelAutoRotate:u=t.autoRotate,u&&(s.matrix=e.attr("matrix")||[1,0,0,0,1,0,0,0,1]),s},_getTextAlign:function(e,t){var n="center";return t?(t=t%(Math.PI*2),e!=="center"&&(t>=0&&t<=Math.PI/2||t>=3/2*Math.PI&&t<2*Math.PI?n=e:n=yV(e)),n):e},getControlPoints:function(e){return e.controlPoints},getPathPoints:function(e){return e},drawShape:function(e,t){var n=this.getShapeStyle(e),a=t.addShape("path",{className:Wh,name:Wh,attrs:n});return t.shapeMap[Wh]=a,a},drawLabel:function(e,t){var n=this.options.labelCfg,a=br({},n,e.labelCfg),i=this.getLabelStyle(e,a,t),o=i.rotate;delete i.rotate;var A=t.addShape("text",{attrs:i,name:"text-shape",labelRelated:!0,draggable:!0});if(t.shapeMap["text-shape"]=A,!isNaN(o)&&o!==""&&A.rotateAtStart(o),i.background){var s=this.drawLabelBg(e,t,A,i,o),u=this.itemType+o1;s.set("classname",u),t.shapeMap[u]=s,A.toFront()}return A},drawLabelBg:function(e,t,n,a,i){var o=this.options.labelCfg,A=br({},o,e.labelCfg),s=this.getLabelBgStyleByPosition(n,A),u=t.addShape("rect",{name:"text-bg-shape",attrs:s,labelRelated:!0});return t.shapeMap["text-bg-shape"]=u,u}},wV=P(P({},bB),mV);xr.registerEdge("single-edge",wV);xr.registerEdge("line",{getControlPoints:function(){}},"single-edge");xr.registerEdge("spline",{getPath:function(e){var t=gO(e);return t}},"single-edge");xr.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(e){var t=e.startPoint,n=e.endPoint,a={x:(t.x+n.x)/2,y:(t.y+n.y)/2},i,o;if(e.controlPoints!==void 0){if(o=e.controlPoints[0],i=Mm(t,o,n),t.x<=n.x&&t.y>n.y?this.clockwise=i.x>o.x?0:1:t.x<=n.x&&t.y<n.y?this.clockwise=i.x>o.x?1:0:t.x>n.x&&t.y<=n.y?this.clockwise=i.y<o.y?0:1:this.clockwise=i.y<o.y?1:0,(o.x-t.x)/(o.y-t.y)===(n.x-t.x)/(n.y-t.y))return[]}else{e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),yt(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),e.curveOffset<0?this.clockwise=0:this.clockwise=1;var A={x:n.x-t.x,y:n.y-t.y},s=Math.atan2(A.y,A.x);o={x:e.curveOffset*Math.cos(-Math.PI/2+s)+a.x,y:e.curveOffset*Math.sin(-Math.PI/2+s)+a.y},i=Mm(t,o,n)}var u=Lv(t,i),f=[{x:u,y:u}];return f},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),e.length===2?t.push(["L",e[1].x,e[1].y]):t.push(["A",e[1].x,e[1].y,0,0,this.clockwise,e[2].x,e[2].y]),t}},"single-edge");xr.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(e){var t=e.controlPoints;if(!t||!t.length){var n=e.startPoint,a=e.endPoint;e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),yt(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),yt(e.curvePosition)&&(e.curvePosition=e.curveOffset[0]);var i=Rv(n,a,e.curvePosition,e.curveOffset);t=[i]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["Q",e[1].x,e[1].y,e[2].x,e[2].y]),t}},"single-edge");xr.registerEdge("cubic",{curvePosition:[1/2,1/2],curveOffset:[-20,20],getControlPoints:function(e){var t=e.controlPoints;if(e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),vt(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),vt(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]),!t||!t.length||t.length<2){var n=e.startPoint,a=e.endPoint,i=Rv(n,a,e.curvePosition[0],e.curveOffset[0]),o=Rv(n,a,e.curvePosition[1],e.curveOffset[1]);t=[i,o]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]),t}},"single-edge");xr.registerEdge("cubic-vertical",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,n=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),vt(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),vt(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),vt(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var a=n.y-t.y,i=[0,0];e.curveOffset?i=e.curveOffset:Math.abs(a)<Math.abs(e.minCurveOffset[0])&&(i=e.minCurveOffset);var o={x:t.x,y:t.y+a*this.curvePosition[0]+i[0]},A={x:n.x,y:n.y-a*this.curvePosition[1]+i[1]};return[o,A]}},"cubic");xr.registerEdge("cubic-horizontal",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,n=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),vt(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),vt(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),vt(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var a=n.x-t.x,i=[0,0];e.curveOffset?i=e.curveOffset:Math.abs(a)<Math.abs(e.minCurveOffset[0])&&(i=e.minCurveOffset);var o={x:t.x+a*this.curvePosition[0]+i[0],y:t.y},A={x:n.x-a*this.curvePosition[1]+i[1],y:n.y},s=[o,A];return s}},"cubic");xr.registerEdge("loop",{getPathPoints:function(e){return uD(e)},getControlPoints:function(e){return e.controlPoints},afterDraw:function(e){e.controlPoints=void 0},afterUpdate:function(e){e.controlPoints=void 0}},"cubic");var BV={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:ct.comboLabel.refX,refY:ct.comboLabel.refY,options:{style:{stroke:ct.defaultCombo.style.stroke,fill:ct.defaultCombo.style.fill,lineWidth:ct.defaultCombo.style.lineWidth},labelCfg:{style:{fill:ct.comboLabel.style.fill,fontSize:ct.comboLabel.style.fontSize,fontFamily:ct.windowFontFamily}},stateStyles:P({},ct.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(e){var t=Xt(e.size||this.options.size||ct.defaultCombo.size);return yt(t)&&t.length===1&&(t=[t[0],t[0]]),yt(t)||(t=[t,t]),t},getLabelStyleByPosition:function(e,t){var n=t.position||this.labelPosition,a=e.style,i=e.padding||this.options.padding;yt(i)&&(i=Math.max.apply(Math,i));var o=t.refX,A=t.refY;ht(o)&&(o=this.refX),ht(A)&&(A=this.refY);var s=this.getSize(e),u=Math.max(a.r,s[0]/2)||s[0]/2,f=u+i,l;switch(n){case"top":l={x:0,y:-f-A,textBaseline:"bottom",textAlign:"center"};break;case"bottom":l={x:0,y:f+A,textBaseline:"bottom",textAlign:"center"};break;case"left":l={x:-f+o,y:0,textAlign:"left"};break;case"center":l={x:0,y:0,text:e.label,textAlign:"center"};break;default:l={x:f+o,y:0,textAlign:"right"};break}return l.text=e.label,l},drawShape:function(e,t){var n=this.shapeType,a=this.getShapeStyle(e),i=t.addShape(n,{attrs:a,draggable:!0,name:"combo-shape"});return i},updateCollapsedIcon:function(e,t,n){var a=e.collapsed,i=e.collapsedSubstituteIcon,o=i===void 0?{}:i,A=Object.assign({},this.options.collapsedSubstituteIcon,o),s=A.show,u=A.img,f=A.width,l=A.height,c=t.getContainer(),h=c.find(function(p){return p.get("name")==="combo-collapsed-substitute-icon"}),d=h&&!h.destroyed,v=t.get("keyShape");if(a&&s){if(d)h.show();else{var g={width:f||n.r*2||n.width,height:l||n.r*2||n.height};h=c.addShape("image",{attrs:P({img:u,x:-g.width/2,y:-g.height/2},g),name:"combo-collapsed-substitute-icon",draggable:!0})}v.hide()}else d&&(h.hide(),v.show())},updateShape:function(e,t,n){var a=this,i=t.get("keyShape"),o=t.get("animate"),A=o&&(e.animate===void 0?this.options.animate:e.animate);A&&i.animate?(e.collapsed||this.updateCollapsedIcon(e,t,n),i.animate(n,{duration:200,easing:"easeLinear",callback:function(){e.collapsed&&a.updateCollapsedIcon(e,t,n)}})):(i.attr(P({},n)),this.updateCollapsedIcon(e,t,n)),this.updateLabel(e,t)}},EV=P(P({},bB),BV);xr.registerCombo("single-combo",EV);xr.registerCombo("circle",{options:{size:[ct.defaultCombo.size[0],ct.defaultCombo.size[0]],padding:Math.max.apply(Math,ct.defaultCombo.padding),animate:!0,style:{stroke:ct.defaultCombo.style.stroke,fill:ct.defaultCombo.style.fill,lineWidth:ct.defaultCombo.style.lineWidth},labelCfg:{style:{fill:ct.comboLabel.style.fill,fontSize:ct.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:P({},ct.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(e,t){var n=this.getShapeStyle(e);delete n.height,delete n.width;var a=t.addShape("circle",{attrs:n,className:"circle-combo",name:"circle-combo",draggable:!0});return a},getShapeStyle:function(e){var t=this.options.style,n=e.padding||this.options.padding;yt(n)&&(n=Math.max.apply(Math,n));var a={stroke:e.color},i=mt({},t,a,e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,A;if(o)A=vt(o)?o/2:o[0]/2;else{var s=this.getSize(e);!vt(i.r)||isNaN(i.r)?A=s[0]/2||ct.defaultCombo.style.r:A=Math.max(i.r,s[0]/2)||s[0]/2}i.r=A+n;var u=P({x:0,y:0},i);return e.style?e.style.r=A:e.style={r:A},u},update:function(e,t){var n=this.getSize(e),a=e.padding||this.options.padding;yt(a)&&(a=Math.max.apply(Math,a));var i=Xt(e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,A;o?A=vt(o)?o/2:o[0]/2:A=Math.max(i.r,n[0]/2)||n[0]/2,i.r=A+a;var s=t.get("sizeCache");s&&(s.r=i.r);var u={stroke:e.color},f=t.get("keyShape"),l=mt({},f.attr(),u,i);e.style?e.style.r=A:e.style={r:A},this.updateShape(e,t,l,!0)}},"single-combo");xr.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:ct.defaultCombo.style.stroke,fill:ct.defaultCombo.style.fill,lineWidth:ct.defaultCombo.style.lineWidth},labelCfg:{style:{fill:ct.comboLabel.style.fill,fontSize:ct.comboLabel.style.fontSize,fontFamily:ct.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:P({},ct.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(e,t){var n=this.getShapeStyle(e),a=t.addShape("rect",{attrs:n,className:"rect-combo",name:"rect-combo",draggable:!0});return a},getLabelStyleByPosition:function(e,t){var n=t.position||this.labelPosition,a=e.style,i=e.padding||this.options.padding;vt(i)&&(i=[i,i,i,i]);var o=t.refX,A=t.refY;ht(o)&&(o=this.refX),ht(A)&&(A=this.refY);var s=-a.width/2-i[3],u=a.width/2+i[1],f=-a.height/2-i[0],l=a.height/2+i[2],c;switch(n){case"top":c={x:s+o,y:f+A,textBaseline:"top",textAlign:"left"};break;case"bottom":c={x:0,y:l+A,textBaseline:"top",textAlign:"center"};break;case"left":c={x:s+A,y:0,textAlign:"left"};break;case"center":c={x:0,y:0,text:e.label,textAlign:"center"};break;case"top-center":c={x:0,y:f+A,textBaseline:"top",textAlign:"center"};break;default:c={x:u+o,y:0,textAlign:"right"};break}return c.text=e.label,c},getShapeStyle:function(e){var t=this.options.style,n=e.padding||this.options.padding;vt(n)&&(n=[n,n,n,n]);var a={stroke:e.color},i=mt({},t,a,e.style),o=this.getSize(e),A,s,u=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;u?vt(u)?(A=u,s=u):(A=u[0],s=u[1]):(!vt(i.width)||isNaN(i.width)?A=o[0]||ct.defaultCombo.style.width:A=Math.max(i.width,o[0])||o[0],!vt(i.height)||isNaN(i.height)?s=o[1]||ct.defaultCombo.style.height:s=Math.max(i.height,o[1])||o[1]);var f=-A/2-n[3],l=-s/2-n[0];i.width=A+n[1]+n[3],i.height=s+n[0]+n[2];var c=P({x:f,y:l},i);return e.style?(e.style.width=A,e.style.height=s):e.style={width:A,height:s},c},update:function(e,t){var n=this.getSize(e),a=e.padding||this.options.padding;vt(a)&&(a=[a,a,a,a]);var i=Xt(e.style),o,A,s=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;s?vt(s)?(o=s,A=s):(o=s[0],A=s[1]):(o=Math.max(i.width,n[0])||n[0],A=Math.max(i.height,n[1])||n[1]),i.width=o+a[1]+a[3],i.height=A+a[0]+a[2];var u=t.get("sizeCache");u&&(u.width=i.width,u.height=i.height),i.x=-o/2-a[3],i.y=-A/2-a[0];var f={stroke:e.color},l=t.get("keyShape"),c=mt({},l.attr(),f,i);e.style?(e.style.width=o,e.style.height=A):e.style={width:o,height:A},this.updateShape(e,t,c,!1)}},"single-combo");xr.registerNode("simple-circle",{options:{size:ct.defaultNode.size,style:{x:0,y:0,stroke:ct.defaultNode.style.stroke,fill:ct.defaultNode.style.fill,lineWidth:ct.defaultNode.style.lineWidth},labelCfg:{style:{fill:ct.nodeLabel.style.fill,fontSize:ct.nodeLabel.style.fontSize,fontFamily:ct.windowFontFamily}},stateStyles:P({},ct.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(e,t){var n=this.getShapeStyle(e),a="".concat(this.type,"-keyShape"),i=t.addShape("circle",{attrs:n,className:"".concat(this.type,"-keyShape"),name:a,draggable:!0});return t.shapeMap[a]=i,i},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},a=br({},t,n),i=this.getSize(e),o=i[0]/2,A=P({x:0,y:0,r:o},a);return A},update:function(e,t,n){var a=this.getSize(e),i={stroke:e.color,r:a[0]/2},o=t.get("keyShape"),A=br({},o.attr(),i,e.style);this.updateShape(e,t,A,!0,n)}},"single-node");xr.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:ct.defaultNode.style.stroke,fill:ct.defaultNode.style.fill,lineWidth:ct.defaultNode.style.lineWidth},labelCfg:{style:{fill:ct.nodeLabel.style.fill,fontSize:ct.nodeLabel.style.fontSize,fontFamily:ct.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:P({},ct.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(e,t){var n=this.getShapeStyle(e),a=t.addShape("rect",{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},a=mt({},t,n),i=this.getSize(e),o=a.width||i[0],A=a.height||i[1],s=P({x:-o/2,y:-A/2,width:o,height:A},a);return s},update:function(e,t,n){t.getContainer();var a=(this.mergeStyle||this.getOptions(e)).style,i=this.getSize(e),o=t.get("keyShape");e.size||(i[0]=o.attr("width")||a.width,i[1]=o.attr("height")||a.height);var A={stroke:e.color,x:-i[0]/2,y:-i[1]/2,width:i[0],height:i[1]},s=mt({},a,o.attr(),A);s=mt(s,e.style),this.updateShape(e,t,s,!1,n)}},"single-node");xr.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:ct.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(e,t){var n=this.shapeType,a=this.getShapeStyle(e);delete a.fill;var i=t.addShape(n,{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(e,i),i},drawClip:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).clipCfg;if(n.show){var a=n.type,i=n.x,o=n.y,A=n.style;if(a==="circle"){var s=n.r;t.setClip({type:"circle",attrs:P({r:s,x:i,y:o},A)})}else if(a==="rect"){var u=n.width,f=n.height,l=i-u/2,c=o-f/2;t.setClip({type:"rect",attrs:P({x:l,y:c,width:u,height:f},A)})}else if(a==="ellipse"){var h=n.rx,d=n.ry;t.setClip({type:"ellipse",attrs:P({x:i,y:o,rx:h,ry:d},A)})}else if(a==="polygon"){var v=n.points;t.setClip({type:"polygon",attrs:P({points:v},A)})}else if(a==="path"){var g=n.path;t.setClip({type:"path",attrs:P({path:g},A)})}}},getShapeStyle:function(e){var t=this.mergeStyle||this.getOptions(e),n=t.style,a=t.img,i=this.getSize(e),o=i[0],A=i[1];n&&(o=n.width||i[0],A=n.height||i[1]);var s=P({x:-o/2,y:-A/2,width:o,height:A,img:a},n);return s},updateShapeStyle:function(e,t){var n=t.getContainer(),a="".concat(this.itemType,"-shape"),i=n.shapeMap[a]||n.find(function(A){return A.get("className")===a})||t.getKeyShape(),o=this.getShapeStyle(e);i&&!i.destroyed&&i.attr(o)}},"single-node");const BO={triangle:function(e,t,n){e===void 0&&(e=10),t===void 0&&(t=15),n===void 0&&(n=0);var a=n*2,i="M ".concat(a,",0 L ").concat(a+t,",-").concat(e/2," L ").concat(a+t,",").concat(e/2," Z");return i},vee:function(e,t,n){e===void 0&&(e=15),t===void 0&&(t=20),n===void 0&&(n=0);var a=n*2,i="M ".concat(a,",0 L ").concat(a+t,",-").concat(e/2,`
        L `).concat(a+2*t/3,",0 L ").concat(a+t,",").concat(e/2," Z");return i},circle:function(e,t){e===void 0&&(e=5),t===void 0&&(t=0);var n=t*2,a="M ".concat(n,`, 0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(e*2,`,0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(-e*2,",0");return a},rect:function(e,t,n){e===void 0&&(e=10),t===void 0&&(t=10),n===void 0&&(n=0);var a=n*2,i="M ".concat(a,",").concat(-e/2,` 
        L `).concat(a+t,",").concat(-e/2,` 
        L `).concat(a+t,",").concat(e/2,` 
        L `).concat(a,",").concat(e/2," Z");return i},diamond:function(e,t,n){e===void 0&&(e=15),t===void 0&&(t=15),n===void 0&&(n=0);var a=n*2,i="M ".concat(a,`,0 
        L `).concat(a+t/2,",").concat(-e/2,` 
        L `).concat(a+t,`,0 
        L `).concat(a+t/2,",").concat(e/2," Z");return i},triangleRect:function(e,t,n,a,i,o){e===void 0&&(e=15),t===void 0&&(t=15),n===void 0&&(n=15),a===void 0&&(a=3),i===void 0&&(i=5),o===void 0&&(o=0);var A=o*2,s=A+t+i,u="M ".concat(A,",0 L ").concat(A+t,",-").concat(e/2," L ").concat(A+t,",").concat(e/2,` Z
            M `).concat(s,", -").concat(n/2,`
            L `).concat(s+a," -").concat(n/2,`
            L `).concat(s+a," ").concat(n/2,`
            L `).concat(s," ").concat(n/2,`
            Z`);return u}},EO={collapse:function(e,t,n){return[["M",e-n,t],["a",n,n,0,1,0,n*2,0],["a",n,n,0,1,0,-n*2,0],["M",e-n+4,t],["L",e+n-4,t]]},expand:function(e,t,n){return[["M",e-n,t],["a",n,n,0,1,0,n*2,0],["a",n,n,0,1,0,-n*2,0],["M",e-n+4,t],["L",e-n+2*n-4,t],["M",e-n+n,t-n+4],["L",e,t+n-4]]},upTriangle:function(e,t,n){var a=n*Math.cos(Math.PI/6),i=n*Math.sin(Math.PI/6);return[["M",e-a,t+i],["L",e+a,t+i],["L",e,t-n],["Z"]]},downTriangle:function(e,t,n){var a=n*Math.cos(Math.PI/6),i=n*Math.sin(Math.PI/6);return[["M",e-a,t-i],["L",e+a,t-i],["L",e,t+n],["Z"]]}};var bV=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"];const xV=Object.freeze(Object.defineProperty({__proto__:null,defaultSubjectColors:bV},Symbol.toStringTag,{value:"Module"}));var bO=function(e){return e==="force"||e==="g6force"||e==="gForce"||e==="force2"};const CV=Object.freeze(Object.defineProperty({__proto__:null,isForce:bO},Symbol.toStringTag,{value:"Module"}));var _V=Xa,Hn=P(P(P(P(P(P(P({},QW),oj),aV),ZK),xV),CV),{transform:_V,mat3:bF}),xO=function(){function r(e){this.graph=e,this.layoutCfg=e.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return r.prototype.initLayout=function(){},r.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},r.prototype.getLayoutCfgType=function(e){var t=e.type;if(t)return t;var n=e.pipes;return Array.isArray(n)?n.map(function(a){return(a==null?void 0:a.type)||""}):null},r.prototype.isLayoutTypeSame=function(e){var t=this.getLayoutCfgType(e),n=Array.isArray(this.layoutType),a=Array.isArray(t);return n&&a?this.layoutType.every(function(i,o){return i===t[o]}):Array.isArray(t)||Array.isArray(this.layoutType)?!1:(e==null?void 0:e.type)===this.layoutType},r.prototype.refreshLayout=function(){var e=this,t=e.graph,n=e.layoutType,a=e.layoutCfg,i=a===void 0?{}:a;if(t){var o=i.animate,A=o===void 0&&(n==="force"||n==="force2"),s=bO(n)&&(o||A);t.get("animate")&&!s?t.positionsAnimate(n==="comboCombined"):t.refreshPositions(n==="comboCombined")}},r.prototype.changeLayout=function(e){var t=e.disableTriggerLayout,n=mn(e,["disableTriggerLayout"]);this.layoutCfg=n,this.layoutType=n.type||this.layoutType,!t&&this.layout()},r.prototype.changeData=function(e){this.layout(e)},r.prototype.destoryLayoutMethods=function(){var e=this.layoutMethods,t=[];return e==null||e.forEach(function(n){var a,i=(a=n.getType)===null||a===void 0?void 0:a.call(n);i&&t.push(i),n.destroy()}),this.layoutMethods=[],t},r.prototype.destroyLayout=function(){this.destoryLayoutMethods();var e=this.graph;e&&!e.get("destroyed")&&e.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},r.prototype.setDataFromGraph=function(){for(var e,t=[],n=[],a=[],i=[],o=[],A=[],s=[],u=this.graph.getNodes(),f=this.graph.getEdges(),l=this.graph.getCombos(),c=u.length,h=0;h<c;h++){var d=u[h];if(!(!d||d.destroyed)){var v=d.getModel();if(!d.isVisible()){n.push(v);continue}t.push(v)}}for(var g=f.length,h=0;h<g;h++){var p=f[h];if(!(!p||p.destroyed)){var v=p.getModel();if(!p.isVisible()){i.push(v);continue}v.isComboEdge?o.push(v):a.push(v)}}for(var y=l.length,h=0;h<y;h++){var m=l[h];if(!m.destroyed){var v=m.getModel();if(!m.isVisible()){s.push(v);continue}A.push(v)}}return{nodes:t,hiddenNodes:n,edges:a,hiddenEdges:i,combos:A,hiddenCombos:s,comboEdges:o,vedges:(e=this.graph.get("vedges"))===null||e===void 0?void 0:e.map(function(w){return w.getModel()})}},r.prototype.relayout=function(e){var t=this,n=this,a=n.graph,i=n.layoutMethods,o=n.layoutCfg;if(!(!a||a.get("destroyed"))){var A=Promise.resolve();if(e){this.data=this.setDataFromGraph();var s=this.data.nodes;if(!s)return!1;A=this.initPositions(o.center,s)}a.emit("beforelayout"),i==null||i.forEach(function(u,f){var l=o[f]||o;A=A.then(function(){var c,h=t.execLayoutMethod(l,f);return f===i.length-1&&((c=o.onAllLayoutEnd)===null||c===void 0||c.call(o)),h})})}},r.prototype.filterLayoutData=function(e,t){var n=e.nodes,a=e.edges,i=mn(e,["nodes","edges"]);if(!n)return e;var o,A;Lr(t==null?void 0:t.nodesFilter)?o=t.nodesFilter:o=function(){return!0};var s=n.filter(o);if(Lr(t==null?void 0:t.edgesFilter))A=t.edgesFilter;else{var u=s.reduce(function(f,l){return f[l.id]=!0,f},{});A=function(l){return u[l.source]&&u[l.target]}}return P({nodes:s,edges:a.filter(A)},i)},r.prototype.getLayoutBBox=function(e){var t=this.graph,n=Sv(t.getNodes(),function(o){return o.getModel().layoutOrder}),a=Object.values(n).map(function(o){var A=iO(o);return A.size=[A.width,A.height],A}),i=Object.values(Sv(e,"layoutOrder"));return{groupNodes:i,layoutNodes:a}},r.prototype.layoutAnimate=function(){},r.prototype.moveToZero=function(){var e=this.graph,t=e.get("data"),n=t.nodes;if(!(n[0].x===void 0||n[0].x===null||Ni(n[0].x))){for(var a=[0,0],i=n.length,o=0;o<i;o++){var A=n[o];a[0]+=A.x,a[1]+=A.y}a[0]/=n.length,a[1]/=n.length;for(var o=0;o<i;o++){var A=n[o];A.x-=a[0],A.y-=a[1]}}},r.prototype.initPositions=function(e,t){var n;return Ba(this,void 0,void 0,function(){var a,i,o;return Ea(this,function(A){return a=this.graph,t!=null&&t.length?(i=t.filter(function(s){return Ni(s.x)||Ni(s.y)}),o=i?i.length:0,o?[2,(n=this.initWithPreset)===null||n===void 0?void 0:n.call(this,function(){},function(){var s=a.get("width")*.85,u=a.get("height")*.85,f=Math.ceil(Math.sqrt(o)*(s/u)),l=Math.ceil(o/f),c=s/(f-1),h=u/(l-1);(!isFinite(c)||!c)&&(c=0),(!isFinite(h)||!c)&&(h=0);for(var d=e[0]-s/2,v=e[1]-u/2,g=0;g<o;g++){var p=i[g];Ni(+p.x)&&(p.x=g%f*c+d),Ni(+p.y)&&(p.y=Math.floor(g/f)*h+v)}})]:[2]):[2,Promise.resolve()]})})},r.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},r}(),CO=function(){function r(e){this.graph=e,this.destroyed=!1,this.initEvents()}return r}(),ko=xr.registerNode,_O=xr.registerEdge,SV=xr.registerCombo,SO=Rw.registerBehavior,qe=ct;ct.version,xr.registerNode,xr.registerEdge,xr.registerCombo,Rw.registerBehavior;var xB={},Jt={},Qg={},_A={};Object.defineProperty(_A,"__esModule",{value:!0});_A.MESSAGE=_A.ALGORITHM=void 0;var MV={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};_A.ALGORITHM=MV;var IV={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};_A.MESSAGE=IV;var Rg={},MO={},Ns={};Object.defineProperty(Ns,"__esModule",{value:!0});Ns.default=void 0;var TV=function(e,t){var n=e.nodes,a=e.edges,i=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(function(A,s){o[A.id]=s;var u=[];i.push(u)}),a&&a.forEach(function(A){var s=A.source,u=A.target,f=o[s],l=o[u];!f&&f!==0||!l&&l!==0||(i[f][l]=1,t||(i[l][f]=1))}),i},FV=TV;Ns.default=FV;var Hg={},Gg={},Xu={};Object.defineProperty(Xu,"__esModule",{value:!0});Xu.default=Xu.LinkedListNode=void 0;var LV=function(e,t){return e===t},A1=function(){function r(e,t){t===void 0&&(t=null),this.value=e,this.next=t}return r.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},r}();Xu.LinkedListNode=A1;var DV=function(){function r(e){e===void 0&&(e=LV),this.head=null,this.tail=null,this.compare=e}return r.prototype.prepend=function(e){var t=new A1(e,this.head);return this.head=t,this.tail||(this.tail=t),this},r.prototype.append=function(e){var t=new A1(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},r.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var n=this.head;if(n!==null)for(;n.next;)this.compare(n.next.value,e)?(t=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,e)&&(this.tail=n),t},r.prototype.find=function(e){var t=e.value,n=t===void 0?void 0:t,a=e.callback,i=a===void 0?void 0:a;if(!this.head)return null;for(var o=this.head;o;){if(i&&i(o.value)||n!==void 0&&this.compare(o.value,n))return o;o=o.next}return null},r.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},r.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},r.prototype.fromArray=function(e){var t=this;return e.forEach(function(n){return t.append(n)}),this},r.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},r.prototype.reverse=function(){for(var e=this.head,t=null,n=null;e;)n=e.next,e.next=t,t=e,e=n;this.tail=this.head,this.head=t},r.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(t){return t.toString(e)}).toString()},r}(),OV=DV;Xu.default=OV;Object.defineProperty(Gg,"__esModule",{value:!0});Gg.default=void 0;var UV=NV(Xu);function NV(r){return r&&r.__esModule?r:{default:r}}var kV=function(){function r(){this.linkedList=new UV.default}return r.prototype.isEmpty=function(){return!this.linkedList.head},r.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},r.prototype.enqueue=function(e){this.linkedList.append(e)},r.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},r.prototype.toString=function(e){return this.linkedList.toString(e)},r}(),PV=kV;Gg.default=PV;var cn={};Object.defineProperty(cn,"__esModule",{value:!0});cn.uniqueId=cn.getOutEdgesNodeId=cn.getNeighbors=cn.getEdgesByNodeId=void 0;var QV=function(e,t,n){t===void 0&&(t=[]);var a=t.filter(function(s){return s.source===e||s.target===e});if(n==="target"){var i=function(u){return u.source===e};return a.filter(i).map(function(s){return s.target})}if(n==="source"){var o=function(u){return u.target===e};return a.filter(o).map(function(s){return s.source})}var A=function(u){return u.source===e?u.target:u.source};return a.map(A)};cn.getNeighbors=QV;var RV=function(e,t){return t.filter(function(n){return n.source===e})};cn.getOutEdgesNodeId=RV;var HV=function(e,t){return t.filter(function(n){return n.source===e||n.target===e})};cn.getEdgesByNodeId=HV;var GV=function(e){e===void 0&&(e=0);var t="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(t).concat(n)};cn.uniqueId=GV;Object.defineProperty(Hg,"__esModule",{value:!0});Hg.default=void 0;var zV=jV(Gg),KV=cn;function jV(r){return r&&r.__esModule?r:{default:r}}function $V(r){r===void 0&&(r={});var e=r,t=function(){},n=function(){var a={};return function(i){var o=i.next,A=o;return a[A]?!1:(a[A]=!0,!0)}}();return e.allowTraversal=r.allowTraversal||n,e.enter=r.enter||t,e.leave=r.leave||t,e}var WV=function(e,t,n,a){a===void 0&&(a=!0);var i=$V(n),o=new zV.default,A=e.edges,s=A===void 0?[]:A;o.enqueue(t);for(var u="",f=function(){var c=o.dequeue();i.enter({current:c,previous:u}),(0,KV.getNeighbors)(c,s,a?"target":void 0).forEach(function(h){i.allowTraversal({previous:u,current:c,next:h})&&o.enqueue(h)}),i.leave({current:c,previous:u}),u=c};!o.isEmpty();)f()},VV=WV;Hg.default=VV;var SA={};Object.defineProperty(SA,"__esModule",{value:!0});SA.default=XV;SA.detectStrongConnectComponents=SA.detectConnectedComponents=void 0;var IO=cn,TO=function(e){for(var t=e.nodes,n=t===void 0?[]:t,a=e.edges,i=a===void 0?[]:a,o=[],A={},s=[],u=function h(d){s.push(d),A[d.id]=!0;for(var v=(0,IO.getNeighbors)(d.id,i),g=function(m){var w=v[m];if(!A[w]){var B=n.filter(function(E){return E.id===w});B.length>0&&h(B[0])}},p=0;p<v.length;++p)g(p)},f=0;f<n.length;f++){var l=n[f];if(!A[l.id]){u(l);for(var c=[];s.length>0;)c.push(s.pop());o.push(c)}}return o};SA.detectConnectedComponents=TO;var FO=function(e){for(var t=e.nodes,n=t===void 0?[]:t,a=e.edges,i=a===void 0?[]:a,o=[],A={},s={},u={},f=[],l=0,c=function g(p){s[p.id]=l,u[p.id]=l,l+=1,o.push(p),A[p.id]=!0;for(var y=(0,IO.getNeighbors)(p.id,i,"target").filter(function(b){return n.map(function(C){return C.id}).indexOf(b)>-1}),m=function(C){var _=y[C];if(!s[_]&&s[_]!==0){var x=n.filter(function(M){return M.id===_});x.length>0&&g(x[0]),u[p.id]=Math.min(u[p.id],u[_])}else A[_]&&(u[p.id]=Math.min(u[p.id],s[_]))},w=0;w<y.length;w++)m(w);if(u[p.id]===s[p.id]){for(var B=[];o.length>0;){var E=o.pop();if(A[E.id]=!1,B.push(E),E===p)break}B.length>0&&f.push(B)}},h=0,d=n;h<d.length;h++){var v=d[h];!s[v.id]&&s[v.id]!==0&&c(v)}return f};SA.detectStrongConnectComponents=FO;function XV(r,e){return e?FO(r):TO(r)}var Fo={};Object.defineProperty(Fo,"__esModule",{value:!0});Fo.getOutDegree=Fo.getInDegree=Fo.default=void 0;var tc=function(e){var t={},n=e.nodes,a=n===void 0?[]:n,i=e.edges,o=i===void 0?[]:i;return a.forEach(function(A){t[A.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(A){t[A.source].degree++,t[A.source].outDegree++,t[A.target].degree++,t[A.target].inDegree++}),t},YV=tc;Fo.default=YV;var ZV=function(e,t){var n=tc(e);return n[t]?tc(e)[t].inDegree:0};Fo.getInDegree=ZV;var qV=function(e,t){var n=tc(e);return n[t]?tc(e)[t].outDegree:0};Fo.getOutDegree=qV;var Qi={},zg={};Object.defineProperty(zg,"__esModule",{value:!0});zg.default=tX;var JV=cn;function eX(r){r===void 0&&(r={});var e=r,t=function(){},n=function(){var a={};return function(i){var o=i.next;return a[o]?!1:(a[o]=!0,!0)}}();return e.allowTraversal=r.allowTraversal||n,e.enter=r.enter||t,e.leave=r.leave||t,e}function LO(r,e,t,n){n.enter({current:e,previous:t});var a=r.edges,i=a===void 0?[]:a;(0,JV.getNeighbors)(e,i,"target").forEach(function(o){n.allowTraversal({previous:t,current:e,next:o})&&LO(r,o,e,n)}),n.leave({current:e,previous:t})}function tX(r,e,t){LO(r,e,"",eX(t))}function s1(r){"@babel/helpers - typeof";return s1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s1(r)}Object.defineProperty(Qi,"__esModule",{value:!0});Qi.detectAllUndirectedCycle=Qi.detectAllDirectedCycle=Qi.detectAllCycles=Qi.default=void 0;var rX=aX(zg),DO=nX(SA),OO=cn;function UO(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(UO=function(a){return a?t:e})(r)}function nX(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||s1(r)!=="object"&&typeof r!="function")return{default:r};var t=UO(e);if(t&&t.has(r))return t.get(r);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in r)if(i!=="default"&&Object.prototype.hasOwnProperty.call(r,i)){var o=a?Object.getOwnPropertyDescriptor(r,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=r[i]}return n.default=r,t&&t.set(r,n),n}function aX(r){return r&&r.__esModule?r:{default:r}}var iX=function(e){var t=null,n=e.nodes,a=n===void 0?[]:n,i={},o={},A={},s={};a.forEach(function(l){o[l.id]=l});for(var u={enter:function(c){var h=c.current,d=c.previous;if(A[h]){t={};for(var v=h,g=d;g!==h;)t[v]=g,v=g,g=i[g];t[v]=g}else A[h]=h,delete o[h],i[h]=d},leave:function(c){var h=c.current;s[h]=h,delete A[h]},allowTraversal:function(c){var h=c.next;return t?!1:!s[h]}};Object.keys(o).length;){var f=Object.keys(o)[0];(0,rX.default)(e,f,u)}return t},NO=function(e,t,n){var a,i;n===void 0&&(n=!0);for(var o=[],A=(0,DO.default)(e,!1),s=0,u=A;s<u.length;s++){var f=u[s];if(f.length)for(var l=f[0],c=l.id,h=[l],d=(a={},a[c]=l,a),v=(i={},i[c]=new Set,i);h.length>0;)for(var g=h.pop(),p=g.id,y=(0,OO.getNeighbors)(p,e.edges),m=function(E){var b,C=y[E],_=e.nodes.find(function(O){return O.id===C});if(C===p)o.push((b={},b[C]=g,b));else if(!(C in v))d[C]=g,h.push(_),v[C]=new Set([g]);else if(!v[p].has(_)){for(var x=!0,M=[_,g],S=d[p];v[C].size&&!v[C].has(S)&&(M.push(S),S!==d[S.id]);)S=d[S.id];if(M.push(S),t&&n?(x=!1,M.findIndex(function(O){return t.indexOf(O.id)>-1})>-1&&(x=!0)):t&&!n&&M.findIndex(function(O){return t.indexOf(O.id)>-1})>-1&&(x=!1),x){for(var I={},D=1;D<M.length;D+=1)I[M[D-1].id]=M[D];M.length&&(I[M[M.length-1].id]=M[0]),o.push(I)}v[C].add(g)}},w=0;w<y.length;w+=1)m(w)}return o};Qi.detectAllUndirectedCycle=NO;var kO=function(e,t,n){n===void 0&&(n=!0);for(var a=[],i=new Set,o=[],A=[],s={},u={},f=function(S){for(var I=[S];I.length>0;){var D=I.pop();i.has(D)&&(i.delete(D),o[D.id].forEach(function(O){I.push(O)}),o[D.id].clear())}},l=function M(S,I,D){var O=!1;if(t&&n===!1&&t.indexOf(S.id)>-1)return O;a.push(S),i.add(S);for(var F=D[S.id],U=0;U<F.length;U+=1){var Q=s[F[U]];if(Q===I){for(var N={},R=1;R<a.length;R+=1)N[a[R-1].id]=a[R];a.length&&(N[a[a.length-1].id]=a[0]),A.push(N),O=!0}else i.has(Q)||M(Q,I,D)&&(O=!0)}if(O)f(S);else for(var U=0;U<F.length;U+=1){var Q=s[F[U]];o[Q.id].has(S)||o[Q.id].add(S)}return a.pop(),O},c=e.nodes,h=c===void 0?[]:c,d=0;d<h.length;d+=1){var v=h[d],g=v.id;u[g]=d,s[d]=v}if(t&&n)for(var p=function(S){var I=t[S];u[h[S].id]=u[I],u[I]=0,s[0]=h.find(function(D){return D.id===I}),s[u[h[S].id]]=h[S]},d=0;d<t.length;d++)p(d);for(var y=function(S){for(var I,D,O=1/0,F=0;F<S.length;F+=1)for(var U=S[F],Q=0;Q<U.length;Q++){var N=u[U[Q].id];N<O&&(O=N,D=F)}for(var R=S[D],J=[],F=0;F<R.length;F+=1){var re=R[F];J[re.id]=[];for(var ee=0,q=(0,OO.getNeighbors)(re.id,e.edges,"target").filter(function(Re){return R.map(function(tt){return tt.id}).indexOf(Re)>-1});ee<q.length;ee++){var ve=q[ee];ve===re.id&&!(n===!1&&t.indexOf(re.id)>-1)?A.push((I={},I[re.id]=re,I)):J[re.id].push(u[ve])}}return{component:R,adjList:J,minIdx:O}},m=0;m<h.length;){var w=h.filter(function(M){return u[M.id]>=m}),B=(0,DO.detectStrongConnectComponents)({nodes:w,edges:e.edges}).filter(function(M){return M.length>1});if(B.length===0)break;var E=y(B),b=E.minIdx,C=E.adjList,_=E.component;if(_.length>1){_.forEach(function(M){o[M.id]=new Set});var x=s[b];if(t&&n&&t.indexOf(x.id)===-1)return A;l(x,x,C),m=b+1}else break}return A};Qi.detectAllDirectedCycle=kO;var oX=function(e,t,n,a){return a===void 0&&(a=!0),t?kO(e,n,a):NO(e,n,a)};Qi.detectAllCycles=oX;var AX=iX;Qi.default=AX;var vf={};const PO=Zi(e5),bc=Zi(cH);Object.defineProperty(vf,"__esModule",{value:!0});vf.default=void 0;var F_=PO,sX=bc,L_=cn,uX=function(e,t,n){for(var a=1/0,i,o=0;o<t.length;o++){var A=t[o].id;!n[A]&&e[A]<=a&&(a=e[A],i=t[o])}return i},fX=function(e,t,n,a){var i=e.nodes,o=i===void 0?[]:i,A=e.edges,s=A===void 0?[]:A,u={},f={},l={};o.forEach(function(y,m){var w=y.id;f[w]=1/0,w===t&&(f[w]=0)});for(var c=o.length,h=function(m){var w=uX(f,o,u),B=w.id;if(u[B]=!0,f[B]===1/0)return"continue";var E=[];n?E=(0,L_.getOutEdgesNodeId)(B,s):E=(0,L_.getEdgesByNodeId)(B,s),E.forEach(function(b){var C=b.target,_=b.source,x=C===B?_:C,M=a&&b[a]?b[a]:1;f[x]>f[w.id]+M?(f[x]=f[w.id]+M,l[x]=[w.id]):f[x]===f[w.id]+M&&l[x].push(w.id)})},d=0;d<c;d++)h();l[t]=[t];var v={};for(var g in f)f[g]!==1/0&&QO(t,g,l,v);var p={};for(var g in v)p[g]=v[g][0];return{length:f,path:p,allPath:v}},lX=fX;vf.default=lX;function QO(r,e,t,n){if(r===e)return[r];if(n[e])return n[e];for(var a=[],i=0,o=t[e];i<o.length;i++){var A=o[i],s=QO(r,A,t,n);if(!s)return;for(var u=0,f=s;u<f.length;u++){var l=f[u];(0,sX.isArray)(l)?a.push((0,F_.__spreadArray)((0,F_.__spreadArray)([],l,!0),[e],!1)):a.push([l,e])}}return n[e]=a,n[e]}var Yu={};Object.defineProperty(Yu,"__esModule",{value:!0});Yu.findShortestPath=Yu.findAllPath=void 0;var cX=hX(vf),Vh=cn;function hX(r){return r&&r.__esModule?r:{default:r}}var dX=function(e,t,n,a,i){var o=(0,cX.default)(e,t,a,i),A=o.length,s=o.path,u=o.allPath;return{length:A[n],path:s[n],allPath:u[n]}};Yu.findShortestPath=dX;var vX=function(e,t,n,a){var i;if(t===n)return[[t]];var o=e.edges,A=o===void 0?[]:o,s=[t],u=(i={},i[t]=!0,i),f=[],l=[],c=a?(0,Vh.getNeighbors)(t,A,"target"):(0,Vh.getNeighbors)(t,A);for(f.push(c);s.length>0&&f.length>0;){var h=f[f.length-1];if(h.length){var d=h.shift();d&&(s.push(d),u[d]=!0,c=a?(0,Vh.getNeighbors)(d,A,"target"):(0,Vh.getNeighbors)(d,A),f.push(c.filter(function(p){return!u[p]})))}else{var v=s.pop();u[v]=!1,f.pop();continue}if(s[s.length-1]===n){var g=s.map(function(y){return y});l.push(g);var v=s.pop();u[v]=!1,f.pop()}}return l};Yu.findAllPath=vX;var xc={};Object.defineProperty(xc,"__esModule",{value:!0});xc.default=void 0;var gX=pX(Ns);function pX(r){return r&&r.__esModule?r:{default:r}}var yX=function(e,t){for(var n=(0,gX.default)(e,t),a=[],i=n.length,o=0;o<i;o+=1){a[o]=[];for(var A=0;A<i;A+=1)o===A?a[o][A]=0:n[o][A]===0||!n[o][A]?a[o][A]=1/0:a[o][A]=n[o][A]}for(var s=0;s<i;s+=1)for(var o=0;o<i;o+=1)for(var A=0;A<i;A+=1)a[o][A]>a[o][s]+a[s][A]&&(a[o][A]=a[o][s]+a[s][A]);return a},mX=yX;xc.default=mX;var Kg={};Object.defineProperty(Kg,"__esModule",{value:!0});Kg.default=void 0;var wX=EX(Ns),BX=cn;function EX(r){return r&&r.__esModule?r:{default:r}}var bX=function(e,t,n,a){t===void 0&&(t=!1),n===void 0&&(n="weight"),a===void 0&&(a=1e3);var i=e.nodes,o=i===void 0?[]:i,A=e.edges,s=A===void 0?[]:A,u={},f={};o.forEach(function(m,w){var B=(0,BX.uniqueId)();m.clusterId=B,u[B]={id:B,nodes:[m]},f[m.id]={node:m,idx:w}});var l=(0,wX.default)(e,t),c={};l.forEach(function(m,w){var B=o[w].id;c[B]={},m.forEach(function(E,b){if(E){var C=o[b].id;c[B][C]=E}})});for(var h=0,d=function(){var w=!1;if(o.forEach(function(B){var E={};Object.keys(c[B.id]).forEach(function(D){var O=c[B.id][D],F=f[D].node,U=F.clusterId;E[U]||(E[U]=0),E[U]+=O});var b=-1/0,C=[];if(Object.keys(E).forEach(function(D){b<E[D]?(b=E[D],C=[D]):b===E[D]&&C.push(D)}),!(C.length===1&&C[0]===B.clusterId)){var _=C.indexOf(B.clusterId);if(_>=0&&C.splice(_,1),C&&C.length){w=!0;var x=u[B.clusterId],M=x.nodes.indexOf(B);x.nodes.splice(M,1);var S=Math.floor(Math.random()*C.length),I=u[C[S]];I.nodes.push(B),B.clusterId=I.id}}}),!w)return"break";h++};h<a;){var v=d();if(v==="break")break}Object.keys(u).forEach(function(m){var w=u[m];(!w.nodes||!w.nodes.length)&&delete u[m]});var g=[],p={};s.forEach(function(m){var w=m.source,B=m.target,E=m[n]||1,b=f[w].node.clusterId,C=f[B].node.clusterId,_="".concat(b,"---").concat(C);if(p[_])p[_].weight+=E,p[_].count++;else{var x={source:b,target:C,weight:E,count:1};p[_]=x,g.push(x)}});var y=[];return Object.keys(u).forEach(function(m){y.push(u[m])}),{clusters:y,clusterEdges:g}},xX=bX;Kg.default=xX;var jg={},Cc={};Object.defineProperty(Cc,"__esModule",{value:!0});Cc.default=void 0;var CX=bc,_X=function(){function r(e){this.arr=e}return r.prototype.getArr=function(){return this.arr||[]},r.prototype.add=function(e){var t,n=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new r(n);if(!(n!=null&&n.length))return new r(this.arr);if(this.arr.length===n.length){var a=[];for(var i in this.arr)a[i]=this.arr[i]+n[i];return new r(a)}},r.prototype.subtract=function(e){var t,n=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new r(n);if(!(n!=null&&n.length))return new r(this.arr);if(this.arr.length===n.length){var a=[];for(var i in this.arr)a[i]=this.arr[i]-n[i];return new r(a)}},r.prototype.avg=function(e){var t=[];if(e!==0)for(var n in this.arr)t[n]=this.arr[n]/e;return new r(t)},r.prototype.negate=function(){var e=[];for(var t in this.arr)e[t]=-this.arr[t];return new r(e)},r.prototype.squareEuclideanDistance=function(e){var t,n=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var a=0;for(var i in this.arr)a+=Math.pow(this.arr[i]-e.arr[i],2);return a}},r.prototype.euclideanDistance=function(e){var t,n=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var a=0;for(var i in this.arr)a+=Math.pow(this.arr[i]-e.arr[i],2);return Math.sqrt(a)}else console.error("The two vectors are unequal in length.")},r.prototype.normalize=function(){var e=[],t=(0,CX.clone)(this.arr);t.sort(function(o,A){return o-A});var n=t[t.length-1],a=t[0];for(var i in this.arr)e[i]=(this.arr[i]-a)/(n-a);return new r(e)},r.prototype.norm2=function(){var e;if(!(!((e=this.arr)===null||e===void 0)&&e.length))return 0;var t=0;for(var n in this.arr)t+=Math.pow(this.arr[n],2);return Math.sqrt(t)},r.prototype.dot=function(e){var t,n=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(n!=null&&n.length))return 0;if(this.arr.length===n.length){var a=0;for(var i in this.arr)a+=this.arr[i]*e.arr[i];return a}else console.error("The two vectors are unequal in length.")},r.prototype.equal=function(e){var t,n=e.arr;if(((t=this.arr)===null||t===void 0?void 0:t.length)!==(n==null?void 0:n.length))return!1;for(var a in this.arr)if(this.arr[a]!==n[a])return!1;return!0},r}(),SX=_X;Cc.default=SX;var Ri={},Zu={};Object.defineProperty(Zu,"__esModule",{value:!0});Zu.secondReg=Zu.dateReg=void 0;var MX=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;Zu.secondReg=MX;var IX=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;Zu.dateReg=IX;Object.defineProperty(Ri,"__esModule",{value:!0});Ri.getPropertyWeight=Ri.getAllSortProperties=Ri.getAllProperties=Ri.default=void 0;var D_=Zu,CB=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=100);var n={};e.forEach(function(i){i.properties&&Object.keys(i.properties).forEach(function(o){if(o==="id"||!"".concat(i.properties[o]).match(D_.secondReg)&&!"".concat(i.properties[o]).match(D_.dateReg)&&isNaN(Number(i.properties[o]))){n.hasOwnProperty(o)&&delete n[o];return}n.hasOwnProperty(o)?n[o]+=1:n[o]=1})});var a=Object.keys(n).sort(function(i,o){return n[o]-n[i]});return a.length<t?a:a.slice(0,t)};Ri.getAllSortProperties=CB;var TX=function(e,t){return t.map(function(n){return e.hasOwnProperty(n)?e[n]:0})},RO=function(e){for(var t=CB(e),n=[],a=0;a<e.length;a++)n[a]=TX(e[a].properties,t);return n};Ri.getPropertyWeight=RO;var HO=function(e,t){t===void 0&&(t=void 0);var n=[];return e.forEach(function(a){t===void 0&&n.push(a),a[t]!==void 0&&n.push(a[t])}),n};Ri.getAllProperties=HO;var FX={getAllSortProperties:CB,getPropertyWeight:RO,getAllProperties:HO};Ri.default=FX;var Hi={},_c={};Object.defineProperty(_c,"__esModule",{value:!0});_c.DistanceType=void 0;var u1;_c.DistanceType=u1;(function(r){r.EuclideanDistance="euclideanDistance"})(u1||(_c.DistanceType=u1={}));Object.defineProperty(Hi,"__esModule",{value:!0});Hi.oneHot=Hi.getDistance=Hi.getAllKeyValueMap=Hi.default=void 0;var O_=bc,U_=_c,N_=LX(Cc);function LX(r){return r&&r.__esModule?r:{default:r}}var _B=function(e,t,n){var a=[];t!=null&&t.length?a=t:(e.forEach(function(o){a=a.concat(Object.keys(o))}),a=(0,O_.uniq)(a));var i={};return a.forEach(function(o){var A=[];e.forEach(function(s){s[o]!==void 0&&s[o]!==""&&A.push(s[o])}),A.length&&!(n!=null&&n.includes(o))&&(i[o]=(0,O_.uniq)(A))}),i};Hi.getAllKeyValueMap=_B;var GO=function(e,t,n){var a=_B(e,t,n),i=[];if(!Object.keys(a).length)return i;var o=Object.values(a),A=o.every(function(s){return s.every(function(u){return typeof u=="number"})});return e.forEach(function(s,u){var f=[];Object.keys(a).forEach(function(l){var c=s[l],h=a[l],d=h.findIndex(function(p){return c===p}),v=[];if(A)v.push(c);else for(var g=0;g<h.length;g++)g===d?v.push(1):v.push(0);f=f.concat(v)}),i[u]=f}),i};Hi.oneHot=GO;var zO=function(e,t,n,a){n===void 0&&(n=U_.DistanceType.EuclideanDistance);var i=0;switch(n){case U_.DistanceType.EuclideanDistance:i=new N_.default(e).euclideanDistance(new N_.default(t));break}return i};Hi.getDistance=zO;var DX={getAllKeyValueMap:_B,oneHot:GO,getDistance:zO};Hi.default=DX;Object.defineProperty(jg,"__esModule",{value:!0});jg.default=void 0;var OX=bc,UX=KO(Ns),Gf=KO(Cc),NX=Ri,kX=Hi;function KO(r){return r&&r.__esModule?r:{default:r}}var k_=function(e,t,n,a){for(var i=t.length,o=2*a,A=0,s=0;s<i;s++)for(var u=e[s].clusterId,f=0;f<i;f++){var l=e[f].clusterId;if(u===l){var c=t[s][f]||0,h=n[s]||0,d=n[f]||0;A+=c-h*d/o}}return A*=1/o,A},Ay=function(e,t){e===void 0&&(e=[]);for(var n=e.length,a=new Gf.default([]),i=0;i<n;i++)a=a.add(new Gf.default(t[i]));var o=a.avg(n);o.normalize();for(var A=0,i=0;i<n;i++){var s=new Gf.default(t[i]),u=s.squareEuclideanDistance(o);A+=u}var f=[];e.forEach(function(){f.push([])});for(var i=0;i<n;i++){var s=new Gf.default(t[i]);e[i].clusterInertial=0;for(var l=0;l<n;l++){if(i===l){f[i][l]=0;continue}var c=new Gf.default(t[l]);f[i][l]=s.squareEuclideanDistance(c),e[i].clusterInertial+=f[i][l]}}for(var h=0,d=2*n*A,i=0;i<n;i++)for(var v=e[i].clusterId,l=0;l<n;l++){var g=e[l].clusterId;if(!(i===l||v!==g)){var p=e[i].clusterInertial*e[l].clusterInertial/Math.pow(d,2)-f[i][l]/d;h+=p}}return Number(h.toFixed(4))},PX=function(e,t,n,a,i,o,A,s,u){t===void 0&&(t=!1),n===void 0&&(n="weight"),a===void 0&&(a=1e-4),i===void 0&&(i=!1),o===void 0&&(o=void 0),A===void 0&&(A=[]),s===void 0&&(s=["id"]),u===void 0&&(u=1);var f=e.nodes,l=f===void 0?[]:f,c=e.edges,h=c===void 0?[]:c,d=[];if(i){l.forEach(function(N,R){N.properties=N.properties||{},N.originIndex=R});var v=[];l.every(function(N){return N.hasOwnProperty("nodeType")})&&(v=Array.from(new Set(l.map(function(N){return N.nodeType}))),l.forEach(function(N){N.properties.nodeType=v.findIndex(function(R){return R===N.nodeType})}));var g=(0,NX.getAllProperties)(l,o);d=(0,kX.oneHot)(g,A,s)}var p=1,y={},m={};l.forEach(function(N,R){var J=String(p++);N.clusterId=J,y[J]={id:J,nodes:[N]},m[N.id]={node:N,idx:R}});var w=(0,UX.default)(e,t),B=[],E={},b=0;w.forEach(function(N,R){var J=0,re=l[R].id;E[re]={},N.forEach(function(ee,q){if(ee){J+=ee;var ve=l[q].id;E[re][ve]=ee,b+=ee}}),B.push(J)}),b/=2;for(var C=1/0,_=1/0,x=0,M=[],S={};;){i&&l.every(function(N){return N.hasOwnProperty("properties")})?C=k_(l,w,B,b)+Ay(l,d)*u:C=k_(l,w,B,b),x===0&&(_=C,M=l,S=y);var I=C>0&&C>_&&C-_<a;if(C>_&&(M=l.map(function(N){return{node:N,clusterId:N.clusterId}}),S=(0,OX.clone)(y),_=C),I||x>100)break;x++,Object.keys(y).forEach(function(N){var R=0;h.forEach(function(J){var re=J.source,ee=J.target,q=m[re].node.clusterId,ve=m[ee].node.clusterId;(q===N&&ve!==N||ve===N&&q!==N)&&(R=R+(J[n]||1))}),y[N].sumTot=R}),l.forEach(function(N,R){var J=y[N.clusterId],re=0,ee,q=B[R]/(2*b),ve=0,Me=J.nodes;Me.forEach(function(Kt){var gr=m[Kt.id].idx;ve+=w[R][gr]||0});var Re=ve-J.sumTot*q,tt=Me.filter(function(Kt){return Kt.id!==N.id});tt.forEach(function(Kt,gr){d[Kt.originIndex]});var st=Ay(tt,d)*u,at=E[N.id];if(Object.keys(at).forEach(function(Kt){var gr=m[Kt].node,lr=gr.clusterId;if(lr!==N.clusterId){var Ht=y[lr],tr=Ht.nodes;if(!(!tr||!tr.length)){var Kr=0;tr.forEach(function(Ne){var pe=m[Ne.id].idx;Kr+=w[R][pe]||0});var et=Kr-Ht.sumTot*q,ae=tr.concat([N]);ae.forEach(function(Ne,pe){d[Ne.originIndex]});var L=Ay(ae,d)*u,be=et-Re;i&&(be=et+L-(Re+st)),be>re&&(re=be,ee=Ht)}}}),re>0){ee.nodes.push(N);var Et=N.clusterId;N.clusterId=ee.id;var bt=J.nodes.indexOf(N);J.nodes.splice(bt,1);var fr=0,Qt=0;h.forEach(function(Kt){var gr=Kt.source,lr=Kt.target,Ht=m[gr].node.clusterId,tr=m[lr].node.clusterId;(Ht===ee.id&&tr!==ee.id||tr===ee.id&&Ht!==ee.id)&&(fr=fr+(Kt[n]||1)),(Ht===Et&&tr!==Et||tr===Et&&Ht!==Et)&&(Qt=Qt+(Kt[n]||1))}),ee.sumTot=fr,J.sumTot=Qt}})}var D={},O=0;Object.keys(S).forEach(function(N){var R=S[N];if(!R.nodes||!R.nodes.length){delete S[N];return}var J=String(O+1);J!==N&&(R.id=J,R.nodes=R.nodes.map(function(re){return{id:re.id,clusterId:J}}),S[J]=R,D[N]=J,delete S[N],O++)}),M.forEach(function(N){var R=N.node,J=N.clusterId;R&&(R.clusterId=J,R.clusterId&&D[R.clusterId]&&(R.clusterId=D[R.clusterId]))});var F=[],U={};h.forEach(function(N){var R=N.source,J=N.target,re=N[n]||1,ee=m[R].node.clusterId,q=m[J].node.clusterId;if(!(!ee||!q)){var ve="".concat(ee,"---").concat(q);if(U[ve])U[ve].weight+=re,U[ve].count++;else{var Me={source:ee,target:q,weight:re,count:1};U[ve]=Me,F.push(Me)}}});var Q=[];return Object.keys(S).forEach(function(N){Q.push(S[N])}),{clusters:Q,clusterEdges:F}},QX=PX;jg.default=QX;var $g={},Wg={};Object.defineProperty(Wg,"__esModule",{value:!0});Wg.default=void 0;var RX=function(){function r(e){this.count=e.length,this.parent={};for(var t=0,n=e;t<n.length;t++){var a=n[t];this.parent[a]=a}}return r.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},r.prototype.union=function(e,t){var n=this.find(e),a=this.find(t);n!==a&&(n<a?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},r.prototype.connected=function(e,t){return this.find(e)===this.find(t)},r}(),HX=RX;Wg.default=HX;var Vg={};Object.defineProperty(Vg,"__esModule",{value:!0});Vg.default=void 0;var GX=function(e,t){return e-t},zX=function(){function r(e){e===void 0&&(e=GX),this.compareFn=e,this.list=[]}return r.prototype.getLeft=function(e){return 2*e+1},r.prototype.getRight=function(e){return 2*e+2},r.prototype.getParent=function(e){return e===0?null:Math.floor((e-1)/2)},r.prototype.isEmpty=function(){return this.list.length<=0},r.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},r.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},r.prototype.insert=function(e){if(e!==null){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},r.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var n=this.list[t];this.list[t]=this.list[e],this.list[e]=n,e=t,t=this.getParent(e)}},r.prototype.moveDown=function(e){var t,n=e,a=this.getLeft(e),i=this.getRight(e),o=this.list.length;a!==null&&a<o&&this.compareFn(this.list[n],this.list[a])>0?n=a:i!==null&&i<o&&this.compareFn(this.list[n],this.list[i])>0&&(n=i),e!==n&&(t=[this.list[n],this.list[e]],this.list[e]=t[0],this.list[n]=t[1],this.moveDown(n))},r}(),KX=zX;Vg.default=KX;Object.defineProperty($g,"__esModule",{value:!0});$g.default=void 0;var jX=jO(Wg),$X=jO(Vg),sy=cn;function jO(r){return r&&r.__esModule?r:{default:r}}var WX=function(e,t){var n=[],a=e.nodes,i=a===void 0?[]:a,o=e.edges,A=o===void 0?[]:o;if(i.length===0)return n;var s=i[0],u=new Set;u.add(s);var f=function(g,p){return t?g.weight-p.weight:0},l=new $X.default(f);for((0,sy.getEdgesByNodeId)(s.id,A).forEach(function(v){l.insert(v)});!l.isEmpty();){var c=l.delMin(),h=c.source,d=c.target;u.has(h)&&u.has(d)||(n.push(c),u.has(h)||(u.add(h),(0,sy.getEdgesByNodeId)(h,A).forEach(function(v){l.insert(v)})),u.has(d)||(u.add(d),(0,sy.getEdgesByNodeId)(d,A).forEach(function(v){l.insert(v)})))}return n},P_=function(e,t){var n=[],a=e.nodes,i=a===void 0?[]:a,o=e.edges,A=o===void 0?[]:o;if(i.length===0)return n;var s=A.map(function(h){return h});t&&s.sort(function(h,d){return h.weight-d.weight});for(var u=new jX.default(i.map(function(h){return h.id}));s.length>0;){var f=s.shift(),l=f.source,c=f.target;u.connected(l,c)||(n.push(f),u.union(l,c))}return n},VX=function(e,t,n){var a={prim:WX,kruskal:P_};return n?a[n](e,t):P_(e,t)},XX=VX;$g.default=XX;var Xg={};Object.defineProperty(Xg,"__esModule",{value:!0});Xg.default=void 0;var YX=qX(Fo),ZX=cn;function qX(r){return r&&r.__esModule?r:{default:r}}var JX=function(e,t,n){typeof t!="number"&&(t=1e-6),typeof n!="number"&&(n=.85);for(var a=1,i=0,o=1e3,A=e.nodes,s=A===void 0?[]:A,u=e.edges,f=u===void 0?[]:u,l=s.length,c,h={},d={},v=0;v<l;++v){var g=s[v],p=g.id;h[p]=1/l,d[p]=1/l}for(var y=(0,YX.default)(e);o>0&&a>t;){i=0;for(var v=0;v<l;++v){var g=s[v],p=g.id;if(c=0,y[g.id].inDegree===0)h[p]=0;else{for(var m=(0,ZX.getNeighbors)(p,f,"source"),w=0;w<m.length;++w){var B=m[w],E=y[B].outDegree;E>0&&(c+=d[B]/E)}h[p]=n*c,i+=h[p]}}i=(1-i)/l,a=0;for(var v=0;v<l;++v){var g=s[v],p=g.id;c=h[p]+i,a+=Math.abs(c-d[p]),d[p]=c}o-=1}return d},e9=JX;Xg.default=e9;var Yg={},Zg={},un={};Object.defineProperty(un,"__esModule",{value:!0});un.VACANT_NODE_LABEL=un.VACANT_NODE_ID=un.VACANT_GRAPH_ID=un.VACANT_EDGE_LABEL=un.VACANT_EDGE_ID=un.Node=un.Graph=un.Edge=un.AUTO_EDGE_ID=void 0;var $O=-1;un.VACANT_EDGE_ID=$O;var rc=-1;un.VACANT_NODE_ID=rc;var WO="-1";un.VACANT_EDGE_LABEL=WO;var VO="-1";un.VACANT_NODE_LABEL=VO;var t9=-1;un.VACANT_GRAPH_ID=t9;var r9="-1";un.AUTO_EDGE_ID=r9;var f1=function(){function r(e,t,n,a){e===void 0&&(e=$O),t===void 0&&(t=rc),n===void 0&&(n=rc),a===void 0&&(a=WO),this.id=e,this.from=t,this.to=n,this.label=a}return r}();un.Edge=f1;var XO=function(){function r(e,t){e===void 0&&(e=rc),t===void 0&&(t=VO),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return r.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},r}();un.Node=XO;var n9=function(){function r(e,t,n){e===void 0&&(e=rc),t===void 0&&(t=!0),n===void 0&&(n=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return r.prototype.getNodeNum=function(){return this.nodes.length},r.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var n=new XO(e,t);this.nodes.push(n),this.nodeMap[e]=n,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},r.prototype.addEdge=function(e,t,n,a){if((this.edgeIdAutoIncrease||e===void 0)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[e])){var i=new f1(e,t,n,a);if(this.edges.push(i),this.edgeMap[e]=i,this.nodeMap[t].addEdge(i),this.edgeLabelMap[a]||(this.edgeLabelMap[a]=[]),this.edgeLabelMap[a].push(i),!this.directed){var o=new f1(e,n,t,a);this.nodeMap[n].addEdge(o),this.edgeLabelMap[a].push(o)}}},r}();un.Graph=n9;Object.defineProperty(Zg,"__esModule",{value:!0});Zg.default=void 0;var a9=bc,Aa=un,is=function(){function r(e,t,n,a,i){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:n||Aa.VACANT_NODE_LABEL,edgeLabel:a||Aa.VACANT_EDGE_LABEL,nodeLabel2:i||Aa.VACANT_NODE_LABEL}}return r.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},r.prototype.notEqualTo=function(e){return!this.equalTo(e)},r}(),Q_=function(){function r(){this.rmpath=[],this.dfsEdgeList=[]}return r.prototype.equalTo=function(e){var t=this.dfsEdgeList.length,n=e.length;if(t!==n)return!1;for(var a=0;a<t;a++)if(this.dfsEdgeList[a]!==e[a])return!1;return!0},r.prototype.notEqualTo=function(e){return!this.equalTo(e)},r.prototype.pushBack=function(e,t,n,a,i){return this.dfsEdgeList.push(new is(e,t,n,a,i)),this.dfsEdgeList},r.prototype.toGraph=function(e,t){e===void 0&&(e=Aa.VACANT_GRAPH_ID),t===void 0&&(t=!1);var n=new Aa.Graph(e,!0,t);return this.dfsEdgeList.forEach(function(a){var i=a.fromNode,o=a.toNode,A=a.nodeEdgeNodeLabel,s=A.nodeLabel1,u=A.edgeLabel,f=A.nodeLabel2;s!==Aa.VACANT_NODE_LABEL&&n.addNode(i,s),f!==Aa.VACANT_NODE_LABEL&&n.addNode(o,f),s!==Aa.VACANT_NODE_LABEL&&f!==s&&n.addEdge(void 0,i,o,u)}),n},r.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length,n=t-1;n>=0;n--){var a=this.dfsEdgeList[n],i=a.fromNode,o=a.toNode;i<o&&(e===void 0||o===e)&&(this.rmpath.push(n),e=i)}return this.rmpath},r.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach(function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)}),Object.keys(e).length},r}(),Xh=function(){function r(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return r.prototype.hasNode=function(e){return this.nodesUsed[e.id]===1},r.prototype.hasEdge=function(e){return this.edgesUsed[e.id]===1},r}(),i9=function(){function r(e){var t=e.graphs,n=e.minSupport,a=n===void 0?2:n,i=e.minNodeNum,o=i===void 0?1:i,A=e.maxNodeNum,s=A===void 0?4:A,u=e.top,f=u===void 0?10:u,l=e.directed,c=l===void 0?!1:l,h=e.verbose,d=h===void 0?!1:h;this.graphs=t,this.dfsCode=new Q_,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=a,this.top=f,this.directed=c,this.counter=0,this.maxNodeNum=s,this.minNodeNum=o,this.verbose=d,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return r.prototype.findForwardRootEdges=function(e,t){var n=this,a=[],i=e.nodeMap;return t.edges.forEach(function(o){(n.directed||t.label<=i[o.to].label)&&a.push(o)}),a},r.prototype.findBackwardEdge=function(e,t,n,a){if(!this.directed&&t===n)return null;for(var i=e.nodeMap,o=i[n.to],A=o.edges,s=A.length,u=0;u<s;u++){var f=A[u];if(!(a.hasEdge(f)||f.to!==t.from)){if(this.directed){if(i[t.from].label<i[n.to].label||i[t.from].label===i[n.to].label&&t.label<=f.label)return f}else if(t.label<f.label||t.label===f.label&&i[t.to].label<=i[n.to].label)return f}}return null},r.prototype.findForwardPureEdges=function(e,t,n,a){for(var i=[],o=t.to,A=e.nodeMap[o].edges,s=A.length,u=0;u<s;u++){var f=A[u],l=e.nodeMap[f.to];n<=l.label&&!a.hasNode(l)&&i.push(f)}return i},r.prototype.findForwardRmpathEdges=function(e,t,n,a){for(var i=[],o=e.nodeMap,A=o[t.to].label,s=o[t.from],u=s.edges,f=u.length,l=0;l<f;l++){var c=u[l],h=o[c.to].label;t.to===c.to||n>h||a.hasNode(o[c.to])||(t.label<c.label||t.label===c.label&&A<=h)&&i.push(c)}return i},r.prototype.getSupport=function(e){var t={};return e.forEach(function(n){t[n.graphId]||(t[n.graphId]=!0)}),Object.keys(t).length},r.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach(function(n){var a=e[n],i=a.nodeLabel1,o=a.edgeLabel,A=a.nodeLabel2;if(!t){t={nodeLabel1:i,edgeLabel:o,nodeLabel2:A};return}(i<t.nodeLabel1||i===t.nodeLabel1&&o<t.edgeLabel||i===t.nodeLabel1&&o===t.edgeLabel&&A<t.nodeLabel2)&&(t={nodeLabel1:i,edgeLabel:o,nodeLabel2:A})}),t},r.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose&&console.log("isMin checking",t),t.dfsEdgeList.length===1)return!0;var n=this.directed,a=t.toGraph(Aa.VACANT_GRAPH_ID,n),i=a.nodeMap,o=new Q_,A={};a.nodes.forEach(function(l){var c=e.findForwardRootEdges(a,l);c.forEach(function(h){var d=i[h.to],v="".concat(l.label,"-").concat(h.label,"-").concat(d.label);A[v]||(A[v]={projected:[],nodeLabel1:l.label,edgeLabel:h.label,nodeLabel2:d.label});var g={graphId:a.id,edge:h,preNode:null};A[v].projected.push(g)})});var s=this.findMinLabel(A);if(s){o.dfsEdgeList.push(new is(0,1,s.nodeLabel1,s.edgeLabel,s.nodeLabel2));var u=function l(c){for(var h=o.buildRmpath(),d=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,v=o.dfsEdgeList[h[0]].toNode,g={},p=!1,y=0,m=n?-1:0,w=function(U){if(p)return"break";c.forEach(function(Q){var N=new Xh(Q),R=e.findBackwardEdge(a,N.edges[h[U]],N.edges[h[0]],N);R&&(g[R.label]||(g[R.label]={projected:[],edgeLabel:R.label}),g[R.label].projected.push({graphId:a.id,edge:g,preNode:Q}),y=o.dfsEdgeList[h[U]].fromNode,p=!0)})},B=h.length-1;B>m;B--){var E=w(B);if(E==="break")break}if(p){var b=e.findMinLabel(g);o.dfsEdgeList.push(new is(v,y,Aa.VACANT_NODE_LABEL,b.edgeLabel,Aa.VACANT_NODE_LABEL));var C=o.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[C]!==o.dfsEdgeList[C]?!1:l(g[b.edgeLabel].projected)}var _={};p=!1;var x=0;c.forEach(function(F){var U=new Xh(F),Q=e.findForwardPureEdges(a,U.edges[h[0]],d,U);Q.length>0&&(p=!0,x=v,Q.forEach(function(N){var R="".concat(N.label,"-").concat(i[N.to].label);_[R]||(_[R]={projected:[],edgeLabel:N.label,nodeLabel2:i[N.to].label}),_[R].projected.push({graphId:a.id,edge:N,preNode:F})}))});for(var M=h.length,S=function(U){if(p)return"break";var Q=h[U];c.forEach(function(N){var R=new Xh(N),J=e.findForwardRmpathEdges(a,R.edges[Q],d,R);J.length>0&&(p=!0,x=o.dfsEdgeList[Q].fromNode,J.forEach(function(re){var ee="".concat(re.label,"-").concat(i[re.to].label);_[ee]||(_[ee]={projected:[],edgeLabel:re.label,nodeLabel2:i[re.to].label}),_[ee].projected.push({graphId:a.id,edge:re,preNode:N})}))})},B=0;B<M;B++){var I=S(B);if(I==="break")break}if(!p)return!0;var D=e.findMinLabel(_);o.dfsEdgeList.push(new is(x,v+1,Aa.VACANT_NODE_LABEL,D.edgeLabel,D.nodeLabel2));var O=o.dfsEdgeList.length-1;return t.dfsEdgeList[O]!==o.dfsEdgeList[O]?!1:l(_["".concat(D.edgeLabel,"-").concat(D.nodeLabel2)].projected)},f="".concat(s.nodeLabel1,"-").concat(s.edgeLabel,"-").concat(s.nodeLabel2);return u(A[f].projected)}},r.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,a9.clone)(e))}},r.prototype.subGraphMining=function(e){var t=this,n=this.getSupport(e);if(!(n<this.minSupport)&&this.isMin()){this.report();var a=this.dfsCode.getNodeNum(),i=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[i[0]].toNode,A=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,s={},u={};e.forEach(function(f){for(var l=t.graphs[f.graphId],c=l.nodeMap,h=new Xh(f),d=i.length-1;d>=0;d--){var v=t.findBackwardEdge(l,h.edges[i[d]],h.edges[i[0]],h);if(v){var g="".concat(t.dfsCode.dfsEdgeList[i[d]].fromNode,"-").concat(v.label);u[g]||(u[g]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[i[d]].fromNode,edgeLabel:v.label}),u[g].projected.push({graphId:f.graphId,edge:v,preNode:f})}}if(!(a>=t.maxNodeNum)){var p=t.findForwardPureEdges(l,h.edges[i[0]],A,h);p.forEach(function(m){var w="".concat(o,"-").concat(m.label,"-").concat(c[m.to].label);s[w]||(s[w]={projected:[],fromNodeId:o,edgeLabel:m.label,nodeLabel2:c[m.to].label}),s[w].projected.push({graphId:f.graphId,edge:m,preNode:f})});for(var y=function(w){var B=t.findForwardRmpathEdges(l,h.edges[i[w]],A,h);B.forEach(function(E){var b="".concat(t.dfsCode.dfsEdgeList[i[w]].fromNode,"-").concat(E.label,"-").concat(c[E.to].label);s[b]||(s[b]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[i[w]].fromNode,edgeLabel:E.label,nodeLabel2:c[E.to].label}),s[b].projected.push({graphId:f.graphId,edge:E,preNode:f})})},d=0;d<i.length;d++)y(d)}}),Object.keys(u).forEach(function(f){var l=u[f],c=l.toNodeId,h=l.edgeLabel;t.dfsCode.dfsEdgeList.push(new is(o,c,"-1",h,"-1")),t.subGraphMining(u[f].projected),t.dfsCode.dfsEdgeList.pop()}),Object.keys(s).forEach(function(f){var l=s[f],c=l.fromNodeId,h=l.edgeLabel,d=l.nodeLabel2;t.dfsCode.dfsEdgeList.push(new is(c,o+1,Aa.VACANT_NODE_LABEL,h,d)),t.subGraphMining(s[f].projected),t.dfsCode.dfsEdgeList.pop()})}},r.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,n=this.minSupport,a=this.frequentSize1Subgraphs,i={},o={},A={};return Object.keys(e).forEach(function(s){var u=e[s],f=u.nodeMap;u.nodes.forEach(function(l,c){var h=l.label,d="".concat(s,"-").concat(h);if(!A[d]){var v=i[h]||0;v++,i[h]=v}A[d]={graphKey:s,label:h},l.edges.forEach(function(g){var p=h,y=f[g.to].label;if(!t&&p>y){var m=y;y=p,p=m}var w=g.label,B="".concat(p,"-").concat(w,"-").concat(y);if(!o[B]){var E=o[B]||0;E++,o[B]=E}})})}),Object.keys(i).forEach(function(s){var u=i[s];if(!(u<n)){var f={nodes:[],edges:[]};f.nodes.push({id:"0",label:s}),a.push(f)}}),a},r.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs;this.directed;var n={};Object.keys(t).forEach(function(a){var i=t[a],o=i.nodeMap;i.nodes.forEach(function(A){var s=e.findForwardRootEdges(i,A);s.forEach(function(u){var f=o[u.to],l="".concat(A.label,"-").concat(u.label,"-").concat(f.label);n[l]||(n[l]={projected:[],nodeLabel1:A.label,edgeLabel:u.label,nodeLabel2:f.label});var c={graphId:a,edge:u,preNode:null};n[l].projected.push(c)})})}),Object.keys(n).forEach(function(a){var i=n[a],o=i.projected,A=i.nodeLabel1,s=i.edgeLabel,u=i.nodeLabel2;e.dfsCode.dfsEdgeList.push(new is(0,1,A,s,u)),e.subGraphMining(o),e.dfsCode.dfsEdgeList.pop()})}},r}(),o9=function(e,t,n,a){var i={};return Object.keys(e).forEach(function(o,A){var s=e[o],u=new Aa.Graph(A,!0,t),f={};s.nodes.forEach(function(l,c){u.addNode(c,l[n]),f[l.id]=c}),s.edges.forEach(function(l,c){var h=f[l.source],d=f[l.target];u.addEdge(-1,h,d,l[a])}),u&&u.getNodeNum()&&(i[u.id]=u)}),i},A9=function(e,t,n){var a=[];return e.forEach(function(i){var o={nodes:[],edges:[]};i.nodes.forEach(function(A){var s;o.nodes.push((s={id:"".concat(A.id)},s[t]=A.label,s))}),i.edges.forEach(function(A){var s;o.edges.push((s={source:"".concat(A.from),target:"".concat(A.to)},s[n]=A.label,s))}),a.push(o)}),a},R_="cluster",s9=function(e){var t=e.graphs,n=e.directed,a=n===void 0?!1:n,i=e.nodeLabelProp,o=i===void 0?R_:i,A=e.edgeLabelProp,s=A===void 0?R_:A,u=o9(t,a,o,s),f=e.minSupport,l=e.maxNodeNum,c=e.minNodeNum,h=e.verbose,d=e.top,v={graphs:u,minSupport:f,maxNodeNum:l,minNodeNum:c,top:d,verbose:h,directed:a},g=new i9(v);g.run();var p=A9(g.frequentSubgraphs,o,s);return p},u9=s9;Zg.default=u9;Object.defineProperty(Yg,"__esModule",{value:!0});Yg.default=void 0;var H_=PO,G_=SB(xc),f9=SB(Zg),z_=SB(vf),l9=cn;function SB(r){return r&&r.__esModule?r:{default:r}}var K_=function(e,t,n,a){n===void 0&&(n="cluster"),a===void 0&&(a=2);var i=[],o=e.nodes;return t.forEach(function(A,s){i.push(YO(o,A,s,n,a))}),i},YO=function(e,t,n,a,i){var o=[n],A=[],s={};return t.forEach(function(u,f){if(u<=i&&n!==f){o.push(f),A.push(e[f]);var l=e[f][a];s[l]?(s[l].count++,s[l].dists.push(u)):s[l]={count:1,dists:[u]}}}),Object.keys(s).forEach(function(u){s[u].dists=s[u].dists.sort(function(f,l){return f-l})}),{nodeIdx:n,nodeId:e[n].id,nodeIdxs:o,neighbors:A,neighborNum:o.length-1,nodeLabelCountMap:s}},c9=function(e,t,n,a,i){var o=Math.ceil(n/t),A={},s=0;return a.forEach(function(u,f){for(var l=0,c=0,h=u.nodeIdxs,d=u.neighborNum-1;l<o;){for(var v=h[1+Math.floor(Math.random()*d)],g=0;(A["".concat(f,"-").concat(v)]||A["".concat(v,"-").concat(f)])&&(v=Math.floor(Math.random()*t),g++,!(g>2*t)););if(g<2*t&&(A["".concat(f,"-").concat(v)]={start:f,end:v,distance:i[f][v]},l++,s++,s>=n))return A;if(c++,c>2*t)break}if(l<o){var p=o-l;o=(o+p)/(t-f-1)}}),A},iv=function(e,t,n,a){var i=n.nodes;return a||(a={}),Object.keys(e).forEach(function(o){var A,s;if(!(a&&a[o])){a[o]={nodes:[],edges:[]};var u=e[o],f=(A=t[u.start])===null||A===void 0?void 0:A.nodeIdxs,l=(s=t[u.end])===null||s===void 0?void 0:s.nodeIdxs;if(!(!f||!l)){var c=new Set(l),h=f.filter(function(y){return c.has(y)});if(!(!h||!h.length)){for(var d={},v=h.length,g=0;g<v;g++){var p=i[h[g]];a[o].nodes.push(p),d[p.id]=!0}n.edges.forEach(function(y){d[y.source]&&d[y.target]&&a[o].edges.push(y)})}}}}),a},ov=function(e,t,n,a){var i,o,A={};e.nodes.forEach(function(u){A[u.id]=u});var s=0;return!(!((i=t==null?void 0:t.edges)===null||i===void 0)&&i.length)||((o=t==null?void 0:t.nodes)===null||o===void 0?void 0:o.length)<2?0:(e.edges.forEach(function(u){var f=A[u.source][n],l=A[u.target][n],c=t==null?void 0:t.nodes[0][n],h=t==null?void 0:t.nodes[1][n],d=t==null?void 0:t.edges[0][a];u[a]===d&&(f===c&&l===h||f===h&&l===c)&&s++}),s)},h9=function(e,t,n){for(var a=1/0,i=0,o=function(u){var f=e[u],l=Object.keys(f).sort(function(y,m){return f[y]-f[m]}),c=10,h=[];l.forEach(function(y,m){h[m%c]||(h[m%c]={graphs:[],totalCount:0,aveCount:0}),h[m%c].graphs.push(y),h[m%c].totalCount+=f[y]});var d=0,v=[];h.forEach(function(y){var m=y.totalCount/y.graphs.length;y.aveCount=m,v.push(m);var w=0,B=y.length;y.graphs.forEach(function(E,b){var C=f[E];y.graphs.forEach(function(_,x){b!==x&&(w+=Math.abs(C-f[_]))})}),w/=B*(B-1)/2,d+=w}),d/=h.length;var g=0;v.forEach(function(y,m){v.forEach(function(w,B){m!==B&&(g+=Math.abs(y-w))}),g/=v.length*(v.length-1)/2});var p=g-d;a<p&&(a=p,i=u)},A=0;A<t;A++)o(A);return{structure:n[i],structureCountMap:e[i]}},j_=function(e,t){var n={},a={};return e.forEach(function(i,o){n[i.id]={idx:o,node:i,degree:0,inDegree:0,outDegree:0};var A=i[t];a[A]||(a[A]=[]),a[A].push(i)}),{nodeMap:n,nodeLabelMap:a}},$_=function(e,t,n){var a={},i={};return e.forEach(function(o,A){a["".concat(l9.uniqueId)]={idx:A,edge:o};var s=o[t];i[s]||(i[s]=[]),i[s].push(o);var u=n[o.source];u&&(u.degree++,u.outDegree++);var f=n[o.target];f&&(f.degree++,f.inDegree++)}),{edgeMap:a,edgeLabelMap:i}},W_=function(e,t,n){var a=t.length,i={};return t.forEach(function(o,A){for(var s=n?0:A+1,u=e[A].id,f=s;f<a;f++)if(A!==f){var l=e[f].id,c=o[f];i["".concat(u,"-").concat(l)]=c,n||(i["".concat(l,"-").concat(u)]=c)}}),i},d9=function(e,t,n,a,i,o,A,s,u,f,l){var c,h="".concat(t.id,"-").concat(n.id);if(f&&f[h])return f[h];var d=l?l[h]:void 0;if(!d){var v=(c={},c[h]={start:a[t.id].idx,end:a[n.id].idx,distance:i},c);l=iv(v,o,e,l),d=l[h]}return ov(d,A,s,u)},V_=function(e,t,n,a){var i,o,A,s=(i=e[t])===null||i===void 0?void 0:i.degree,u=(o=e[t])===null||o===void 0?void 0:o.inDegree,f=(A=e[t])===null||A===void 0?void 0:A.outDegree;return e[t]===void 0&&(s=1/0,u=1/0,f=1/0,a[t].forEach(function(l){var c=n[l.id].degree;s>c&&(s=c);var h=n[l.id].inDegree;u>h&&(u=h);var d=n[l.id].outDegree;f>d&&(f=d)}),e[t]={degree:s,inDegree:u,outDegree:f}),{minPatternNodeLabelDegree:s,minPatternNodeLabelInDegree:u,minPatternNodeLabelOutDegree:f}},v9=function(e,t,n,a,i,o,A){var s;if(n===void 0&&(n=!1),o===void 0&&(o="cluster"),A===void 0&&(A="cluster"),!(!e||!e.nodes)){var u=e.nodes.length;if(u){var f=(0,G_.default)(e,n),l=(0,G_.default)(t,n),c=W_(e.nodes,f,n),h=W_(t.nodes,l,n),d=j_(e.nodes,o),v=d.nodeMap,g=d.nodeLabelMap,p=j_(t.nodes,o),y=p.nodeMap,m=p.nodeLabelMap;$_(e.edges,A,v);var w=$_(t.edges,A,y).edgeLabelMap,B=[];l==null||l.forEach(function(et){B=B.concat(et)}),i||(i=Math.max.apply(Math,(0,H_.__spreadArray)((0,H_.__spreadArray)([],B,!1),[2],!1))),a||(a=i);var E=K_(e,f,o,a),b=K_(t,l,o,a),C=Math.min(100,u*(u-1)/2),_=c9(a,u,C,E,f),x=iv(_,E,e),M=10,S=1,I=1,D=4,O={graphs:x,nodeLabelProp:o,edgeLabelProp:A,minSupport:S,minNodeNum:I,maxNodeNum:D,directed:n},F=(0,f9.default)(O).slice(0,M),U=F.length,Q=[];F.forEach(function(et,ae){Q[ae]={},Object.keys(x).forEach(function(L){var be=x[L],Ne=ov(be,et,o,A);Q[ae][L]=Ne})});var N=h9(Q,U,F),R=N.structure,J=N.structureCountMap,re=t.nodes[0],ee=[],q=(s=t.nodes[0])===null||s===void 0?void 0:s[o],ve=-1/0;t.nodes.forEach(function(et){var ae=et[o],L=g[ae];(L==null?void 0:L.length)>ve&&(ve=L.length,ee=L,q=ae,re=et)});var Me={},Re={},tt={},st={},at={},Et={};Object.keys(m).forEach(function(et,ae){at[et]=[],n&&(Et[et]=[]);var L=m[et],be={};L.forEach(function(Xe){var Ze=h["".concat(re.id,"-").concat(Xe.id)];if(Ze&&at[et].push(Ze),be["".concat(re.id,"-").concat(Xe.id)]={start:0,end:y[Xe.id].idx,distance:Ze},n){var gt=h["".concat(Xe.id,"-").concat(re.id)];gt&&Et[et].push(gt)}}),at[et]=at[et].sort(function(Xe,Ze){return Xe-Ze}),n&&(Et[et]=Et[et].sort(function(Xe,Ze){return Xe-Ze})),Re=iv(be,b,t,Re);var Ne=[];if(Object.keys(be).forEach(function(Xe){if(tt[Xe]){Ne.push(tt[Xe]);return}var Ze=Re[Xe];tt[Xe]=ov(Ze,R,o,A),Ne.push(tt[Xe])}),Ne=Ne.sort(function(Xe,Ze){return Ze-Xe}),st["".concat(re.id,"-").concat(et)]=Ne,et!==q)for(var pe=(ee==null?void 0:ee.length)||0,ze=function(Ze){var gt=ee[Ze],Ot=E[v[gt.id].idx],cr=Ot.nodeLabelCountMap[et],Ut=m[et].length;if(!cr||cr.count<Ut)return ee.splice(Ze,1),"continue";for(var vr=!1,sr=0;sr<Ut;sr++)if(cr.dists[sr]>at[et][sr]){vr=!0;break}if(vr)return ee.splice(Ze,1),"continue";var wr={};Ot.neighbors.forEach(function(rr){var Pr=c["".concat(gt.id,"-").concat(rr.id)];wr["".concat(gt.id,"-").concat(rr.id)]={start:v[gt.id].idx,end:v[rr.id].idx,distance:Pr}}),x=iv(wr,E,e,x);var pr=[];Object.keys(wr).forEach(function(rr){if(J[rr]){pr.push(J[rr]);return}var Pr=x[rr];J[rr]=ov(Pr,R,o,A),pr.push(J[rr])}),pr=pr.sort(function(rr,Pr){return Pr-rr});for(var hn=!1,sr=0;sr<Ut;sr++)if(pr[sr]<Ne[sr]){hn=!0;break}if(hn)return ee.splice(Ze,1),"continue"},Ke=pe-1;Ke>=0;Ke--)ze(Ke)});var bt=[];ee==null||ee.forEach(function(et){for(var ae=v[et.id].idx,L=YO(e.nodes,f[ae],ae,o,i),be=L.neighbors,Ne=be.length,pe=!1,ze=Ne-1;ze>=0;ze--){if(be.length+1<t.nodes.length){pe=!0;return}var Ke=be[ze],Xe=Ke[o];if(!m[Xe]||!m[Xe].length){be.splice(ze,1);continue}if(!at[Xe]||!at[Xe].length){be.splice(ze,1);continue}var Ze="".concat(et.id,"-").concat(Ke.id),gt=c[Ze],Ot=at[Xe].length-1,cr=at[Xe][Ot];if(gt>cr){be.splice(ze,1);continue}if(n){var Ut="".concat(Ke.id,"-").concat(et.id),vr=c[Ut];Ot=Et[Xe].length-1;var sr=Et[Xe][Ot];if(vr>sr){be.splice(ze,1);continue}}var wr=J[Ze]?J[Ze]:d9(e,et,Ke,v,gt,E,R,o,A,J,x),pr="".concat(re.id,"-").concat(Xe),hn=st[pr][st[pr].length-1];if(wr<hn){be.splice(ze,1);continue}var rr=V_(Me,Xe,y,m),Pr=rr.minPatternNodeLabelDegree;if(rr.minPatternNodeLabelInDegree,rr.minPatternNodeLabelOutDegree,v[Ke.id].degree<Pr){be.splice(ze,1);continue}}pe||bt.push({nodes:[et].concat(be)})});var fr=(0,z_.default)(t,re.id,!1).length,Qt={};n?(Object.keys(fr).forEach(function(et){var ae=y[et].node[o];Qt[ae]?Qt[ae].push(fr[et]):Qt[ae]=[fr[et]]}),Object.keys(Qt).forEach(function(et){Qt[et].sort(function(ae,L){return ae-L})})):Qt=at;for(var Kt=bt.length,gr=function(ae){var L=bt[ae],be=L.nodes[0],Ne={},pe={};L.nodes.forEach(function(It,yr){pe[It.id]={idx:yr,node:It,degree:0,inDegree:0,outDegree:0};var wt=It[o];Ne[wt]?Ne[wt]++:Ne[wt]=1});var ze=[],Ke={};e.edges.forEach(function(It){pe[It.source]&&pe[It.target]&&(ze.push(It),Ke[It[A]]?Ke[It[A]]++:Ke[It[A]]=1,pe[It.source].degree++,pe[It.target].degree++,pe[It.source].outDegree++,pe[It.target].inDegree++)});for(var Xe=Object.keys(w).length,Ze=!1,gt=0;gt<Xe;gt++){var Ot=Object.keys(w)[gt];if(!Ke[Ot]||Ke[Ot]<w[Ot].length){Ze=!0;break}}if(Ze)return bt.splice(ae,1),"continue";var cr=ze.length;if(cr<t.edges.length)return bt.splice(ae,1),"break";for(var Ut=!1,vr=function(yr){var wt=ze[yr],Ir=wt[A],dn=w[Ir];if(!dn||!dn.length)return Ke[Ir]--,dn&&Ke[Ir]<dn.length?(Ut=!0,"break"):(ze.splice(yr,1),pe[wt.source].degree--,pe[wt.target].degree--,pe[wt.source].outDegree--,pe[wt.target].inDegree--,"continue");var so=pe[wt.source].node[o],uo=pe[wt.target].node[o],qa=!1;if(dn.forEach(function(Ei){var fo=y[Ei.source].node,lo=y[Ei.target].node;fo[o]===so&&lo[o]===uo&&(qa=!0),!n&&fo[o]===uo&&lo[o]===so&&(qa=!0)}),!qa)return Ke[Ir]--,dn&&Ke[Ir]<dn.length?(Ut=!0,"break"):(ze.splice(yr,1),pe[wt.source].degree--,pe[wt.target].degree--,pe[wt.source].outDegree--,pe[wt.target].inDegree--,"continue")},gt=cr-1;gt>=0;gt--){var sr=vr(gt);if(sr==="break")break}if(Ut)return bt.splice(ae,1),"continue";L.edges=ze;var wr=(0,z_.default)(L,L.nodes[0].id,!1).length;if(Object.keys(wr).reverse().forEach(function(It){if(!(It===L.nodes[0].id||Ut)){if(wr[It]===1/0){var yr=pe[It].node[o];if(Ne[yr]--,Ne[yr]<m[yr].length){Ut=!0;return}var wt=L.nodes.indexOf(pe[It].node);L.nodes.splice(wt,1),pe[It]=void 0;return}var Ir=v[It].node[o];if(!Qt[Ir]||!Qt[Ir].length||wr[It]>Qt[Ir][Qt[Ir].length-1]){var yr=pe[It].node[o];if(Ne[yr]--,Ne[yr]<m[yr].length){Ut=!0;return}var wt=L.nodes.indexOf(pe[It].node);L.nodes.splice(wt,1),pe[It]=void 0}}}),Ut)return bt.splice(ae,1),"continue";for(var pr=!0,hn=0;pr&&!Ut;){pr=!1;var rr=n?pe[be.id].degree<y[re.id].degree||pe[be.id].inDegree<y[re.id].inDegree||pe[be.id].outDegree<y[re.id].outDegree:pe[be.id].degree<y[re.id].degree;if(rr){Ut=!0;break}if(Ne[be[o]]<m[be[o]].length){Ut=!0;break}for(var Pr=L.nodes.length,da=Pr-1;da>=0;da--){var jr=L.nodes[da],Bi=pe[jr.id].degree,NA=pe[jr.id].inDegree,kA=pe[jr.id].outDegree,An=jr[o],Za=V_(Me,An,y,m),Ao=Za.minPatternNodeLabelDegree,PA=Za.minPatternNodeLabelInDegree,QA=Za.minPatternNodeLabelOutDegree,RA=n?Bi<Ao||NA<PA||kA<QA:Bi<Ao;if(RA){if(Ne[jr[o]]--,Ne[jr[o]]<m[jr[o]].length){Ut=!0;break}L.nodes.splice(da,1),pe[jr.id]=void 0,pr=!0}}if(Ut||!pr&&hn!==0)break;cr=ze.length;for(var va=cr-1;va>=0;va--){var Qr=ze[va];if(!pe[Qr.source]||!pe[Qr.target]){ze.splice(va,1);var ga=Qr[A];if(Ke[ga]--,pe[Qr.source]&&(pe[Qr.source].degree--,pe[Qr.source].outDegree--),pe[Qr.target]&&(pe[Qr.target].degree--,pe[Qr.target].inDegree--),w[ga]&&Ke[ga]<w[ga].length){Ut=!0;break}pr=!0}}hn++}if(Ut||Ut||L.nodes.length<t.nodes.length||ze.length<t.edges.length)return bt.splice(ae,1),"continue"},lr=Kt-1;lr>=0;lr--){var Ht=gr(lr);if(Ht==="break")break}for(var tr=bt.length,Kr=function(ae){var L=bt[ae],be={};L.edges.forEach(function(ze){var Ke="".concat(ze.source,"-").concat(ze.target,"-").concat(ze.label);be[Ke]?be[Ke]++:be[Ke]=1});for(var Ne=function(Ke){var Xe=bt[Ke],Ze={};Xe.edges.forEach(function(Ot){var cr="".concat(Ot.source,"-").concat(Ot.target,"-").concat(Ot.label);Ze[cr]?Ze[cr]++:Ze[cr]=1});var gt=!0;Object.keys(Ze).length!==Object.keys(be).length?gt=!1:Object.keys(be).forEach(function(Ot){Ze[Ot]!==be[Ot]&&(gt=!1)}),gt&&bt.splice(Ke,1)},pe=tr-1;pe>ae;pe--)Ne(pe);tr=bt.length},lr=0;lr<=tr-1;lr++)Kr(lr);return bt}}},g9=v9;Yg.default=g9;(function(r){function e(w){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},e(w)}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"GADDI",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(r,"breadthFirstSearch",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"connectedComponent",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"depthFirstSearch",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(r,"detectCycle",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"dijkstra",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"findAllPath",{enumerable:!0,get:function(){return u.findAllPath}}),Object.defineProperty(r,"findShortestPath",{enumerable:!0,get:function(){return u.findShortestPath}}),Object.defineProperty(r,"floydWarshall",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(r,"getAdjMatrix",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(r,"getDegree",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"getInDegree",{enumerable:!0,get:function(){return i.getInDegree}}),Object.defineProperty(r,"getNeighbors",{enumerable:!0,get:function(){return g.getNeighbors}}),Object.defineProperty(r,"getOutDegree",{enumerable:!0,get:function(){return i.getOutDegree}}),Object.defineProperty(r,"labelPropagation",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"louvain",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"minimumSpanningTree",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"pageRank",{enumerable:!0,get:function(){return d.default}});var t=m(Ns),n=m(Hg),a=m(SA),i=y(Fo),o=m(Qi),A=m(zg),s=m(vf),u=Yu,f=m(xc),l=m(Kg),c=m(jg),h=m($g),d=m(Xg),v=m(Yg),g=cn;function p(w){if(typeof WeakMap!="function")return null;var B=new WeakMap,E=new WeakMap;return(p=function(C){return C?E:B})(w)}function y(w,B){if(!B&&w&&w.__esModule)return w;if(w===null||e(w)!=="object"&&typeof w!="function")return{default:w};var E=p(B);if(E&&E.has(w))return E.get(w);var b={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in w)if(_!=="default"&&Object.prototype.hasOwnProperty.call(w,_)){var x=C?Object.getOwnPropertyDescriptor(w,_):null;x&&(x.get||x.set)?Object.defineProperty(b,_,x):b[_]=w[_]}return b.default=w,E&&E.set(w,b),b}function m(w){return w&&w.__esModule?w:{default:w}}})(MO);function l1(r){"@babel/helpers - typeof";return l1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l1(r)}Object.defineProperty(Rg,"__esModule",{value:!0});Rg.default=void 0;var uy=p9(MO),X_=_A;function ZO(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(ZO=function(a){return a?t:e})(r)}function p9(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||l1(r)!=="object"&&typeof r!="function")return{default:r};var t=ZO(e);if(t&&t.has(r))return t.get(r);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in r)if(i!=="default"&&Object.prototype.hasOwnProperty.call(r,i)){var o=a?Object.getOwnPropertyDescriptor(r,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=r[i]}return n.default=r,t&&t.set(r,n),n}var fy=typeof self<"u"?self:{};fy.onmessage=function(r){var e=r.data,t=e._algorithmType,n=e.data;if(t){if(typeof uy[t]=="function"){var a=uy[t].apply(uy,n);fy.postMessage({_algorithmType:X_.MESSAGE.SUCCESS,data:a});return}fy.postMessage({_algorithmType:X_.MESSAGE.FAILURE})}};var y9=null;Rg.default=y9;Object.defineProperty(Qg,"__esModule",{value:!0});Qg.default=void 0;var m9=_A,w9=B9(Rg);function B9(r){return r&&r.__esModule?r:{default:r}}var E9=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new Promise(function(a,i){var o=new w9.default;o.postMessage({_algorithmType:e,data:t}),o.onmessage=function(A){var s=A.data,u=s.data,f=s._algorithmType;m9.MESSAGE.SUCCESS===f?a(u):i(),o.terminate()}})}},b9=E9;Qg.default=b9;Object.defineProperty(Jt,"__esModule",{value:!0});Jt.pageRankAsync=Jt.minimumSpanningTreeAsync=Jt.louvainAsync=Jt.labelPropagationAsync=Jt.getOutDegreeAsync=Jt.getNeighborsAsync=Jt.getInDegreeAsync=Jt.getDegreeAsync=Jt.getAdjMatrixAsync=Jt.floydWarshallAsync=Jt.findShortestPathAsync=Jt.findAllPathAsync=Jt.dijkstraAsync=Jt.detectCycleAsync=Jt.detectAllUndirectedCycleAsync=Jt.detectAllDirectedCycleAsync=Jt.detectAllCyclesAsync=Jt.connectedComponentAsync=Jt.GADDIAsync=void 0;var En=x9(Qg),bn=_A;function x9(r){return r&&r.__esModule?r:{default:r}}var C9=function(e,t){return(0,En.default)(bn.ALGORITHM.getAdjMatrix).apply(void 0,[e,t])};Jt.getAdjMatrixAsync=C9;var _9=function(e,t){return(0,En.default)(bn.ALGORITHM.connectedComponent).apply(void 0,[e,t])};Jt.connectedComponentAsync=_9;var S9=function(e){return(0,En.default)(bn.ALGORITHM.getDegree)(e)};Jt.getDegreeAsync=S9;var M9=function(e,t){return(0,En.default)(bn.ALGORITHM.getInDegree)(e,t)};Jt.getInDegreeAsync=M9;var I9=function(e,t){return(0,En.default)(bn.ALGORITHM.getOutDegree)(e,t)};Jt.getOutDegreeAsync=I9;var T9=function(e){return(0,En.default)(bn.ALGORITHM.detectCycle)(e)};Jt.detectCycleAsync=T9;var F9=function(e){return(0,En.default)(bn.ALGORITHM.detectAllCycles)(e)};Jt.detectAllCyclesAsync=F9;var L9=function(e){return(0,En.default)(bn.ALGORITHM.detectAllDirectedCycle)(e)};Jt.detectAllDirectedCycleAsync=L9;var D9=function(e){return(0,En.default)(bn.ALGORITHM.detectAllUndirectedCycle)(e)};Jt.detectAllUndirectedCycleAsync=D9;var O9=function(e,t,n,a){return(0,En.default)(bn.ALGORITHM.dijkstra).apply(void 0,[e,t,n,a])};Jt.dijkstraAsync=O9;var U9=function(e,t,n,a){return(0,En.default)(bn.ALGORITHM.findAllPath).apply(void 0,[e,t,n,a])};Jt.findAllPathAsync=U9;var N9=function(e,t,n,a,i){return(0,En.default)(bn.ALGORITHM.findShortestPath).apply(void 0,[e,t,n,a,i])};Jt.findShortestPathAsync=N9;var k9=function(e,t){return(0,En.default)(bn.ALGORITHM.floydWarshall).apply(void 0,[e,t])};Jt.floydWarshallAsync=k9;var P9=function(e,t,n,a){return a===void 0&&(a=1e3),(0,En.default)(bn.ALGORITHM.labelPropagation)(e,t,n,a)};Jt.labelPropagationAsync=P9;var Q9=function(e,t,n,a){return(0,En.default)(bn.ALGORITHM.louvain)(e,t,n,a)};Jt.louvainAsync=Q9;var R9=function(e,t,n){return(0,En.default)(bn.ALGORITHM.minimumSpanningTree).apply(void 0,[e,t,n])};Jt.minimumSpanningTreeAsync=R9;var H9=function(e,t,n){return(0,En.default)(bn.ALGORITHM.pageRank).apply(void 0,[e,t,n])};Jt.pageRankAsync=H9;var G9=function(e,t,n){return(0,En.default)(bn.ALGORITHM.getNeighbors).apply(void 0,[e,t,n])};Jt.getNeighborsAsync=G9;var z9=function(e,t,n,a,i,o,A){return n===void 0&&(n=!1),o===void 0&&(o="cluster"),A===void 0&&(A="cluster"),(0,En.default)(bn.ALGORITHM.GADDI).apply(void 0,[e,t,n,a,i,o,A])};Jt.GADDIAsync=z9;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"GADDIAsync",{enumerable:!0,get:function(){return e.GADDIAsync}}),Object.defineProperty(r,"connectedComponentAsync",{enumerable:!0,get:function(){return e.connectedComponentAsync}}),r.default=void 0,Object.defineProperty(r,"detectAllCyclesAsync",{enumerable:!0,get:function(){return e.detectAllCyclesAsync}}),Object.defineProperty(r,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return e.detectAllDirectedCycleAsync}}),Object.defineProperty(r,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return e.detectAllUndirectedCycleAsync}}),Object.defineProperty(r,"detectCycleAsync",{enumerable:!0,get:function(){return e.detectCycleAsync}}),r.detectDirectedCycleAsync=void 0,Object.defineProperty(r,"dijkstraAsync",{enumerable:!0,get:function(){return e.dijkstraAsync}}),Object.defineProperty(r,"findAllPathAsync",{enumerable:!0,get:function(){return e.findAllPathAsync}}),Object.defineProperty(r,"findShortestPathAsync",{enumerable:!0,get:function(){return e.findShortestPathAsync}}),Object.defineProperty(r,"floydWarshallAsync",{enumerable:!0,get:function(){return e.floydWarshallAsync}}),Object.defineProperty(r,"getAdjMatrixAsync",{enumerable:!0,get:function(){return e.getAdjMatrixAsync}}),Object.defineProperty(r,"getDegreeAsync",{enumerable:!0,get:function(){return e.getDegreeAsync}}),Object.defineProperty(r,"getInDegreeAsync",{enumerable:!0,get:function(){return e.getInDegreeAsync}}),Object.defineProperty(r,"getNeighborsAsync",{enumerable:!0,get:function(){return e.getNeighborsAsync}}),Object.defineProperty(r,"getOutDegreeAsync",{enumerable:!0,get:function(){return e.getOutDegreeAsync}}),Object.defineProperty(r,"labelPropagationAsync",{enumerable:!0,get:function(){return e.labelPropagationAsync}}),Object.defineProperty(r,"louvainAsync",{enumerable:!0,get:function(){return e.louvainAsync}}),Object.defineProperty(r,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return e.minimumSpanningTreeAsync}}),Object.defineProperty(r,"pageRankAsync",{enumerable:!0,get:function(){return e.pageRankAsync}});var e=Jt,t=e.detectCycleAsync;r.detectDirectedCycleAsync=t;var n={getAdjMatrixAsync:e.getAdjMatrixAsync,connectedComponentAsync:e.connectedComponentAsync,getDegreeAsync:e.getDegreeAsync,getInDegreeAsync:e.getInDegreeAsync,getOutDegreeAsync:e.getOutDegreeAsync,detectCycleAsync:e.detectCycleAsync,detectDirectedCycleAsync:t,detectAllCyclesAsync:e.detectAllCyclesAsync,detectAllDirectedCycleAsync:e.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:e.detectAllUndirectedCycleAsync,dijkstraAsync:e.dijkstraAsync,findAllPathAsync:e.findAllPathAsync,findShortestPathAsync:e.findShortestPathAsync,floydWarshallAsync:e.floydWarshallAsync,labelPropagationAsync:e.labelPropagationAsync,louvainAsync:e.louvainAsync,minimumSpanningTreeAsync:e.minimumSpanningTreeAsync,pageRankAsync:e.pageRankAsync,getNeighborsAsync:e.getNeighborsAsync,GADDIAsync:e.GADDIAsync};r.default=n})(xB);const K9=qi(xB),j9=$3({__proto__:null,default:K9},[xB]);function $9(){return window?window.devicePixelRatio:1}function qO(r,e,t,n){var a=r-t,i=e-n;return Math.sqrt(a*a+i*i)}function ds(r,e,t,n,a,i){return a>=r&&a<=r+t&&i>=e&&i<=e+n}function nc(r,e){return!(e.minX>r.maxX||e.maxX<r.minX||e.minY>r.maxY||e.maxY<r.minY)}function W9(r,e){return!r||!e?r||e:{minX:Math.min(r.minX,e.minX),minY:Math.min(r.minY,e.minY),maxX:Math.max(r.maxX,e.maxX),maxY:Math.max(r.maxY,e.maxY)}}function Y_(r,e){return r[0]===e[0]&&r[1]===e[1]}var V9=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,X9=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Y9=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,JO=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function eU(r,e){var t=r.match(JO);ye(t,function(n){var a=n.split(":");e.addColorStop(a[0],a[1])})}function Z9(r,e,t){var n=V9.exec(t),a=parseFloat(n[1])%360*(Math.PI/180),i=n[2],o=e.getBBox(),A,s;a>=0&&a<1/2*Math.PI?(A={x:o.minX,y:o.minY},s={x:o.maxX,y:o.maxY}):1/2*Math.PI<=a&&a<Math.PI?(A={x:o.maxX,y:o.minY},s={x:o.minX,y:o.maxY}):Math.PI<=a&&a<3/2*Math.PI?(A={x:o.maxX,y:o.maxY},s={x:o.minX,y:o.minY}):(A={x:o.minX,y:o.maxY},s={x:o.maxX,y:o.minY});var u=Math.tan(a),f=u*u,l=(s.x-A.x+u*(s.y-A.y))/(f+1)+A.x,c=u*(s.x-A.x+u*(s.y-A.y))/(f+1)+A.y,h=r.createLinearGradient(A.x,A.y,l,c);return eU(i,h),h}function q9(r,e,t){var n=X9.exec(t),a=parseFloat(n[1]),i=parseFloat(n[2]),o=parseFloat(n[3]),A=n[4];if(o===0){var s=A.match(JO);return s[s.length-1].split(":")[1]}var u=e.getBBox(),f=u.maxX-u.minX,l=u.maxY-u.minY,c=Math.sqrt(f*f+l*l)/2,h=r.createRadialGradient(u.minX+f*a,u.minY+l*i,0,u.minX+f/2,u.minY+l/2,o*c);return eU(A,h),h}function J9(r,e,t){if(e.get("patternSource")&&e.get("patternSource")===t)return e.get("pattern");var n,a,i=Y9.exec(t),o=i[1],A=i[2];function s(){n=r.createPattern(a,o),e.set("pattern",n),e.set("patternSource",t)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return a=new Image,A.match(/^data:/i)||(a.crossOrigin="Anonymous"),a.src=A,a.complete?s():(a.onload=s,a.src=a.src),n}function e7(r,e,t){var n=e.getBBox();if(isNaN(n.x)||isNaN(n.y)||isNaN(n.width)||isNaN(n.height))return t;if(Oe(t)){if(t[1]==="("||t[2]==="("){if(t[0]==="l")return Z9(r,e,t);if(t[0]==="r")return q9(r,e,t);if(t[0]==="p")return J9(r,e,t)}return t}if(t instanceof CanvasPattern)return t}function t7(r){var e=0,t=0,n=0,a=0;return yt(r)?r.length===1?e=t=n=a=r[0]:r.length===2?(e=n=r[0],t=a=r[1]):r.length===3?(e=r[0],t=a=r[1],n=r[2]):(e=r[0],t=r[1],n=r[2],a=r[3]):e=t=n=a=r,[e,t,n,a]}function Yh(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function c1(r,e){return Yh(r)*Yh(e)?(r[0]*e[0]+r[1]*e[1])/(Yh(r)*Yh(e)):1}function Z_(r,e){return(r[0]*e[1]<r[1]*e[0]?-1:1)*Math.acos(c1(r,e))}function q_(r,e){var t=e[1],n=e[2],a=Fg(Lg(e[3]),Math.PI*2),i=e[4],o=e[5],A=r[0],s=r[1],u=e[6],f=e[7],l=Math.cos(a)*(A-u)/2+Math.sin(a)*(s-f)/2,c=-1*Math.sin(a)*(A-u)/2+Math.cos(a)*(s-f)/2,h=l*l/(t*t)+c*c/(n*n);h>1&&(t*=Math.sqrt(h),n*=Math.sqrt(h));var d=t*t*(c*c)+n*n*(l*l),v=d?Math.sqrt((t*t*(n*n)-d)/d):1;i===o&&(v*=-1),isNaN(v)&&(v=0);var g=n?v*t*c/n:0,p=t?v*-n*l/t:0,y=(A+u)/2+Math.cos(a)*g-Math.sin(a)*p,m=(s+f)/2+Math.sin(a)*g+Math.cos(a)*p,w=[(l-g)/t,(c-p)/n],B=[(-1*l-g)/t,(-1*c-p)/n],E=Z_([1,0],w),b=Z_(w,B);return c1(w,B)<=-1&&(b=Math.PI),c1(w,B)>=1&&(b=0),o===0&&b>0&&(b=b-2*Math.PI),o===1&&b<0&&(b=b+2*Math.PI),{cx:y,cy:m,rx:Y_(r,[u,f])?0:t,ry:Y_(r,[u,f])?0:n,startAngle:E,endAngle:E+b,xRotation:a,arcFlag:i,sweepFlag:o}}var Hv=Math.sin,Gv=Math.cos,MB=Math.atan2,Zh=Math.PI;function tU(r,e,t,n,a,i,o){var A=e.stroke,s=e.lineWidth,u=t-a,f=n-i,l=MB(f,u),c=new LB({type:"path",canvas:r.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*Gv(Zh/6)+","+10*Hv(Zh/6)+" L0,0 L"+10*Gv(Zh/6)+",-"+10*Hv(Zh/6),stroke:A,lineWidth:s}});c.translate(a,i),c.rotateAtPoint(a,i,l),r.set(o?"startArrowShape":"endArrowShape",c)}function rU(r,e,t,n,a,i,o){var A=e.startArrow,s=e.endArrow,u=e.stroke,f=e.lineWidth,l=o?A:s,c=l.d,h=l.fill,d=l.stroke,v=l.lineWidth,g=mn(l,["d","fill","stroke","lineWidth"]),p=t-a,y=n-i,m=MB(y,p);c&&(a=a-Gv(m)*c,i=i-Hv(m)*c);var w=new LB({type:"path",canvas:r.get("canvas"),isArrowShape:!0,attrs:P(P({},g),{stroke:d||u,lineWidth:v||f,fill:h})});w.translate(a,i),w.rotateAtPoint(a,i,m),r.set(o?"startArrowShape":"endArrowShape",w)}function ys(r,e,t,n,a){var i=MB(n-e,t-r);return{dx:Gv(i)*a,dy:Hv(i)*a}}function IB(r,e,t,n,a,i){typeof e.startArrow=="object"?rU(r,e,t,n,a,i,!0):e.startArrow?tU(r,e,t,n,a,i,!0):r.set("startArrowShape",null)}function TB(r,e,t,n,a,i){typeof e.endArrow=="object"?rU(r,e,t,n,a,i,!1):e.endArrow?tU(r,e,t,n,a,i,!1):r.set("startArrowShape",null)}var J_={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function qu(r,e){var t=e.attr();for(var n in t){var a=t[n],i=J_[n]?J_[n]:n;i==="matrix"&&a?r.transform(a[0],a[1],a[3],a[4],a[6],a[7]):i==="lineDash"&&r.setLineDash?yt(a)&&r.setLineDash(a):(i==="strokeStyle"||i==="fillStyle"?a=e7(r,e,a):i==="globalAlpha"&&(a=a*r.globalAlpha),r[i]=a)}}function h1(r,e,t){for(var n=0;n<e.length;n++){var a=e[n];a.cfg.visible?a.draw(r,t):a.skipDraw()}}function r7(r,e,t){var n=r.get("refreshElements");ye(n,function(a){if(a!==r)for(var i=a.cfg.parent;i&&i!==r&&!i.cfg.refresh;)i.cfg.refresh=!0,i=i.cfg.parent}),n[0]===r?FB(e):d1(e,t)}function d1(r,e){for(var t=0;t<r.length;t++){var n=r[t];if(n.cfg.visible)if(n.cfg.hasChanged)n.cfg.refresh=!0,n.isGroup()&&FB(n.cfg.children);else if(n.cfg.refresh)n.isGroup()&&d1(n.cfg.children,e);else{var a=n7(n,e);n.cfg.refresh=a,a&&n.isGroup()&&d1(n.cfg.children,e)}}}function nU(r){for(var e=0;e<r.length;e++){var t=r[e];t.cfg.hasChanged=!1,t.isGroup()&&!t.destroyed&&nU(t.cfg.children)}}function FB(r,e){for(var t=0;t<r.length;t++){var n=r[t];n.cfg.visible&&(n.cfg.refresh=!0,n.isGroup()&&FB(n.get("children")))}}function n7(r,e){var t=r.cfg.cacheCanvasBBox,n=r.cfg.isInView&&t&&nc(t,e);return n}function aU(r,e,t,n){var a=t.path,i=t.startArrow,o=t.endArrow;if(a){var A=[0,0],s=[0,0],u={dx:0,dy:0};e.beginPath();for(var f=0;f<a.length;f++){var l=a[f],c=l[0];if(f===0&&i&&i.d){var h=r.getStartTangent();u=ys(h[0][0],h[0][1],h[1][0],h[1][1],i.d)}else if(f===a.length-2&&a[f+1][0]==="Z"&&o&&o.d){var d=a[f+1];if(d[0]==="Z"){var h=r.getEndTangent();u=ys(h[0][0],h[0][1],h[1][0],h[1][1],o.d)}}else if(f===a.length-1&&o&&o.d&&a[0]!=="Z"){var h=r.getEndTangent();u=ys(h[0][0],h[0][1],h[1][0],h[1][1],o.d)}var v=u.dx,g=u.dy;switch(c){case"M":e.moveTo(l[1]-v,l[2]-g),s=[l[1],l[2]];break;case"L":e.lineTo(l[1]-v,l[2]-g);break;case"Q":e.quadraticCurveTo(l[1],l[2],l[3]-v,l[4]-g);break;case"C":e.bezierCurveTo(l[1],l[2],l[3],l[4],l[5]-v,l[6]-g);break;case"A":{var p=void 0;n?(p=n[f],p||(p=q_(A,l),n[f]=p)):p=q_(A,l);var y=p.cx,m=p.cy,w=p.rx,B=p.ry,E=p.startAngle,b=p.endAngle,C=p.xRotation,_=p.sweepFlag;if(e.ellipse)e.ellipse(y,m,w,B,C,E,b,1-_);else{var x=w>B?w:B,M=w>B?1:w/B,S=w>B?B/w:1;e.translate(y,m),e.rotate(C),e.scale(M,S),e.arc(0,0,x,E,b,1-_),e.scale(1/M,1/S),e.rotate(-C),e.translate(-y,-m)}break}case"Z":e.closePath();break}if(c==="Z")A=s;else{var I=l.length;A=[l[I-2],l[I-1]]}}}}function iU(r,e){var t=r.get("canvas");t&&(e==="remove"&&(r._cacheCanvasBBox=r.get("cacheCanvasBBox")),r.get("hasChanged")||(r.set("hasChanged",!0),r.cfg.parent&&r.cfg.parent.get("hasChanged")||(t.refreshElement(r,e,t),t.get("autoDraw")&&t.draw())))}function a7(r){var e;if(r.destroyed)e=r._cacheCanvasBBox;else{var t=r.get("cacheCanvasBBox"),n=t&&!!(t.width&&t.height),a=r.getCanvasBBox(),i=a&&!!(a.width&&a.height);n&&i?e=W9(t,a):n?e=t:i&&(e=a)}return e}function i7(r){if(!r.length)return null;var e=[],t=[],n=[],a=[];return ye(r,function(i){var o=a7(i);o&&(e.push(o.minX),t.push(o.minY),n.push(o.maxX),a.push(o.maxY))}),{minX:Xi(e),minY:Xi(t),maxX:Vi(n),maxY:Vi(a)}}function o7(r,e){return!r||!e||!nc(r,e)?null:{minX:Math.max(r.minX,e.minX),minY:Math.max(r.minY,e.minY),maxX:Math.min(r.maxX,e.maxX),maxY:Math.min(r.maxY,e.maxY)}}var oU=function(r){Lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.onCanvasChange=function(t){iU(this,t)},e.prototype.getShapeBase=function(){return Ow},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,n){n&&(t.save(),qu(t,n),n.createPath(t),t.restore(),t.clip(),n._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,n=[],a=[];ye(t,function(c){var h=c.cfg.cacheCanvasBBox;h&&c.cfg.isInView&&(n.push(h.minX,h.maxX),a.push(h.minY,h.maxY))});var i=null;if(n.length){var o=Xi(n),A=Vi(n),s=Xi(a),u=Vi(a);i={minX:o,minY:s,x:o,y:s,maxX:A,maxY:u,width:A-o,height:u-s};var f=this.cfg.canvas;if(f){var l=f.getViewRange();this.set("isInView",nc(i,l))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",i)},e.prototype.draw=function(t,n){var a=this.cfg.children,i=n?this.cfg.refresh:!0;a.length&&i&&(t.save(),qu(t,this),this._applyClip(t,this.getClip()),h1(t,a,n),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(HD),vi=function(r){Lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return P(P({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return Ow},e.prototype.getGroupBase=function(){return oU},e.prototype.onCanvasChange=function(t){iU(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),n=this.getHitLineWidth(),a=KD(t),i=a(this),o=n/2,A=i.x-o,s=i.y-o,u=i.x+i.width+o,f=i.y+i.height+o;return{x:A,minX:A,y:s,minY:s,width:i.width+n,height:i.height+n,maxX:u,maxY:f}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,n){n&&(t.save(),qu(t,n),n.createPath(t),t.restore(),t.clip(),n._afterDraw())},e.prototype.draw=function(t,n){var a=this.cfg.clipShape;if(n){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var i=this.getCanvasBBox();if(!nc(n,i)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}t.save(),qu(t,this),this._applyClip(t,a),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var n=this.getCanvasBBox(),a=nc(n,t);this.set("isInView",a),a?this.set("cacheCanvasBBox",n):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var n=this.attrs,a=n.lineWidth,i=n.opacity,o=n.strokeOpacity,A=n.fillOpacity;this.isFill()&&(!ht(A)&&A!==1?(t.globalAlpha=A,this.fill(t),t.globalAlpha=i):this.fill(t)),this.isStroke()&&a>0&&(!ht(o)&&o!==1&&(t.globalAlpha=o),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,n){var a=this.isStroke(),i=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(t,n,a,i,o)},e.prototype.isInStrokeOrPath=function(t,n,a,i,o){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(GD),A7=function(r){Lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return P(P({},t),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,n,a,i,o){var A=this.attr(),s=A.x,u=A.y,f=A.r,l=o/2,c=qO(s,u,t,n);return i&&a?c<=f+l:i?c<=f:a?c>=f-l&&c<=f+l:!1},e.prototype.createPath=function(t){var n=this.attr(),a=n.x,i=n.y,o=n.r;t.beginPath(),t.arc(a,i,o,0,Math.PI*2,!1),t.closePath()},e}(vi);function qh(r,e,t,n){return r/(t*t)+e/(n*n)}var s7=function(r){Lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return P(P({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,n,a,i,o){var A=this.attr(),s=o/2,u=A.x,f=A.y,l=A.rx,c=A.ry,h=(t-u)*(t-u),d=(n-f)*(n-f);return i&&a?qh(h,d,l+s,c+s)<=1:i?qh(h,d,l,c)<=1:a?qh(h,d,l-s,c-s)>=1&&qh(h,d,l+s,c+s)<=1:!1},e.prototype.createPath=function(t){var n=this.attr(),a=n.x,i=n.y,o=n.rx,A=n.ry;if(t.beginPath(),t.ellipse)t.ellipse(a,i,o,A,0,0,Math.PI*2,!1);else{var s=o>A?o:A,u=o>A?1:o/A,f=o>A?A/o:1;t.save(),t.translate(a,i),t.scale(u,f),t.arc(0,0,s,0,Math.PI*2),t.restore(),t.closePath()}},e}(vi);function e2(r){return r instanceof HTMLElement&&Oe(r.nodeName)&&r.nodeName.toUpperCase()==="CANVAS"}var u7=function(r){Lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return P(P({},t),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var n=this,a=this.attrs;if(Oe(t)){var i=new Image;i.onload=function(){if(n.destroyed)return!1;n.attr("img",i),n.set("loading",!1),n._afterLoading();var o=n.get("callback");o&&o.call(n)},i.crossOrigin="Anonymous",i.src=t,this.set("loading",!0)}else t instanceof Image?(a.width||(a.width=t.width),a.height||(a.height=t.height)):e2(t)&&(a.width||(a.width=Number(t.getAttribute("width"))),a.height||(a.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(t,n,a){r.prototype.onAttrChange.call(this,t,n,a),t==="img"&&this._setImage(n)},e.prototype.createPath=function(t){if(this.get("loading")){this.set("toDraw",!0),this.set("context",t);return}var n=this.attr(),a=n.x,i=n.y,o=n.width,A=n.height,s=n.sx,u=n.sy,f=n.swidth,l=n.sheight,c=n.img;(c instanceof Image||e2(c))&&(!ht(s)&&!ht(u)&&!ht(f)&&!ht(l)?t.drawImage(c,s,u,f,l,a,i,o,A):t.drawImage(c,a,i,o,A))},e}(vi);function fA(r,e,t,n,a,i,o){var A=Math.min(r,t),s=Math.max(r,t),u=Math.min(e,n),f=Math.max(e,n),l=a/2;return i>=A-l&&i<=s+l&&o>=u-l&&o<=f+l?Dn.pointToLine(r,e,t,n,i,o)<=a/2:!1}var f7=function(r){Lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return P(P({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,n,a){r.prototype.onAttrChange.call(this,t,n,a),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),n=t.x1,a=t.y1,i=t.x2,o=t.y2,A=t.startArrow,s=t.endArrow;A&&IB(this,t,i,o,n,a),s&&TB(this,t,n,a,i,o)},e.prototype.isInStrokeOrPath=function(t,n,a,i,o){if(!a||!o)return!1;var A=this.attr(),s=A.x1,u=A.y1,f=A.x2,l=A.y2;return fA(s,u,f,l,o,t,n)},e.prototype.createPath=function(t){var n=this.attr(),a=n.x1,i=n.y1,o=n.x2,A=n.y2,s=n.startArrow,u=n.endArrow,f={dx:0,dy:0},l={dx:0,dy:0};s&&s.d&&(f=ys(a,i,o,A,n.startArrow.d)),u&&u.d&&(l=ys(a,i,o,A,n.endArrow.d)),t.beginPath(),t.moveTo(a+f.dx,i+f.dy),t.lineTo(o-l.dx,A-l.dy)},e.prototype.afterDrawPath=function(t){var n=this.get("startArrowShape"),a=this.get("endArrowShape");n&&n.draw(t),a&&a.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),n=t.x1,a=t.y1,i=t.x2,o=t.y2;return Dn.length(n,a,i,o)},e.prototype.getPoint=function(t){var n=this.attr(),a=n.x1,i=n.y1,o=n.x2,A=n.y2;return Dn.pointAt(a,i,o,A,t)},e}(vi),l7={circle:function(r,e,t){return[["M",r-t,e],["A",t,t,0,1,0,r+t,e],["A",t,t,0,1,0,r-t,e]]},square:function(r,e,t){return[["M",r-t,e-t],["L",r+t,e-t],["L",r+t,e+t],["L",r-t,e+t],["Z"]]},diamond:function(r,e,t){return[["M",r-t,e],["L",r,e-t],["L",r+t,e],["L",r,e+t],["Z"]]},triangle:function(r,e,t){var n=t*Math.sin(.3333333333333333*Math.PI);return[["M",r-t,e+n],["L",r,e-n],["L",r+t,e+n],["Z"]]},"triangle-down":function(r,e,t){var n=t*Math.sin(.3333333333333333*Math.PI);return[["M",r-t,e-n],["L",r+t,e-n],["L",r,e+n],["Z"]]}},c7=function(r){Lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(t,n,a){r.prototype.onAttrChange.call(this,t,n,a),["symbol","x","y","r","radius"].indexOf(t)!==-1&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return ht(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t=this.attr(),n=t.x,a=t.y,i=t.symbol||"circle",o=this._getR(t),A,s;if(Lr(i))A=i,s=A(n,a,o),s=nO(s);else{if(A=e.Symbols[i],!A)return console.warn(i+" marker is not supported."),null;s=A(n,a,o)}return s},e.prototype.createPath=function(t){var n=this._getPath(),a=this.get("paramsCache");aU(this,t,{path:n},a)},e.Symbols=l7,e}(vi);function AU(r,e,t){var n=JD();return r.createPath(n),n.isPointInPath(e,t)}var h7=1e-6;function ly(r){return Math.abs(r)<h7?0:r<0?-1:1}function d7(r,e,t){return(t[0]-r[0])*(e[1]-r[1])===(e[0]-r[0])*(t[1]-r[1])&&Math.min(r[0],e[0])<=t[0]&&t[0]<=Math.max(r[0],e[0])&&Math.min(r[1],e[1])<=t[1]&&t[1]<=Math.max(r[1],e[1])}function sU(r,e,t){var n=!1,a=r.length;if(a<=2)return!1;for(var i=0;i<a;i++){var o=r[i],A=r[(i+1)%a];if(d7(o,A,[e,t]))return!0;ly(o[1]-t)>0!=ly(A[1]-t)>0&&ly(e-(t-o[1])*(o[0]-A[0])/(o[1]-A[1])-o[0])<0&&(n=!n)}return n}function fl(r,e,t,n,a,i,o,A){var s=(Math.atan2(A-e,o-r)+Math.PI*2)%(Math.PI*2);if(s<n||s>a)return!1;var u={x:r+t*Math.cos(s),y:e+t*Math.sin(s)};return qO(u.x,u.y,o,A)<=i/2}var v7=Xa;function g7(r){for(var e=!1,t=r.length,n=0;n<t;n++){var a=r[n],i=a[0];if(i==="C"||i==="A"||i==="Q"){e=!0;break}}return e}function p7(r,e,t,n,a){for(var i=!1,o=e/2,A=0;A<r.length;A++){var s=r[A],u=s.currentPoint,f=s.params,l=s.prePoint,c=s.box;if(!(c&&!ds(c.x-o,c.y-o,c.width+e,c.height+e,t,n))){switch(s.command){case"L":case"Z":i=fA(l[0],l[1],u[0],u[1],e,t,n);break;case"Q":var h=XD.pointDistance(l[0],l[1],f[1],f[2],f[3],f[4],t,n);i=h<=e/2;break;case"C":var d=_l.pointDistance(l[0],l[1],f[1],f[2],f[3],f[4],f[5],f[6],t,n,a);i=d<=e/2;break;case"A":var v=s.arcParams,g=v.cx,p=v.cy,y=v.rx,m=v.ry,w=v.startAngle,B=v.endAngle,E=v.xRotation,b=[t,n,1],C=y>m?y:m,_=y>m?1:y/m,x=y>m?m/y:1,M=v7(null,[["t",-g,-p],["r",-E],["s",1/_,1/x]]);Og(b,b,M),i=fl(0,0,C,w,B,e,b[0],b[1]);break}if(i)break}}return i}function y7(r){for(var e=r.length,t=[],n=[],a=[],i=0;i<e;i++){var o=r[i],A=o[0];A==="M"?(a.length&&(n.push(a),a=[]),a.push([o[1],o[2]])):A==="Z"?a.length&&(t.push(a),a=[]):a.push([o[1],o[2]])}return a.length>0&&n.push(a),{polygons:t,polylines:n}}const Jh=P({hasArc:g7,extractPolygons:y7,isPointInStroke:p7},Cj);function t2(r,e,t){for(var n=!1,a=0;a<r.length;a++){var i=r[a];if(n=sU(i,e,t),n)break}return n}var LB=function(r){Lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return P(P({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(t,n,a){r.prototype.onAttrChange.call(this,t,n,a),t==="path"&&this._setPathArr(n),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=nO(t);var n=Jh.hasArc(t);this.set("hasArc",n),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=aO(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t=this.attr(),n=t.startArrow,a=t.endArrow;if(n){var i=this.getStartTangent();IB(this,t,i[0][0],i[0][1],i[1][0],i[1][1])}if(a){var i=this.getEndTangent();TB(this,t,i[0][0],i[0][1],i[1][0],i[1][1])}},e.prototype.isInStrokeOrPath=function(t,n,a,i,o){var A=this.getSegments(),s=this.get("hasArc"),u=!1;if(a){var f=this.getTotalLength();u=Jh.isPointInStroke(A,o,t,n,f)}if(!u&&i)if(s)u=AU(this,t,n);else{var l=this.attr("path"),c=Jh.extractPolygons(l);u=t2(c.polygons,t,n)||t2(c.polylines,t,n)}return u},e.prototype.createPath=function(t){var n=this.attr(),a=this.get("paramsCache");aU(this,t,n,a)},e.prototype.afterDrawPath=function(t){var n=this.get("startArrowShape"),a=this.get("endArrowShape");n&&n.draw(t),a&&a.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return ht(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var n=this.get("tCache");n||(this._calculateCurve(),this._setTcache(),n=this.get("tCache"));var a,i,o=this.get("curve");if(!n||n.length===0)return o?{x:o[0][1],y:o[0][2]}:null;ye(n,function(f,l){t>=f[0]&&t<=f[1]&&(a=(t-f[0])/(f[1]-f[0]),i=l)});var A=o[i];if(ht(A)||ht(i))return null;var s=A.length,u=o[i+1];return _l.pointAt(A[s-2],A[s-1],u[1],u[2],u[3],u[4],u[5],u[6],a)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",Jh.pathToCurve(t))},e.prototype._setTcache=function(){var t=0,n=0,a=[],i,o,A,s,u=this.get("curve");if(u){if(ye(u,function(f,l){A=u[l+1],s=f.length,A&&(t+=_l.length(f[s-2],f[s-1],A[1],A[2],A[3],A[4],A[5],A[6])||0)}),this.set("totalLength",t),t===0){this.set("tCache",[]);return}ye(u,function(f,l){A=u[l+1],s=f.length,A&&(i=[],i[0]=n/t,o=_l.length(f[s-2],f[s-1],A[1],A[2],A[3],A[4],A[5],A[6]),n+=o||0,i[1]=n/t,a.push(i))}),this.set("tCache",a)}},e.prototype.getStartTangent=function(){var t=this.getSegments(),n;if(t.length>1){var a=t[0].currentPoint,i=t[1].currentPoint,o=t[1].startTangent;n=[],o?(n.push([a[0]-o[0],a[1]-o[1]]),n.push([a[0],a[1]])):(n.push([i[0],i[1]]),n.push([a[0],a[1]]))}return n},e.prototype.getEndTangent=function(){var t=this.getSegments(),n=t.length,a;if(n>1){var i=t[n-2].currentPoint,o=t[n-1].currentPoint,A=t[n-1].endTangent;a=[],A?(a.push([o[0]-A[0],o[1]-A[1]]),a.push([o[0],o[1]])):(a.push([i[0],i[1]]),a.push([o[0],o[1]]))}return a},e}(vi);function uU(r,e,t,n,a){var i=r.length;if(i<2)return!1;for(var o=0;o<i-1;o++){var A=r[o][0],s=r[o][1],u=r[o+1][0],f=r[o+1][1];if(fA(A,s,u,f,e,t,n))return!0}if(a){var l=r[0],c=r[i-1];if(fA(l[0],l[1],c[0],c[1],e,t,n))return!0}return!1}var m7=function(r){Lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.isInStrokeOrPath=function(t,n,a,i,o){var A=this.attr().points,s=!1;return a&&(s=uU(A,o,t,n,!0)),!s&&i&&(s=sU(A,t,n)),s},e.prototype.createPath=function(t){var n=this.attr(),a=n.points;if(!(a.length<2)){t.beginPath();for(var i=0;i<a.length;i++){var o=a[i];i===0?t.moveTo(o[0],o[1]):t.lineTo(o[0],o[1])}t.closePath()}},e}(vi),w7=function(r){Lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return P(P({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,n,a){r.prototype.onAttrChange.call(this,t,n,a),this.setArrow(),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),n=this.attrs,a=n.points,i=n.startArrow,o=n.endArrow,A=a.length,s=a[0][0],u=a[0][1],f=a[A-1][0],l=a[A-1][1];i&&IB(this,t,a[1][0],a[1][1],s,u),o&&TB(this,t,a[A-2][0],a[A-2][1],f,l)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,n,a,i,o){if(!a||!o)return!1;var A=this.attr().points;return uU(A,o,t,n,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var n=this.attr(),a=n.points,i=n.startArrow,o=n.endArrow,A=a.length;if(!(a.length<2)){var s=a[0][0],u=a[0][1],f=a[A-1][0],l=a[A-1][1];if(i&&i.d){var c=ys(s,u,a[1][0],a[1][1],i.d);s+=c.dx,u+=c.dy}if(o&&o.d){var c=ys(a[A-2][0],a[A-2][1],f,l,o.d);f-=c.dx,l-=c.dy}t.beginPath(),t.moveTo(s,u);for(var h=0;h<A-1;h++){var d=a[h];t.lineTo(d[0],d[1])}t.lineTo(f,l)}},e.prototype.afterDrawPath=function(t){var n=this.get("startArrowShape"),a=this.get("endArrowShape");n&&n.draw(t),a&&a.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,n=this.get("totalLength");return ht(n)?(this.set("totalLength",qD.length(t)),this.get("totalLength")):n},e.prototype.getPoint=function(t){var n=this.attr().points,a=this.get("tCache");a||(this._setTcache(),a=this.get("tCache"));var i,o;return ye(a,function(A,s){t>=A[0]&&t<=A[1]&&(i=(t-A[0])/(A[1]-A[0]),o=s)}),Dn.pointAt(n[o][0],n[o][1],n[o+1][0],n[o+1][1],i)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var n=this.getTotalLength();if(!(n<=0)){var a=0,i=[],o,A;ye(t,function(s,u){t[u+1]&&(o=[],o[0]=a/n,A=Dn.length(s[0],s[1],t[u+1][0],t[u+1][1]),a+=A,o[1]=a/n,i.push(o))}),this.set("tCache",i)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,n=[];return n.push([t[1][0],t[1][1]]),n.push([t[0][0],t[0][1]]),n},e.prototype.getEndTangent=function(){var t=this.attr().points,n=t.length-1,a=[];return a.push([t[n-1][0],t[n-1][1]]),a.push([t[n][0],t[n][1]]),a},e}(vi);function B7(r,e,t,n,a,i,o){var A=a/2;return ds(r-A,e-A,t,a,i,o)||ds(r+t-A,e-A,a,n,i,o)||ds(r+A,e+n-A,t,a,i,o)||ds(r-A,e+A,a,n,i,o)}function E7(r,e,t,n,a,i,o,A){return fA(r+a,e,r+t-a,e,i,o,A)||fA(r+t,e+a,r+t,e+n-a,i,o,A)||fA(r+t-a,e+n,r+a,e+n,i,o,A)||fA(r,e+n-a,r,e+a,i,o,A)||fl(r+t-a,e+a,a,1.5*Math.PI,2*Math.PI,i,o,A)||fl(r+t-a,e+n-a,a,0,.5*Math.PI,i,o,A)||fl(r+a,e+n-a,a,.5*Math.PI,Math.PI,i,o,A)||fl(r+a,e+a,a,Math.PI,1.5*Math.PI,i,o,A)}var b7=function(r){Lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return P(P({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,n,a,i,o){var A=this.attr(),s=A.x,u=A.y,f=A.width,l=A.height,c=A.radius;if(c){var d=!1;return a&&(d=E7(s,u,f,l,c,o,t,n)),!d&&i&&(d=AU(this,t,n)),d}else{var h=o/2;if(i&&a)return ds(s-h,u-h,f+h,l+h,t,n);if(i)return ds(s,u,f,l,t,n);if(a)return B7(s,u,f,l,o,t,n)}},e.prototype.createPath=function(t){var n=this.attr(),a=n.x,i=n.y,o=n.width,A=n.height,s=n.radius;if(t.beginPath(),s===0)t.rect(a,i,o,A);else{var u=t7(s),f=u[0],l=u[1],c=u[2],h=u[3];t.moveTo(a+f,i),t.lineTo(a+o-l,i),l!==0&&t.arc(a+o-l,i+l,l,-Math.PI/2,0),t.lineTo(a+o,i+A-c),c!==0&&t.arc(a+o-c,i+A-c,c,0,Math.PI/2),t.lineTo(a+h,i+A),h!==0&&t.arc(a+h,i+A-h,h,Math.PI/2,Math.PI),t.lineTo(a,i+f),f!==0&&t.arc(a+f,i+f,f,Math.PI,Math.PI*1.5),t.closePath()}},e}(vi),x7=function(r){Lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return P(P({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=tO(t)},e.prototype._setText=function(t){var n=null;Oe(t)&&t.indexOf(`
`)!==-1&&(n=t.split(`
`)),this.set("textArr",n)},e.prototype.onAttrChange=function(t,n,a){r.prototype.onAttrChange.call(this,t,n,a),t.startsWith("font")&&this._assembleFont(),t==="text"&&this._setText(n)},e.prototype._getSpaceingY=function(){var t=this.attrs,n=t.lineHeight,a=t.fontSize*1;return n?n-a:a*.14},e.prototype._drawTextArr=function(t,n,a){var i=this.attrs,o=i.textBaseline,A=i.x,s=i.y,u=i.fontSize*1,f=this._getSpaceingY(),l=eO(i.text,i.fontSize,i.lineHeight),c;ye(n,function(h,d){c=s+d*(f+u)-l+u,o==="middle"&&(c+=l-u-(l-u)/2),o==="top"&&(c+=l-u),ht(h)||(a?t.fillText(h,A,c):t.strokeText(h,A,c))})},e.prototype._drawText=function(t,n){var a=this.attr(),i=a.x,o=a.y,A=this.get("textArr");if(A)this._drawTextArr(t,A,n);else{var s=a.text;ht(s)||(n?t.fillText(s,i,o):t.strokeText(s,i,o))}},e.prototype.strokeAndFill=function(t){var n=this.attrs,a=n.lineWidth,i=n.opacity,o=n.strokeOpacity,A=n.fillOpacity;this.isStroke()&&a>0&&(!ht(o)&&o!==1&&(t.globalAlpha=i),this.stroke(t)),this.isFill()&&(!ht(A)&&A!==1?(t.globalAlpha=A,this.fill(t),t.globalAlpha=i):this.fill(t)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(vi);function C7(r,e){if(e){var t=bD(e);return cs(t,r)}return r}function fU(r,e,t){var n=r.getTotalMatrix();if(n){var a=C7([e,t,1],n),i=a[0],o=a[1];return[i,o]}return[e,t]}function r2(r,e,t){if(r.isCanvas&&r.isCanvas())return!0;if(!Hm(r)||r.cfg.isInView===!1)return!1;if(r.cfg.clipShape){var n=fU(r,e,t),a=n[0],i=n[1];if(r.isClipped(a,i))return!1}var o=r.cfg.cacheCanvasBBox||r.getCanvasBBox();return e>=o.minX&&e<=o.maxX&&t>=o.minY&&t<=o.maxY}function lU(r,e,t){if(!r2(r,e,t))return null;for(var n=null,a=r.getChildren(),i=a.length,o=i-1;o>=0;o--){var A=a[o];if(A.isGroup())n=lU(A,e,t);else if(r2(A,e,t)){var s=A,u=fU(A,e,t),f=u[0],l=u[1];s.isInShape(f,l)&&(n=A)}if(n)break}return n}var So=function(r){Lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},e.prototype.onCanvasChange=function(t){(t==="attr"||t==="sort"||t==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return Ow},e.prototype.getGroupBase=function(){return oU},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||$9();return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),n=t.getContext("2d");return this.set("context",n),t},e.prototype.setDOMSize=function(t,n){r.prototype.setDOMSize.call(this,t,n);var a=this.get("context"),i=this.get("el"),o=this.getPixelRatio();i.width=o*t,i.height=o*n,o>1&&a.scale(o,o)},e.prototype.clear=function(){r.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),n=this.get("el");t.clearRect(0,0,n.width,n.height)},e.prototype.getShape=function(t,n){var a;return this.get("quickHit")?a=lU(this,t,n):a=r.prototype.getShape.call(this,t,n,null),a},e.prototype._getRefreshRegion=function(){var t=this.get("refreshElements"),n=this.getViewRange(),a;if(t.length&&t[0]===this)a=n;else if(a=i7(t),a){a.minX=Math.floor(a.minX),a.minY=Math.floor(a.minY),a.maxX=Math.ceil(a.maxX),a.maxY=Math.ceil(a.maxY),a.maxY+=1;var i=this.get("clipView");i&&(a=o7(a,n))}return a},e.prototype.refreshElement=function(t){var n=this.get("refreshElements");n.push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&(lF(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),n=this.get("el"),a=this.getChildren();t.clearRect(0,0,n.width,n.height),qu(t,this),h1(t,a),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),n=this.get("refreshElements"),a=this.getChildren(),i=this._getRefreshRegion();i?(t.clearRect(i.minX,i.minY,i.maxX-i.minX,i.maxY-i.minY),t.save(),t.beginPath(),t.rect(i.minX,i.minY,i.maxX-i.minX,i.maxY-i.minY),t.clip(),qu(t,this),r7(this,a,i),h1(t,a,i),t.restore()):n.length&&nU(n),ye(n,function(o){o.get("hasChanged")&&o.set("hasChanged",!1)}),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,n=this.get("drawFrame");n||(n=fF(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)}),this.set("drawFrame",n))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(RD),v1={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},ur={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"};function Wa(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function cU(r){var e=v1[r.type],t=r.getParent();if(!e)throw new Error("the type "+r.type+" is not supported by svg");var n=Wa(e);if(r.get("id")&&(n.id=r.get("id")),r.set("el",n),r.set("attrs",{}),t){var a=t.get("el");a||(a=t.createDom(),t.set("el",a)),a.appendChild(n)}return n}function hU(r,e){var t=r.get("el"),n=vF(t.children).sort(e),a=document.createDocumentFragment();n.forEach(function(i){a.appendChild(i)}),t.appendChild(a)}function _7(r,e){var t=r.parentNode,n=Array.from(t.childNodes).filter(function(A){return A.nodeType===1&&A.nodeName.toLowerCase()!=="defs"}),a=n[e],i=n.indexOf(r);if(a){if(i>e)t.insertBefore(r,a);else if(i<e){var o=n[e+1];o?t.insertBefore(r,o):t.appendChild(r)}}else t.appendChild(r)}function S7(r,e){var t=r.cfg.el,n=r.attr(),a={dx:n.shadowOffsetX,dy:n.shadowOffsetY,blur:n.shadowBlur,color:n.shadowColor};if(!a.dx&&!a.dy&&!a.blur&&!a.color)t.removeAttribute("filter");else{var i=e.find("filter",a);i||(i=e.addShadow(a)),t.setAttribute("filter","url(#"+i+")")}}function Sc(r){var e=r.attr().matrix;if(e){for(var t=r.cfg.el,n=[],a=0;a<9;a+=3)n.push(e[a]+","+e[a+1]);n=n.join(","),n.indexOf("NaN")===-1?t.setAttribute("transform","matrix("+n+")"):console.warn("invalid matrix:",e)}}function ac(r,e){var t=r.getClip(),n=r.get("el");if(!t)n.removeAttribute("clip-path");else if(t&&!n.hasAttribute("clip-path")){cU(t),t.createPath(e);var a=e.addClip(t);n.setAttribute("clip-path","url(#"+a+")")}}function dU(r,e){e.forEach(function(t){t.draw(r)})}function vU(r,e){var t=r.get("canvas");if(t&&t.get("autoDraw")){var n=t.get("context"),a=r.getParent(),i=a?a.getChildren():[t],o=r.get("el");if(e==="remove"){var A=r.get("isClipShape");if(A){var s=o&&o.parentNode,u=s&&s.parentNode;s&&u&&u.removeChild(s)}else o&&o.parentNode&&o.parentNode.removeChild(o)}else if(e==="show")o.setAttribute("visibility","visible");else if(e==="hide")o.setAttribute("visibility","hidden");else if(e==="zIndex")_7(o,i.indexOf(r));else if(e==="sort"){var f=r.get("children");f&&f.length&&hU(r,function(l,c){return f.indexOf(l)-f.indexOf(c)?1:0})}else e==="clear"?o&&(o.innerHTML=""):e==="matrix"?Sc(r):e==="clip"?ac(r,n):e==="attr"||e==="add"&&r.draw(n)}}var gU=function(r){Lt(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var t=Wa("g");this.set("el",t);var n=this.getParent();if(n){var a=n.get("el");a||(a=n.createDom(),n.set("el",a)),a.appendChild(t)}return t},e.prototype.afterAttrsChange=function(t){r.prototype.afterAttrsChange.call(this,t);var n=this.get("canvas");if(n&&n.get("autoDraw")){var a=n.get("context");this.createPath(a,t)}},e.prototype.onCanvasChange=function(t){vU(this,t)},e.prototype.getShapeBase=function(){return Uw},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(t){var n=this.getChildren(),a=this.get("el");this.get("destroyed")?a&&a.parentNode.removeChild(a):(a||this.createDom(),ac(this,t),this.createPath(t),n.length&&dU(t,n))},e.prototype.createPath=function(t,n){var a=this.attr(),i=this.get("el");ye(n||a,function(o,A){ur[A]&&i.setAttribute(ur[A],o)}),Sc(this)},e}(HD),Ya=function(r){Lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return P(P({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(t){r.prototype.afterAttrsChange.call(this,t);var n=this.get("canvas");if(n&&n.get("autoDraw")){var a=n.get("context");this.draw(a,t)}},e.prototype.getShapeBase=function(){return Uw},e.prototype.getGroupBase=function(){return gU},e.prototype.onCanvasChange=function(t){vU(this,t)},e.prototype.calculateBBox=function(){var t=this.get("el"),n=null;if(t)n=t.getBBox();else{var a=KD(this.get("type"));a&&(n=a(this))}if(n){var i=n.x,o=n.y,A=n.width,s=n.height,u=this.getHitLineWidth(),f=u/2,l=i-f,c=o-f,h=i+A+f,d=o+s+f;return{x:l,y:c,minX:l,minY:c,maxX:h,maxY:d,width:A+u,height:s+u}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var t=this.attr(),n=t.fill,a=t.fillStyle;return(n||a||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var t=this.attr(),n=t.stroke,a=t.strokeStyle;return(n||a)&&this.canStroke},e.prototype.draw=function(t,n){var a=this.get("el");this.get("destroyed")?a&&a.parentNode.removeChild(a):(a||cU(this),ac(this,t),this.createPath(t,n),this.shadow(t,n),this.strokeAndFill(t,n),this.transform(n))},e.prototype.createPath=function(t,n){},e.prototype.strokeAndFill=function(t,n){var a=n||this.attr(),i=a.fill,o=a.fillStyle,A=a.stroke,s=a.strokeStyle,u=a.fillOpacity,f=a.strokeOpacity,l=a.lineWidth,c=this.get("el");this.canFill&&(n?"fill"in a?this._setColor(t,"fill",i):"fillStyle"in a&&this._setColor(t,"fill",o):this._setColor(t,"fill",i||o),u&&c.setAttribute(ur.fillOpacity,u)),this.canStroke&&l>0&&(n?"stroke"in a?this._setColor(t,"stroke",A):"strokeStyle"in a&&this._setColor(t,"stroke",s):this._setColor(t,"stroke",A||s),f&&c.setAttribute(ur.strokeOpacity,f),l&&c.setAttribute(ur.lineWidth,l))},e.prototype._setColor=function(t,n,a){var i=this.get("el");if(!a){i.setAttribute(ur[n],"none");return}if(a=a.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(a)){var o=t.find("gradient",a);o||(o=t.addGradient(a)),i.setAttribute(ur[n],"url(#"+o+")")}else if(/^[p,P]{1}[\s]*\(/.test(a)){var o=t.find("pattern",a);o||(o=t.addPattern(a)),i.setAttribute(ur[n],"url(#"+o+")")}else i.setAttribute(ur[n],a)},e.prototype.shadow=function(t,n){var a=this.attr(),i=n||a,o=i.shadowOffsetX,A=i.shadowOffsetY,s=i.shadowBlur,u=i.shadowColor;(o||A||s||u)&&S7(this,t)},e.prototype.transform=function(t){var n=this.attr(),a=(t||n).matrix;a&&Sc(this)},e.prototype.isInShape=function(t,n){return this.isPointInPath(t,n)},e.prototype.isPointInPath=function(t,n){var a=this.get("el"),i=this.get("canvas"),o=i.get("el").getBoundingClientRect(),A=t+o.left,s=n+o.top,u=document.elementFromPoint(A,s);return!!(u&&u.isEqualNode(a))},e.prototype.getHitLineWidth=function(){var t=this.attrs,n=t.lineWidth,a=t.lineAppendWidth;return this.isStroke()?n+a:0},e}(GD),M7=function(r){Lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return P(P({},t),{x:0,y:0,r:0})},e.prototype.createPath=function(t,n){var a=this.attr(),i=this.get("el");ye(n||a,function(o,A){A==="x"||A==="y"?i.setAttribute("c"+A,o):ur[A]&&i.setAttribute(ur[A],o)})},e}(Ya),I7=function(r){Lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return e.prototype.createPath=function(t,n){var a=this.attr(),i=this.get("el");if(ye(n||a,function(u,f){ur[f]&&i.setAttribute(ur[f],u)}),typeof a.html=="function"){var o=a.html.call(this,a);if(o instanceof Element||o instanceof HTMLDocument){for(var A=i.childNodes,s=A.length-1;s>=0;s--)i.removeChild(A[s]);i.appendChild(o)}else i.innerHTML=o}else i.innerHTML=a.html},e}(Ya),T7=function(r){Lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return P(P({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,n){var a=this.attr(),i=this.get("el");ye(n||a,function(o,A){A==="x"||A==="y"?i.setAttribute("c"+A,o):ur[A]&&i.setAttribute(ur[A],o)})},e}(Ya),F7=function(r){Lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return P(P({},t),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,n){var a=this,i=this.attr(),o=this.get("el");ye(n||i,function(A,s){s==="img"?a._setImage(i.img):ur[s]&&o.setAttribute(ur[s],A)})},e.prototype.setAttr=function(t,n){this.attrs[t]=n,t==="img"&&this._setImage(n)},e.prototype._setImage=function(t){var n=this.attr(),a=this.get("el");if(Oe(t))a.setAttribute("href",t);else if(t instanceof window.Image)n.width||(a.setAttribute("width",t.width),this.attr("width",t.width)),n.height||(a.setAttribute("height",t.height),this.attr("height",t.height)),a.setAttribute("href",t.src);else if(t instanceof HTMLElement&&Oe(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS")a.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var i=document.createElement("canvas");i.setAttribute("width",""+t.width),i.setAttribute("height",""+t.height),i.getContext("2d").putImageData(t,0,0),n.width||(a.setAttribute("width",""+t.width),this.attr("width",t.width)),n.height||(a.setAttribute("height",""+t.height),this.attr("height",t.height)),a.setAttribute("href",i.toDataURL())}},e}(Ya),L7=function(r){Lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return P(P({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,n){var a=this.attr(),i=this.get("el");ye(n||a,function(o,A){if(A==="startArrow"||A==="endArrow")if(o){var s=On(o)?t.addArrow(a,ur[A]):t.getDefaultArrow(a,ur[A]);i.setAttribute(ur[A],"url(#"+s+")")}else i.removeAttribute(ur[A]);else ur[A]&&i.setAttribute(ur[A],o)})},e.prototype.getTotalLength=function(){var t=this.attr(),n=t.x1,a=t.y1,i=t.x2,o=t.y2;return Dn.length(n,a,i,o)},e.prototype.getPoint=function(t){var n=this.attr(),a=n.x1,i=n.y1,o=n.x2,A=n.y2;return Dn.pointAt(a,i,o,A,t)},e}(Ya),ed={circle:function(r,e,t){return[["M",r,e],["m",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-t*2,0]]},square:function(r,e,t){return[["M",r-t,e-t],["L",r+t,e-t],["L",r+t,e+t],["L",r-t,e+t],["Z"]]},diamond:function(r,e,t){return[["M",r-t,e],["L",r,e-t],["L",r+t,e],["L",r,e+t],["Z"]]},triangle:function(r,e,t){var n=t*Math.sin(.3333333333333333*Math.PI);return[["M",r-t,e+n],["L",r,e-n],["L",r+t,e+n],["z"]]},triangleDown:function(r,e,t){var n=t*Math.sin(.3333333333333333*Math.PI);return[["M",r-t,e-n],["L",r+t,e-n],["L",r,e+n],["Z"]]}};const n2={get:function(r){return ed[r]},register:function(r,e){ed[r]=e},remove:function(r){delete ed[r]},getAll:function(){return ed}};var D7=function(r){Lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t){var n=this.get("el");n.setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return yt(t)?t.map(function(n){return n.join(" ")}).join(""):t},e.prototype._getPath=function(){var t=this.attr(),n=t.x,a=t.y,i=t.r||t.radius,o=t.symbol||"circle",A;return Lr(o)?A=o:A=n2.get(o),A?A(n,a,i):(console.warn(A+" symbol is not exist."),null)},e.symbolsFactory=n2,e}(Ya),O7=function(r){Lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return P(P({},t),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,n){var a=this,i=this.attr(),o=this.get("el");ye(n||i,function(A,s){if(s==="path"&&yt(A))o.setAttribute("d",a._formatPath(A));else if(s==="startArrow"||s==="endArrow")if(A){var u=On(A)?t.addArrow(i,ur[s]):t.getDefaultArrow(i,ur[s]);o.setAttribute(ur[s],"url(#"+u+")")}else o.removeAttribute(ur[s]);else ur[s]&&o.setAttribute(ur[s],A)})},e.prototype._formatPath=function(t){var n=t.map(function(a){return a.join(" ")}).join("");return~n.indexOf("NaN")?"":n},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var n=this.get("el"),a=this.getTotalLength();if(a===0)return null;var i=n?n.getPointAtLength(t*a):null;return i?{x:i.x,y:i.y}:null},e}(Ya),U7=function(r){Lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t,n){var a=this.attr(),i=this.get("el");ye(n||a,function(o,A){A==="points"&&yt(o)&&o.length>=2?i.setAttribute("points",o.map(function(s){return s[0]+","+s[1]}).join(" ")):ur[A]&&i.setAttribute(ur[A],o)})},e}(Ya),N7=function(r){Lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return P(P({},t),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(t,n,a){r.prototype.onAttrChange.call(this,t,n,a),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,n){var a=this.attr(),i=this.get("el");ye(n||a,function(o,A){A==="points"&&yt(o)&&o.length>=2?i.setAttribute("points",o.map(function(s){return s[0]+","+s[1]}).join(" ")):ur[A]&&i.setAttribute(ur[A],o)})},e.prototype.getTotalLength=function(){var t=this.attr().points,n=this.get("totalLength");return ht(n)?(this.set("totalLength",qD.length(t)),this.get("totalLength")):n},e.prototype.getPoint=function(t){var n=this.attr().points,a=this.get("tCache");a||(this._setTcache(),a=this.get("tCache"));var i,o;return ye(a,function(A,s){t>=A[0]&&t<=A[1]&&(i=(t-A[0])/(A[1]-A[0]),o=s)}),Dn.pointAt(n[o][0],n[o][1],n[o+1][0],n[o+1][1],i)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var n=this.getTotalLength();if(!(n<=0)){var a=0,i=[],o,A;ye(t,function(s,u){t[u+1]&&(o=[],o[0]=a/n,A=Dn.length(s[0],s[1],t[u+1][0],t[u+1][1]),a+=A,o[1]=a/n,i.push(o))}),this.set("tCache",i)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,n=[];return n.push([t[1][0],t[1][1]]),n.push([t[0][0],t[0][1]]),n},e.prototype.getEndTangent=function(){var t=this.attr().points,n=t.length-1,a=[];return a.push([t[n-1][0],t[n-1][1]]),a.push([t[n][0],t[n][1]]),a},e}(Ya);function k7(r){var e=0,t=0,n=0,a=0;return yt(r)?r.length===1?e=t=n=a=r[0]:r.length===2?(e=n=r[0],t=a=r[1]):r.length===3?(e=r[0],t=a=r[1],n=r[2]):(e=r[0],t=r[1],n=r[2],a=r[3]):e=t=n=a=r,{r1:e,r2:t,r3:n,r4:a}}var P7=function(r){Lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return P(P({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,n){var a=this,i=this.attr(),o=this.get("el"),A=!1,s=["x","y","width","height","radius"];ye(n||i,function(u,f){s.indexOf(f)!==-1&&!A?(o.setAttribute("d",a._assembleRect(i)),A=!0):s.indexOf(f)===-1&&ur[f]&&o.setAttribute(ur[f],u)})},e.prototype._assembleRect=function(t){var n=t.x,a=t.y,i=t.width,o=t.height,A=t.radius;if(!A)return"M "+n+","+a+" l "+i+",0 l 0,"+o+" l"+-i+" 0 z";var s=k7(A);yt(A)?A.length===1?s.r1=s.r2=s.r3=s.r4=A[0]:A.length===2?(s.r1=s.r3=A[0],s.r2=s.r4=A[1]):A.length===3?(s.r1=A[0],s.r2=s.r4=A[1],s.r3=A[2]):(s.r1=A[0],s.r2=A[1],s.r3=A[2],s.r4=A[3]):s.r1=s.r2=s.r3=s.r4=A;var u=[["M "+(n+s.r1)+","+a],["l "+(i-s.r1-s.r2)+",0"],["a "+s.r2+","+s.r2+",0,0,1,"+s.r2+","+s.r2],["l 0,"+(o-s.r2-s.r3)],["a "+s.r3+","+s.r3+",0,0,1,"+-s.r3+","+s.r3],["l "+(s.r3+s.r4-i)+",0"],["a "+s.r4+","+s.r4+",0,0,1,"+-s.r4+","+-s.r4],["l 0,"+(s.r4+s.r1-o)],["a "+s.r1+","+s.r1+",0,0,1,"+s.r1+","+-s.r1],["z"]];return u.join(" ")},e}(Ya),a2=.3,Q7={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},R7={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},H7={left:"left",start:"left",center:"middle",right:"end",end:"end"},G7=function(r){Lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=r.prototype.getDefaultAttrs.call(this);return P(P({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,n){var a=this,i=this.attr(),o=this.get("el");this._setFont(),ye(n||i,function(A,s){s==="text"?a._setText(""+A):s==="matrix"&&A?Sc(a):ur[s]&&o.setAttribute(ur[s],A)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),n=this.attr(),a=n.textBaseline,i=n.textAlign,o=ED();o&&o.name==="firefox"?t.setAttribute("dominant-baseline",R7[a]||"alphabetic"):t.setAttribute("alignment-baseline",Q7[a]||"baseline"),t.setAttribute("text-anchor",H7[i]||"left")},e.prototype._setText=function(t){var n=this.get("el"),a=this.attr(),i=a.x,o=a.textBaseline,A=o===void 0?"bottom":o;if(!t)n.innerHTML="";else if(~t.indexOf(`
`)){var s=t.split(`
`),u=s.length-1,f="";ye(s,function(l,c){c===0?A==="alphabetic"?f+='<tspan x="'+i+'" dy="'+-u+'em">'+l+"</tspan>":A==="top"?f+='<tspan x="'+i+'" dy="0.9em">'+l+"</tspan>":A==="middle"?f+='<tspan x="'+i+'" dy="'+-(u-1)/2+'em">'+l+"</tspan>":A==="bottom"?f+='<tspan x="'+i+'" dy="-'+(u+a2)+'em">'+l+"</tspan>":A==="hanging"&&(f+='<tspan x="'+i+'" dy="'+(-(u-1)-a2)+'em">'+l+"</tspan>"):f+='<tspan x="'+i+'" dy="1em">'+l+"</tspan>"}),n.innerHTML=f}else n.innerHTML=t},e}(Ya),z7=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,K7=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,j7=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function pU(r){var e=r.match(j7);if(!e)return"";var t="";return e.sort(function(n,a){return n=n.split(":"),a=a.split(":"),Number(n[0])-Number(a[0])}),ye(e,function(n){n=n.split(":"),t+='<stop offset="'+n[0]+'" stop-color="'+n[1]+'"></stop>'}),t}function $7(r,e){var t=z7.exec(r),n=Fg(Lg(parseFloat(t[1])),Math.PI*2),a=t[2],i,o;n>=0&&n<.5*Math.PI?(i={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=n&&n<Math.PI?(i={x:1,y:0},o={x:0,y:1}):Math.PI<=n&&n<1.5*Math.PI?(i={x:1,y:1},o={x:0,y:0}):(i={x:0,y:1},o={x:1,y:0});var A=Math.tan(n),s=A*A,u=(o.x-i.x+A*(o.y-i.y))/(s+1)+i.x,f=A*(o.x-i.x+A*(o.y-i.y))/(s+1)+i.y;e.setAttribute("x1",i.x),e.setAttribute("y1",i.y),e.setAttribute("x2",u),e.setAttribute("y2",f),e.innerHTML=pU(a)}function W7(r,e){var t=K7.exec(r),n=parseFloat(t[1]),a=parseFloat(t[2]),i=parseFloat(t[3]),o=t[4];e.setAttribute("cx",n),e.setAttribute("cy",a),e.setAttribute("r",i),e.innerHTML=pU(o)}var V7=function(){function r(e){this.cfg={};var t=null,n=Yi("gradient_");return e.toLowerCase()[0]==="l"?(t=Wa("linearGradient"),$7(e,t)):(t=Wa("radialGradient"),W7(e,t)),t.setAttribute("id",n),this.el=t,this.id=n,this.cfg=e,this}return r.prototype.match=function(e,t){return this.cfg===t},r}(),X7={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},Y7={x:"-40%",y:"-40%",width:"200%",height:"200%"},Z7=function(){function r(e){this.type="filter",this.cfg={},this.type="filter";var t=Wa("filter");return ye(Y7,function(n,a){t.setAttribute(a,n)}),this.el=t,this.id=Yi("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,t),this}return r.prototype.match=function(e,t){if(this.type!==e)return!1;var n=!0,a=this.cfg;return ye(Object.keys(a),function(i){if(a[i]!==t[i])return n=!1,!1}),n},r.prototype.update=function(e,t){var n=this.cfg;return n[X7[e]]=t,this._parseShadow(n,this.el),this},r.prototype._parseShadow=function(e,t){var n=`<feDropShadow
      dx="`+(e.dx||0)+`"
      dy="`+(e.dy||0)+`"
      stdDeviation="`+(e.blur?e.blur/10:0)+`"
      flood-color="`+(e.color?e.color:"#000")+`"
      flood-opacity="`+(e.opacity?e.opacity:1)+`"
      />`;t.innerHTML=n},r}(),i2=function(){function r(e,t){this.cfg={};var n=Wa("marker"),a=Yi("marker_");n.setAttribute("id",a);var i=Wa("path");i.setAttribute("stroke",e.stroke||"none"),i.setAttribute("fill",e.fill||"none"),n.appendChild(i),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=i,this.id=a;var o=e[t==="marker-start"?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",o===!0?this._setDefaultPath(t,i):(this.cfg=o,this._setMarker(e.lineWidth,i)),this}return r.prototype.match=function(){return!1},r.prototype._setDefaultPath=function(e,t){var n=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),n.setAttribute("refX",""+10*Math.cos(Math.PI/6)),n.setAttribute("refY","5")},r.prototype._setMarker=function(e,t){var n=this.el,a=this.cfg.path,i=this.cfg.d;yt(a)&&(a=a.map(function(o){return o.join(" ")}).join("")),t.setAttribute("d",a),n.appendChild(t),i&&n.setAttribute("refX",""+i/e)},r.prototype.update=function(e){var t=this.child;t.attr?t.attr("fill",e):t.setAttribute("fill",e)},r}(),q7=function(){function r(e){this.type="clip",this.cfg={};var t=Wa("clipPath");this.el=t,this.id=Yi("clip_"),t.id=this.id;var n=e.cfg.el;return t.appendChild(n),this.cfg=e,this}return r.prototype.match=function(){return!1},r.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},r}(),J7=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,eY=function(){function r(e){this.cfg={};var t=Wa("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var n=Wa("image");t.appendChild(n);var a=Yi("pattern_");t.id=a,this.el=t,this.id=a,this.cfg=e;var i=J7.exec(e),o=i[2];n.setAttribute("href",o);var A=new Image;o.match(/^data:/i)||(A.crossOrigin="Anonymous"),A.src=o;function s(){t.setAttribute("width",""+A.width),t.setAttribute("height",""+A.height)}return A.complete?s():(A.onload=s,A.src=A.src),this}return r.prototype.match=function(e,t){return this.cfg===t},r}(),tY=function(){function r(e){var t=Wa("defs"),n=Yi("defs_");t.id=n,e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}return r.prototype.find=function(e,t){for(var n=this.children,a=null,i=0;i<n.length;i++)if(n[i].match(e,t)){a=n[i].id;break}return a},r.prototype.findById=function(e){for(var t=this.children,n=null,a=0;a<t.length;a++)if(t[a].id===e){n=t[a];break}return n},r.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},r.prototype.getDefaultArrow=function(e,t){var n=e.stroke||e.strokeStyle;if(this.defaultArrow[n])return this.defaultArrow[n].id;var a=new i2(e,t);return this.defaultArrow[n]=a,this.el.appendChild(a.el),this.add(a),a.id},r.prototype.addGradient=function(e){var t=new V7(e);return this.el.appendChild(t.el),this.add(t),t.id},r.prototype.addArrow=function(e,t){var n=new i2(e,t);return this.el.appendChild(n.el),this.add(n),n.id},r.prototype.addShadow=function(e){var t=new Z7(e);return this.el.appendChild(t.el),this.add(t),t.id},r.prototype.addPattern=function(e){var t=new eY(e);return this.el.appendChild(t.el),this.add(t),t.id},r.prototype.addClip=function(e){var t=new q7(e);return this.el.appendChild(t.el),this.add(t),t.id},r}(),Ml=function(r){Lt(e,r);function e(t){return r.call(this,P(P({},t),{autoDraw:!0,renderer:"svg"}))||this}return e.prototype.getShapeBase=function(){return Uw},e.prototype.getGroupBase=function(){return gU},e.prototype.getShape=function(t,n,a){var i=a.target||a.srcElement;if(!v1[i.tagName]){for(var o=i.parentNode;o&&!v1[o.tagName];)o=o.parentNode;i=o}return this.find(function(A){return A.get("el")===i})},e.prototype.createDom=function(){var t=Wa("svg"),n=new tY(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",n),t},e.prototype.onCanvasChange=function(t){var n=this.get("context"),a=this.get("el");if(t==="sort"){var i=this.get("children");i&&i.length&&hU(this,function(A,s){return i.indexOf(A)-i.indexOf(s)?1:0})}else if(t==="clear"){if(a){a.innerHTML="";var o=n.el;o.innerHTML="",a.appendChild(o)}}else t==="matrix"?Sc(this):t==="clip"?ac(this,n):t==="changeSize"&&(a.setAttribute("width",""+this.get("width")),a.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var t=this.get("context"),n=this.getChildren();ac(this,t),n.length&&dU(t,n)},e}(RD),yU={exports:{}},rY={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},mU={exports:{}},nY=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")},aY=nY,iY=Array.prototype.concat,oY=Array.prototype.slice,o2=mU.exports=function(e){for(var t=[],n=0,a=e.length;n<a;n++){var i=e[n];aY(i)?t=iY.call(t,oY.call(i)):t.push(i)}return t};o2.wrap=function(r){return function(){return r(o2(arguments))}};var AY=mU.exports,Il=rY,Mc=AY,wU=Object.hasOwnProperty,BU=Object.create(null);for(var cy in Il)wU.call(Il,cy)&&(BU[Il[cy]]=cy);var _a=yU.exports={to:{},get:{}};_a.get=function(r){var e=r.substring(0,3).toLowerCase(),t,n;switch(e){case"hsl":t=_a.get.hsl(r),n="hsl";break;case"hwb":t=_a.get.hwb(r),n="hwb";break;default:t=_a.get.rgb(r),n="rgb";break}return t?{model:n,value:t}:null};_a.get.rgb=function(r){if(!r)return null;var e=/^#([a-f0-9]{3,4})$/i,t=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,a=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^(\w+)$/,o=[0,0,0,1],A,s,u;if(A=r.match(t)){for(u=A[2],A=A[1],s=0;s<3;s++){var f=s*2;o[s]=parseInt(A.slice(f,f+2),16)}u&&(o[3]=parseInt(u,16)/255)}else if(A=r.match(e)){for(A=A[1],u=A[3],s=0;s<3;s++)o[s]=parseInt(A[s]+A[s],16);u&&(o[3]=parseInt(u+u,16)/255)}else if(A=r.match(n)){for(s=0;s<3;s++)o[s]=parseInt(A[s+1],0);A[4]&&(A[5]?o[3]=parseFloat(A[4])*.01:o[3]=parseFloat(A[4]))}else if(A=r.match(a)){for(s=0;s<3;s++)o[s]=Math.round(parseFloat(A[s+1])*2.55);A[4]&&(A[5]?o[3]=parseFloat(A[4])*.01:o[3]=parseFloat(A[4]))}else return(A=r.match(i))?A[1]==="transparent"?[0,0,0,0]:wU.call(Il,A[1])?(o=Il[A[1]],o[3]=1,o):null:null;for(s=0;s<3;s++)o[s]=wA(o[s],0,255);return o[3]=wA(o[3],0,1),o};_a.get.hsl=function(r){if(!r)return null;var e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=r.match(e);if(t){var n=parseFloat(t[4]),a=(parseFloat(t[1])%360+360)%360,i=wA(parseFloat(t[2]),0,100),o=wA(parseFloat(t[3]),0,100),A=wA(isNaN(n)?1:n,0,1);return[a,i,o,A]}return null};_a.get.hwb=function(r){if(!r)return null;var e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=r.match(e);if(t){var n=parseFloat(t[4]),a=(parseFloat(t[1])%360+360)%360,i=wA(parseFloat(t[2]),0,100),o=wA(parseFloat(t[3]),0,100),A=wA(isNaN(n)?1:n,0,1);return[a,i,o,A]}return null};_a.to.hex=function(){var r=Mc(arguments);return"#"+td(r[0])+td(r[1])+td(r[2])+(r[3]<1?td(Math.round(r[3]*255)):"")};_a.to.rgb=function(){var r=Mc(arguments);return r.length<4||r[3]===1?"rgb("+Math.round(r[0])+", "+Math.round(r[1])+", "+Math.round(r[2])+")":"rgba("+Math.round(r[0])+", "+Math.round(r[1])+", "+Math.round(r[2])+", "+r[3]+")"};_a.to.rgb.percent=function(){var r=Mc(arguments),e=Math.round(r[0]/255*100),t=Math.round(r[1]/255*100),n=Math.round(r[2]/255*100);return r.length<4||r[3]===1?"rgb("+e+"%, "+t+"%, "+n+"%)":"rgba("+e+"%, "+t+"%, "+n+"%, "+r[3]+")"};_a.to.hsl=function(){var r=Mc(arguments);return r.length<4||r[3]===1?"hsl("+r[0]+", "+r[1]+"%, "+r[2]+"%)":"hsla("+r[0]+", "+r[1]+"%, "+r[2]+"%, "+r[3]+")"};_a.to.hwb=function(){var r=Mc(arguments),e="";return r.length>=4&&r[3]!==1&&(e=", "+r[3]),"hwb("+r[0]+", "+r[1]+"%, "+r[2]+"%"+e+")"};_a.to.keyword=function(r){return BU[r.slice(0,3)]};function wA(r,e,t){return Math.min(Math.max(e,r),t)}function td(r){var e=Math.round(r).toString(16).toUpperCase();return e.length<2?"0"+e:e}var sY=yU.exports,EU={exports:{}},uY={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},ms=uY,bU={};for(var hy in ms)ms.hasOwnProperty(hy)&&(bU[ms[hy]]=hy);var _t=EU.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var ra in _t)if(_t.hasOwnProperty(ra)){if(!("channels"in _t[ra]))throw new Error("missing channels property: "+ra);if(!("labels"in _t[ra]))throw new Error("missing channel labels property: "+ra);if(_t[ra].labels.length!==_t[ra].channels)throw new Error("channel and label counts mismatch: "+ra);var fY=_t[ra].channels,lY=_t[ra].labels;delete _t[ra].channels,delete _t[ra].labels,Object.defineProperty(_t[ra],"channels",{value:fY}),Object.defineProperty(_t[ra],"labels",{value:lY})}_t.rgb.hsl=function(r){var e=r[0]/255,t=r[1]/255,n=r[2]/255,a=Math.min(e,t,n),i=Math.max(e,t,n),o=i-a,A,s,u;return i===a?A=0:e===i?A=(t-n)/o:t===i?A=2+(n-e)/o:n===i&&(A=4+(e-t)/o),A=Math.min(A*60,360),A<0&&(A+=360),u=(a+i)/2,i===a?s=0:u<=.5?s=o/(i+a):s=o/(2-i-a),[A,s*100,u*100]};_t.rgb.hsv=function(r){var e,t,n,a,i,o=r[0]/255,A=r[1]/255,s=r[2]/255,u=Math.max(o,A,s),f=u-Math.min(o,A,s),l=function(c){return(u-c)/6/f+1/2};return f===0?a=i=0:(i=f/u,e=l(o),t=l(A),n=l(s),o===u?a=n-t:A===u?a=1/3+e-n:s===u&&(a=2/3+t-e),a<0?a+=1:a>1&&(a-=1)),[a*360,i*100,u*100]};_t.rgb.hwb=function(r){var e=r[0],t=r[1],n=r[2],a=_t.rgb.hsl(r)[0],i=1/255*Math.min(e,Math.min(t,n));return n=1-1/255*Math.max(e,Math.max(t,n)),[a,i*100,n*100]};_t.rgb.cmyk=function(r){var e=r[0]/255,t=r[1]/255,n=r[2]/255,a,i,o,A;return A=Math.min(1-e,1-t,1-n),a=(1-e-A)/(1-A)||0,i=(1-t-A)/(1-A)||0,o=(1-n-A)/(1-A)||0,[a*100,i*100,o*100,A*100]};function cY(r,e){return Math.pow(r[0]-e[0],2)+Math.pow(r[1]-e[1],2)+Math.pow(r[2]-e[2],2)}_t.rgb.keyword=function(r){var e=bU[r];if(e)return e;var t=1/0,n;for(var a in ms)if(ms.hasOwnProperty(a)){var i=ms[a],o=cY(r,i);o<t&&(t=o,n=a)}return n};_t.keyword.rgb=function(r){return ms[r]};_t.rgb.xyz=function(r){var e=r[0]/255,t=r[1]/255,n=r[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var a=e*.4124+t*.3576+n*.1805,i=e*.2126+t*.7152+n*.0722,o=e*.0193+t*.1192+n*.9505;return[a*100,i*100,o*100]};_t.rgb.lab=function(r){var e=_t.rgb.xyz(r),t=e[0],n=e[1],a=e[2],i,o,A;return t/=95.047,n/=100,a/=108.883,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,i=116*n-16,o=500*(t-n),A=200*(n-a),[i,o,A]};_t.hsl.rgb=function(r){var e=r[0]/360,t=r[1]/100,n=r[2]/100,a,i,o,A,s;if(t===0)return s=n*255,[s,s,s];n<.5?i=n*(1+t):i=n+t-n*t,a=2*n-i,A=[0,0,0];for(var u=0;u<3;u++)o=e+1/3*-(u-1),o<0&&o++,o>1&&o--,6*o<1?s=a+(i-a)*6*o:2*o<1?s=i:3*o<2?s=a+(i-a)*(2/3-o)*6:s=a,A[u]=s*255;return A};_t.hsl.hsv=function(r){var e=r[0],t=r[1]/100,n=r[2]/100,a=t,i=Math.max(n,.01),o,A;return n*=2,t*=n<=1?n:2-n,a*=i<=1?i:2-i,A=(n+t)/2,o=n===0?2*a/(i+a):2*t/(n+t),[e,o*100,A*100]};_t.hsv.rgb=function(r){var e=r[0]/60,t=r[1]/100,n=r[2]/100,a=Math.floor(e)%6,i=e-Math.floor(e),o=255*n*(1-t),A=255*n*(1-t*i),s=255*n*(1-t*(1-i));switch(n*=255,a){case 0:return[n,s,o];case 1:return[A,n,o];case 2:return[o,n,s];case 3:return[o,A,n];case 4:return[s,o,n];case 5:return[n,o,A]}};_t.hsv.hsl=function(r){var e=r[0],t=r[1]/100,n=r[2]/100,a=Math.max(n,.01),i,o,A;return A=(2-t)*n,i=(2-t)*a,o=t*a,o/=i<=1?i:2-i,o=o||0,A/=2,[e,o*100,A*100]};_t.hwb.rgb=function(r){var e=r[0]/360,t=r[1]/100,n=r[2]/100,a=t+n,i,o,A,s;a>1&&(t/=a,n/=a),i=Math.floor(6*e),o=1-n,A=6*e-i,i&1&&(A=1-A),s=t+A*(o-t);var u,f,l;switch(i){default:case 6:case 0:u=o,f=s,l=t;break;case 1:u=s,f=o,l=t;break;case 2:u=t,f=o,l=s;break;case 3:u=t,f=s,l=o;break;case 4:u=s,f=t,l=o;break;case 5:u=o,f=t,l=s;break}return[u*255,f*255,l*255]};_t.cmyk.rgb=function(r){var e=r[0]/100,t=r[1]/100,n=r[2]/100,a=r[3]/100,i,o,A;return i=1-Math.min(1,e*(1-a)+a),o=1-Math.min(1,t*(1-a)+a),A=1-Math.min(1,n*(1-a)+a),[i*255,o*255,A*255]};_t.xyz.rgb=function(r){var e=r[0]/100,t=r[1]/100,n=r[2]/100,a,i,o;return a=e*3.2406+t*-1.5372+n*-.4986,i=e*-.9689+t*1.8758+n*.0415,o=e*.0557+t*-.204+n*1.057,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a*12.92,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*12.92,a=Math.min(Math.max(0,a),1),i=Math.min(Math.max(0,i),1),o=Math.min(Math.max(0,o),1),[a*255,i*255,o*255]};_t.xyz.lab=function(r){var e=r[0],t=r[1],n=r[2],a,i,o;return e/=95.047,t/=100,n/=108.883,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,a=116*t-16,i=500*(e-t),o=200*(t-n),[a,i,o]};_t.lab.xyz=function(r){var e=r[0],t=r[1],n=r[2],a,i,o;i=(e+16)/116,a=t/500+i,o=i-n/200;var A=Math.pow(i,3),s=Math.pow(a,3),u=Math.pow(o,3);return i=A>.008856?A:(i-16/116)/7.787,a=s>.008856?s:(a-16/116)/7.787,o=u>.008856?u:(o-16/116)/7.787,a*=95.047,i*=100,o*=108.883,[a,i,o]};_t.lab.lch=function(r){var e=r[0],t=r[1],n=r[2],a,i,o;return a=Math.atan2(n,t),i=a*360/2/Math.PI,i<0&&(i+=360),o=Math.sqrt(t*t+n*n),[e,o,i]};_t.lch.lab=function(r){var e=r[0],t=r[1],n=r[2],a,i,o;return o=n/360*2*Math.PI,a=t*Math.cos(o),i=t*Math.sin(o),[e,a,i]};_t.rgb.ansi16=function(r){var e=r[0],t=r[1],n=r[2],a=1 in arguments?arguments[1]:_t.rgb.hsv(r)[2];if(a=Math.round(a/50),a===0)return 30;var i=30+(Math.round(n/255)<<2|Math.round(t/255)<<1|Math.round(e/255));return a===2&&(i+=60),i};_t.hsv.ansi16=function(r){return _t.rgb.ansi16(_t.hsv.rgb(r),r[2])};_t.rgb.ansi256=function(r){var e=r[0],t=r[1],n=r[2];if(e===t&&t===n)return e<8?16:e>248?231:Math.round((e-8)/247*24)+232;var a=16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(n/255*5);return a};_t.ansi16.rgb=function(r){var e=r%10;if(e===0||e===7)return r>50&&(e+=3.5),e=e/10.5*255,[e,e,e];var t=(~~(r>50)+1)*.5,n=(e&1)*t*255,a=(e>>1&1)*t*255,i=(e>>2&1)*t*255;return[n,a,i]};_t.ansi256.rgb=function(r){if(r>=232){var e=(r-232)*10+8;return[e,e,e]}r-=16;var t,n=Math.floor(r/36)/5*255,a=Math.floor((t=r%36)/6)/5*255,i=t%6/5*255;return[n,a,i]};_t.rgb.hex=function(r){var e=((Math.round(r[0])&255)<<16)+((Math.round(r[1])&255)<<8)+(Math.round(r[2])&255),t=e.toString(16).toUpperCase();return"000000".substring(t.length)+t};_t.hex.rgb=function(r){var e=r.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var t=e[0];e[0].length===3&&(t=t.split("").map(function(A){return A+A}).join(""));var n=parseInt(t,16),a=n>>16&255,i=n>>8&255,o=n&255;return[a,i,o]};_t.rgb.hcg=function(r){var e=r[0]/255,t=r[1]/255,n=r[2]/255,a=Math.max(Math.max(e,t),n),i=Math.min(Math.min(e,t),n),o=a-i,A,s;return o<1?A=i/(1-o):A=0,o<=0?s=0:a===e?s=(t-n)/o%6:a===t?s=2+(n-e)/o:s=4+(e-t)/o+4,s/=6,s%=1,[s*360,o*100,A*100]};_t.hsl.hcg=function(r){var e=r[1]/100,t=r[2]/100,n=1,a=0;return t<.5?n=2*e*t:n=2*e*(1-t),n<1&&(a=(t-.5*n)/(1-n)),[r[0],n*100,a*100]};_t.hsv.hcg=function(r){var e=r[1]/100,t=r[2]/100,n=e*t,a=0;return n<1&&(a=(t-n)/(1-n)),[r[0],n*100,a*100]};_t.hcg.rgb=function(r){var e=r[0]/360,t=r[1]/100,n=r[2]/100;if(t===0)return[n*255,n*255,n*255];var a=[0,0,0],i=e%1*6,o=i%1,A=1-o,s=0;switch(Math.floor(i)){case 0:a[0]=1,a[1]=o,a[2]=0;break;case 1:a[0]=A,a[1]=1,a[2]=0;break;case 2:a[0]=0,a[1]=1,a[2]=o;break;case 3:a[0]=0,a[1]=A,a[2]=1;break;case 4:a[0]=o,a[1]=0,a[2]=1;break;default:a[0]=1,a[1]=0,a[2]=A}return s=(1-t)*n,[(t*a[0]+s)*255,(t*a[1]+s)*255,(t*a[2]+s)*255]};_t.hcg.hsv=function(r){var e=r[1]/100,t=r[2]/100,n=e+t*(1-e),a=0;return n>0&&(a=e/n),[r[0],a*100,n*100]};_t.hcg.hsl=function(r){var e=r[1]/100,t=r[2]/100,n=t*(1-e)+.5*e,a=0;return n>0&&n<.5?a=e/(2*n):n>=.5&&n<1&&(a=e/(2*(1-n))),[r[0],a*100,n*100]};_t.hcg.hwb=function(r){var e=r[1]/100,t=r[2]/100,n=e+t*(1-e);return[r[0],(n-e)*100,(1-n)*100]};_t.hwb.hcg=function(r){var e=r[1]/100,t=r[2]/100,n=1-t,a=n-e,i=0;return a<1&&(i=(n-a)/(1-a)),[r[0],a*100,i*100]};_t.apple.rgb=function(r){return[r[0]/65535*255,r[1]/65535*255,r[2]/65535*255]};_t.rgb.apple=function(r){return[r[0]/255*65535,r[1]/255*65535,r[2]/255*65535]};_t.gray.rgb=function(r){return[r[0]/100*255,r[0]/100*255,r[0]/100*255]};_t.gray.hsl=_t.gray.hsv=function(r){return[0,0,r[0]]};_t.gray.hwb=function(r){return[0,100,r[0]]};_t.gray.cmyk=function(r){return[0,0,0,r[0]]};_t.gray.lab=function(r){return[r[0],0,0]};_t.gray.hex=function(r){var e=Math.round(r[0]/100*255)&255,t=(e<<16)+(e<<8)+e,n=t.toString(16).toUpperCase();return"000000".substring(n.length)+n};_t.rgb.gray=function(r){var e=(r[0]+r[1]+r[2])/3;return[e/255*100]};var xU=EU.exports,zv=xU;function hY(){for(var r={},e=Object.keys(zv),t=e.length,n=0;n<t;n++)r[e[n]]={distance:-1,parent:null};return r}function dY(r){var e=hY(),t=[r];for(e[r].distance=0;t.length;)for(var n=t.pop(),a=Object.keys(zv[n]),i=a.length,o=0;o<i;o++){var A=a[o],s=e[A];s.distance===-1&&(s.distance=e[n].distance+1,s.parent=n,t.unshift(A))}return e}function vY(r,e){return function(t){return e(r(t))}}function gY(r,e){for(var t=[e[r].parent,r],n=zv[e[r].parent][r],a=e[r].parent;e[a].parent;)t.unshift(e[a].parent),n=vY(zv[e[a].parent][a],n),a=e[a].parent;return n.conversion=t,n}var pY=function(r){for(var e=dY(r),t={},n=Object.keys(e),a=n.length,i=0;i<a;i++){var o=n[i],A=e[o];A.parent!==null&&(t[o]=gY(o,e))}return t},g1=xU,yY=pY,bu={},mY=Object.keys(g1);function wY(r){var e=function(t){return t==null?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),r(t))};return"conversion"in r&&(e.conversion=r.conversion),e}function BY(r){var e=function(t){if(t==null)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var n=r(t);if(typeof n=="object")for(var a=n.length,i=0;i<a;i++)n[i]=Math.round(n[i]);return n};return"conversion"in r&&(e.conversion=r.conversion),e}mY.forEach(function(r){bu[r]={},Object.defineProperty(bu[r],"channels",{value:g1[r].channels}),Object.defineProperty(bu[r],"labels",{value:g1[r].labels});var e=yY(r),t=Object.keys(e);t.forEach(function(n){var a=e[n];bu[r][n]=BY(a),bu[r][n].raw=wY(a)})});var EY=bu,ll=sY,ba=EY,DB=[].slice,CU=["keyword","gray","hex"],p1={};Object.keys(ba).forEach(function(r){p1[DB.call(ba[r].labels).sort().join("")]=r});var Kv={};function Pn(r,e){if(!(this instanceof Pn))return new Pn(r,e);if(e&&e in CU&&(e=null),e&&!(e in ba))throw new Error("Unknown model: "+e);var t,n;if(r==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(r instanceof Pn)this.model=r.model,this.color=r.color.slice(),this.valpha=r.valpha;else if(typeof r=="string"){var a=ll.get(r);if(a===null)throw new Error("Unable to parse color from string: "+r);this.model=a.model,n=ba[this.model].channels,this.color=a.value.slice(0,n),this.valpha=typeof a.value[n]=="number"?a.value[n]:1}else if(r.length){this.model=e||"rgb",n=ba[this.model].channels;var i=DB.call(r,0,n);this.color=y1(i,n),this.valpha=typeof r[n]=="number"?r[n]:1}else if(typeof r=="number")r&=16777215,this.model="rgb",this.color=[r>>16&255,r>>8&255,r&255],this.valpha=1;else{this.valpha=1;var o=Object.keys(r);"alpha"in r&&(o.splice(o.indexOf("alpha"),1),this.valpha=typeof r.alpha=="number"?r.alpha:0);var A=o.sort().join("");if(!(A in p1))throw new Error("Unable to parse color from object: "+JSON.stringify(r));this.model=p1[A];var s=ba[this.model].labels,u=[];for(t=0;t<s.length;t++)u.push(r[s[t]]);this.color=y1(u)}if(Kv[this.model])for(n=ba[this.model].channels,t=0;t<n;t++){var f=Kv[this.model][t];f&&(this.color[t]=f(this.color[t]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Pn.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(r){var e=this.model in ll.to?this:this.rgb();e=e.round(typeof r=="number"?r:1);var t=e.valpha===1?e.color:e.color.concat(this.valpha);return ll.to[e.model](t)},percentString:function(r){var e=this.rgb().round(typeof r=="number"?r:1),t=e.valpha===1?e.color:e.color.concat(this.valpha);return ll.to.rgb.percent(t)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var r={},e=ba[this.model].channels,t=ba[this.model].labels,n=0;n<e;n++)r[t[n]]=this.color[n];return this.valpha!==1&&(r.alpha=this.valpha),r},unitArray:function(){var r=this.rgb().color;return r[0]/=255,r[1]/=255,r[2]/=255,this.valpha!==1&&r.push(this.valpha),r},unitObject:function(){var r=this.rgb().object();return r.r/=255,r.g/=255,r.b/=255,this.valpha!==1&&(r.alpha=this.valpha),r},round:function(r){return r=Math.max(r||0,0),new Pn(this.color.map(xY(r)).concat(this.valpha),this.model)},alpha:function(r){return arguments.length?new Pn(this.color.concat(Math.max(0,Math.min(1,r))),this.model):this.valpha},red:Xr("rgb",0,gn(255)),green:Xr("rgb",1,gn(255)),blue:Xr("rgb",2,gn(255)),hue:Xr(["hsl","hsv","hsl","hwb","hcg"],0,function(r){return(r%360+360)%360}),saturationl:Xr("hsl",1,gn(100)),lightness:Xr("hsl",2,gn(100)),saturationv:Xr("hsv",1,gn(100)),value:Xr("hsv",2,gn(100)),chroma:Xr("hcg",1,gn(100)),gray:Xr("hcg",2,gn(100)),white:Xr("hwb",1,gn(100)),wblack:Xr("hwb",2,gn(100)),cyan:Xr("cmyk",0,gn(100)),magenta:Xr("cmyk",1,gn(100)),yellow:Xr("cmyk",2,gn(100)),black:Xr("cmyk",3,gn(100)),x:Xr("xyz",0,gn(100)),y:Xr("xyz",1,gn(100)),z:Xr("xyz",2,gn(100)),l:Xr("lab",0,gn(100)),a:Xr("lab",1),b:Xr("lab",2),keyword:function(r){return arguments.length?new Pn(r):ba[this.model].keyword(this.color)},hex:function(r){return arguments.length?new Pn(r):ll.to.hex(this.rgb().round().color)},rgbNumber:function(){var r=this.rgb().color;return(r[0]&255)<<16|(r[1]&255)<<8|r[2]&255},luminosity:function(){for(var r=this.rgb().color,e=[],t=0;t<r.length;t++){var n=r[t]/255;e[t]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(r){var e=this.luminosity(),t=r.luminosity();return e>t?(e+.05)/(t+.05):(t+.05)/(e+.05)},level:function(r){var e=this.contrast(r);return e>=7.1?"AAA":e>=4.5?"AA":""},isDark:function(){var r=this.rgb().color,e=(r[0]*299+r[1]*587+r[2]*114)/1e3;return e<128},isLight:function(){return!this.isDark()},negate:function(){for(var r=this.rgb(),e=0;e<3;e++)r.color[e]=255-r.color[e];return r},lighten:function(r){var e=this.hsl();return e.color[2]+=e.color[2]*r,e},darken:function(r){var e=this.hsl();return e.color[2]-=e.color[2]*r,e},saturate:function(r){var e=this.hsl();return e.color[1]+=e.color[1]*r,e},desaturate:function(r){var e=this.hsl();return e.color[1]-=e.color[1]*r,e},whiten:function(r){var e=this.hwb();return e.color[1]+=e.color[1]*r,e},blacken:function(r){var e=this.hwb();return e.color[2]+=e.color[2]*r,e},grayscale:function(){var r=this.rgb().color,e=r[0]*.3+r[1]*.59+r[2]*.11;return Pn.rgb(e,e,e)},fade:function(r){return this.alpha(this.valpha-this.valpha*r)},opaquer:function(r){return this.alpha(this.valpha+this.valpha*r)},rotate:function(r){var e=this.hsl(),t=e.color[0];return t=(t+r)%360,t=t<0?360+t:t,e.color[0]=t,e},mix:function(r,e){if(!r||!r.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof r);var t=r.rgb(),n=this.rgb(),a=e===void 0?.5:e,i=2*a-1,o=t.alpha()-n.alpha(),A=((i*o===-1?i:(i+o)/(1+i*o))+1)/2,s=1-A;return Pn.rgb(A*t.red()+s*n.red(),A*t.green()+s*n.green(),A*t.blue()+s*n.blue(),t.alpha()*a+n.alpha()*(1-a))}};Object.keys(ba).forEach(function(r){if(CU.indexOf(r)===-1){var e=ba[r].channels;Pn.prototype[r]=function(){if(this.model===r)return new Pn(this);if(arguments.length)return new Pn(arguments,r);var t=typeof arguments[e]=="number"?e:this.valpha;return new Pn(CY(ba[this.model][r].raw(this.color)).concat(t),r)},Pn[r]=function(t){return typeof t=="number"&&(t=y1(DB.call(arguments),e)),new Pn(t,r)}}});function bY(r,e){return Number(r.toFixed(e))}function xY(r){return function(e){return bY(e,r)}}function Xr(r,e,t){return r=Array.isArray(r)?r:[r],r.forEach(function(n){(Kv[n]||(Kv[n]=[]))[e]=t}),r=r[0],function(n){var a;return arguments.length?(t&&(n=t(n)),a=this[r](),a.color[e]=n,a):(a=this[r]().color[e],t&&(a=t(a)),a)}}function gn(r){return function(e){return Math.max(0,Math.min(r,e))}}function CY(r){return Array.isArray(r)?r:[r]}function y1(r,e){for(var t=0;t<e;t++)typeof r[t]!="number"&&(r[t]=0);return r}var _Y=Pn;const Tl=qi(_Y);function jv(r){"@babel/helpers - typeof";return jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jv(r)}var SY=/^\s+/,MY=/\s+$/;function St(r,e){if(r=r||"",e=e||{},r instanceof St)return r;if(!(this instanceof St))return new St(r,e);var t=IY(r);this._originalInput=r,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}St.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),t,n,a,i,o,A;return t=e.r/255,n=e.g/255,a=e.b/255,t<=.03928?i=t/12.92:i=Math.pow((t+.055)/1.055,2.4),n<=.03928?o=n/12.92:o=Math.pow((n+.055)/1.055,2.4),a<=.03928?A=a/12.92:A=Math.pow((a+.055)/1.055,2.4),.2126*i+.7152*o+.0722*A},setAlpha:function(e){return this._a=_U(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=s2(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=s2(this._r,this._g,this._b),t=Math.round(e.h*360),n=Math.round(e.s*100),a=Math.round(e.v*100);return this._a==1?"hsv("+t+", "+n+"%, "+a+"%)":"hsva("+t+", "+n+"%, "+a+"%, "+this._roundA+")"},toHsl:function(){var e=A2(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=A2(this._r,this._g,this._b),t=Math.round(e.h*360),n=Math.round(e.s*100),a=Math.round(e.l*100);return this._a==1?"hsl("+t+", "+n+"%, "+a+"%)":"hsla("+t+", "+n+"%, "+a+"%, "+this._roundA+")"},toHex:function(e){return u2(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return DY(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Nr(this._r,255)*100)+"%",g:Math.round(Nr(this._g,255)*100)+"%",b:Math.round(Nr(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Nr(this._r,255)*100)+"%, "+Math.round(Nr(this._g,255)*100)+"%, "+Math.round(Nr(this._b,255)*100)+"%)":"rgba("+Math.round(Nr(this._r,255)*100)+"%, "+Math.round(Nr(this._g,255)*100)+"%, "+Math.round(Nr(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:jY[u2(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+f2(this._r,this._g,this._b,this._a),n=t,a=this._gradientType?"GradientType = 1, ":"";if(e){var i=St(e);n="#"+f2(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+a+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,a=this._a<1&&this._a>=0,i=!t&&a&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return i?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(n=this.toRgbString()),e==="prgb"&&(n=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(n=this.toHexString()),e==="hex3"&&(n=this.toHexString(!0)),e==="hex4"&&(n=this.toHex8String(!0)),e==="hex8"&&(n=this.toHex8String()),e==="name"&&(n=this.toName()),e==="hsl"&&(n=this.toHslString()),e==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return St(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(kY,arguments)},brighten:function(){return this._applyModification(PY,arguments)},darken:function(){return this._applyModification(QY,arguments)},desaturate:function(){return this._applyModification(OY,arguments)},saturate:function(){return this._applyModification(UY,arguments)},greyscale:function(){return this._applyModification(NY,arguments)},spin:function(){return this._applyModification(RY,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(zY,arguments)},complement:function(){return this._applyCombination(HY,arguments)},monochromatic:function(){return this._applyCombination(KY,arguments)},splitcomplement:function(){return this._applyCombination(GY,arguments)},triad:function(){return this._applyCombination(l2,[3])},tetrad:function(){return this._applyCombination(l2,[4])}};St.fromRatio=function(r,e){if(jv(r)=="object"){var t={};for(var n in r)r.hasOwnProperty(n)&&(n==="a"?t[n]=r[n]:t[n]=cl(r[n]));r=t}return St(r,e)};function IY(r){var e={r:0,g:0,b:0},t=1,n=null,a=null,i=null,o=!1,A=!1;return typeof r=="string"&&(r=XY(r)),jv(r)=="object"&&(go(r.r)&&go(r.g)&&go(r.b)?(e=TY(r.r,r.g,r.b),o=!0,A=String(r.r).substr(-1)==="%"?"prgb":"rgb"):go(r.h)&&go(r.s)&&go(r.v)?(n=cl(r.s),a=cl(r.v),e=LY(r.h,n,a),o=!0,A="hsv"):go(r.h)&&go(r.s)&&go(r.l)&&(n=cl(r.s),i=cl(r.l),e=FY(r.h,n,i),o=!0,A="hsl"),r.hasOwnProperty("a")&&(t=r.a)),t=_U(t),{ok:o,format:r.format||A,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}function TY(r,e,t){return{r:Nr(r,255)*255,g:Nr(e,255)*255,b:Nr(t,255)*255}}function A2(r,e,t){r=Nr(r,255),e=Nr(e,255),t=Nr(t,255);var n=Math.max(r,e,t),a=Math.min(r,e,t),i,o,A=(n+a)/2;if(n==a)i=o=0;else{var s=n-a;switch(o=A>.5?s/(2-n-a):s/(n+a),n){case r:i=(e-t)/s+(e<t?6:0);break;case e:i=(t-r)/s+2;break;case t:i=(r-e)/s+4;break}i/=6}return{h:i,s:o,l:A}}function FY(r,e,t){var n,a,i;r=Nr(r,360),e=Nr(e,100),t=Nr(t,100);function o(u,f,l){return l<0&&(l+=1),l>1&&(l-=1),l<1/6?u+(f-u)*6*l:l<1/2?f:l<2/3?u+(f-u)*(2/3-l)*6:u}if(e===0)n=a=i=t;else{var A=t<.5?t*(1+e):t+e-t*e,s=2*t-A;n=o(s,A,r+1/3),a=o(s,A,r),i=o(s,A,r-1/3)}return{r:n*255,g:a*255,b:i*255}}function s2(r,e,t){r=Nr(r,255),e=Nr(e,255),t=Nr(t,255);var n=Math.max(r,e,t),a=Math.min(r,e,t),i,o,A=n,s=n-a;if(o=n===0?0:s/n,n==a)i=0;else{switch(n){case r:i=(e-t)/s+(e<t?6:0);break;case e:i=(t-r)/s+2;break;case t:i=(r-e)/s+4;break}i/=6}return{h:i,s:o,v:A}}function LY(r,e,t){r=Nr(r,360)*6,e=Nr(e,100),t=Nr(t,100);var n=Math.floor(r),a=r-n,i=t*(1-e),o=t*(1-a*e),A=t*(1-(1-a)*e),s=n%6,u=[t,o,i,i,A,t][s],f=[A,t,t,o,i,i][s],l=[i,i,A,t,t,o][s];return{r:u*255,g:f*255,b:l*255}}function u2(r,e,t,n){var a=[fi(Math.round(r).toString(16)),fi(Math.round(e).toString(16)),fi(Math.round(t).toString(16))];return n&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function DY(r,e,t,n,a){var i=[fi(Math.round(r).toString(16)),fi(Math.round(e).toString(16)),fi(Math.round(t).toString(16)),fi(SU(n))];return a&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0):i.join("")}function f2(r,e,t,n){var a=[fi(SU(n)),fi(Math.round(r).toString(16)),fi(Math.round(e).toString(16)),fi(Math.round(t).toString(16))];return a.join("")}St.equals=function(r,e){return!r||!e?!1:St(r).toRgbString()==St(e).toRgbString()};St.random=function(){return St.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function OY(r,e){e=e===0?0:e||10;var t=St(r).toHsl();return t.s-=e/100,t.s=qg(t.s),St(t)}function UY(r,e){e=e===0?0:e||10;var t=St(r).toHsl();return t.s+=e/100,t.s=qg(t.s),St(t)}function NY(r){return St(r).desaturate(100)}function kY(r,e){e=e===0?0:e||10;var t=St(r).toHsl();return t.l+=e/100,t.l=qg(t.l),St(t)}function PY(r,e){e=e===0?0:e||10;var t=St(r).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),St(t)}function QY(r,e){e=e===0?0:e||10;var t=St(r).toHsl();return t.l-=e/100,t.l=qg(t.l),St(t)}function RY(r,e){var t=St(r).toHsl(),n=(t.h+e)%360;return t.h=n<0?360+n:n,St(t)}function HY(r){var e=St(r).toHsl();return e.h=(e.h+180)%360,St(e)}function l2(r,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var t=St(r).toHsl(),n=[St(r)],a=360/e,i=1;i<e;i++)n.push(St({h:(t.h+i*a)%360,s:t.s,l:t.l}));return n}function GY(r){var e=St(r).toHsl(),t=e.h;return[St(r),St({h:(t+72)%360,s:e.s,l:e.l}),St({h:(t+216)%360,s:e.s,l:e.l})]}function zY(r,e,t){e=e||6,t=t||30;var n=St(r).toHsl(),a=360/t,i=[St(r)];for(n.h=(n.h-(a*e>>1)+720)%360;--e;)n.h=(n.h+a)%360,i.push(St(n));return i}function KY(r,e){e=e||6;for(var t=St(r).toHsv(),n=t.h,a=t.s,i=t.v,o=[],A=1/e;e--;)o.push(St({h:n,s:a,v:i})),i=(i+A)%1;return o}St.mix=function(r,e,t){t=t===0?0:t||50;var n=St(r).toRgb(),a=St(e).toRgb(),i=t/100,o={r:(a.r-n.r)*i+n.r,g:(a.g-n.g)*i+n.g,b:(a.b-n.b)*i+n.b,a:(a.a-n.a)*i+n.a};return St(o)};St.readability=function(r,e){var t=St(r),n=St(e);return(Math.max(t.getLuminance(),n.getLuminance())+.05)/(Math.min(t.getLuminance(),n.getLuminance())+.05)};St.isReadable=function(r,e,t){var n=St.readability(r,e),a,i;switch(i=!1,a=YY(t),a.level+a.size){case"AAsmall":case"AAAlarge":i=n>=4.5;break;case"AAlarge":i=n>=3;break;case"AAAsmall":i=n>=7;break}return i};St.mostReadable=function(r,e,t){var n=null,a=0,i,o,A,s;t=t||{},o=t.includeFallbackColors,A=t.level,s=t.size;for(var u=0;u<e.length;u++)i=St.readability(r,e[u]),i>a&&(a=i,n=St(e[u]));return St.isReadable(r,n,{level:A,size:s})||!o?n:(t.includeFallbackColors=!1,St.mostReadable(r,["#fff","#000"],t))};var m1=St.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},jY=St.hexNames=$Y(m1);function $Y(r){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[r[t]]=t);return e}function _U(r){return r=parseFloat(r),(isNaN(r)||r<0||r>1)&&(r=1),r}function Nr(r,e){WY(r)&&(r="100%");var t=VY(r);return r=Math.min(e,Math.max(0,parseFloat(r))),t&&(r=parseInt(r*e,10)/100),Math.abs(r-e)<1e-6?1:r%e/parseFloat(e)}function qg(r){return Math.min(1,Math.max(0,r))}function ma(r){return parseInt(r,16)}function WY(r){return typeof r=="string"&&r.indexOf(".")!=-1&&parseFloat(r)===1}function VY(r){return typeof r=="string"&&r.indexOf("%")!=-1}function fi(r){return r.length==1?"0"+r:""+r}function cl(r){return r<=1&&(r=r*100+"%"),r}function SU(r){return Math.round(parseFloat(r)*255).toString(16)}function c2(r){return ma(r)/255}var ri=function(){var r="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",t="(?:"+e+")|(?:"+r+")",n="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",a="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+a),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+a),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+a),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function go(r){return!!ri.CSS_UNIT.exec(r)}function XY(r){r=r.replace(SY,"").replace(MY,"").toLowerCase();var e=!1;if(m1[r])r=m1[r],e=!0;else if(r=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t;return(t=ri.rgb.exec(r))?{r:t[1],g:t[2],b:t[3]}:(t=ri.rgba.exec(r))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=ri.hsl.exec(r))?{h:t[1],s:t[2],l:t[3]}:(t=ri.hsla.exec(r))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=ri.hsv.exec(r))?{h:t[1],s:t[2],v:t[3]}:(t=ri.hsva.exec(r))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=ri.hex8.exec(r))?{r:ma(t[1]),g:ma(t[2]),b:ma(t[3]),a:c2(t[4]),format:e?"name":"hex8"}:(t=ri.hex6.exec(r))?{r:ma(t[1]),g:ma(t[2]),b:ma(t[3]),format:e?"name":"hex"}:(t=ri.hex4.exec(r))?{r:ma(t[1]+""+t[1]),g:ma(t[2]+""+t[2]),b:ma(t[3]+""+t[3]),a:c2(t[4]+""+t[4]),format:e?"name":"hex8"}:(t=ri.hex3.exec(r))?{r:ma(t[1]+""+t[1]),g:ma(t[2]+""+t[2]),b:ma(t[3]+""+t[3]),format:e?"name":"hex"}:!1}function YY(r){var e,t;return r=r||{level:"AA",size:"small"},e=(r.level||"AA").toUpperCase(),t=(r.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),t!=="small"&&t!=="large"&&(t="small"),{level:e,size:t}}var rd=2,h2=.16,ZY=.05,qY=.05,JY=.15,MU=5,IU=4,eZ=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function d2(r,e,t){var n;return Math.round(r.h)>=60&&Math.round(r.h)<=240?n=t?Math.round(r.h)-rd*e:Math.round(r.h)+rd*e:n=t?Math.round(r.h)+rd*e:Math.round(r.h)-rd*e,n<0?n+=360:n>=360&&(n-=360),n}function v2(r,e,t){if(r.h===0&&r.s===0)return r.s;var n;return t?n=r.s-h2*e:e===IU?n=r.s+h2:n=r.s+ZY*e,n>1&&(n=1),t&&e===MU&&n>.1&&(n=.1),n<.06&&(n=.06),Number(n.toFixed(2))}function g2(r,e,t){var n;return t?n=r.v+qY*e:n=r.v-JY*e,n>1&&(n=1),Number(n.toFixed(2))}function $v(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[],n=St(r),a=MU;a>0;a-=1){var i=n.toHsv(),o=St({h:d2(i,a,!0),s:v2(i,a,!0),v:g2(i,a,!0)}).toHexString();t.push(o)}t.push(n.toHexString());for(var A=1;A<=IU;A+=1){var s=n.toHsv(),u=St({h:d2(s,A),s:v2(s,A),v:g2(s,A)}).toHexString();t.push(u)}return e.theme==="dark"?eZ.map(function(f){var l=f.index,c=f.opacity,h=St.mix(e.backgroundColor||"#141414",t[l],c*100).toHexString();return h}):t}var dy={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},vy={},gy={};Object.keys(dy).forEach(function(r){vy[r]=$v(dy[r]),vy[r].primary=vy[r][5],gy[r]=$v(dy[r],{theme:"dark",backgroundColor:"#141414"}),gy[r].primary=gy[r][5]});var yn=function(e,t,n){var a=Tl(e),i=Tl(t);return Tl([(1-n)*a.red()+n*i.red(),(1-n)*a.green()+n*i.green(),(1-n)*a.blue()+n*i.blue()]).rgb()},tZ=function(e,t,n){t===void 0&&(t="#fff"),n===void 0&&(n="rgb(150, 150, 150)");var a=yn(t,e,.05).rgb().toString(),i=yn(t,e,.1).rgb().toString(),o=yn(t,e,.2).rgb().toString(),A=yn(t,e,.4).rgb().toString(),s=yn(t,n,.02).rgb().toString(),u=yn(t,n,.05).rgb().toString(),f=yn(t,n,.1).rgb().toString(),l=yn(t,n,.2).rgb().toString(),c=yn(t,n,.3).rgb().toString(),h=$v(e,{theme:"default",backgroundColor:t}),d=Tl(e).hex().toLowerCase(),v=h.indexOf(d),g=e;return v!==-1&&(g=h[v+1]),{mainStroke:e,mainFill:i,activeStroke:e,activeFill:a,inactiveStroke:A,inactiveFill:a,selectedStroke:e,selectedFill:t,highlightStroke:g,highlightFill:o,disableStroke:c,disableFill:u,edgeMainStroke:c,edgeActiveStroke:e,edgeInactiveStroke:l,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:f,comboMainStroke:c,comboMainFill:s,comboActiveStroke:e,comboActiveFill:a,comboInactiveStroke:c,comboInactiveFill:s,comboSelectedStroke:e,comboSelectedFill:s,comboHighlightStroke:g,comboHighlightFill:s,comboDisableStroke:l,comboDisableFill:u}},rZ=function(e,t,n){t===void 0&&(t="#fff"),n===void 0&&(n="#777");var a=yn(t,e,.2).rgb().toString(),i=yn(t,e,.3).rgb().toString(),o=yn(t,e,.6).rgb().toString(),A=yn(t,e,.8).rgb().toString(),s=yn(t,n,.2).rgb().toString(),u=yn(t,n,.25).rgb().toString(),f=yn(t,n,.3).rgb().toString(),l=yn(t,n,.4).rgb().toString(),c=yn(t,n,.5).rgb().toString(),h=$v(e,{theme:"dark",backgroundColor:t}),d=Tl(e).hex().toLowerCase(),v=h.indexOf(d),g=e;return v!==-1&&(g=h[v+1]),{mainStroke:A,mainFill:a,activeStroke:e,activeFill:i,inactiveStroke:A,inactiveFill:a,selectedStroke:e,selectedFill:a,highlightStroke:e,highlightFill:o,disableStroke:c,disableFill:u,edgeMainStroke:n,edgeActiveStroke:e,edgeInactiveStroke:n,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:f,comboMainStroke:l,comboMainFill:u,comboActiveStroke:e,comboActiveFill:s,comboInactiveStroke:l,comboInactiveFill:u,comboSelectedStroke:e,comboSelectedFill:s,comboHighlightStroke:g,comboHighlightFill:u,comboDisableStroke:l,comboDisableFill:s}},OB=function(e,t,n,a){return t===void 0&&(t="#fff"),n===void 0&&(n="default"),n==="default"?tZ(e,t,"rgb(150, 150, 150)"):rZ(e,t,"#777")},nZ=function(e,t,n,a){t===void 0&&(t="#fff"),n===void 0&&(n="default");var i=[];return e.forEach(function(o){i.push(OB(o,t,n))}),i};const aZ=Object.freeze(Object.defineProperty({__proto__:null,getColorSetsBySubjectColors:nZ,getColorsWithSubjectColor:OB,mixColor:yn},Symbol.toStringTag,{value:"Module"}));var iZ="rgb(95, 149, 255)",oZ="rgb(255, 255, 255)",p2="rgb(0, 0, 0)",nr=OB(iZ,oZ);const ws={version:"0.8.20",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:nr.mainStroke,fill:nr.mainFill},size:20,color:nr.mainStroke,linkPoints:{size:8,lineWidth:1,fill:nr.activeFill,stroke:nr.activeStroke}},nodeStateStyles:{active:{fill:nr.activeFill,stroke:nr.activeStroke,lineWidth:2,shadowColor:nr.mainStroke,shadowBlur:10},selected:{fill:nr.selectedFill,stroke:nr.selectedStroke,lineWidth:4,shadowColor:nr.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:nr.highlightFill,stroke:nr.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:nr.inactiveFill,stroke:nr.inactiveStroke,lineWidth:1},disable:{fill:nr.disableFill,stroke:nr.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:p2,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:nr.edgeMainStroke,lineAppendWidth:2},color:nr.edgeMainStroke},edgeStateStyles:{active:{stroke:nr.edgeActiveStroke,lineWidth:1},selected:{stroke:nr.edgeSelectedStroke,lineWidth:2,shadowColor:nr.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:nr.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:nr.edgeInactiveStroke,lineWidth:1},disable:{stroke:nr.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:p2,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:nr.comboMainFill,lineWidth:1,stroke:nr.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:nr.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:nr.comboActiveStroke,lineWidth:1,fill:nr.comboActiveFill},selected:{stroke:nr.comboSelectedStroke,lineWidth:2,fill:nr.comboSelectedFill,shadowColor:nr.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:nr.comboHighlightStroke,lineWidth:2,fill:nr.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:nr.comboInactiveStroke,fill:nr.comboInactiveFill,lineWidth:1},disable:{stroke:nr.comboDisableStroke,fill:nr.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"};function nd(r,e,t){if(r){if(typeof r.addEventListener=="function")return r.addEventListener(e,t,!1),{remove:function(){r.removeEventListener(e,t,!1)}};if(typeof r.attachEvent=="function")return r.attachEvent("on"+e,t),{remove:function(){r.detachEvent("on"+e,t)}}}}var hl,py,TU,w1;function AZ(){hl=document.createElement("table"),py=document.createElement("tr"),TU=/^\s*<(\w+|!)[^>]*>/,w1={tr:document.createElement("tbody"),tbody:hl,thead:hl,tfoot:hl,td:py,th:py,"*":document.createElement("div")}}function Sr(r){hl||AZ();var e=TU.test(r)&&RegExp.$1;(!e||!(e in w1))&&(e="*");var t=w1[e];r=typeof r=="string"?r.replace(/(^\s*)|(\s*$)/g,""):r,t.innerHTML=""+r;var n=t.childNodes[0];return n&&t.contains(n)&&t.removeChild(n),n}function Wt(r,e){if(r)for(var t in e)e.hasOwnProperty(t)&&(r.style[t]=e[t]);return r}var sZ=Hn.cloneEvent,uZ=Hn.isViewportChanged,fZ=function(r){Lt(e,r);function e(t){var n=r.call(this,t)||this;return n.extendEvents=[],n.dragging=!1,n.mousedown=!1,n.preItem=null,n.destroy(),n.graph=t,n.destroyed=!1,n.initEvents(),n}return e.prototype.initEvents=function(){var t=this,n=t.graph,a=t.extendEvents,i=a===void 0?[]:a,o=n.get("canvas"),A=o.get("el"),s=ls(this,"onCanvasEvents"),u=ls(this,"onExtendEvents"),f=ls(this,"onWheelEvent");o.off("*").on("*",s),this.canvasHandler=s,i.push(nd(A,"wheel",f)),typeof window<"u"&&(i.push(nd(window,"keydown",u)),i.push(nd(window,"keyup",u)),i.push(nd(window,"focus",u))),this.resetHandler&&n.off("afterchangedata",this.resetHandler),this.resetHandler=ls(this,"resetStatus"),n.on("afterchangedata",this.resetHandler)},e.getItemRoot=function(t){for(;t&&!t.get("item");)t=t.get("parent");return t},e.prototype.onCanvasEvents=function(t){var n=this,a=this.graph,i=a.get("canvas"),o=t.target,A=t.type;switch(A){case"drag":this.onCanvasEvents(Object.assign({},t,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},t,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"dragend":case"mouseup":setTimeout(function(){return n.mousedown=!1});break;case"click":if(!this.mousedown)return;break}t.canvasX=t.x,t.canvasY=t.y;var s={x:t.canvasX,y:t.canvasY},u=a.get("group"),f=u.getMatrix();if(f||(f=[1,0,0,0,1,0,0,0,1]),uZ(f)&&(s=a.getPointByClient(t.clientX,t.clientY)),t.x=s.x,t.y=s.y,t.currentTarget=a,o===i){(A==="mousemove"||A==="mouseleave")&&this.handleMouseMove(t,"canvas"),t.target=i,t.item=null,a.emit(A,t),a.emit("canvas:".concat(A),t);return}var l=e.getItemRoot(o);if(!l){a.emit(A,t);return}var c=l.get("item");if(!c.destroyed){var h=c.getType();if(t.target=o,t.item=c,t.canvasX===t.x&&t.canvasY===t.y){var d=a.getCanvasByPoint(t.x,t.y);t.canvasX=d.x,t.canvasY=d.y}t.name&&!t.name.includes(":")?(a.emit("".concat(h,":").concat(A),t),a.emit(A,t)):t.name&&a.emit(t.name,t),A==="dragstart"&&(this.dragging=!0),A==="dragend"&&(this.dragging=!1),A==="mousemove"&&this.handleMouseMove(t,h)}},e.prototype.onExtendEvents=function(t){this.graph.emit(t.type,t)},e.prototype.onWheelEvent=function(t){ht(t.wheelDelta)&&(t.wheelDelta=-t.detail),this.graph.emit("wheel",t)},e.prototype.handleMouseMove=function(t,n){var a=this,i=a.graph,o=a.preItem,A=i.get("canvas"),s=t.target===A?null:t.item;t=sZ(t),o&&o!==s&&!o.destroyed&&(t.item=o,this.emitCustomEvent(o.getType(),"mouseleave",t),this.dragging&&this.emitCustomEvent(o.getType(),"dragleave",t)),s&&o!==s&&(t.item=s,this.emitCustomEvent(n,"mouseenter",t),this.dragging&&this.emitCustomEvent(n,"dragenter",t)),this.preItem=s},e.prototype.emitCustomEvent=function(t,n,a){a.type=n,this.graph.emit("".concat(t,":").concat(n),a)},e.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},e.prototype.destroy=function(){var t=this,n=t.graph,a=t.canvasHandler,i=t.extendEvents,o=n.get("canvas");o.off("*",a),ye(i,function(A){A.remove()}),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},e}(CO),Yt={},Lo={},qr={};Object.defineProperty(qr,"__esModule",{value:!0});qr.Base=void 0;var lZ=function(){function r(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return r.prototype.layout=function(e){return this.init(e),this.execute(!0)},r.prototype.init=function(e){this.nodes=e.nodes||[],this.edges=e.edges||[],this.combos=e.combos||[],this.comboEdges=e.comboEdges||[],this.hiddenNodes=e.hiddenNodes||[],this.hiddenEdges=e.hiddenEdges||[],this.hiddenCombos=e.hiddenCombos||[],this.vedges=e.vedges||[]},r.prototype.execute=function(e){},r.prototype.executeWithWorker=function(){},r.prototype.getDefaultCfg=function(){return{}},r.prototype.updateCfg=function(e){e&&Object.assign(this,e)},r.prototype.getType=function(){return"base"},r.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},r}();qr.Base=lZ;var yy={},Ju={};Object.defineProperty(Ju,"__esModule",{value:!0});Ju.camelize=Ju.isString=void 0;var cZ=function(r){return typeof r=="string"};Ju.isString=cZ;var hZ=function(r){var e=Object.create(null);return function(t){var n=e[t];return n||(e[t]=r(t))}},dZ=/-(\w)/g;Ju.camelize=hZ(function(r){return r.replace(dZ,function(e,t){return t?t.toUpperCase():""})});var Ic={};Object.defineProperty(Ic,"__esModule",{value:!0});Ic.isArray=void 0;Ic.isArray=Array.isArray;var Jg={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.toNumber=r.isNaN=r.isNumber=void 0;var e=function(a){return typeof a=="number"};r.isNumber=e;var t=function(a){return Number.isNaN(Number(a))};r.isNaN=t;var n=function(a){var i=parseFloat(a);return(0,r.isNaN)(i)?a:i};r.toNumber=n})(Jg);var ep={},UB={};(function(r){var e=we&&we.__assign||function(){return e=Object.assign||function(a){for(var i,o=1,A=arguments.length;o<A;o++){i=arguments[o];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(a[s]=i[s])}return a},e.apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.clone=r.isObject=void 0;var t=function(a){return a!==null&&typeof a=="object"};r.isObject=t;var n=function(a){if(a===null)return a;if(a instanceof Date)return new Date(a.getTime());if(a instanceof Array){var i=[];return a.forEach(function(A){i.push(A)}),i.map(function(A){return(0,r.clone)(A)})}if(typeof a=="object"&&Object.keys(a).length){var o=e({},a);return Object.keys(o).forEach(function(A){o[A]=(0,r.clone)(o[A])}),o}return a};r.clone=n})(UB);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.getCoreNodeAndRelativeLeafNodes=r.getAvgNodePosition=r.getLayoutBBox=r.traverseTreeUp=r.scaleMatrix=r.getAdjMatrix=r.floydWarshall=r.getDegreeMap=r.getDegree=r.getEdgeTerminal=void 0;var e=Ic,t=Jg,n=UB,a=function(y,m){var w=y[m];return(0,n.isObject)(w)?w.cell:w};r.getEdgeTerminal=a;var i=function(y,m,w){for(var B=[],E=0;E<y;E++)B[E]={in:0,out:0,all:0};return w&&w.forEach(function(b){var C=(0,r.getEdgeTerminal)(b,"source"),_=(0,r.getEdgeTerminal)(b,"target");C&&B[m[C]]&&(B[m[C]].out+=1,B[m[C]].all+=1),_&&B[m[_]]&&(B[m[_]].in+=1,B[m[_]].all+=1)}),B};r.getDegree=i;var o=function(y,m){var w={};return y.forEach(function(B){w[B.id]={in:0,out:0,all:0}}),m&&m.forEach(function(B){var E=(0,r.getEdgeTerminal)(B,"source"),b=(0,r.getEdgeTerminal)(B,"target");E&&(w[E].out+=1,w[E].all+=1),b&&(w[b].in+=1,w[b].all+=1)}),w};r.getDegreeMap=o;var A=function(y){for(var m=[],w=y.length,B=0;B<w;B+=1){m[B]=[];for(var E=0;E<w;E+=1)B===E?m[B][E]=0:y[B][E]===0||!y[B][E]?m[B][E]=1/0:m[B][E]=y[B][E]}for(var b=0;b<w;b+=1)for(var B=0;B<w;B+=1)for(var E=0;E<w;E+=1)m[B][E]>m[B][b]+m[b][E]&&(m[B][E]=m[B][b]+m[b][E]);return m};r.floydWarshall=A;var s=function(y,m){var w=y.nodes,B=y.edges,E=[],b={};if(!w)throw new Error("invalid nodes data!");return w&&w.forEach(function(C,_){b[C.id]=_;var x=[];E.push(x)}),B==null||B.forEach(function(C){var _=(0,r.getEdgeTerminal)(C,"source"),x=(0,r.getEdgeTerminal)(C,"target"),M=b[_],S=b[x];M===void 0||S===void 0||(E[M][S]=1,m||(E[S][M]=1))}),E};r.getAdjMatrix=s;var u=function(y,m){var w=[];return y.forEach(function(B){var E=[];B.forEach(function(b){E.push(b*m)}),w.push(E)}),w};r.scaleMatrix=u;var f=function(y,m){if(y&&y.children){for(var w=y.children.length-1;w>=0;w--)if(!f(y.children[w],m))return}return!!m(y)},l=function(y,m){typeof m=="function"&&f(y,m)};r.traverseTreeUp=l;var c=function(y){var m=1/0,w=1/0,B=-1/0,E=-1/0;return y.forEach(function(b){var C=b.size;(0,e.isArray)(C)?C.length===1&&(C=[C[0],C[0]]):(0,t.isNumber)(C)?C=[C,C]:(C===void 0||isNaN(C))&&(C=[30,30]);var _=[C[0]/2,C[1]/2],x=b.x-_[0],M=b.x+_[0],S=b.y-_[1],I=b.y+_[1];m>x&&(m=x),w>S&&(w=S),B<M&&(B=M),E<I&&(E=I)}),{minX:m,minY:w,maxX:B,maxY:E}};r.getLayoutBBox=c;var h=function(y){var m={x:0,y:0};y.forEach(function(B){m.x+=B.x||0,m.y+=B.y||0});var w=y.length||1;return{x:m.x/w,y:m.y/w}};r.getAvgNodePosition=h;var d=function(y,m,w){var B,E;return y==="source"?((B=w==null?void 0:w.find(function(b){return b.target===m.id}))===null||B===void 0?void 0:B.source)||{}:((E=w==null?void 0:w.find(function(b){return b.source===m.id}))===null||E===void 0?void 0:E.target)||{}},v=function(y,m,w){var B=[];switch(y){case"source":B=w==null?void 0:w.filter(function(b){return b.source===m.id}).map(function(b){return b.target});break;case"target":B=w==null?void 0:w.filter(function(b){return b.target===m.id}).map(function(b){return b.source});break;case"both":B=w==null?void 0:w.filter(function(b){return b.source===m.id}).map(function(b){return b.target}).concat(w==null?void 0:w.filter(function(b){return b.target===m.id}).map(function(b){return b.source}));break}var E=new Set(B);return Array.from(E)},g=function(y,m,w,B,E){var b=w[m]||"",C=(B==null?void 0:B.filter(function(_){return _[m]===b}))||[];return y==="leaf"&&(C=C.filter(function(_){var x,M;return((x=E[_.id])===null||x===void 0?void 0:x.in)===0||((M=E[_.id])===null||M===void 0?void 0:M.out)===0})),C},p=function(y,m,w,B,E,b){var C=E[m.id],_=C.in,x=C.out,M=m,S=[];_===0?(M=d("source",m,w),S=v("both",M,w).map(function(D){return b[D]})):x===0&&(M=d("target",m,w),S=v("both",M,w).map(function(D){return b[D]})),S=S.filter(function(D){return E[D.id]&&(E[D.id].in===0||E[D.id].out===0)});var I=g(y,B,m,S,E);return{coreNode:M,relativeLeafNodes:S,sameTypeLeafNodes:I}};r.getCoreNodeAndRelativeLeafNodes=p})(ep);var my={},y2;function vZ(){return y2||(y2=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.getFuncByUnknownType=r.getFunc=r.isFunction=void 0;var e=zr(),t=Jg,n=function(o){return typeof o=="function"};r.isFunction=n;var a=function(o,A,s){var u;return s?u=s:(0,t.isNumber)(o)?u=function(){return o}:u=function(){return A},u};r.getFunc=a;var i=function(o,A,s){return s===void 0&&(s=!0),!A&&A!==0?function(u){return u.size?(0,e.isArray)(u.size)?u.size[0]>u.size[1]?u.size[0]:u.size[1]:(0,e.isObject)(u.size)?u.size.width>u.size.height?u.size.width:u.size.height:u.size:o}:(0,r.isFunction)(A)?A:(0,t.isNumber)(A)?function(){return A}:(0,e.isArray)(A)?function(){if(s){var u=Math.max.apply(Math,A);return isNaN(u)?o:u}return A}:(0,e.isObject)(A)?function(){if(s){var u=Math.max(A.width,A.height);return isNaN(u)?o:u}return[A.width,A.height]}:function(){return o}};r.getFuncByUnknownType=i}(my)),my}var m2;function zr(){return m2||(m2=1,function(r){var e=we&&we.__createBinding||(Object.create?function(n,a,i,o){o===void 0&&(o=i);var A=Object.getOwnPropertyDescriptor(a,i);(!A||("get"in A?!a.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return a[i]}}),Object.defineProperty(n,o,A)}:function(n,a,i,o){o===void 0&&(o=i),n[o]=a[i]}),t=we&&we.__exportStar||function(n,a){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(a,i)&&e(a,n,i)};Object.defineProperty(r,"__esModule",{value:!0}),t(Ju,r),t(Ic,r),t(Jg,r),t(ep,r),t(UB,r),t(vZ(),r)}(yy)),yy}var gZ=we&&we.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Lo,"__esModule",{value:!0});Lo.getLayoutByName=Lo.unRegisterLayout=Lo.registerLayout=void 0;var pZ=qr,yZ=zr(),lA=new Map,mZ=function(r,e){if(lA.get(r)&&console.warn("The layout with the name ".concat(r," exists already, it will be overridden")),(0,yZ.isObject)(e)){var t=function(n){gZ(a,n);function a(i){var o=this,A;o=n.call(this)||this;var s=o,u={},f=Object.assign({},s.getDefaultCfg(),((A=e.getDefaultCfg)===null||A===void 0?void 0:A.call(e))||{});return Object.assign(u,f,e,i),Object.keys(u).forEach(function(l){var c=u[l];s[l]=c}),o}return a}(pZ.Base);lA.set(r,t)}else lA.set(r,e);return lA.get(r)};Lo.registerLayout=mZ;var wZ=function(r){lA.has(r)&&lA.delete(r)};Lo.unRegisterLayout=wZ;var BZ=function(r){return lA.has(r)?lA.get(r):null};Lo.getLayoutByName=BZ;var wy={},Tc={},EZ=we&&we.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Tc,"__esModule",{value:!0});Tc.GridLayout=void 0;var ou=zr(),bZ=qr,xZ=function(r){EZ(e,r);function e(t){var n=r.call(this)||this;return n.begin=[0,0],n.preventOverlap=!0,n.preventOverlapPadding=10,n.condense=!1,n.sortBy="degree",n.nodes=[],n.edges=[],n.width=300,n.height=300,n.row=0,n.col=0,n.cellWidth=0,n.cellHeight=0,n.cellUsed={},n.id2manPos={},n.onLayoutEnd=function(){},n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},e.prototype.execute=function(){var t=this,n=t.nodes,a=t.edges,i=t.begin,o=n.length;if(o===0)return t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:a};if(o===1)return n[0].x=i[0],n[0].y=i[1],t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:a};var A=t.sortBy,s=t.width,u=t.height,f=t.condense,l=t.preventOverlapPadding,c=t.preventOverlap,h=t.nodeSpacing,d=t.nodeSize,v=[];n.forEach(function(S){v.push(S)});var g={};if(v.forEach(function(S,I){g[S.id]=I}),(A==="degree"||!(0,ou.isString)(A)||v[0][A]===void 0)&&(A="degree",(0,ou.isNaN)(n[0].degree))){var p=(0,ou.getDegree)(v.length,g,a);v.forEach(function(S,I){S.degree=p[I].all})}v.sort(function(S,I){return I[A]-S[A]}),!s&&typeof window<"u"&&(s=window.innerWidth),!u&&typeof window<"u"&&(u=window.innerHeight);var y=t.rows,m=t.cols!=null?t.cols:t.columns;if(t.cells=o,y!=null&&m!=null?(t.rows=y,t.cols=m):y!=null&&m==null?(t.rows=y,t.cols=Math.ceil(t.cells/t.rows)):y==null&&m!=null?(t.cols=m,t.rows=Math.ceil(t.cells/t.cols)):(t.splits=Math.sqrt(t.cells*t.height/t.width),t.rows=Math.round(t.splits),t.cols=Math.round(t.width/t.height*t.splits)),t.rows=Math.max(t.rows,1),t.cols=Math.max(t.cols,1),t.cols*t.rows>t.cells){var w=t.small(),B=t.large();(w-1)*B>=t.cells?t.small(w-1):(B-1)*w>=t.cells&&t.large(B-1)}else for(;t.cols*t.rows<t.cells;){var w=t.small(),B=t.large();(B+1)*w>=t.cells?t.large(B+1):t.small(w+1)}if(t.cellWidth=s/t.cols,t.cellHeight=u/t.rows,f&&(t.cellWidth=0,t.cellHeight=0),c||h){var E=(0,ou.getFuncByUnknownType)(10,h),b=(0,ou.getFuncByUnknownType)(30,d,!1);v.forEach(function(S){(!S.x||!S.y)&&(S.x=0,S.y=0);var I=b(S)||30,D,O;(0,ou.isArray)(I)?(D=I[0],O=I[1]):(D=I,O=I);var F=E!==void 0?E(S):l,U=D+F,Q=O+F;t.cellWidth=Math.max(t.cellWidth,U),t.cellHeight=Math.max(t.cellHeight,Q)})}t.cellUsed={},t.row=0,t.col=0,t.id2manPos={};for(var C=0;C<v.length;C++){var _=v[C],x=void 0;if(t.position&&(x=t.position(_)),x&&(x.row!==void 0||x.col!==void 0)){var M={row:x.row,col:x.col};if(M.col===void 0)for(M.col=0;t.used(M.row,M.col);)M.col++;else if(M.row===void 0)for(M.row=0;t.used(M.row,M.col);)M.row++;t.id2manPos[_.id]=M,t.use(M.row,M.col)}t.getPos(_)}return t.onLayoutEnd&&t.onLayoutEnd(),{edges:a,nodes:v}},e.prototype.small=function(t){var n=this,a,i=n.rows||5,o=n.cols||5;if(t==null)a=Math.min(i,o);else{var A=Math.min(i,o);A===n.rows?n.rows=t:n.cols=t}return a},e.prototype.large=function(t){var n=this,a,i=n.rows||5,o=n.cols||5;if(t==null)a=Math.max(i,o);else{var A=Math.max(i,o);A===n.rows?n.rows=t:n.cols=t}return a},e.prototype.used=function(t,n){var a=this;return a.cellUsed["c-".concat(t,"-").concat(n)]||!1},e.prototype.use=function(t,n){var a=this;a.cellUsed["c-".concat(t,"-").concat(n)]=!0},e.prototype.moveToNextCell=function(){var t=this,n=t.cols||5;t.col++,t.col>=n&&(t.col=0,t.row++)},e.prototype.getPos=function(t){var n=this,a=n.begin,i=n.cellWidth,o=n.cellHeight,A,s,u=n.id2manPos[t.id];if(u)A=u.col*i+i/2+a[0],s=u.row*o+o/2+a[1];else{for(;n.used(n.row,n.col);)n.moveToNextCell();A=n.col*i+i/2+a[0],s=n.row*o+o/2+a[1],n.use(n.row,n.col),n.moveToNextCell()}t.x=A,t.y=s},e.prototype.getType=function(){return"grid"},e}(bZ.Base);Tc.GridLayout=xZ;var Fc={},CZ=we&&we.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Fc,"__esModule",{value:!0});Fc.RandomLayout=void 0;var _Z=qr,SZ=function(r){CZ(e,r);function e(t){var n=r.call(this)||this;return n.center=[0,0],n.width=300,n.height=300,n.nodes=[],n.edges=[],n.onLayoutEnd=function(){},n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},e.prototype.execute=function(){var t=this,n=t.nodes,a=.9,i=t.center;return!t.width&&typeof window<"u"&&(t.width=window.innerWidth),!t.height&&typeof window<"u"&&(t.height=window.innerHeight),n&&n.forEach(function(o){o.x=(Math.random()-.5)*a*t.width+i[0],o.y=(Math.random()-.5)*a*t.height+i[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:this.edges}},e.prototype.getType=function(){return"random"},e}(_Z.Base);Fc.RandomLayout=SZ;var Lc={},MZ=we&&we.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Lc,"__esModule",{value:!0});Lc.GForceLayout=void 0;var IZ=qr,Gn=zr(),By=function(r,e){var t;return r?(0,Gn.isNumber)(r)?t=function(n){return r}:t=r:t=function(n){return e||1},t},TZ=function(r){MZ(e,r);function e(t){var n=r.call(this)||this;return n.maxIteration=500,n.workerEnabled=!1,n.edgeStrength=200,n.nodeStrength=1e3,n.coulombDisScale=.005,n.damping=.9,n.maxSpeed=1e3,n.minMovement=.5,n.interval=.02,n.factor=1,n.linkDistance=1,n.gravity=10,n.preventOverlap=!0,n.collideStrength=1,n.tick=function(){},n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.animate=!0,n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},e.prototype.execute=function(){var t,n,a=this,i=a.nodes;if(a.timeInterval!==void 0&&typeof window<"u"&&window.clearInterval(a.timeInterval),!i||i.length===0){(t=a.onLayoutEnd)===null||t===void 0||t.call(a);return}!a.width&&typeof window<"u"&&(a.width=window.innerWidth),!a.height&&typeof window<"u"&&(a.height=window.innerHeight),a.center||(a.center=[a.width/2,a.height/2]);var o=a.center;if(i.length===1){i[0].x=o[0],i[0].y=o[1],(n=a.onLayoutEnd)===null||n===void 0||n.call(a);return}var A={},s={};i.forEach(function(d,v){(0,Gn.isNumber)(d.x)||(d.x=Math.random()*a.width),(0,Gn.isNumber)(d.y)||(d.y=Math.random()*a.height),A[d.id]=d,s[d.id]=v}),a.nodeMap=A,a.nodeIdxMap=s,a.linkDistance=By(a.linkDistance,1),a.nodeStrength=By(a.nodeStrength,1),a.edgeStrength=By(a.edgeStrength,1);var u=a.nodeSize,f;if(a.preventOverlap){var l=a.nodeSpacing,c;(0,Gn.isNumber)(l)?c=function(){return l}:(0,Gn.isFunction)(l)?c=l:c=function(){return 0},u?(0,Gn.isArray)(u)?f=function(d){return Math.max(u[0],u[1])+c(d)}:f=function(d){return u+c(d)}:f=function(d){return d.size?(0,Gn.isArray)(d.size)?Math.max(d.size[0],d.size[1])+c(d):(0,Gn.isObject)(d.size)?Math.max(d.size.width,d.size.height)+c(d):d.size+c(d):10+c(d)}}a.nodeSize=f;var h=a.edges;a.degrees=(0,Gn.getDegree)(i.length,a.nodeIdxMap,h),a.getMass||(a.getMass=function(d){var v=d.mass||a.degrees[a.nodeIdxMap[d.id]].all||1;return v}),a.run()},e.prototype.run=function(){var t,n=this,a=n.maxIteration,i=n.nodes,o=n.workerEnabled,A=n.minMovement,s=n.animate;if(i)if(o||!s){for(var u=0;u<a;u++){var f=n.runOneStep(u);if(n.reachMoveThreshold(i,f,A))break}(t=n.onLayoutEnd)===null||t===void 0||t.call(n)}else{if(typeof window>"u")return;var l=0;this.timeInterval=window.setInterval(function(){var c,h;if(i){var d=n.runOneStep(l)||[];n.reachMoveThreshold(i,d,A)&&((c=n.onLayoutEnd)===null||c===void 0||c.call(n),window.clearInterval(n.timeInterval)),l++,l>=a&&((h=n.onLayoutEnd)===null||h===void 0||h.call(n),window.clearInterval(n.timeInterval))}},0)}},e.prototype.reachMoveThreshold=function(t,n,a){var i=0;return t.forEach(function(o,A){var s=o.x-n[A].x,u=o.y-n[A].y;i+=Math.sqrt(s*s+u*u)}),i/=t.length,i<a},e.prototype.runOneStep=function(t){var n,a=this,i=a.nodes,o=a.edges,A=[],s=[];if(i){i.forEach(function(l,c){A[2*c]=0,A[2*c+1]=0,s[2*c]=0,s[2*c+1]=0}),a.calRepulsive(A,i),o&&a.calAttractive(A,o),a.calGravity(A,i);var u=Math.max(.02,a.interval-t*.002);a.updateVelocity(A,s,u,i);var f=[];return i.forEach(function(l){f.push({x:l.x,y:l.y})}),a.updatePosition(s,u,i),(n=a.tick)===null||n===void 0||n.call(a),f}},e.prototype.calRepulsive=function(t,n){var a=this,i=a.getMass,o=a.factor,A=a.coulombDisScale,s=a.preventOverlap,u=a.collideStrength,f=u===void 0?1:u,l=a.nodeStrength,c=a.nodeSize;n.forEach(function(h,d){var v=i?i(h):1;n.forEach(function(g,p){if(!(d>=p)){var y=h.x-g.x,m=h.y-g.y;y===0&&m===0&&(y=Math.random()*.01,m=Math.random()*.01);var w=y*y+m*m,B=Math.sqrt(w),E=(B+.1)*A,b=y/B,C=m/B,_=(l(h)+l(g))*.5*o/(E*E),x=i?i(g):1;if(t[2*d]+=b*_,t[2*d+1]+=C*_,t[2*p]-=b*_,t[2*p+1]-=C*_,s&&(c(h)+c(g))/2>B){var M=f*(l(h)+l(g))*.5/w;t[2*d]+=b*M/v,t[2*d+1]+=C*M/v,t[2*p]-=b*M/x,t[2*p+1]-=C*M/x}}})})},e.prototype.calAttractive=function(t,n){var a=this,i=a.nodeMap,o=a.nodeIdxMap,A=a.linkDistance,s=a.edgeStrength,u=a.nodeSize,f=a.getMass;n.forEach(function(l,c){var h=(0,Gn.getEdgeTerminal)(l,"source"),d=(0,Gn.getEdgeTerminal)(l,"target"),v=i[h],g=i[d],p=g.x-v.x,y=g.y-v.y;p===0&&y===0&&(p=Math.random()*.01,y=Math.random()*.01);var m=Math.sqrt(p*p+y*y),w=p/m,B=y/m,E=A(l,v,g)||1+(u(v)+u(g)||0)/2,b=E-m,C=b*s(l),_=o[h],x=o[d],M=f?f(v):1,S=f?f(g):1;t[2*_]-=w*C/M,t[2*_+1]-=B*C/M,t[2*x]+=w*C/S,t[2*x+1]+=B*C/S})},e.prototype.calGravity=function(t,n){for(var a=this,i=a.center,o=a.gravity,A=a.degrees,s=n.length,u=0;u<s;u++){var f=n[u],l=f.x-i[0],c=f.y-i[1],h=o;if(a.getCenter){var d=a.getCenter(f,A[u].all);d&&(0,Gn.isNumber)(d[0])&&(0,Gn.isNumber)(d[1])&&(0,Gn.isNumber)(d[2])&&(l=f.x-d[0],c=f.y-d[1],h=d[2])}h&&(t[2*u]-=h*l,t[2*u+1]-=h*c)}},e.prototype.updateVelocity=function(t,n,a,i){var o=this,A=a*o.damping;i.forEach(function(s,u){var f=t[2*u]*A||.01,l=t[2*u+1]*A||.01,c=Math.sqrt(f*f+l*l);if(c>o.maxSpeed){var h=o.maxSpeed/c;f=h*f,l=h*l}n[2*u]=f,n[2*u+1]=l})},e.prototype.updatePosition=function(t,n,a){a.forEach(function(i,o){if((0,Gn.isNumber)(i.fx)&&(0,Gn.isNumber)(i.fy)){i.x=i.fx,i.y=i.fy;return}var A=t[2*o]*n,s=t[2*o+1]*n;i.x+=A,i.y+=s})},e.prototype.stop=function(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval)},e.prototype.destroy=function(){var t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0},e.prototype.getType=function(){return"gForce"},e}(IZ.Base);Lc.GForceLayout=TZ;var Dc={},tp={};function FZ(r){const e=+this._x.call(null,r),t=+this._y.call(null,r);return FU(this.cover(e,t),e,t,r)}function FU(r,e,t,n){if(isNaN(e)||isNaN(t))return r;var a,i=r._root,o={data:n},A=r._x0,s=r._y0,u=r._x1,f=r._y1,l,c,h,d,v,g,p,y;if(!i)return r._root=o,r;for(;i.length;)if((v=e>=(l=(A+u)/2))?A=l:u=l,(g=t>=(c=(s+f)/2))?s=c:f=c,a=i,!(i=i[p=g<<1|v]))return a[p]=o,r;if(h=+r._x.call(null,i.data),d=+r._y.call(null,i.data),e===h&&t===d)return o.next=i,a?a[p]=o:r._root=o,r;do a=a?a[p]=new Array(4):r._root=new Array(4),(v=e>=(l=(A+u)/2))?A=l:u=l,(g=t>=(c=(s+f)/2))?s=c:f=c;while((p=g<<1|v)===(y=(d>=c)<<1|h>=l));return a[y]=i,a[p]=o,r}function LZ(r){var e,t,n=r.length,a,i,o=new Array(n),A=new Array(n),s=1/0,u=1/0,f=-1/0,l=-1/0;for(t=0;t<n;++t)isNaN(a=+this._x.call(null,e=r[t]))||isNaN(i=+this._y.call(null,e))||(o[t]=a,A[t]=i,a<s&&(s=a),a>f&&(f=a),i<u&&(u=i),i>l&&(l=i));if(s>f||u>l)return this;for(this.cover(s,u).cover(f,l),t=0;t<n;++t)FU(this,o[t],A[t],r[t]);return this}function DZ(r,e){if(isNaN(r=+r)||isNaN(e=+e))return this;var t=this._x0,n=this._y0,a=this._x1,i=this._y1;if(isNaN(t))a=(t=Math.floor(r))+1,i=(n=Math.floor(e))+1;else{for(var o=a-t||1,A=this._root,s,u;t>r||r>=a||n>e||e>=i;)switch(u=(e<n)<<1|r<t,s=new Array(4),s[u]=A,A=s,o*=2,u){case 0:a=t+o,i=n+o;break;case 1:t=a-o,i=n+o;break;case 2:a=t+o,n=i-o;break;case 3:t=a-o,n=i-o;break}this._root&&this._root.length&&(this._root=A)}return this._x0=t,this._y0=n,this._x1=a,this._y1=i,this}function OZ(){var r=[];return this.visit(function(e){if(!e.length)do r.push(e.data);while(e=e.next)}),r}function UZ(r){return arguments.length?this.cover(+r[0][0],+r[0][1]).cover(+r[1][0],+r[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Jn(r,e,t,n,a){this.node=r,this.x0=e,this.y0=t,this.x1=n,this.y1=a}function NZ(r,e,t){var n,a=this._x0,i=this._y0,o,A,s,u,f=this._x1,l=this._y1,c=[],h=this._root,d,v;for(h&&c.push(new Jn(h,a,i,f,l)),t==null?t=1/0:(a=r-t,i=e-t,f=r+t,l=e+t,t*=t);d=c.pop();)if(!(!(h=d.node)||(o=d.x0)>f||(A=d.y0)>l||(s=d.x1)<a||(u=d.y1)<i))if(h.length){var g=(o+s)/2,p=(A+u)/2;c.push(new Jn(h[3],g,p,s,u),new Jn(h[2],o,p,g,u),new Jn(h[1],g,A,s,p),new Jn(h[0],o,A,g,p)),(v=(e>=p)<<1|r>=g)&&(d=c[c.length-1],c[c.length-1]=c[c.length-1-v],c[c.length-1-v]=d)}else{var y=r-+this._x.call(null,h.data),m=e-+this._y.call(null,h.data),w=y*y+m*m;if(w<t){var B=Math.sqrt(t=w);a=r-B,i=e-B,f=r+B,l=e+B,n=h.data}}return n}function kZ(r){if(isNaN(f=+this._x.call(null,r))||isNaN(l=+this._y.call(null,r)))return this;var e,t=this._root,n,a,i,o=this._x0,A=this._y0,s=this._x1,u=this._y1,f,l,c,h,d,v,g,p;if(!t)return this;if(t.length)for(;;){if((d=f>=(c=(o+s)/2))?o=c:s=c,(v=l>=(h=(A+u)/2))?A=h:u=h,e=t,!(t=t[g=v<<1|d]))return this;if(!t.length)break;(e[g+1&3]||e[g+2&3]||e[g+3&3])&&(n=e,p=g)}for(;t.data!==r;)if(a=t,!(t=t.next))return this;return(i=t.next)&&delete t.next,a?(i?a.next=i:delete a.next,this):e?(i?e[g]=i:delete e[g],(t=e[0]||e[1]||e[2]||e[3])&&t===(e[3]||e[2]||e[1]||e[0])&&!t.length&&(n?n[p]=t:this._root=t),this):(this._root=i,this)}function PZ(r){for(var e=0,t=r.length;e<t;++e)this.remove(r[e]);return this}function QZ(){return this._root}function RZ(){var r=0;return this.visit(function(e){if(!e.length)do++r;while(e=e.next)}),r}function HZ(r){var e=[],t,n=this._root,a,i,o,A,s;for(n&&e.push(new Jn(n,this._x0,this._y0,this._x1,this._y1));t=e.pop();)if(!r(n=t.node,i=t.x0,o=t.y0,A=t.x1,s=t.y1)&&n.length){var u=(i+A)/2,f=(o+s)/2;(a=n[3])&&e.push(new Jn(a,u,f,A,s)),(a=n[2])&&e.push(new Jn(a,i,f,u,s)),(a=n[1])&&e.push(new Jn(a,u,o,A,f)),(a=n[0])&&e.push(new Jn(a,i,o,u,f))}return this}function GZ(r){var e=[],t=[],n;for(this._root&&e.push(new Jn(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var a=n.node;if(a.length){var i,o=n.x0,A=n.y0,s=n.x1,u=n.y1,f=(o+s)/2,l=(A+u)/2;(i=a[0])&&e.push(new Jn(i,o,A,f,l)),(i=a[1])&&e.push(new Jn(i,f,A,s,l)),(i=a[2])&&e.push(new Jn(i,o,l,f,u)),(i=a[3])&&e.push(new Jn(i,f,l,s,u))}t.push(n)}for(;n=t.pop();)r(n.node,n.x0,n.y0,n.x1,n.y1);return this}function zZ(r){return r[0]}function KZ(r){return arguments.length?(this._x=r,this):this._x}function jZ(r){return r[1]}function $Z(r){return arguments.length?(this._y=r,this):this._y}function rp(r,e,t){var n=new NB(e??zZ,t??jZ,NaN,NaN,NaN,NaN);return r==null?n:n.addAll(r)}function NB(r,e,t,n,a,i){this._x=r,this._y=e,this._x0=t,this._y0=n,this._x1=a,this._y1=i,this._root=void 0}function w2(r){for(var e={data:r.data},t=e;r=r.next;)t=t.next={data:r.data};return e}var ea=rp.prototype=NB.prototype;ea.copy=function(){var r=new NB(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,t,n;if(!e)return r;if(!e.length)return r._root=w2(e),r;for(t=[{source:e,target:r._root=new Array(4)}];e=t.pop();)for(var a=0;a<4;++a)(n=e.source[a])&&(n.length?t.push({source:n,target:e.target[a]=new Array(4)}):e.target[a]=w2(n));return r};ea.add=FZ;ea.addAll=LZ;ea.cover=DZ;ea.data=OZ;ea.extent=UZ;ea.find=NZ;ea.remove=kZ;ea.removeAll=PZ;ea.root=QZ;ea.size=RZ;ea.visit=HZ;ea.visitAfter=GZ;ea.x=KZ;ea.y=$Z;const WZ=Object.freeze(Object.defineProperty({__proto__:null,quadtree:rp},Symbol.toStringTag,{value:"Module"})),VZ=Zi(WZ);Object.defineProperty(tp,"__esModule",{value:!0});tp.forceNBody=void 0;var XZ=VZ,YZ=.81,B2=.1;function ZZ(r,e,t,n,a){var i=t/n,o=r.map(function(s,u){var f=e[s.id],l=f.data,c=f.x,h=f.y,d=f.size,v=l.layout.force.nodeStrength;return{x:c,y:h,size:d,index:u,vx:0,vy:0,weight:i*v}}),A=(0,XZ.quadtree)(o,function(s){return s.x},function(s){return s.y}).visitAfter(qZ);return o.forEach(function(s){eq(s,A)}),o.map(function(s,u){var f=e[r[u].id],l=f.data.layout.force.mass,c=l===void 0?1:l;a[2*u]=s.vx/c,a[2*u+1]=s.vy/c}),a}tp.forceNBody=ZZ;function qZ(r){var e=0,t=0,n=0;if(r.length){for(var a=0;a<4;a++){var i=r[a];i&&i.weight&&(e+=i.weight,t+=i.x*i.weight,n+=i.y*i.weight)}r.x=t/e,r.y=n/e,r.weight=e}else{var i=r;r.x=i.data.x,r.y=i.data.y,r.weight=i.data.weight}}var JZ=function(r,e,t,n,a,i){var o=i.x-r.x||B2,A=i.y-r.y||B2,s=n-e,u=o*o+A*A,f=Math.sqrt(u)*u;if(s*s*YZ<u){var l=r.weight/f;return i.vx+=o*l,i.vy+=A*l,!0}if(r.length)return!1;if(r.data!==i){var l=r.data.weight/f;i.vx+=o*l,i.vy+=A*l}};function eq(r,e){e.visit(function(t,n,a,i,o){return JZ(t,n,a,i,o,r)})}var tq=we&&we.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ai=we&&we.__assign||function(){return ai=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},ai.apply(this,arguments)};Object.defineProperty(Dc,"__esModule",{value:!0});Dc.Force2Layout=void 0;var rq=qr,pn=zr(),nq=tp,Ey=function(r,e){var t;return r?(0,pn.isNumber)(r)?t=function(n){return r}:t=r:t=function(n){return e||1},t},aq=function(r){tq(e,r);function e(t){var n=r.call(this)||this;n.maxIteration=1e3,n.workerEnabled=!1,n.edgeStrength=200,n.nodeStrength=1e3,n.coulombDisScale=.005,n.damping=.9,n.maxSpeed=500,n.minMovement=.4,n.interval=.02,n.factor=1,n.linkDistance=200,n.gravity=0,n.clusterNodeStrength=20,n.preventOverlap=!0,n.distanceThresholdMode="mean",n.tick=function(){},n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.judgingDistance=0,n.centripetalOptions={leaf:2,single:2,others:1,center:function(i){return{x:n.width/2,y:n.height/2}}};var a=t.getMass;return n.propsGetMass=a,n.updateCfg(t),n}return e.prototype.getCentripetalOptions=function(){var t=this,n=t.leafCluster,a=t.clustering,i=t.nodeClusterBy,o=t.nodes,A=t.nodeMap,s=t.clusterNodeStrength,u=function(m){return typeof s=="function"?s(m):s},f={},l;if(n){l=this.getSameTypeLeafMap()||{};var c=Array.from(new Set(o==null?void 0:o.map(function(m){return m[i]})))||[];f={single:100,leaf:function(m,w,B){var E=l[m.id]||{},b=E.relativeLeafNodes,C=E.sameTypeLeafNodes;return(C==null?void 0:C.length)===(b==null?void 0:b.length)||(c==null?void 0:c.length)===1?1:u(m)},others:1,center:function(m,w,B){var E,b=(((E=m.data)===null||E===void 0?void 0:E.layout)||{}).degree;if(!b)return{x:100,y:100};var C;if(b===1){var _=(l[m.id]||{}).sameTypeLeafNodes,x=_===void 0?[]:_;x.length===1?C=void 0:x.length>1&&(C=(0,pn.getAvgNodePosition)(x))}else C=void 0;return{x:C==null?void 0:C.x,y:C==null?void 0:C.y}}}}if(a){l||(l=this.getSameTypeLeafMap());var h=Array.from(new Set(o.map(function(m,w){return m[i]}))).filter(function(m){return m!==void 0}),d={};h.forEach(function(m){var w=o.filter(function(B){return B[i]===m}).map(function(B){return A[B.id]});d[m]=(0,pn.getAvgNodePosition)(w)}),f={single:function(m){return u(m)},leaf:function(m){return u(m)},others:function(m){return u(m)},center:function(m,w,B){var E=d[m[i]];return{x:E==null?void 0:E.x,y:E==null?void 0:E.y}}}}this.centripetalOptions=ai(ai({},this.centripetalOptions),f);var v=this.centripetalOptions,g=v.leaf,p=v.single,y=v.others;g&&typeof g!="function"&&(this.centripetalOptions.leaf=function(){return g}),p&&typeof p!="function"&&(this.centripetalOptions.single=function(){return p}),y&&typeof y!="function"&&(this.centripetalOptions.others=function(){return y})},e.prototype.updateCfg=function(t){t&&Object.assign(this,t)},e.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},e.prototype.execute=function(){var t=this;t.stop();var n=t.nodes,a=t.edges,i=t.defSpringLen;if(t.judgingDistance=0,!n||n.length===0){t.onLayoutEnd([]);return}!t.width&&typeof window<"u"&&(t.width=window.innerWidth),!t.height&&typeof window<"u"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var o=t.center;if(n.length===1){n[0].x=o[0],n[0].y=o[1],t.onLayoutEnd([ai({},n[0])]);return}t.degreesMap=(0,pn.getDegreeMap)(n,a),t.propsGetMass?t.getMass=t.propsGetMass:t.getMass=function(h){var d=1;(0,pn.isNumber)(h.mass)&&(d=h.mass);var v=t.degreesMap[h.id].all;return!v||v<5?d:v*5*d};var A=t.nodeSize,s;if(t.preventOverlap){var u=t.nodeSpacing,f;(0,pn.isNumber)(u)?f=function(){return u}:(0,pn.isFunction)(u)?f=u:f=function(){return 0},A?(0,pn.isArray)(A)?s=function(h){return Math.max(A[0],A[1])+f(h)}:s=function(h){return A+f(h)}:s=function(h){return h.size?(0,pn.isArray)(h.size)?Math.max(h.size[0],h.size[1])+f(h):(0,pn.isObject)(h.size)?Math.max(h.size.width,h.size.height)+f(h):h.size+f(h):10+f(h)}}t.nodeSize=s,t.linkDistance=Ey(t.linkDistance,1),t.nodeStrength=Ey(t.nodeStrength,1),t.edgeStrength=Ey(t.edgeStrength,1);var l={},c={};n.forEach(function(h,d){(0,pn.isNumber)(h.x)||(h.x=Math.random()*t.width),(0,pn.isNumber)(h.y)||(h.y=Math.random()*t.height);var v=t.degreesMap[h.id];l[h.id]=ai(ai({},h),{data:ai(ai({},h.data),{size:t.nodeSize(h)||30,layout:{inDegree:v.in,outDegree:v.out,degree:v.all,tDegree:v.in,sDegree:v.out,force:{mass:t.getMass(h),nodeStrength:t.nodeStrength(h,a)}}})}),c[h.id]=d}),t.nodeMap=l,t.nodeIdxMap=c,t.edgeInfos=[],a==null||a.forEach(function(h){var d=l[h.source],v=l[h.target];!d||!v?elf.edgeInfos.push({}):t.edgeInfos.push({edgeStrength:t.edgeStrength(h),linkDistance:i?i(ai(ai({},h),{source:d,target:v}),d,v):t.linkDistance(h,d,v)||1+(A(d)+A(d)||0)/2})}),this.getCentripetalOptions(),t.onLayoutEnd=t.onLayoutEnd||function(){},t.run()},e.prototype.run=function(){var t=this,n=t.maxIteration,a=t.nodes,i=t.edges,o=t.workerEnabled,A=t.minMovement,s=t.animate,u=t.nodeMap,f=t.height;if(t.currentMinY=0,t.currentMaxY=f,!!a){var l=[];if(a.forEach(function(p,y){l[2*y]=0,l[2*y+1]=0}),this.defSideCoe&&typeof this.defSideCoe=="function"){var c={};i.forEach(function(p){var y=p.source,m=p.target;c[y]=c[y]||[],c[y].push(p),c[m]=c[m]||[],c[m].push(p)}),this.relatedEdges=c}var h=n,d=!s;if(o||d){for(var v=0;(t.judgingDistance>A||v<1)&&v<h;v++)t.runOneStep(v,l);t.onLayoutEnd(Object.values(u))}else{if(typeof window>"u")return;var g=0;this.timeInterval=window.setInterval(function(){a&&(t.runOneStep(g,l),g++,(g>=h||t.judgingDistance<A)&&(t.onLayoutEnd(Object.values(u)),window.clearInterval(t.timeInterval)))},0)}}},e.prototype.runOneStep=function(t,n){var a,i=this,o=i.nodes,A=i.edges;i.nodeMap;var s=i.monitor,u=[];if(o!=null&&o.length){i.calRepulsive(u),A&&i.calAttractive(u),i.calGravity(u),i.attractToSide(u);var f=i.interval;if(i.updateVelocity(u,n,f),i.updatePosition(n,f),(a=i.tick)===null||a===void 0||a.call(i),s){var l=this.calTotalEnergy(u);s({energy:l,nodes:o,edges:A,iterations:t})}}},e.prototype.calTotalEnergy=function(t){var n=this,a=n.nodes,i=n.nodeMap;if(!(a!=null&&a.length))return 0;var o=0;return a.forEach(function(A,s){var u=t[2*s],f=t[2*s+1],l=u*u+f*f,c=i[A.id].data.layout.force.mass,h=c===void 0?1:c;o+=h*l*.5}),o},e.prototype.calRepulsive=function(t){var n=this,a=n.nodes,i=n.nodeMap,o=n.factor,A=n.coulombDisScale;n.nodeSize,(0,nq.forceNBody)(a,i,o,A*A,t)},e.prototype.calAttractive=function(t){var n=this,a=n.edges,i=n.nodeMap,o=n.nodeIdxMap,A=n.edgeInfos;n.nodeSize,a.forEach(function(s,u){var f=(0,pn.getEdgeTerminal)(s,"source"),l=(0,pn.getEdgeTerminal)(s,"target"),c=i[f],h=i[l];if(!(!c||!h)){var d=h.x-c.x,v=h.y-c.y;!d&&!v&&(d=Math.random()*.01,v=Math.random()*.01);var g=Math.sqrt(d*d+v*v),p=d/g,y=v/g,m=A[u]||{},w=m.linkDistance,B=w===void 0?200:w,E=m.edgeStrength,b=E===void 0?200:E,C=B-g,_=C*b,x=c.data.layout.force.mass||1,M=h.data.layout.force.mass||1,S=1/x,I=1/M,D=p*_,O=y*_,F=2*o[f],U=2*o[l];t[F]-=D*S,t[F+1]-=O*S,t[U]+=D*I,t[U+1]+=O*I}})},e.prototype.calGravity=function(t){var n,a=this,i=a.nodes,o=a.edges,A=o===void 0?[]:o,s=a.nodeMap,u=a.width,f=a.height,l=a.center,c=a.gravity,h=a.degreesMap,d=a.centripetalOptions;if(i)for(var v=i.length,g=0;g<v;g++){var p=2*g,y=s[i[g].id],m=y.data.layout.force.mass,w=m===void 0?1:m,B=0,E=0,b=c,C=h[y.id],_=C.in,x=C.out,M=C.all,S=(n=a.getCenter)===null||n===void 0?void 0:n.call(a,y,M);if(S){var I=S[0],D=S[1],O=S[2];B=y.x-I,E=y.y-D,b=O}else B=y.x-l[0],E=y.y-l[1];if(b&&(t[p]-=b*B/w,t[p+1]-=b*E/w),d){var F=d.leaf,U=d.single,Q=d.others,N=d.center,R=(N==null?void 0:N(y,i,A,u,f))||{x:0,y:0,centerStrength:0},J=R.x,re=R.y,ee=R.centerStrength;if(!(0,pn.isNumber)(J)||!(0,pn.isNumber)(re))continue;var q=(y.x-J)/w,ve=(y.y-re)/w;if(ee&&(t[p]-=ee*q,t[p+1]-=ee*ve),M===0){var Me=U(y);if(!Me)continue;t[p]-=Me*q,t[p+1]-=Me*ve;continue}if(_===0||x===0){var Re=F(y,i,A);if(!Re)continue;t[p]-=Re*q,t[p+1]-=Re*ve;continue}var tt=Q(y);if(!tt)continue;t[p]-=tt*q,t[p+1]-=tt*ve}}},e.prototype.attractToSide=function(t){var n=this,a=n.defSideCoe;n.height;var i=n.nodes,o=n.relatedEdges,A=n.currentMinY,s=A===void 0?0:A,u=n.currentMaxY,f=u===void 0?this.height:u;!a||typeof a!="function"||!(i!=null&&i.length)||i.forEach(function(l,c){var h=a(l,o[l.id]||[]);if(h!==0){var d=h<0?s:f,v=Math.abs(h);t[2*c+1]-=v*(l.y-d)}})},e.prototype.updateVelocity=function(t,n,a){var i=this,o=i.nodes,A=i.damping,s=i.maxSpeed;o!=null&&o.length&&o.forEach(function(u,f){var l=(n[2*f]+t[2*f]*a)*A||.01,c=(n[2*f+1]+t[2*f+1]*a)*A||.01,h=Math.sqrt(l*l+c*c);if(h>s){var d=s/h;l=d*l,c=d*c}n[2*f]=l,n[2*f+1]=c})},e.prototype.updatePosition=function(t,n){var a=this,i=a.nodes,o=a.distanceThresholdMode,A=a.nodeMap;if(!(i!=null&&i.length)){this.judgingDistance=0;return}var s=0;o==="max"?a.judgingDistance=-1/0:o==="min"&&(a.judgingDistance=1/0);var u=1/0,f=-1/0;i.forEach(function(l,c){var h=A[l.id];if((0,pn.isNumber)(l.fx)&&(0,pn.isNumber)(l.fy)){l.x=l.fx,l.y=l.fy,h.x=l.x,h.y=l.y;return}var d=t[2*c]*n,v=t[2*c+1]*n;l.x+=d,l.y+=v,h.x=l.x,h.y=l.y,l.y<u&&(u=l.y),l.y>f&&(f=l.y);var g=Math.sqrt(d*d+v*v);switch(o){case"max":a.judgingDistance<g&&(a.judgingDistance=g);break;case"min":a.judgingDistance>g&&(a.judgingDistance=g);break;default:s=s+g;break}}),this.currentMinY=u,this.currentMaxY=f,(!o||o==="mean")&&(a.judgingDistance=s/i.length)},e.prototype.stop=function(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval)},e.prototype.destroy=function(){var t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0},e.prototype.getType=function(){return"force2"},e.prototype.getSameTypeLeafMap=function(){var t=this,n=t.nodeClusterBy,a=t.nodes,i=t.edges,o=t.nodeMap,A=t.degreesMap;if(a!=null&&a.length){var s={};return a.forEach(function(u,f){var l=A[u.id].all;l===1&&(s[u.id]=(0,pn.getCoreNodeAndRelativeLeafNodes)("leaf",u,i,n,A,o))}),s}},e}(rq.Base);Dc.Force2Layout=aq;var kB={},np={};function iq(r,e){var t,n=1;r==null&&(r=0),e==null&&(e=0);function a(){var i,o=t.length,A,s=0,u=0;for(i=0;i<o;++i)A=t[i],s+=A.x,u+=A.y;for(s=(s/o-r)*n,u=(u/o-e)*n,i=0;i<o;++i)A=t[i],A.x-=s,A.y-=u}return a.initialize=function(i){t=i},a.x=function(i){return arguments.length?(r=+i,a):r},a.y=function(i){return arguments.length?(e=+i,a):e},a.strength=function(i){return arguments.length?(n=+i,a):n},a}function Bn(r){return function(){return r}}function cA(r){return(r()-.5)*1e-6}function oq(r){return r.x+r.vx}function Aq(r){return r.y+r.vy}function sq(r){var e,t,n,a=1,i=1;typeof r!="function"&&(r=Bn(r==null?1:+r));function o(){for(var u,f=e.length,l,c,h,d,v,g,p=0;p<i;++p)for(l=rp(e,oq,Aq).visitAfter(A),u=0;u<f;++u)c=e[u],v=t[c.index],g=v*v,h=c.x+c.vx,d=c.y+c.vy,l.visit(y);function y(m,w,B,E,b){var C=m.data,_=m.r,x=v+_;if(C){if(C.index>c.index){var M=h-C.x-C.vx,S=d-C.y-C.vy,I=M*M+S*S;I<x*x&&(M===0&&(M=cA(n),I+=M*M),S===0&&(S=cA(n),I+=S*S),I=(x-(I=Math.sqrt(I)))/I*a,c.vx+=(M*=I)*(x=(_*=_)/(g+_)),c.vy+=(S*=I)*x,C.vx-=M*(x=1-x),C.vy-=S*x)}return}return w>h+x||E<h-x||B>d+x||b<d-x}}function A(u){if(u.data)return u.r=t[u.data.index];for(var f=u.r=0;f<4;++f)u[f]&&u[f].r>u.r&&(u.r=u[f].r)}function s(){if(e){var u,f=e.length,l;for(t=new Array(f),u=0;u<f;++u)l=e[u],t[l.index]=+r(l,u,e)}}return o.initialize=function(u,f){e=u,n=f,s()},o.iterations=function(u){return arguments.length?(i=+u,o):i},o.strength=function(u){return arguments.length?(a=+u,o):a},o.radius=function(u){return arguments.length?(r=typeof u=="function"?u:Bn(+u),s(),o):r},o}function uq(r){return r.index}function E2(r,e){var t=r.get(e);if(!t)throw new Error("node not found: "+e);return t}function fq(r){var e=uq,t=l,n,a=Bn(30),i,o,A,s,u,f=1;r==null&&(r=[]);function l(g){return 1/Math.min(A[g.source.index],A[g.target.index])}function c(g){for(var p=0,y=r.length;p<f;++p)for(var m=0,w,B,E,b,C,_,x;m<y;++m)w=r[m],B=w.source,E=w.target,b=E.x+E.vx-B.x-B.vx||cA(u),C=E.y+E.vy-B.y-B.vy||cA(u),_=Math.sqrt(b*b+C*C),_=(_-i[m])/_*g*n[m],b*=_,C*=_,E.vx-=b*(x=s[m]),E.vy-=C*x,B.vx+=b*(x=1-x),B.vy+=C*x}function h(){if(o){var g,p=o.length,y=r.length,m=new Map(o.map((B,E)=>[e(B,E,o),B])),w;for(g=0,A=new Array(p);g<y;++g)w=r[g],w.index=g,typeof w.source!="object"&&(w.source=E2(m,w.source)),typeof w.target!="object"&&(w.target=E2(m,w.target)),A[w.source.index]=(A[w.source.index]||0)+1,A[w.target.index]=(A[w.target.index]||0)+1;for(g=0,s=new Array(y);g<y;++g)w=r[g],s[g]=A[w.source.index]/(A[w.source.index]+A[w.target.index]);n=new Array(y),d(),i=new Array(y),v()}}function d(){if(o)for(var g=0,p=r.length;g<p;++g)n[g]=+t(r[g],g,r)}function v(){if(o)for(var g=0,p=r.length;g<p;++g)i[g]=+a(r[g],g,r)}return c.initialize=function(g,p){o=g,u=p,h()},c.links=function(g){return arguments.length?(r=g,h(),c):r},c.id=function(g){return arguments.length?(e=g,c):e},c.iterations=function(g){return arguments.length?(f=+g,c):f},c.strength=function(g){return arguments.length?(t=typeof g=="function"?g:Bn(+g),d(),c):t},c.distance=function(g){return arguments.length?(a=typeof g=="function"?g:Bn(+g),v(),c):a},c}var lq={value:()=>{}};function LU(){for(var r=0,e=arguments.length,t={},n;r<e;++r){if(!(n=arguments[r]+"")||n in t||/[\s.]/.test(n))throw new Error("illegal type: "+n);t[n]=[]}return new Av(t)}function Av(r){this._=r}function cq(r,e){return r.trim().split(/^|\s+/).map(function(t){var n="",a=t.indexOf(".");if(a>=0&&(n=t.slice(a+1),t=t.slice(0,a)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}Av.prototype=LU.prototype={constructor:Av,on:function(r,e){var t=this._,n=cq(r+"",t),a,i=-1,o=n.length;if(arguments.length<2){for(;++i<o;)if((a=(r=n[i]).type)&&(a=hq(t[a],r.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++i<o;)if(a=(r=n[i]).type)t[a]=b2(t[a],r.name,e);else if(e==null)for(a in t)t[a]=b2(t[a],r.name,null);return this},copy:function(){var r={},e=this._;for(var t in e)r[t]=e[t].slice();return new Av(r)},call:function(r,e){if((a=arguments.length-2)>0)for(var t=new Array(a),n=0,a,i;n<a;++n)t[n]=arguments[n+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(i=this._[r],n=0,a=i.length;n<a;++n)i[n].value.apply(e,t)},apply:function(r,e,t){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var n=this._[r],a=0,i=n.length;a<i;++a)n[a].value.apply(e,t)}};function hq(r,e){for(var t=0,n=r.length,a;t<n;++t)if((a=r[t]).name===e)return a.value}function b2(r,e,t){for(var n=0,a=r.length;n<a;++n)if(r[n].name===e){r[n]=lq,r=r.slice(0,n).concat(r.slice(n+1));break}return t!=null&&r.push({name:e,value:t}),r}var ef=0,dl=0,zf=0,DU=1e3,Wv,vl,Vv=0,Ts=0,ap=0,ic=typeof performance=="object"&&performance.now?performance:Date,OU=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function UU(){return Ts||(OU(dq),Ts=ic.now()+ap)}function dq(){Ts=0}function B1(){this._call=this._time=this._next=null}B1.prototype=NU.prototype={constructor:B1,restart:function(r,e,t){if(typeof r!="function")throw new TypeError("callback is not a function");t=(t==null?UU():+t)+(e==null?0:+e),!this._next&&vl!==this&&(vl?vl._next=this:Wv=this,vl=this),this._call=r,this._time=t,E1()},stop:function(){this._call&&(this._call=null,this._time=1/0,E1())}};function NU(r,e,t){var n=new B1;return n.restart(r,e,t),n}function vq(){UU(),++ef;for(var r=Wv,e;r;)(e=Ts-r._time)>=0&&r._call.call(null,e),r=r._next;--ef}function x2(){Ts=(Vv=ic.now())+ap,ef=dl=0;try{vq()}finally{ef=0,pq(),Ts=0}}function gq(){var r=ic.now(),e=r-Vv;e>DU&&(ap-=e,Vv=r)}function pq(){for(var r,e=Wv,t,n=1/0;e;)e._call?(n>e._time&&(n=e._time),r=e,e=e._next):(t=e._next,e._next=null,e=r?r._next=t:Wv=t);vl=r,E1(n)}function E1(r){if(!ef){dl&&(dl=clearTimeout(dl));var e=r-Ts;e>24?(r<1/0&&(dl=setTimeout(x2,r-ic.now()-ap)),zf&&(zf=clearInterval(zf))):(zf||(Vv=ic.now(),zf=setInterval(gq,DU)),ef=1,OU(x2))}}const yq=1664525,mq=1013904223,C2=4294967296;function wq(){let r=1;return()=>(r=(yq*r+mq)%C2)/C2}function Bq(r){return r.x}function Eq(r){return r.y}var bq=10,xq=Math.PI*(3-Math.sqrt(5));function Cq(r){var e,t=1,n=.001,a=1-Math.pow(n,1/300),i=0,o=.6,A=new Map,s=NU(l),u=LU("tick","end"),f=wq();r==null&&(r=[]);function l(){c(),u.call("tick",e),t<n&&(s.stop(),u.call("end",e))}function c(v){var g,p=r.length,y;v===void 0&&(v=1);for(var m=0;m<v;++m)for(t+=(i-t)*a,A.forEach(function(w){w(t)}),g=0;g<p;++g)y=r[g],y.fx==null?y.x+=y.vx*=o:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=o:(y.y=y.fy,y.vy=0);return e}function h(){for(var v=0,g=r.length,p;v<g;++v){if(p=r[v],p.index=v,p.fx!=null&&(p.x=p.fx),p.fy!=null&&(p.y=p.fy),isNaN(p.x)||isNaN(p.y)){var y=bq*Math.sqrt(.5+v),m=v*xq;p.x=y*Math.cos(m),p.y=y*Math.sin(m)}(isNaN(p.vx)||isNaN(p.vy))&&(p.vx=p.vy=0)}}function d(v){return v.initialize&&v.initialize(r,f),v}return h(),e={tick:c,restart:function(){return s.restart(l),e},stop:function(){return s.stop(),e},nodes:function(v){return arguments.length?(r=v,h(),A.forEach(d),e):r},alpha:function(v){return arguments.length?(t=+v,e):t},alphaMin:function(v){return arguments.length?(n=+v,e):n},alphaDecay:function(v){return arguments.length?(a=+v,e):+a},alphaTarget:function(v){return arguments.length?(i=+v,e):i},velocityDecay:function(v){return arguments.length?(o=1-v,e):1-o},randomSource:function(v){return arguments.length?(f=v,A.forEach(d),e):f},force:function(v,g){return arguments.length>1?(g==null?A.delete(v):A.set(v,d(g)),e):A.get(v)},find:function(v,g,p){var y=0,m=r.length,w,B,E,b,C;for(p==null?p=1/0:p*=p,y=0;y<m;++y)b=r[y],w=v-b.x,B=g-b.y,E=w*w+B*B,E<p&&(C=b,p=E);return C},on:function(v,g){return arguments.length>1?(u.on(v,g),e):u.on(v)}}}function _q(){var r,e,t,n,a=Bn(-30),i,o=1,A=1/0,s=.81;function u(h){var d,v=r.length,g=rp(r,Bq,Eq).visitAfter(l);for(n=h,d=0;d<v;++d)e=r[d],g.visit(c)}function f(){if(r){var h,d=r.length,v;for(i=new Array(d),h=0;h<d;++h)v=r[h],i[v.index]=+a(v,h,r)}}function l(h){var d=0,v,g,p=0,y,m,w;if(h.length){for(y=m=w=0;w<4;++w)(v=h[w])&&(g=Math.abs(v.value))&&(d+=v.value,p+=g,y+=g*v.x,m+=g*v.y);h.x=y/p,h.y=m/p}else{v=h,v.x=v.data.x,v.y=v.data.y;do d+=i[v.data.index];while(v=v.next)}h.value=d}function c(h,d,v,g){if(!h.value)return!0;var p=h.x-e.x,y=h.y-e.y,m=g-d,w=p*p+y*y;if(m*m/s<w)return w<A&&(p===0&&(p=cA(t),w+=p*p),y===0&&(y=cA(t),w+=y*y),w<o&&(w=Math.sqrt(o*w)),e.vx+=p*h.value*n/w,e.vy+=y*h.value*n/w),!0;if(h.length||w>=A)return;(h.data!==e||h.next)&&(p===0&&(p=cA(t),w+=p*p),y===0&&(y=cA(t),w+=y*y),w<o&&(w=Math.sqrt(o*w)));do h.data!==e&&(m=i[h.data.index]*n/w,e.vx+=p*m,e.vy+=y*m);while(h=h.next)}return u.initialize=function(h,d){r=h,t=d,f()},u.strength=function(h){return arguments.length?(a=typeof h=="function"?h:Bn(+h),f(),u):a},u.distanceMin=function(h){return arguments.length?(o=h*h,u):Math.sqrt(o)},u.distanceMax=function(h){return arguments.length?(A=h*h,u):Math.sqrt(A)},u.theta=function(h){return arguments.length?(s=h*h,u):Math.sqrt(s)},u}function Sq(r,e,t){var n,a=Bn(.1),i,o;typeof r!="function"&&(r=Bn(+r)),e==null&&(e=0),t==null&&(t=0);function A(u){for(var f=0,l=n.length;f<l;++f){var c=n[f],h=c.x-e||1e-6,d=c.y-t||1e-6,v=Math.sqrt(h*h+d*d),g=(o[f]-v)*i[f]*u/v;c.vx+=h*g,c.vy+=d*g}}function s(){if(n){var u,f=n.length;for(i=new Array(f),o=new Array(f),u=0;u<f;++u)o[u]=+r(n[u],u,n),i[u]=isNaN(o[u])?0:+a(n[u],u,n)}}return A.initialize=function(u){n=u,s()},A.strength=function(u){return arguments.length?(a=typeof u=="function"?u:Bn(+u),s(),A):a},A.radius=function(u){return arguments.length?(r=typeof u=="function"?u:Bn(+u),s(),A):r},A.x=function(u){return arguments.length?(e=+u,A):e},A.y=function(u){return arguments.length?(t=+u,A):t},A}function Mq(r){var e=Bn(.1),t,n,a;typeof r!="function"&&(r=Bn(r==null?0:+r));function i(A){for(var s=0,u=t.length,f;s<u;++s)f=t[s],f.vx+=(a[s]-f.x)*n[s]*A}function o(){if(t){var A,s=t.length;for(n=new Array(s),a=new Array(s),A=0;A<s;++A)n[A]=isNaN(a[A]=+r(t[A],A,t))?0:+e(t[A],A,t)}}return i.initialize=function(A){t=A,o()},i.strength=function(A){return arguments.length?(e=typeof A=="function"?A:Bn(+A),o(),i):e},i.x=function(A){return arguments.length?(r=typeof A=="function"?A:Bn(+A),o(),i):r},i}function Iq(r){var e=Bn(.1),t,n,a;typeof r!="function"&&(r=Bn(r==null?0:+r));function i(A){for(var s=0,u=t.length,f;s<u;++s)f=t[s],f.vy+=(a[s]-f.y)*n[s]*A}function o(){if(t){var A,s=t.length;for(n=new Array(s),a=new Array(s),A=0;A<s;++A)n[A]=isNaN(a[A]=+r(t[A],A,t))?0:+e(t[A],A,t)}}return i.initialize=function(A){t=A,o()},i.strength=function(A){return arguments.length?(e=typeof A=="function"?A:Bn(+A),o(),i):e},i.y=function(A){return arguments.length?(r=typeof A=="function"?A:Bn(+A),o(),i):r},i}const Tq=Object.freeze(Object.defineProperty({__proto__:null,forceCenter:iq,forceCollide:sq,forceLink:fq,forceManyBody:_q,forceRadial:Sq,forceSimulation:Cq,forceX:Mq,forceY:Iq},Symbol.toStringTag,{value:"Module"})),PB=Zi(Tq);var QB={},Fq=we&&we.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var a=Object.getOwnPropertyDescriptor(e,t);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,a)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Lq=we&&we.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Dq=we&&we.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Fq(e,r,t);return Lq(e,r),e};Object.defineProperty(QB,"__esModule",{value:!0});var Au=Dq(PB),ad=zr();function Oq(){function r(q){return function(){return q}}var e=function(q){return q.cluster},t=r(1),n=r(-1),a=r(100),i=r(.1),o=[0,0],A=[],s={},u=[],f=100,l=100,c={none:{x:0,y:0}},h=[],d,v="force",g=!0,p=.1;function y(q){if(!g)return y;d.tick(),C();for(var ve=0,Me=A.length,Re=void 0,tt=q*p;ve<Me;++ve)Re=A[ve],Re.vx+=(c[e(Re)].x-Re.x)*tt,Re.vy+=(c[e(Re)].y-Re.y)*tt}function m(){A&&w()}function w(){if(!(!A||!A.length)){if(e(A[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var q=B();d=Au.forceSimulation(q.nodes).force("x",Au.forceX(f).strength(.1)).force("y",Au.forceY(l).strength(.1)).force("collide",Au.forceCollide(function(ve){return ve.r}).iterations(4)).force("charge",Au.forceManyBody().strength(n)).force("links",Au.forceLink(q.nodes.length?q.links:[]).distance(a).strength(i)),h=d.nodes(),C()}}function B(){var q=[],ve=[],Me={},Re=[],tt={},st=[];return tt=E(A),st=b(u),Re=Object.keys(tt),Re.forEach(function(at,Et){var bt=tt[at];q.push({id:at,size:bt.count,r:Math.sqrt(bt.sumforceNodeSize/Math.PI)}),Me[at]=Et}),st.forEach(function(at){var Et=(0,ad.getEdgeTerminal)(at,"source"),bt=(0,ad.getEdgeTerminal)(at,"target"),fr=Me[Et],Qt=Me[bt];fr!==void 0&&Qt!==void 0&&ve.push({source:fr,target:Qt,count:at.count})}),{nodes:q,links:ve}}function E(q){var ve={};return q.forEach(function(Me){var Re=e(Me);ve[Re]||(ve[Re]={count:0,sumforceNodeSize:0})}),q.forEach(function(Me){var Re=e(Me),tt=t(Me),st=ve[Re];st.count=st.count+1,st.sumforceNodeSize=st.sumforceNodeSize+Math.PI*(tt*tt)*1.3,ve[Re]=st}),ve}function b(q){var ve={},Me=[];q.forEach(function(tt){var st=_(tt),at=0;ve[st]!==void 0&&(at=ve[st]),at+=1,ve[st]=at});var Re=Object.entries(ve);return Re.forEach(function(tt){var st=tt[0],at=tt[1],Et=st.split("~")[0],bt=st.split("~")[1];Et!==void 0&&bt!==void 0&&Me.push({source:Et,target:bt,count:at})}),Me}function C(){return c={none:{x:0,y:0}},h.forEach(function(q){c[q.id]={x:q.x-o[0],y:q.y-o[1]}}),c}function _(q){var ve=(0,ad.getEdgeTerminal)(q,"source"),Me=(0,ad.getEdgeTerminal)(q,"target"),Re=e(s[ve]),tt=e(s[Me]);return Re<=tt?"".concat(Re,"~").concat(tt):"".concat(tt,"~").concat(Re)}function x(q){s={},q.forEach(function(ve){s[ve.id]=ve})}function M(q){return arguments.length?(v=q,m(),y):v}function S(q){return arguments.length?typeof q=="string"?(e=function(ve){return ve[q]},y):(e=q,y):e}function I(q){return arguments.length?(g=q,y):g}function D(q){return arguments.length?(p=q,y):p}function O(q){return arguments.length?(f=q,y):f}function F(q){return arguments.length?(l=q,y):l}function U(q){return arguments.length?(x(q||[]),A=q||[],y):A}function Q(q){return arguments.length?(u=q||[],m(),y):u}function N(q){return arguments.length?(typeof q=="function"?t=q:t=r(+q),m(),y):t}function R(q){return arguments.length?(typeof q=="function"?n=q:n=r(+q),m(),y):n}function J(q){return arguments.length?(typeof q=="function"?a=q:a=r(+q),m(),y):a}function re(q){return arguments.length?(typeof q=="function"?i=q:i=r(+q),m(),y):i}function ee(q){return arguments.length?(o=q,y):o}return y.initialize=function(q){A=q,m()},y.template=M,y.groupBy=S,y.enableGrouping=I,y.strength=D,y.centerX=O,y.centerY=F,y.nodes=U,y.links=Q,y.forceNodeSize=N,y.nodeSize=y.forceNodeSize,y.forceCharge=R,y.forceLinkDistance=J,y.forceLinkStrength=re,y.offset=ee,y.getFocis=C,y}QB.default=Oq;var Uo={};Object.defineProperty(Uo,"__esModule",{value:!0});Uo.FORCE_LAYOUT_TYPE_MAP=Uo.LAYOUT_MESSAGE=void 0;Uo.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};Uo.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0};var Uq=we&&we.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Nq=we&&we.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var a=Object.getOwnPropertyDescriptor(e,t);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,a)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),kq=we&&we.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Pq=we&&we.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Nq(e,r,t);return kq(e,r),e},Qq=we&&we.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(np,"__esModule",{value:!0});np.ForceLayout=void 0;var su=Pq(PB),Rq=Qq(QB),qA=zr(),Hq=qr,Gq=Uo,zq=function(r){Uq(e,r);function e(t){var n=r.call(this)||this;return n.center=[0,0],n.nodeStrength=null,n.edgeStrength=null,n.preventOverlap=!1,n.clusterNodeStrength=null,n.clusterEdgeStrength=null,n.clusterEdgeDistance=null,n.clusterNodeSize=null,n.clusterFociStrength=null,n.linkDistance=50,n.alphaDecay=.028,n.alphaMin=.001,n.alpha=.3,n.collideStrength=1,n.workerEnabled=!1,n.tick=function(){},n.onLayoutEnd=function(){},n.ticking=void 0,t&&n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},e.prototype.init=function(t){var n=this;n.nodes=t.nodes||[];var a=t.edges||[];n.edges=a.map(function(i){var o={},A=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(i).forEach(function(s){A.indexOf(s)>-1||(o[s]=i[s])}),o}),n.ticking=!1},e.prototype.execute=function(t){var n=this,a=n.nodes,i=n.edges;if(!n.ticking){var o=n.forceSimulation,A=n.alphaMin,s=n.alphaDecay,u=n.alpha;if(o){if(t){if(n.clustering&&n.clusterForce&&(n.clusterForce.nodes(a),n.clusterForce.links(i)),o.nodes(a),i&&n.edgeForce)n.edgeForce.links(i);else if(i&&!n.edgeForce){var c=su.forceLink().id(function(g){return g.id}).links(i);n.edgeStrength&&c.strength(n.edgeStrength),n.linkDistance&&c.distance(n.linkDistance),n.edgeForce=c,o.force("link",c)}}n.preventOverlap&&n.overlapProcess(o),o.alpha(u).restart(),this.ticking=!0}else try{var f=su.forceManyBody();if(n.nodeStrength&&f.strength(n.nodeStrength),o=su.forceSimulation().nodes(a),n.clustering){var l=(0,Rq.default)();l.centerX(n.center[0]).centerY(n.center[1]).template("force").strength(n.clusterFociStrength),i&&l.links(i),a&&l.nodes(a),l.forceLinkDistance(n.clusterEdgeDistance).forceLinkStrength(n.clusterEdgeStrength).forceCharge(n.clusterNodeStrength).forceNodeSize(n.clusterNodeSize),n.clusterForce=l,o.force("group",l)}if(o.force("center",su.forceCenter(n.center[0],n.center[1])).force("charge",f).alpha(u).alphaDecay(s).alphaMin(A),n.preventOverlap&&n.overlapProcess(o),i){var c=su.forceLink().id(function(v){return v.id}).links(i);n.edgeStrength&&c.strength(n.edgeStrength),n.linkDistance&&c.distance(n.linkDistance),n.edgeForce=c,o.force("link",c)}if(n.workerEnabled&&!jq()&&(n.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!n.workerEnabled)o.on("tick",function(){n.tick()}).on("end",function(){n.ticking=!1,n.onLayoutEnd&&n.onLayoutEnd()}),n.ticking=!0;else{o.stop();for(var h=Kq(o),d=1;d<=h;d++)o.tick(),postMessage({nodes:a,currentTick:d,totalTicks:h,type:Gq.LAYOUT_MESSAGE.TICK},void 0);n.ticking=!1}n.forceSimulation=o,n.ticking=!0}catch(v){n.ticking=!1,console.warn(v)}}},e.prototype.overlapProcess=function(t){var n=this,a=n.nodeSize,i=n.nodeSpacing,o,A,s=n.collideStrength;if((0,qA.isNumber)(i)?A=function(){return i}:(0,qA.isFunction)(i)?A=i:A=function(){return 0},!a)o=function(c){if(c.size){if((0,qA.isArray)(c.size)){var h=c.size[0]>c.size[1]?c.size[0]:c.size[1];return h/2+A(c)}if((0,qA.isObject)(c.size)){var h=c.size.width>c.size.height?c.size.width:c.size.height;return h/2+A(c)}return c.size/2+A(c)}return 10+A(c)};else if((0,qA.isFunction)(a))o=function(c){var h=a(c);return h+A(c)};else if((0,qA.isArray)(a)){var u=a[0]>a[1]?a[0]:a[1],f=u/2;o=function(c){return f+A(c)}}else if((0,qA.isNumber)(a)){var l=a/2;o=function(c){return l+A(c)}}else o=function(){return 10};t.force("collisionForce",su.forceCollide(o).strength(s))},e.prototype.updateCfg=function(t){var n=this;n.ticking&&(n.forceSimulation.stop(),n.ticking=!1),n.forceSimulation=null,Object.assign(n,t)},e.prototype.destroy=function(){var t=this;t.ticking&&(t.forceSimulation.stop(),t.ticking=!1),t.nodes=null,t.edges=null,t.destroyed=!0},e}(Hq.Base);np.ForceLayout=zq;function Kq(r){var e=r.alphaMin(),t=r.alphaTarget(),n=r.alpha(),a=Math.log((e-t)/(n-t))/Math.log(1-r.alphaDecay()),i=Math.ceil(a);return i}function jq(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}(function(r){var e=we&&we.__createBinding||(Object.create?function(n,a,i,o){o===void 0&&(o=i);var A=Object.getOwnPropertyDescriptor(a,i);(!A||("get"in A?!a.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return a[i]}}),Object.defineProperty(n,o,A)}:function(n,a,i,o){o===void 0&&(o=i),n[o]=a[i]}),t=we&&we.__exportStar||function(n,a){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(a,i)&&e(a,n,i)};Object.defineProperty(r,"__esModule",{value:!0}),t(np,r)})(kB);var Oc={},$q=we&&we.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Oc,"__esModule",{value:!0});Oc.CircularLayout=void 0;var Wq=qr,Gi=zr();function Vq(r,e,t,n){r.forEach(function(a,i){r[i].children=[],r[i].parent=[]}),n?e.forEach(function(a){var i=(0,Gi.getEdgeTerminal)(a,"source"),o=(0,Gi.getEdgeTerminal)(a,"target"),A=0;i&&(A=t[i]);var s=0;o&&(s=t[o]);var u=r[A].children,f=r[s].parent;u.push(r[s].id),f.push(r[A].id)}):e.forEach(function(a){var i=(0,Gi.getEdgeTerminal)(a,"source"),o=(0,Gi.getEdgeTerminal)(a,"target"),A=0;i&&(A=t[i]);var s=0;o&&(s=t[o]);var u=r[A].children,f=r[s].children;u.push(r[s].id),f.push(r[A].id)})}function Xq(r,e,t){for(var n=t.length,a=0;a<n;a++){var i=(0,Gi.getEdgeTerminal)(t[a],"source"),o=(0,Gi.getEdgeTerminal)(t[a],"target");if(r.id===i&&e.id===o||e.id===i&&r.id===o)return!0}return!1}function Yq(r,e){var t=r.degree,n=e.degree;return t<n?-1:t>n?1:0}var Zq=function(r){$q(e,r);function e(t){var n=r.call(this)||this;return n.radius=null,n.nodeSize=void 0,n.startRadius=null,n.endRadius=null,n.startAngle=0,n.endAngle=2*Math.PI,n.clockwise=!0,n.divisions=1,n.ordering=null,n.angleRatio=1,n.nodes=[],n.edges=[],n.nodeMap={},n.degrees=[],n.width=300,n.height=300,n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},e.prototype.execute=function(){var t,n=this,a=n.nodes,i=n.edges,o=a.length;if(o===0){n.onLayoutEnd&&n.onLayoutEnd();return}!n.width&&typeof window<"u"&&(n.width=window.innerWidth),!n.height&&typeof window<"u"&&(n.height=window.innerHeight),n.center||(n.center=[n.width/2,n.height/2]);var A=n.center;if(o===1){a[0].x=A[0],a[0].y=A[1],n.onLayoutEnd&&n.onLayoutEnd();return}var s=n.radius,u=n.startRadius,f=n.endRadius,l=n.divisions,c=n.startAngle,h=n.endAngle,d=n.angleRatio,v=n.ordering,g=n.clockwise,p=n.nodeSpacing,y=n.nodeSize,m=(h-c)/o,w={};a.forEach(function(F,U){w[F.id]=U}),n.nodeMap=w;var B=(0,Gi.getDegree)(a.length,w,i);if(n.degrees=B,p){var E=(0,Gi.getFuncByUnknownType)(10,p),b=(0,Gi.getFuncByUnknownType)(10,y),C=-1/0;a.forEach(function(F){var U=b(F);C<U&&(C=U)});var _=0;a.forEach(function(F,U){U===0?_+=C||10:_+=(E(F)||0)+(C||10)}),s=_/(2*Math.PI)}else!s&&!u&&!f?s=n.height>n.width?n.width/2:n.height/2:!u&&f?u=f:u&&!f&&(f=u);var x=m*d,M=[];v==="topology"?M=n.topologyOrdering():v==="topology-directed"?M=n.topologyOrdering(!0):v==="degree"?M=n.degreeOrdering():M=a;for(var S=Math.ceil(o/l),I=0;I<o;++I){var D=s;!D&&u!==null&&f!==null&&(D=u+I*(f-u)/(o-1)),D||(D=10+I*100/(o-1));var O=c+I%S*x+2*Math.PI/l*Math.floor(I/S);g||(O=h-I%S*x-2*Math.PI/l*Math.floor(I/S)),M[I].x=A[0]+Math.cos(O)*D,M[I].y=A[1]+Math.sin(O)*D,M[I].weight=B[I].all}return(t=n.onLayoutEnd)===null||t===void 0||t.call(n),{nodes:M,edges:this.edges}},e.prototype.topologyOrdering=function(t){t===void 0&&(t=!1);var n=this,a=n.degrees,i=n.edges,o=n.nodes,A=(0,Gi.clone)(o),s=n.nodeMap,u=[A[0]],f=[o[0]],l=[],c=o.length;l[0]=!0,Vq(A,i,s,t);var h=0;return A.forEach(function(d,v){if(v!==0)if((v===c-1||a[v].all!==a[v+1].all||Xq(u[h],d,i))&&!l[v])u.push(d),f.push(o[s[d.id]]),l[v]=!0,h++;else{for(var g=u[h].children,p=!1,y=0;y<g.length;y++){var m=s[g[y]];if(a[m].all===a[v].all&&!l[m]){u.push(A[m]),f.push(o[s[A[m].id]]),l[m]=!0,p=!0;break}}for(var w=0;!p&&(l[w]||(u.push(A[w]),f.push(o[s[A[w].id]]),l[w]=!0,p=!0),w++,w!==c););}}),f},e.prototype.degreeOrdering=function(){var t=this,n=t.nodes,a=[],i=t.degrees;return n.forEach(function(o,A){o.degree=i[A].all,a.push(o)}),a.sort(Yq),a},e.prototype.getType=function(){return"circular"},e}(Wq.Base);Oc.CircularLayout=Zq;var gf={},RB={},HB={},GB={},zB={},KB={};Object.defineProperty(KB,"__esModule",{value:!0});var qq=function(r,e){if(r!=="next"&&r!=="prev")return e},_2=function(r){r.prev.next=r.next,r.next.prev=r.prev,delete r.next,delete r.prev},Jq=function(){function r(){var e={};e.prev=e,e.next=e.prev,this.shortcut=e}return r.prototype.dequeue=function(){var e=this.shortcut,t=e.prev;if(t&&t!==e)return _2(t),t},r.prototype.enqueue=function(e){var t=this.shortcut;e.prev&&e.next&&_2(e),e.next=t.next,t.next.prev=e,t.next=e,e.prev=t},r.prototype.toString=function(){for(var e=[],t=this.shortcut,n=t.prev;n!==t;)e.push(JSON.stringify(n,qq)),n=n==null?void 0:n.prev;return"[".concat(e.join(", "),"]")},r}();KB.default=Jq;var Qu;(function(r){r.DEFAULT_EDGE_NAME="\0",r.GRAPH_NODE="\0",r.EDGE_KEY_DELIM=""})(Qu||(Qu={}));function S2(r,e){var t=r.get(e)||0;r.set(e,t+1)}function M2(r,e){var t=r.get(e);t!==void 0&&(t=t-1,t>0?r.set(e,t):r.delete(e))}function kU(r,e,t,n){var a=String(e),i=String(t);if(!r&&a>i){var o=a;a=i,i=o}return a+Qu.EDGE_KEY_DELIM+i+Qu.EDGE_KEY_DELIM+(n===void 0?Qu.DEFAULT_EDGE_NAME:n)}function I2(r,e,t,n){var a=String(e),i=String(t),o={v:e,w:t};if(!r&&a>i){var A=o.v;o.v=o.w,o.w=A}return n!==void 0&&(o.name=n),o}function by(r,e){return kU(r,e.v,e.w,e.name)}function T2(r){return typeof r=="function"}var eJ=function(e){return e.nodes().map(function(t){var n=e.node(t),a=e.parent(t),i={id:t,value:n,parent:a};return i.value===void 0&&delete i.value,i.parent===void 0&&delete i.parent,i})},tJ=function(e){return e.edges().map(function(t){var n=e.edge(t),a={v:t.v,w:t.w,value:n,name:t.name};return a.name===void 0&&delete a.name,a.value===void 0&&delete a.value,a})},rJ=function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:eJ(e),edges:tJ(e),value:e.graph()};return t.value===void 0&&delete t.value,t},nJ=function(e){var t=new ks(e.options);return e.value!==void 0&&t.setGraph(e.value),e.nodes.forEach(function(n){t.setNode(n.id,n.value),n.parent&&t.setParent(n.id,n.parent)}),e.edges.forEach(function(n){t.setEdge(n.v,n.w,n.value,n.name)}),t};function F2(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function L2(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?F2(Object(t),!0).forEach(function(n){aJ(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):F2(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function aJ(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function iJ(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function D2(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function oJ(r,e,t){return e&&D2(r.prototype,e),t&&D2(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}var AJ={compound:!1,multigraph:!1,directed:!0},ks=function(){function r(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};iJ(this,r),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=Qu.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return e.directed},this.isMultigraph=function(){return e.multigraph},this.isCompound=function(){return e.compound},this.setGraph=function(a){return e.label=a,e},this.graph=function(){return e.label},this.setDefaultNodeLabel=function(a){return T2(a)?e.defaultNodeLabelFn=a:e.defaultNodeLabelFn=function(){return a},e},this.nodeCount=function(){return e.nodeCountNum},this.node=function(a){return e.nodesLabelMap.get(a)},this.nodes=function(){return Array.from(e.nodesLabelMap.keys())},this.sources=function(){return e.nodes().filter(function(a){var i;return!(!((i=e.inEdgesMap.get(a))===null||i===void 0)&&i.size)})},this.sinks=function(){return e.nodes().filter(function(a){var i;return!(!((i=e.outEdgesMap.get(a))===null||i===void 0)&&i.size)})},this.setNodes=function(a,i){return a.map(function(o){return e.setNode(o,i)}),e},this.hasNode=function(a){return e.nodesLabelMap.has(a)},this.checkCompound=function(){if(!e.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(a){if(e.isCompound()){var i,o=(i=e.parentMap)===null||i===void 0?void 0:i.get(a);if(o!==e.GRAPH_NODE)return o}},this.removeFromParentsChildList=function(a){var i=e.parentMap.get(a);e.childrenMap.get(i).delete(a)},this.setParent=function(a,i){var o,A;e.checkCompound();for(var s=i===void 0?e.GRAPH_NODE:i,u=e.parent(s);u;){if(a===u)throw new Error("Setting "+i+" as parent of "+a+" would create a cycle");u=e.parent(u)}i&&e.setNode(i),e.setNode(a),e.removeFromParentsChildList(a),(o=e.parentMap)===null||o===void 0||o.set(a,s);var f=e.childrenMap.get(s);return f.set(a,!0),(A=e.childrenMap)===null||A===void 0||A.set(s,f),e},this.children=function(a){var i=a===void 0?e.GRAPH_NODE:a;if(e.isCompound()){var o,A=(o=e.childrenMap)===null||o===void 0?void 0:o.get(i);return A?Array.from(A.keys()):void 0}if(i===e.GRAPH_NODE)return e.nodes();if(a&&e.hasNode(a))return[]},this.predecessors=function(a){var i=e.predecessorsMap.get(a);return i?Array.from(i.keys()):void 0},this.successors=function(a){var i=e.successorsMap.get(a);return i?Array.from(i.keys()):void 0},this.neighbors=function(a){var i;if(e.hasNode(a))return Array.from(new Set((i=e.predecessors(a))===null||i===void 0?void 0:i.concat(e.successors(a))))},this.isLeaf=function(a){var i;if(e.isDirected()){var o;return!(!((o=e.successors(a))===null||o===void 0)&&o.length)}return!(!((i=e.neighbors(a))===null||i===void 0)&&i.length)},this.filterNodes=function(a){var i=e.directed,o=e.multigraph,A=e.compound,s=new r({directed:i,multigraph:o,compound:A});if(s.setGraph(e.graph()),e.nodes().forEach(function(f){a(f)&&s.setNode(f,e.node(f))}),e.edges().forEach(function(f){s.hasNode(f.v)&&s.hasNode(f.w)&&s.setEdgeObj(f,e.edge(f))}),A){var u=function(l){for(var c=e.parent(l);c!==void 0&&!s.hasNode(c);)c=e.parent(c);return c};s.nodes().forEach(function(f){s.setParent(f,u(f))})}return s},this.setDefaultEdgeLabel=function(a){return T2(a)?e.defaultEdgeLabelFn=a:e.defaultEdgeLabelFn=function(){return a},e},this.edgeCount=function(){return e.edgeCountNum},this.setEdgeObj=function(a,i){return e.setEdge(a.v,a.w,i,a.name)},this.setPath=function(a,i){return a.reduce(function(o,A){return e.setEdge(o,A,i),A}),e},this.edgeFromArgs=function(a,i,o){return e.edge({v:a,w:i,name:o})},this.edge=function(a){return e.edgesLabelsMap.get(by(e.isDirected(),a))},this.hasEdge=function(a,i,o){return e.edgesLabelsMap.has(by(e.isDirected(),{v:a,w:i,name:o}))},this.removeEdgeObj=function(a){var i=a.v,o=a.w,A=a.name;return e.removeEdge(i,o,A)},this.edges=function(){return Array.from(e.edgesMap.values())},this.inEdges=function(a,i){var o=e.inEdgesMap.get(a);if(o)return Array.from(o.values()).filter(function(A){return!i||A.v===i})},this.outEdges=function(a,i){var o=e.outEdgesMap.get(a);if(o)return Array.from(o.values()).filter(function(A){return!i||A.w===i})},this.nodeEdges=function(a,i){var o;if(e.hasNode(a))return(o=e.inEdges(a,i))===null||o===void 0?void 0:o.concat(e.outEdges(a,i))},this.toJSON=function(){return rJ(e)},this.nodeInDegree=function(a){var i=e.inEdgesMap.get(a);return i?i.size:0},this.nodeOutDegree=function(a){var i=e.outEdgesMap.get(a);return i?i.size:0},this.nodeDegree=function(a){return e.nodeInDegree(a)+e.nodeOutDegree(a)},this.source=function(a){return a.v},this.target=function(a){return a.w};var n=L2(L2({},AJ),t);this.compound=n.compound,this.directed=n.directed,this.multigraph=n.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return oJ(r,[{key:"setNode",value:function(t,n){var a=this.nodesLabelMap,i=this.defaultNodeLabelFn,o=this.isCompound,A=this.parentMap,s=this.childrenMap,u=this.inEdgesMap,f=this.outEdgesMap,l=this.predecessorsMap,c=this.successorsMap;if(a.has(t))return n!==void 0&&a.set(t,n),this;if(a.set(t,n||i(t)),o()){var h;A==null||A.set(t,this.GRAPH_NODE),s==null||s.set(t,new Map),s!=null&&s.has(this.GRAPH_NODE)||s==null||s.set(this.GRAPH_NODE,new Map),s==null||(h=s.get(this.GRAPH_NODE))===null||h===void 0||h.set(t,!0)}return[u,f,l,c].forEach(function(d){return d.set(t,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(t){var n=this;if(this.hasNode(t)){var a=function(g){n.removeEdge(g.v,g.w,g.name)},i=this.inEdgesMap,o=this.outEdgesMap,A=this.predecessorsMap,s=this.successorsMap,u=this.nodesLabelMap;if(this.isCompound()){var f,l,c;this.removeFromParentsChildList(t),(f=this.parentMap)===null||f===void 0||f.delete(t),(l=this.children(t))===null||l===void 0||l.forEach(function(v){return n.setParent(v)}),(c=this.childrenMap)===null||c===void 0||c.delete(t)}var h=i.get(t),d=o.get(t);Array.from(h.values()).forEach(function(v){return a(v)}),Array.from(d.values()).forEach(function(v){return a(v)}),u.delete(t),i.delete(t),o.delete(t),A.delete(t),s.delete(t),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(t,n,a,i){var o,A,s=I2(this.isDirected(),t,n,i),u=by(this.isDirected(),s),f=s.v,l=s.w;if(this.edgesLabelsMap.has(u))return this.edgesLabelsMap.set(u,a),this;if(i!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(f),this.setNode(l),this.edgesLabelsMap.set(u,a||this.defaultEdgeLabelFn(f,l,i)),Object.freeze(s),this.edgesMap.set(u,s);var c=this.predecessorsMap.get(l),h=this.successorsMap.get(f);return S2(c,f),S2(h,l),(o=this.inEdgesMap.get(l))===null||o===void 0||o.set(u,s),(A=this.outEdgesMap.get(f))===null||A===void 0||A.set(u,s),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(t,n,a){var i=kU(this.isDirected(),t,n,a),o=this.edgesMap.get(i);if(o){var A=I2(this.isDirected(),t,n,a),s=A.v,u=A.w;this.edgesLabelsMap.delete(i),this.edgesMap.delete(i);var f=this.predecessorsMap.get(u),l=this.successorsMap.get(s);M2(f,s),M2(l,u),this.inEdgesMap.get(u).delete(i),this.outEdgesMap.get(s).delete(i),this.edgeCountNum-=1}return this}}]),r}();ks.fromJSON=nJ;function b1(r){"@babel/helpers - typeof";return b1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b1(r)}function sJ(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function O2(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function uJ(r,e,t){return e&&O2(r.prototype,e),t&&O2(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function vs(){return typeof Reflect<"u"&&Reflect.get?vs=Reflect.get:vs=function(e,t,n){var a=fJ(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},vs.apply(this,arguments)}function fJ(r,e){for(;!Object.prototype.hasOwnProperty.call(r,e)&&(r=Mo(r),r!==null););return r}function lJ(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&x1(r,e)}function x1(r,e){return x1=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},x1(r,e)}function cJ(r){var e=vJ();return function(){var n=Mo(r),a;if(e){var i=Mo(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return hJ(this,a)}}function hJ(r,e){if(e&&(b1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dJ(r)}function dJ(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function vJ(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Mo(r){return Mo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Mo(r)}var gJ=function(r){lJ(t,r);var e=cJ(t);function t(){var n;sJ(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i)),n.eventPool={},n}return uJ(t,[{key:"appendEvent",value:function(a,i){this.eventPool[a]||(this.eventPool[a]=[]),this.eventPool[a].push(i)}},{key:"removeEvent",value:function(a,i){if(this.eventPool[a]){var o=this.eventPool[a].indexOf(i);o>-1&&this.eventPool[a].splice(o,1)}}},{key:"emitEvent",value:function(a){for(var i=arguments.length,o=new Array(i>1?i-1:0),A=1;A<i;A++)o[A-1]=arguments[A];this.eventPool[a]&&this.eventPool[a].forEach(function(s){s.apply(void 0,o)})}},{key:"setNode",value:function(a,i){return vs(Mo(t.prototype),"setNode",this).call(this,a,i),this.emitEvent("nodeAdd",a,i),this}},{key:"removeNode",value:function(a){return vs(Mo(t.prototype),"removeNode",this).call(this,a),this.emitEvent("nodeRemove",a),this}},{key:"setEdge",value:function(a,i,o,A){return vs(Mo(t.prototype),"setEdge",this).call(this,a,i,o,A),this.emitEvent("edgeAdd",a,i,o,A),this}},{key:"removeEdge",value:function(a,i,o){return vs(Mo(t.prototype),"removeEdge",this).call(this,a,i,o),this.emitEvent("edgeRemove",a,i,o),this}}]),t}(ks);function U2(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function pJ(r,e,t){return e&&U2(r.prototype,e),t&&U2(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function yJ(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}var PU=pJ(function r(){var e=this;yJ(this,r),this.arr=[],this.keyIndice=new Map,this.size=function(){return e.arr.length},this.keys=function(){return e.arr.map(function(t){return t.key})},this.has=function(t){return e.keyIndice.has(t)},this.priority=function(t){var n=e.keyIndice.get(t);if(n!==void 0)return e.arr[n].priority},this.swap=function(t,n){var a=e.arr,i=e.keyIndice,o=[a[t],a[n]],A=o[0],s=o[1];a[t]=s,a[n]=A,i.set(A.key,n),i.set(s.key,t)},this.innerDecrease=function(t){for(var n=e.arr,a=n[t].priority,i,o=t;o!==0;){var A;if(i=o>>1,((A=n[i])===null||A===void 0?void 0:A.priority)<a)break;e.swap(o,i),o=i}},this.heapify=function(t){var n=e.arr,a=t<<1,i=a+1,o=t;a<n.length&&(o=n[a].priority<n[o].priority?a:o,i<n.length&&(o=n[i].priority<n[o].priority?i:o),o!==t&&(e.swap(t,o),e.heapify(o)))},this.min=function(){if(e.size()===0)throw new Error("Queue underflow");return e.arr[0].key},this.add=function(t,n){var a=e.keyIndice,i=e.arr;if(!a.has(t)){var o=i.length;return a.set(t,o),i.push({key:t,priority:n}),e.innerDecrease(o),!0}return!1},this.removeMin=function(){e.swap(0,e.arr.length-1);var t=e.arr.pop();return e.keyIndice.delete(t.key),e.heapify(0),t.key},this.decrease=function(t,n){if(!e.has(t))throw new Error("There's no key named ".concat(t));var a=e.keyIndice.get(t);if(n>e.arr[a].priority)throw new Error("New priority is greater than current priority.Key: ".concat(t," Old: + ").concat(e.arr[a].priority," New: ").concat(n));e.arr[a].priority=n,e.innerDecrease(a)}}),mJ=function(e,t){var n=new ks,a=new Map,i=new PU,o;function A(f){var l=f.v===o?f.w:f.v,c=i.priority(l);if(c!==void 0){var h=t(f);h<c&&(a.set(l,o),i.decrease(l,h))}}if(e.nodeCount()===0)return n;e.nodes().forEach(function(f){i.add(f,Number.POSITIVE_INFINITY),n.setNode(f)}),i.decrease(e.nodes()[0],0);for(var s=!1;i.size()>0;){var u;if(o=i.removeMin(),a.has(o))n.setEdge(o,a.get(o));else{if(s)throw new Error("Input graph is not connected: "+e.graph());s=!0}(u=e.nodeEdges(o))===null||u===void 0||u.forEach(A)}return n},wJ=function(e){var t=new Set,n=[],a=e.nodes();return a.forEach(function(i){for(var o=[],A=[i];A.length>0;){var s=A.pop();if(!t.has(s)){var u,f;t.add(s),o.push(s),(u=e.successors(s))===null||u===void 0||u.forEach(function(l){return A.push(l)}),(f=e.predecessors(s))===null||f===void 0||f.forEach(function(l){return A.push(l)})}}o.length&&n.push(o)}),n},BJ=function r(e,t,n,a,i,o){a.includes(t)||(a.push(t),n||o.push(t),i(t).forEach(function(A){return r(e,A,n,a,i,o)}),n&&o.push(t))},jB=function(e,t,n){var a=Array.isArray(t)?t:[t],i=function(u){return e.isDirected()?e.successors(u):e.neighbors(u)},o=[],A=[];return a.forEach(function(s){if(e.hasNode(s))BJ(e,s,n==="post",A,i,o);else throw new Error("Graph does not have node: "+s)}),o};function EJ(r,e){return _J(r)||CJ(r,e)||xJ(r,e)||bJ()}function bJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xJ(r,e){if(r){if(typeof r=="string")return N2(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return N2(r,e)}}function N2(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function CJ(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],a=!0,i=!1,o,A;try{for(t=t.call(r);!(a=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));a=!0);}catch(s){i=!0,A=s}finally{try{!a&&t.return!=null&&t.return()}finally{if(i)throw A}}return n}}function _J(r){if(Array.isArray(r))return r}var SJ=function(){return 1},QU=function(e,t,n,a){return MJ(e,t,n||SJ,a||function(i){return e.outEdges(i)})},MJ=function(e,t,n,a){var i=new Map,o=new PU,A,s,u=function(c){var h=c.v!==A?c.v:c.w,d=i.get(h),v=n(c),g=s.distance+v;if(v<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+c+" Weight: "+v);g<d.distance&&(d.distance=g,d.predecessor=A,o.decrease(h,g))};for(e.nodes().forEach(function(l){var c=l===t?0:Number.POSITIVE_INFINITY;i.set(l,{distance:c}),o.add(l,c)});o.size()>0&&(A=o.removeMin(),s=i.get(A),!(s&&s.distance===Number.POSITIVE_INFINITY));)a(A).forEach(u);var f={};return Array.from(i.entries()).forEach(function(l){var c=EJ(l,2),h=c[0],d=c[1];return f[String(h)]=d,f}),f},IJ=function(e,t,n){var a={};return e.nodes().forEach(function(i){return a[String(i)]=QU(e,i,t,n),a}),a},RU=function(e){var t=0,n=[],a=new Map,i=[];function o(A){var s,u={onStack:!0,lowlink:t,index:t};if(a.set(A,u),t+=1,n.push(A),(s=e.successors(A))===null||s===void 0||s.forEach(function(h){var d;if(a.has(h)){if(!((d=a.get(h))===null||d===void 0)&&d.onStack){var g=a.get(h);u.lowlink=Math.min(u.lowlink,g.index)}}else{o(h);var v=a.get(h);u.lowlink=Math.min(u.lowlink,v.lowlink)}}),u.lowlink===u.index){var f=[],l;do{l=n.pop();var c=a.get(l);c.onStack=!1,f.push(l)}while(A!==l);i.push(f)}}return e.nodes().forEach(function(A){a.has(A)||o(A)}),i},TJ=function(e){return RU(e).filter(function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})};function C1(r){"@babel/helpers - typeof";return C1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C1(r)}function k2(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function FJ(r,e,t){return e&&k2(r.prototype,e),t&&k2(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function LJ(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function DJ(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&oc(r,e)}function OJ(r){var e=HU();return function(){var n=Ac(r),a;if(e){var i=Ac(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return UJ(this,a)}}function UJ(r,e){if(e&&(C1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NJ(r)}function NJ(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function _1(r){var e=typeof Map=="function"?new Map:void 0;return _1=function(n){if(n===null||!kJ(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,a)}function a(){return sv(n,arguments,Ac(this).constructor)}return a.prototype=Object.create(n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),oc(a,n)},_1(r)}function sv(r,e,t){return HU()?sv=Reflect.construct:sv=function(a,i,o){var A=[null];A.push.apply(A,i);var s=Function.bind.apply(a,A),u=new s;return o&&oc(u,o.prototype),u},sv.apply(null,arguments)}function HU(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function kJ(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function oc(r,e){return oc=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},oc(r,e)}function Ac(r){return Ac=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ac(r)}var S1=function(r){DJ(t,r);var e=OJ(t);function t(){return LJ(this,t),e.apply(this,arguments)}return FJ(t)}(_1(Error));function GU(r){var e=new Set,t=new Set,n=[];function a(i){if(t.has(i))throw new S1;if(!e.has(i)){var o;t.add(i),e.add(i),(o=r.predecessors(i))===null||o===void 0||o.forEach(a),t.delete(i),n.push(i)}}if(r.sinks().forEach(a),e.size!==r.nodeCount())throw new S1;return n}var PJ=function(e){try{GU(e)}catch(t){if(t instanceof S1)return!1;throw t}return!0},QJ=function(e,t){return jB(e,t,"post")},RJ=function(e,t){return jB(e,t,"pre")},HJ=function(){return 1};function GJ(r,e,t){return zJ(r,e||HJ,t||function(n){return r.outEdges(n)})}function zJ(r,e,t){var n={},a=r.nodes();return a.forEach(function(i){var o=String(i);n[o]={},n[o][o]={distance:0},a.forEach(function(A){i!==A&&(n[o][String(A)]={distance:Number.POSITIVE_INFINITY})}),t(i).forEach(function(A){var s=A.v===i?A.w:A.v,u=e(A);n[o][String(s)]={distance:u,predecessor:i}})}),a.forEach(function(i){var o=String(i),A=n[o];a.forEach(function(s){var u=String(s),f=n[u];a.forEach(function(l){var c=String(l),h=f[o],d=A[c],v=f[c],g=h.distance+d.distance;g<v.distance&&(v.distance=g,v.predecessor=d.predecessor)})})}),n}const KJ=Object.freeze(Object.defineProperty({__proto__:null,components:wJ,dfs:jB,dijkstra:QU,dijkstraAll:IJ,findCycles:TJ,floydWarshall:GJ,isAcyclic:PJ,postorder:QJ,preorder:RJ,prim:mJ,tarjan:RU,topsort:GU},Symbol.toStringTag,{value:"Module"}));var jJ=function(e,t){for(var n=e.nodes(),a=0;a<n.length;a++){var i=n[a];if(t.hasNode(i))return!0}return!1},zU=function(e,t){for(var n=e.edges(),a=0;a<n.length;a++){var i=n[a];if(t.hasEdge(i.v,i.w,i.name))return!0}return!1},KU=function(e,t){var n=e.nodes(),a=n.filter(function(i){return t.hasNode(i)});return a},jU=function(e,t){var n=e.edges(),a=n.filter(function(i){return t.hasEdge(i.v,i.w,i.name)});return a},$U=function(e,t){return e.isCompound()===t.isCompound()&&e.isDirected()===t.isDirected()&&e.isMultigraph()===t.isMultigraph()},ip=function(e,t){var n=KU(e,t);return n.length===e.nodes().length},$B=function(e,t){var n=jU(e,t);return n.length===e.edges().length},$J=function(e,t){return $U(e,t)&&e.nodeCount()===t.nodeCount()&&ip(e,t)&&e.edgeCount()===t.edgeCount()&&$B(e,t)},WJ=function(e,t){return ip(e,t)&&$B(e,t)};function VJ(r,e){return qJ(r)||ZJ(r,e)||YJ(r,e)||XJ()}function XJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YJ(r,e){if(r){if(typeof r=="string")return P2(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return P2(r,e)}}function P2(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function ZJ(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],a=!0,i=!1,o,A;try{for(t=t.call(r);!(a=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));a=!0);}catch(s){i=!0,A=s}finally{try{!a&&t.return!=null&&t.return()}finally{if(i)throw A}}return n}}function qJ(r){if(Array.isArray(r))return r}function JJ(r){return r instanceof ks}function Xv(r){if(r.isMultigraph())return!1;for(var e=r.edges(),t=new Map,n=0;n<e.length;n++){var a=e[n];if(a.v===a.w)return!1;var i=[a.v,a.w].sort(),o=VJ(i,2),A=o[0],s=o[1],u="".concat(A,"-").concat(s);if(t.has(u))return!1;t.set(u,!0)}return!0}function eee(r){return r.nodes().length===0}function tee(r){for(var e=r.edges(),t=0;t<e.length;t++){var n=e[t];if(n.v===n.w)return!0}return!1}const ree=Object.freeze(Object.defineProperty({__proto__:null,hasSelfLoop:tee,isGraph:JJ,isNullGraph:eee,isSimpleGraph:Xv},Symbol.toStringTag,{value:"Module"}));var nee=function(e,t){if(!Xv(e)||!Xv(t)||!ip(e,t)||zU(e,t))return!1;var n=e.nodeCount();return e.edgeCount()+t.edgeCount()===n*(n-1)/2};const aee=Object.freeze(Object.defineProperty({__proto__:null,containAllSameEdges:$B,containAllSameNodes:ip,containSameEdges:zU,containSameNodes:jJ,getSameEdges:jU,getSameNodes:KU,isGraphComplement:nee,isGraphContainsAnother:WJ,isGraphOptionSame:$U,isGraphSame:$J},Symbol.toStringTag,{value:"Module"}));var iee=function(e){if(!Xv(e))return null;for(var t=e.nodeCount(),n=new ks({compound:e.isCompound(),directed:e.isDirected(),multigraph:e.isMultigraph()}),a=e.nodes(),i=0;i<t;i++){var o=a[i];n.setNode(o,e.node(o));for(var A=i+1;A<t;A++){var s=a[A];e.hasEdge(o,s)||n.setEdge(o,s)}}return n};const oee=Object.freeze(Object.defineProperty({__proto__:null,getGraphComplement:iee},Symbol.toStringTag,{value:"Module"})),Aee=Object.freeze(Object.defineProperty({__proto__:null,Graph:ks,GraphWithEvent:gJ,algorithm:KJ,comparision:aee,essence:ree,generate:oee},Symbol.toStringTag,{value:"Module"})),op=Zi(Aee);var WU=we&&we.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),see=we&&we.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(zB,"__esModule",{value:!0});var uee=see(KB),fee=op,lee=function(r){WU(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(uee.default),cee=function(r){WU(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(fee.Graph),hee=function(){return 1},dee=function(r,e){var t;if(r.nodeCount()<=1)return[];var n=gee(r,e||hee),a=vee(n.graph,n.buckets,n.zeroIdx);return(t=a.map(function(i){return r.outEdges(i.v,i.w)}))===null||t===void 0?void 0:t.flat()},vee=function(r,e,t){for(var n=[],a=e[e.length-1],i=e[0],o;r.nodeCount();){for(;o=i.dequeue();)xy(r,e,t,o);for(;o=a.dequeue();)xy(r,e,t,o);if(r.nodeCount()){for(var A=e.length-2;A>0;--A)if(o=e[A].dequeue(),o){n=n.concat(xy(r,e,t,o,!0));break}}}return n},xy=function(r,e,t,n,a){var i,o,A=[];return(i=r.inEdges(n.v))===null||i===void 0||i.forEach(function(s){var u=r.edge(s),f=r.node(s.v);a&&A.push({v:s.v,w:s.w,in:0,out:0}),f.out===void 0&&(f.out=0),f.out-=u,M1(e,t,f)}),(o=r.outEdges(n.v))===null||o===void 0||o.forEach(function(s){var u=r.edge(s),f=s.w,l=r.node(f);l.in===void 0&&(l.in=0),l.in-=u,M1(e,t,l)}),r.removeNode(n.v),a?A:void 0},gee=function(r,e){var t=new cee,n=0,a=0;r.nodes().forEach(function(u){t.setNode(u,{v:u,in:0,out:0})}),r.edges().forEach(function(u){var f=t.edge(u)||0,l=(e==null?void 0:e(u))||1,c=f+l;t.setEdge(u.v,u.w,c),a=Math.max(a,t.node(u.v).out+=l),n=Math.max(n,t.node(u.w).in+=l)});for(var i=[],o=a+n+3,A=0;A<o;A++)i.push(new lee);var s=n+1;return t.nodes().forEach(function(u){M1(i,s,t.node(u))}),{buckets:i,zeroIdx:s,graph:t}},M1=function(r,e,t){t.out?t.in?r[t.out-t.in+e].enqueue(t):r[r.length-1].enqueue(t):r[0].enqueue(t)};zB.default=dee;var pee=we&&we.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(GB,"__esModule",{value:!0});var yee=pee(zB),mee=function(r){var e=function(n){return function(a){var i;return((i=n.edge(a))===null||i===void 0?void 0:i.weight)||1}},t=r.graph().acyclicer==="greedy"?(0,yee.default)(r,e(r)):wee(r);t==null||t.forEach(function(n){var a=r.edge(n);r.removeEdgeObj(n),a.forwardName=n.name,a.reversed=!0,r.setEdge(n.w,n.v,a,"rev-".concat(Math.random()))})},wee=function(r){var e=[],t={},n={},a=function(i){var o;n[i]||(n[i]=!0,t[i]=!0,(o=r.outEdges(i))===null||o===void 0||o.forEach(function(A){t[A.w]?e.push(A):a(A.w)}),delete t[i])};return r.nodes().forEach(a),e},Bee=function(r){r.edges().forEach(function(e){var t=r.edge(e);if(t.reversed){r.removeEdgeObj(e);var n=t.forwardName;delete t.reversed,delete t.forwardName,r.setEdge(e.w,e.v,t,n)}})};GB.default={run:mee,undo:Bee};var WB={},Ma={},Po={},Eee=we&&we.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Po,"__esModule",{value:!0});Po.Graph=void 0;var bee=op,xee=function(r){Eee(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(bee.Graph);Po.Graph=xee;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.minBy=r.notime=r.time=r.partition=r.maxRank=r.addBorderNode=r.removeEmptyRanks=r.normalizeRanks=r.buildLayerMatrix=r.intersectRect=r.predecessorWeights=r.successorWeights=r.zipObject=r.asNonCompoundGraph=r.simplify=r.addDummyNode=void 0;var e=zr(),t=Po,n=function(w,B){return Number(w)-Number(B)},a=function(w,B,E,b){var C;do C="".concat(b).concat(Math.random());while(w.hasNode(C));return E.dummy=B,w.setNode(C,E),C};r.addDummyNode=a;var i=function(w){var B=new t.Graph().setGraph(w.graph());return w.nodes().forEach(function(E){B.setNode(E,w.node(E))}),w.edges().forEach(function(E){var b=B.edgeFromArgs(E.v,E.w)||{weight:0,minlen:1},C=w.edge(E);B.setEdge(E.v,E.w,{weight:b.weight+C.weight,minlen:Math.max(b.minlen,C.minlen)})}),B};r.simplify=i;var o=function(w){var B=new t.Graph({multigraph:w.isMultigraph()}).setGraph(w.graph());return w.nodes().forEach(function(E){var b;!((b=w.children(E))===null||b===void 0)&&b.length||B.setNode(E,w.node(E))}),w.edges().forEach(function(E){B.setEdgeObj(E,w.edge(E))}),B};r.asNonCompoundGraph=o;var A=function(w,B){return w==null?void 0:w.reduce(function(E,b,C){return E[b]=B[C],E},{})};r.zipObject=A;var s=function(w){var B={};return w.nodes().forEach(function(E){var b,C={};(b=w.outEdges(E))===null||b===void 0||b.forEach(function(_){var x;C[_.w]=(C[_.w]||0)+(((x=w.edge(_))===null||x===void 0?void 0:x.weight)||0)}),B[E]=C}),B};r.successorWeights=s;var u=function(w){var B=w.nodes(),E=B.map(function(b){var C,_={};return(C=w.inEdges(b))===null||C===void 0||C.forEach(function(x){_[x.v]=(_[x.v]||0)+w.edge(x).weight}),_});return(0,r.zipObject)(B,E)};r.predecessorWeights=u;var f=function(w,B){var E=Number(w.x),b=Number(w.y),C=Number(B.x)-E,_=Number(B.y)-b,x=Number(w.width)/2,M=Number(w.height)/2;if(!C&&!_)return{x:0,y:0};var S,I;return Math.abs(_)*x>Math.abs(C)*M?(_<0&&(M=-M),S=M*C/_,I=M):(C<0&&(x=-x),S=x,I=x*_/C),{x:E+S,y:b+I}};r.intersectRect=f;var l=function(w){for(var B=[],E=(0,r.maxRank)(w)+1,b=0;b<E;b++)B.push([]);w.nodes().forEach(function(C){var _=w.node(C);if(_){var x=_.rank;x!==void 0&&B[x]&&B[x].push(C)}});for(var b=0;b<E;b++)B[b]=B[b].sort(function(_,x){var M,S;return n((M=w.node(_))===null||M===void 0?void 0:M.order,(S=w.node(x))===null||S===void 0?void 0:S.order)});return B};r.buildLayerMatrix=l;var c=function(w){var B=w.nodes().filter(function(b){var C;return((C=w.node(b))===null||C===void 0?void 0:C.rank)!==void 0}).map(function(b){return w.node(b).rank}),E=Math.min.apply(Math,B);w.nodes().forEach(function(b){var C=w.node(b);C.hasOwnProperty("rank")&&E!==1/0&&(C.rank-=E)})};r.normalizeRanks=c;var h=function(w){var B=w.nodes(),E=B.filter(function(I){var D;return((D=w.node(I))===null||D===void 0?void 0:D.rank)!==void 0}).map(function(I){return w.node(I).rank}),b=Math.min.apply(Math,E),C=[];B.forEach(function(I){var D,O=(((D=w.node(I))===null||D===void 0?void 0:D.rank)||0)-b;C[O]||(C[O]=[]),C[O].push(I)});for(var _=0,x=w.graph().nodeRankFactor||0,M=0;M<C.length;M++){var S=C[M];S===void 0?M%x!==0&&(_-=1):_&&(S==null||S.forEach(function(I){var D=w.node(I);D&&(D.rank=D.rank||0,D.rank+=_)}))}};r.removeEmptyRanks=h;var d=function(w,B,E,b){var C={width:0,height:0};return(0,e.isNumber)(E)&&(0,e.isNumber)(b)&&(C.rank=E,C.order=b),(0,r.addDummyNode)(w,"border",C,B)};r.addBorderNode=d;var v=function(w){var B;return w.nodes().forEach(function(E){var b,C=(b=w.node(E))===null||b===void 0?void 0:b.rank;C!==void 0&&(B===void 0||C>B)&&(B=C)}),B||(B=0),B};r.maxRank=v;var g=function(w,B){var E={lhs:[],rhs:[]};return w==null||w.forEach(function(b){B(b)?E.lhs.push(b):E.rhs.push(b)}),E};r.partition=g;var p=function(w,B){var E=Date.now();try{return B()}finally{console.log("".concat(w," time: ").concat(Date.now()-E,"ms"))}};r.time=p;var y=function(w,B){return B()};r.notime=y;var m=function(w,B){return w.reduce(function(E,b){var C=B(E),_=B(b);return C>_?b:E})};r.minBy=m})(Ma);Object.defineProperty(WB,"__esModule",{value:!0});var Cee=Ma,_ee=function(r){r.graph().dummyChains=[],r.edges().forEach(function(e){return See(r,e)})},See=function(r,e){var t=e.v,n=r.node(t).rank,a=e.w,i=r.node(a).rank,o=e.name,A=r.edge(e),s=A.labelRank;if(i!==n+1){r.removeEdgeObj(e);var u=r.graph(),f,l,c;for(c=0,++n;n<i;++c,++n)A.points=[],l={edgeLabel:A,width:0,height:0,edgeObj:e,rank:n},f=(0,Cee.addDummyNode)(r,"edge",l,"_d"),n===s&&(l.width=A.width,l.height=A.height,l.dummy="edge-label",l.labelpos=A.labelpos),r.setEdge(t,f,{weight:A.weight},o),c===0&&(u.dummyChains||(u.dummyChains=[]),u.dummyChains.push(f)),t=f;r.setEdge(t,a,{weight:A.weight},o)}},Mee=function(r){var e;(e=r.graph().dummyChains)===null||e===void 0||e.forEach(function(t){var n=r.node(t),a=n.edgeLabel,i;n.edgeObj&&r.setEdgeObj(n.edgeObj,a);for(var o=t;n.dummy;)i=r.successors(o)[0],r.removeNode(o),a.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(a.x=n.x,a.y=n.y,a.width=n.width,a.height=n.height),o=i,n=r.node(o)})};WB.default={run:_ee,undo:Mee};var VB={},ci={};Object.defineProperty(ci,"__esModule",{value:!0});ci.slack=ci.longestPathWithLayer=ci.longestPath=void 0;var VU=function(r){var e,t={},n=function(a){var i,o=r.node(a);if(!o)return 0;if(t[a])return o.rank;t[a]=!0;var A;return(i=r.outEdges(a))===null||i===void 0||i.forEach(function(s){var u=n(s.w),f=r.edge(s).minlen,l=u-f;l&&(A===void 0||l<A)&&(A=l)}),A||(A=0),o.rank=A,A};(e=r.sources())===null||e===void 0||e.forEach(function(a){return n(a)})};ci.longestPath=VU;var XU=function(r){var e,t={},n,a=function(A){var s,u=r.node(A);if(!u)return 0;if(t[A])return u.rank;t[A]=!0;var f;return(s=r.outEdges(A))===null||s===void 0||s.forEach(function(l){var c=a(l.w),h=r.edge(l).minlen,d=c-h;d&&(f===void 0||d<f)&&(f=d)}),f||(f=0),(n===void 0||f<n)&&(n=f),u.rank=f,f};(e=r.sources())===null||e===void 0||e.forEach(function(A){r.node(A)&&a(A)}),n===void 0&&(n=0);var i={},o=function(A,s){var u,f=r.node(A),l=isNaN(f.layer)?s:f.layer;(f.rank===void 0||f.rank<l)&&(f.rank=l),!i[A]&&(i[A]=!0,(u=r.outEdges(A))===null||u===void 0||u.map(function(c){o(c.w,l+r.edge(c).minlen)}))};r.nodes().forEach(function(A){var s=r.node(A);s&&(isNaN(s.layer)?s.rank-=n:o(A,s.layer))})};ci.longestPathWithLayer=XU;var YU=function(r,e){return r.node(e.w).rank-r.node(e.v).rank-r.edge(e).minlen};ci.slack=YU;ci.default={longestPath:VU,longestPathWithLayer:XU,slack:YU};var MA={};Object.defineProperty(MA,"__esModule",{value:!0});MA.feasibleTreeWithLayer=MA.feasibleTree=void 0;var Fs=ci,Iee=Ma,ZU=Po,qU=function(r){var e=new ZU.Graph({directed:!1}),t=r.nodes()[0],n=r.nodeCount();e.setNode(t,{});for(var a,i;Tee(e,r)<n;)a=eN(e,r),i=e.hasNode(a.v)?(0,Fs.slack)(r,a):-(0,Fs.slack)(r,a),tN(e,r,i);return e};MA.feasibleTree=qU;var Tee=function(r,e){var t=function(n){e.nodeEdges(n).forEach(function(a){var i=a.v,o=n===i?a.w:i;!r.hasNode(o)&&!(0,Fs.slack)(e,a)&&(r.setNode(o,{}),r.setEdge(n,o,{}),t(o))})};return r.nodes().forEach(t),r.nodeCount()},JU=function(r){var e=new ZU.Graph({directed:!1}),t=r.nodes()[0],n=r.nodes().filter(function(o){return!!r.node(o)}).length;e.setNode(t,{});for(var a,i;Fee(e,r)<n;)a=eN(e,r),i=e.hasNode(a.v)?(0,Fs.slack)(r,a):-(0,Fs.slack)(r,a),tN(e,r,i);return e};MA.feasibleTreeWithLayer=JU;var Fee=function(r,e){var t=function(n){var a;(a=e.nodeEdges(n))===null||a===void 0||a.forEach(function(i){var o=i.v,A=n===o?i.w:o;!r.hasNode(A)&&(e.node(A).layer!==void 0||!(0,Fs.slack)(e,i))&&(r.setNode(A,{}),r.setEdge(n,A,{}),t(A))})};return r.nodes().forEach(t),r.nodeCount()},eN=function(r,e){return(0,Iee.minBy)(e.edges(),function(t){return r.hasNode(t.v)!==r.hasNode(t.w)?(0,Fs.slack)(e,t):1/0})},tN=function(r,e,t){r.nodes().forEach(function(n){e.node(n).rank||(e.node(n).rank=0),e.node(n).rank+=t})};MA.default={feasibleTree:qU,feasibleTreeWithLayer:JU};var rN={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.exchangeEdges=r.enterEdge=r.leaveEdge=r.initLowLimValues=r.calcCutValue=r.initCutValues=void 0;var e=MA,t=ci,n=Ma,a=op,i=a.algorithm.preorder,o=a.algorithm.postorder,A=function(m){var w=(0,n.simplify)(m);(0,t.longestPath)(w);var B=(0,e.feasibleTree)(w);(0,r.initLowLimValues)(B),(0,r.initCutValues)(B,w);for(var E,b;E=(0,r.leaveEdge)(B);)b=(0,r.enterEdge)(B,w,E),(0,r.exchangeEdges)(B,w,E,b)},s=function(m,w){var B=o(m,m.nodes());B=B==null?void 0:B.slice(0,(B==null?void 0:B.length)-1),B==null||B.forEach(function(E){u(m,w,E)})};r.initCutValues=s;var u=function(m,w,B){var E=m.node(B),b=E.parent;m.edgeFromArgs(B,b).cutvalue=(0,r.calcCutValue)(m,w,B)},f=function(m,w,B){var E,b=m.node(B),C=b.parent,_=!0,x=w.edgeFromArgs(B,C),M=0;return x||(_=!1,x=w.edgeFromArgs(C,B)),M=x.weight,(E=w.nodeEdges(B))===null||E===void 0||E.forEach(function(S){var I=S.v===B,D=I?S.w:S.v;if(D!==C){var O=I===_,F=w.edge(S).weight;if(M+=O?F:-F,p(m,B,D)){var U=m.edgeFromArgs(B,D).cutvalue;M+=O?-U:U}}}),M};r.calcCutValue=f;var l=function(m,w){w===void 0&&(w=m.nodes()[0]),c(m,{},1,w)};r.initLowLimValues=l;var c=function(m,w,B,E,b){var C,_=B,x=B,M=m.node(E);return w[E]=!0,(C=m.neighbors(E))===null||C===void 0||C.forEach(function(S){w[S]||(x=c(m,w,x,S,E))}),M.low=_,M.lim=x++,b?M.parent=b:delete M.parent,x},h=function(m){return m.edges().find(function(w){return m.edge(w).cutvalue<0})};r.leaveEdge=h;var d=function(m,w,B){var E=B.v,b=B.w;w.hasEdge(E,b)||(E=B.w,b=B.v);var C=m.node(E),_=m.node(b),x=C,M=!1;C.lim>_.lim&&(x=_,M=!0);var S=w.edges().filter(function(I){return M===y(m,m.node(I.v),x)&&M!==y(m,m.node(I.w),x)});return(0,n.minBy)(S,function(I){return(0,t.slack)(w,I)})};r.enterEdge=d;var v=function(m,w,B,E){var b=B.v,C=B.w;m.removeEdge(b,C),m.setEdge(E.v,E.w,{}),(0,r.initLowLimValues)(m),(0,r.initCutValues)(m,w),g(m,w)};r.exchangeEdges=v;var g=function(m,w){var B=m.nodes().find(function(b){var C;return!(!((C=w.node(b))===null||C===void 0)&&C.parent)}),E=i(m,B);E=E==null?void 0:E.slice(1),E==null||E.forEach(function(b){var C=m.node(b).parent,_=w.edgeFromArgs(b,C),x=!1;_||(_=w.edgeFromArgs(C,b),x=!0),w.node(b).rank=w.node(C).rank+(x?_.minlen:-_.minlen)})},p=function(m,w,B){return m.hasEdge(w,B)},y=function(m,w,B){return B.low<=w.lim&&w.lim<=B.lim};r.default=A})(rN);var Lee=we&&we.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(VB,"__esModule",{value:!0});var nN=ci,Dee=MA,Oee=Lee(rN),Uee=function(r){switch(r.graph().ranker){case"network-simplex":kee(r);break;case"tight-tree":Q2(r);break;case"longest-path":Nee(r);break;default:Q2(r)}},Nee=nN.longestPath,Q2=function(r){(0,nN.longestPathWithLayer)(r),(0,Dee.feasibleTreeWithLayer)(r)},kee=function(r){(0,Oee.default)(r)};VB.default=Uee;var XB={};Object.defineProperty(XB,"__esModule",{value:!0});var Pee=function(r){var e,t={},n=0,a=function(i){var o,A=n;(o=r.children(i))===null||o===void 0||o.forEach(a),t[i]={low:A,lim:n++}};return(e=r.children())===null||e===void 0||e.forEach(a),t},Qee=function(r,e,t,n){var a=[],i=[],o=Math.min(e[t].low,e[n].low),A=Math.max(e[t].lim,e[n].lim),s,u;s=t;do s=r.parent(s),a.push(s);while(s&&(e[s].low>o||A>e[s].lim));for(u=s,s=n;s&&s!==u;)i.push(s),s=r.parent(s);return{lca:u,path:a.concat(i.reverse())}},Ree=function(r){var e,t=Pee(r);(e=r.graph().dummyChains)===null||e===void 0||e.forEach(function(n){var a,i,o=n,A=r.node(o),s=A.edgeObj;if(s)for(var u=Qee(r,t,s.v,s.w),f=u.path,l=u.lca,c=0,h=f[c],d=!0;o!==s.w;){if(A=r.node(o),d){for(;h!==l&&((a=r.node(h))===null||a===void 0?void 0:a.maxRank)<A.rank;)c++,h=f[c];h===l&&(d=!1)}if(!d){for(;c<f.length-1&&((i=r.node(f[c+1]))===null||i===void 0?void 0:i.minRank)<=A.rank;)c++;h=f[c]}r.setParent(o,h),o=r.successors(o)[0]}})};XB.default=Ree;var YB={};Object.defineProperty(YB,"__esModule",{value:!0});var I1=Ma,Hee=function(r){var e,t=(0,I1.addDummyNode)(r,"root",{},"_root"),n=Gee(r),a=Math.max.apply(Math,Object.values(n));Math.abs(a)===1/0&&(a=1);var i=a-1,o=2*i+1;r.graph().nestingRoot=t,r.edges().forEach(function(s){r.edge(s).minlen*=o});var A=zee(r)+1;(e=r.children())===null||e===void 0||e.forEach(function(s){aN(r,t,o,A,i,n,s)}),r.graph().nodeRankFactor=o},aN=function(r,e,t,n,a,i,o){var A=r.children(o);if(!(A!=null&&A.length)){o!==e&&r.setEdge(e,o,{weight:0,minlen:t});return}var s=(0,I1.addBorderNode)(r,"_bt"),u=(0,I1.addBorderNode)(r,"_bb"),f=r.node(o);r.setParent(s,o),f.borderTop=s,r.setParent(u,o),f.borderBottom=u,A==null||A.forEach(function(l){aN(r,e,t,n,a,i,l);var c=r.node(l),h=c.borderTop?c.borderTop:l,d=c.borderBottom?c.borderBottom:l,v=c.borderTop?n:2*n,g=h!==d?1:a-i[o]+1;r.setEdge(s,h,{minlen:g,weight:v,nestingEdge:!0}),r.setEdge(d,u,{minlen:g,weight:v,nestingEdge:!0})}),r.parent(o)||r.setEdge(e,s,{weight:0,minlen:a+i[o]})},Gee=function(r){var e,t={},n=function(a,i){var o=r.children(a);o==null||o.forEach(function(A){return n(A,i+1)}),t[a]=i};return(e=r.children())===null||e===void 0||e.forEach(function(a){return n(a,1)}),t},zee=function(r){var e=0;return r.edges().forEach(function(t){e+=r.edge(t).weight}),e},Kee=function(r){var e=r.graph();e.nestingRoot&&r.removeNode(e.nestingRoot),delete e.nestingRoot,r.edges().forEach(function(t){var n=r.edge(t);n.nestingEdge&&r.removeEdgeObj(t)})};YB.default={run:Hee,cleanup:Kee};var ZB={};Object.defineProperty(ZB,"__esModule",{value:!0});var jee=Ma,$ee=function(r){var e,t=function(n){var a=r.children(n),i=r.node(n);if(a!=null&&a.length&&a.forEach(function(s){return t(s)}),i.hasOwnProperty("minRank")){i.borderLeft=[],i.borderRight=[];for(var o=i.minRank,A=i.maxRank+1;o<A;o+=1)R2(r,"borderLeft","_bl",n,i,o),R2(r,"borderRight","_br",n,i,o)}};(e=r.children())===null||e===void 0||e.forEach(function(n){return t(n)})},R2=function(r,e,t,n,a,i){var o={rank:i,borderType:e,width:0,height:0},A=a[e][i-1],s=(0,jee.addDummyNode)(r,"border",o,t);a[e][i]=s,r.setParent(s,n),A&&r.setEdge(A,s,{weight:1})};ZB.default=$ee;var qB={};Object.defineProperty(qB,"__esModule",{value:!0});var Wee=function(r){var e,t=(e=r.graph().rankdir)===null||e===void 0?void 0:e.toLowerCase();(t==="lr"||t==="rl")&&iN(r)},Vee=function(r){var e,t=(e=r.graph().rankdir)===null||e===void 0?void 0:e.toLowerCase();(t==="bt"||t==="rl")&&Xee(r),(t==="lr"||t==="rl")&&(Yee(r),iN(r))},iN=function(r){r.nodes().forEach(function(e){H2(r.node(e))}),r.edges().forEach(function(e){H2(r.edge(e))})},H2=function(r){var e=r.width;r.width=r.height,r.height=e},Xee=function(r){r.nodes().forEach(function(e){Cy(r.node(e))}),r.edges().forEach(function(e){var t,n=r.edge(e);(t=n.points)===null||t===void 0||t.forEach(function(a){return Cy(a)}),n.hasOwnProperty("y")&&Cy(n)})},Cy=function(r){r!=null&&r.y&&(r.y=-r.y)},Yee=function(r){r.nodes().forEach(function(e){_y(r.node(e))}),r.edges().forEach(function(e){var t,n=r.edge(e);(t=n.points)===null||t===void 0||t.forEach(function(a){return _y(a)}),n.hasOwnProperty("x")&&_y(n)})},_y=function(r){var e=r.x;r.x=r.y,r.y=e};qB.default={adjust:Wee,undo:Vee};var JB={},eE={};function oN(r){return[parseInt(r.substr(1,2),16),parseInt(r.substr(3,2),16),parseInt(r.substr(5,2),16)]}function Sy(r){var e=Math.round(r).toString(16);return e.length===1?"0"+e:e}function AN(r){return"#"+Sy(r[0])+Sy(r[1])+Sy(r[2])}var Zee=/rgba?\(([\s.,0-9]+)\)/;function qee(){var r=document.createElement("i");return r.title="Web Colour Picker",r.style.display="none",document.body.appendChild(r),r}var id;function sN(r){if(r[0]==="#"&&r.length===7)return r;id||(id=qee()),id.style.color=r;var e=document.defaultView.getComputedStyle(id,"").getPropertyValue("color"),t=Zee.exec(e),n=t[1].split(/\s*,\s*/).map(function(a){return Number(a)});return e=AN(n),e}function My(r,e,t,n){return r[n]+(e[n]-r[n])*t}function Jee(r,e){var t=isNaN(Number(e))||e<0?0:e>1?1:Number(e),n=r.length-1,a=Math.floor(n*t),i=n*t-a,o=r[a],A=a===n?o:r[a+1];return AN([My(o,A,i,0),My(o,A,i,1),My(o,A,i,2)])}function ete(r){var e=typeof r=="string"?r.split("-"):r,t=e.map(function(n){return oN(n.indexOf("#")===-1?sN(n):n)});return function(n){return Jee(t,n)}}var tte=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,rte=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,nte=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function ate(r){return/^[r,R,L,l]{1}[\s]*\(/.test(r)}function ite(r){if(ate(r)){var e,t=void 0;if(r[0]==="l"){var n=tte.exec(r),a=+n[1]+90;t=n[2],e="linear-gradient("+a+"deg, "}else if(r[0]==="r"){e="radial-gradient(";var n=rte.exec(r);t=n[4]}var i=t.match(nte);return i.forEach(function(o,A){var s=o.split(":");e+=s[1]+" "+Number(s[0])*100+"%",A!==i.length-1&&(e+=", ")}),e+=")",e}return r}function ote(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return Gw(n,t),Ji(r,n,e)}function Ate(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return zw(n,t),Ji(r,n,e)}function ste(r,e,t){var n=[0,0,0,0,0,0,0,0,0];return Kw(n,t),Ji(r,n,e)}function ute(r,e,t){return Ji(r,t,e)}function fte(r,e){for(var t=r?[].concat(r):[1,0,0,0,1,0,0,0,1],n=0,a=e.length;n<a;n++){var i=e[n];switch(i[0]){case"t":ote(t,t,[i[1],i[2]]);break;case"s":ste(t,t,[i[1],i[2]]);break;case"r":Ate(t,t,i[1]);break;case"m":ute(t,t,i[1]);break}}return t}function uN(r,e){return r[0]*e[1]-e[0]*r[1]}function lte(r,e,t){var n=_L(r,e),a=uN(r,e)>=0;return t?a?Math.PI*2-n:n:a?n:Math.PI*2-n}function cte(r,e,t){return t?(r[0]=e[1],r[1]=-1*e[0]):(r[0]=-1*e[1],r[1]=e[0]),r}function pf(r){return r.map(function(e){return Array.isArray(e)?[].concat(e):e})}function hte(r,e){if(e==="off")return pf(r);var t=typeof e=="number"&&e>=1?Math.pow(10,e):1;return r.map(function(n){var a=n.slice(1).map(Number).map(function(i){return e?Math.round(i*t)/t:Math.round(i)});return[n[0]].concat(a)})}function dte(r,e){return e===void 0&&(e="off"),hte(r,e).map(function(t){return t[0]+t.slice(1).join(" ")}).join("")}var fN={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function vte(r,e,t){if(r[t].length>7){r[t].shift();for(var n=r[t],a=t;n.length;)e[t]="A",r.splice(a+=1,0,["C"].concat(n.splice(0,6)));r.splice(t,1)}}var Fl={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function lN(r){return Array.isArray(r)&&r.every(function(e){var t=e[0].toLowerCase();return Fl[t]===e.length-1&&"achlmqstvz".includes(t)})}function cN(r){return lN(r)&&r.every(function(e){var t=e[0];return t===t.toUpperCase()})}function hN(r){return cN(r)&&r.every(function(e){var t=e[0];return"ACLMQZ".includes(t)})}function G2(r){for(var e=r.pathValue[r.segmentStart],t=e.toLowerCase(),n=r.data;n.length>=Fl[t]&&(t==="m"&&n.length>2?(r.segments.push([e].concat(n.splice(0,2))),t="l",e=e==="m"?"l":"L"):r.segments.push([e].concat(n.splice(0,Fl[t]))),!!Fl[t]););}function gte(r){var e=r.index,t=r.pathValue,n=t.charCodeAt(e);if(n===48){r.param=0,r.index+=1;return}if(n===49){r.param=1,r.index+=1;return}r.err='[path-util]: invalid Arc flag "'+t[e]+'", expecting 0 or 1 at index '+e}function pte(r){return r>=48&&r<=57||r===43||r===45||r===46}function uu(r){return r>=48&&r<=57}function yte(r){var e=r.max,t=r.pathValue,n=r.index,a=n,i=!1,o=!1,A=!1,s=!1,u;if(a>=e){r.err="[path-util]: Invalid path value at index "+a+', "pathValue" is missing param';return}if(u=t.charCodeAt(a),(u===43||u===45)&&(a+=1,u=t.charCodeAt(a)),!uu(u)&&u!==46){r.err="[path-util]: Invalid path value at index "+a+', "'+t[a]+'" is not a number';return}if(u!==46){if(i=u===48,a+=1,u=t.charCodeAt(a),i&&a<e&&u&&uu(u)){r.err="[path-util]: Invalid path value at index "+n+', "'+t[n]+'" illegal number';return}for(;a<e&&uu(t.charCodeAt(a));)a+=1,o=!0;u=t.charCodeAt(a)}if(u===46){for(s=!0,a+=1;uu(t.charCodeAt(a));)a+=1,A=!0;u=t.charCodeAt(a)}if(u===101||u===69){if(s&&!o&&!A){r.err="[path-util]: Invalid path value at index "+a+', "'+t[a]+'" invalid float exponent';return}if(a+=1,u=t.charCodeAt(a),(u===43||u===45)&&(a+=1),a<e&&uu(t.charCodeAt(a)))for(;a<e&&uu(t.charCodeAt(a));)a+=1;else{r.err="[path-util]: Invalid path value at index "+a+', "'+t[a]+'" invalid integer exponent';return}}r.index=a,r.param=+r.pathValue.slice(n,a)}function mte(r){var e=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return r===10||r===13||r===8232||r===8233||r===32||r===9||r===11||r===12||r===160||r>=5760&&e.includes(r)}function uv(r){for(var e=r.pathValue,t=r.max;r.index<t&&mte(e.charCodeAt(r.index));)r.index+=1}function wte(r){switch(r|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function Bte(r){return(r|32)===97}function Ete(r){var e=r.max,t=r.pathValue,n=r.index,a=t.charCodeAt(n),i=Fl[t[n].toLowerCase()];if(r.segmentStart=n,!wte(a)){r.err='[path-util]: Invalid path value "'+t[n]+'" is not a path command';return}if(r.index+=1,uv(r),r.data=[],!i){G2(r);return}for(;;){for(var o=i;o>0;o-=1){if(Bte(a)&&(o===3||o===4)?gte(r):yte(r),r.err.length)return;r.data.push(r.param),uv(r),r.index<e&&t.charCodeAt(r.index)===44&&(r.index+=1,uv(r))}if(r.index>=r.max||!pte(t.charCodeAt(r.index)))break}G2(r)}var bte=function(){function r(e){this.pathValue=e,this.segments=[],this.max=e.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return r}();function tE(r){if(lN(r))return pf(r);var e=new bte(r);for(uv(e);e.index<e.max&&!e.err.length;)Ete(e);return e.err?e.err:e.segments}function dN(r){if(cN(r))return pf(r);var e=tE(r),t=0,n=0,a=0,i=0;return e.map(function(o){var A=o.slice(1).map(Number),s=o[0],u=s.toUpperCase();if(s==="M")return t=A[0],n=A[1],a=t,i=n,["M",t,n];var f;if(s!==u)switch(u){case"A":f=[u,A[0],A[1],A[2],A[3],A[4],A[5]+t,A[6]+n];break;case"V":f=[u,A[0]+n];break;case"H":f=[u,A[0]+t];break;default:{var l=A.map(function(h,d){return h+(d%2?n:t)});f=[u].concat(l)}}else f=[u].concat(A);var c=f.length;switch(u){case"Z":t=a,n=i;break;case"H":t=f[1];break;case"V":n=f[1];break;default:t=f[c-2],n=f[c-1],u==="M"&&(a=t,i=n)}return f})}function xte(r,e){var t=r[0],n=e.x1,a=e.y1,i=e.x2,o=e.y2,A=r.slice(1).map(Number),s=r;if("TQ".includes(t)||(e.qx=null,e.qy=null),t==="H")s=["L",r[1],a];else if(t==="V")s=["L",n,r[1]];else if(t==="S"){var u=n*2-i,f=a*2-o;e.x1=u,e.y1=f,s=["C",u,f].concat(A)}else if(t==="T"){var l=n*2-e.qx,c=a*2-e.qy;e.qx=l,e.qy=c,s=["Q",l,c].concat(A)}else if(t==="Q"){var h=A[0],d=A[1];e.qx=h,e.qy=d}return s}function Ap(r){if(hN(r))return pf(r);for(var e=dN(r),t=P({},fN),n=0;n<e.length;n+=1){e[n]=xte(e[n],t);var a=e[n],i=a.length;t.x1=+a[i-2],t.y1=+a[i-1],t.x2=+a[i-4]||t.x1,t.y2=+a[i-3]||t.y1}return e}function Cte(r){return hN(r)&&r.every(function(e){var t=e[0];return"MC".includes(t)})}function od(r,e,t){var n=r*Math.cos(t)-e*Math.sin(t),a=r*Math.sin(t)+e*Math.cos(t);return{x:n,y:a}}function rE(r,e,t,n,a,i,o,A,s,u){var f=r,l=e,c=t,h=n,d=A,v=s,g=Math.PI*120/180,p=Math.PI/180*(+a||0),y=[],m,w,B,E,b;if(u)w=u[0],B=u[1],E=u[2],b=u[3];else{m=od(f,l,-p),f=m.x,l=m.y,m=od(d,v,-p),d=m.x,v=m.y;var C=(f-d)/2,_=(l-v)/2,x=C*C/(c*c)+_*_/(h*h);x>1&&(x=Math.sqrt(x),c*=x,h*=x);var M=c*c,S=h*h,I=(i===o?-1:1)*Math.sqrt(Math.abs((M*S-M*_*_-S*C*C)/(M*_*_+S*C*C)));E=I*c*_/h+(f+d)/2,b=I*-h*C/c+(l+v)/2,w=Math.asin(((l-b)/h*Math.pow(10,9)>>0)/Math.pow(10,9)),B=Math.asin(((v-b)/h*Math.pow(10,9)>>0)/Math.pow(10,9)),w=f<E?Math.PI-w:w,B=d<E?Math.PI-B:B,w<0&&(w=Math.PI*2+w),B<0&&(B=Math.PI*2+B),o&&w>B&&(w-=Math.PI*2),!o&&B>w&&(B-=Math.PI*2)}var D=B-w;if(Math.abs(D)>g){var O=B,F=d,U=v;B=w+g*(o&&B>w?1:-1),d=E+c*Math.cos(B),v=b+h*Math.sin(B),y=rE(d,v,c,h,a,0,o,F,U,[B,O,E,b])}D=B-w;var Q=Math.cos(w),N=Math.sin(w),R=Math.cos(B),J=Math.sin(B),re=Math.tan(D/4),ee=4/3*c*re,q=4/3*h*re,ve=[f,l],Me=[f+ee*N,l-q*Q],Re=[d+ee*J,v-q*R],tt=[d,v];if(Me[0]=2*ve[0]-Me[0],Me[1]=2*ve[1]-Me[1],u)return Me.concat(Re,tt,y);y=Me.concat(Re,tt,y);for(var st=[],at=0,Et=y.length;at<Et;at+=1)st[at]=at%2?od(y[at-1],y[at],p).y:od(y[at],y[at+1],p).x;return st}function _te(r,e,t,n,a,i){var o=.3333333333333333,A=2/3;return[o*r+A*t,o*e+A*n,o*a+A*t,o*i+A*n,a,i]}function Ha(r,e,t){var n=r[0],a=r[1],i=e[0],o=e[1];return[n+(i-n)*t,a+(o-a)*t]}function yf(r,e){return Math.sqrt((r[0]-e[0])*(r[0]-e[0])+(r[1]-e[1])*(r[1]-e[1]))}function sc(r,e,t,n,a){var i=yf([r,e],[t,n]),o={x:0,y:0};if(typeof a=="number")if(a<=0)o={x:r,y:e};else if(a>=i)o={x:t,y:n};else{var A=Ha([r,e],[t,n],a/i),s=A[0],u=A[1];o={x:s,y:u}}return{length:i,point:o,min:{x:Math.min(r,t),y:Math.min(e,n)},max:{x:Math.max(r,t),y:Math.max(e,n)}}}function z2(r,e,t,n){var a=.5,i=[r,e],o=[t,n],A=Ha(i,o,a),s=Ha(o,A,a),u=Ha(A,s,a),f=Ha(s,u,a),l=Ha(u,f,a),c=sc(i[0],i[1],A[0],A[1],u[0]).point,h=sc(l[0],l[1],f[0],f[1],s[0]).point;return[c.x,c.y,h.x,h.y,t,n]}function Ste(r,e){var t=r[0],n=r.slice(1).map(Number),a=n[0],i=n[1],o,A=e.x1,s=e.y1,u=e.x,f=e.y;switch("TQ".includes(t)||(e.qx=null,e.qy=null),t){case"M":return e.x=a,e.y=i,r;case"A":return o=[A,s].concat(n),["C"].concat(rE(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9]));case"Q":return e.qx=a,e.qy=i,o=[A,s].concat(n),["C"].concat(_te(o[0],o[1],o[2],o[3],o[4],o[5]));case"L":return["C"].concat(z2(A,s,a,i));case"Z":return A===u&&s===f?["C",A,s,u,f,u,f]:["C"].concat(z2(A,s,u,f))}return r}function vN(r,e){if(e===void 0&&(e=!1),Cte(r)){var t=pf(r);return e?[t,[]]:t}for(var n=Ap(r),a=P({},fN),i=[],o="",A=n.length,s,u,f=[],l=0;l<A;l+=1){n[l]&&(o=n[l][0]),i[l]=o;var c=Ste(n[l],a);n[l]=c,vte(n,i,l),A=n.length,o==="Z"&&f.push(l),s=n[l],u=s.length,a.x1=+s[u-2],a.y1=+s[u-1],a.x2=+s[u-4]||a.x1,a.y2=+s[u-3]||a.y1}return e?[n,f]:n}function Mte(r){var e=r.slice(1).map(function(t,n,a){return n?a[n-1].slice(-2).concat(t.slice(1)):r[0].slice(1).concat(t.slice(1))}).map(function(t){return t.map(function(n,a){return t[t.length-a-2*(1-a%2)]})}).reverse();return[["M"].concat(e[0].slice(0,2))].concat(e.map(function(t){return["C"].concat(t.slice(2))}))}function K2(r,e){var t=r.x,n=r.y,a=e.x,i=e.y,o=t*a+n*i,A=Math.sqrt((Math.pow(t,2)+Math.pow(n,2))*(Math.pow(a,2)+Math.pow(i,2))),s=t*i-n*a<0?-1:1,u=s*Math.acos(o/A);return u}function Ite(r,e,t,n,a,i,o,A,s,u){var f=Math.abs,l=Math.sin,c=Math.cos,h=Math.sqrt,d=Math.PI,v=f(t),g=f(n),p=(a%360+360)%360,y=p*(d/180);if(r===A&&e===s)return{x:r,y:e};if(v===0||g===0)return sc(r,e,A,s,u).point;var m=(r-A)/2,w=(e-s)/2,B={x:c(y)*m+l(y)*w,y:-l(y)*m+c(y)*w},E=Math.pow(B.x,2)/Math.pow(v,2)+Math.pow(B.y,2)/Math.pow(g,2);E>1&&(v*=h(E),g*=h(E));var b=Math.pow(v,2)*Math.pow(g,2)-Math.pow(v,2)*Math.pow(B.y,2)-Math.pow(g,2)*Math.pow(B.x,2),C=Math.pow(v,2)*Math.pow(B.y,2)+Math.pow(g,2)*Math.pow(B.x,2),_=b/C;_=_<0?0:_;var x=(i!==o?1:-1)*h(_),M={x:x*(v*B.y/g),y:x*(-(g*B.x)/v)},S={x:c(y)*M.x-l(y)*M.y+(r+A)/2,y:l(y)*M.x+c(y)*M.y+(e+s)/2},I={x:(B.x-M.x)/v,y:(B.y-M.y)/g},D=K2({x:1,y:0},I),O={x:(-B.x-M.x)/v,y:(-B.y-M.y)/g},F=K2(I,O);!o&&F>0?F-=2*d:o&&F<0&&(F+=2*d),F%=2*d;var U=D+F*u,Q=v*c(U),N=g*l(U),R={x:c(y)*Q-l(y)*N+S.x,y:l(y)*Q+c(y)*N+S.y};return R}function Tte(r,e,t,n,a,i,o,A,s,u,f){var l,c=f.bbox,h=c===void 0?!0:c,d=f.length,v=d===void 0?!0:d,g=f.sampleSize,p=g===void 0?30:g,y=typeof u=="number",m=r,w=e,B=0,E=[m,w,B],b=[m,w],C=0,_={x:0,y:0},x=[{x:m,y:w}];y&&u<=0&&(_={x:m,y:w});for(var M=0;M<=p;M+=1){if(C=M/p,l=Ite(r,e,t,n,a,i,o,A,s,C),m=l.x,w=l.y,h&&x.push({x:m,y:w}),v&&(B+=yf(b,[m,w])),b=[m,w],y&&B>=u&&u>E[2]){var S=(B-u)/(B-E[2]);_={x:b[0]*(1-S)+E[0]*S,y:b[1]*(1-S)+E[1]*S}}E=[m,w,B]}return y&&u>=B&&(_={x:A,y:s}),{length:B,point:_,min:{x:Math.min.apply(null,x.map(function(I){return I.x})),y:Math.min.apply(null,x.map(function(I){return I.y}))},max:{x:Math.max.apply(null,x.map(function(I){return I.x})),y:Math.max.apply(null,x.map(function(I){return I.y}))}}}function Fte(r,e,t,n,a,i,o,A,s){var u=1-s;return{x:Math.pow(u,3)*r+3*Math.pow(u,2)*s*t+3*u*Math.pow(s,2)*a+Math.pow(s,3)*o,y:Math.pow(u,3)*e+3*Math.pow(u,2)*s*n+3*u*Math.pow(s,2)*i+Math.pow(s,3)*A}}function gN(r,e,t,n,a,i,o,A,s,u){var f,l=u.bbox,c=l===void 0?!0:l,h=u.length,d=h===void 0?!0:h,v=u.sampleSize,g=v===void 0?10:v,p=typeof s=="number",y=r,m=e,w=0,B=[y,m,w],E=[y,m],b=0,C={x:0,y:0},_=[{x:y,y:m}];p&&s<=0&&(C={x:y,y:m});for(var x=0;x<=g;x+=1){if(b=x/g,f=Fte(r,e,t,n,a,i,o,A,b),y=f.x,m=f.y,c&&_.push({x:y,y:m}),d&&(w+=yf(E,[y,m])),E=[y,m],p&&w>=s&&s>B[2]){var M=(w-s)/(w-B[2]);C={x:E[0]*(1-M)+B[0]*M,y:E[1]*(1-M)+B[1]*M}}B=[y,m,w]}return p&&s>=w&&(C={x:o,y:A}),{length:w,point:C,min:{x:Math.min.apply(null,_.map(function(S){return S.x})),y:Math.min.apply(null,_.map(function(S){return S.y}))},max:{x:Math.max.apply(null,_.map(function(S){return S.x})),y:Math.max.apply(null,_.map(function(S){return S.y}))}}}function Lte(r,e,t,n,a,i,o){var A=1-o;return{x:Math.pow(A,2)*r+2*A*o*t+Math.pow(o,2)*a,y:Math.pow(A,2)*e+2*A*o*n+Math.pow(o,2)*i}}function Dte(r,e,t,n,a,i,o,A){var s,u=A.bbox,f=u===void 0?!0:u,l=A.length,c=l===void 0?!0:l,h=A.sampleSize,d=h===void 0?10:h,v=typeof o=="number",g=r,p=e,y=0,m=[g,p,y],w=[g,p],B=0,E={x:0,y:0},b=[{x:g,y:p}];v&&o<=0&&(E={x:g,y:p});for(var C=0;C<=d;C+=1){if(B=C/d,s=Lte(r,e,t,n,a,i,B),g=s.x,p=s.y,f&&b.push({x:g,y:p}),c&&(y+=yf(w,[g,p])),w=[g,p],v&&y>=o&&o>m[2]){var _=(y-o)/(y-m[2]);E={x:w[0]*(1-_)+m[0]*_,y:w[1]*(1-_)+m[1]*_}}m=[g,p,y]}return v&&o>=y&&(E={x:a,y:i}),{length:y,point:E,min:{x:Math.min.apply(null,b.map(function(x){return x.x})),y:Math.min.apply(null,b.map(function(x){return x.y}))},max:{x:Math.max.apply(null,b.map(function(x){return x.x})),y:Math.max.apply(null,b.map(function(x){return x.y}))}}}function sp(r,e,t){for(var n,a,i,o,A,s,u=Ap(r),f=typeof e=="number",l,c=[],h,d=0,v=0,g=0,p=0,y,m=[],w=[],B=0,E={x:0,y:0},b=E,C=E,_=E,x=0,M=0,S=u.length;M<S;M+=1)y=u[M],h=y[0],l=h==="M",c=l?c:[d,v].concat(y.slice(1)),l?(g=y[1],p=y[2],E={x:g,y:p},b=E,B=0,f&&e<.001&&(_=E)):h==="L"?(n=sc(c[0],c[1],c[2],c[3],(e||0)-x),B=n.length,E=n.min,b=n.max,C=n.point):h==="A"?(a=Tte(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],(e||0)-x,t||{}),B=a.length,E=a.min,b=a.max,C=a.point):h==="C"?(i=gN(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],(e||0)-x,t||{}),B=i.length,E=i.min,b=i.max,C=i.point):h==="Q"?(o=Dte(c[0],c[1],c[2],c[3],c[4],c[5],(e||0)-x,t||{}),B=o.length,E=o.min,b=o.max,C=o.point):h==="Z"&&(c=[d,v,g,p],A=sc(c[0],c[1],c[2],c[3],(e||0)-x),B=A.length,E=A.min,b=A.max,C=A.point),f&&x<e&&x+B>=e&&(_=C),w.push(b),m.push(E),x+=B,s=h!=="Z"?y.slice(-2):[g,p],d=s[0],v=s[1];return f&&e>=x&&(_={x:d,y:v}),{length:x,point:_,min:{x:Math.min.apply(null,m.map(function(I){return I.x})),y:Math.min.apply(null,m.map(function(I){return I.y}))},max:{x:Math.max.apply(null,w.map(function(I){return I.x})),y:Math.max.apply(null,w.map(function(I){return I.y}))}}}function Ote(r,e){if(!r)return{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var t=sp(r,void 0,P(P({},e),{length:!1})),n=t.min,a=n.x,i=n.y,o=t.max,A=o.x,s=o.y,u=A-a,f=s-i;return{width:u,height:f,x:a,y:i,x2:A,y2:s,cx:a+u/2,cy:i+f/2,cz:Math.max(u,f)+Math.min(u,f)/2}}function Ll(r,e){return sp(r,void 0,P(P({},e),{bbox:!1,length:!0})).length}function Ute(r,e){if(!r)return{length:0,x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var t=sp(r,void 0,P(P({},e),{bbox:!0,length:!0})),n=t.length,a=t.min,i=a.x,o=a.y,A=t.max,s=A.x,u=A.y,f=s-i,l=u-o;return{length:n,width:f,height:l,x:i,y:o,x2:s,y2:u,cx:i+f/2,cy:o+l/2,cz:Math.max(f,l)+Math.min(f,l)/2}}function Nte(r){var e=r.length,t=e-1;return r.map(function(n,a){return r.map(function(i,o){var A=a+o,s;return o===0||r[A]&&r[A][0]==="M"?(s=r[A],["M"].concat(s.slice(-2))):(A>=e&&(A-=t),r[A])})})}function kte(r,e){var t=r.length-1,n=[],a=0,i=0,o=Nte(r);return o.forEach(function(A,s){r.slice(1).forEach(function(u,f){i+=yf(r[(s+f)%t].slice(-2),e[f%t].slice(-2))}),n[s]=i,i=0}),a=n.indexOf(Math.min.apply(null,n)),o[a]}function Pte(r,e,t,n,a,i,o,A){return 3*((A-e)*(t+a)-(o-r)*(n+i)+n*(r-a)-t*(e-i)+A*(a+r/3)-o*(i+e/3))/20}function pN(r){var e=0,t=0,n=0;return vN(r).map(function(a){var i;switch(a[0]){case"M":return e=a[1],t=a[2],0;default:var o=a.slice(1),A=o[0],s=o[1],u=o[2],f=o[3],l=o[4],c=o[5];return n=Pte(e,t,A,s,u,f,l,c),i=a.slice(-2),e=i[0],t=i[1],n}}).reduce(function(a,i){return a+i},0)}function Qte(r){return pN(r)>=0}function fv(r,e,t){return sp(r,e,P(P({},t),{bbox:!1,length:!0})).point}function Rte(r,e){var t=tE(r);if(typeof t=="string")throw TypeError(t);var n=t.slice(),a=Ll(n),i=n.length-1,o=0,A=0,s=t[0],u=s.slice(-2),f=u[0],l=u[1],c={x:f,y:l};if(i<=0||!e||!Number.isFinite(e))return{segment:s,index:0,length:A,point:c,lengthAtSegment:o};if(e>=a)return n=t.slice(0,-1),o=Ll(n),A=a-o,{segment:t[i],index:i,length:A,lengthAtSegment:o};for(var h=[];i>0;)s=n[i],n=n.slice(0,-1),o=Ll(n),A=a-o,a=o,h.push({segment:s,index:i,length:A,lengthAtSegment:o}),i-=1;return h.find(function(d){var v=d.lengthAtSegment;return v<=e})}function Hte(r,e){for(var t=tE(r),n=Ap(t),a=Ll(t),i=function(B){var E=B.x-e.x,b=B.y-e.y;return E*E+b*b},o=8,A,s=0,u,f=0,l=1/0,c=0;c<=a;c+=o)A=fv(n,c),s=i(A),s<l&&(u=A,f=c,l=s);o/=2;for(var h,d,v=0,g=0,p=0,y=0;o>.5;)v=f-o,h=fv(n,v),p=i(h),g=f+o,d=fv(n,g),y=i(d),v>=0&&p<l?(u=h,f=v,l=p):g<=a&&y<l?(u=d,f=g,l=y):o/=2;var m=Rte(t,f),w=Math.sqrt(l);return{closest:u,distance:w,segment:m}}function Gte(r,e){var t=Hte(r,e).distance;return Math.abs(t)<.001}function zte(r,e){e===void 0&&(e=.5);var t=r.slice(0,2),n=r.slice(2,4),a=r.slice(4,6),i=r.slice(6,8),o=Ha(t,n,e),A=Ha(n,a,e),s=Ha(a,i,e),u=Ha(o,A,e),f=Ha(A,s,e),l=Ha(u,f,e);return[["C"].concat(o,u,l),["C"].concat(f,s,i)]}function j2(r){return r.map(function(e,t,n){var a=t&&n[t-1].slice(-2).concat(e.slice(1)),i=t?gN(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],{bbox:!1}).length:0,o;return t?o=i?zte(a):[e,e]:o=[e],{s:e,ss:o,l:i}})}function yN(r,e,t){var n=j2(r),a=j2(e),i=n.length,o=a.length,A=n.filter(function(g){return g.l}).length,s=a.filter(function(g){return g.l}).length,u=n.filter(function(g){return g.l}).reduce(function(g,p){var y=p.l;return g+y},0)/A||0,f=a.filter(function(g){return g.l}).reduce(function(g,p){var y=p.l;return g+y},0)/s||0,l=t||Math.max(i,o),c=[u,f],h=[l-i,l-o],d=0,v=[n,a].map(function(g,p){return g.l===l?g.map(function(y){return y.s}):g.map(function(y,m){return d=m&&h[p]&&y.l>=c[p],h[p]-=d?1:0,d?y.ss:[y.s]}).flat()});return v[0].length===v[1].length?v:yN(v[0],v[1],l)}var Kte=function(r){return r!==null&&typeof r!="function"&&isFinite(r.length)};const la=Kte;var jte=function(r,e){return la(r)?r.indexOf(e)>-1:!1};const Yv=jte;var $te=function(r,e){if(!la(r))return r;for(var t=[],n=0;n<r.length;n++){var a=r[n];e(a,n)&&t.push(a)}return t};const mN=$te;var Wte=function(r,e){return e===void 0&&(e=[]),mN(r,function(t){return!Yv(e,t)})};const Vte=Wte,Ia=function(r){return typeof r=="function"};var Xte=function(r){return r==null};const DA=Xte;var Yte={}.toString,Zte=function(r,e){return Yte.call(r)==="[object "+e+"]"};const to=Zte,on=function(r){return Array.isArray?Array.isArray(r):to(r,"Array")},up=function(r){var e=typeof r;return r!==null&&e==="object"||e==="function"};function tf(r,e){if(r){var t;if(on(r))for(var n=0,a=r.length;n<a&&(t=e(r[n],n),t!==!1);n++);else if(up(r)){for(var i in r)if(r.hasOwnProperty(i)&&(t=e(r[i],i),t===!1))break}}}var qte=Object.keys?function(r){return Object.keys(r)}:function(r){var e=[];return tf(r,function(t,n){Ia(r)&&n==="prototype"||e.push(n)}),e};const wN=qte;function BN(r,e){var t=wN(e),n=t.length;if(DA(r))return!n;for(var a=0;a<n;a+=1){var i=t[a];if(e[i]!==r[i]||!(i in r))return!1}return!0}var Jte=function(r){return typeof r=="object"&&r!==null};const Zv=Jte;var ere=function(r){if(!Zv(r)||!to(r,"Object"))return!1;if(Object.getPrototypeOf(r)===null)return!0;for(var e=r;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e};const rf=ere;function tre(r,e){if(!on(r))return null;var t;if(Ia(e)&&(t=e),rf(e)&&(t=function(a){return BN(a,e)}),t){for(var n=0;n<r.length;n+=1)if(t(r[n]))return r[n]}return null}function rre(r,e,t){t===void 0&&(t=0);for(var n=t;n<r.length;n++)if(e(r[n],n))return n;return-1}var nre=function(r,e){for(var t=null,n=0;n<r.length;n++){var a=r[n],i=a[e];if(!DA(i)){on(i)?t=i[0]:t=i;break}}return t};const are=nre;var ire=function(r){if(!on(r))return[];for(var e=[],t=0;t<r.length;t++)e=e.concat(r[t]);return e};const ore=ire;var EN=function(r,e){if(e===void 0&&(e=[]),!on(r))e.push(r);else for(var t=0;t<r.length;t+=1)EN(r[t],e);return e};const Are=EN,bN=function(r){if(on(r))return r.reduce(function(e,t){return Math.max(e,t)},r[0])},xN=function(r){if(on(r))return r.reduce(function(e,t){return Math.min(e,t)},r[0])};var sre=function(r){var e=r.filter(function(o){return!isNaN(o)});if(!e.length)return{min:0,max:0};if(on(r[0])){for(var t=[],n=0;n<r.length;n++)t=t.concat(r[n]);e=t}var a=bN(e),i=xN(e);return{min:i,max:a}};const ure=sre;var CN=Array.prototype,fre=CN.splice,lre=CN.indexOf,cre=function(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var n=0;n<e.length;n++)for(var a=e[n],i=-1;(i=lre.call(r,a))>-1;)fre.call(r,i,1);return r};const hre=cre;var dre=Array.prototype.splice,vre=function(e,t){if(!la(e))return[];for(var n=e?t.length:0,a=n-1;n--;){var i=void 0,o=t[n];(n===a||o!==i)&&(i=o,dre.call(e,o,1))}return e};const _N=vre;var gre=function(r,e,t){if(!on(r)&&!rf(r))return r;var n=t;return tf(r,function(a,i){n=e(n,a,i)}),n};const SN=gre;var pre=function(r,e){var t=[];if(!la(r))return t;for(var n=-1,a=[],i=r.length;++n<i;){var o=r[n];e(o,n,r)&&(t.push(o),a.push(n))}return _N(r,a),t};const yre=pre,IA=function(r){return to(r,"String")};function mre(r,e){var t;if(Ia(e))t=function(a,i){return e(a)-e(i)};else{var n=[];IA(e)?n.push(e):on(e)&&(n=e),t=function(a,i){for(var o=0;o<n.length;o+=1){var A=n[o];if(a[A]>i[A])return 1;if(a[A]<i[A])return-1}return 0}}return r.sort(t),r}function MN(r,e){e===void 0&&(e=new Map);var t=[];if(Array.isArray(r))for(var n=0,a=r.length;n<a;n++){var i=r[n];e.has(i)||(t.push(i),e.set(i,!0))}return t}var wre=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return MN([].concat.apply([],r))};const Bre=wre,Ere=function(r,e){for(var t=[],n={},a=0;a<r.length;a++){var i=r[a],o=i[e];if(!DA(o)){on(o)||(o=[o]);for(var A=0;A<o.length;A++){var s=o[A];n[s]||(t.push(s),n[s]=!0)}}}return t};function bre(r){if(la(r))return r[0]}function xre(r){if(la(r)){var e=r;return e[e.length-1]}}function Cre(r,e){return on(r)||IA(r)?r[0]===e:!1}function _re(r,e){return on(r)||IA(r)?r[r.length-1]===e:!1}var Sre=function(r,e){for(var t=0;t<r.length;t++)if(!e(r[t],t))return!1;return!0};const Mre=Sre;var Ire=function(r,e){for(var t=0;t<r.length;t++)if(e(r[t],t))return!0;return!1};const Tre=Ire;var Fre=Object.prototype.hasOwnProperty;function IN(r,e){if(!e||!on(r))return{};for(var t={},n=Ia(e)?e:function(A){return A[e]},a,i=0;i<r.length;i++){var o=r[i];a=n(o),Fre.call(t,a)?t[a].push(o):t[a]=[o]}return t}function TN(r,e){if(!e)return{0:r};if(!Ia(e)){var t=on(e)?e:e.replace(/\s+/g,"").split("*");e=function(n){for(var a="_",i=0,o=t.length;i<o;i++)a+=n[t[i]]&&n[t[i]].toString();return a}}return IN(r,e)}const Lre=function(r,e){if(!e)return[r];var t=TN(r,e),n=[];for(var a in t)n.push(t[a]);return n};function Dre(r,e){return r["_wrap_"+e]}function Ore(r,e){if(r["_wrap_"+e])return r["_wrap_"+e];var t=function(n){r[e](n)};return r["_wrap_"+e]=t,t}var $2={};function Ure(r){var e=$2[r];if(!e){for(var t=r.toString(16),n=t.length;n<6;n++)t="0"+t;e="#"+t,$2[r]=e}return e}function Nre(r){var e=0,t=0,n=0,a=0;return on(r)?r.length===1?e=t=n=a=r[0]:r.length===2?(e=n=r[0],t=a=r[1]):r.length===3?(e=r[0],t=a=r[1],n=r[2]):(e=r[0],t=r[1],n=r[2],a=r[3]):e=t=n=a=r,{r1:e,r2:t,r3:n,r4:a}}var kre=function(r,e,t){return r<e?e:r>t?t:r};const Pre=kre;var Qre=function(r,e){var t=e.toString(),n=t.indexOf(".");if(n===-1)return Math.round(r);var a=t.substr(n+1).length;return a>20&&(a=20),parseFloat(r.toFixed(a))};const Rre=Qre;var Hre=function(r){return to(r,"Number")};const Qo=Hre;var Gre=function(r){return Qo(r)&&r%1!==0};const zre=Gre;var Kre=function(r){return Qo(r)&&r%2===0};const jre=Kre;var $re=Number.isInteger?Number.isInteger:function(r){return Qo(r)&&r%1===0};const Wre=$re;var Vre=function(r){return Qo(r)&&r<0};const Xre=Vre;var Yre=1e-5;function Zre(r,e,t){return t===void 0&&(t=Yre),Math.abs(r-e)<t}var qre=function(r){return Qo(r)&&r%2!==0};const Jre=qre;var ene=function(r){return Qo(r)&&r>0};const tne=ene,rne=function(r,e){if(on(r)){for(var t,n=-1/0,a=0;a<r.length;a++){var i=r[a],o=Ia(e)?e(i):i[e];o>n&&(t=i,n=o)}return t}},nne=function(r,e){if(on(r)){for(var t,n=1/0,a=0;a<r.length;a++){var i=r[a],o=Ia(e)?e(i):i[e];o<n&&(t=i,n=o)}return t}};var ane=function(r,e){return(r%e+e)%e};const ine=ane;var one=180/Math.PI,Ane=function(r){return one*r};const sne=Ane,une=parseInt;var fne=Math.PI/180,lne=function(r){return fne*r};const cne=lne,W2=function(r,e){return r.hasOwnProperty(e)};var hne=Object.values?function(r){return Object.values(r)}:function(r){var e=[];return tf(r,function(t,n){Ia(r)&&n==="prototype"||e.push(t)}),e};const FN=hne,dne=function(r,e){return Yv(FN(r),e)},Uc=function(r){return DA(r)?"":r.toString()};var vne=function(r){return Uc(r).toLowerCase()};const gne=vne;var pne=function(r){var e=Uc(r);return e.charAt(0).toLowerCase()+e.substring(1)};const yne=pne;function mne(r,e){return!r||!e?r:r.replace(/\\?\{([^{}]+)\}/g,function(t,n){return t.charAt(0)==="\\"?t.slice(1):e[n]===void 0?"":e[n]})}var wne=function(r){return Uc(r).toUpperCase()};const Bne=wne;var Ene=function(r){var e=Uc(r);return e.charAt(0).toUpperCase()+e.substring(1)};const bne=Ene;var xne={}.toString,Cne=function(r){return xne.call(r).replace(/^\[object /,"").replace(/]$/,"")};const LN=Cne;var _ne=function(r){return to(r,"Arguments")};const Sne=_ne;var Mne=function(r){return to(r,"Boolean")};const Ine=Mne;var Tne=function(r){return to(r,"Date")};const Fne=Tne;var Lne=function(r){return to(r,"Error")};const Dne=Lne;function One(r){return Qo(r)&&isFinite(r)}var Une=function(r){return r===null};const Nne=Une;var kne=Object.prototype,Pne=function(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||kne;return r===t};const DN=Pne;var Qne=function(r){return to(r,"RegExp")};const Rne=Qne;var Hne=function(r){return r===void 0};const Gne=Hne;var zne=function(r){return r instanceof Element||r instanceof HTMLDocument};const Kne=zne;function jne(r){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)};return e(r)}function $ne(r){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;e(r)}function Iy(r,e){for(var t in e)e.hasOwnProperty(t)&&t!=="constructor"&&e[t]!==void 0&&(r[t]=e[t])}function Ru(r,e,t,n){return e&&Iy(r,e),t&&Iy(r,t),n&&Iy(r,n),r}var Wne=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];for(var t=r[0],n=1;n<r.length;n++){var a=r[n];Ia(a)&&(a=a.prototype),Ru(t.prototype,a)}};const Vne=Wne;var T1=function(r){if(typeof r!="object"||r===null)return r;var e;if(on(r)){e=[];for(var t=0,n=r.length;t<n;t++)typeof r[t]=="object"&&r[t]!=null?e[t]=T1(r[t]):e[t]=r[t]}else{e={};for(var a in r)typeof r[a]=="object"&&r[a]!=null?e[a]=T1(r[a]):e[a]=r[a]}return e};const Xne=T1;function Yne(r,e,t){var n;return function(){var a=this,i=arguments,o=function(){n=null,t||r.apply(a,i)},A=t&&!n;clearTimeout(n),n=setTimeout(o,e),A&&r.apply(a,i)}}const Zne=function(r,e){if(!Ia(r))throw new TypeError("Expected a function");var t=function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];var i=e?e.apply(this,n):n[0],o=t.cache;if(o.has(i))return o.get(i);var A=r.apply(this,n);return o.set(i,A),A};return t.cache=new Map,t};var qne=5;function ON(r,e,t,n){t=t||0,n=n||qne;for(var a in e)if(e.hasOwnProperty(a)){var i=e[a];i!==null&&rf(i)?(rf(r[a])||(r[a]={}),t<n?ON(r[a],i,t+1,n):r[a]=e[a]):on(i)?(r[a]=[],r[a]=r[a].concat(i)):i!==void 0&&(r[a]=i)}}var Jne=function(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var n=0;n<e.length;n+=1)ON(r,e[n]);return r};const eae=Jne;var tae=function(r,e,t,n){Ia(e)||(t=e,e=r,r=function(){});var a=Object.create?function(o,A){return Object.create(o,{constructor:{value:A}})}:function(o,A){function s(){}s.prototype=o;var u=new s;return u.constructor=A,u},i=a(e.prototype,r);return r.prototype=Ru(i,r.prototype),r.superclass=a(e.prototype,e),Ru(i,t),Ru(r,n),r};const rae=tae;var nae=function(r,e){if(!la(r))return-1;var t=Array.prototype.indexOf;if(t)return t.call(r,e);for(var n=-1,a=0;a<r.length;a++)if(r[a]===e){n=a;break}return n};const aae=nae;var iae=Object.prototype.hasOwnProperty;function oae(r){if(DA(r))return!0;if(la(r))return!r.length;var e=LN(r);if(e==="Map"||e==="Set")return!r.size;if(DN(r))return!Object.keys(r).length;for(var t in r)if(iae.call(r,t))return!1;return!0}var F1=function(r,e){if(r===e)return!0;if(!r||!e||IA(r)||IA(e))return!1;if(la(r)||la(e)){if(r.length!==e.length)return!1;for(var t=!0,n=0;n<r.length&&(t=F1(r[n],e[n]),!!t);n++);return t}if(Zv(r)||Zv(e)){var a=Object.keys(r),i=Object.keys(e);if(a.length!==i.length)return!1;for(var t=!0,n=0;n<a.length&&(t=F1(r[a[n]],e[a[n]]),!!t);n++);return t}return!1};const UN=F1,Aae=function(r,e,t){return Ia(t)?!!t(r,e):UN(r,e)};var sae=function(r,e){if(!la(r))return r;for(var t=[],n=0;n<r.length;n++){var a=r[n];t.push(e(a,n))}return t};const uae=sae;var fae=function(r){return r};const lae=function(r,e){e===void 0&&(e=fae);var t={};return up(r)&&!DA(r)&&Object.keys(r).forEach(function(n){t[n]=e(r[n],n)}),t},cae=function(r,e,t){for(var n=0,a=IA(e)?e.split("."):e;r&&n<a.length;)r=r[a[n++]];return r===void 0||n<a.length?t:r},hae=function(r,e,t){var n=r,a=IA(e)?e.split("."):e;return a.forEach(function(i,o){o<a.length-1?(up(n[i])||(n[i]=Qo(a[o+1])?[]:{}),n=n[i]):n[i]=t}),r};var dae=Object.prototype.hasOwnProperty;const vae=function(r,e){if(r===null||!rf(r))return{};var t={};return tf(e,function(n){dae.call(r,n)&&(t[n]=r[n])}),t},gae=function(r,e){return SN(r,function(t,n,a){return e.includes(a)||(t[a]=n),t},{})},pae=function(r,e,t){var n,a,i,o,A=0;t||(t={});var s=function(){A=t.leading===!1?0:Date.now(),n=null,o=r.apply(a,i),n||(a=i=null)},u=function(){var f=Date.now();!A&&t.leading===!1&&(A=f);var l=e-(f-A);return a=this,i=arguments,l<=0||l>e?(n&&(clearTimeout(n),n=null),A=f,o=r.apply(a,i),n||(a=i=null)):!n&&t.trailing!==!1&&(n=setTimeout(s,l)),o};return u.cancel=function(){clearTimeout(n),A=0,n=a=i=null},u},yae=function(r){return la(r)?Array.prototype.slice.call(r):[]};var Ad={};const mae=function(r){return r=r||"g",Ad[r]?Ad[r]+=1:Ad[r]=1,r+Ad[r]},wae=function(){},Bae=function(r){return r};function Eae(r){return DA(r)?0:la(r)?r.length:Object.keys(r).length}var bae=function(){function r(){this.map={}}return r.prototype.has=function(e){return this.map[e]!==void 0},r.prototype.get=function(e,t){var n=this.map[e];return n===void 0?t:n},r.prototype.set=function(e,t){this.map[e]=t},r.prototype.clear=function(){this.map={}},r.prototype.delete=function(e){delete this.map[e]},r.prototype.size=function(){return Object.keys(this.map).length},r}();const xae=bae;var Cae=1e-6;function Ty(r){return Math.abs(r)<Cae?0:r<0?-1:1}function _ae(r,e,t){return(t[0]-r[0])*(e[1]-r[1])===(e[0]-r[0])*(t[1]-r[1])&&Math.min(r[0],e[0])<=t[0]&&t[0]<=Math.max(r[0],e[0])&&Math.min(r[1],e[1])<=t[1]&&t[1]<=Math.max(r[1],e[1])}function L1(r,e,t){var n=!1,a=r.length;if(a<=2)return!1;for(var i=0;i<a;i++){var o=r[i],A=r[(i+1)%a];if(_ae(o,A,[e,t]))return!0;Ty(o[1]-t)>0!=Ty(A[1]-t)>0&&Ty(e-(t-o[1])*(o[0]-A[0])/(o[1]-A[1])-o[0])<0&&(n=!n)}return n}var V2=function(r,e,t){return r>=e&&r<=t};function Sae(r,e,t,n){var a=.001,i={x:t.x-r.x,y:t.y-r.y},o={x:e.x-r.x,y:e.y-r.y},A={x:n.x-t.x,y:n.y-t.y},s=o.x*A.y-o.y*A.x,u=s*s,f=o.x*o.x+o.y*o.y,l=A.x*A.x+A.y*A.y,c=null;if(u>a*f*l){var h=(i.x*A.y-i.y*A.x)/s,d=(i.x*o.y-i.y*o.x)/s;V2(h,0,1)&&V2(d,0,1)&&(c={x:r.x+h*o.x,y:r.y+h*o.y})}return c}function X2(r){for(var e=[],t=r.length,n=0;n<t-1;n++){var a=r[n],i=r[n+1];e.push({from:{x:a[0],y:a[1]},to:{x:i[0],y:i[1]}})}if(e.length>1){var o=r[0],A=r[t-1];e.push({from:{x:A[0],y:A[1]},to:{x:o[0],y:o[1]}})}return e}function Mae(r,e){var t=!1;return r.forEach(function(n){if(Sae(n.from,n.to,e.from,e.to))return t=!0,!1}),t}function Y2(r){var e=r.map(function(n){return n[0]}),t=r.map(function(n){return n[1]});return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,t),maxY:Math.max.apply(null,t)}}function Iae(r,e){return!(e.minX>r.maxX||e.maxX<r.minX||e.minY>r.maxY||e.maxY<r.minY)}function Tae(r,e){if(r.length<2||e.length<2)return!1;var t=Y2(r),n=Y2(e);if(!Iae(t,n))return!1;var a=!1;if(e.forEach(function(s){if(L1(r,s[0],s[1]))return a=!0,!1}),a||(r.forEach(function(s){if(L1(e,s[0],s[1]))return a=!0,!1}),a))return!0;var i=X2(r),o=X2(e),A=!1;return o.forEach(function(s){if(Mae(i,s))return A=!0,!1}),A}const Fae=Object.freeze(Object.defineProperty({__proto__:null,Cache:xae,angleTo:lte,arcToCubic:rE,assign:Ru,augment:Vne,clamp:Pre,clearAnimationFrame:$ne,clone:Xne,clonePath:pf,contains:Yv,debounce:Yne,deepMix:eae,difference:Vte,direction:uN,distanceSquareRoot:yf,each:tf,endsWith:_re,equalizeSegments:yN,every:Mre,extend:rae,filter:mN,find:tre,findIndex:rre,firstValue:are,fixedBase:Rre,flatten:ore,flattenDeep:Are,forIn:tf,get:cae,getDrawDirection:Qte,getPathArea:pN,getPathBBox:Ote,getPathBBoxTotalLength:Ute,getPointAtLength:fv,getRange:ure,getRotatedCurve:kte,getTotalLength:Ll,getType:LN,getWrapBehavior:Dre,gradient:ete,group:Lre,groupBy:IN,groupToMap:TN,has:W2,hasKey:W2,hasValue:dne,head:bre,identity:Bae,includes:Yv,indexOf:aae,isArguments:Sne,isArray:on,isArrayLike:la,isBoolean:Ine,isDate:Fne,isDecimal:zre,isElement:Kne,isEmpty:oae,isEqual:UN,isEqualWith:Aae,isError:Dne,isEven:jre,isFinite:One,isFunction:Ia,isInteger:Wre,isMatch:BN,isNegative:Xre,isNil:DA,isNull:Nne,isNumber:Qo,isNumberEqual:Zre,isObject:up,isObjectLike:Zv,isOdd:Jre,isPlainObject:rf,isPointInPolygon:L1,isPointInStroke:Gte,isPolygonsIntersect:Tae,isPositive:tne,isPrototype:DN,isRegExp:Rne,isString:IA,isType:to,isUndefined:Gne,keys:wN,last:xre,lowerCase:gne,lowerFirst:yne,map:uae,mapValues:lae,max:bN,maxBy:rne,memoize:Zne,min:xN,minBy:nne,mix:Ru,mod:ine,noop:wae,normalizePath:Ap,number2color:Ure,omit:gae,parseRadius:Nre,path2Absolute:dN,path2Curve:vN,path2String:dte,pick:vae,pull:hre,pullAt:_N,reduce:SN,remove:yre,requestAnimationFrame:jne,reverseCurve:Mte,rgb2arr:oN,set:hae,size:Eae,some:Tre,sortBy:mre,startsWith:Cre,substitute:mne,throttle:pae,toArray:yae,toCSSGradient:ite,toDegree:sne,toInteger:une,toRGB:sN,toRadian:cne,toString:Uc,transform:fte,union:Bre,uniq:MN,uniqueId:mae,upperCase:Bne,upperFirst:bne,values:FN,valuesOfKey:Ere,vertical:cte,wrapBehavior:Ore},Symbol.toStringTag,{value:"Module"})),NN=Zi(Fae);Object.defineProperty(eE,"__esModule",{value:!0});var Lae=NN,Dae=function(r){for(var e={},t=r.nodes().filter(function(l){var c;return!(!((c=r.children(l))===null||c===void 0)&&c.length)}),n=t.map(function(l){return r.node(l).rank}),a=(0,Lae.max)(n),i=[],o=0;o<a+1;o++)i.push([]);var A=function(l){var c;if(!e.hasOwnProperty(l)){e[l]=!0;var h=r.node(l);isNaN(h.rank)||i[h.rank].push(l),(c=r.successors(l))===null||c===void 0||c.forEach(function(d){return A(d)})}},s=t.sort(function(l,c){return r.node(l).rank-r.node(c).rank}),u=s.filter(function(l){return r.node(l).fixorder!==void 0}),f=u.sort(function(l,c){return r.node(l).fixorder-r.node(c).fixorder});return f==null||f.forEach(function(l){isNaN(r.node(l).rank)||i[r.node(l).rank].push(l),e[l]=!0}),s==null||s.forEach(A),i};eE.default=Dae;var nE={};Object.defineProperty(nE,"__esModule",{value:!0});var Oae=Ma,Uae=function(r,e,t){for(var n=(0,Oae.zipObject)(t,t.map(function(f,l){return l})),a=e.map(function(f){var l,c=(l=r.outEdges(f))===null||l===void 0?void 0:l.map(function(h){return{pos:n[h.w]||0,weight:r.edge(h).weight}});return c==null?void 0:c.sort(function(h,d){return h.pos-d.pos})}),i=a.flat().filter(function(f){return f!==void 0}),o=1;o<t.length;)o<<=1;var A=2*o-1;o-=1;var s=Array(A).fill(0,0,A),u=0;return i==null||i.forEach(function(f){if(f){var l=f.pos+o;s[l]+=f.weight;for(var c=0;l>0;)l%2&&(c+=s[l+1]),l=l-1>>1,s[l]+=f.weight;u+=f.weight*c}}),u},Nae=function(r,e){for(var t=0,n=1;n<(e==null?void 0:e.length);n+=1)t+=Uae(r,e[n-1],e[n]);return t};nE.default=Nae;var aE={};Object.defineProperty(aE,"__esModule",{value:!0});var kae=Po,Pae=function(r,e,t){var n=Qae(r),a=new kae.Graph({compound:!0}).setGraph({root:n}).setDefaultNodeLabel(function(i){return r.node(i)});return r.nodes().forEach(function(i){var o,A=r.node(i),s=r.parent(i);(A.rank===e||A.minRank<=e&&e<=A.maxRank)&&(a.setNode(i),a.setParent(i,s||n),(o=r[t](i))===null||o===void 0||o.forEach(function(u){var f=u.v===i?u.w:u.v,l=a.edgeFromArgs(f,i),c=l!==void 0?l.weight:0;a.setEdge(f,i,{weight:r.edge(u).weight+c})}),A.hasOwnProperty("minRank")&&a.setNode(i,{borderLeft:A.borderLeft[e],borderRight:A.borderRight[e]}))}),a},Qae=function(r){for(var e;r.hasNode(e="_root".concat(Math.random())););return e};aE.default=Pae;var iE={};Object.defineProperty(iE,"__esModule",{value:!0});var Rae=function(r,e,t){var n={},a;t==null||t.forEach(function(i){for(var o=r.parent(i),A,s;o;){if(A=r.parent(o),A?(s=n[A],n[A]=o):(s=a,a=o),s&&s!==o){e.setEdge(s,o);return}o=A}})};iE.default=Rae;var oE={},AE={};Object.defineProperty(AE,"__esModule",{value:!0});var Hae=function(r,e){return e.map(function(t){var n=r.inEdges(t);if(!(n!=null&&n.length))return{v:t};{var a={sum:0,weight:0};return n==null||n.forEach(function(i){var o=r.edge(i),A=r.node(i.v);a.sum+=o.weight*A.order,a.weight+=o.weight}),{v:t,barycenter:a.sum/a.weight,weight:a.weight}}})};AE.default=Hae;var sE={};Object.defineProperty(sE,"__esModule",{value:!0});var Gae=function(r,e){var t,n,a,i={};r==null||r.forEach(function(A,s){i[A.v]={i:s,indegree:0,in:[],out:[],vs:[A.v]};var u=i[A.v];A.barycenter!==void 0&&(u.barycenter=A.barycenter,u.weight=A.weight)}),(t=e.edges())===null||t===void 0||t.forEach(function(A){var s=i[A.v],u=i[A.w];s!==void 0&&u!==void 0&&(u.indegree++,s.out.push(i[A.w]))});var o=(a=(n=Object.values(i)).filter)===null||a===void 0?void 0:a.call(n,function(A){return!A.indegree});return zae(o)},zae=function(r){for(var e,t,n=[],a=function(u){return function(f){f.merged||(f.barycenter===void 0||u.barycenter===void 0||f.barycenter>=u.barycenter)&&Kae(u,f)}},i=function(u){return function(f){f.in.push(u),--f.indegree===0&&r.push(f)}},o=function(){var u=r.pop();n.push(u),(e=u.in.reverse())===null||e===void 0||e.forEach(function(f){return a(u)(f)}),(t=u.out)===null||t===void 0||t.forEach(function(f){return i(u)(f)})};r!=null&&r.length;)o();var A=n.filter(function(u){return!u.merged}),s=["vs","i","barycenter","weight"];return A.map(function(u){var f={};return s==null||s.forEach(function(l){u[l]!==void 0&&(f[l]=u[l])}),f})},Kae=function(r,e){var t,n=0,a=0;r.weight&&(n+=r.barycenter*r.weight,a+=r.weight),e.weight&&(n+=e.barycenter*e.weight,a+=e.weight),r.vs=(t=e.vs)===null||t===void 0?void 0:t.concat(r.vs),r.barycenter=n/a,r.weight=a,r.i=Math.min(e.i,r.i),e.merged=!0};sE.default=Gae;var uE={};Object.defineProperty(uE,"__esModule",{value:!0});var jae=Ma,$ae=function(r,e,t,n){var a=(0,jae.partition)(r,function(c){var h=c.hasOwnProperty("fixorder")&&!isNaN(c.fixorder);return n?!h&&c.hasOwnProperty("barycenter"):h||c.hasOwnProperty("barycenter")}),i=a.lhs,o=a.rhs.sort(function(c,h){return-c.i- -h.i}),A=[],s=0,u=0,f=0;i==null||i.sort(Wae(!!e,!!t)),f=Z2(A,o,f),i==null||i.forEach(function(c){var h;f+=(h=c.vs)===null||h===void 0?void 0:h.length,A.push(c.vs),s+=c.barycenter*c.weight,u+=c.weight,f=Z2(A,o,f)});var l={vs:A.flat()};return u&&(l.barycenter=s/u,l.weight=u),l},Z2=function(r,e,t){for(var n=t,a;e.length&&(a=e[e.length-1]).i<=n;)e.pop(),r==null||r.push(a.vs),n++;return n},Wae=function(r,e){return function(t,n){if(t.fixorder!==void 0&&n.fixorder!==void 0)return t.fixorder-n.fixorder;if(t.barycenter<n.barycenter)return-1;if(t.barycenter>n.barycenter)return 1;if(e&&t.order!==void 0&&n.order!==void 0){if(t.order<n.order)return-1;if(t.order>n.order)return 1}return r?n.i-t.i:t.i-n.i}};uE.default=$ae;var fE=we&&we.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(oE,"__esModule",{value:!0});var Vae=fE(AE),Xae=fE(sE),Yae=fE(uE),kN=function(r,e,t,n,a,i){var o,A,s,u,f=r.children(e),l=r.node(e),c=l?l.borderLeft:void 0,h=l?l.borderRight:void 0,d={};c&&(f=f==null?void 0:f.filter(function(w){return w!==c&&w!==h}));var v=(0,Vae.default)(r,f||[]);v==null||v.forEach(function(w){var B;if(!((B=r.children(w.v))===null||B===void 0)&&B.length){var E=kN(r,w.v,t,n,i);d[w.v]=E,E.hasOwnProperty("barycenter")&&qae(w,E)}});var g=(0,Xae.default)(v,t);Zae(g,d),(o=g.filter(function(w){return w.vs.length>0}))===null||o===void 0||o.forEach(function(w){var B=r.node(w.vs[0]);B&&(w.fixorder=B.fixorder,w.order=B.order)});var p=(0,Yae.default)(g,n,a,i);if(c&&(p.vs=[c,p.vs,h].flat(),!((A=r.predecessors(c))===null||A===void 0)&&A.length)){var y=r.node(((s=r.predecessors(c))===null||s===void 0?void 0:s[0])||""),m=r.node(((u=r.predecessors(h))===null||u===void 0?void 0:u[0])||"");p.hasOwnProperty("barycenter")||(p.barycenter=0,p.weight=0),p.barycenter=(p.barycenter*p.weight+y.order+m.order)/(p.weight+2),p.weight+=2}return p},Zae=function(r,e){r==null||r.forEach(function(t){var n,a=(n=t.vs)===null||n===void 0?void 0:n.map(function(i){return e[i]?e[i].vs:i});t.vs=a.flat()})},qae=function(r,e){r.barycenter!==void 0?(r.barycenter=(r.barycenter*r.weight+e.barycenter*e.weight)/(r.weight+e.weight),r.weight+=e.weight):(r.barycenter=e.barycenter,r.weight=e.weight)};oE.default=kN;var Nc=we&&we.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(JB,"__esModule",{value:!0});var q2=Nc(eE),J2=Nc(nE),Jae=Nc(aE),eie=Nc(iE),tie=Nc(oE),eS=zr(),rie=Po,Fy=Ma,nie=function(r,e){for(var t=(0,Fy.maxRank)(r),n=[],a=[],i=1;i<t+1;i++)n.push(i);for(var i=t-1;i>-1;i--)a.push(i);var o=tS(r,n,"inEdges"),A=tS(r,a,"outEdges"),s=(0,q2.default)(r);Ly(r,s);for(var u=Number.POSITIVE_INFINITY,f,i=0,l=0;l<4;++i,++l){rS(i%2?o:A,i%4>=2,!1,e),s=(0,Fy.buildLayerMatrix)(r);var c=(0,J2.default)(r,s);c<u&&(l=0,f=(0,eS.clone)(s),u=c)}s=(0,q2.default)(r),Ly(r,s);for(var i=0,l=0;l<4;++i,++l){rS(i%2?o:A,i%4>=2,!0,e),s=(0,Fy.buildLayerMatrix)(r);var c=(0,J2.default)(r,s);c<u&&(l=0,f=(0,eS.clone)(s),u=c)}Ly(r,f)},tS=function(r,e,t){return e.map(function(n){return(0,Jae.default)(r,n,t)})},rS=function(r,e,t,n){var a=new rie.Graph;r==null||r.forEach(function(i){for(var o,A=i.graph().root,s=(0,tie.default)(i,A,a,e,t,n),u=0;u<((o=s.vs)===null||o===void 0?void 0:o.length);u++){var f=i.node(s.vs[u]);f&&(f.order=u)}(0,eie.default)(i,a,s.vs)})},Ly=function(r,e){e==null||e.forEach(function(t){t==null||t.forEach(function(n,a){r.node(n).order=a})})};JB.default=nie;var lE={},PN={};(function(r){var e=we&&we.__extends||function(){var w=function(B,E){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,C){b.__proto__=C}||function(b,C){for(var _ in C)Object.prototype.hasOwnProperty.call(C,_)&&(b[_]=C[_])},w(B,E)};return function(B,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");w(B,E);function b(){this.constructor=B}B.prototype=E===null?Object.create(E):(b.prototype=E.prototype,new b)}}();Object.defineProperty(r,"__esModule",{value:!0}),r.width=r.sep=r.positionX=r.balance=r.alignCoordinates=r.findSmallestWidthAlignment=r.buildBlockGraph=r.horizontalCompaction=r.verticalAlignment=r.hasConflict=r.addConflict=r.findOtherInnerSegmentNode=r.findType2Conflicts=r.findType1Conflicts=void 0;var t=op,n=NN,a=Ma,i=function(w){e(B,w);function B(){return w!==null&&w.apply(this,arguments)||this}return B}(t.Graph),o=function(w,B){var E={},b=function(C,_){var x=0,M=0,S=C.length,I=_==null?void 0:_[(_==null?void 0:_.length)-1];return _==null||_.forEach(function(D,O){var F,U=(0,r.findOtherInnerSegmentNode)(w,D),Q=U?w.node(U).order:S;(U||D===I)&&((F=_.slice(M,O+1))===null||F===void 0||F.forEach(function(N){var R;(R=w.predecessors(N))===null||R===void 0||R.forEach(function(J){var re,ee=w.node(J),q=ee.order;(q<x||Q<q)&&!(ee.dummy&&(!((re=w.node(N))===null||re===void 0)&&re.dummy))&&(0,r.addConflict)(E,J,N)})}),M=O+1,x=Q)}),_};return B!=null&&B.length&&B.reduce(b),E};r.findType1Conflicts=o;var A=function(w,B){var E={};function b(M,S,I,D,O){for(var F,U,Q,N=S;N<I;N++)Q=M[N],!((F=w.node(Q))===null||F===void 0)&&F.dummy&&((U=w.predecessors(Q))===null||U===void 0||U.forEach(function(R){var J=w.node(R);J.dummy&&(J.order<D||J.order>O)&&(0,r.addConflict)(E,R,Q)}))}function C(M){return JSON.stringify(M.slice(1))}function _(M,S){var I=C(M);S.get(I)||(b.apply(void 0,M),S.set(I,!0))}var x=function(M,S){var I=-1,D,O=0,F=new Map;return S==null||S.forEach(function(U,Q){var N;if(((N=w.node(U))===null||N===void 0?void 0:N.dummy)==="border"){var R=w.predecessors(U)||[];R.length&&(D=w.node(R[0]).order,_([S,O,Q,I,D],F),O=Q,I=D)}_([S,O,S.length,D,M.length],F)}),S};return B!=null&&B.length&&B.reduce(x),E};r.findType2Conflicts=A;var s=function(w,B){var E,b;if(!((E=w.node(B))===null||E===void 0)&&E.dummy)return(b=w.predecessors(B))===null||b===void 0?void 0:b.find(function(C){return w.node(C).dummy})};r.findOtherInnerSegmentNode=s;var u=function(w,B,E){var b=B,C=E;if(b>C){var _=b;b=C,C=_}var x=w[b];x||(w[b]=x={}),x[C]=!0};r.addConflict=u;var f=function(w,B,E){var b=B,C=E;if(b>C){var _=B;b=C,C=_}return!!w[b]};r.hasConflict=f;var l=function(w,B,E,b){var C={},_={},x={};return B==null||B.forEach(function(M){M==null||M.forEach(function(S,I){C[S]=S,_[S]=S,x[S]=I})}),B==null||B.forEach(function(M){var S=-1;M==null||M.forEach(function(I){var D=b(I);if(D.length){D=D.sort(function(N,R){return x[N]-x[R]});for(var O=(D.length-1)/2,F=Math.floor(O),U=Math.ceil(O);F<=U;++F){var Q=D[F];_[I]===I&&S<x[Q]&&!(0,r.hasConflict)(E,I,Q)&&(_[Q]=I,_[I]=C[I]=C[Q],S=x[Q])}}})}),{root:C,align:_}};r.verticalAlignment=l;var c=function(w,B,E,b,C){var _,x={},M=(0,r.buildBlockGraph)(w,B,E,C),S=C?"borderLeft":"borderRight",I=function(F,U){for(var Q=M.nodes(),N=Q.pop(),R={};N;)R[N]?F(N):(R[N]=!0,Q.push(N),Q=Q.concat(U(N))),N=Q.pop()},D=function(F){x[F]=(M.inEdges(F)||[]).reduce(function(U,Q){return Math.max(U,(x[Q.v]||0)+M.edge(Q))},0)},O=function(F){var U=(M.outEdges(F)||[]).reduce(function(N,R){return Math.min(N,(x[R.w]||0)-M.edge(R))},Number.POSITIVE_INFINITY),Q=w.node(F);U!==Number.POSITIVE_INFINITY&&Q.borderType!==S&&(x[F]=Math.max(x[F],U))};return I(D,M.predecessors.bind(M)),I(O,M.successors.bind(M)),(_=Object.values(b))===null||_===void 0||_.forEach(function(F){x[F]=x[E[F]]}),x};r.horizontalCompaction=c;var h=function(w,B,E,b){var C=new i,_=w.graph(),x=(0,r.sep)(_.nodesep,_.edgesep,b);return B==null||B.forEach(function(M){var S;M==null||M.forEach(function(I){var D=E[I];if(C.setNode(D),S){var O=E[S],F=C.edgeFromArgs(O,D);C.setEdge(O,D,Math.max(x(w,I,S),F||0))}S=I})}),C};r.buildBlockGraph=h;var d=function(w,B){return(0,a.minBy)(Object.values(B),function(E){var b,C=Number.NEGATIVE_INFINITY,_=Number.POSITIVE_INFINITY;return(b=Object.keys(E))===null||b===void 0||b.forEach(function(x){var M=E[x],S=(0,r.width)(w,x)/2;C=Math.max(M+S,C),_=Math.min(M-S,_)}),C-_})};r.findSmallestWidthAlignment=d;function v(w,B){var E=Object.values(B),b=(0,n.min)(E),C=(0,n.max)(E);["u","d"].forEach(function(_){["l","r"].forEach(function(x){var M=_+x,S=w[M],I;if(S!==B){var D=Object.values(S);I=x==="l"?b-(0,n.min)(D):C-(0,n.max)(D),I&&(w[M]={},Object.keys(S).forEach(function(O){w[M][O]=S[O]+I}))}})})}r.alignCoordinates=v;var g=function(w,B){var E={};return Object.keys(w.ul).forEach(function(b){if(B)E[b]=w[B.toLowerCase()][b];else{var C=Object.values(w).map(function(_){return _[b]});E[b]=(C[0]+C[1])/2}}),E};r.balance=g;var p=function(w){var B=(0,a.buildLayerMatrix)(w),E=Object.assign((0,r.findType1Conflicts)(w,B),(0,r.findType2Conflicts)(w,B)),b={},C;["u","d"].forEach(function(x){C=x==="u"?B:Object.values(B).reverse(),["l","r"].forEach(function(M){M==="r"&&(C=C.map(function(O){return Object.values(O).reverse()}));var S=(x==="u"?w.predecessors:w.successors).bind(w),I=(0,r.verticalAlignment)(w,C,E,S),D=(0,r.horizontalCompaction)(w,C,I.root,I.align,M==="r");M==="r"&&Object.keys(D).forEach(function(O){D[O]=-D[O]}),b[x+M]=D})});var _=(0,r.findSmallestWidthAlignment)(w,b);return v(b,_),(0,r.balance)(b,w.graph().align)};r.positionX=p;var y=function(w,B,E){return function(b,C,_){var x=b.node(C),M=b.node(_),S=0,I;if(S+=x.width/2,x.hasOwnProperty("labelpos"))switch((x.labelpos||"").toLowerCase()){case"l":I=-x.width/2;break;case"r":I=x.width/2;break}if(I&&(S+=E?I:-I),I=0,S+=(x.dummy?B:w)/2,S+=(M.dummy?B:w)/2,S+=M.width/2,M.labelpos)switch((M.labelpos||"").toLowerCase()){case"l":I=M.width/2;break;case"r":I=-M.width/2;break}return I&&(S+=E?I:-I),I=0,S}};r.sep=y;var m=function(w,B){return w.node(B).width||0};r.width=m})(PN);var nS=we&&we.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(lE,"__esModule",{value:!0});var cE=Ma,JA=PN,aie=function(r){var e=(0,cE.buildLayerMatrix)(r),t=r.graph().ranksep,n=0;e==null||e.forEach(function(a){var i=a.map(function(A){return r.node(A).height}),o=Math.max.apply(Math,nS(nS([],i,!1),[0],!1));a==null||a.forEach(function(A){r.node(A).y=n+o/2}),n+=o+t})},iie=function(r){var e=(0,cE.buildLayerMatrix)(r),t=Object.assign((0,JA.findType1Conflicts)(r,e),(0,JA.findType2Conflicts)(r,e)),n={},a=[];["u","d"].forEach(function(o){a=o==="u"?e:Object.values(e).reverse(),["l","r"].forEach(function(A){A==="r"&&(a=a.map(function(l){return Object.values(l).reverse()}));var s=(o==="u"?r.predecessors:r.successors).bind(r),u=(0,JA.verticalAlignment)(r,a,t,s),f=(0,JA.horizontalCompaction)(r,a,u.root,u.align,A==="r");A==="r"&&Object.keys(f).forEach(function(l){return f[l]=-f[l]}),n[o+A]=f})});var i=(0,JA.findSmallestWidthAlignment)(r,n);return i&&(0,JA.alignCoordinates)(n,i),(0,JA.balance)(n,r.graph().align)},oie=function(r){var e,t=(0,cE.asNonCompoundGraph)(r);aie(t);var n=iie(t);(e=Object.keys(n))===null||e===void 0||e.forEach(function(a){t.node(a).x=n[a]})};lE.default=oie;var hE={};Object.defineProperty(hE,"__esModule",{value:!0});var Aie=function(r,e){for(var t=r.nodes().filter(function(A){var s;return!(!((s=r.children(A))===null||s===void 0)&&s.length)}),n=t.map(function(A){return r.node(A).rank}),a=Math.max.apply(Math,n),i=[],o=0;o<a+1;o++)i[o]=[];e==null||e.forEach(function(A){var s=r.node(A);!s||s!=null&&s.dummy||isNaN(s.rank)||(s.fixorder=i[s.rank].length,i[s.rank].push(A))})};hE.default=Aie;var qv=we&&we.__assign||function(){return qv=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},qv.apply(this,arguments)},ro=we&&we.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(HB,"__esModule",{value:!0});var aS=ro(GB),iS=ro(WB),sie=ro(VB),Wi=Ma,uie=ro(XB),oS=ro(YB),fie=ro(ZB),AS=ro(qB),lie=ro(JB),cie=ro(lE),hie=ro(hE),die=Po,vie=function(r,e){var t=e&&e.debugTiming?Wi.time:Wi.notime;t("layout",function(){e&&!e.keepNodeOrder&&e.prevGraph&&t("  inheritOrder",function(){pie(r,e.prevGraph)});var n=t("  buildLayoutGraph",function(){return Cie(r)});e&&e.edgeLabelSpace===!1||t("  makeSpaceForEdgeLabels",function(){_ie(n)});try{t("  runLayout",function(){gie(n,t,e)})}catch(a){if(a.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,a);return}throw a}t("  updateInputGraph",function(){yie(r,n)})})},gie=function(r,e,t){e("    removeSelfEdges",function(){Uie(r)}),e("    acyclic",function(){aS.default.run(r)}),e("    nestingGraph.run",function(){oS.default.run(r)}),e("    rank",function(){(0,sie.default)((0,Wi.asNonCompoundGraph)(r))}),e("    injectEdgeLabelProxies",function(){Sie(r)}),e("    removeEmptyRanks",function(){(0,Wi.removeEmptyRanks)(r)}),e("    nestingGraph.cleanup",function(){oS.default.cleanup(r)}),e("    normalizeRanks",function(){(0,Wi.normalizeRanks)(r)}),e("    assignRankMinMax",function(){Mie(r)}),e("    removeEdgeLabelProxies",function(){Iie(r)}),e("    normalize.run",function(){iS.default.run(r)}),e("    parentDummyChains",function(){(0,uie.default)(r)}),e("    addBorderSegments",function(){(0,fie.default)(r)}),t&&t.keepNodeOrder&&e("    initDataOrder",function(){(0,hie.default)(r,t.nodeOrder)}),e("    order",function(){(0,lie.default)(r,t==null?void 0:t.keepNodeOrder)}),e("    insertSelfEdges",function(){Nie(r)}),e("    adjustCoordinateSystem",function(){AS.default.adjust(r)}),e("    position",function(){(0,cie.default)(r)}),e("    positionSelfEdges",function(){kie(r)}),e("    removeBorderNodes",function(){Oie(r)}),e("    normalize.undo",function(){iS.default.undo(r)}),e("    fixupEdgeLabelCoords",function(){Lie(r)}),e("    undoCoordinateSystem",function(){AS.default.undo(r)}),e("    translateGraph",function(){Tie(r)}),e("    assignNodeIntersects",function(){Fie(r)}),e("    reversePoints",function(){Die(r)}),e("    acyclic.undo",function(){aS.default.undo(r)})},pie=function(r,e){r.nodes().forEach(function(t){var n=r.node(t),a=e.node(t);a!==void 0?(n.fixorder=a._order,delete a._order):delete n.fixorder})},yie=function(r,e){r.nodes().forEach(function(t){var n,a=r.node(t);if(a){var i=e.node(t);a.x=i.x,a.y=i.y,a._order=i.order,a._rank=i.rank,!((n=e.children(t))===null||n===void 0)&&n.length&&(a.width=i.width,a.height=i.height)}}),r.edges().forEach(function(t){var n=r.edge(t),a=e.edge(t);n.points=a?a.points:[],a&&a.hasOwnProperty("x")&&(n.x=a.x,n.y=a.y)}),r.graph().width=e.graph().width,r.graph().height=e.graph().height},mie=["nodesep","edgesep","ranksep","marginx","marginy"],wie={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Dy=["acyclicer","ranker","rankdir","align"],Bie=["width","height","layer","fixorder"],Eie={width:0,height:0},bie=["minlen","weight","width","height","labeloffset"],xie={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Oy=["labelpos"],Cie=function(r){var e=new die.Graph({multigraph:!0,compound:!0}),t=Ny(r.graph()),n={};return Dy==null||Dy.forEach(function(a){t[a]!==void 0&&(n[a]=t[a])}),e.setGraph(Object.assign({},wie,Uy(t,mie),n)),r.nodes().forEach(function(a){var i=Ny(r.node(a)),o=qv(qv({},Eie),i),A=Uy(o,Bie);e.setNode(a,A),e.setParent(a,r.parent(a))}),r.edges().forEach(function(a){var i=Ny(r.edge(a)),o={};Oy==null||Oy.forEach(function(A){i[A]!==void 0&&(o[A]=i[A])}),e.setEdgeObj(a,Object.assign({},xie,Uy(i,bie),o))}),e},_ie=function(r){var e=r.graph();e.ranksep||(e.ranksep=0),e.ranksep/=2,r.nodes().forEach(function(t){var n=r.node(t);isNaN(n.layer)||n.layer||(n.layer=0)}),r.edges().forEach(function(t){var n,a=r.edge(t);a.minlen*=2,((n=a.labelpos)===null||n===void 0?void 0:n.toLowerCase())!=="c"&&(e.rankdir==="TB"||e.rankdir==="BT"?a.width+=a.labeloffset:a.height+=a.labeloffset)})},Sie=function(r){r.edges().forEach(function(e){var t=r.edge(e);if(t.width&&t.height){var n=r.node(e.v),a=r.node(e.w),i={e,rank:(a.rank-n.rank)/2+n.rank};(0,Wi.addDummyNode)(r,"edge-proxy",i,"_ep")}})},Mie=function(r){var e=0;r.nodes().forEach(function(t){var n,a,i=r.node(t);i.borderTop&&(i.minRank=(n=r.node(i.borderTop))===null||n===void 0?void 0:n.rank,i.maxRank=(a=r.node(i.borderBottom))===null||a===void 0?void 0:a.rank,e=Math.max(e,i.maxRank||-1/0))}),r.graph().maxRank=e},Iie=function(r){r.nodes().forEach(function(e){var t=r.node(e);t.dummy==="edge-proxy"&&(r.edge(t.e).labelRank=t.rank,r.removeNode(e))})},Tie=function(r){var e,t=0,n,a=0,i=r.graph(),o=i.marginx||0,A=i.marginy||0,s=function(u){if(u){var f=u.x,l=u.y,c=u.width,h=u.height;!isNaN(f)&&!isNaN(c)&&(e===void 0&&(e=f-c/2),e=Math.min(e,f-c/2),t=Math.max(t,f+c/2)),!isNaN(l)&&!isNaN(h)&&(n===void 0&&(n=l-h/2),n=Math.min(n,l-h/2),a=Math.max(a,l+h/2))}};r.nodes().forEach(function(u){s(r.node(u))}),r.edges().forEach(function(u){var f=r.edge(u);f!=null&&f.hasOwnProperty("x")&&s(f)}),e-=o,n-=A,r.nodes().forEach(function(u){var f=r.node(u);f&&(f.x-=e,f.y-=n)}),r.edges().forEach(function(u){var f,l=r.edge(u);(f=l.points)===null||f===void 0||f.forEach(function(c){c.x-=e,c.y-=n}),l.hasOwnProperty("x")&&(l.x-=e),l.hasOwnProperty("y")&&(l.y-=n)}),i.width=t-e+o,i.height=a-n+A},Fie=function(r){r.edges().forEach(function(e){var t=r.edge(e),n=r.node(e.v),a=r.node(e.w),i,o;t.points?(i=t.points[0],o=t.points[t.points.length-1]):(t.points=[],i=a,o=n),t.points.unshift((0,Wi.intersectRect)(n,i)),t.points.push((0,Wi.intersectRect)(a,o))})},Lie=function(r){r.edges().forEach(function(e){var t=r.edge(e);if(t!=null&&t.hasOwnProperty("x"))switch((t.labelpos==="l"||t.labelpos==="r")&&(t.width-=t.labeloffset),t.labelpos){case"l":t.x-=t.width/2+t.labeloffset;break;case"r":t.x+=t.width/2+t.labeloffset;break}})},Die=function(r){r.edges().forEach(function(e){var t,n=r.edge(e);n.reversed&&((t=n.points)===null||t===void 0||t.reverse())})},Oie=function(r){r.nodes().forEach(function(e){var t,n,a;if(!((t=r.children(e))===null||t===void 0)&&t.length){var i=r.node(e),o=r.node(i.borderTop),A=r.node(i.borderBottom),s=r.node(i.borderLeft[((n=i.borderLeft)===null||n===void 0?void 0:n.length)-1]),u=r.node(i.borderRight[((a=i.borderRight)===null||a===void 0?void 0:a.length)-1]);i.width=Math.abs((u==null?void 0:u.x)-(s==null?void 0:s.x))||10,i.height=Math.abs((A==null?void 0:A.y)-(o==null?void 0:o.y))||10,i.x=((s==null?void 0:s.x)||0)+i.width/2,i.y=((o==null?void 0:o.y)||0)+i.height/2}}),r.nodes().forEach(function(e){var t;((t=r.node(e))===null||t===void 0?void 0:t.dummy)==="border"&&r.removeNode(e)})},Uie=function(r){r.edges().forEach(function(e){if(e.v===e.w){var t=r.node(e.v);t.selfEdges||(t.selfEdges=[]),t.selfEdges.push({e,label:r.edge(e)}),r.removeEdgeObj(e)}})},Nie=function(r){var e=(0,Wi.buildLayerMatrix)(r);e==null||e.forEach(function(t){var n=0;t==null||t.forEach(function(a,i){var o,A=r.node(a);A.order=i+n,(o=A.selfEdges)===null||o===void 0||o.forEach(function(s){(0,Wi.addDummyNode)(r,"selfedge",{width:s.label.width,height:s.label.height,rank:A.rank,order:i+ ++n,e:s.e,label:s.label},"_se")}),delete A.selfEdges})})},kie=function(r){r.nodes().forEach(function(e){var t=r.node(e);if(t.dummy==="selfedge"){var n=r.node(t.e.v),a=n.x+n.width/2,i=n.y,o=t.x-a,A=n.height/2;r.setEdgeObj(t.e,t.label),r.removeNode(e),t.label.points=[{x:a+2*o/3,y:i-A},{x:a+5*o/6,y:i-A},{y:i,x:a+o},{x:a+5*o/6,y:i+A},{x:a+2*o/3,y:i+A}],t.label.x=t.x,t.label.y=t.y}})},Uy=function(r,e){var t={};return e==null||e.forEach(function(n){r[n]!==void 0&&(t[n]=+r[n])}),t},Ny=function(r){r===void 0&&(r={});var e={};return Object.keys(r).forEach(function(t){e[t.toLowerCase()]=r[t]}),e};HB.default=vie;var Pie=we&&we.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(RB,"__esModule",{value:!0});var Qie=Pie(HB),sS=Ma;RB.default={layout:Qie.default,util:{time:sS.time,notime:sS.notime}};var Rie=we&&we.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Hie=we&&we.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gf,"__esModule",{value:!0});gf.DagreLayout=void 0;var Gie=Hie(RB),ya=zr(),zie=qr,uS=Po,Kie=function(r){Rie(e,r);function e(t){var n=r.call(this)||this;return n.rankdir="TB",n.nodesep=50,n.ranksep=50,n.controlPoints=!1,n.sortByCombo=!1,n.edgeLabelSpace=!0,n.radial=!1,n.nodes=[],n.edges=[],n.onLayoutEnd=function(){},n.layoutNode=function(a){var i=n,o=i.nodes,A=o.find(function(u){return u.id===a});if(A){var s=A.layout!==!1;return s}return!0},n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},e.prototype.execute=function(){var t=this,n,a,i,o,A=this,s=A.nodes,u=A.nodeSize,f=A.rankdir,l=A.combos,c=A.begin,h=A.radial,d=A.comboEdges,v=d===void 0?[]:d,g=A.vedges,p=g===void 0?[]:g;if(s){var y=A.edges||[],m=new uS.Graph({multigraph:!0,compound:!0});A.nodeMap={};var w={};s.forEach(function(ae){A.nodeMap[ae.id]=ae,ae.comboId&&(w[ae.comboId]=w[ae.comboId]||[],w[ae.comboId].push(ae.id))});var B=[],E={};!((n=A.nodeOrder)===null||n===void 0)&&n.length?(A.nodeOrder.forEach(function(ae){E[ae]=!0,B.push(A.nodeMap[ae])}),s.forEach(function(ae){E[ae.id]||B.push(ae)})):B=s;var b;u?(0,ya.isArray)(u)?b=function(){return u}:b=function(){return[u,u]}:b=function(ae){return ae.size?(0,ya.isArray)(ae.size)?ae.size:(0,ya.isObject)(ae.size)?[ae.size.width||40,ae.size.height||40]:[ae.size,ae.size]:[40,40]};var C=(0,ya.getFunc)(A.ranksep,50,A.ranksepFunc),_=(0,ya.getFunc)(A.nodesep,50,A.nodesepFunc),x=_,M=C;(f==="LR"||f==="RL")&&(x=C,M=_),m.setDefaultEdgeLabel(function(){return{}}),m.setGraph(A);var S={};this.sortByCombo&&l&&l.forEach(function(ae){if(S[ae.id]=ae,ae.collapsed){var L=b(ae),be=M(ae),Ne=x(ae),pe=L[0]+2*Ne,ze=L[1]+2*be;m.setNode(ae.id,{width:pe,height:ze})}ae.parentId&&(S[ae.parentId]||m.setNode(ae.parentId,{}),m.setParent(ae.id,ae.parentId))}),B.filter(function(ae){return ae.layout!==!1}).forEach(function(ae){var L=b(ae),be=M(ae),Ne=x(ae),pe=L[0]+2*Ne,ze=L[1]+2*be,Ke=ae.layer;(0,ya.isNumber)(Ke)?m.setNode(ae.id,{width:pe,height:ze,layer:Ke}):m.setNode(ae.id,{width:pe,height:ze}),t.sortByCombo&&ae.comboId&&(S[ae.comboId]||(S[ae.comboId]={id:ae.comboId},m.setNode(ae.comboId,{})),m.setParent(ae.id,ae.comboId))}),y.forEach(function(ae){var L=(0,ya.getEdgeTerminal)(ae,"source"),be=(0,ya.getEdgeTerminal)(ae,"target");t.layoutNode(L)&&t.layoutNode(be)&&m.setEdge(L,be,{weight:ae.weight||1})}),(a=v==null?void 0:v.concat(p||[]))===null||a===void 0||a.forEach(function(ae){var L,be,Ne=ae.source,pe=ae.target,ze=!((L=S[Ne])===null||L===void 0)&&L.collapsed?[Ne]:w[Ne]||[Ne],Ke=!((be=S[pe])===null||be===void 0)&&be.collapsed?[pe]:w[pe]||[pe];ze.forEach(function(Xe){Ke.forEach(function(Ze){m.setEdge(Xe,Ze,{weight:ae.weight||1})})})});var I=void 0;!((i=A.preset)===null||i===void 0)&&i.nodes&&(I=new uS.Graph({multigraph:!0,compound:!0}),A.preset.nodes.forEach(function(ae){I==null||I.setNode(ae.id,ae)})),Gie.default.layout(m,{prevGraph:I,edgeLabelSpace:A.edgeLabelSpace,keepNodeOrder:!!A.nodeOrder,nodeOrder:A.nodeOrder});var D=[0,0];if(c){var O=1/0,F=1/0;m.nodes().forEach(function(ae){var L=m.node(ae);O>L.x&&(O=L.x),F>L.y&&(F=L.y)}),m.edges().forEach(function(ae){var L,be=m.edge(ae);(L=be.points)===null||L===void 0||L.forEach(function(Ne){O>Ne.x&&(O=Ne.x),F>Ne.y&&(F=Ne.y)})}),D[0]=c[0]-O,D[1]=c[1]-F}var U=f==="LR"||f==="RL";if(h){var Q=this,N=Q.focusNode,R=Q.ranksep,J=Q.getRadialPos,re=(0,ya.isString)(N)?N:N==null?void 0:N.id,ee=re?(o=m.node(re))===null||o===void 0?void 0:o._rank:0,q=[],ve=U?"y":"x",Me=U?"height":"width",Re=1/0,tt=-1/0;m.nodes().forEach(function(ae){var L=m.node(ae);if(A.nodeMap[ae]){var be=_(A.nodeMap[ae]);if(ee===0)q[L._rank]||(q[L._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),q[L._rank].nodes.push(ae),q[L._rank].totalWidth+=be*2+L[Me],q[L._rank].maxSize<Math.max(L.width,L.height)&&(q[L._rank].maxSize=Math.max(L.width,L.height));else{var Ne=L._rank-ee;if(Ne===0)q[Ne]||(q[Ne]={nodes:[],totalWidth:0,maxSize:-1/0}),q[Ne].nodes.push(ae),q[Ne].totalWidth+=be*2+L[Me],q[Ne].maxSize<Math.max(L.width,L.height)&&(q[Ne].maxSize=Math.max(L.width,L.height));else{var pe=Math.abs(Ne);q[pe]||(q[pe]={left:[],right:[],totalWidth:0,maxSize:-1/0}),q[pe].totalWidth+=be*2+L[Me],q[pe].maxSize<Math.max(L.width,L.height)&&(q[pe].maxSize=Math.max(L.width,L.height)),Ne<0?q[pe].left.push(ae):q[pe].right.push(ae)}}var ze=L[ve]-L[Me]/2-be,Ke=L[ve]+L[Me]/2+be;ze<Re&&(Re=ze),Ke>tt&&(tt=Ke)}});var st=R||50,at={},Et=(tt-Re)/.9,bt=[(Re+tt-Et)*.5,(Re+tt+Et)*.5],fr=function(ae,L,be,Ne){be===void 0&&(be=-1/0),Ne===void 0&&(Ne=[0,1]);var pe=be;return ae.forEach(function(ze){var Ke=m.node(ze);at[ze]=L;var Xe=J(Ke[ve],bt,Et,L,Ne),Ze=Xe.x,gt=Xe.y;if(A.nodeMap[ze]){A.nodeMap[ze].x=Ze+D[0],A.nodeMap[ze].y=gt+D[1],A.nodeMap[ze]._order=Ke._order;var Ot=C(A.nodeMap[ze]);pe<Ot&&(pe=Ot)}}),pe},Qt=!0,Kt=0;q.forEach(function(ae){var L,be,Ne,pe,ze,Ke,Xe;if(!(!(!((L=ae==null?void 0:ae.nodes)===null||L===void 0)&&L.length)&&!(!((be=ae==null?void 0:ae.left)===null||be===void 0)&&be.length)&&!(!((Ne=ae==null?void 0:ae.right)===null||Ne===void 0)&&Ne.length))){if(Qt&&ae.nodes.length===1){var Ze=ae.nodes[0];if(!A.nodeMap[Ze])return;A.nodeMap[Ze].x=D[0],A.nodeMap[Ze].y=D[1],at[ae.nodes[0]]=0,st=C(A.nodeMap[Ze]),Qt=!1;return}st=Math.max(st,ae.totalWidth/(2*Math.PI));var gt=-1/0;if(ee===0||!((pe=ae.nodes)===null||pe===void 0)&&pe.length)gt=fr(ae.nodes,st,gt,[0,1]);else{var Ot=((ze=ae.left)===null||ze===void 0?void 0:ze.length)/(((Ke=ae.left)===null||Ke===void 0?void 0:Ke.length)+((Xe=ae.right)===null||Xe===void 0?void 0:Xe.length));gt=fr(ae.left,st,gt,[0,Ot]),gt=fr(ae.right,st,gt,[Ot+.05,1])}st+=gt,Qt=!1,Kt-ae.maxSize}}),m.edges().forEach(function(ae){var L,be,Ne,pe=m.edge(ae),ze=y.findIndex(function(vr){var sr=(0,ya.getEdgeTerminal)(vr,"source"),wr=(0,ya.getEdgeTerminal)(vr,"target");return sr===ae.v&&wr===ae.w});if(!(ze<=-1)&&A.edgeLabelSpace&&A.controlPoints&&y[ze].type!=="loop"){var Ke=ve==="x"?"y":"x",Xe=(L=pe==null?void 0:pe.points)===null||L===void 0?void 0:L.slice(1,pe.points.length-1),Ze=[],gt=(be=m.node(ae.v))===null||be===void 0?void 0:be[Ke],Ot=gt-((Ne=m.node(ae.w))===null||Ne===void 0?void 0:Ne[Ke]),cr=at[ae.v],Ut=cr-at[ae.w];Xe==null||Xe.forEach(function(vr){var sr=(vr[Ke]-gt)/Ot*Ut+cr,wr=J(vr[ve],bt,Et,sr);Ze.push({x:wr.x+D[0],y:wr.y+D[1]})}),y[ze].controlPoints=Ze}})}else{var gr=new Set,lr=f==="BT"||f==="RL",Ht=lr?function(ae,L){return L-ae}:function(ae,L){return ae-L};m.nodes().forEach(function(ae){var L=m.node(ae);if(L){var be=t.nodeMap[ae];be||(be=l==null?void 0:l.find(function(Ne){return Ne.id===ae})),be&&(be.x=L.x+D[0],be.y=L.y+D[1],be._order=L._order,gr.add(U?be.x:be.y))}});var tr=Array.from(gr).sort(Ht),Kr=U?function(ae,L){return ae.x!==L.x}:function(ae,L){return ae.y!==L.y},et=U?function(ae,L,be){var Ne=Math.max(L.y,be.y),pe=Math.min(L.y,be.y);return ae.filter(function(ze){return ze.y<=Ne&&ze.y>=pe})}:function(ae,L,be){var Ne=Math.max(L.x,be.x),pe=Math.min(L.x,be.x);return ae.filter(function(ze){return ze.x<=Ne&&ze.x>=pe})};m.edges().forEach(function(ae){var L,be=m.edge(ae),Ne=y.findIndex(function(Ke){var Xe=(0,ya.getEdgeTerminal)(Ke,"source"),Ze=(0,ya.getEdgeTerminal)(Ke,"target");return Xe===ae.v&&Ze===ae.w});if(!(Ne<=-1)&&A.edgeLabelSpace&&A.controlPoints&&y[Ne].type!=="loop"){(L=be==null?void 0:be.points)===null||L===void 0||L.forEach(function(Ke){Ke.x+=D[0],Ke.y+=D[1]});var pe=A.nodeMap[ae.v],ze=A.nodeMap[ae.w];y[Ne].controlPoints=jie(be==null?void 0:be.points,pe,ze,tr,U,Kr,et)}})}return A.onLayoutEnd&&A.onLayoutEnd(),{nodes:s,edges:y}}},e.prototype.getRadialPos=function(t,n,a,i,o){o===void 0&&(o=[0,1]);var A=(t-n[0])/a;A=A*(o[1]-o[0])+o[0];var s=A*2*Math.PI;return{x:Math.cos(s)*i,y:Math.sin(s)*i}},e.prototype.getType=function(){return"dagre"},e}(zie.Base);gf.DagreLayout=Kie;var jie=function(r,e,t,n,a,i,o){var A=(r==null?void 0:r.slice(1,r.length-1))||[];if(e&&t){var s=e.x,u=e.y,f=t.x,l=t.y;if(a&&(s=e.y,u=e.x,f=t.y,l=t.x),l!==u&&s!==f){var c=n.indexOf(u),h=n[c+1];if(h){var d=A[0],v=a?{x:(u+h)/2,y:(d==null?void 0:d.y)||f}:{x:(d==null?void 0:d.x)||f,y:(u+h)/2};(!d||i(d,v))&&A.unshift(v)}var g=n.indexOf(l),p=Math.abs(g-c);if(p===1)A=o(A,e,t),A.length||A.push(a?{x:(u+l)/2,y:s}:{x:s,y:(u+l)/2});else if(p>1){var y=n[g-1];if(y){var m=A[A.length-1],w=a?{x:(l+y)/2,y:(m==null?void 0:m.y)||f}:{x:(m==null?void 0:m.x)||s,y:(l+y)/2};(!m||i(m,w))&&A.push(w)}}}}return A},kc={};const Jv={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function D1(r={},e=Jv){var t,n,a,i;const o=JSON.parse(JSON.stringify(e)),A=((t=r==null?void 0:r.graph)===null||t===void 0?void 0:t.meta)||{},s=((n=r==null?void 0:r.subScene)===null||n===void 0?void 0:n.meta)||{},u=((a=r==null?void 0:r.nodeSize)===null||a===void 0?void 0:a.meta)||{},f=((i=r==null?void 0:r.nodeSize)===null||i===void 0?void 0:i.node)||{},l=o.nodeSize.bridge;return{graph:{meta:Object.assign(o.graph.meta,A)},subScene:{meta:Object.assign(o.subScene.meta,s)},nodeSize:{meta:Object.assign(o.nodeSize.meta,u),node:Object.assign(o.nodeSize.node,f),bridge:l}}}function QN(r){return`◬${r}◬`}const nf=QN("ROOT"),RN=QN("BRIDGE_GRAPH");var sa,Ls,af,O1;(function(r){r[r.META=0]="META",r[r.NODE=1]="NODE",r[r.BRIDGE=2]="BRIDGE"})(sa||(sa={})),function(r){r[r.INCLUDE=0]="INCLUDE",r[r.EXCLUDE=1]="EXCLUDE",r[r.UNSPECIFIED=2]="UNSPECIFIED"}(Ls||(Ls={})),function(r){r[r.META=0]="META",r[r.CORE=1]="CORE",r[r.BRIDGE=2]="BRIDGE"}(af||(af={})),function(r){r[r.META=0]="META",r[r.OP=1]="OP",r[r.SERIES=2]="SERIES"}(O1||(O1={}));var sd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dE(r,e){return r(e={exports:{}},e.exports),e.exports}var $ie=function(){this.__data__=[],this.size=0},mf=function(r,e){return r===e||r!=r&&e!=e},fp=function(r,e){for(var t=r.length;t--;)if(mf(r[t][0],e))return t;return-1},Wie=Array.prototype.splice,Vie=function(r){var e=this.__data__,t=fp(e,r);return!(t<0)&&(t==e.length-1?e.pop():Wie.call(e,t,1),--this.size,!0)},Xie=function(r){var e=this.__data__,t=fp(e,r);return t<0?void 0:e[t][1]},Yie=function(r){return fp(this.__data__,r)>-1},Zie=function(r,e){var t=this.__data__,n=fp(t,r);return n<0?(++this.size,t.push([r,e])):t[n][1]=e,this};function xu(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}xu.prototype.clear=$ie,xu.prototype.delete=Vie,xu.prototype.get=Xie,xu.prototype.has=Yie,xu.prototype.set=Zie;var lp=xu,qie=function(){this.__data__=new lp,this.size=0},Jie=function(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t},eoe=function(r){return this.__data__.get(r)},toe=function(r){return this.__data__.has(r)},HN=typeof sd=="object"&&sd&&sd.Object===Object&&sd,roe=typeof self=="object"&&self&&self.Object===Object&&self,gi=HN||roe||Function("return this")(),Va=gi.Symbol,GN=Object.prototype,noe=GN.hasOwnProperty,aoe=GN.toString,Kf=Va?Va.toStringTag:void 0,ioe=function(r){var e=noe.call(r,Kf),t=r[Kf];try{r[Kf]=void 0;var n=!0}catch{}var a=aoe.call(r);return n&&(e?r[Kf]=t:delete r[Kf]),a},ooe=Object.prototype.toString,Aoe=function(r){return ooe.call(r)},fS=Va?Va.toStringTag:void 0,OA=function(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":fS&&fS in Object(r)?ioe(r):Aoe(r)},ca=function(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")},lS,Pc=function(r){if(!ca(r))return!1;var e=OA(r);return e=="[object Function]"||e=="[object GeneratorFunction]"||e=="[object AsyncFunction]"||e=="[object Proxy]"},ky=gi["__core-js_shared__"],cS=(lS=/[^.]+$/.exec(ky&&ky.keys&&ky.keys.IE_PROTO||""))?"Symbol(src)_1."+lS:"",soe=function(r){return!!cS&&cS in r},uoe=Function.prototype.toString,Ps=function(r){if(r!=null){try{return uoe.call(r)}catch{}try{return r+""}catch{}}return""},foe=/^\[object .+?Constructor\]$/,loe=Function.prototype,coe=Object.prototype,hoe=loe.toString,doe=coe.hasOwnProperty,voe=RegExp("^"+hoe.call(doe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),goe=function(r){return!(!ca(r)||soe(r))&&(Pc(r)?voe:foe).test(Ps(r))},poe=function(r,e){return r==null?void 0:r[e]},Qs=function(r,e){var t=poe(r,e);return goe(t)?t:void 0},uc=Qs(gi,"Map"),fc=Qs(Object,"create"),yoe=function(){this.__data__=fc?fc(null):{},this.size=0},moe=function(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e},woe=Object.prototype.hasOwnProperty,Boe=function(r){var e=this.__data__;if(fc){var t=e[r];return t==="__lodash_hash_undefined__"?void 0:t}return woe.call(e,r)?e[r]:void 0},Eoe=Object.prototype.hasOwnProperty,boe=function(r){var e=this.__data__;return fc?e[r]!==void 0:Eoe.call(e,r)},xoe=function(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=fc&&e===void 0?"__lodash_hash_undefined__":e,this};function Cu(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Cu.prototype.clear=yoe,Cu.prototype.delete=moe,Cu.prototype.get=Boe,Cu.prototype.has=boe,Cu.prototype.set=xoe;var hS=Cu,Coe=function(){this.size=0,this.__data__={hash:new hS,map:new(uc||lp),string:new hS}},_oe=function(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null},cp=function(r,e){var t=r.__data__;return _oe(e)?t[typeof e=="string"?"string":"hash"]:t.map},Soe=function(r){var e=cp(this,r).delete(r);return this.size-=e?1:0,e},Moe=function(r){return cp(this,r).get(r)},Ioe=function(r){return cp(this,r).has(r)},Toe=function(r,e){var t=cp(this,r),n=t.size;return t.set(r,e),this.size+=t.size==n?0:1,this};function _u(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}_u.prototype.clear=Coe,_u.prototype.delete=Soe,_u.prototype.get=Moe,_u.prototype.has=Ioe,_u.prototype.set=Toe;var hp=_u,Foe=function(r,e){var t=this.__data__;if(t instanceof lp){var n=t.__data__;if(!uc||n.length<199)return n.push([r,e]),this.size=++t.size,this;t=this.__data__=new hp(n)}return t.set(r,e),this.size=t.size,this};function Su(r){var e=this.__data__=new lp(r);this.size=e.size}Su.prototype.clear=qie,Su.prototype.delete=Jie,Su.prototype.get=eoe,Su.prototype.has=toe,Su.prototype.set=Foe;var Hu=Su,vE=function(r,e){for(var t=-1,n=r==null?0:r.length;++t<n&&e(r[t],t,r)!==!1;);return r},eg=function(){try{var r=Qs(Object,"defineProperty");return r({},"",{}),r}catch{}}(),dp=function(r,e,t){e=="__proto__"&&eg?eg(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t},Loe=Object.prototype.hasOwnProperty,vp=function(r,e,t){var n=r[e];Loe.call(r,e)&&mf(n,t)&&(t!==void 0||e in r)||dp(r,e,t)},Qc=function(r,e,t,n){var a=!t;t||(t={});for(var i=-1,o=e.length;++i<o;){var A=e[i],s=n?n(t[A],r[A],A,t,r):void 0;s===void 0&&(s=r[A]),a?dp(t,A,s):vp(t,A,s)}return t},Doe=function(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n},hi=function(r){return r!=null&&typeof r=="object"},dS=function(r){return hi(r)&&OA(r)=="[object Arguments]"},zN=Object.prototype,Ooe=zN.hasOwnProperty,Uoe=zN.propertyIsEnumerable,of=dS(function(){return arguments}())?dS:function(r){return hi(r)&&Ooe.call(r,"callee")&&!Uoe.call(r,"callee")},Zr=Array.isArray,Noe=function(){return!1},Ds=dE(function(r,e){var t=e&&!e.nodeType&&e,n=t&&r&&!r.nodeType&&r,a=n&&n.exports===t?gi.Buffer:void 0,i=(a?a.isBuffer:void 0)||Noe;r.exports=i}),koe=/^(?:0|[1-9]\d*)$/,gp=function(r,e){var t=typeof r;return!!(e=e??9007199254740991)&&(t=="number"||t!="symbol"&&koe.test(r))&&r>-1&&r%1==0&&r<e},gE=function(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=9007199254740991},Tr={};Tr["[object Float32Array]"]=Tr["[object Float64Array]"]=Tr["[object Int8Array]"]=Tr["[object Int16Array]"]=Tr["[object Int32Array]"]=Tr["[object Uint8Array]"]=Tr["[object Uint8ClampedArray]"]=Tr["[object Uint16Array]"]=Tr["[object Uint32Array]"]=!0,Tr["[object Arguments]"]=Tr["[object Array]"]=Tr["[object ArrayBuffer]"]=Tr["[object Boolean]"]=Tr["[object DataView]"]=Tr["[object Date]"]=Tr["[object Error]"]=Tr["[object Function]"]=Tr["[object Map]"]=Tr["[object Number]"]=Tr["[object Object]"]=Tr["[object RegExp]"]=Tr["[object Set]"]=Tr["[object String]"]=Tr["[object WeakMap]"]=!1;var Poe=function(r){return hi(r)&&gE(r.length)&&!!Tr[OA(r)]},pp=function(r){return function(e){return r(e)}},Af=dE(function(r,e){var t=e&&!e.nodeType&&e,n=t&&r&&!r.nodeType&&r,a=n&&n.exports===t&&HN.process,i=function(){try{var o=n&&n.require&&n.require("util").types;return o||a&&a.binding&&a.binding("util")}catch{}}();r.exports=i}),vS=Af&&Af.isTypedArray,Rc=vS?pp(vS):Poe,Qoe=Object.prototype.hasOwnProperty,KN=function(r,e){var t=Zr(r),n=!t&&of(r),a=!t&&!n&&Ds(r),i=!t&&!n&&!a&&Rc(r),o=t||n||a||i,A=o?Doe(r.length,String):[],s=A.length;for(var u in r)!e&&!Qoe.call(r,u)||o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||gp(u,s))||A.push(u);return A},Roe=Object.prototype,yp=function(r){var e=r&&r.constructor;return r===(typeof e=="function"&&e.prototype||Roe)},jN=function(r,e){return function(t){return r(e(t))}},Hoe=jN(Object.keys,Object),Goe=Object.prototype.hasOwnProperty,pE=function(r){if(!yp(r))return Hoe(r);var e=[];for(var t in Object(r))Goe.call(r,t)&&t!="constructor"&&e.push(t);return e},Ro=function(r){return r!=null&&gE(r.length)&&!Pc(r)},UA=function(r){return Ro(r)?KN(r):pE(r)},zoe=function(r,e){return r&&Qc(e,UA(e),r)},Koe=function(r){var e=[];if(r!=null)for(var t in Object(r))e.push(t);return e},joe=Object.prototype.hasOwnProperty,$oe=function(r){if(!ca(r))return Koe(r);var e=yp(r),t=[];for(var n in r)(n!="constructor"||!e&&joe.call(r,n))&&t.push(n);return t},Rs=function(r){return Ro(r)?KN(r,!0):$oe(r)},Woe=function(r,e){return r&&Qc(e,Rs(e),r)},$N=dE(function(r,e){var t=e&&!e.nodeType&&e,n=t&&r&&!r.nodeType&&r,a=n&&n.exports===t?gi.Buffer:void 0,i=a?a.allocUnsafe:void 0;r.exports=function(o,A){if(A)return o.slice();var s=o.length,u=i?i(s):new o.constructor(s);return o.copy(u),u}}),WN=function(r,e){var t=-1,n=r.length;for(e||(e=Array(n));++t<n;)e[t]=r[t];return e},VN=function(r,e){for(var t=-1,n=r==null?0:r.length,a=0,i=[];++t<n;){var o=r[t];e(o,t,r)&&(i[a++]=o)}return i},XN=function(){return[]},Voe=Object.prototype.propertyIsEnumerable,gS=Object.getOwnPropertySymbols,yE=gS?function(r){return r==null?[]:(r=Object(r),VN(gS(r),function(e){return Voe.call(r,e)}))}:XN,Xoe=function(r,e){return Qc(r,yE(r),e)},mE=function(r,e){for(var t=-1,n=e.length,a=r.length;++t<n;)r[a+t]=e[t];return r},mp=jN(Object.getPrototypeOf,Object),YN=Object.getOwnPropertySymbols?function(r){for(var e=[];r;)mE(e,yE(r)),r=mp(r);return e}:XN,Yoe=function(r,e){return Qc(r,YN(r),e)},ZN=function(r,e,t){var n=e(r);return Zr(r)?n:mE(n,t(r))},U1=function(r){return ZN(r,UA,yE)},Zoe=function(r){return ZN(r,Rs,YN)},N1=Qs(gi,"DataView"),k1=Qs(gi,"Promise"),Gu=Qs(gi,"Set"),P1=Qs(gi,"WeakMap"),qoe=Ps(N1),Joe=Ps(uc),eAe=Ps(k1),tAe=Ps(Gu),rAe=Ps(P1),os=OA;(N1&&os(new N1(new ArrayBuffer(1)))!="[object DataView]"||uc&&os(new uc)!="[object Map]"||k1&&os(k1.resolve())!="[object Promise]"||Gu&&os(new Gu)!="[object Set]"||P1&&os(new P1)!="[object WeakMap]")&&(os=function(r){var e=OA(r),t=e=="[object Object]"?r.constructor:void 0,n=t?Ps(t):"";if(n)switch(n){case qoe:return"[object DataView]";case Joe:return"[object Map]";case eAe:return"[object Promise]";case tAe:return"[object Set]";case rAe:return"[object WeakMap]"}return e});var Os=os,nAe=Object.prototype.hasOwnProperty,aAe=function(r){var e=r.length,t=new r.constructor(e);return e&&typeof r[0]=="string"&&nAe.call(r,"index")&&(t.index=r.index,t.input=r.input),t},tg=gi.Uint8Array,wE=function(r){var e=new r.constructor(r.byteLength);return new tg(e).set(new tg(r)),e},iAe=function(r,e){var t=e?wE(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.byteLength)},oAe=/\w*$/,AAe=function(r){var e=new r.constructor(r.source,oAe.exec(r));return e.lastIndex=r.lastIndex,e},pS=Va?Va.prototype:void 0,yS=pS?pS.valueOf:void 0,sAe=function(r){return yS?Object(yS.call(r)):{}},qN=function(r,e){var t=e?wE(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.length)},uAe=function(r,e,t){var n=r.constructor;switch(e){case"[object ArrayBuffer]":return wE(r);case"[object Boolean]":case"[object Date]":return new n(+r);case"[object DataView]":return iAe(r,t);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return qN(r,t);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(r);case"[object RegExp]":return AAe(r);case"[object Set]":return new n;case"[object Symbol]":return sAe(r)}},mS=Object.create,JN=function(){function r(){}return function(e){if(!ca(e))return{};if(mS)return mS(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}}(),ek=function(r){return typeof r.constructor!="function"||yp(r)?{}:JN(mp(r))},fAe=function(r){return hi(r)&&Os(r)=="[object Map]"},wS=Af&&Af.isMap,lAe=wS?pp(wS):fAe,cAe=function(r){return hi(r)&&Os(r)=="[object Set]"},BS=Af&&Af.isSet,hAe=BS?pp(BS):cAe,_r={};_r["[object Arguments]"]=_r["[object Array]"]=_r["[object ArrayBuffer]"]=_r["[object DataView]"]=_r["[object Boolean]"]=_r["[object Date]"]=_r["[object Float32Array]"]=_r["[object Float64Array]"]=_r["[object Int8Array]"]=_r["[object Int16Array]"]=_r["[object Int32Array]"]=_r["[object Map]"]=_r["[object Number]"]=_r["[object Object]"]=_r["[object RegExp]"]=_r["[object Set]"]=_r["[object String]"]=_r["[object Symbol]"]=_r["[object Uint8Array]"]=_r["[object Uint8ClampedArray]"]=_r["[object Uint16Array]"]=_r["[object Uint32Array]"]=!0,_r["[object Error]"]=_r["[object Function]"]=_r["[object WeakMap]"]=!1;var tk=function r(e,t,n,a,i,o){var A,s=1&t,u=2&t,f=4&t;if(n&&(A=i?n(e,a,i,o):n(e)),A!==void 0)return A;if(!ca(e))return e;var l=Zr(e);if(l){if(A=aAe(e),!s)return WN(e,A)}else{var c=Os(e),h=c=="[object Function]"||c=="[object GeneratorFunction]";if(Ds(e))return $N(e,s);if(c=="[object Object]"||c=="[object Arguments]"||h&&!i){if(A=u||h?{}:ek(e),!s)return u?Yoe(e,Woe(A,e)):Xoe(e,zoe(A,e))}else{if(!_r[c])return i?e:{};A=uAe(e,c,s)}}o||(o=new Hu);var d=o.get(e);if(d)return d;o.set(e,A),hAe(e)?e.forEach(function(g){A.add(r(g,t,n,g,e,o))}):lAe(e)&&e.forEach(function(g,p){A.set(p,r(g,t,n,p,e,o))});var v=l?void 0:(f?u?Zoe:U1:u?Rs:UA)(e);return vE(v||e,function(g,p){v&&(g=e[p=g]),vp(A,p,r(g,t,n,p,e,o))}),A},dAe=function(r){return tk(r,4)},BE=function(r){return function(){return r}},EE=function(r){return function(e,t,n){for(var a=-1,i=Object(e),o=n(e),A=o.length;A--;){var s=o[r?A:++a];if(t(i[s],s,i)===!1)break}return e}}(),bE=function(r,e){return r&&EE(r,e,UA)},wp=function(r,e){return function(t,n){if(t==null)return t;if(!Ro(t))return r(t,n);for(var a=t.length,i=e?a:-1,o=Object(t);(e?i--:++i<a)&&n(o[i],i,o)!==!1;);return t}}(bE),Hs=function(r){return r},rk=function(r){return typeof r=="function"?r:Hs},nk=function(r,e){return(Zr(r)?vE:wp)(r,rk(e))},ak=nk,vAe=function(r,e){var t=[];return wp(r,function(n,a,i){e(n,a,i)&&t.push(n)}),t},gAe=function(r){return this.__data__.set(r,"__lodash_hash_undefined__"),this},pAe=function(r){return this.__data__.has(r)};function lv(r){var e=-1,t=r==null?0:r.length;for(this.__data__=new hp;++e<t;)this.add(r[e])}lv.prototype.add=lv.prototype.push=gAe,lv.prototype.has=pAe;var ik=lv,yAe=function(r,e){for(var t=-1,n=r==null?0:r.length;++t<n;)if(e(r[t],t,r))return!0;return!1},ok=function(r,e){return r.has(e)},Ak=function(r,e,t,n,a,i){var o=1&t,A=r.length,s=e.length;if(A!=s&&!(o&&s>A))return!1;var u=i.get(r),f=i.get(e);if(u&&f)return u==e&&f==r;var l=-1,c=!0,h=2&t?new ik:void 0;for(i.set(r,e),i.set(e,r);++l<A;){var d=r[l],v=e[l];if(n)var g=o?n(v,d,l,e,r,i):n(d,v,l,r,e,i);if(g!==void 0){if(g)continue;c=!1;break}if(h){if(!yAe(e,function(p,y){if(!ok(h,y)&&(d===p||a(d,p,t,n,i)))return h.push(y)})){c=!1;break}}else if(d!==v&&!a(d,v,t,n,i)){c=!1;break}}return i.delete(r),i.delete(e),c},mAe=function(r){var e=-1,t=Array(r.size);return r.forEach(function(n,a){t[++e]=[a,n]}),t},xE=function(r){var e=-1,t=Array(r.size);return r.forEach(function(n){t[++e]=n}),t},ES=Va?Va.prototype:void 0,Py=ES?ES.valueOf:void 0,wAe=function(r,e,t,n,a,i,o){switch(t){case"[object DataView]":if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(r.byteLength!=e.byteLength||!i(new tg(r),new tg(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return mf(+r,+e);case"[object Error]":return r.name==e.name&&r.message==e.message;case"[object RegExp]":case"[object String]":return r==e+"";case"[object Map]":var A=mAe;case"[object Set]":var s=1&n;if(A||(A=xE),r.size!=e.size&&!s)return!1;var u=o.get(r);if(u)return u==e;n|=2,o.set(r,e);var f=Ak(A(r),A(e),n,a,i,o);return o.delete(r),f;case"[object Symbol]":if(Py)return Py.call(r)==Py.call(e)}return!1},BAe=Object.prototype.hasOwnProperty,EAe=function(r,e,t,n,a,i){var o=1&t,A=U1(r),s=A.length;if(s!=U1(e).length&&!o)return!1;for(var u=s;u--;){var f=A[u];if(!(o?f in e:BAe.call(e,f)))return!1}var l=i.get(r),c=i.get(e);if(l&&c)return l==e&&c==r;var h=!0;i.set(r,e),i.set(e,r);for(var d=o;++u<s;){var v=r[f=A[u]],g=e[f];if(n)var p=o?n(g,v,f,e,r,i):n(v,g,f,r,e,i);if(!(p===void 0?v===g||a(v,g,t,n,i):p)){h=!1;break}d||(d=f=="constructor")}if(h&&!d){var y=r.constructor,m=e.constructor;y==m||!("constructor"in r)||!("constructor"in e)||typeof y=="function"&&y instanceof y&&typeof m=="function"&&m instanceof m||(h=!1)}return i.delete(r),i.delete(e),h},bS=Object.prototype.hasOwnProperty,bAe=function(r,e,t,n,a,i){var o=Zr(r),A=Zr(e),s=o?"[object Array]":Os(r),u=A?"[object Array]":Os(e),f=(s=s=="[object Arguments]"?"[object Object]":s)=="[object Object]",l=(u=u=="[object Arguments]"?"[object Object]":u)=="[object Object]",c=s==u;if(c&&Ds(r)){if(!Ds(e))return!1;o=!0,f=!1}if(c&&!f)return i||(i=new Hu),o||Rc(r)?Ak(r,e,t,n,a,i):wAe(r,e,s,t,n,a,i);if(!(1&t)){var h=f&&bS.call(r,"__wrapped__"),d=l&&bS.call(e,"__wrapped__");if(h||d){var v=h?r.value():r,g=d?e.value():e;return i||(i=new Hu),a(v,g,t,n,i)}}return!!c&&(i||(i=new Hu),EAe(r,e,t,n,a,i))},sk=function r(e,t,n,a,i){return e===t||(e==null||t==null||!hi(e)&&!hi(t)?e!=e&&t!=t:bAe(e,t,n,a,r,i))},xAe=function(r,e,t,n){var a=t.length,i=a,o=!n;if(r==null)return!i;for(r=Object(r);a--;){var A=t[a];if(o&&A[2]?A[1]!==r[A[0]]:!(A[0]in r))return!1}for(;++a<i;){var s=(A=t[a])[0],u=r[s],f=A[1];if(o&&A[2]){if(u===void 0&&!(s in r))return!1}else{var l=new Hu;if(n)var c=n(u,f,s,r,e,l);if(!(c===void 0?sk(f,u,3,n,l):c))return!1}}return!0},uk=function(r){return r==r&&!ca(r)},CAe=function(r){for(var e=UA(r),t=e.length;t--;){var n=e[t],a=r[n];e[t]=[n,a,uk(a)]}return e},fk=function(r,e){return function(t){return t!=null&&t[r]===e&&(e!==void 0||r in Object(t))}},_Ae=function(r){var e=CAe(r);return e.length==1&&e[0][2]?fk(e[0][0],e[0][1]):function(t){return t===r||xAe(t,r,e)}},Us=function(r){return typeof r=="symbol"||hi(r)&&OA(r)=="[object Symbol]"},SAe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,MAe=/^\w*$/,CE=function(r,e){if(Zr(r))return!1;var t=typeof r;return!(t!="number"&&t!="symbol"&&t!="boolean"&&r!=null&&!Us(r))||MAe.test(r)||!SAe.test(r)||e!=null&&r in Object(e)};function _E(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError("Expected a function");var t=function(){var n=arguments,a=e?e.apply(this,n):n[0],i=t.cache;if(i.has(a))return i.get(a);var o=r.apply(this,n);return t.cache=i.set(a,o)||i,o};return t.cache=new(_E.Cache||hp),t}_E.Cache=hp;var IAe=_E,TAe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,FAe=/\\(\\)?/g,LAe=function(r){var e=IAe(r,function(n){return t.size===500&&t.clear(),n}),t=e.cache;return e}(function(r){var e=[];return r.charCodeAt(0)===46&&e.push(""),r.replace(TAe,function(t,n,a,i){e.push(a?i.replace(FAe,"$1"):n||t)}),e}),zu=function(r,e){for(var t=-1,n=r==null?0:r.length,a=Array(n);++t<n;)a[t]=e(r[t],t,r);return a},xS=Va?Va.prototype:void 0,CS=xS?xS.toString:void 0,DAe=function r(e){if(typeof e=="string")return e;if(Zr(e))return zu(e,r)+"";if(Us(e))return CS?CS.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t},lk=function(r){return r==null?"":DAe(r)},Bp=function(r,e){return Zr(r)?r:CE(r,e)?[r]:LAe(lk(r))},Hc=function(r){if(typeof r=="string"||Us(r))return r;var e=r+"";return e=="0"&&1/r==-1/0?"-0":e},Ep=function(r,e){for(var t=0,n=(e=Bp(e,r)).length;r!=null&&t<n;)r=r[Hc(e[t++])];return t&&t==n?r:void 0},OAe=function(r,e,t){var n=r==null?void 0:Ep(r,e);return n===void 0?t:n},UAe=function(r,e){return r!=null&&e in Object(r)},ck=function(r,e,t){for(var n=-1,a=(e=Bp(e,r)).length,i=!1;++n<a;){var o=Hc(e[n]);if(!(i=r!=null&&t(r,o)))break;r=r[o]}return i||++n!=a?i:!!(a=r==null?0:r.length)&&gE(a)&&gp(o,a)&&(Zr(r)||of(r))},hk=function(r,e){return r!=null&&ck(r,e,UAe)},NAe=function(r,e){return CE(r)&&uk(e)?fk(Hc(r),e):function(t){var n=OAe(t,r);return n===void 0&&n===e?hk(t,r):sk(e,n,3)}},dk=function(r){return function(e){return e==null?void 0:e[r]}},kAe=function(r){return function(e){return Ep(e,r)}},PAe=function(r){return CE(r)?dk(Hc(r)):kAe(r)},Ho=function(r){return typeof r=="function"?r:r==null?Hs:typeof r=="object"?Zr(r)?NAe(r[0],r[1]):_Ae(r):PAe(r)},vk=function(r,e){return(Zr(r)?VN:vAe)(r,Ho(e))},QAe=Object.prototype.hasOwnProperty,RAe=function(r,e){return r!=null&&QAe.call(r,e)},gk=function(r,e){return r!=null&&ck(r,e,RAe)},HAe=Object.prototype.hasOwnProperty,GAe=function(r){if(r==null)return!0;if(Ro(r)&&(Zr(r)||typeof r=="string"||typeof r.splice=="function"||Ds(r)||Rc(r)||of(r)))return!r.length;var e=Os(r);if(e=="[object Map]"||e=="[object Set]")return!r.size;if(yp(r))return!pE(r).length;for(var t in r)if(HAe.call(r,t))return!1;return!0},pk=function(r){return r===void 0},yk=function(r,e){var t=-1,n=Ro(r)?Array(r.length):[];return wp(r,function(a,i,o){n[++t]=e(a,i,o)}),n},mk=function(r,e){return(Zr(r)?zu:yk)(r,Ho(e))},zAe=function(r,e,t,n){var a=-1,i=r==null?0:r.length;for(n&&i&&(t=r[++a]);++a<i;)t=e(t,r[a],a,r);return t},KAe=function(r,e,t,n,a){return a(r,function(i,o,A){t=n?(n=!1,i):e(t,i,o,A)}),t},wk=function(r,e,t){var n=Zr(r)?zAe:KAe,a=arguments.length<3;return n(r,Ho(e),t,a,wp)},jAe=function(r){return typeof r=="string"||!Zr(r)&&hi(r)&&OA(r)=="[object String]"},$Ae=dk("length"),WAe=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),VAe=function(r){return WAe.test(r)},XAe="[\\ud800-\\udfff]",Q1="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",R1="\\ud83c[\\udffb-\\udfff]",Bk="[^\\ud800-\\udfff]",Ek="(?:\\ud83c[\\udde6-\\uddff]){2}",bk="[\\ud800-\\udbff][\\udc00-\\udfff]",_S="(?:"+Q1+"|"+R1+")?",YAe="[\\ufe0e\\ufe0f]?"+_S+("(?:\\u200d(?:"+[Bk,Ek,bk].join("|")+")[\\ufe0e\\ufe0f]?"+_S+")*"),ZAe="(?:"+[Bk+Q1+"?",Q1,Ek,bk,XAe].join("|")+")",SS=RegExp(R1+"(?="+R1+")|"+ZAe+YAe,"g"),qAe=function(r){for(var e=SS.lastIndex=0;SS.test(r);)++e;return e},JAe=function(r){return VAe(r)?qAe(r):$Ae(r)},ese=function(r){if(r==null)return 0;if(Ro(r))return jAe(r)?JAe(r):r.length;var e=Os(r);return e=="[object Map]"||e=="[object Set]"?r.size:pE(r).length},tse=function(r,e,t){var n=Zr(r),a=n||Ds(r)||Rc(r);if(e=Ho(e),t==null){var i=r&&r.constructor;t=a?n?new i:[]:ca(r)&&Pc(i)?JN(mp(r)):{}}return(a?vE:bE)(r,function(o,A,s){return e(t,o,A,s)}),t},MS=Va?Va.isConcatSpreadable:void 0,rse=function(r){return Zr(r)||of(r)||!!(MS&&r&&r[MS])},SE=function r(e,t,n,a,i){var o=-1,A=e.length;for(n||(n=rse),i||(i=[]);++o<A;){var s=e[o];t>0&&n(s)?t>1?r(s,t-1,n,a,i):mE(i,s):a||(i[i.length]=s)}return i},nse=function(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)},IS=Math.max,xk=function(r,e,t){return e=IS(e===void 0?r.length-1:e,0),function(){for(var n=arguments,a=-1,i=IS(n.length-e,0),o=Array(i);++a<i;)o[a]=n[e+a];a=-1;for(var A=Array(e+1);++a<e;)A[a]=n[a];return A[e]=t(o),nse(r,this,A)}},ase=eg?function(r,e){return eg(r,"toString",{configurable:!0,enumerable:!1,value:BE(e),writable:!0})}:Hs,ise=Date.now,Ck=function(r){var e=0,t=0;return function(){var n=ise(),a=16-(n-t);if(t=n,a>0){if(++e>=800)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}(ase),bp=function(r,e){return Ck(xk(r,e,Hs),r+"")},_k=function(r,e,t,n){for(var a=r.length,i=t+(n?1:-1);n?i--:++i<a;)if(e(r[i],i,r))return i;return-1},ose=function(r){return r!=r},Ase=function(r,e,t){for(var n=t-1,a=r.length;++n<a;)if(r[n]===e)return n;return-1},sse=function(r,e,t){return e==e?Ase(r,e,t):_k(r,ose,t)},use=function(r,e){return!!(r!=null&&r.length)&&sse(r,e,0)>-1},fse=function(r,e,t){for(var n=-1,a=r==null?0:r.length;++n<a;)if(t(e,r[n]))return!0;return!1},lse=function(){},cse=Gu&&1/xE(new Gu([,-0]))[1]==1/0?function(r){return new Gu(r)}:lse,hse=function(r,e,t){var n=-1,a=use,i=r.length,o=!0,A=[],s=A;if(t)o=!1,a=fse;else if(i>=200){var u=e?null:cse(r);if(u)return xE(u);o=!1,a=ok,s=new ik}else s=e?[]:A;e:for(;++n<i;){var f=r[n],l=e?e(f):f;if(f=t||f!==0?f:0,o&&l==l){for(var c=s.length;c--;)if(s[c]===l)continue e;e&&s.push(l),A.push(f)}else a(s,l,t)||(s!==A&&s.push(l),A.push(f))}return A},Sk=function(r){return hi(r)&&Ro(r)},dse=bp(function(r){return hse(SE(r,1,Sk,!0))}),vse=function(r,e){return zu(e,function(t){return r[t]})},rg,Mk=function(r){return r==null?[]:vse(r,UA(r))};try{rg={clone:dAe,constant:BE,each:ak,filter:vk,has:gk,isArray:Zr,isEmpty:GAe,isFunction:Pc,isUndefined:pk,keys:UA,map:mk,reduce:wk,size:ese,transform:tse,union:dse,values:Mk}}catch{}rg||(rg=window._);var At=rg,ME=Ar;function Ar(r){this._isDirected=!At.has(r,"directed")||r.directed,this._isMultigraph=!!At.has(r,"multigraph")&&r.multigraph,this._isCompound=!!At.has(r,"compound")&&r.compound,this._label=void 0,this._defaultNodeLabelFn=At.constant(void 0),this._defaultEdgeLabelFn=At.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function TS(r,e){r[e]?r[e]++:r[e]=1}function FS(r,e){--r[e]||delete r[e]}function gl(r,e,t,n){var a=""+e,i=""+t;if(!r&&a>i){var o=a;a=i,i=o}return a+""+i+""+(At.isUndefined(n)?"\0":n)}function gse(r,e,t,n){var a=""+e,i=""+t;if(!r&&a>i){var o=a;a=i,i=o}var A={v:a,w:i};return n&&(A.name=n),A}function Qy(r,e){return gl(r,e.v,e.w,e.name)}Ar.prototype._nodeCount=0,Ar.prototype._edgeCount=0,Ar.prototype.isDirected=function(){return this._isDirected},Ar.prototype.isMultigraph=function(){return this._isMultigraph},Ar.prototype.isCompound=function(){return this._isCompound},Ar.prototype.setGraph=function(r){return this._label=r,this},Ar.prototype.graph=function(){return this._label},Ar.prototype.setDefaultNodeLabel=function(r){return At.isFunction(r)||(r=At.constant(r)),this._defaultNodeLabelFn=r,this},Ar.prototype.nodeCount=function(){return this._nodeCount},Ar.prototype.nodes=function(){return At.keys(this._nodes)},Ar.prototype.sources=function(){var r=this;return At.filter(this.nodes(),function(e){return At.isEmpty(r._in[e])})},Ar.prototype.sinks=function(){var r=this;return At.filter(this.nodes(),function(e){return At.isEmpty(r._out[e])})},Ar.prototype.setNodes=function(r,e){var t=arguments,n=this;return At.each(r,function(a){t.length>1?n.setNode(a,e):n.setNode(a)}),this},Ar.prototype.setNode=function(r,e){return At.has(this._nodes,r)?(arguments.length>1&&(this._nodes[r]=e),this):(this._nodes[r]=arguments.length>1?e:this._defaultNodeLabelFn(r),this._isCompound&&(this._parent[r]="\0",this._children[r]={},this._children["\0"][r]=!0),this._in[r]={},this._preds[r]={},this._out[r]={},this._sucs[r]={},++this._nodeCount,this)},Ar.prototype.node=function(r){return this._nodes[r]},Ar.prototype.hasNode=function(r){return At.has(this._nodes,r)},Ar.prototype.removeNode=function(r){var e=this;if(At.has(this._nodes,r)){var t=function(n){e.removeEdge(e._edgeObjs[n])};delete this._nodes[r],this._isCompound&&(this._removeFromParentsChildList(r),delete this._parent[r],At.each(this.children(r),function(n){e.setParent(n)}),delete this._children[r]),At.each(At.keys(this._in[r]),t),delete this._in[r],delete this._preds[r],At.each(At.keys(this._out[r]),t),delete this._out[r],delete this._sucs[r],--this._nodeCount}return this},Ar.prototype.setParent=function(r,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(At.isUndefined(e))e="\0";else{for(var t=e+="";!At.isUndefined(t);t=this.parent(t))if(t===r)throw new Error("Setting "+e+" as parent of "+r+" would create a cycle");this.setNode(e)}return this.setNode(r),this._removeFromParentsChildList(r),this._parent[r]=e,this._children[e][r]=!0,this},Ar.prototype._removeFromParentsChildList=function(r){delete this._children[this._parent[r]][r]},Ar.prototype.parent=function(r){if(this._isCompound){var e=this._parent[r];if(e!=="\0")return e}},Ar.prototype.children=function(r){if(At.isUndefined(r)&&(r="\0"),this._isCompound){var e=this._children[r];if(e)return At.keys(e)}else{if(r==="\0")return this.nodes();if(this.hasNode(r))return[]}},Ar.prototype.predecessors=function(r){var e=this._preds[r];if(e)return At.keys(e)},Ar.prototype.successors=function(r){var e=this._sucs[r];if(e)return At.keys(e)},Ar.prototype.neighbors=function(r){var e=this.predecessors(r);if(e)return At.union(e,this.successors(r))},Ar.prototype.isLeaf=function(r){return(this.isDirected()?this.successors(r):this.neighbors(r)).length===0},Ar.prototype.filterNodes=function(r){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var t=this;At.each(this._nodes,function(i,o){r(o)&&e.setNode(o,i)}),At.each(this._edgeObjs,function(i){e.hasNode(i.v)&&e.hasNode(i.w)&&e.setEdge(i,t.edge(i))});var n={};function a(i){var o=t.parent(i);return o===void 0||e.hasNode(o)?(n[i]=o,o):o in n?n[o]:a(o)}return this._isCompound&&At.each(e.nodes(),function(i){e.setParent(i,a(i))}),e},Ar.prototype.setDefaultEdgeLabel=function(r){return At.isFunction(r)||(r=At.constant(r)),this._defaultEdgeLabelFn=r,this},Ar.prototype.edgeCount=function(){return this._edgeCount},Ar.prototype.edges=function(){return At.values(this._edgeObjs)},Ar.prototype.setPath=function(r,e){var t=this,n=arguments;return At.reduce(r,function(a,i){return n.length>1?t.setEdge(a,i,e):t.setEdge(a,i),i}),this},Ar.prototype.setEdge=function(){var r,e,t,n,a=!1,i=arguments[0];typeof i=="object"&&i!==null&&"v"in i?(r=i.v,e=i.w,t=i.name,arguments.length===2&&(n=arguments[1],a=!0)):(r=i,e=arguments[1],t=arguments[3],arguments.length>2&&(n=arguments[2],a=!0)),r=""+r,e=""+e,At.isUndefined(t)||(t=""+t);var o=gl(this._isDirected,r,e,t);if(At.has(this._edgeLabels,o))return a&&(this._edgeLabels[o]=n),this;if(!At.isUndefined(t)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(r),this.setNode(e),this._edgeLabels[o]=a?n:this._defaultEdgeLabelFn(r,e,t);var A=gse(this._isDirected,r,e,t);return r=A.v,e=A.w,Object.freeze(A),this._edgeObjs[o]=A,TS(this._preds[e],r),TS(this._sucs[r],e),this._in[e][o]=A,this._out[r][o]=A,this._edgeCount++,this},Ar.prototype.edge=function(r,e,t){var n=arguments.length===1?Qy(this._isDirected,arguments[0]):gl(this._isDirected,r,e,t);return this._edgeLabels[n]},Ar.prototype.hasEdge=function(r,e,t){var n=arguments.length===1?Qy(this._isDirected,arguments[0]):gl(this._isDirected,r,e,t);return At.has(this._edgeLabels,n)},Ar.prototype.removeEdge=function(r,e,t){var n=arguments.length===1?Qy(this._isDirected,arguments[0]):gl(this._isDirected,r,e,t),a=this._edgeObjs[n];return a&&(r=a.v,e=a.w,delete this._edgeLabels[n],delete this._edgeObjs[n],FS(this._preds[e],r),FS(this._sucs[r],e),delete this._in[e][n],delete this._out[r][n],this._edgeCount--),this},Ar.prototype.inEdges=function(r,e){var t=this._in[r];if(t){var n=At.values(t);return e?At.filter(n,function(a){return a.v===e}):n}},Ar.prototype.outEdges=function(r,e){var t=this._out[r];if(t){var n=At.values(t);return e?At.filter(n,function(a){return a.w===e}):n}},Ar.prototype.nodeEdges=function(r,e){var t=this.inEdges(r,e);if(t)return t.concat(this.outEdges(r,e))};var LS={Graph:ME,version:"2.1.8"},pse={write:function(r){var e={options:{directed:r.isDirected(),multigraph:r.isMultigraph(),compound:r.isCompound()},nodes:yse(r),edges:mse(r)};return At.isUndefined(r.graph())||(e.value=At.clone(r.graph())),e},read:function(r){var e=new ME(r.options).setGraph(r.value);return At.each(r.nodes,function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)}),At.each(r.edges,function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),e}};function yse(r){return At.map(r.nodes(),function(e){var t=r.node(e),n=r.parent(e),a={v:e};return At.isUndefined(t)||(a.value=t),At.isUndefined(n)||(a.parent=n),a})}function mse(r){return At.map(r.edges(),function(e){var t=r.edge(e),n={v:e.v,w:e.w};return At.isUndefined(e.name)||(n.name=e.name),At.isUndefined(t)||(n.value=t),n})}var wse=function(r){var e,t={},n=[];function a(i){At.has(t,i)||(t[i]=!0,e.push(i),At.each(r.successors(i),a),At.each(r.predecessors(i),a))}return At.each(r.nodes(),function(i){e=[],a(i),e.length&&n.push(e)}),n},Ik=Ua;function Ua(){this._arr=[],this._keyIndices={}}Ua.prototype.size=function(){return this._arr.length},Ua.prototype.keys=function(){return this._arr.map(function(r){return r.key})},Ua.prototype.has=function(r){return At.has(this._keyIndices,r)},Ua.prototype.priority=function(r){var e=this._keyIndices[r];if(e!==void 0)return this._arr[e].priority},Ua.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},Ua.prototype.add=function(r,e){var t=this._keyIndices;if(r=String(r),!At.has(t,r)){var n=this._arr,a=n.length;return t[r]=a,n.push({key:r,priority:e}),this._decrease(a),!0}return!1},Ua.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key},Ua.prototype.decrease=function(r,e){var t=this._keyIndices[r];if(e>this._arr[t].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[t].priority+" New: "+e);this._arr[t].priority=e,this._decrease(t)},Ua.prototype._heapify=function(r){var e=this._arr,t=2*r,n=t+1,a=r;t<e.length&&(a=e[t].priority<e[a].priority?t:a,n<e.length&&(a=e[n].priority<e[a].priority?n:a),a!==r&&(this._swap(r,a),this._heapify(a)))},Ua.prototype._decrease=function(r){for(var e,t=this._arr,n=t[r].priority;r!==0&&!(t[e=r>>1].priority<n);)this._swap(r,e),r=e},Ua.prototype._swap=function(r,e){var t=this._arr,n=this._keyIndices,a=t[r],i=t[e];t[r]=i,t[e]=a,n[i.key]=r,n[a.key]=e};var Tk=function(r,e,t,n){return function(a,i,o,A){var s,u,f={},l=new Ik,c=function(h){var d=h.v!==s?h.v:h.w,v=f[d],g=o(h),p=u.distance+g;if(g<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+h+" Weight: "+g);p<v.distance&&(v.distance=p,v.predecessor=s,l.decrease(d,p))};for(a.nodes().forEach(function(h){var d=h===i?0:Number.POSITIVE_INFINITY;f[h]={distance:d},l.add(h,d)});l.size()>0&&(s=l.removeMin(),(u=f[s]).distance!==Number.POSITIVE_INFINITY);)A(s).forEach(c);return f}(r,String(e),t||Bse,n||function(a){return r.outEdges(a)})},Bse=At.constant(1),Ese=function(r,e,t){return At.transform(r.nodes(),function(n,a){n[a]=Tk(r,a,e,t)},{})},Fk=function(r){var e=0,t=[],n={},a=[];function i(o){var A=n[o]={onStack:!0,lowlink:e,index:e++};if(t.push(o),r.successors(o).forEach(function(f){At.has(n,f)?n[f].onStack&&(A.lowlink=Math.min(A.lowlink,n[f].index)):(i(f),A.lowlink=Math.min(A.lowlink,n[f].lowlink))}),A.lowlink===A.index){var s,u=[];do s=t.pop(),n[s].onStack=!1,u.push(s);while(o!==s);a.push(u)}}return r.nodes().forEach(function(o){At.has(n,o)||i(o)}),a},bse=function(r){return At.filter(Fk(r),function(e){return e.length>1||e.length===1&&r.hasEdge(e[0],e[0])})},xse=function(r,e,t){return function(n,a,i){var o={},A=n.nodes();return A.forEach(function(s){o[s]={},o[s][s]={distance:0},A.forEach(function(u){s!==u&&(o[s][u]={distance:Number.POSITIVE_INFINITY})}),i(s).forEach(function(u){var f=u.v===s?u.w:u.v,l=a(u);o[s][f]={distance:l,predecessor:s}})}),A.forEach(function(s){var u=o[s];A.forEach(function(f){var l=o[f];A.forEach(function(c){var h=l[s],d=u[c],v=l[c],g=h.distance+d.distance;g<v.distance&&(v.distance=g,v.predecessor=d.predecessor)})})}),o}(r,e||Cse,t||function(n){return r.outEdges(n)})},Cse=At.constant(1),Ry=Lk;function Lk(r){var e={},t={},n=[];if(At.each(r.sinks(),function a(i){if(At.has(t,i))throw new ng;At.has(e,i)||(t[i]=!0,e[i]=!0,At.each(r.predecessors(i),a),delete t[i],n.push(i))}),At.size(e)!==r.nodeCount())throw new ng;return n}function ng(){}Lk.CycleException=ng,ng.prototype=new Error;var DS=function(r,e,t){At.isArray(e)||(e=[e]);var n=(r.isDirected()?r.successors:r.neighbors).bind(r),a=[],i={};return At.each(e,function(o){if(!r.hasNode(o))throw new Error("Graph does not have node: "+o);Dk(r,o,t==="post",i,n,a)}),a};function Dk(r,e,t,n,a,i){At.has(n,e)||(n[e]=!0,t||i.push(e),At.each(a(e),function(o){Dk(r,o,t,n,a,i)}),t&&i.push(e))}var ag,_se={Graph:LS.Graph,json:pse,alg:{components:wse,dijkstra:Tk,dijkstraAll:Ese,findCycles:bse,floydWarshall:xse,isAcyclic:function(r){try{Ry(r)}catch(e){if(e instanceof Ry.CycleException)return!1;throw e}return!0},postorder:function(r,e){return DS(r,e,"post")},preorder:function(r,e){return DS(r,e,"pre")},prim:function(r,e){var t,n=new ME,a={},i=new Ik;function o(s){var u=s.v===t?s.w:s.v,f=i.priority(u);if(f!==void 0){var l=e(s);l<f&&(a[u]=t,i.decrease(u,l))}}if(r.nodeCount()===0)return n;At.each(r.nodes(),function(s){i.add(s,Number.POSITIVE_INFINITY),n.setNode(s)}),i.decrease(r.nodes()[0],0);for(var A=!1;i.size()>0;){if(t=i.removeMin(),At.has(a,t))n.setEdge(t,a[t]);else{if(A)throw new Error("Input graph is not connected: "+r);A=!0}r.nodeEdges(t).forEach(o)}return n},tarjan:Fk,topsort:Ry},version:LS.version};try{ag=_se}catch{}ag||(ag=window.graphlib);var pi=ag,Sse=function(r){return tk(r,5)},lc=function(r,e,t){if(!ca(t))return!1;var n=typeof e;return!!(n=="number"?Ro(t)&&gp(e,t.length):n=="string"&&e in t)&&mf(t[e],r)},Ok=Object.prototype,Mse=Ok.hasOwnProperty,Ise=bp(function(r,e){r=Object(r);var t=-1,n=e.length,a=n>2?e[2]:void 0;for(a&&lc(e[0],e[1],a)&&(n=1);++t<n;)for(var i=e[t],o=Rs(i),A=-1,s=o.length;++A<s;){var u=o[A],f=r[u];(f===void 0||mf(f,Ok[u])&&!Mse.call(r,u))&&(r[u]=i[u])}return r}),Tse=function(r){return function(e,t,n){var a=Object(e);if(!Ro(e)){var i=Ho(t);e=UA(e),t=function(A){return i(a[A],A,a)}}var o=r(e,t,n);return o>-1?a[i?e[o]:o]:void 0}},Fse=/^\s+|\s+$/g,Lse=/^[-+]0x[0-9a-f]+$/i,Dse=/^0b[01]+$/i,Ose=/^0o[0-7]+$/i,Use=parseInt,Nse=function(r){if(typeof r=="number")return r;if(Us(r))return NaN;if(ca(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=ca(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=r.replace(Fse,"");var t=Dse.test(r);return t||Ose.test(r)?Use(r.slice(2),t?2:8):Lse.test(r)?NaN:+r},cv=function(r){return r?(r=Nse(r))===1/0||r===-1/0?17976931348623157e292*(r<0?-1:1):r==r?r:0:r===0?r:0},kse=function(r){var e=cv(r),t=e%1;return e==e?t?e-t:e:0},Pse=Math.max,Qse=Tse(function(r,e,t){var n=r==null?0:r.length;if(!n)return-1;var a=t==null?0:kse(t);return a<0&&(a=Pse(n+a,0)),_k(r,Ho(e),a)}),Uk=function(r){return r!=null&&r.length?SE(r,1):[]},Rse=function(r,e){return r==null?r:EE(r,rk(e),Rs)},Hse=function(r){var e=r==null?0:r.length;return e?r[e-1]:void 0},Gse=function(r,e){var t={};return e=Ho(e),bE(r,function(n,a,i){dp(t,a,e(n,a,i))}),t},IE=function(r,e,t){for(var n=-1,a=r.length;++n<a;){var i=r[n],o=e(i);if(o!=null&&(A===void 0?o==o&&!Us(o):t(o,A)))var A=o,s=i}return s},zse=function(r,e){return r>e},Kse=function(r){return r&&r.length?IE(r,Hs,zse):void 0},H1=function(r,e,t){(t!==void 0&&!mf(r[e],t)||t===void 0&&!(e in r))&&dp(r,e,t)},jse=Function.prototype,$se=Object.prototype,Nk=jse.toString,Wse=$se.hasOwnProperty,Vse=Nk.call(Object),Xse=function(r){if(!hi(r)||OA(r)!="[object Object]")return!1;var e=mp(r);if(e===null)return!0;var t=Wse.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Nk.call(t)==Vse},G1=function(r,e){if((e!=="constructor"||typeof r[e]!="function")&&e!="__proto__")return r[e]},Yse=function(r){return Qc(r,Rs(r))},Zse=function(r,e,t,n,a,i,o){var A=G1(r,t),s=G1(e,t),u=o.get(s);if(u)H1(r,t,u);else{var f=i?i(A,s,t+"",r,e,o):void 0,l=f===void 0;if(l){var c=Zr(s),h=!c&&Ds(s),d=!c&&!h&&Rc(s);f=s,c||h||d?Zr(A)?f=A:Sk(A)?f=WN(A):h?(l=!1,f=$N(s,!0)):d?(l=!1,f=qN(s,!0)):f=[]:Xse(s)||of(s)?(f=A,of(A)?f=Yse(A):ca(A)&&!Pc(A)||(f=ek(s))):l=!1}l&&(o.set(s,f),a(f,s,n,i,o),o.delete(s)),H1(r,t,f)}},qse=function r(e,t,n,a,i){e!==t&&EE(t,function(o,A){if(i||(i=new Hu),ca(o))Zse(e,t,A,n,r,a,i);else{var s=a?a(G1(e,A),o,A+"",e,t,i):void 0;s===void 0&&(s=o),H1(e,A,s)}},Rs)},Jse=function(r){return bp(function(e,t){var n=-1,a=t.length,i=a>1?t[a-1]:void 0,o=a>2?t[2]:void 0;for(i=r.length>3&&typeof i=="function"?(a--,i):void 0,o&&lc(t[0],t[1],o)&&(i=a<3?void 0:i,a=1),e=Object(e);++n<a;){var A=t[n];A&&r(e,A,n,i)}return e})}(function(r,e,t){qse(r,e,t)}),kk=function(r,e){return r<e},eue=function(r){return r&&r.length?IE(r,Hs,kk):void 0},tue=function(r,e){return r&&r.length?IE(r,Ho(e),kk):void 0},rue=function(){return gi.Date.now()},nue=function(r,e,t,n){if(!ca(r))return r;for(var a=-1,i=(e=Bp(e,r)).length,o=i-1,A=r;A!=null&&++a<i;){var s=Hc(e[a]),u=t;if(s==="__proto__"||s==="constructor"||s==="prototype")return r;if(a!=o){var f=A[s];(u=n?n(f,s,A):void 0)===void 0&&(u=ca(f)?f:gp(e[a+1])?[]:{})}vp(A,s,u),A=A[s]}return r},aue=function(r,e,t){for(var n=-1,a=e.length,i={};++n<a;){var o=e[n],A=Ep(r,o);t(A,o)&&nue(i,Bp(o,r),A)}return i},iue=function(r,e){return aue(r,e,function(t,n){return hk(r,n)})},oue=function(r){return Ck(xk(r,void 0,Uk),r+"")}(function(r,e){return r==null?{}:iue(r,e)}),Aue=Math.ceil,sue=Math.max,uue=function(r,e,t,n){for(var a=-1,i=sue(Aue((e-r)/(t||1)),0),o=Array(i);i--;)o[n?i:++a]=r,r+=t;return o},fue=function(r){return function(e,t,n){return n&&typeof n!="number"&&lc(e,t,n)&&(t=n=void 0),e=cv(e),t===void 0?(t=e,e=0):t=cv(t),n=n===void 0?e<t?1:-1:cv(n),uue(e,t,n,r)}}(),lue=function(r,e){var t=r.length;for(r.sort(e);t--;)r[t]=r[t].value;return r},cue=function(r,e){if(r!==e){var t=r!==void 0,n=r===null,a=r==r,i=Us(r),o=e!==void 0,A=e===null,s=e==e,u=Us(e);if(!A&&!u&&!i&&r>e||i&&o&&s&&!A&&!u||n&&o&&s||!t&&s||!a)return 1;if(!n&&!i&&!u&&r<e||u&&t&&a&&!n&&!i||A&&t&&a||!o&&a||!s)return-1}return 0},hue=function(r,e,t){for(var n=-1,a=r.criteria,i=e.criteria,o=a.length,A=t.length;++n<o;){var s=cue(a[n],i[n]);if(s)return n>=A?s:s*(t[n]=="desc"?-1:1)}return r.index-e.index},due=function(r,e,t){e=e.length?zu(e,function(i){return Zr(i)?function(o){return Ep(o,i.length===1?i[0]:i)}:i}):[Hs];var n=-1;e=zu(e,pp(Ho));var a=yk(r,function(i,o,A){return{criteria:zu(e,function(s){return s(i)}),index:++n,value:i}});return lue(a,function(i,o){return hue(i,o,t)})},vue=bp(function(r,e){if(r==null)return[];var t=e.length;return t>1&&lc(r,e[0],e[1])?e=[]:t>2&&lc(e[0],e[1],e[2])&&(e=[e[0]]),due(r,SE(e,1),[])}),gue=0,pue=function(r){var e=++gue;return lk(r)+e},yue=function(r,e,t){for(var n=-1,a=r.length,i=e.length,o={};++n<a;){var A=n<i?e[n]:void 0;t(o,r[n],A)}return o},ig,mue=function(r,e){return yue(r||[],e||[],vp)};try{ig={cloneDeep:Sse,constant:BE,defaults:Ise,each:ak,filter:vk,find:Qse,flatten:Uk,forEach:nk,forIn:Rse,has:gk,isUndefined:pk,last:Hse,map:mk,mapValues:Gse,max:Kse,merge:Jse,min:eue,minBy:tue,now:rue,pick:oue,range:fue,reduce:wk,sortBy:vue,uniqueId:pue,values:Mk,zipObject:mue}}catch{}ig||(ig=window._);var X=ig,wue=hv;function hv(){var r={};r._next=r._prev=r,this._sentinel=r}function OS(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function Bue(r,e){if(r!=="_next"&&r!=="_prev")return e}hv.prototype.dequeue=function(){var r=this._sentinel,e=r._prev;if(e!==r)return OS(e),e},hv.prototype.enqueue=function(r){var e=this._sentinel;r._prev&&r._next&&OS(r),r._next=e._next,e._next._prev=r,e._next=r,r._prev=e},hv.prototype.toString=function(){for(var r=[],e=this._sentinel,t=e._prev;t!==e;)r.push(JSON.stringify(t,Bue)),t=t._prev;return"["+r.join(", ")+"]"};var Eue=pi.Graph,bue=function(r,e){if(r.nodeCount()<=1)return[];var t=function(a,i){var o=new Eue,A=0,s=0;X.forEach(a.nodes(),function(l){o.setNode(l,{v:l,in:0,out:0})}),X.forEach(a.edges(),function(l){var c=o.edge(l.v,l.w)||0,h=i(l),d=c+h;o.setEdge(l.v,l.w,d),s=Math.max(s,o.node(l.v).out+=h),A=Math.max(A,o.node(l.w).in+=h)});var u=X.range(s+A+3).map(function(){return new wue}),f=A+1;return X.forEach(o.nodes(),function(l){z1(u,f,o.node(l))}),{graph:o,buckets:u,zeroIdx:f}}(r,e||xue),n=function(a,i,o){for(var A,s=[],u=i[i.length-1],f=i[0];a.nodeCount();){for(;A=f.dequeue();)Hy(a,i,o,A);for(;A=u.dequeue();)Hy(a,i,o,A);if(a.nodeCount()){for(var l=i.length-2;l>0;--l)if(A=i[l].dequeue()){s=s.concat(Hy(a,i,o,A,!0));break}}}return s}(t.graph,t.buckets,t.zeroIdx);return X.flatten(X.map(n,function(a){return r.outEdges(a.v,a.w)}),!0)},xue=X.constant(1);function Hy(r,e,t,n,a){var i=a?[]:void 0;return X.forEach(r.inEdges(n.v),function(o){var A=r.edge(o),s=r.node(o.v);a&&i.push({v:o.v,w:o.w}),s.out-=A,z1(e,t,s)}),X.forEach(r.outEdges(n.v),function(o){var A=r.edge(o),s=o.w,u=r.node(s);u.in-=A,z1(e,t,u)}),r.removeNode(n.v),i}function z1(r,e,t){t.out?t.in?r[t.out-t.in+e].enqueue(t):r[r.length-1].enqueue(t):r[0].enqueue(t)}var US={run:function(r){var e=r.graph().acyclicer==="greedy"?bue(r,function(t){return function(n){return t.edge(n).weight}}(r)):function(t){var n=[],a={},i={};function o(A){X.has(i,A)||(i[A]=!0,a[A]=!0,X.forEach(t.outEdges(A),function(s){X.has(a,s.w)?n.push(s):o(s.w)}),delete a[A])}return X.forEach(t.nodes(),o),n}(r);X.forEach(e,function(t){var n=r.edge(t);r.removeEdge(t),n.forwardName=t.name,n.reversed=!0,r.setEdge(t.w,t.v,n,X.uniqueId("rev"))})},undo:function(r){X.forEach(r.edges(),function(e){var t=r.edge(e);if(t.reversed){r.removeEdge(e);var n=t.forwardName;delete t.reversed,delete t.forwardName,r.setEdge(e.w,e.v,t,n)}})}},NS=pi.Graph,Un={addDummyNode:kS,simplify:function(r){var e=new NS().setGraph(r.graph());return X.forEach(r.nodes(),function(t){e.setNode(t,r.node(t))}),X.forEach(r.edges(),function(t){var n=e.edge(t.v,t.w)||{weight:0,minlen:1},a=r.edge(t);e.setEdge(t.v,t.w,{weight:n.weight+a.weight,minlen:Math.max(n.minlen,a.minlen)})}),e},asNonCompoundGraph:function(r){var e=new NS({multigraph:r.isMultigraph()}).setGraph(r.graph());return X.forEach(r.nodes(),function(t){r.children(t).length||e.setNode(t,r.node(t))}),X.forEach(r.edges(),function(t){e.setEdge(t,r.edge(t))}),e},successorWeights:function(r){var e=X.map(r.nodes(),function(t){var n={};return X.forEach(r.outEdges(t),function(a){n[a.w]=(n[a.w]||0)+r.edge(a).weight}),n});return X.zipObject(r.nodes(),e)},predecessorWeights:function(r){var e=X.map(r.nodes(),function(t){var n={};return X.forEach(r.inEdges(t),function(a){n[a.v]=(n[a.v]||0)+r.edge(a).weight}),n});return X.zipObject(r.nodes(),e)},intersectRect:function(r,e){var t,n,a=r.x,i=r.y,o=e.x-a,A=e.y-i,s=r.width/2,u=r.height/2;if(!o&&!A)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(A)*s>Math.abs(o)*u?(A<0&&(u=-u),t=u*o/A,n=u):(o<0&&(s=-s),t=s,n=s*A/o),{x:a+t,y:i+n}},buildLayerMatrix:function(r){var e=X.map(X.range(PS(r)+1),function(){return[]});return X.forEach(r.nodes(),function(t){var n=r.node(t),a=n.rank;X.isUndefined(a)||(e[a][n.order]=t)}),e},normalizeRanks:function(r){var e=X.min(X.map(r.nodes(),function(t){return r.node(t).rank}));X.forEach(r.nodes(),function(t){var n=r.node(t);X.has(n,"rank")&&(n.rank-=e)})},removeEmptyRanks:function(r){var e=X.min(X.map(r.nodes(),function(i){return r.node(i).rank})),t=[];X.forEach(r.nodes(),function(i){var o=r.node(i).rank-e;t[o]||(t[o]=[]),t[o].push(i)});var n=0,a=r.graph().nodeRankFactor;X.forEach(t,function(i,o){X.isUndefined(i)&&o%a!=0?--n:n&&X.forEach(i,function(A){r.node(A).rank+=n})})},addBorderNode:function(r,e,t,n){var a={width:0,height:0};return arguments.length>=4&&(a.rank=t,a.order=n),kS(r,"border",a,e)},maxRank:PS,partition:function(r,e){var t={lhs:[],rhs:[]};return X.forEach(r,function(n){e(n)?t.lhs.push(n):t.rhs.push(n)}),t},time:function(r,e){var t=X.now();try{return e()}finally{console.log(r+" time: "+(X.now()-t)+"ms")}},notime:function(r,e){return e()}};function kS(r,e,t,n){var a;do a=X.uniqueId(n);while(r.hasNode(a));return t.dummy=e,r.setNode(a,t),a}function PS(r){return X.max(X.map(r.nodes(),function(e){var t=r.node(e).rank;if(!X.isUndefined(t))return t}))}var QS={run:function(r){r.graph().dummyChains=[],X.forEach(r.edges(),function(e){(function(t,n){var a,i,o,A=n.v,s=t.node(A).rank,u=n.w,f=t.node(u).rank,l=n.name,c=t.edge(n),h=c.labelRank;if(f!==s+1){for(t.removeEdge(n),o=0,++s;s<f;++o,++s)c.points=[],i={width:0,height:0,edgeLabel:c,edgeObj:n,rank:s},a=Un.addDummyNode(t,"edge",i,"_d"),s===h&&(i.width=c.width,i.height=c.height,i.dummy="edge-label",i.labelpos=c.labelpos),t.setEdge(A,a,{weight:c.weight},l),o===0&&t.graph().dummyChains.push(a),A=a;t.setEdge(A,u,{weight:c.weight},l)}})(r,e)})},undo:function(r){X.forEach(r.graph().dummyChains,function(e){var t,n=r.node(e),a=n.edgeLabel;for(r.setEdge(n.edgeObj,a);n.dummy;)t=r.successors(e)[0],r.removeNode(e),a.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(a.x=n.x,a.y=n.y,a.width=n.width,a.height=n.height),e=t,n=r.node(e)})}},Pk=function(r){var e={};X.forEach(r.sources(),function t(n){var a=r.node(n);if(X.has(e,n))return a.rank;e[n]=!0;var i=X.min(X.map(r.outEdges(n),function(o){return t(o.w)-r.edge(o).minlen}));return i!==Number.POSITIVE_INFINITY&&i!=null||(i=0),a.rank=i})},Qk=function(r,e){return r.node(e.w).rank-r.node(e.v).rank-r.edge(e).minlen},Cue=pi.Graph,og=Qk,Rk=function(r){var e,t,n=new Cue({directed:!1}),a=r.nodes()[0],i=r.nodeCount();for(n.setNode(a,{});_ue(n,r)<i;)e=Sue(n,r),t=n.hasNode(e.v)?og(r,e):-og(r,e),Mue(n,r,t);return n};function _ue(r,e){return X.forEach(r.nodes(),function t(n){X.forEach(e.nodeEdges(n),function(a){var i=a.v,o=n===i?a.w:i;r.hasNode(o)||og(e,a)||(r.setNode(o,{}),r.setEdge(n,o,{}),t(o))})}),r.nodeCount()}function Sue(r,e){return X.minBy(e.edges(),function(t){if(r.hasNode(t.v)!==r.hasNode(t.w))return og(e,t)})}function Mue(r,e,t){X.forEach(r.nodes(),function(n){e.node(n).rank+=t})}var Iue=Qk,Tue=Pk,Fue=pi.alg.preorder,Lue=pi.alg.postorder,Due=Un.simplify,Oue=As;function As(r){r=Due(r),Tue(r);var e,t=Rk(r);for(FE(t),TE(t,r);e=zk(t);)jk(t,r,e,Kk(t,r,e))}function TE(r,e){var t=Lue(r,r.nodes());t=t.slice(0,t.length-1),X.forEach(t,function(n){(function(a,i,o){var A=a.node(o).parent;a.edge(o,A).cutvalue=Hk(a,i,o)})(r,e,n)})}function Hk(r,e,t){var n=r.node(t).parent,a=!0,i=e.edge(t,n),o=0;return i||(a=!1,i=e.edge(n,t)),o=i.weight,X.forEach(e.nodeEdges(t),function(A){var s,u,f=A.v===t,l=f?A.w:A.v;if(l!==n){var c=f===a,h=e.edge(A).weight;if(o+=c?h:-h,s=t,u=l,r.hasEdge(s,u)){var d=r.edge(t,l).cutvalue;o+=c?-d:d}}}),o}function FE(r,e){arguments.length<2&&(e=r.nodes()[0]),Gk(r,{},1,e)}function Gk(r,e,t,n,a){var i=t,o=r.node(n);return e[n]=!0,X.forEach(r.neighbors(n),function(A){X.has(e,A)||(t=Gk(r,e,t,A,n))}),o.low=i,o.lim=t++,a?o.parent=a:delete o.parent,t}function zk(r){return X.find(r.edges(),function(e){return r.edge(e).cutvalue<0})}function Kk(r,e,t){var n=t.v,a=t.w;e.hasEdge(n,a)||(n=t.w,a=t.v);var i=r.node(n),o=r.node(a),A=i,s=!1;i.lim>o.lim&&(A=o,s=!0);var u=X.filter(e.edges(),function(f){return s===RS(r,r.node(f.v),A)&&s!==RS(r,r.node(f.w),A)});return X.minBy(u,function(f){return Iue(e,f)})}function jk(r,e,t,n){var a=t.v,i=t.w;r.removeEdge(a,i),r.setEdge(n.v,n.w,{}),FE(r),TE(r,e),function(o,A){var s=X.find(o.nodes(),function(f){return!A.node(f).parent}),u=Fue(o,s);u=u.slice(1),X.forEach(u,function(f){var l=o.node(f).parent,c=A.edge(f,l),h=!1;c||(c=A.edge(l,f),h=!0),A.node(f).rank=A.node(l).rank+(h?c.minlen:-c.minlen)})}(r,e)}function RS(r,e,t){return t.low<=e.lim&&e.lim<=t.lim}As.initLowLimValues=FE,As.initCutValues=TE,As.calcCutValue=Hk,As.leaveEdge=zk,As.enterEdge=Kk,As.exchangeEdges=jk;var $k=Pk,Uue=function(r){switch(r.graph().ranker){case"network-simplex":HS(r);break;case"tight-tree":(function(e){$k(e),Rk(e)})(r);break;case"longest-path":Nue(r);break;default:HS(r)}},Nue=$k;function HS(r){Oue(r)}var kue=function(r){var e=function(t){var n={},a=0;function i(o){var A=a;X.forEach(t.children(o),i),n[o]={low:A,lim:a++}}return X.forEach(t.children(),i),n}(r);X.forEach(r.graph().dummyChains,function(t){for(var n=r.node(t),a=n.edgeObj,i=function(l,c,h,d){var v,g,p=[],y=[],m=Math.min(c[h].low,c[d].low),w=Math.max(c[h].lim,c[d].lim);v=h;do v=l.parent(v),p.push(v);while(v&&(c[v].low>m||w>c[v].lim));for(g=v,v=d;(v=l.parent(v))!==g;)y.push(v);return{path:p.concat(y.reverse()),lca:g}}(r,e,a.v,a.w),o=i.path,A=i.lca,s=0,u=o[s],f=!0;t!==a.w;){if(n=r.node(t),f){for(;(u=o[s])!==A&&r.node(u).maxRank<n.rank;)s++;u===A&&(f=!1)}if(!f){for(;s<o.length-1&&r.node(u=o[s+1]).minRank<=n.rank;)s++;u=o[s]}r.setParent(t,u),t=r.successors(t)[0]}})},GS={run:function(r){var e=Un.addDummyNode(r,"root",{},"_root"),t=function(o){var A={};function s(u,f){var l=o.children(u);l&&l.length&&X.forEach(l,function(c){s(c,f+1)}),A[u]=f}return X.forEach(o.children(),function(u){s(u,1)}),A}(r),n=X.max(X.values(t))-1,a=2*n+1;r.graph().nestingRoot=e,X.forEach(r.edges(),function(o){r.edge(o).minlen*=a});var i=function(o){return X.reduce(o.edges(),function(A,s){return A+o.edge(s).weight},0)}(r)+1;X.forEach(r.children(),function(o){Wk(r,e,a,i,n,t,o)}),r.graph().nodeRankFactor=a},cleanup:function(r){var e=r.graph();r.removeNode(e.nestingRoot),delete e.nestingRoot,X.forEach(r.edges(),function(t){r.edge(t).nestingEdge&&r.removeEdge(t)})}};function Wk(r,e,t,n,a,i,o){var A=r.children(o);if(A.length){var s=Un.addBorderNode(r,"_bt"),u=Un.addBorderNode(r,"_bb"),f=r.node(o);r.setParent(s,o),f.borderTop=s,r.setParent(u,o),f.borderBottom=u,X.forEach(A,function(l){Wk(r,e,t,n,a,i,l);var c=r.node(l),h=c.borderTop?c.borderTop:l,d=c.borderBottom?c.borderBottom:l,v=c.borderTop?n:2*n,g=h!==d?1:a-i[o]+1;r.setEdge(s,h,{weight:v,minlen:g,nestingEdge:!0}),r.setEdge(d,u,{weight:v,minlen:g,nestingEdge:!0})}),r.parent(o)||r.setEdge(e,s,{weight:0,minlen:a+i[o]})}else o!==e&&r.setEdge(e,o,{weight:0,minlen:t})}var Pue=function(r){X.forEach(r.children(),function e(t){var n=r.children(t),a=r.node(t);if(n.length&&X.forEach(n,e),X.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var i=a.minRank,o=a.maxRank+1;i<o;++i)zS(r,"borderLeft","_bl",t,a,i),zS(r,"borderRight","_br",t,a,i)}})};function zS(r,e,t,n,a,i){var o={width:0,height:0,rank:i,borderType:e},A=a[e][i-1],s=Un.addDummyNode(r,"border",o,t);a[e][i]=s,r.setParent(s,n),A&&r.setEdge(A,s,{weight:1})}var KS={adjust:function(r){var e=r.graph().rankdir.toLowerCase();e!=="lr"&&e!=="rl"||jS(r)},undo:function(r){var e=r.graph().rankdir.toLowerCase();e!=="bt"&&e!=="rl"||function(t){X.forEach(t.nodes(),function(n){Gy(t.node(n))}),X.forEach(t.edges(),function(n){var a=t.edge(n);X.forEach(a.points,Gy),X.has(a,"y")&&Gy(a)})}(r),e!=="lr"&&e!=="rl"||(function(t){X.forEach(t.nodes(),function(n){zy(t.node(n))}),X.forEach(t.edges(),function(n){var a=t.edge(n);X.forEach(a.points,zy),X.has(a,"x")&&zy(a)})}(r),jS(r))}};function jS(r){X.forEach(r.nodes(),function(e){$S(r.node(e))}),X.forEach(r.edges(),function(e){$S(r.edge(e))})}function $S(r){var e=r.width;r.width=r.height,r.height=e}function Gy(r){r.y=-r.y}function zy(r){var e=r.x;r.x=r.y,r.y=e}var Que=function(r){var e={},t=X.filter(r.nodes(),function(A){return!r.children(A).length}),n=X.max(X.map(t,function(A){return r.node(A).rank})),a=X.map(X.range(n+1),function(){return[]});function i(A){if(!X.has(e,A)){e[A]=!0;var s=r.node(A);a[s.rank].push(A),X.forEach(r.successors(A),i)}}var o=X.sortBy(t,function(A){return r.node(A).rank});return X.forEach(o,i),a},Rue=function(r,e){for(var t=0,n=1;n<e.length;++n)t+=Hue(r,e[n-1],e[n]);return t};function Hue(r,e,t){for(var n=X.zipObject(t,X.map(t,function(u,f){return f})),a=X.flatten(X.map(e,function(u){return X.sortBy(X.map(r.outEdges(u),function(f){return{pos:n[f.w],weight:r.edge(f).weight}}),"pos")}),!0),i=1;i<t.length;)i<<=1;var o=2*i-1;i-=1;var A=X.map(new Array(o),function(){return 0}),s=0;return X.forEach(a.forEach(function(u){var f=u.pos+i;A[f]+=u.weight;for(var l=0;f>0;)f%2&&(l+=A[f+1]),A[f=f-1>>1]+=u.weight;s+=u.weight*l})),s}var Gue=function(r,e){return X.map(e,function(t){var n=r.inEdges(t);if(n.length){var a=X.reduce(n,function(i,o){var A=r.edge(o),s=r.node(o.v);return{sum:i.sum+A.weight*s.order,weight:i.weight+A.weight}},{sum:0,weight:0});return{v:t,barycenter:a.sum/a.weight,weight:a.weight}}return{v:t}})},zue=function(r,e){var t={};return X.forEach(r,function(n,a){var i=t[n.v]={indegree:0,in:[],out:[],vs:[n.v],i:a};X.isUndefined(n.barycenter)||(i.barycenter=n.barycenter,i.weight=n.weight)}),X.forEach(e.edges(),function(n){var a=t[n.v],i=t[n.w];X.isUndefined(a)||X.isUndefined(i)||(i.indegree++,a.out.push(t[n.w]))}),function(n){var a=[];function i(s){return function(u){u.merged||(X.isUndefined(u.barycenter)||X.isUndefined(s.barycenter)||u.barycenter>=s.barycenter)&&function(f,l){var c=0,h=0;f.weight&&(c+=f.barycenter*f.weight,h+=f.weight),l.weight&&(c+=l.barycenter*l.weight,h+=l.weight),f.vs=l.vs.concat(f.vs),f.barycenter=c/h,f.weight=h,f.i=Math.min(l.i,f.i),l.merged=!0}(s,u)}}function o(s){return function(u){u.in.push(s),--u.indegree==0&&n.push(u)}}for(;n.length;){var A=n.pop();a.push(A),X.forEach(A.in.reverse(),i(A)),X.forEach(A.out,o(A))}return X.map(X.filter(a,function(s){return!s.merged}),function(s){return X.pick(s,["vs","i","barycenter","weight"])})}(X.filter(t,function(n){return!n.indegree}))},Kue=function(r,e){var t=Un.partition(r,function(l){return X.has(l,"barycenter")}),n=t.lhs,a=X.sortBy(t.rhs,function(l){return-l.i}),i=[],o=0,A=0,s=0;n.sort((u=!!e,function(l,c){return l.barycenter<c.barycenter?-1:l.barycenter>c.barycenter?1:u?c.i-l.i:l.i-c.i})),s=WS(i,a,s),X.forEach(n,function(l){s+=l.vs.length,i.push(l.vs),o+=l.barycenter*l.weight,A+=l.weight,s=WS(i,a,s)});var u,f={vs:X.flatten(i,!0)};return A&&(f.barycenter=o/A,f.weight=A),f};function WS(r,e,t){for(var n;e.length&&(n=X.last(e)).i<=t;)e.pop(),r.push(n.vs),t++;return t}var jue=function r(e,t,n,a){var i=e.children(t),o=e.node(t),A=o?o.borderLeft:void 0,s=o?o.borderRight:void 0,u={};A&&(i=X.filter(i,function(v){return v!==A&&v!==s}));var f=Gue(e,i);X.forEach(f,function(v){if(e.children(v.v).length){var g=r(e,v.v,n,a);u[v.v]=g,X.has(g,"barycenter")&&(p=v,y=g,X.isUndefined(p.barycenter)?(p.barycenter=y.barycenter,p.weight=y.weight):(p.barycenter=(p.barycenter*p.weight+y.barycenter*y.weight)/(p.weight+y.weight),p.weight+=y.weight))}var p,y});var l=zue(f,n);(function(v,g){X.forEach(v,function(p){p.vs=X.flatten(p.vs.map(function(y){return g[y]?g[y].vs:y}),!0)})})(l,u);var c=Kue(l,a);if(A&&(c.vs=X.flatten([A,c.vs,s],!0),e.predecessors(A).length)){var h=e.node(e.predecessors(A)[0]),d=e.node(e.predecessors(s)[0]);X.has(c,"barycenter")||(c.barycenter=0,c.weight=0),c.barycenter=(c.barycenter*c.weight+h.order+d.order)/(c.weight+2),c.weight+=2}return c},$ue=pi.Graph,Wue=function(r,e,t){var n=function(i){for(var o;i.hasNode(o=X.uniqueId("_root")););return o}(r),a=new $ue({compound:!0}).setGraph({root:n}).setDefaultNodeLabel(function(i){return r.node(i)});return X.forEach(r.nodes(),function(i){var o=r.node(i),A=r.parent(i);(o.rank===e||o.minRank<=e&&e<=o.maxRank)&&(a.setNode(i),a.setParent(i,A||n),X.forEach(r[t](i),function(s){var u=s.v===i?s.w:s.v,f=a.edge(u,i),l=X.isUndefined(f)?0:f.weight;a.setEdge(u,i,{weight:r.edge(s).weight+l})}),X.has(o,"minRank")&&a.setNode(i,{borderLeft:o.borderLeft[e],borderRight:o.borderRight[e]}))}),a},Vue=function(r,e,t){var n,a={};X.forEach(t,function(i){for(var o,A,s=r.parent(i);s;){if((o=r.parent(s))?(A=a[o],a[o]=s):(A=n,n=s),A&&A!==s)return void e.setEdge(A,s);s=o}})},Xue=pi.Graph,Yue=function(r){var e=Un.maxRank(r),t=VS(r,X.range(1,e+1),"inEdges"),n=VS(r,X.range(e-1,-1,-1),"outEdges"),a=Que(r);XS(r,a);for(var i,o=Number.POSITIVE_INFINITY,A=0,s=0;s<4;++A,++s){Zue(A%2?t:n,A%4>=2),a=Un.buildLayerMatrix(r);var u=Rue(r,a);u<o&&(s=0,i=X.cloneDeep(a),o=u)}XS(r,i)};function VS(r,e,t){return X.map(e,function(n){return Wue(r,n,t)})}function Zue(r,e){var t=new Xue;X.forEach(r,function(n){var a=n.graph().root,i=jue(n,a,t,e);X.forEach(i.vs,function(o,A){n.node(o).order=A}),Vue(n,t,i.vs)})}function XS(r,e){X.forEach(e,function(t){X.forEach(t,function(n,a){r.node(n).order=a})})}var que=pi.Graph,Jue=function(r){var e,t=Un.buildLayerMatrix(r),n=X.merge(efe(r,t),tfe(r,t)),a={};X.forEach(["u","d"],function(o){e=o==="u"?t:X.values(t).reverse(),X.forEach(["l","r"],function(A){A==="r"&&(e=X.map(e,function(l){return X.values(l).reverse()}));var s=(o==="u"?r.predecessors:r.successors).bind(r),u=nfe(r,e,n,s),f=afe(r,e,u.root,u.align,A==="r");A==="r"&&(f=X.mapValues(f,function(l){return-l})),a[o+A]=f})});var i=ife(r,a);return ofe(a,i),Afe(a,r.graph().align)};function efe(r,e){var t={};return X.reduce(e,function(n,a){var i=0,o=0,A=n.length,s=X.last(a);return X.forEach(a,function(u,f){var l=function(h,d){if(h.node(d).dummy)return X.find(h.predecessors(d),function(v){return h.node(v).dummy})}(r,u),c=l?r.node(l).order:A;(l||u===s)&&(X.forEach(a.slice(o,f+1),function(h){X.forEach(r.predecessors(h),function(d){var v=r.node(d),g=v.order;!(g<i||c<g)||v.dummy&&r.node(h).dummy||Vk(t,d,h)})}),o=f+1,i=c)}),a}),t}function tfe(r,e){var t={};function n(a,i,o,A,s){var u;X.forEach(X.range(i,o),function(f){u=a[f],r.node(u).dummy&&X.forEach(r.predecessors(u),function(l){var c=r.node(l);c.dummy&&(c.order<A||c.order>s)&&Vk(t,l,u)})})}return X.reduce(e,function(a,i){var o,A=-1,s=0;return X.forEach(i,function(u,f){if(r.node(u).dummy==="border"){var l=r.predecessors(u);l.length&&(o=r.node(l[0]).order,n(i,s,f,A,o),s=f,A=o)}n(i,s,i.length,o,a.length)}),i}),t}function Vk(r,e,t){if(e>t){var n=e;e=t,t=n}var a=r[e];a||(r[e]=a={}),a[t]=!0}function rfe(r,e,t){if(e>t){var n=e;e=t,t=n}return X.has(r[e],t)}function nfe(r,e,t,n){var a={},i={},o={};return X.forEach(e,function(A){X.forEach(A,function(s,u){a[s]=s,i[s]=s,o[s]=u})}),X.forEach(e,function(A){var s=-1;X.forEach(A,function(u){var f=n(u);if(f.length)for(var l=((f=X.sortBy(f,function(v){return o[v]})).length-1)/2,c=Math.floor(l),h=Math.ceil(l);c<=h;++c){var d=f[c];i[u]===u&&s<o[d]&&!rfe(t,u,d)&&(i[d]=u,i[u]=a[u]=a[d],s=o[d])}})}),{root:a,align:i}}function afe(r,e,t,n,a){var i={},o=function(u,f,l,c){var h=new que,d=u.graph(),v=function(g,p,y){return function(m,w,B){var E,b=m.node(w),C=m.node(B),_=0;if(_+=b.width/2,X.has(b,"labelpos"))switch(b.labelpos.toLowerCase()){case"l":E=-b.width/2;break;case"r":E=b.width/2}if(E&&(_+=y?E:-E),E=0,_+=(b.dummy?p:g)/2,_+=(C.dummy?p:g)/2,_+=C.width/2,X.has(C,"labelpos"))switch(C.labelpos.toLowerCase()){case"l":E=C.width/2;break;case"r":E=-C.width/2}return E&&(_+=y?E:-E),E=0,_}}(d.nodesep,d.edgesep,c);return X.forEach(f,function(g){var p;X.forEach(g,function(y){var m=l[y];if(h.setNode(m),p){var w=l[p],B=h.edge(w,m);h.setEdge(w,m,Math.max(v(u,y,p),B||0))}p=y})}),h}(r,e,t,a),A=a?"borderLeft":"borderRight";function s(u,f){for(var l=o.nodes(),c=l.pop(),h={};c;)h[c]?u(c):(h[c]=!0,l.push(c),l=l.concat(f(c))),c=l.pop()}return s(function(u){i[u]=o.inEdges(u).reduce(function(f,l){return Math.max(f,i[l.v]+o.edge(l))},0)},o.predecessors.bind(o)),s(function(u){var f=o.outEdges(u).reduce(function(c,h){return Math.min(c,i[h.w]-o.edge(h))},Number.POSITIVE_INFINITY),l=r.node(u);f!==Number.POSITIVE_INFINITY&&l.borderType!==A&&(i[u]=Math.max(i[u],f))},o.successors.bind(o)),X.forEach(n,function(u){i[u]=i[t[u]]}),i}function ife(r,e){return X.minBy(X.values(e),function(t){var n=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;return X.forIn(t,function(i,o){var A=function(s,u){return s.node(u).width}(r,o)/2;n=Math.max(i+A,n),a=Math.min(i-A,a)}),n-a})}function ofe(r,e){var t=X.values(e),n=X.min(t),a=X.max(t);X.forEach(["u","d"],function(i){X.forEach(["l","r"],function(o){var A,s=i+o,u=r[s];if(u!==e){var f=X.values(u);(A=o==="l"?n-X.min(f):a-X.max(f))&&(r[s]=X.mapValues(u,function(l){return l+A}))}})})}function Afe(r,e){return X.mapValues(r.ul,function(t,n){if(e)return r[e.toLowerCase()][n];var a=X.sortBy(X.map(r,n));return(a[1]+a[2])/2})}var sfe=Jue,ufe=function(r){(function(e){var t=Un.buildLayerMatrix(e),n=e.graph().ranksep,a=0;X.forEach(t,function(i){var o=X.max(X.map(i,function(A){return e.node(A).height}));X.forEach(i,function(A){e.node(A).y=a+o/2}),a+=o+n})})(r=Un.asNonCompoundGraph(r)),X.forEach(sfe(r),function(e,t){r.node(t).x=e})},ffe=Un.normalizeRanks,lfe=Un.removeEmptyRanks,Zo=Un,cfe=pi.Graph,hfe=function(r,e){var t=e&&e.debugTiming?Zo.time:Zo.notime;t("layout",function(){var n=t("  buildLayoutGraph",function(){return function(a){var i=new cfe({multigraph:!0,compound:!0}),o=jy(a.graph());return i.setGraph(X.merge({},vfe,Ky(o,dfe),X.pick(o,gfe))),X.forEach(a.nodes(),function(A){var s=jy(a.node(A));i.setNode(A,X.defaults(Ky(s,pfe),yfe)),i.setParent(A,a.parent(A))}),X.forEach(a.edges(),function(A){var s=jy(a.edge(A));i.setEdge(A,X.merge({},wfe,Ky(s,mfe),X.pick(s,Bfe)))}),i}(r)});t("  runLayout",function(){(function(a,i){i("    makeSpaceForEdgeLabels",function(){(function(o){var A=o.graph();A.ranksep/=2,X.forEach(o.edges(),function(s){var u=o.edge(s);u.minlen*=2,u.labelpos.toLowerCase()!=="c"&&(A.rankdir==="TB"||A.rankdir==="BT"?u.width+=u.labeloffset:u.height+=u.labeloffset)})})(a)}),i("    removeSelfEdges",function(){(function(o){X.forEach(o.edges(),function(A){if(A.v===A.w){var s=o.node(A.v);s.selfEdges||(s.selfEdges=[]),s.selfEdges.push({e:A,label:o.edge(A)}),o.removeEdge(A)}})})(a)}),i("    acyclic",function(){US.run(a)}),i("    nestingGraph.run",function(){GS.run(a)}),i("    rank",function(){Uue(Zo.asNonCompoundGraph(a))}),i("    injectEdgeLabelProxies",function(){(function(o){X.forEach(o.edges(),function(A){var s=o.edge(A);if(s.width&&s.height){var u=o.node(A.v),f={rank:(o.node(A.w).rank-u.rank)/2+u.rank,e:A};Zo.addDummyNode(o,"edge-proxy",f,"_ep")}})})(a)}),i("    removeEmptyRanks",function(){lfe(a)}),i("    nestingGraph.cleanup",function(){GS.cleanup(a)}),i("    normalizeRanks",function(){ffe(a)}),i("    assignRankMinMax",function(){(function(o){var A=0;X.forEach(o.nodes(),function(s){var u=o.node(s);u.borderTop&&(u.minRank=o.node(u.borderTop).rank,u.maxRank=o.node(u.borderBottom).rank,A=X.max(A,u.maxRank))}),o.graph().maxRank=A})(a)}),i("    removeEdgeLabelProxies",function(){(function(o){X.forEach(o.nodes(),function(A){var s=o.node(A);s.dummy==="edge-proxy"&&(o.edge(s.e).labelRank=s.rank,o.removeNode(A))})})(a)}),i("    normalize.run",function(){QS.run(a)}),i("    parentDummyChains",function(){kue(a)}),i("    addBorderSegments",function(){Pue(a)}),i("    order",function(){Yue(a)}),i("    insertSelfEdges",function(){(function(o){var A=Zo.buildLayerMatrix(o);X.forEach(A,function(s){var u=0;X.forEach(s,function(f,l){var c=o.node(f);c.order=l+u,X.forEach(c.selfEdges,function(h){Zo.addDummyNode(o,"selfedge",{width:h.label.width,height:h.label.height,rank:c.rank,order:l+ ++u,e:h.e,label:h.label},"_se")}),delete c.selfEdges})})})(a)}),i("    adjustCoordinateSystem",function(){KS.adjust(a)}),i("    position",function(){ufe(a)}),i("    positionSelfEdges",function(){(function(o){X.forEach(o.nodes(),function(A){var s=o.node(A);if(s.dummy==="selfedge"){var u=o.node(s.e.v),f=u.x+u.width/2,l=u.y,c=s.x-f,h=u.height/2;o.setEdge(s.e,s.label),o.removeNode(A),s.label.points=[{x:f+2*c/3,y:l-h},{x:f+5*c/6,y:l-h},{x:f+c,y:l},{x:f+5*c/6,y:l+h},{x:f+2*c/3,y:l+h}],s.label.x=s.x,s.label.y=s.y}})})(a)}),i("    removeBorderNodes",function(){(function(o){X.forEach(o.nodes(),function(A){if(o.children(A).length){var s=o.node(A),u=o.node(s.borderTop),f=o.node(s.borderBottom),l=o.node(X.last(s.borderLeft)),c=o.node(X.last(s.borderRight));s.width=Math.abs(c.x-l.x),s.height=Math.abs(f.y-u.y),s.x=l.x+s.width/2,s.y=u.y+s.height/2}}),X.forEach(o.nodes(),function(A){o.node(A).dummy==="border"&&o.removeNode(A)})})(a)}),i("    normalize.undo",function(){QS.undo(a)}),i("    fixupEdgeLabelCoords",function(){(function(o){X.forEach(o.edges(),function(A){var s=o.edge(A);if(X.has(s,"x"))switch(s.labelpos!=="l"&&s.labelpos!=="r"||(s.width-=s.labeloffset),s.labelpos){case"l":s.x-=s.width/2+s.labeloffset;break;case"r":s.x+=s.width/2+s.labeloffset}})})(a)}),i("    undoCoordinateSystem",function(){KS.undo(a)}),i("    translateGraph",function(){(function(o){var A=Number.POSITIVE_INFINITY,s=0,u=Number.POSITIVE_INFINITY,f=0,l=o.graph(),c=l.marginx||0,h=l.marginy||0;function d(v){var g=v.x,p=v.y,y=v.width,m=v.height;A=Math.min(A,g-y/2),s=Math.max(s,g+y/2),u=Math.min(u,p-m/2),f=Math.max(f,p+m/2)}X.forEach(o.nodes(),function(v){d(o.node(v))}),X.forEach(o.edges(),function(v){var g=o.edge(v);X.has(g,"x")&&d(g)}),A-=c,u-=h,X.forEach(o.nodes(),function(v){var g=o.node(v);g.x-=A,g.y-=u}),X.forEach(o.edges(),function(v){var g=o.edge(v);X.forEach(g.points,function(p){p.x-=A,p.y-=u}),X.has(g,"x")&&(g.x-=A),X.has(g,"y")&&(g.y-=u)}),l.width=s-A+c,l.height=f-u+h})(a)}),i("    assignNodeIntersects",function(){(function(o){X.forEach(o.edges(),function(A){var s,u,f=o.edge(A),l=o.node(A.v),c=o.node(A.w);f.points?(s=f.points[0],u=f.points[f.points.length-1]):(f.points=[],s=c,u=l),f.points.unshift(Zo.intersectRect(l,s)),f.points.push(Zo.intersectRect(c,u))})})(a)}),i("    reversePoints",function(){(function(o){X.forEach(o.edges(),function(A){var s=o.edge(A);s.reversed&&s.points.reverse()})})(a)}),i("    acyclic.undo",function(){US.undo(a)})})(n,t)}),t("  updateInputGraph",function(){(function(a,i){X.forEach(a.nodes(),function(o){var A=a.node(o),s=i.node(o);A&&(A.x=s.x,A.y=s.y,i.children(o).length&&(A.width=s.width,A.height=s.height))}),X.forEach(a.edges(),function(o){var A=a.edge(o),s=i.edge(o);A.points=s.points,X.has(s,"x")&&(A.x=s.x,A.y=s.y)}),a.graph().width=i.graph().width,a.graph().height=i.graph().height})(r,n)})})},dfe=["nodesep","edgesep","ranksep","marginx","marginy"],vfe={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},gfe=["acyclicer","ranker","rankdir","align"],pfe=["width","height"],yfe={width:0,height:0},mfe=["minlen","weight","width","height","labeloffset"],wfe={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Bfe=["labelpos"];function Ky(r,e){return X.mapValues(X.pick(r,e),Number)}function jy(r){var e={};return X.forEach(r,function(t,n){e[n.toLowerCase()]=t}),e}var Efe=pi.Graph,Xk={graphlib:pi,layout:hfe,debug:{debugOrdering:function(r){var e=Un.buildLayerMatrix(r),t=new Efe({compound:!0,multigraph:!0}).setGraph({});return X.forEach(r.nodes(),function(n){t.setNode(n,{label:n}),t.setParent(n,"layer"+r.node(n).rank)}),X.forEach(r.edges(),function(n){t.setEdge(n.v,n.w,{},n.name)}),X.forEach(e,function(n,a){var i="layer"+a;t.setNode(i,{rank:"same"}),X.reduce(n,function(o,A){return t.setEdge(o,A,{style:"invis"}),A})}),t}},util:{time:Un.time,notime:Un.notime},version:"0.8.5"},bfe=Xk.graphlib,xfe=Xk.layout;class Cfe{constructor(e){this.cardinality=1,this.include=Ls.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=sa.NODE,this.name=e.name,this.attr=e.attr||{},this.inputs=e.inputs,this.path=e.path||[],this.width=e.width,this.height=e.height}}class _fe{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function Sfe(r){const e=new _fe;return r.nodes.map(t=>new Cfe(t)).forEach(t=>{e.nodes[t.name]=t,t.inputs.forEach(n=>{(function(a,i,o){o.name!==i.name&&a.edges.push(Object.assign(Object.assign({},o.attr),{v:o.name,w:i.name}))})(e,t,n)})}),e}class Mfe{constructor(e,t={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=Ls.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=sa.META,this.path=[],this.name=e,this.metaGraph=LE(e,af.META,t)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(e=>this.metaGraph.node(e))}leaves(){let e,t=[],n=[this];for(;n.length;){let a=n.shift();a.isGroupNode?(e=a.metaGraph,e.nodes().forEach(i=>n.push(e.node(i)))):t.push(a.name)}return t}}class Ife{constructor(e,t){this.v=e,this.w=t,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(e,t){this.baseEdgeList.push(e)}}function Yk(r,e={}){return new Mfe(r,e)}function Zk(r,e){return new Ife(r,e)}function LE(r,e,t){const n=t||{},a=new bfe.Graph(n);return a.setGraph({name:r,rankdir:n.rankdir,type:e,align:n.align}),a}class Tfe{constructor(e={}){this.graphOptions=e,this.index={},this.graphOptions.compound=!0,this.root=Yk(nf,this.graphOptions),this.index[nf]=this.root}getNodeMap(){return this.index}node(e){return this.index[e]}setNode(e,t){this.index[e]=t}getBridgeGraph(e){const t=this.index[e];if(!t)throw Error("Could not find node in hierarchy: "+e);if(!("metaGraph"in t))return null;const n=t;if(n.bridgeGraph)return n.bridgeGraph;const a=LE(RN,af.BRIDGE,this.graphOptions);if(n.bridgeGraph=a,!t.parentNode||!("metaGraph"in t.parentNode))return a;const i=t.parentNode;return[i.metaGraph,this.getBridgeGraph(i.name)].forEach(o=>{o.edges().filter(A=>A.v===e||A.w===e).forEach(A=>{const s=A.w===e;o.edge(A).baseEdgeList.forEach(u=>{const[f,l]=s?[u.w,A.v]:[u.v,A.w],c=this.getChildName(e,f),h={v:s?l:c,w:s?c:l};let d=a.edge(h);d||(d=Zk(h.v,h.w),d.inbound=s,a.setEdge(h.v,h.w,d)),d.addBaseEdge(u,this)})})}),a}getChildName(e,t){let n=this.index[t];for(;n;){if(n.parentNode&&n.parentNode.name===e)return n.name;n=n.parentNode}throw Error("Could not find immediate child for descendant: "+t)}getPredecessors(e){const t=this.index[e];if(!t)throw Error("Could not find node with name: "+e);return this.getOneWayEdges(t,!0)}getSuccessors(e){const t=this.index[e];if(!t)throw Error("Could not find node with name: "+e);return this.getOneWayEdges(t,!1)}getOneWayEdges(e,t){const n=[];if(!e.parentNode||!e.parentNode.isGroupNode)return n;const a=e.parentNode,i=a.metaGraph,o=this.getBridgeGraph(a.name);return YS(i,e,t,n),YS(o,e,t,n),n}}function Ffe(r,e){const{rankDirection:t,align:n}=e,a=new Tfe({rankdir:t,align:n});return function(i,o){Object.keys(o.nodes).forEach(A=>{const s=o.nodes[A],u=s.path;let f=i.root;f.depth=Math.max(u.length,f.depth);for(let l=0;l<u.length&&(f.depth=Math.max(f.depth,u.length-l),f.cardinality+=s.cardinality,l!==u.length-1);l++){const c=u[l];let h=i.node(c);h||(h=Yk(c,i.graphOptions),h.path=s.path.slice(0,l+1),h.parentNode=f,i.setNode(c,h),f.metaGraph.setNode(c,h)),f=h}i.setNode(s.name,s),s.parentNode=f,f.metaGraph.setNode(s.name,s)})}(a,r),function(i,o){const A=i.getNodeMap();let s=[],u=[];const f=(l,c)=>{let h=0;for(;l;)c[h++]=l.name,l=l.parentNode;return h-1};o.edges.forEach(l=>{s=[],u=[];let c=f(o.nodes[l.v],s),h=f(o.nodes[l.w],u);for(;s[c]===u[h];)if(c--,h--,c<0||h<0)throw Error("No difference found between ancestor paths.");const d=A[s[c+1]],v=s[c],g=u[h];let p=d.metaGraph.edge(v,g);p||(p=Zk(v,g),d.metaGraph.setEdge(v,g,p)),p.addBaseEdge(l,i)})}(a,r),a}function YS(r,e,t,n){(t?r.inEdges(e.name):r.outEdges(e.name)).forEach(a=>{const i=r.edge(a);n.push(i)})}class Lfe{constructor(e){this.hierarchy=e,this.index={},this.hasSubHierarchy={},this.root=new qS(this.hierarchy.root,this.hierarchy.graphOptions),this.index[e.root.name]=this.root,this.buildSubHierarchy(e.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(e){if(e in this.hasSubHierarchy)return;this.hasSubHierarchy[e]=!0;const t=this.index[e];if(t.node.type!==sa.META)return;const n=t,a=n.node.metaGraph,i=n.coreGraph;a.nodes().forEach(f=>{const l=this.getOrCreateRenderNodeByName(f);i.setNode(f,l)}),a.edges().forEach(f=>{const l=a.edge(f),c=new ZS(l);i.setEdge(f.v,f.w,c)});const o=n.node.parentNode;if(!o)return;const A=this.getRenderNodeByName(o.name),s=(f,...l)=>l.concat([f?"IN":"OUT"]).join("~~"),u=this.hierarchy.getBridgeGraph(e);u.edges().forEach(f=>{const l=u.edge(f),c=!!a.node(f.w),[h,d]=c?[f.w,f.v]:[f.v,f.w],v=B=>{const E=c?{v:B,w:e}:{v:e,w:B};return A.coreGraph.edge(E)};let g=v(d);g||(g=v(s(c,d,o.name)));const p=s(c,e),y=s(c,d,e);let m=i.node(y);if(!m){let B=i.node(p);if(!B){const b={name:p,type:sa.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:Ls.UNSPECIFIED,inbound:c,attr:{}};B=new dv(b),this.index[p]=B,i.setNode(p,B)}const E={name:y,type:sa.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:Ls.UNSPECIFIED,inbound:c,attr:{}};m=new dv(E),this.index[y]=m,i.setNode(y,m),i.setParent(y,p),B.node.cardinality++}const w=new ZS(l);w.adjoiningMetaEdge=g,c?i.setEdge(y,h,w):i.setEdge(h,y,w)})}getOrCreateRenderNodeByName(e){if(!e)return null;if(e in this.index)return this.index[e];const t=this.getNodeByName(e);return t?(this.index[e]=t.isGroupNode?new qS(t,this.hierarchy.graphOptions):new dv(t),this.index[e]):null}getRenderNodeByName(e){return this.index[e]}getNodeByName(e){return this.hierarchy.node(e)}}class dv{constructor(e){this.node=e,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=e.width||0,this.height=e.height||0,this.displayName=e.name,this.attr=e.attr}}class ZS{constructor(e){this.metaEdge=e,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class qS extends dv{constructor(e,t){super(e);const n=e.metaGraph.graph();t.compound=!0,this.coreGraph=LE(n.name,af.CORE,t)}}function qk(r,e){r.node.isGroupNode&&function(t,n){const a=D1(n);t.coreGraph.nodes().map(i=>t.coreGraph.node(i)).forEach(i=>{var o,A,s,u,f,l;const{height:c,width:h}=i;switch(i.node.type){case sa.NODE:Object.assign(i,a.nodeSize.node),i.height=c||a.nodeSize.node.height,i.width=h||a.nodeSize.node.width;break;case sa.BRIDGE:Object.assign(i,a.nodeSize.bridge);break;case sa.META:i.expanded?qk(i,n):(Object.assign(i,a.nodeSize.meta),i.height=a.nodeSize.meta.height,i.width=a.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+i.node.type)}if(!i.expanded){const d=i.attr;(function(v,g=!1){if(v.coreBox.width=v.width,v.coreBox.height=v.height,!g){const p=`${v.displayName}`.length,y=3;v.width=Math.max(v.coreBox.width,p*y)}})(i,n&&(i.node.type===0&&!!(!((A=(o=n==null?void 0:n.nodeSize)===null||o===void 0?void 0:o.meta)===null||A===void 0)&&A.width)||i.node.type===1&&(!!(!((u=(s=n==null?void 0:n.nodeSize)===null||s===void 0?void 0:s.node)===null||u===void 0)&&u.width)||!!d.width)||i.node.type===2&&!!(!((l=(f=n==null?void 0:n.nodeSize)===null||f===void 0?void 0:f.bridge)===null||l===void 0)&&l.width)))}})}(r,e),r.node.type===sa.META&&function(t,n){const a=D1(n),i=a.subScene.meta;Object.assign(t,i);const{nodeSep:o,rankSep:A,edgeSep:s,align:u}=a.graph.meta,f={nodesep:o,ranksep:A,edgesep:s,align:u};Object.assign(t.coreBox,function(h,d){const{ranksep:v,nodesep:g,edgesep:p,align:y}=d;Object.assign(h.graph(),{ranksep:v,nodesep:g,edgesep:p,align:y});const m=[];if(h.nodes().forEach(C=>{h.node(C).node.type!==sa.BRIDGE&&m.push(C)}),!m.length)return{width:0,height:0};xfe(h);let w=1/0,B=1/0,E=-1/0,b=-1/0;return m.forEach(C=>{const _=h.node(C),x=.5*_.width,M=_.x-x,S=_.x+x;w=M<w?M:w,E=S>E?S:E;const I=.5*_.height,D=_.y-I,O=_.y+I;B=D<B?D:B,b=O>b?O:b}),h.edges().forEach(C=>{const _=h.edge(C),x=h.node(_.metaEdge.v),M=h.node(_.metaEdge.w);if(_.points.length===3&&function(D){let O=JS(D[0],D[1]);for(let F=1;F<D.length-1;F++){const U=JS(D[F],D[F+1]);if(Math.abs(U-O)>1)return!1;O=U}return!0}(_.points)){if(x!=null){const D=x.expanded?x.x:K1(x);_.points[0].x=D}if(M!=null){const D=M.expanded?M.x:K1(M);_.points[2].x=D}_.points=[_.points[0],_.points[1]]}const S=_.points[_.points.length-2];M!=null&&(_.points[_.points.length-1]=eM(S,M));const I=_.points[1];x!=null&&(_.points[0]=eM(I,x)),_.points.forEach(D=>{w=D.x<w?D.x:w,E=D.x>E?D.x:E,B=D.y<B?D.y:B,b=D.y>b?D.y:b})}),h.nodes().forEach(C=>{const _=h.node(C);_.x-=w,_.y-=B}),h.edges().forEach(C=>{h.edge(C).points.forEach(_=>{_.x-=w,_.y-=B})}),{width:E-w,height:b-B}}(t.coreGraph,f));let l=0;t.coreGraph.nodeCount()>0&&l++;const c=l<=1?0:l;t.coreBox.width+=c+c,t.coreBox.height=i.labelHeight+t.coreBox.height,t.width=t.coreBox.width+i.paddingLeft+i.paddingRight,t.height=t.paddingTop+t.coreBox.height+t.paddingBottom}(r,e)}function JS(r,e){const t=e.x-r.x,n=e.y-r.y;return 180*Math.atan(n/t)/Math.PI}function K1(r){return r.expanded?r.x:r.x-r.width/2+0+r.coreBox.width/2}function eM(r,e){const t=e.expanded?e.x:K1(e),n=e.y,a=r.x-t,i=r.y-n;let o,A,s=e.expanded?e.width:e.coreBox.width,u=e.expanded?e.height:e.coreBox.height;return Math.abs(i)*s/2>Math.abs(a)*u/2?(i<0&&(u=-u),o=i===0?0:u/2*a/i,A=u/2):(a<0&&(s=-s),o=s/2,A=a===0?0:s/2*i/a),{x:t+o,y:n+A}}function Dfe(r,e,t){var n,a,i,o;const A=r.nodes.filter((l,c,h)=>h.findIndex(d=>d.id===l.id)!==c).map(l=>l.id);if(A.length)throw new Error(`Duplicated ids found: ${A.join(", ")}`);const s=function(l){const c={nodes:[]},h=l.compound,d=Object.keys(h||{}),v=new Map,g=(y,m=[])=>{if(v.has(y))return v.get(y);for(let w=0;w<d.length;w++){let B=d[w];if(h&&h[B].indexOf(y)!==-1)return m.unshift(B),g(B,m)}return m.length===0&&v.set(y,m),m},p=y=>l.edges.filter(m=>m.w===y).map(m=>({name:m.v}));return l.nodes.forEach(y=>{const m=y.id,w=[...g(m),m];let B=p(m);c.nodes.push({name:m,path:w,inputs:B,width:y.width,height:y.height,attr:Object.assign({},y)})}),c}(r),u=function(l,c){const h=(v,g)=>{for(let p of g.values())if(p.includes(v))return!0;return!1},d=(v,g=[])=>{if(Object.keys(v).length===0)return[...new Set(g)];const p=new Map(Object.keys(v).map(m=>[m,v[m]])),y={};for(let[m,w]of p)h(m,p)?y[m]=w:g=g.concat(m,w);return d(y,g)};return d(l).filter(v=>c.includes(v))}(r.compound||{},(e==null?void 0:e.expanded)||[]),f=function(l,c){return function(h){return new Lfe(h)}(Ffe(Sfe(l),c))}(s,{rankDirection:((a=(n=t==null?void 0:t.graph)===null||n===void 0?void 0:n.meta)===null||a===void 0?void 0:a.rankDir)||(e==null?void 0:e.rankDirection)||Jv.graph.meta.rankDir,align:((o=(i=t==null?void 0:t.graph)===null||i===void 0?void 0:i.meta)===null||o===void 0?void 0:o.align)||Jv.graph.meta.align});return function(l,c){c.forEach(h=>{const d=l.getRenderInfoNodes().find(p=>p.displayName===h);let v=d&&d.node&&d.node.name||"";const g=l.getRenderNodeByName(v);if(!g)throw new Error(`No nodes found: ${v}`);g.expanded=!0,l.buildSubHierarchy(v)})}(f,u),qk(f.root,t),Jk(f.root)}function Ofe(r,e=!1){const t=JSON.parse(JSON.stringify(r)),n={nodes:[t],edges:[...t.edges]};return t.nodes.forEach(function a(i){(i.type===0||i.type===1)&&n.nodes.push(i),i.type===0&&(n.edges=n.edges.concat(i.edges)),Array.isArray(i.nodes)&&i.nodes.forEach(a)}),e&&n.nodes.forEach(a=>{const i=n.nodes.find(o=>o.id===a.parentNodeName);if(i){const o=i.x-i.width/2+i.paddingLeft,A=i.y-i.height/2+i.labelHeight+i.paddingTop;i.id!==nf&&(a.x+=o,a.y+=A),a.type===0&&a.edges.forEach(s=>{s.points.forEach(u=>{u.x+=a.x-a.width/2+a.paddingLeft,u.y+=a.y-a.height/2+a.labelHeight+a.paddingTop})})}}),n}function Ufe(r,e,t,n){var a,i;let o=[];const A=((a=t.find(l=>l.id===r))===null||a===void 0?void 0:a.path)||[],s=((i=t.find(l=>l.id===e))===null||i===void 0?void 0:i.path)||[],u=[nf,...A].slice(0,A.length).reverse(),f=[nf,...s].slice(0,s.length);return u.forEach(l=>{const c=t.find(h=>h.id===l);o=o.concat(c.edges.filter(h=>h.baseEdgeList.some(d=>d.v===((n==null?void 0:n.v)||r)&&d.w===((n==null?void 0:n.w)||e))))}),f.filter(l=>!u.includes(l)).forEach(l=>{const c=t.find(h=>h.id===l);o=o.concat(c.edges.filter(h=>h.baseEdgeList.some(d=>d.v===((n==null?void 0:n.v)||r)&&d.w===((n==null?void 0:n.w)||e))))}),o}function Jk(r){const e=r.coreGraph.nodes().map(n=>r.coreGraph.node(n));return Object.assign(Object.assign({},tM(r)),{expanded:r.expanded,nodes:r.expanded?(t=e,t.map(n=>n.node.type===sa.META?Jk(n):tM(n))):[],edges:r.expanded?Nfe(r):[]});var t}function tM(r){return{id:r.node.name,name:r.node.name,type:r.node.type,cardinality:r.node.cardinality,attr:r.attr,parentNodeName:r.node.parentNode?r.node.parentNode.name:null,coreBox:Object.assign({},r.coreBox),x:r.x,y:r.y,width:r.width,height:r.height,radius:r.radius,labelHeight:r.labelHeight,labelOffset:r.labelOffset,outboxWidth:r.outboxWidth,paddingLeft:r.paddingLeft,paddingTop:r.paddingTop,paddingRight:r.paddingRight,paddingBottom:r.paddingBottom,path:r.node.path}}function Nfe(r){return r.coreGraph.edges().map(e=>({renderInfoEdge:r.coreGraph.edge(e),edge:e})).filter(({renderInfoEdge:e})=>e.metaEdge).map(({edge:e,renderInfoEdge:t})=>{const n=function(a,i){const o=i.points.map(A=>Object.assign({},A));if(i.adjoiningMetaEdge){const A=i.adjoiningMetaEdge.points,s=i.metaEdge.inbound,u=s?A[A.length-1]:A[0],f=o[s?0:o.length-1],l=a.x-a.width/2,c=a.y-a.height/2,h=u.x-l,d=u.y-c,v=-a.paddingLeft,g=-(a.paddingTop+a.labelHeight);f.x=h+v,f.y=d+g}return o}(r,t);return{adjoiningEdge:t.adjoiningMetaEdge?{w:t.adjoiningMetaEdge.metaEdge.w,v:t.adjoiningMetaEdge.metaEdge.v}:null,inbound:t.metaEdge.inbound,w:e.w,v:e.v,points:n,weight:t.weight,baseEdgeList:t.metaEdge.baseEdgeList,parentNodeName:r.node.name}})}const kfe=Object.freeze(Object.defineProperty({__proto__:null,BRIDGE_GRAPH_NAME:RN,get GraphType(){return af},get HierarchyNodeType(){return O1},get InclusionType(){return Ls},LAYOUT_CONFIG:Jv,get NodeType(){return sa},ROOT_NAME:nf,buildGraph:Dfe,flatGraph:Ofe,getEdges:Ufe,mergeConfig:D1},Symbol.toStringTag,{value:"Module"})),Pfe=Zi(kfe);var Qfe=we&&we.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ii=we&&we.__assign||function(){return ii=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},ii.apply(this,arguments)},fu=we&&we.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(kc,"__esModule",{value:!0});kc.DagreCompoundLayout=void 0;var Rfe=qr,La=Pfe,ud=zr(),Hfe=function(r){Qfe(e,r);function e(t){var n=r.call(this)||this;return n.rankdir="TB",n.nodesep=50,n.edgesep=5,n.ranksep=50,n.controlPoints=!0,n.anchorPoint=!0,n.nodes=[],n.edges=[],n.combos=[],n.onLayoutEnd=function(){},n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},e.prototype.init=function(t){var n=t.hiddenNodes||[],a=t.hiddenEdges||[],i=t.hiddenCombos||[];this.nodes=this.getDataByOrder((t.nodes||[]).concat(n)),this.edges=this.getDataByOrder((t.edges||[]).concat(a)),this.combos=(t.combos||[]).concat(i.map(function(o){return ii(ii({},o),{collapsed:!0})}))},e.prototype.execute=function(){var t=this,n=t.nodes,a=t.edges;if(n){var i=t.getLayoutConfig(),o=i.graphDef,A=i.graphOption,s=i.graphSettings,u=(0,La.buildGraph)(o,A,s),f=(0,La.flatGraph)(u,!0);return this.updatePosition(f),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:a}}},e.prototype.getNodePath=function(t){var n=this,a=n.nodes,i=n.combos,o=a.find(function(s){return s.id===t}),A=function(s,u){u===void 0&&(u=[]);var f=i.find(function(l){return l.id===s});return f?(u.unshift(s),f.parentId?A(f.parentId,u):u):u};return o&&o.comboId?A(o.comboId,[t]):[t]},e.prototype.getLayoutConfig=function(){var t,n,a,i=this,o=i.nodes,A=i.edges,s=i.combos,u=i.nodeSize,f=i.rankdir,l=i.align,c=i.edgesep,h=i.nodesep,d=i.ranksep,v=i.settings,g=(s||[]).reduce(function(F,U){var Q=o.filter(function(R){return R.comboId===U.id}).map(function(R){return R.id}),N=(s||[]).filter(function(R){return R.parentId===U.id}).map(function(R){return R.id});return(Q.length||N.length)&&(F[U.id]=fu(fu([],Q,!0),N,!0)),F},{}),p;u?(0,ud.isArray)(u)?p=function(){return u}:p=function(){return[u,u]}:p=function(F){return F&&F.size?(0,ud.isArray)(F.size)?F.size:(0,ud.isObject)(F.size)?[F.size.width||40,F.size.height||40]:[F.size,F.size]:[40,40]};var y=function(F){return F&&F.size?(0,ud.isArray)(F.size)?F.size:[F.size,F.size]:[80,40]},m=y(s==null?void 0:s[0]),w=m[0],B=m[1],E=(n=(t=i.graphSettings)===null||t===void 0?void 0:t.subScene)===null||n===void 0?void 0:n.meta,b=((a=s.find(function(F){return!F.collapsed}))===null||a===void 0?void 0:a.padding)||[20,20,20,20],C=b[0],_=b[1],x=b[2],M=b[3],S={compound:g,nodes:fu([],(o||[]).map(function(F){var U=p(F),Q=U[0],N=U[1];return ii(ii({},F),{width:Q,height:N})}),!0),edges:fu([],(A||[]).map(function(F){return ii(ii({},F),{v:F.source,w:F.target})}),!0)},I={expanded:(s||[]).filter(function(F){return!F.collapsed}).map(function(F){return F.id})},D={graph:{meta:{align:l,rankDir:f,nodeSep:h,edgeSep:c,rankSep:d}},subScene:{meta:{paddingTop:C||(E==null?void 0:E.paddingTop)||20,paddingRight:_||(E==null?void 0:E.paddingRight)||20,paddingBottom:x||(E==null?void 0:E.paddingBottom)||20,paddingLeft:M||(E==null?void 0:E.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:w,height:B}}},O=(0,La.mergeConfig)(v,ii({},(0,La.mergeConfig)(D,La.LAYOUT_CONFIG)));return i.graphSettings=O,{graphDef:S,graphOption:I,graphSettings:O}},e.prototype.updatePosition=function(t){var n=t.nodes,a=t.edges;this.updateNodePosition(n,a),this.updateEdgePosition(n,a)},e.prototype.getBegin=function(t,n){var a=this,i=a.begin,o=[0,0];if(i){var A=1/0,s=1/0;t.forEach(function(u){A>u.x&&(A=u.x),s>u.y&&(s=u.y)}),n.forEach(function(u){u.points.forEach(function(f){A>f.x&&(A=f.x),s>f.y&&(s=f.y)})}),o[0]=i[0]-A,o[1]=i[1]-s}return o},e.prototype.updateNodePosition=function(t,n){var a=this,i=a.combos,o=a.nodes,A=a.edges,s=a.anchorPoint,u=a.graphSettings,f=this.getBegin(t,n);t.forEach(function(l){var c,h=l.x,d=l.y,v=l.id,g=l.type,p=l.coreBox;if(g===La.HierarchyNodeType.META&&v!==La.ROOT_NAME){var y=i.findIndex(function(b){return b.id===v}),m=(c=u==null?void 0:u.subScene)===null||c===void 0?void 0:c.meta;i[y].offsetX=h+f[0],i[y].offsetY=d+f[1],i[y].fixSize=[p.width,p.height],i[y].fixCollapseSize=[p.width,p.height],l.expanded?i[y].padding=[m==null?void 0:m.paddingTop,m==null?void 0:m.paddingRight,m==null?void 0:m.paddingBottom,m==null?void 0:m.paddingLeft]:i[y].padding=[0,0,0,0]}else if(g===La.HierarchyNodeType.OP){var y=o.findIndex(function(C){return C.id===v});if(o[y].x=h+f[0],o[y].y=d+f[1],s){var w=[],B=n.filter(function(C){return C.v===v}),E=n.filter(function(C){return C.w===v});B.length>0&&B.forEach(function(C){var _=C.points[0],x=(_.x-h)/l.width+.5,M=(_.y-d)/l.height+.5;w.push([x,M]),C.baseEdgeList.forEach(function(S){var I=A.find(function(D){return D.source===S.v&&D.target===S.w});I&&(I.sourceAnchor=w.length-1)})}),E.length>0&&E.forEach(function(C){var _=C.points[C.points.length-1],x=(_.x-h)/l.width+.5,M=(_.y-d)/l.height+.5;w.push([x,M]),C.baseEdgeList.forEach(function(S){var I=A.find(function(D){return D.source===S.v&&D.target===S.w});I&&(I.targetAnchor=w.length-1)})}),o[y].anchorPoints=w.length>0?w:o[y].anchorPoints||[]}}})},e.prototype.updateEdgePosition=function(t,n){var a=this,i=a.combos,o=a.edges,A=a.controlPoints,s=this.getBegin(t,n);A&&(i.forEach(function(u){u.inEdges=[],u.outEdges=[]}),o.forEach(function(u){var f,l,c,h,d=t.find(function(b){return b.id===u.source}),v=t.find(function(b){return b.id===u.target}),g=[],p=[];if(d&&v)p=(0,La.getEdges)(d==null?void 0:d.id,v==null?void 0:v.id,t);else if(!d||!v){var y=a.getNodePath(u.source),m=a.getNodePath(u.target),w=y.reverse().slice(d?0:1).find(function(b){return t.find(function(C){return C.id===b})}),B=m.reverse().slice(v?0:1).find(function(b){return t.find(function(C){return C.id===b})});d=t.find(function(b){return b.id===w}),v=t.find(function(b){return b.id===B}),p=(0,La.getEdges)(d==null?void 0:d.id,v==null?void 0:v.id,t,{v:u.source,w:u.target})}if(g=p.reduce(function(b,C){return fu(fu([],b,!0),C.points.map(function(_){return ii(ii({},_),{x:_.x+s[0],y:_.y+s[1]})}),!0)},[]),g=g.slice(1,-1),u.controlPoints=g,(v==null?void 0:v.type)===La.NodeType.META){var E=i.findIndex(function(b){return b.id===(v==null?void 0:v.id)});if(!i[E]||!((f=i[E].inEdges)===null||f===void 0)&&f.some(function(b){return b.source===d.id&&b.target===v.id}))return;(l=i[E].inEdges)===null||l===void 0||l.push({source:d.id,target:v.id,controlPoints:g})}if((d==null?void 0:d.type)===La.NodeType.META){var E=i.findIndex(function(C){return C.id===(d==null?void 0:d.id)});if(!i[E]||!((c=i[E].outEdges)===null||c===void 0)&&c.some(function(C){return C.source===d.id&&C.target===v.id}))return;(h=i[E].outEdges)===null||h===void 0||h.push({source:d.id,target:v.id,controlPoints:g})}}))},e.prototype.getType=function(){return"dagreCompound"},e.prototype.getDataByOrder=function(t){return t.every(function(n){return n.layoutOrder!==void 0})||t.forEach(function(n,a){n.layoutOrder=a}),t.sort(function(n,a){return n.layoutOrder-a.layoutOrder})},e}(Rfe.Base);kc.DagreCompoundLayout=Hfe;var DE={},xp={},OE={};const Gfe=Object.prototype.toString;function Fn(r){const e=Gfe.call(r);return e.endsWith("Array]")&&!e.includes("Big")}function zfe(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Fn(r))throw new TypeError("input must be an array");if(r.length===0)throw new TypeError("input must not be empty");var t=e.fromIndex,n=t===void 0?0:t,a=e.toIndex,i=a===void 0?r.length:a;if(n<0||n>=r.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(i<=n||i>r.length||!Number.isInteger(i))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=r[n],A=n+1;A<i;A++)r[A]>o&&(o=r[A]);return o}function Kfe(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Fn(r))throw new TypeError("input must be an array");if(r.length===0)throw new TypeError("input must not be empty");var t=e.fromIndex,n=t===void 0?0:t,a=e.toIndex,i=a===void 0?r.length:a;if(n<0||n>=r.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(i<=n||i>r.length||!Number.isInteger(i))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=r[n],A=n+1;A<i;A++)r[A]<o&&(o=r[A]);return o}function rM(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Fn(r)){if(r.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var t;if(e.output!==void 0){if(!Fn(e.output))throw new TypeError("output option must be an array if specified");t=e.output}else t=new Array(r.length);var n=Kfe(r),a=zfe(r);if(n===a)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var i=e.min,o=i===void 0?e.autoMinMax?n:0:i,A=e.max,s=A===void 0?e.autoMinMax?a:1:A;if(o>=s)throw new RangeError("min option must be smaller than max option");for(var u=(s-o)/(a-n),f=0;f<r.length;f++)t[f]=(r[f]-n)*u+o;return t}const fd=" ".repeat(2),eP=" ".repeat(4);function jfe(){return tP(this)}function tP(r,e={}){const{maxRows:t=15,maxColumns:n=10,maxNumSize:a=8,padMinus:i="auto"}=e;return`${r.constructor.name} {
${fd}[
${eP}${$fe(r,t,n,a,i)}
${fd}]
${fd}rows: ${r.rows}
${fd}columns: ${r.columns}
}`}function $fe(r,e,t,n,a){const{rows:i,columns:o}=r,A=Math.min(i,e),s=Math.min(o,t),u=[];if(a==="auto"){a=!1;e:for(let f=0;f<A;f++)for(let l=0;l<s;l++)if(r.get(f,l)<0){a=!0;break e}}for(let f=0;f<A;f++){let l=[];for(let c=0;c<s;c++)l.push(Wfe(r.get(f,c),n,a));u.push(`${l.join(" ")}`)}return s!==o&&(u[u.length-1]+=` ... ${o-t} more columns`),A!==i&&u.push(`... ${i-e} more rows`),u.join(`
${eP}`)}function Wfe(r,e,t){return(r>=0&&t?` ${nM(r,e-1)}`:nM(r,e)).padEnd(e)}function nM(r,e){let t=r.toString();if(t.length<=e)return t;let n=r.toFixed(e);if(n.length>e&&(n=r.toFixed(Math.max(0,e-(n.length-e)))),n.length<=e&&!n.startsWith("0.000")&&!n.startsWith("-0.000"))return n;let a=r.toExponential(e);return a.length>e&&(a=r.toExponential(Math.max(0,e-(a.length-e)))),a.slice(0)}function Vfe(r,e){r.prototype.add=function(n){return typeof n=="number"?this.addS(n):this.addM(n)},r.prototype.addS=function(n){for(let a=0;a<this.rows;a++)for(let i=0;i<this.columns;i++)this.set(a,i,this.get(a,i)+n);return this},r.prototype.addM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let i=0;i<this.columns;i++)this.set(a,i,this.get(a,i)+n.get(a,i));return this},r.add=function(n,a){return new e(n).add(a)},r.prototype.sub=function(n){return typeof n=="number"?this.subS(n):this.subM(n)},r.prototype.subS=function(n){for(let a=0;a<this.rows;a++)for(let i=0;i<this.columns;i++)this.set(a,i,this.get(a,i)-n);return this},r.prototype.subM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let i=0;i<this.columns;i++)this.set(a,i,this.get(a,i)-n.get(a,i));return this},r.sub=function(n,a){return new e(n).sub(a)},r.prototype.subtract=r.prototype.sub,r.prototype.subtractS=r.prototype.subS,r.prototype.subtractM=r.prototype.subM,r.subtract=r.sub,r.prototype.mul=function(n){return typeof n=="number"?this.mulS(n):this.mulM(n)},r.prototype.mulS=function(n){for(let a=0;a<this.rows;a++)for(let i=0;i<this.columns;i++)this.set(a,i,this.get(a,i)*n);return this},r.prototype.mulM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let i=0;i<this.columns;i++)this.set(a,i,this.get(a,i)*n.get(a,i));return this},r.mul=function(n,a){return new e(n).mul(a)},r.prototype.multiply=r.prototype.mul,r.prototype.multiplyS=r.prototype.mulS,r.prototype.multiplyM=r.prototype.mulM,r.multiply=r.mul,r.prototype.div=function(n){return typeof n=="number"?this.divS(n):this.divM(n)},r.prototype.divS=function(n){for(let a=0;a<this.rows;a++)for(let i=0;i<this.columns;i++)this.set(a,i,this.get(a,i)/n);return this},r.prototype.divM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let i=0;i<this.columns;i++)this.set(a,i,this.get(a,i)/n.get(a,i));return this},r.div=function(n,a){return new e(n).div(a)},r.prototype.divide=r.prototype.div,r.prototype.divideS=r.prototype.divS,r.prototype.divideM=r.prototype.divM,r.divide=r.div,r.prototype.mod=function(n){return typeof n=="number"?this.modS(n):this.modM(n)},r.prototype.modS=function(n){for(let a=0;a<this.rows;a++)for(let i=0;i<this.columns;i++)this.set(a,i,this.get(a,i)%n);return this},r.prototype.modM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let i=0;i<this.columns;i++)this.set(a,i,this.get(a,i)%n.get(a,i));return this},r.mod=function(n,a){return new e(n).mod(a)},r.prototype.modulus=r.prototype.mod,r.prototype.modulusS=r.prototype.modS,r.prototype.modulusM=r.prototype.modM,r.modulus=r.mod,r.prototype.and=function(n){return typeof n=="number"?this.andS(n):this.andM(n)},r.prototype.andS=function(n){for(let a=0;a<this.rows;a++)for(let i=0;i<this.columns;i++)this.set(a,i,this.get(a,i)&n);return this},r.prototype.andM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let i=0;i<this.columns;i++)this.set(a,i,this.get(a,i)&n.get(a,i));return this},r.and=function(n,a){return new e(n).and(a)},r.prototype.or=function(n){return typeof n=="number"?this.orS(n):this.orM(n)},r.prototype.orS=function(n){for(let a=0;a<this.rows;a++)for(let i=0;i<this.columns;i++)this.set(a,i,this.get(a,i)|n);return this},r.prototype.orM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let i=0;i<this.columns;i++)this.set(a,i,this.get(a,i)|n.get(a,i));return this},r.or=function(n,a){return new e(n).or(a)},r.prototype.xor=function(n){return typeof n=="number"?this.xorS(n):this.xorM(n)},r.prototype.xorS=function(n){for(let a=0;a<this.rows;a++)for(let i=0;i<this.columns;i++)this.set(a,i,this.get(a,i)^n);return this},r.prototype.xorM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let i=0;i<this.columns;i++)this.set(a,i,this.get(a,i)^n.get(a,i));return this},r.xor=function(n,a){return new e(n).xor(a)},r.prototype.leftShift=function(n){return typeof n=="number"?this.leftShiftS(n):this.leftShiftM(n)},r.prototype.leftShiftS=function(n){for(let a=0;a<this.rows;a++)for(let i=0;i<this.columns;i++)this.set(a,i,this.get(a,i)<<n);return this},r.prototype.leftShiftM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let i=0;i<this.columns;i++)this.set(a,i,this.get(a,i)<<n.get(a,i));return this},r.leftShift=function(n,a){return new e(n).leftShift(a)},r.prototype.signPropagatingRightShift=function(n){return typeof n=="number"?this.signPropagatingRightShiftS(n):this.signPropagatingRightShiftM(n)},r.prototype.signPropagatingRightShiftS=function(n){for(let a=0;a<this.rows;a++)for(let i=0;i<this.columns;i++)this.set(a,i,this.get(a,i)>>n);return this},r.prototype.signPropagatingRightShiftM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let i=0;i<this.columns;i++)this.set(a,i,this.get(a,i)>>n.get(a,i));return this},r.signPropagatingRightShift=function(n,a){return new e(n).signPropagatingRightShift(a)},r.prototype.rightShift=function(n){return typeof n=="number"?this.rightShiftS(n):this.rightShiftM(n)},r.prototype.rightShiftS=function(n){for(let a=0;a<this.rows;a++)for(let i=0;i<this.columns;i++)this.set(a,i,this.get(a,i)>>>n);return this},r.prototype.rightShiftM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let i=0;i<this.columns;i++)this.set(a,i,this.get(a,i)>>>n.get(a,i));return this},r.rightShift=function(n,a){return new e(n).rightShift(a)},r.prototype.zeroFillRightShift=r.prototype.rightShift,r.prototype.zeroFillRightShiftS=r.prototype.rightShiftS,r.prototype.zeroFillRightShiftM=r.prototype.rightShiftM,r.zeroFillRightShift=r.rightShift,r.prototype.not=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,~this.get(n,a));return this},r.not=function(n){return new e(n).not()},r.prototype.abs=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.abs(this.get(n,a)));return this},r.abs=function(n){return new e(n).abs()},r.prototype.acos=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.acos(this.get(n,a)));return this},r.acos=function(n){return new e(n).acos()},r.prototype.acosh=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.acosh(this.get(n,a)));return this},r.acosh=function(n){return new e(n).acosh()},r.prototype.asin=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.asin(this.get(n,a)));return this},r.asin=function(n){return new e(n).asin()},r.prototype.asinh=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.asinh(this.get(n,a)));return this},r.asinh=function(n){return new e(n).asinh()},r.prototype.atan=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.atan(this.get(n,a)));return this},r.atan=function(n){return new e(n).atan()},r.prototype.atanh=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.atanh(this.get(n,a)));return this},r.atanh=function(n){return new e(n).atanh()},r.prototype.cbrt=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.cbrt(this.get(n,a)));return this},r.cbrt=function(n){return new e(n).cbrt()},r.prototype.ceil=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.ceil(this.get(n,a)));return this},r.ceil=function(n){return new e(n).ceil()},r.prototype.clz32=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.clz32(this.get(n,a)));return this},r.clz32=function(n){return new e(n).clz32()},r.prototype.cos=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.cos(this.get(n,a)));return this},r.cos=function(n){return new e(n).cos()},r.prototype.cosh=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.cosh(this.get(n,a)));return this},r.cosh=function(n){return new e(n).cosh()},r.prototype.exp=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.exp(this.get(n,a)));return this},r.exp=function(n){return new e(n).exp()},r.prototype.expm1=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.expm1(this.get(n,a)));return this},r.expm1=function(n){return new e(n).expm1()},r.prototype.floor=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.floor(this.get(n,a)));return this},r.floor=function(n){return new e(n).floor()},r.prototype.fround=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.fround(this.get(n,a)));return this},r.fround=function(n){return new e(n).fround()},r.prototype.log=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.log(this.get(n,a)));return this},r.log=function(n){return new e(n).log()},r.prototype.log1p=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.log1p(this.get(n,a)));return this},r.log1p=function(n){return new e(n).log1p()},r.prototype.log10=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.log10(this.get(n,a)));return this},r.log10=function(n){return new e(n).log10()},r.prototype.log2=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.log2(this.get(n,a)));return this},r.log2=function(n){return new e(n).log2()},r.prototype.round=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.round(this.get(n,a)));return this},r.round=function(n){return new e(n).round()},r.prototype.sign=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.sign(this.get(n,a)));return this},r.sign=function(n){return new e(n).sign()},r.prototype.sin=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.sin(this.get(n,a)));return this},r.sin=function(n){return new e(n).sin()},r.prototype.sinh=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.sinh(this.get(n,a)));return this},r.sinh=function(n){return new e(n).sinh()},r.prototype.sqrt=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.sqrt(this.get(n,a)));return this},r.sqrt=function(n){return new e(n).sqrt()},r.prototype.tan=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.tan(this.get(n,a)));return this},r.tan=function(n){return new e(n).tan()},r.prototype.tanh=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.tanh(this.get(n,a)));return this},r.tanh=function(n){return new e(n).tanh()},r.prototype.trunc=function(){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.set(n,a,Math.trunc(this.get(n,a)));return this},r.trunc=function(n){return new e(n).trunc()},r.pow=function(n,a){return new e(n).pow(a)},r.prototype.pow=function(n){return typeof n=="number"?this.powS(n):this.powM(n)},r.prototype.powS=function(n){for(let a=0;a<this.rows;a++)for(let i=0;i<this.columns;i++)this.set(a,i,Math.pow(this.get(a,i),n));return this},r.prototype.powM=function(n){if(n=e.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let i=0;i<this.columns;i++)this.set(a,i,Math.pow(this.get(a,i),n.get(a,i)));return this}}function ka(r,e,t){let n=t?r.rows:r.rows-1;if(e<0||e>n)throw new RangeError("Row index out of range")}function Pa(r,e,t){let n=t?r.columns:r.columns-1;if(e<0||e>n)throw new RangeError("Column index out of range")}function Mu(r,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==r.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function Iu(r,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==r.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function UE(r,e){if(!Fn(e))throw new TypeError("row indices must be an array");for(let t=0;t<e.length;t++)if(e[t]<0||e[t]>=r.rows)throw new RangeError("row indices are out of range")}function NE(r,e){if(!Fn(e))throw new TypeError("column indices must be an array");for(let t=0;t<e.length;t++)if(e[t]<0||e[t]>=r.columns)throw new RangeError("column indices are out of range")}function j1(r,e,t,n,a){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(ld("startRow",e),ld("endRow",t),ld("startColumn",n),ld("endColumn",a),e>t||n>a||e<0||e>=r.rows||t<0||t>=r.rows||n<0||n>=r.columns||a<0||a>=r.columns)throw new RangeError("Submatrix indices are out of range")}function Cp(r,e=0){let t=[];for(let n=0;n<r;n++)t.push(e);return t}function ld(r,e){if(typeof e!="number")throw new TypeError(`${r} must be a number`)}function lu(r){if(r.isEmpty())throw new Error("Empty matrix has no elements to index")}function Xfe(r){let e=Cp(r.rows);for(let t=0;t<r.rows;++t)for(let n=0;n<r.columns;++n)e[t]+=r.get(t,n);return e}function Yfe(r){let e=Cp(r.columns);for(let t=0;t<r.rows;++t)for(let n=0;n<r.columns;++n)e[n]+=r.get(t,n);return e}function Zfe(r){let e=0;for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)e+=r.get(t,n);return e}function qfe(r){let e=Cp(r.rows,1);for(let t=0;t<r.rows;++t)for(let n=0;n<r.columns;++n)e[t]*=r.get(t,n);return e}function Jfe(r){let e=Cp(r.columns,1);for(let t=0;t<r.rows;++t)for(let n=0;n<r.columns;++n)e[n]*=r.get(t,n);return e}function ele(r){let e=1;for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)e*=r.get(t,n);return e}function tle(r,e,t){const n=r.rows,a=r.columns,i=[];for(let o=0;o<n;o++){let A=0,s=0,u=0;for(let f=0;f<a;f++)u=r.get(o,f)-t[o],A+=u,s+=u*u;e?i.push((s-A*A/a)/(a-1)):i.push((s-A*A/a)/a)}return i}function rle(r,e,t){const n=r.rows,a=r.columns,i=[];for(let o=0;o<a;o++){let A=0,s=0,u=0;for(let f=0;f<n;f++)u=r.get(f,o)-t[o],A+=u,s+=u*u;e?i.push((s-A*A/n)/(n-1)):i.push((s-A*A/n)/n)}return i}function nle(r,e,t){const n=r.rows,a=r.columns,i=n*a;let o=0,A=0,s=0;for(let u=0;u<n;u++)for(let f=0;f<a;f++)s=r.get(u,f)-t,o+=s,A+=s*s;return e?(A-o*o/i)/(i-1):(A-o*o/i)/i}function ale(r,e){for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)r.set(t,n,r.get(t,n)-e[t])}function ile(r,e){for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)r.set(t,n,r.get(t,n)-e[n])}function ole(r,e){for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)r.set(t,n,r.get(t,n)-e)}function Ale(r){const e=[];for(let t=0;t<r.rows;t++){let n=0;for(let a=0;a<r.columns;a++)n+=Math.pow(r.get(t,a),2)/(r.columns-1);e.push(Math.sqrt(n))}return e}function sle(r,e){for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)r.set(t,n,r.get(t,n)/e[t])}function ule(r){const e=[];for(let t=0;t<r.columns;t++){let n=0;for(let a=0;a<r.rows;a++)n+=Math.pow(r.get(a,t),2)/(r.rows-1);e.push(Math.sqrt(n))}return e}function fle(r,e){for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)r.set(t,n,r.get(t,n)/e[n])}function lle(r){const e=r.size-1;let t=0;for(let n=0;n<r.columns;n++)for(let a=0;a<r.rows;a++)t+=Math.pow(r.get(a,n),2)/e;return Math.sqrt(t)}function cle(r,e){for(let t=0;t<r.rows;t++)for(let n=0;n<r.columns;n++)r.set(t,n,r.get(t,n)/e)}class Zt{static from1DArray(e,t,n){if(e*t!==n.length)throw new RangeError("data length does not match given dimensions");let i=new lt(e,t);for(let o=0;o<e;o++)for(let A=0;A<t;A++)i.set(o,A,n[o*t+A]);return i}static rowVector(e){let t=new lt(1,e.length);for(let n=0;n<e.length;n++)t.set(0,n,e[n]);return t}static columnVector(e){let t=new lt(e.length,1);for(let n=0;n<e.length;n++)t.set(n,0,e[n]);return t}static zeros(e,t){return new lt(e,t)}static ones(e,t){return new lt(e,t).fill(1)}static rand(e,t,n={}){if(typeof n!="object")throw new TypeError("options must be an object");const{random:a=Math.random}=n;let i=new lt(e,t);for(let o=0;o<e;o++)for(let A=0;A<t;A++)i.set(o,A,a());return i}static randInt(e,t,n={}){if(typeof n!="object")throw new TypeError("options must be an object");const{min:a=0,max:i=1e3,random:o=Math.random}=n;if(!Number.isInteger(a))throw new TypeError("min must be an integer");if(!Number.isInteger(i))throw new TypeError("max must be an integer");if(a>=i)throw new RangeError("min must be smaller than max");let A=i-a,s=new lt(e,t);for(let u=0;u<e;u++)for(let f=0;f<t;f++){let l=a+Math.round(o()*A);s.set(u,f,l)}return s}static eye(e,t,n){t===void 0&&(t=e),n===void 0&&(n=1);let a=Math.min(e,t),i=this.zeros(e,t);for(let o=0;o<a;o++)i.set(o,o,n);return i}static diag(e,t,n){let a=e.length;t===void 0&&(t=a),n===void 0&&(n=t);let i=Math.min(a,t,n),o=this.zeros(t,n);for(let A=0;A<i;A++)o.set(A,A,e[A]);return o}static min(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);let n=e.rows,a=e.columns,i=new lt(n,a);for(let o=0;o<n;o++)for(let A=0;A<a;A++)i.set(o,A,Math.min(e.get(o,A),t.get(o,A)));return i}static max(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);let n=e.rows,a=e.columns,i=new this(n,a);for(let o=0;o<n;o++)for(let A=0;A<a;A++)i.set(o,A,Math.max(e.get(o,A),t.get(o,A)));return i}static checkMatrix(e){return Zt.isMatrix(e)?e:new lt(e)}static isMatrix(e){return e!=null&&e.klass==="Matrix"}get size(){return this.rows*this.columns}apply(e){if(typeof e!="function")throw new TypeError("callback must be a function");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.call(this,t,n);return this}to1DArray(){let e=[];for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.push(this.get(t,n));return e}to2DArray(){let e=[];for(let t=0;t<this.rows;t++){e.push([]);for(let n=0;n<this.columns;n++)e[t].push(this.get(t,n))}return e}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let e=0;e<this.rows;e++)for(let t=0;t<=e;t++)if(this.get(e,t)!==this.get(t,e))return!1;return!0}return!1}isEchelonForm(){let e=0,t=0,n=-1,a=!0,i=!1;for(;e<this.rows&&a;){for(t=0,i=!1;t<this.columns&&i===!1;)this.get(e,t)===0?t++:this.get(e,t)===1&&t>n?(i=!0,n=t):(a=!1,i=!0);e++}return a}isReducedEchelonForm(){let e=0,t=0,n=-1,a=!0,i=!1;for(;e<this.rows&&a;){for(t=0,i=!1;t<this.columns&&i===!1;)this.get(e,t)===0?t++:this.get(e,t)===1&&t>n?(i=!0,n=t):(a=!1,i=!0);for(let o=t+1;o<this.rows;o++)this.get(e,o)!==0&&(a=!1);e++}return a}echelonForm(){let e=this.clone(),t=0,n=0;for(;t<e.rows&&n<e.columns;){let a=t;for(let i=t;i<e.rows;i++)e.get(i,n)>e.get(a,n)&&(a=i);if(e.get(a,n)===0)n++;else{e.swapRows(t,a);let i=e.get(t,n);for(let o=n;o<e.columns;o++)e.set(t,o,e.get(t,o)/i);for(let o=t+1;o<e.rows;o++){let A=e.get(o,n)/e.get(t,n);e.set(o,n,0);for(let s=n+1;s<e.columns;s++)e.set(o,s,e.get(o,s)-e.get(t,s)*A)}t++,n++}}return e}reducedEchelonForm(){let e=this.echelonForm(),t=e.columns,n=e.rows,a=n-1;for(;a>=0;)if(e.maxRow(a)===0)a--;else{let i=0,o=!1;for(;i<n&&o===!1;)e.get(a,i)===1?o=!0:i++;for(let A=0;A<a;A++){let s=e.get(A,i);for(let u=i;u<t;u++){let f=e.get(A,u)-s*e.get(a,u);e.set(A,u,f)}}a--}return e}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{rows:t=1,columns:n=1}=e;if(!Number.isInteger(t)||t<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(n)||n<=0)throw new TypeError("columns must be a positive integer");let a=new lt(this.rows*t,this.columns*n);for(let i=0;i<t;i++)for(let o=0;o<n;o++)a.setSubMatrix(this,this.rows*i,this.columns*o);return a}fill(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,e);return this}neg(){return this.mulS(-1)}getRow(e){ka(this,e);let t=[];for(let n=0;n<this.columns;n++)t.push(this.get(e,n));return t}getRowVector(e){return lt.rowVector(this.getRow(e))}setRow(e,t){ka(this,e),t=Mu(this,t);for(let n=0;n<this.columns;n++)this.set(e,n,t[n]);return this}swapRows(e,t){ka(this,e),ka(this,t);for(let n=0;n<this.columns;n++){let a=this.get(e,n);this.set(e,n,this.get(t,n)),this.set(t,n,a)}return this}getColumn(e){Pa(this,e);let t=[];for(let n=0;n<this.rows;n++)t.push(this.get(n,e));return t}getColumnVector(e){return lt.columnVector(this.getColumn(e))}setColumn(e,t){Pa(this,e),t=Iu(this,t);for(let n=0;n<this.rows;n++)this.set(n,e,t[n]);return this}swapColumns(e,t){Pa(this,e),Pa(this,t);for(let n=0;n<this.rows;n++){let a=this.get(n,e);this.set(n,e,this.get(n,t)),this.set(n,t,a)}return this}addRowVector(e){e=Mu(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e[n]);return this}subRowVector(e){e=Mu(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e[n]);return this}mulRowVector(e){e=Mu(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e[n]);return this}divRowVector(e){e=Mu(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e[n]);return this}addColumnVector(e){e=Iu(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e[t]);return this}subColumnVector(e){e=Iu(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e[t]);return this}mulColumnVector(e){e=Iu(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e[t]);return this}divColumnVector(e){e=Iu(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e[t]);return this}mulRow(e,t){ka(this,e);for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this}mulColumn(e,t){Pa(this,e);for(let n=0;n<this.rows;n++)this.set(n,e,this.get(n,e)*t);return this}max(e){if(this.isEmpty())return NaN;switch(e){case"row":{const t=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.get(n,a)>t[n]&&(t[n]=this.get(n,a));return t}case"column":{const t=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.get(n,a)>t[a]&&(t[a]=this.get(n,a));return t}case void 0:{let t=this.get(0,0);for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.get(n,a)>t&&(t=this.get(n,a));return t}default:throw new Error(`invalid option: ${e}`)}}maxIndex(){lu(this);let e=this.get(0,0),t=[0,0];for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.get(n,a)>e&&(e=this.get(n,a),t[0]=n,t[1]=a);return t}min(e){if(this.isEmpty())return NaN;switch(e){case"row":{const t=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.get(n,a)<t[n]&&(t[n]=this.get(n,a));return t}case"column":{const t=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.get(n,a)<t[a]&&(t[a]=this.get(n,a));return t}case void 0:{let t=this.get(0,0);for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.get(n,a)<t&&(t=this.get(n,a));return t}default:throw new Error(`invalid option: ${e}`)}}minIndex(){lu(this);let e=this.get(0,0),t=[0,0];for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)this.get(n,a)<e&&(e=this.get(n,a),t[0]=n,t[1]=a);return t}maxRow(e){if(ka(this,e),this.isEmpty())return NaN;let t=this.get(e,0);for(let n=1;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}maxRowIndex(e){ka(this,e),lu(this);let t=this.get(e,0),n=[e,0];for(let a=1;a<this.columns;a++)this.get(e,a)>t&&(t=this.get(e,a),n[1]=a);return n}minRow(e){if(ka(this,e),this.isEmpty())return NaN;let t=this.get(e,0);for(let n=1;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}minRowIndex(e){ka(this,e),lu(this);let t=this.get(e,0),n=[e,0];for(let a=1;a<this.columns;a++)this.get(e,a)<t&&(t=this.get(e,a),n[1]=a);return n}maxColumn(e){if(Pa(this,e),this.isEmpty())return NaN;let t=this.get(0,e);for(let n=1;n<this.rows;n++)this.get(n,e)>t&&(t=this.get(n,e));return t}maxColumnIndex(e){Pa(this,e),lu(this);let t=this.get(0,e),n=[0,e];for(let a=1;a<this.rows;a++)this.get(a,e)>t&&(t=this.get(a,e),n[0]=a);return n}minColumn(e){if(Pa(this,e),this.isEmpty())return NaN;let t=this.get(0,e);for(let n=1;n<this.rows;n++)this.get(n,e)<t&&(t=this.get(n,e));return t}minColumnIndex(e){Pa(this,e),lu(this);let t=this.get(0,e),n=[0,e];for(let a=1;a<this.rows;a++)this.get(a,e)<t&&(t=this.get(a,e),n[0]=a);return n}diag(){let e=Math.min(this.rows,this.columns),t=[];for(let n=0;n<e;n++)t.push(this.get(n,n));return t}norm(e="frobenius"){let t=0;if(e==="max")return this.max();if(e==="frobenius"){for(let n=0;n<this.rows;n++)for(let a=0;a<this.columns;a++)t=t+this.get(n,a)*this.get(n,a);return Math.sqrt(t)}else throw new RangeError(`unknown norm type: ${e}`)}cumulativeSum(){let e=0;for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e+=this.get(t,n),this.set(t,n,e);return this}dot(e){Zt.isMatrix(e)&&(e=e.to1DArray());let t=this.to1DArray();if(t.length!==e.length)throw new RangeError("vectors do not have the same size");let n=0;for(let a=0;a<t.length;a++)n+=t[a]*e[a];return n}mmul(e){e=lt.checkMatrix(e);let t=this.rows,n=this.columns,a=e.columns,i=new lt(t,a),o=new Float64Array(n);for(let A=0;A<a;A++){for(let s=0;s<n;s++)o[s]=e.get(s,A);for(let s=0;s<t;s++){let u=0;for(let f=0;f<n;f++)u+=this.get(s,f)*o[f];i.set(s,A,u)}}return i}strassen2x2(e){e=lt.checkMatrix(e);let t=new lt(2,2);const n=this.get(0,0),a=e.get(0,0),i=this.get(0,1),o=e.get(0,1),A=this.get(1,0),s=e.get(1,0),u=this.get(1,1),f=e.get(1,1),l=(n+u)*(a+f),c=(A+u)*a,h=n*(o-f),d=u*(s-a),v=(n+i)*f,g=(A-n)*(a+o),p=(i-u)*(s+f),y=l+d-v+p,m=h+v,w=c+d,B=l-c+h+g;return t.set(0,0,y),t.set(0,1,m),t.set(1,0,w),t.set(1,1,B),t}strassen3x3(e){e=lt.checkMatrix(e);let t=new lt(3,3);const n=this.get(0,0),a=this.get(0,1),i=this.get(0,2),o=this.get(1,0),A=this.get(1,1),s=this.get(1,2),u=this.get(2,0),f=this.get(2,1),l=this.get(2,2),c=e.get(0,0),h=e.get(0,1),d=e.get(0,2),v=e.get(1,0),g=e.get(1,1),p=e.get(1,2),y=e.get(2,0),m=e.get(2,1),w=e.get(2,2),B=(n+a+i-o-A-f-l)*g,E=(n-o)*(-h+g),b=A*(-c+h+v-g-p-y+w),C=(-n+o+A)*(c-h+g),_=(o+A)*(-c+h),x=n*c,M=(-n+u+f)*(c-d+p),S=(-n+u)*(d-p),I=(u+f)*(-c+d),D=(n+a+i-A-s-u-f)*p,O=f*(-c+d+v-g-p-y+m),F=(-i+f+l)*(g+y-m),U=(i-l)*(g-m),Q=i*y,N=(f+l)*(-y+m),R=(-i+A+s)*(p+y-w),J=(i-s)*(p-w),re=(A+s)*(-y+w),ee=a*v,q=s*m,ve=o*d,Me=u*h,Re=l*w,tt=x+Q+ee,st=B+C+_+x+F+Q+N,at=x+M+I+D+Q+R+re,Et=E+b+C+x+Q+R+J,bt=E+C+_+x+q,fr=Q+R+J+re+ve,Qt=x+M+S+O+F+U+Q,Kt=F+U+Q+N+Me,gr=x+M+S+I+Re;return t.set(0,0,tt),t.set(0,1,st),t.set(0,2,at),t.set(1,0,Et),t.set(1,1,bt),t.set(1,2,fr),t.set(2,0,Qt),t.set(2,1,Kt),t.set(2,2,gr),t}mmulStrassen(e){e=lt.checkMatrix(e);let t=this.clone(),n=t.rows,a=t.columns,i=e.rows,o=e.columns;a!==i&&console.warn(`Multiplying ${n} x ${a} and ${i} x ${o} matrix: dimensions do not match.`);function A(l,c,h){let d=l.rows,v=l.columns;if(d===c&&v===h)return l;{let g=Zt.zeros(c,h);return g=g.setSubMatrix(l,0,0),g}}let s=Math.max(n,i),u=Math.max(a,o);t=A(t,s,u),e=A(e,s,u);function f(l,c,h,d){if(h<=512||d<=512)return l.mmul(c);h%2===1&&d%2===1?(l=A(l,h+1,d+1),c=A(c,h+1,d+1)):h%2===1?(l=A(l,h+1,d),c=A(c,h+1,d)):d%2===1&&(l=A(l,h,d+1),c=A(c,h,d+1));let v=parseInt(l.rows/2,10),g=parseInt(l.columns/2,10),p=l.subMatrix(0,v-1,0,g-1),y=c.subMatrix(0,v-1,0,g-1),m=l.subMatrix(0,v-1,g,l.columns-1),w=c.subMatrix(0,v-1,g,c.columns-1),B=l.subMatrix(v,l.rows-1,0,g-1),E=c.subMatrix(v,c.rows-1,0,g-1),b=l.subMatrix(v,l.rows-1,g,l.columns-1),C=c.subMatrix(v,c.rows-1,g,c.columns-1),_=f(Zt.add(p,b),Zt.add(y,C),v,g),x=f(Zt.add(B,b),y,v,g),M=f(p,Zt.sub(w,C),v,g),S=f(b,Zt.sub(E,y),v,g),I=f(Zt.add(p,m),C,v,g),D=f(Zt.sub(B,p),Zt.add(y,w),v,g),O=f(Zt.sub(m,b),Zt.add(E,C),v,g),F=Zt.add(_,S);F.sub(I),F.add(O);let U=Zt.add(M,I),Q=Zt.add(x,S),N=Zt.sub(_,x);N.add(M),N.add(D);let R=Zt.zeros(2*F.rows,2*F.columns);return R=R.setSubMatrix(F,0,0),R=R.setSubMatrix(U,F.rows,0),R=R.setSubMatrix(Q,0,F.columns),R=R.setSubMatrix(N,F.rows,F.columns),R.subMatrix(0,h-1,0,d-1)}return f(t,e,s,u)}scaleRows(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{min:t=0,max:n=1}=e;if(!Number.isFinite(t))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(t>=n)throw new RangeError("min must be smaller than max");let a=new lt(this.rows,this.columns);for(let i=0;i<this.rows;i++){const o=this.getRow(i);o.length>0&&rM(o,{min:t,max:n,output:o}),a.setRow(i,o)}return a}scaleColumns(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{min:t=0,max:n=1}=e;if(!Number.isFinite(t))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(t>=n)throw new RangeError("min must be smaller than max");let a=new lt(this.rows,this.columns);for(let i=0;i<this.columns;i++){const o=this.getColumn(i);o.length&&rM(o,{min:t,max:n,output:o}),a.setColumn(i,o)}return a}flipRows(){const e=Math.ceil(this.columns/2);for(let t=0;t<this.rows;t++)for(let n=0;n<e;n++){let a=this.get(t,n),i=this.get(t,this.columns-1-n);this.set(t,n,i),this.set(t,this.columns-1-n,a)}return this}flipColumns(){const e=Math.ceil(this.rows/2);for(let t=0;t<this.columns;t++)for(let n=0;n<e;n++){let a=this.get(n,t),i=this.get(this.rows-1-n,t);this.set(n,t,i),this.set(this.rows-1-n,t,a)}return this}kroneckerProduct(e){e=lt.checkMatrix(e);let t=this.rows,n=this.columns,a=e.rows,i=e.columns,o=new lt(t*a,n*i);for(let A=0;A<t;A++)for(let s=0;s<n;s++)for(let u=0;u<a;u++)for(let f=0;f<i;f++)o.set(a*A+u,i*s+f,this.get(A,s)*e.get(u,f));return o}kroneckerSum(e){if(e=lt.checkMatrix(e),!this.isSquare()||!e.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let t=this.rows,n=e.rows,a=this.kroneckerProduct(lt.eye(n,n)),i=lt.eye(t,t).kroneckerProduct(e);return a.add(i)}transpose(){let e=new lt(this.columns,this.rows);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.set(n,t,this.get(t,n));return e}sortRows(e=aM){for(let t=0;t<this.rows;t++)this.setRow(t,this.getRow(t).sort(e));return this}sortColumns(e=aM){for(let t=0;t<this.columns;t++)this.setColumn(t,this.getColumn(t).sort(e));return this}subMatrix(e,t,n,a){j1(this,e,t,n,a);let i=new lt(t-e+1,a-n+1);for(let o=e;o<=t;o++)for(let A=n;A<=a;A++)i.set(o-e,A-n,this.get(o,A));return i}subMatrixRow(e,t,n){if(t===void 0&&(t=0),n===void 0&&(n=this.columns-1),t>n||t<0||t>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");let a=new lt(e.length,n-t+1);for(let i=0;i<e.length;i++)for(let o=t;o<=n;o++){if(e[i]<0||e[i]>=this.rows)throw new RangeError(`Row index out of range: ${e[i]}`);a.set(i,o-t,this.get(e[i],o))}return a}subMatrixColumn(e,t,n){if(t===void 0&&(t=0),n===void 0&&(n=this.rows-1),t>n||t<0||t>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");let a=new lt(n-t+1,e.length);for(let i=0;i<e.length;i++)for(let o=t;o<=n;o++){if(e[i]<0||e[i]>=this.columns)throw new RangeError(`Column index out of range: ${e[i]}`);a.set(o-t,i,this.get(o,e[i]))}return a}setSubMatrix(e,t,n){if(e=lt.checkMatrix(e),e.isEmpty())return this;let a=t+e.rows-1,i=n+e.columns-1;j1(this,t,a,n,i);for(let o=0;o<e.rows;o++)for(let A=0;A<e.columns;A++)this.set(t+o,n+A,e.get(o,A));return this}selection(e,t){UE(this,e),NE(this,t);let n=new lt(e.length,t.length);for(let a=0;a<e.length;a++){let i=e[a];for(let o=0;o<t.length;o++){let A=t[o];n.set(a,o,this.get(i,A))}}return n}trace(){let e=Math.min(this.rows,this.columns),t=0;for(let n=0;n<e;n++)t+=this.get(n,n);return t}clone(){let e=new lt(this.rows,this.columns);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.set(t,n,this.get(t,n));return e}sum(e){switch(e){case"row":return Xfe(this);case"column":return Yfe(this);case void 0:return Zfe(this);default:throw new Error(`invalid option: ${e}`)}}product(e){switch(e){case"row":return qfe(this);case"column":return Jfe(this);case void 0:return ele(this);default:throw new Error(`invalid option: ${e}`)}}mean(e){const t=this.sum(e);switch(e){case"row":{for(let n=0;n<this.rows;n++)t[n]/=this.columns;return t}case"column":{for(let n=0;n<this.columns;n++)t[n]/=this.rows;return t}case void 0:return t/this.size;default:throw new Error(`invalid option: ${e}`)}}variance(e,t={}){if(typeof e=="object"&&(t=e,e=void 0),typeof t!="object")throw new TypeError("options must be an object");const{unbiased:n=!0,mean:a=this.mean(e)}=t;if(typeof n!="boolean")throw new TypeError("unbiased must be a boolean");switch(e){case"row":{if(!Fn(a))throw new TypeError("mean must be an array");return tle(this,n,a)}case"column":{if(!Fn(a))throw new TypeError("mean must be an array");return rle(this,n,a)}case void 0:{if(typeof a!="number")throw new TypeError("mean must be a number");return nle(this,n,a)}default:throw new Error(`invalid option: ${e}`)}}standardDeviation(e,t){typeof e=="object"&&(t=e,e=void 0);const n=this.variance(e,t);if(e===void 0)return Math.sqrt(n);for(let a=0;a<n.length;a++)n[a]=Math.sqrt(n[a]);return n}center(e,t={}){if(typeof e=="object"&&(t=e,e=void 0),typeof t!="object")throw new TypeError("options must be an object");const{center:n=this.mean(e)}=t;switch(e){case"row":{if(!Fn(n))throw new TypeError("center must be an array");return ale(this,n),this}case"column":{if(!Fn(n))throw new TypeError("center must be an array");return ile(this,n),this}case void 0:{if(typeof n!="number")throw new TypeError("center must be a number");return ole(this,n),this}default:throw new Error(`invalid option: ${e}`)}}scale(e,t={}){if(typeof e=="object"&&(t=e,e=void 0),typeof t!="object")throw new TypeError("options must be an object");let n=t.scale;switch(e){case"row":{if(n===void 0)n=Ale(this);else if(!Fn(n))throw new TypeError("scale must be an array");return sle(this,n),this}case"column":{if(n===void 0)n=ule(this);else if(!Fn(n))throw new TypeError("scale must be an array");return fle(this,n),this}case void 0:{if(n===void 0)n=lle(this);else if(typeof n!="number")throw new TypeError("scale must be a number");return cle(this,n),this}default:throw new Error(`invalid option: ${e}`)}}toString(e){return tP(this,e)}}Zt.prototype.klass="Matrix";typeof Symbol<"u"&&(Zt.prototype[Symbol.for("nodejs.util.inspect.custom")]=jfe);function aM(r,e){return r-e}function hle(r){return r.every(e=>typeof e=="number")}Zt.random=Zt.rand;Zt.randomInt=Zt.randInt;Zt.diagonal=Zt.diag;Zt.prototype.diagonal=Zt.prototype.diag;Zt.identity=Zt.eye;Zt.prototype.negate=Zt.prototype.neg;Zt.prototype.tensorProduct=Zt.prototype.kroneckerProduct;class lt extends Zt{constructor(e,t){if(super(),lt.isMatrix(e))return e.clone();if(Number.isInteger(e)&&e>=0)if(this.data=[],Number.isInteger(t)&&t>=0)for(let n=0;n<e;n++)this.data.push(new Float64Array(t));else throw new TypeError("nColumns must be a positive integer");else if(Fn(e)){const n=e;if(e=n.length,t=e?n[0].length:0,typeof t!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let a=0;a<e;a++){if(n[a].length!==t)throw new RangeError("Inconsistent array dimensions");if(!hle(n[a]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(n[a]))}}else throw new TypeError("First argument must be a positive number or an array");this.rows=e,this.columns=t}set(e,t,n){return this.data[e][t]=n,this}get(e,t){return this.data[e][t]}removeRow(e){return ka(this,e),this.data.splice(e,1),this.rows-=1,this}addRow(e,t){return t===void 0&&(t=e,e=this.rows),ka(this,e,!0),t=Float64Array.from(Mu(this,t)),this.data.splice(e,0,t),this.rows+=1,this}removeColumn(e){Pa(this,e);for(let t=0;t<this.rows;t++){const n=new Float64Array(this.columns-1);for(let a=0;a<e;a++)n[a]=this.data[t][a];for(let a=e+1;a<this.columns;a++)n[a-1]=this.data[t][a];this.data[t]=n}return this.columns-=1,this}addColumn(e,t){typeof t>"u"&&(t=e,e=this.columns),Pa(this,e,!0),t=Iu(this,t);for(let n=0;n<this.rows;n++){const a=new Float64Array(this.columns+1);let i=0;for(;i<e;i++)a[i]=this.data[n][i];for(a[i++]=t[n];i<this.columns+1;i++)a[i]=this.data[n][i-1];this.data[n]=a}return this.columns+=1,this}}Vfe(Zt,lt);class Go extends Zt{constructor(e,t,n){super(),this.matrix=e,this.rows=t,this.columns=n}}class dle extends Go{constructor(e,t){Pa(e,t),super(e,e.rows,1),this.column=t}set(e,t,n){return this.matrix.set(e,this.column,n),this}get(e){return this.matrix.get(e,this.column)}}class vle extends Go{constructor(e,t){NE(e,t),super(e,e.rows,t.length),this.columnIndices=t}set(e,t,n){return this.matrix.set(e,this.columnIndices[t],n),this}get(e,t){return this.matrix.get(e,this.columnIndices[t])}}class gle extends Go{constructor(e){super(e,e.rows,e.columns)}set(e,t,n){return this.matrix.set(e,this.columns-t-1,n),this}get(e,t){return this.matrix.get(e,this.columns-t-1)}}class ple extends Go{constructor(e){super(e,e.rows,e.columns)}set(e,t,n){return this.matrix.set(this.rows-e-1,t,n),this}get(e,t){return this.matrix.get(this.rows-e-1,t)}}class yle extends Go{constructor(e,t){ka(e,t),super(e,1,e.columns),this.row=t}set(e,t,n){return this.matrix.set(this.row,t,n),this}get(e,t){return this.matrix.get(this.row,t)}}class mle extends Go{constructor(e,t){UE(e,t),super(e,t.length,e.columns),this.rowIndices=t}set(e,t,n){return this.matrix.set(this.rowIndices[e],t,n),this}get(e,t){return this.matrix.get(this.rowIndices[e],t)}}class vv extends Go{constructor(e,t,n){UE(e,t),NE(e,n),super(e,t.length,n.length),this.rowIndices=t,this.columnIndices=n}set(e,t,n){return this.matrix.set(this.rowIndices[e],this.columnIndices[t],n),this}get(e,t){return this.matrix.get(this.rowIndices[e],this.columnIndices[t])}}class wle extends Go{constructor(e,t,n,a,i){j1(e,t,n,a,i),super(e,n-t+1,i-a+1),this.startRow=t,this.startColumn=a}set(e,t,n){return this.matrix.set(this.startRow+e,this.startColumn+t,n),this}get(e,t){return this.matrix.get(this.startRow+e,this.startColumn+t)}}class Ble extends Go{constructor(e){super(e,e.columns,e.rows)}set(e,t,n){return this.matrix.set(t,e,n),this}get(e,t){return this.matrix.get(t,e)}}class rP extends Zt{constructor(e,t={}){const{rows:n=1}=t;if(e.length%n!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=n,this.columns=e.length/n,this.data=e}set(e,t,n){let a=this._calculateIndex(e,t);return this.data[a]=n,this}get(e,t){let n=this._calculateIndex(e,t);return this.data[n]}_calculateIndex(e,t){return e*this.columns+t}}class Sa extends Zt{constructor(e){super(),this.data=e,this.rows=e.length,this.columns=e[0].length}set(e,t,n){return this.data[e][t]=n,this}get(e,t){return this.data[e][t]}}function Ele(r,e){if(Fn(r))return r[0]&&Fn(r[0])?new Sa(r):new rP(r,e);throw new Error("the argument is not an array")}class Ag{constructor(e){e=Sa.checkMatrix(e);let t=e.clone(),n=t.rows,a=t.columns,i=new Float64Array(n),o=1,A,s,u,f,l,c,h,d,v;for(A=0;A<n;A++)i[A]=A;for(d=new Float64Array(n),s=0;s<a;s++){for(A=0;A<n;A++)d[A]=t.get(A,s);for(A=0;A<n;A++){for(v=Math.min(A,s),l=0,u=0;u<v;u++)l+=t.get(A,u)*d[u];d[A]-=l,t.set(A,s,d[A])}for(f=s,A=s+1;A<n;A++)Math.abs(d[A])>Math.abs(d[f])&&(f=A);if(f!==s){for(u=0;u<a;u++)c=t.get(f,u),t.set(f,u,t.get(s,u)),t.set(s,u,c);h=i[f],i[f]=i[s],i[s]=h,o=-o}if(s<n&&t.get(s,s)!==0)for(A=s+1;A<n;A++)t.set(A,s,t.get(A,s)/t.get(s,s))}this.LU=t,this.pivotVector=i,this.pivotSign=o}isSingular(){let e=this.LU,t=e.columns;for(let n=0;n<t;n++)if(e.get(n,n)===0)return!0;return!1}solve(e){e=lt.checkMatrix(e);let t=this.LU;if(t.rows!==e.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let a=e.columns,i=e.subMatrixRow(this.pivotVector,0,a-1),o=t.columns,A,s,u;for(u=0;u<o;u++)for(A=u+1;A<o;A++)for(s=0;s<a;s++)i.set(A,s,i.get(A,s)-i.get(u,s)*t.get(A,u));for(u=o-1;u>=0;u--){for(s=0;s<a;s++)i.set(u,s,i.get(u,s)/t.get(u,u));for(A=0;A<u;A++)for(s=0;s<a;s++)i.set(A,s,i.get(A,s)-i.get(u,s)*t.get(A,u))}return i}get determinant(){let e=this.LU;if(!e.isSquare())throw new Error("Matrix must be square");let t=this.pivotSign,n=e.columns;for(let a=0;a<n;a++)t*=e.get(a,a);return t}get lowerTriangularMatrix(){let e=this.LU,t=e.rows,n=e.columns,a=new lt(t,n);for(let i=0;i<t;i++)for(let o=0;o<n;o++)i>o?a.set(i,o,e.get(i,o)):i===o?a.set(i,o,1):a.set(i,o,0);return a}get upperTriangularMatrix(){let e=this.LU,t=e.rows,n=e.columns,a=new lt(t,n);for(let i=0;i<t;i++)for(let o=0;o<n;o++)i<=o?a.set(i,o,e.get(i,o)):a.set(i,o,0);return a}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function _o(r,e){let t=0;return Math.abs(r)>Math.abs(e)?(t=e/r,Math.abs(r)*Math.sqrt(1+t*t)):e!==0?(t=r/e,Math.abs(e)*Math.sqrt(1+t*t)):0}class $1{constructor(e){e=Sa.checkMatrix(e);let t=e.clone(),n=e.rows,a=e.columns,i=new Float64Array(a),o,A,s,u;for(s=0;s<a;s++){let f=0;for(o=s;o<n;o++)f=_o(f,t.get(o,s));if(f!==0){for(t.get(s,s)<0&&(f=-f),o=s;o<n;o++)t.set(o,s,t.get(o,s)/f);for(t.set(s,s,t.get(s,s)+1),A=s+1;A<a;A++){for(u=0,o=s;o<n;o++)u+=t.get(o,s)*t.get(o,A);for(u=-u/t.get(s,s),o=s;o<n;o++)t.set(o,A,t.get(o,A)+u*t.get(o,s))}}i[s]=-f}this.QR=t,this.Rdiag=i}solve(e){e=lt.checkMatrix(e);let t=this.QR,n=t.rows;if(e.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let a=e.columns,i=e.clone(),o=t.columns,A,s,u,f;for(u=0;u<o;u++)for(s=0;s<a;s++){for(f=0,A=u;A<n;A++)f+=t.get(A,u)*i.get(A,s);for(f=-f/t.get(u,u),A=u;A<n;A++)i.set(A,s,i.get(A,s)+f*t.get(A,u))}for(u=o-1;u>=0;u--){for(s=0;s<a;s++)i.set(u,s,i.get(u,s)/this.Rdiag[u]);for(A=0;A<u;A++)for(s=0;s<a;s++)i.set(A,s,i.get(A,s)-i.get(u,s)*t.get(A,u))}return i.subMatrix(0,o-1,0,a-1)}isFullRank(){let e=this.QR.columns;for(let t=0;t<e;t++)if(this.Rdiag[t]===0)return!1;return!0}get upperTriangularMatrix(){let e=this.QR,t=e.columns,n=new lt(t,t),a,i;for(a=0;a<t;a++)for(i=0;i<t;i++)a<i?n.set(a,i,e.get(a,i)):a===i?n.set(a,i,this.Rdiag[a]):n.set(a,i,0);return n}get orthogonalMatrix(){let e=this.QR,t=e.rows,n=e.columns,a=new lt(t,n),i,o,A,s;for(A=n-1;A>=0;A--){for(i=0;i<t;i++)a.set(i,A,0);for(a.set(A,A,1),o=A;o<n;o++)if(e.get(A,A)!==0){for(s=0,i=A;i<t;i++)s+=e.get(i,A)*a.get(i,o);for(s=-s/e.get(A,A),i=A;i<t;i++)a.set(i,o,a.get(i,o)+s*e.get(i,A))}}return a}}class sf{constructor(e,t={}){if(e=Sa.checkMatrix(e),e.isEmpty())throw new Error("Matrix must be non-empty");let n=e.rows,a=e.columns;const{computeLeftSingularVectors:i=!0,computeRightSingularVectors:o=!0,autoTranspose:A=!1}=t;let s=!!i,u=!!o,f=!1,l;if(n<a)if(!A)l=e.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{l=e.transpose(),n=l.rows,a=l.columns,f=!0;let x=s;s=u,u=x}else l=e.clone();let c=Math.min(n,a),h=Math.min(n+1,a),d=new Float64Array(h),v=new lt(n,c),g=new lt(a,a),p=new Float64Array(a),y=new Float64Array(n),m=new Float64Array(h);for(let x=0;x<h;x++)m[x]=x;let w=Math.min(n-1,a),B=Math.max(0,Math.min(a-2,n)),E=Math.max(w,B);for(let x=0;x<E;x++){if(x<w){d[x]=0;for(let M=x;M<n;M++)d[x]=_o(d[x],l.get(M,x));if(d[x]!==0){l.get(x,x)<0&&(d[x]=-d[x]);for(let M=x;M<n;M++)l.set(M,x,l.get(M,x)/d[x]);l.set(x,x,l.get(x,x)+1)}d[x]=-d[x]}for(let M=x+1;M<a;M++){if(x<w&&d[x]!==0){let S=0;for(let I=x;I<n;I++)S+=l.get(I,x)*l.get(I,M);S=-S/l.get(x,x);for(let I=x;I<n;I++)l.set(I,M,l.get(I,M)+S*l.get(I,x))}p[M]=l.get(x,M)}if(s&&x<w)for(let M=x;M<n;M++)v.set(M,x,l.get(M,x));if(x<B){p[x]=0;for(let M=x+1;M<a;M++)p[x]=_o(p[x],p[M]);if(p[x]!==0){p[x+1]<0&&(p[x]=0-p[x]);for(let M=x+1;M<a;M++)p[M]/=p[x];p[x+1]+=1}if(p[x]=-p[x],x+1<n&&p[x]!==0){for(let M=x+1;M<n;M++)y[M]=0;for(let M=x+1;M<n;M++)for(let S=x+1;S<a;S++)y[M]+=p[S]*l.get(M,S);for(let M=x+1;M<a;M++){let S=-p[M]/p[x+1];for(let I=x+1;I<n;I++)l.set(I,M,l.get(I,M)+S*y[I])}}if(u)for(let M=x+1;M<a;M++)g.set(M,x,p[M])}}let b=Math.min(a,n+1);if(w<a&&(d[w]=l.get(w,w)),n<b&&(d[b-1]=0),B+1<b&&(p[B]=l.get(B,b-1)),p[b-1]=0,s){for(let x=w;x<c;x++){for(let M=0;M<n;M++)v.set(M,x,0);v.set(x,x,1)}for(let x=w-1;x>=0;x--)if(d[x]!==0){for(let M=x+1;M<c;M++){let S=0;for(let I=x;I<n;I++)S+=v.get(I,x)*v.get(I,M);S=-S/v.get(x,x);for(let I=x;I<n;I++)v.set(I,M,v.get(I,M)+S*v.get(I,x))}for(let M=x;M<n;M++)v.set(M,x,-v.get(M,x));v.set(x,x,1+v.get(x,x));for(let M=0;M<x-1;M++)v.set(M,x,0)}else{for(let M=0;M<n;M++)v.set(M,x,0);v.set(x,x,1)}}if(u)for(let x=a-1;x>=0;x--){if(x<B&&p[x]!==0)for(let M=x+1;M<a;M++){let S=0;for(let I=x+1;I<a;I++)S+=g.get(I,x)*g.get(I,M);S=-S/g.get(x+1,x);for(let I=x+1;I<a;I++)g.set(I,M,g.get(I,M)+S*g.get(I,x))}for(let M=0;M<a;M++)g.set(M,x,0);g.set(x,x,1)}let C=b-1,_=Number.EPSILON;for(;b>0;){let x,M;for(x=b-2;x>=-1&&x!==-1;x--){const S=Number.MIN_VALUE+_*Math.abs(d[x]+Math.abs(d[x+1]));if(Math.abs(p[x])<=S||Number.isNaN(p[x])){p[x]=0;break}}if(x===b-2)M=4;else{let S;for(S=b-1;S>=x&&S!==x;S--){let I=(S!==b?Math.abs(p[S]):0)+(S!==x+1?Math.abs(p[S-1]):0);if(Math.abs(d[S])<=_*I){d[S]=0;break}}S===x?M=3:S===b-1?M=1:(M=2,x=S)}switch(x++,M){case 1:{let S=p[b-2];p[b-2]=0;for(let I=b-2;I>=x;I--){let D=_o(d[I],S),O=d[I]/D,F=S/D;if(d[I]=D,I!==x&&(S=-F*p[I-1],p[I-1]=O*p[I-1]),u)for(let U=0;U<a;U++)D=O*g.get(U,I)+F*g.get(U,b-1),g.set(U,b-1,-F*g.get(U,I)+O*g.get(U,b-1)),g.set(U,I,D)}break}case 2:{let S=p[x-1];p[x-1]=0;for(let I=x;I<b;I++){let D=_o(d[I],S),O=d[I]/D,F=S/D;if(d[I]=D,S=-F*p[I],p[I]=O*p[I],s)for(let U=0;U<n;U++)D=O*v.get(U,I)+F*v.get(U,x-1),v.set(U,x-1,-F*v.get(U,I)+O*v.get(U,x-1)),v.set(U,I,D)}break}case 3:{const S=Math.max(Math.abs(d[b-1]),Math.abs(d[b-2]),Math.abs(p[b-2]),Math.abs(d[x]),Math.abs(p[x])),I=d[b-1]/S,D=d[b-2]/S,O=p[b-2]/S,F=d[x]/S,U=p[x]/S,Q=((D+I)*(D-I)+O*O)/2,N=I*O*(I*O);let R=0;(Q!==0||N!==0)&&(Q<0?R=0-Math.sqrt(Q*Q+N):R=Math.sqrt(Q*Q+N),R=N/(Q+R));let J=(F+I)*(F-I)+R,re=F*U;for(let ee=x;ee<b-1;ee++){let q=_o(J,re);q===0&&(q=Number.MIN_VALUE);let ve=J/q,Me=re/q;if(ee!==x&&(p[ee-1]=q),J=ve*d[ee]+Me*p[ee],p[ee]=ve*p[ee]-Me*d[ee],re=Me*d[ee+1],d[ee+1]=ve*d[ee+1],u)for(let Re=0;Re<a;Re++)q=ve*g.get(Re,ee)+Me*g.get(Re,ee+1),g.set(Re,ee+1,-Me*g.get(Re,ee)+ve*g.get(Re,ee+1)),g.set(Re,ee,q);if(q=_o(J,re),q===0&&(q=Number.MIN_VALUE),ve=J/q,Me=re/q,d[ee]=q,J=ve*p[ee]+Me*d[ee+1],d[ee+1]=-Me*p[ee]+ve*d[ee+1],re=Me*p[ee+1],p[ee+1]=ve*p[ee+1],s&&ee<n-1)for(let Re=0;Re<n;Re++)q=ve*v.get(Re,ee)+Me*v.get(Re,ee+1),v.set(Re,ee+1,-Me*v.get(Re,ee)+ve*v.get(Re,ee+1)),v.set(Re,ee,q)}p[b-2]=J;break}case 4:{if(d[x]<=0&&(d[x]=d[x]<0?-d[x]:0,u))for(let S=0;S<=C;S++)g.set(S,x,-g.get(S,x));for(;x<C&&!(d[x]>=d[x+1]);){let S=d[x];if(d[x]=d[x+1],d[x+1]=S,u&&x<a-1)for(let I=0;I<a;I++)S=g.get(I,x+1),g.set(I,x+1,g.get(I,x)),g.set(I,x,S);if(s&&x<n-1)for(let I=0;I<n;I++)S=v.get(I,x+1),v.set(I,x+1,v.get(I,x)),v.set(I,x,S);x++}b--;break}}}if(f){let x=g;g=v,v=x}this.m=n,this.n=a,this.s=d,this.U=v,this.V=g}solve(e){let t=e,n=this.threshold,a=this.s.length,i=lt.zeros(a,a);for(let c=0;c<a;c++)Math.abs(this.s[c])<=n?i.set(c,c,0):i.set(c,c,1/this.s[c]);let o=this.U,A=this.rightSingularVectors,s=A.mmul(i),u=A.rows,f=o.rows,l=lt.zeros(u,f);for(let c=0;c<u;c++)for(let h=0;h<f;h++){let d=0;for(let v=0;v<a;v++)d+=s.get(c,v)*o.get(h,v);l.set(c,h,d)}return l.mmul(t)}solveForDiagonal(e){return this.solve(lt.diag(e))}inverse(){let e=this.V,t=this.threshold,n=e.rows,a=e.columns,i=new lt(n,this.s.length);for(let f=0;f<n;f++)for(let l=0;l<a;l++)Math.abs(this.s[l])>t&&i.set(f,l,e.get(f,l)/this.s[l]);let o=this.U,A=o.rows,s=o.columns,u=new lt(n,A);for(let f=0;f<n;f++)for(let l=0;l<A;l++){let c=0;for(let h=0;h<s;h++)c+=i.get(f,h)*o.get(l,h);u.set(f,l,c)}return u}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let e=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,t=0,n=this.s;for(let a=0,i=n.length;a<i;a++)n[a]>e&&t++;return t}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return lt.diag(this.s)}}function ble(r,e=!1){return r=Sa.checkMatrix(r),e?new sf(r).inverse():nP(r,lt.eye(r.rows))}function nP(r,e,t=!1){return r=Sa.checkMatrix(r),e=Sa.checkMatrix(e),t?new sf(r).solve(e):r.isSquare()?new Ag(r).solve(e):new $1(r).solve(e)}function gv(r){if(r=lt.checkMatrix(r),r.isSquare()){if(r.columns===0)return 1;let e,t,n,a;if(r.columns===2)return e=r.get(0,0),t=r.get(0,1),n=r.get(1,0),a=r.get(1,1),e*a-t*n;if(r.columns===3){let i,o,A;return i=new vv(r,[1,2],[1,2]),o=new vv(r,[1,2],[0,2]),A=new vv(r,[1,2],[0,1]),e=r.get(0,0),t=r.get(0,1),n=r.get(0,2),e*gv(i)-t*gv(o)+n*gv(A)}else return new Ag(r).determinant}else throw Error("determinant can only be calculated for a square matrix")}function xle(r,e){let t=[];for(let n=0;n<r;n++)n!==e&&t.push(n);return t}function Cle(r,e,t,n=1e-9,a=1e-9){if(r>a)return new Array(e.rows+1).fill(0);{let i=e.addRow(t,[0]);for(let o=0;o<i.rows;o++)Math.abs(i.get(o,0))<n&&i.set(o,0,0);return i.to1DArray()}}function _le(r,e={}){const{thresholdValue:t=1e-9,thresholdError:n=1e-9}=e;r=lt.checkMatrix(r);let a=r.rows,i=new lt(a,a);for(let o=0;o<a;o++){let A=lt.columnVector(r.getRow(o)),s=r.subMatrixRow(xle(a,o)).transpose(),f=new sf(s).solve(A),l=lt.sub(A,s.mmul(f)).abs().max();i.setRow(o,Cle(l,f,o,t,n))}return i}function Sle(r,e=Number.EPSILON){if(r=lt.checkMatrix(r),r.isEmpty())return r.transpose();let t=new sf(r,{autoTranspose:!0}),n=t.leftSingularVectors,a=t.rightSingularVectors,i=t.diagonal;for(let o=0;o<i.length;o++)Math.abs(i[o])>e?i[o]=1/i[o]:i[o]=0;return a.mmul(lt.diag(i).mmul(n.transpose()))}function Mle(r,e=r,t={}){r=new lt(r);let n=!1;if(typeof e=="object"&&!lt.isMatrix(e)&&!Fn(e)?(t=e,e=r,n=!0):e=new lt(e),r.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:a=!0}=t;a&&(r=r.center("column"),n||(e=e.center("column")));const i=r.transpose().mmul(e);for(let o=0;o<i.rows;o++)for(let A=0;A<i.columns;A++)i.set(o,A,i.get(o,A)*(1/(r.rows-1)));return i}function Ile(r,e=r,t={}){r=new lt(r);let n=!1;if(typeof e=="object"&&!lt.isMatrix(e)&&!Fn(e)?(t=e,e=r,n=!0):e=new lt(e),r.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:a=!0,scale:i=!0}=t;a&&(r.center("column"),n||e.center("column")),i&&(r.scale("column"),n||e.scale("column"));const o=r.standardDeviation("column",{unbiased:!0}),A=n?o:e.standardDeviation("column",{unbiased:!0}),s=r.transpose().mmul(e);for(let u=0;u<s.rows;u++)for(let f=0;f<s.columns;f++)s.set(u,f,s.get(u,f)*(1/(o[u]*A[f]))*(1/(r.rows-1)));return s}class iM{constructor(e,t={}){const{assumeSymmetric:n=!1}=t;if(e=Sa.checkMatrix(e),!e.isSquare())throw new Error("Matrix is not a square matrix");if(e.isEmpty())throw new Error("Matrix must be non-empty");let a=e.columns,i=new lt(a,a),o=new Float64Array(a),A=new Float64Array(a),s=e,u,f,l=!1;if(n?l=!0:l=e.isSymmetric(),l){for(u=0;u<a;u++)for(f=0;f<a;f++)i.set(u,f,s.get(u,f));Tle(a,A,o,i),Fle(a,A,o,i)}else{let c=new lt(a,a),h=new Float64Array(a);for(f=0;f<a;f++)for(u=0;u<a;u++)c.set(u,f,s.get(u,f));Lle(a,c,h,i),Dle(a,A,o,i,c)}this.n=a,this.e=A,this.d=o,this.V=i}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let e=this.n,t=this.e,n=this.d,a=new lt(e,e),i,o;for(i=0;i<e;i++){for(o=0;o<e;o++)a.set(i,o,0);a.set(i,i,n[i]),t[i]>0?a.set(i,i+1,t[i]):t[i]<0&&a.set(i,i-1,t[i])}return a}}function Tle(r,e,t,n){let a,i,o,A,s,u,f,l;for(s=0;s<r;s++)t[s]=n.get(r-1,s);for(A=r-1;A>0;A--){for(l=0,o=0,u=0;u<A;u++)l=l+Math.abs(t[u]);if(l===0)for(e[A]=t[A-1],s=0;s<A;s++)t[s]=n.get(A-1,s),n.set(A,s,0),n.set(s,A,0);else{for(u=0;u<A;u++)t[u]/=l,o+=t[u]*t[u];for(a=t[A-1],i=Math.sqrt(o),a>0&&(i=-i),e[A]=l*i,o=o-a*i,t[A-1]=a-i,s=0;s<A;s++)e[s]=0;for(s=0;s<A;s++){for(a=t[s],n.set(s,A,a),i=e[s]+n.get(s,s)*a,u=s+1;u<=A-1;u++)i+=n.get(u,s)*t[u],e[u]+=n.get(u,s)*a;e[s]=i}for(a=0,s=0;s<A;s++)e[s]/=o,a+=e[s]*t[s];for(f=a/(o+o),s=0;s<A;s++)e[s]-=f*t[s];for(s=0;s<A;s++){for(a=t[s],i=e[s],u=s;u<=A-1;u++)n.set(u,s,n.get(u,s)-(a*e[u]+i*t[u]));t[s]=n.get(A-1,s),n.set(A,s,0)}}t[A]=o}for(A=0;A<r-1;A++){if(n.set(r-1,A,n.get(A,A)),n.set(A,A,1),o=t[A+1],o!==0){for(u=0;u<=A;u++)t[u]=n.get(u,A+1)/o;for(s=0;s<=A;s++){for(i=0,u=0;u<=A;u++)i+=n.get(u,A+1)*n.get(u,s);for(u=0;u<=A;u++)n.set(u,s,n.get(u,s)-i*t[u])}}for(u=0;u<=A;u++)n.set(u,A+1,0)}for(s=0;s<r;s++)t[s]=n.get(r-1,s),n.set(r-1,s,0);n.set(r-1,r-1,1),e[0]=0}function Fle(r,e,t,n){let a,i,o,A,s,u,f,l,c,h,d,v,g,p,y,m;for(o=1;o<r;o++)e[o-1]=e[o];e[r-1]=0;let w=0,B=0,E=Number.EPSILON;for(u=0;u<r;u++){for(B=Math.max(B,Math.abs(t[u])+Math.abs(e[u])),f=u;f<r&&!(Math.abs(e[f])<=E*B);)f++;if(f>u)do{for(a=t[u],l=(t[u+1]-a)/(2*e[u]),c=_o(l,1),l<0&&(c=-c),t[u]=e[u]/(l+c),t[u+1]=e[u]*(l+c),h=t[u+1],i=a-t[u],o=u+2;o<r;o++)t[o]-=i;for(w=w+i,l=t[f],d=1,v=d,g=d,p=e[u+1],y=0,m=0,o=f-1;o>=u;o--)for(g=v,v=d,m=y,a=d*e[o],i=d*l,c=_o(l,e[o]),e[o+1]=y*c,y=e[o]/c,d=l/c,l=d*t[o]-y*a,t[o+1]=i+y*(d*a+y*t[o]),s=0;s<r;s++)i=n.get(s,o+1),n.set(s,o+1,y*n.get(s,o)+d*i),n.set(s,o,d*n.get(s,o)-y*i);l=-y*m*g*p*e[u]/h,e[u]=y*l,t[u]=d*l}while(Math.abs(e[u])>E*B);t[u]=t[u]+w,e[u]=0}for(o=0;o<r-1;o++){for(s=o,l=t[o],A=o+1;A<r;A++)t[A]<l&&(s=A,l=t[A]);if(s!==o)for(t[s]=t[o],t[o]=l,A=0;A<r;A++)l=n.get(A,o),n.set(A,o,n.get(A,s)),n.set(A,s,l)}}function Lle(r,e,t,n){let a=0,i=r-1,o,A,s,u,f,l,c;for(l=a+1;l<=i-1;l++){for(c=0,u=l;u<=i;u++)c=c+Math.abs(e.get(u,l-1));if(c!==0){for(s=0,u=i;u>=l;u--)t[u]=e.get(u,l-1)/c,s+=t[u]*t[u];for(A=Math.sqrt(s),t[l]>0&&(A=-A),s=s-t[l]*A,t[l]=t[l]-A,f=l;f<r;f++){for(o=0,u=i;u>=l;u--)o+=t[u]*e.get(u,f);for(o=o/s,u=l;u<=i;u++)e.set(u,f,e.get(u,f)-o*t[u])}for(u=0;u<=i;u++){for(o=0,f=i;f>=l;f--)o+=t[f]*e.get(u,f);for(o=o/s,f=l;f<=i;f++)e.set(u,f,e.get(u,f)-o*t[f])}t[l]=c*t[l],e.set(l,l-1,c*A)}}for(u=0;u<r;u++)for(f=0;f<r;f++)n.set(u,f,u===f?1:0);for(l=i-1;l>=a+1;l--)if(e.get(l,l-1)!==0){for(u=l+1;u<=i;u++)t[u]=e.get(u,l-1);for(f=l;f<=i;f++){for(A=0,u=l;u<=i;u++)A+=t[u]*n.get(u,f);for(A=A/t[l]/e.get(l,l-1),u=l;u<=i;u++)n.set(u,f,n.get(u,f)+A*t[u])}}}function Dle(r,e,t,n,a){let i=r-1,o=0,A=r-1,s=Number.EPSILON,u=0,f=0,l=0,c=0,h=0,d=0,v=0,g=0,p,y,m,w,B,E,b,C,_,x,M,S,I,D,O;for(p=0;p<r;p++)for((p<o||p>A)&&(t[p]=a.get(p,p),e[p]=0),y=Math.max(p-1,0);y<r;y++)f=f+Math.abs(a.get(p,y));for(;i>=o;){for(w=i;w>o&&(d=Math.abs(a.get(w-1,w-1))+Math.abs(a.get(w,w)),d===0&&(d=f),!(Math.abs(a.get(w,w-1))<s*d));)w--;if(w===i)a.set(i,i,a.get(i,i)+u),t[i]=a.get(i,i),e[i]=0,i--,g=0;else if(w===i-1){if(b=a.get(i,i-1)*a.get(i-1,i),l=(a.get(i-1,i-1)-a.get(i,i))/2,c=l*l+b,v=Math.sqrt(Math.abs(c)),a.set(i,i,a.get(i,i)+u),a.set(i-1,i-1,a.get(i-1,i-1)+u),C=a.get(i,i),c>=0){for(v=l>=0?l+v:l-v,t[i-1]=C+v,t[i]=t[i-1],v!==0&&(t[i]=C-b/v),e[i-1]=0,e[i]=0,C=a.get(i,i-1),d=Math.abs(C)+Math.abs(v),l=C/d,c=v/d,h=Math.sqrt(l*l+c*c),l=l/h,c=c/h,y=i-1;y<r;y++)v=a.get(i-1,y),a.set(i-1,y,c*v+l*a.get(i,y)),a.set(i,y,c*a.get(i,y)-l*v);for(p=0;p<=i;p++)v=a.get(p,i-1),a.set(p,i-1,c*v+l*a.get(p,i)),a.set(p,i,c*a.get(p,i)-l*v);for(p=o;p<=A;p++)v=n.get(p,i-1),n.set(p,i-1,c*v+l*n.get(p,i)),n.set(p,i,c*n.get(p,i)-l*v)}else t[i-1]=C+l,t[i]=C+l,e[i-1]=v,e[i]=-v;i=i-2,g=0}else{if(C=a.get(i,i),_=0,b=0,w<i&&(_=a.get(i-1,i-1),b=a.get(i,i-1)*a.get(i-1,i)),g===10){for(u+=C,p=o;p<=i;p++)a.set(p,p,a.get(p,p)-C);d=Math.abs(a.get(i,i-1))+Math.abs(a.get(i-1,i-2)),C=_=.75*d,b=-.4375*d*d}if(g===30&&(d=(_-C)/2,d=d*d+b,d>0)){for(d=Math.sqrt(d),_<C&&(d=-d),d=C-b/((_-C)/2+d),p=o;p<=i;p++)a.set(p,p,a.get(p,p)-d);u+=d,C=_=b=.964}for(g=g+1,B=i-2;B>=w&&(v=a.get(B,B),h=C-v,d=_-v,l=(h*d-b)/a.get(B+1,B)+a.get(B,B+1),c=a.get(B+1,B+1)-v-h-d,h=a.get(B+2,B+1),d=Math.abs(l)+Math.abs(c)+Math.abs(h),l=l/d,c=c/d,h=h/d,!(B===w||Math.abs(a.get(B,B-1))*(Math.abs(c)+Math.abs(h))<s*(Math.abs(l)*(Math.abs(a.get(B-1,B-1))+Math.abs(v)+Math.abs(a.get(B+1,B+1))))));)B--;for(p=B+2;p<=i;p++)a.set(p,p-2,0),p>B+2&&a.set(p,p-3,0);for(m=B;m<=i-1&&(D=m!==i-1,m!==B&&(l=a.get(m,m-1),c=a.get(m+1,m-1),h=D?a.get(m+2,m-1):0,C=Math.abs(l)+Math.abs(c)+Math.abs(h),C!==0&&(l=l/C,c=c/C,h=h/C)),C!==0);m++)if(d=Math.sqrt(l*l+c*c+h*h),l<0&&(d=-d),d!==0){for(m!==B?a.set(m,m-1,-d*C):w!==B&&a.set(m,m-1,-a.get(m,m-1)),l=l+d,C=l/d,_=c/d,v=h/d,c=c/l,h=h/l,y=m;y<r;y++)l=a.get(m,y)+c*a.get(m+1,y),D&&(l=l+h*a.get(m+2,y),a.set(m+2,y,a.get(m+2,y)-l*v)),a.set(m,y,a.get(m,y)-l*C),a.set(m+1,y,a.get(m+1,y)-l*_);for(p=0;p<=Math.min(i,m+3);p++)l=C*a.get(p,m)+_*a.get(p,m+1),D&&(l=l+v*a.get(p,m+2),a.set(p,m+2,a.get(p,m+2)-l*h)),a.set(p,m,a.get(p,m)-l),a.set(p,m+1,a.get(p,m+1)-l*c);for(p=o;p<=A;p++)l=C*n.get(p,m)+_*n.get(p,m+1),D&&(l=l+v*n.get(p,m+2),n.set(p,m+2,n.get(p,m+2)-l*h)),n.set(p,m,n.get(p,m)-l),n.set(p,m+1,n.get(p,m+1)-l*c)}}}if(f!==0){for(i=r-1;i>=0;i--)if(l=t[i],c=e[i],c===0)for(w=i,a.set(i,i,1),p=i-1;p>=0;p--){for(b=a.get(p,p)-l,h=0,y=w;y<=i;y++)h=h+a.get(p,y)*a.get(y,i);if(e[p]<0)v=b,d=h;else if(w=p,e[p]===0?a.set(p,i,b!==0?-h/b:-h/(s*f)):(C=a.get(p,p+1),_=a.get(p+1,p),c=(t[p]-l)*(t[p]-l)+e[p]*e[p],E=(C*d-v*h)/c,a.set(p,i,E),a.set(p+1,i,Math.abs(C)>Math.abs(v)?(-h-b*E)/C:(-d-_*E)/v)),E=Math.abs(a.get(p,i)),s*E*E>1)for(y=p;y<=i;y++)a.set(y,i,a.get(y,i)/E)}else if(c<0)for(w=i-1,Math.abs(a.get(i,i-1))>Math.abs(a.get(i-1,i))?(a.set(i-1,i-1,c/a.get(i,i-1)),a.set(i-1,i,-(a.get(i,i)-l)/a.get(i,i-1))):(O=cd(0,-a.get(i-1,i),a.get(i-1,i-1)-l,c),a.set(i-1,i-1,O[0]),a.set(i-1,i,O[1])),a.set(i,i-1,0),a.set(i,i,1),p=i-2;p>=0;p--){for(x=0,M=0,y=w;y<=i;y++)x=x+a.get(p,y)*a.get(y,i-1),M=M+a.get(p,y)*a.get(y,i);if(b=a.get(p,p)-l,e[p]<0)v=b,h=x,d=M;else if(w=p,e[p]===0?(O=cd(-x,-M,b,c),a.set(p,i-1,O[0]),a.set(p,i,O[1])):(C=a.get(p,p+1),_=a.get(p+1,p),S=(t[p]-l)*(t[p]-l)+e[p]*e[p]-c*c,I=(t[p]-l)*2*c,S===0&&I===0&&(S=s*f*(Math.abs(b)+Math.abs(c)+Math.abs(C)+Math.abs(_)+Math.abs(v))),O=cd(C*h-v*x+c*M,C*d-v*M-c*x,S,I),a.set(p,i-1,O[0]),a.set(p,i,O[1]),Math.abs(C)>Math.abs(v)+Math.abs(c)?(a.set(p+1,i-1,(-x-b*a.get(p,i-1)+c*a.get(p,i))/C),a.set(p+1,i,(-M-b*a.get(p,i)-c*a.get(p,i-1))/C)):(O=cd(-h-_*a.get(p,i-1),-d-_*a.get(p,i),v,c),a.set(p+1,i-1,O[0]),a.set(p+1,i,O[1]))),E=Math.max(Math.abs(a.get(p,i-1)),Math.abs(a.get(p,i))),s*E*E>1)for(y=p;y<=i;y++)a.set(y,i-1,a.get(y,i-1)/E),a.set(y,i,a.get(y,i)/E)}for(p=0;p<r;p++)if(p<o||p>A)for(y=p;y<r;y++)n.set(p,y,a.get(p,y));for(y=r-1;y>=o;y--)for(p=o;p<=A;p++){for(v=0,m=o;m<=Math.min(y,A);m++)v=v+n.get(p,m)*a.get(m,y);n.set(p,y,v)}}}function cd(r,e,t,n){let a,i;return Math.abs(t)>Math.abs(n)?(a=n/t,i=t+a*n,[(r+a*e)/i,(e-a*r)/i]):(a=t/n,i=n+a*t,[(a*r+e)/i,(a*e-r)/i])}class oM{constructor(e){if(e=Sa.checkMatrix(e),!e.isSymmetric())throw new Error("Matrix is not symmetric");let t=e,n=t.rows,a=new lt(n,n),i=!0,o,A,s;for(A=0;A<n;A++){let u=0;for(s=0;s<A;s++){let f=0;for(o=0;o<s;o++)f+=a.get(s,o)*a.get(A,o);f=(t.get(A,s)-f)/a.get(s,s),a.set(A,s,f),u=u+f*f}for(u=t.get(A,A)-u,i&=u>0,a.set(A,A,Math.sqrt(Math.max(u,0))),s=A+1;s<n;s++)a.set(A,s,0)}this.L=a,this.positiveDefinite=!!i}isPositiveDefinite(){return this.positiveDefinite}solve(e){e=Sa.checkMatrix(e);let t=this.L,n=t.rows;if(e.rows!==n)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let a=e.columns,i=e.clone(),o,A,s;for(s=0;s<n;s++)for(A=0;A<a;A++){for(o=0;o<s;o++)i.set(s,A,i.get(s,A)-i.get(o,A)*t.get(s,o));i.set(s,A,i.get(s,A)/t.get(s,s))}for(s=n-1;s>=0;s--)for(A=0;A<a;A++){for(o=s+1;o<n;o++)i.set(s,A,i.get(s,A)-i.get(o,A)*t.get(o,s));i.set(s,A,i.get(s,A)/t.get(s,s))}return i}get lowerTriangularMatrix(){return this.L}}class AM{constructor(e,t={}){e=Sa.checkMatrix(e);let{Y:n}=t;const{scaleScores:a=!1,maxIterations:i=1e3,terminationCriteria:o=1e-10}=t;let A;if(n){if(Fn(n)&&typeof n[0]=="number"?n=lt.columnVector(n):n=Sa.checkMatrix(n),n.rows!==e.rows)throw new Error("Y should have the same number of rows as X");A=n.getColumnVector(0)}else A=e.getColumnVector(0);let s=1,u,f,l,c;for(let h=0;h<i&&s>o;h++)l=e.transpose().mmul(A).div(A.transpose().mmul(A).get(0,0)),l=l.div(l.norm()),u=e.mmul(l).div(l.transpose().mmul(l).get(0,0)),h>0&&(s=u.clone().sub(c).pow(2).sum()),c=u.clone(),n?(f=n.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0)),f=f.div(f.norm()),A=n.mmul(f).div(f.transpose().mmul(f).get(0,0))):A=u;if(n){let h=e.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0));h=h.div(h.norm());let d=e.clone().sub(u.clone().mmul(h.transpose())),v=A.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0)),g=n.clone().sub(u.clone().mulS(v.get(0,0)).mmul(f.transpose()));this.t=u,this.p=h.transpose(),this.w=l.transpose(),this.q=f,this.u=A,this.s=u.transpose().mmul(u),this.xResidual=d,this.yResidual=g,this.betas=v}else this.w=l.transpose(),this.s=u.transpose().mmul(u).sqrt(),a?this.t=u.clone().div(this.s.get(0,0)):this.t=u,this.xResidual=e.sub(u.mmul(l.transpose()))}}const Ole=Object.freeze(Object.defineProperty({__proto__:null,AbstractMatrix:Zt,CHO:oM,CholeskyDecomposition:oM,EVD:iM,EigenvalueDecomposition:iM,LU:Ag,LuDecomposition:Ag,Matrix:lt,MatrixColumnSelectionView:vle,MatrixColumnView:dle,MatrixFlipColumnView:gle,MatrixFlipRowView:ple,MatrixRowSelectionView:mle,MatrixRowView:yle,MatrixSelectionView:vv,MatrixSubView:wle,MatrixTransposeView:Ble,NIPALS:AM,Nipals:AM,QR:$1,QrDecomposition:$1,SVD:sf,SingularValueDecomposition:sf,WrapperMatrix1D:rP,WrapperMatrix2D:Sa,correlation:Ile,covariance:Mle,default:lt,determinant:gv,inverse:ble,linearDependencies:_le,pseudoInverse:Sle,solve:nP,wrap:Ele},Symbol.toStringTag,{value:"Module"})),aP=Zi(Ole);Object.defineProperty(OE,"__esModule",{value:!0});var jf=aP,Ule=function(){function r(e){this.distances=e.distances,this.dimension=e.dimension||2,this.linkDistance=e.linkDistance}return r.prototype.layout=function(){var e=this,t=e.dimension,n=e.distances,a=e.linkDistance;try{var i=jf.Matrix.mul(jf.Matrix.pow(n,2),-.5),o=i.mean("row"),A=i.mean("column"),s=i.mean();i.add(s).subRowVector(o).subColumnVector(A);var u=new jf.SingularValueDecomposition(i),f=jf.Matrix.sqrt(u.diagonalMatrix).diagonal();return u.leftSingularVectors.toJSON().map(function(v){return jf.Matrix.mul([v],[f]).toJSON()[0].splice(0,t)})}catch{for(var l=[],c=0;c<n.length;c++){var h=Math.random()*a,d=Math.random()*a;l.push([h,d])}return l}},r}();OE.default=Ule;var kE={};Object.defineProperty(kE,"__esModule",{value:!0});var Nle=800,kle=function(){function r(e){this.disp=[],this.positions=e.positions,this.adjMatrix=e.adjMatrix,this.focusID=e.focusID,this.radii=e.radii,this.iterations=e.iterations||10,this.height=e.height||10,this.width=e.width||10,this.speed=e.speed||100,this.gravity=e.gravity||10,this.nodeSizeFunc=e.nodeSizeFunc,this.k=e.k||5,this.strictRadial=e.strictRadial,this.nodes=e.nodes}return r.prototype.layout=function(){var e=this,t=e.positions,n=[],a=e.iterations,i=e.width/10;e.maxDisplace=i,e.disp=n;for(var o=0;o<a;o++)t.forEach(function(A,s){n[s]={x:0,y:0}}),e.getRepulsion(),e.updatePositions();return t},r.prototype.getRepulsion=function(){var e=this,t=e.positions,n=e.nodes,a=e.disp,i=e.k,o=e.radii||[];t.forEach(function(A,s){a[s]={x:0,y:0},t.forEach(function(u,f){if(s!==f&&o[s]===o[f]){var l=A[0]-u[0],c=A[1]-u[1],h=Math.sqrt(l*l+c*c);if(h===0){h=1;var d=s>f?1:-1;l=.01*d,c=.01*d}if(h<e.nodeSizeFunc(n[s])/2+e.nodeSizeFunc(n[f])/2){var v=i*i/h;a[s].x+=l/h*v,a[s].y+=c/h*v}}})})},r.prototype.updatePositions=function(){var e=this,t=e.positions,n=e.disp,a=e.speed,i=e.strictRadial,o=e.focusID,A=e.maxDisplace||e.width/10;i&&n.forEach(function(u,f){var l=t[f][0]-t[o][0],c=t[f][1]-t[o][1],h=Math.sqrt(l*l+c*c),d=c/h,v=-l/h,g=Math.sqrt(u.x*u.x+u.y*u.y),p=Math.acos((d*u.x+v*u.y)/g);p>Math.PI/2&&(p-=Math.PI/2,d*=-1,v*=-1);var y=Math.cos(p)*g;u.x=d*y,u.y=v*y});var s=e.radii;t.forEach(function(u,f){if(f!==o){var l=Math.sqrt(n[f].x*n[f].x+n[f].y*n[f].y);if(l>0&&f!==o){var c=Math.min(A*(a/Nle),l);if(u[0]+=n[f].x/l*c,u[1]+=n[f].y/l*c,i){var h=u[0]-t[o][0],d=u[1]-t[o][1],v=Math.sqrt(h*h+d*d);h=h/v*s[f],d=d/v*s[f],u[0]=t[o][0]+h,u[1]=t[o][1]+d}}}})},r}();kE.default=kle;var Ple=we&&we.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),iP=we&&we.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xp,"__esModule",{value:!0});xp.RadialLayout=void 0;var Da=zr(),Qle=qr,Rle=iP(OE),Hle=iP(kE);function Gle(r){for(var e=r.length,t=r[0].length,n=[],a=0;a<e;a++){for(var i=[],o=0;o<t;o++)r[a][o]!==0?i.push(1/(r[a][o]*r[a][o])):i.push(0);n.push(i)}return n}function zle(r,e){var t=-1;return r.forEach(function(n,a){n.id===e&&(t=a)}),t}function sM(r,e){return Math.sqrt((r[0]-e[0])*(r[0]-e[0])+(r[1]-e[1])*(r[1]-e[1]))}var Kle=function(r){Ple(e,r);function e(t){var n=r.call(this)||this;return n.maxIteration=1e3,n.focusNode=null,n.unitRadius=null,n.linkDistance=50,n.preventOverlap=!1,n.strictRadial=!0,n.maxPreventOverlapIteration=200,n.sortStrength=10,n.nodes=[],n.edges=[],n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},e.prototype.execute=function(){var t=this,n=t.nodes,a=t.edges||[];if(!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}!t.width&&typeof window<"u"&&(t.width=window.innerWidth),!t.height&&typeof window<"u"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var i=t.center;if(n.length===1){n[0].x=i[0],n[0].y=i[1],t.onLayoutEnd&&t.onLayoutEnd();return}var o=t.linkDistance,A=null;if((0,Da.isString)(t.focusNode)){for(var s=!1,u=0;u<n.length;u++)n[u].id===t.focusNode&&(A=n[u],t.focusNode=A,s=!0,u=n.length);s||(A=null)}else A=t.focusNode;A||(A=n[0],t.focusNode=A);var f=zle(n,A.id);f<0&&(f=0),t.focusIndex=f;var l=(0,Da.getAdjMatrix)({nodes:n,edges:a},!1),c=(0,Da.floydWarshall)(l),h=t.maxToFocus(c,f);t.handleInfinity(c,f,h+1),t.distances=c;var d=c[f],v=t.width||500,g=t.height||500,p=v-i[0]>i[0]?i[0]:v-i[0],y=g-i[1]>i[1]?i[1]:g-i[1];p===0&&(p=v/2),y===0&&(y=g/2);var m=y>p?p:y,w=Math.max.apply(Math,d),B=[];d.forEach(function(Q,N){t.unitRadius||(t.unitRadius=m/w),B[N]=Q*t.unitRadius}),t.radii=B;var E=t.eIdealDisMatrix();t.eIdealDistances=E;var b=Gle(E);t.weights=b;var C=new Rle.default({linkDistance:o,distances:E}),_=C.layout();_.forEach(function(Q){(0,Da.isNaN)(Q[0])&&(Q[0]=Math.random()*o),(0,Da.isNaN)(Q[1])&&(Q[1]=Math.random()*o)}),t.positions=_,_.forEach(function(Q,N){n[N].x=Q[0]+i[0],n[N].y=Q[1]+i[1]}),_.forEach(function(Q){Q[0]-=_[f][0],Q[1]-=_[f][1]}),t.run();var x=t.preventOverlap,M=t.nodeSize,S,I=t.strictRadial;if(x){var D=t.nodeSpacing,O;(0,Da.isNumber)(D)?O=function(){return D}:(0,Da.isFunction)(D)?O=D:O=function(){return 0},M?(0,Da.isArray)(M)?S=function(Q){var N=M[0]>M[1]?M[0]:M[1];return N+O(Q)}:S=function(Q){return M+O(Q)}:S=function(Q){if(Q.size){if((0,Da.isArray)(Q.size)){var N=Q.size[0]>Q.size[1]?Q.size[0]:Q.size[1];return N+O(Q)}if((0,Da.isObject)(Q.size)){var N=Q.size.width>Q.size.height?Q.size.width:Q.size.height;return N+O(Q)}return Q.size+O(Q)}return 10+O(Q)};var F={nodes:n,nodeSizeFunc:S,adjMatrix:l,positions:_,radii:B,height:g,width:v,strictRadial:I,focusID:f,iterations:t.maxPreventOverlapIteration||200,k:_.length/4.5},U=new Hle.default(F);_=U.layout()}return _.forEach(function(Q,N){n[N].x=Q[0]+i[0],n[N].y=Q[1]+i[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:a}},e.prototype.run=function(){for(var t=this,n=t.maxIteration,a=t.positions||[],i=t.weights||[],o=t.eIdealDistances||[],A=t.radii||[],s=0;s<=n;s++){var u=s/n;t.oneIteration(u,a,A,o,i)}},e.prototype.oneIteration=function(t,n,a,i,o){var A=this,s=1-t,u=A.focusIndex;n.forEach(function(f,l){var c=sM(f,[0,0]),h=c===0?0:1/c;if(l!==u){var d=0,v=0,g=0;n.forEach(function(y,m){if(l!==m){var w=sM(f,y),B=w===0?0:1/w,E=i[m][l];g+=o[l][m],d+=o[l][m]*(y[0]+E*(f[0]-y[0])*B),v+=o[l][m]*(y[1]+E*(f[1]-y[1])*B)}});var p=a[l]===0?0:1/a[l];g*=s,g+=t*p*p,d*=s,d+=t*p*f[0]*h,f[0]=d/g,v*=s,v+=t*p*f[1]*h,f[1]=v/g}})},e.prototype.eIdealDisMatrix=function(){var t=this,n=t.nodes;if(!n)return[];var a=t.distances,i=t.linkDistance,o=t.radii||[],A=t.unitRadius||50,s=[];return a&&a.forEach(function(u,f){var l=[];u.forEach(function(c,h){if(f===h)l.push(0);else if(o[f]===o[h])if(t.sortBy==="data")l.push(c*(Math.abs(f-h)*t.sortStrength)/(o[f]/A));else if(t.sortBy){var d=n[f][t.sortBy]||0,v=n[h][t.sortBy]||0;(0,Da.isString)(d)&&(d=d.charCodeAt(0)),(0,Da.isString)(v)&&(v=v.charCodeAt(0)),l.push(c*(Math.abs(d-v)*t.sortStrength)/(o[f]/A))}else l.push(c*i/(o[f]/A));else{var g=(i+A)/2;l.push(c*g)}}),s.push(l)}),s},e.prototype.handleInfinity=function(t,n,a){for(var i=t.length,o=0;o<i;o++)if(t[n][o]===1/0){t[n][o]=a,t[o][n]=a;for(var A=0;A<i;A++)t[o][A]!==1/0&&t[n][A]===1/0&&(t[n][A]=a+t[o][A],t[A][n]=a+t[o][A])}for(var o=0;o<i;o++)if(o!==n){for(var A=0;A<i;A++)if(t[o][A]===1/0){var s=Math.abs(t[n][o]-t[n][A]);s=s===0?1:s,t[o][A]=s}}},e.prototype.maxToFocus=function(t,n){for(var a=0,i=0;i<t[n].length;i++)t[n][i]!==1/0&&(a=t[n][i]>a?t[n][i]:a);return a},e.prototype.getType=function(){return"radial"},e}(Qle.Base);xp.RadialLayout=Kle;(function(r){var e=we&&we.__createBinding||(Object.create?function(n,a,i,o){o===void 0&&(o=i);var A=Object.getOwnPropertyDescriptor(a,i);(!A||("get"in A?!a.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return a[i]}}),Object.defineProperty(n,o,A)}:function(n,a,i,o){o===void 0&&(o=i),n[o]=a[i]}),t=we&&we.__exportStar||function(n,a){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(a,i)&&e(a,n,i)};Object.defineProperty(r,"__esModule",{value:!0}),t(xp,r)})(DE);var Gc={},jle=we&&we.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Gc,"__esModule",{value:!0});Gc.ConcentricLayout=void 0;var Si=zr(),$le=qr,Wle=function(r){jle(e,r);function e(t){var n=r.call(this)||this;return n.nodeSize=30,n.minNodeSpacing=10,n.nodeSpacing=10,n.preventOverlap=!1,n.equidistant=!1,n.startAngle=3/2*Math.PI,n.clockwise=!0,n.sortBy="degree",n.nodes=[],n.edges=[],n.width=300,n.height=300,n.onLayoutEnd=function(){},n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},e.prototype.execute=function(){var t,n,a=this,i=a.nodes,o=a.edges,A=i.length;if(A===0){(t=a.onLayoutEnd)===null||t===void 0||t.call(a);return}!a.width&&typeof window<"u"&&(a.width=window.innerWidth),!a.height&&typeof window<"u"&&(a.height=window.innerHeight),a.center||(a.center=[a.width/2,a.height/2]);var s=a.center;if(A===1){i[0].x=s[0],i[0].y=s[1],(n=a.onLayoutEnd)===null||n===void 0||n.call(a);return}var u=a.nodeSize,f=a.nodeSpacing,l=[],c,h=0;(0,Si.isArray)(u)?c=Math.max(u[0],u[1]):c=u,(0,Si.isArray)(f)?h=Math.max(f[0],f[1]):(0,Si.isNumber)(f)&&(h=f),i.forEach(function(I){l.push(I);var D=c;(0,Si.isArray)(I.size)?D=Math.max(I.size[0],I.size[1]):(0,Si.isNumber)(I.size)?D=I.size:(0,Si.isObject)(I.size)&&(D=Math.max(I.size.width,I.size.height)),c=Math.max(c,D),(0,Si.isFunction)(f)&&(h=Math.max(f(I),h))}),a.clockwise=a.counterclockwise!==void 0?!a.counterclockwise:a.clockwise;var d={},v={};if(l.forEach(function(I,D){d[I.id]=I,v[I.id]=D}),(a.sortBy==="degree"||!(0,Si.isString)(a.sortBy)||l[0][a.sortBy]===void 0)&&(a.sortBy="degree",!(0,Si.isNumber)(i[0].degree))){var g=(0,Si.getDegree)(i.length,v,o);l.forEach(function(I,D){I.degree=g[D].all})}l.sort(function(I,D){return D[a.sortBy]-I[a.sortBy]}),a.maxValueNode=l[0],a.maxLevelDiff=a.maxLevelDiff||a.maxValueNode[a.sortBy]/4;var p=[[]],y=p[0];l.forEach(function(I){if(y.length>0){var D=Math.abs(y[0][a.sortBy]-I[a.sortBy]);a.maxLevelDiff&&D>=a.maxLevelDiff&&(y=[],p.push(y))}y.push(I)});var m=c+(h||a.minNodeSpacing);if(!a.preventOverlap){var w=p.length>0&&p[0].length>1,B=Math.min(a.width,a.height)/2-m,E=B/(p.length+(w?1:0));m=Math.min(m,E)}var b=0;if(p.forEach(function(I){var D=a.sweep;D===void 0&&(D=2*Math.PI-2*Math.PI/I.length);var O=I.dTheta=D/Math.max(1,I.length-1);if(I.length>1&&a.preventOverlap){var F=Math.cos(O)-Math.cos(0),U=Math.sin(O)-Math.sin(0),Q=Math.sqrt(m*m/(F*F+U*U));b=Math.max(Q,b)}I.r=b,b+=m}),a.equidistant){for(var C=0,_=0,x=0;x<p.length;x++){var M=p[x],S=M.r-_;C=Math.max(C,S)}_=0,p.forEach(function(I,D){D===0&&(_=I.r),I.r=_,_+=C})}return p.forEach(function(I){var D=I.dTheta,O=I.r;I.forEach(function(F,U){var Q=a.startAngle+(a.clockwise?1:-1)*D*U;F.x=s[0]+O*Math.cos(Q),F.y=s[1]+O*Math.sin(Q)})}),a.onLayoutEnd&&a.onLayoutEnd(),{nodes:i,edges:o}},e.prototype.getType=function(){return"concentric"},e}($le.Base);Gc.ConcentricLayout=Wle;var zc={},Vle=we&&we.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(zc,"__esModule",{value:!0});zc.MDSLayout=void 0;var $f=aP,$y=zr(),Xle=qr,Yle=function(r){Vle(e,r);function e(t){var n=r.call(this)||this;return n.center=[0,0],n.linkDistance=50,n.nodes=[],n.edges=[],n.onLayoutEnd=function(){},n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},e.prototype.execute=function(){var t=this,n=t.nodes,a=t.edges,i=a===void 0?[]:a,o=t.center;if(!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}if(n.length===1){n[0].x=o[0],n[0].y=o[1],t.onLayoutEnd&&t.onLayoutEnd();return}var A=t.linkDistance,s=(0,$y.getAdjMatrix)({nodes:n,edges:i},!1),u=(0,$y.floydWarshall)(s);t.handleInfinity(u);var f=(0,$y.scaleMatrix)(u,A);t.scaledDistances=f;var l=t.runMDS();return t.positions=l,l.forEach(function(c,h){n[h].x=c[0]+o[0],n[h].y=c[1]+o[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:i}},e.prototype.runMDS=function(){var t=this,n=2,a=t.scaledDistances,i=$f.Matrix.mul($f.Matrix.pow(a,2),-.5),o=i.mean("row"),A=i.mean("column"),s=i.mean();i.add(s).subRowVector(o).subColumnVector(A);var u=new $f.SingularValueDecomposition(i),f=$f.Matrix.sqrt(u.diagonalMatrix).diagonal();return u.leftSingularVectors.toJSON().map(function(l){return $f.Matrix.mul([l],[f]).toJSON()[0].splice(0,n)})},e.prototype.handleInfinity=function(t){var n=-999999;t.forEach(function(a){a.forEach(function(i){i!==1/0&&n<i&&(n=i)})}),t.forEach(function(a,i){a.forEach(function(o,A){o===1/0&&(t[i][A]=n)})})},e.prototype.getType=function(){return"mds"},e}(Xle.Base);zc.MDSLayout=Yle;var Kc={},Zle=we&&we.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Kc,"__esModule",{value:!0});Kc.FruchtermanLayout=void 0;var qle=qr,Yr=zr(),Jle=800,ece=function(r){Zle(e,r);function e(t){var n=r.call(this)||this;return n.maxIteration=1e3,n.workerEnabled=!1,n.gravity=10,n.speed=5,n.clustering=!1,n.clusterGravity=10,n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.onLayoutEnd=function(){},n.tick=function(){},n.animate=!0,n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},e.prototype.execute=function(){var t=this,n,a,i=this,o=i.nodes;if(i.timeInterval!==void 0&&typeof window<"u"&&window.clearInterval(i.timeInterval),!o||o.length===0){(n=i.onLayoutEnd)===null||n===void 0||n.call(i);return}!i.width&&typeof window<"u"&&(i.width=window.innerWidth),!i.height&&typeof window<"u"&&(i.height=window.innerHeight),i.center||(i.center=[i.width/2,i.height/2]);var A=i.center;if(o.length===1){o[0].x=A[0],o[0].y=A[1],(a=i.onLayoutEnd)===null||a===void 0||a.call(i);return}var s={},u={};return o.forEach(function(f,l){(0,Yr.isNumber)(f.x)||(f.x=Math.random()*t.width),(0,Yr.isNumber)(f.y)||(f.y=Math.random()*t.height),s[f.id]=f,u[f.id]=l}),i.nodeMap=s,i.nodeIdxMap=u,i.run()},e.prototype.run=function(){var t,n=this,a=n.nodes;if(a){var i=n.edges,o=n.maxIteration,A=n.workerEnabled,s=n.clustering,u=n.animate,f={};if(s&&a.forEach(function(h){f[h.cluster]===void 0&&(f[h.cluster]={name:h.cluster,cx:0,cy:0,count:0})}),A||!u){for(var l=0;l<o;l++)n.runOneStep(f);(t=n.onLayoutEnd)===null||t===void 0||t.call(n)}else{if(typeof window>"u")return;var c=0;this.timeInterval=window.setInterval(function(){var h;n.runOneStep(f),c++,c>=o&&((h=n.onLayoutEnd)===null||h===void 0||h.call(n),window.clearInterval(n.timeInterval))},0)}return{nodes:a,edges:i}}},e.prototype.runOneStep=function(t){var n,a=this,i=a.nodes;if(i){var o=a.edges,A=a.center,s=a.gravity,u=a.speed,f=a.clustering,l=a.height*a.width,c=Math.sqrt(l)/10,h=l/(i.length+1),d=Math.sqrt(h),v=[];if(i.forEach(function(y,m){v[m]={x:0,y:0}}),a.applyCalculate(i,o,v,d,h),f){for(var g in t)t[g].cx=0,t[g].cy=0,t[g].count=0;i.forEach(function(y){var m=t[y.cluster];(0,Yr.isNumber)(y.x)&&(m.cx+=y.x),(0,Yr.isNumber)(y.y)&&(m.cy+=y.y),m.count++});for(var g in t)t[g].cx/=t[g].count,t[g].cy/=t[g].count;var p=a.clusterGravity||s;i.forEach(function(y,m){if(!(!(0,Yr.isNumber)(y.x)||!(0,Yr.isNumber)(y.y))){var w=t[y.cluster],B=Math.sqrt((y.x-w.cx)*(y.x-w.cx)+(y.y-w.cy)*(y.y-w.cy)),E=d*p;v[m].x-=E*(y.x-w.cx)/B,v[m].y-=E*(y.y-w.cy)/B}})}i.forEach(function(y,m){if(!(!(0,Yr.isNumber)(y.x)||!(0,Yr.isNumber)(y.y))){var w=.01*d*s;v[m].x-=w*(y.x-A[0]),v[m].y-=w*(y.y-A[1])}}),i.forEach(function(y,m){if((0,Yr.isNumber)(y.fx)&&(0,Yr.isNumber)(y.fy)){y.x=y.fx,y.y=y.fy;return}if(!(!(0,Yr.isNumber)(y.x)||!(0,Yr.isNumber)(y.y))){var w=Math.sqrt(v[m].x*v[m].x+v[m].y*v[m].y);if(w>0){var B=Math.min(c*(u/Jle),w);y.x+=v[m].x/w*B,y.y+=v[m].y/w*B}}}),(n=a.tick)===null||n===void 0||n.call(a)}},e.prototype.applyCalculate=function(t,n,a,i,o){var A=this;A.calRepulsive(t,a,o),n&&A.calAttractive(n,a,i)},e.prototype.calRepulsive=function(t,n,a){t.forEach(function(i,o){n[o]={x:0,y:0},t.forEach(function(A,s){if(o!==s&&!(!(0,Yr.isNumber)(i.x)||!(0,Yr.isNumber)(A.x)||!(0,Yr.isNumber)(i.y)||!(0,Yr.isNumber)(A.y))){var u=i.x-A.x,f=i.y-A.y,l=u*u+f*f;if(l===0){l=1;var c=o>s?1:-1;u=.01*c,f=.01*c}var h=a/l;n[o].x+=u*h,n[o].y+=f*h}})})},e.prototype.calAttractive=function(t,n,a){var i=this;t.forEach(function(o){var A=(0,Yr.getEdgeTerminal)(o,"source"),s=(0,Yr.getEdgeTerminal)(o,"target");if(!(!A||!s)){var u=i.nodeIdxMap[A],f=i.nodeIdxMap[s];if(u!==f){var l=i.nodeMap[A],c=i.nodeMap[s];if(!(!(0,Yr.isNumber)(c.x)||!(0,Yr.isNumber)(l.x)||!(0,Yr.isNumber)(c.y)||!(0,Yr.isNumber)(l.y))){var h=c.x-l.x,d=c.y-l.y,v=Math.sqrt(h*h+d*d),g=v*v/a;n[f].x-=h/v*g,n[f].y-=d/v*g,n[u].x+=h/v*g,n[u].y+=d/v*g}}}})},e.prototype.stop=function(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval)},e.prototype.destroy=function(){var t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0},e.prototype.getType=function(){return"fruchterman"},e}(qle.Base);Kc.FruchtermanLayout=ece;var jc={};function uM(r,e,t,n,a,i,o){try{var A=r[i](o),s=A.value}catch(u){t(u);return}A.done?e(s):Promise.resolve(s).then(n,a)}function hA(r){return function(){var e=this,t=arguments;return new Promise(function(n,a){var i=r.apply(e,t);function o(s){uM(i,n,a,o,A,"next",s)}function A(s){uM(i,n,a,o,A,"throw",s)}o(void 0)})}}function uf(r){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uf(r)}function tce(r,e){if(uf(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(uf(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function oP(r){var e=tce(r,"string");return uf(e)==="symbol"?e:String(e)}function Je(r,e,t){return e=oP(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function yi(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function fM(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,oP(n.key),n)}}function mi(r,e,t){return e&&fM(r.prototype,e),t&&fM(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}var rce=typeof we=="object"&&we&&we.Object===Object&&we,AP=rce,nce=AP,ace=typeof self=="object"&&self&&self.Object===Object&&self,ice=nce||ace||Function("return this")(),oce=ice,Ace=oce,sce=Ace.Symbol,sP=sce,lM=sP,uP=Object.prototype,uce=uP.hasOwnProperty,fce=uP.toString,Wf=lM?lM.toStringTag:void 0;function lce(r){var e=uce.call(r,Wf),t=r[Wf];try{r[Wf]=void 0;var n=!0}catch{}var a=fce.call(r);return n&&(e?r[Wf]=t:delete r[Wf]),a}var cce=lce,hce=Object.prototype,dce=hce.toString;function vce(r){return dce.call(r)}var gce=vce,cM=sP,pce=cce,yce=gce,mce="[object Null]",wce="[object Undefined]",hM=cM?cM.toStringTag:void 0;function Bce(r){return r==null?r===void 0?wce:mce:hM&&hM in Object(r)?pce(r):yce(r)}var PE=Bce,Ece=9007199254740991;function bce(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Ece}var xce=bce;function Cce(r){return r!=null&&typeof r=="object"}var QE=Cce,_ce=PE,Sce=xce,Mce=QE,Ice="[object Arguments]",Tce="[object Array]",Fce="[object Boolean]",Lce="[object Date]",Dce="[object Error]",Oce="[object Function]",Uce="[object Map]",Nce="[object Number]",kce="[object Object]",Pce="[object RegExp]",Qce="[object Set]",Rce="[object String]",Hce="[object WeakMap]",Gce="[object ArrayBuffer]",zce="[object DataView]",Kce="[object Float32Array]",jce="[object Float64Array]",$ce="[object Int8Array]",Wce="[object Int16Array]",Vce="[object Int32Array]",Xce="[object Uint8Array]",Yce="[object Uint8ClampedArray]",Zce="[object Uint16Array]",qce="[object Uint32Array]",Fr={};Fr[Kce]=Fr[jce]=Fr[$ce]=Fr[Wce]=Fr[Vce]=Fr[Xce]=Fr[Yce]=Fr[Zce]=Fr[qce]=!0;Fr[Ice]=Fr[Tce]=Fr[Gce]=Fr[Fce]=Fr[zce]=Fr[Lce]=Fr[Dce]=Fr[Oce]=Fr[Uce]=Fr[Nce]=Fr[kce]=Fr[Pce]=Fr[Qce]=Fr[Rce]=Fr[Hce]=!1;function Jce(r){return Mce(r)&&Sce(r.length)&&!!Fr[_ce(r)]}var ehe=Jce;function the(r){return function(e){return r(e)}}var rhe=the,sg={exports:{}};sg.exports;(function(r,e){var t=AP,n=e&&!e.nodeType&&e,a=n&&!0&&r&&!r.nodeType&&r,i=a&&a.exports===n,o=i&&t.process,A=function(){try{var s=a&&a.require&&a.require("util").types;return s||o&&o.binding&&o.binding("util")}catch{}}();r.exports=A})(sg,sg.exports);var nhe=sg.exports,ahe=ehe,ihe=rhe,dM=nhe,vM=dM&&dM.isTypedArray,ohe=vM?ihe(vM):ahe,Ahe=ohe;const ug=qi(Ahe);var she=PE,uhe=QE,fhe="[object Number]";function lhe(r){return typeof r=="number"||uhe(r)&&she(r)==fhe}var che=lhe;const hhe=qi(che);var dhe=Array.isArray,vhe=dhe;const ghe=qi(vhe);var fP={exports:{}},lP={exports:{}};(function(r){function e(t){"@babel/helpers - typeof";return r.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},r.exports.__esModule=!0,r.exports.default=r.exports,e(t)}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports})(lP);var phe=lP.exports;(function(r){var e=phe.default;function t(){r.exports=t=function(){return n},r.exports.__esModule=!0,r.exports.default=r.exports;var n={},a=Object.prototype,i=a.hasOwnProperty,o=Object.defineProperty||function(O,F,U){O[F]=U.value},A=typeof Symbol=="function"?Symbol:{},s=A.iterator||"@@iterator",u=A.asyncIterator||"@@asyncIterator",f=A.toStringTag||"@@toStringTag";function l(O,F,U){return Object.defineProperty(O,F,{value:U,enumerable:!0,configurable:!0,writable:!0}),O[F]}try{l({},"")}catch{l=function(U,Q,N){return U[Q]=N}}function c(O,F,U,Q){var N=F&&F.prototype instanceof v?F:v,R=Object.create(N.prototype),J=new S(Q||[]);return o(R,"_invoke",{value:C(O,U,J)}),R}function h(O,F,U){try{return{type:"normal",arg:O.call(F,U)}}catch(Q){return{type:"throw",arg:Q}}}n.wrap=c;var d={};function v(){}function g(){}function p(){}var y={};l(y,s,function(){return this});var m=Object.getPrototypeOf,w=m&&m(m(I([])));w&&w!==a&&i.call(w,s)&&(y=w);var B=p.prototype=v.prototype=Object.create(y);function E(O){["next","throw","return"].forEach(function(F){l(O,F,function(U){return this._invoke(F,U)})})}function b(O,F){function U(N,R,J,re){var ee=h(O[N],O,R);if(ee.type!=="throw"){var q=ee.arg,ve=q.value;return ve&&e(ve)=="object"&&i.call(ve,"__await")?F.resolve(ve.__await).then(function(Me){U("next",Me,J,re)},function(Me){U("throw",Me,J,re)}):F.resolve(ve).then(function(Me){q.value=Me,J(q)},function(Me){return U("throw",Me,J,re)})}re(ee.arg)}var Q;o(this,"_invoke",{value:function(R,J){function re(){return new F(function(ee,q){U(R,J,ee,q)})}return Q=Q?Q.then(re,re):re()}})}function C(O,F,U){var Q="suspendedStart";return function(N,R){if(Q==="executing")throw new Error("Generator is already running");if(Q==="completed"){if(N==="throw")throw R;return D()}for(U.method=N,U.arg=R;;){var J=U.delegate;if(J){var re=_(J,U);if(re){if(re===d)continue;return re}}if(U.method==="next")U.sent=U._sent=U.arg;else if(U.method==="throw"){if(Q==="suspendedStart")throw Q="completed",U.arg;U.dispatchException(U.arg)}else U.method==="return"&&U.abrupt("return",U.arg);Q="executing";var ee=h(O,F,U);if(ee.type==="normal"){if(Q=U.done?"completed":"suspendedYield",ee.arg===d)continue;return{value:ee.arg,done:U.done}}ee.type==="throw"&&(Q="completed",U.method="throw",U.arg=ee.arg)}}}function _(O,F){var U=F.method,Q=O.iterator[U];if(Q===void 0)return F.delegate=null,U==="throw"&&O.iterator.return&&(F.method="return",F.arg=void 0,_(O,F),F.method==="throw")||U!=="return"&&(F.method="throw",F.arg=new TypeError("The iterator does not provide a '"+U+"' method")),d;var N=h(Q,O.iterator,F.arg);if(N.type==="throw")return F.method="throw",F.arg=N.arg,F.delegate=null,d;var R=N.arg;return R?R.done?(F[O.resultName]=R.value,F.next=O.nextLoc,F.method!=="return"&&(F.method="next",F.arg=void 0),F.delegate=null,d):R:(F.method="throw",F.arg=new TypeError("iterator result is not an object"),F.delegate=null,d)}function x(O){var F={tryLoc:O[0]};1 in O&&(F.catchLoc=O[1]),2 in O&&(F.finallyLoc=O[2],F.afterLoc=O[3]),this.tryEntries.push(F)}function M(O){var F=O.completion||{};F.type="normal",delete F.arg,O.completion=F}function S(O){this.tryEntries=[{tryLoc:"root"}],O.forEach(x,this),this.reset(!0)}function I(O){if(O){var F=O[s];if(F)return F.call(O);if(typeof O.next=="function")return O;if(!isNaN(O.length)){var U=-1,Q=function N(){for(;++U<O.length;)if(i.call(O,U))return N.value=O[U],N.done=!1,N;return N.value=void 0,N.done=!0,N};return Q.next=Q}}return{next:D}}function D(){return{value:void 0,done:!0}}return g.prototype=p,o(B,"constructor",{value:p,configurable:!0}),o(p,"constructor",{value:g,configurable:!0}),g.displayName=l(p,f,"GeneratorFunction"),n.isGeneratorFunction=function(O){var F=typeof O=="function"&&O.constructor;return!!F&&(F===g||(F.displayName||F.name)==="GeneratorFunction")},n.mark=function(O){return Object.setPrototypeOf?Object.setPrototypeOf(O,p):(O.__proto__=p,l(O,f,"GeneratorFunction")),O.prototype=Object.create(B),O},n.awrap=function(O){return{__await:O}},E(b.prototype),l(b.prototype,u,function(){return this}),n.AsyncIterator=b,n.async=function(O,F,U,Q,N){N===void 0&&(N=Promise);var R=new b(c(O,F,U,Q),N);return n.isGeneratorFunction(F)?R:R.next().then(function(J){return J.done?J.value:R.next()})},E(B),l(B,f,"Generator"),l(B,s,function(){return this}),l(B,"toString",function(){return"[object Generator]"}),n.keys=function(O){var F=Object(O),U=[];for(var Q in F)U.push(Q);return U.reverse(),function N(){for(;U.length;){var R=U.pop();if(R in F)return N.value=R,N.done=!1,N}return N.done=!0,N}},n.values=I,S.prototype={constructor:S,reset:function(F){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!F)for(var U in this)U.charAt(0)==="t"&&i.call(this,U)&&!isNaN(+U.slice(1))&&(this[U]=void 0)},stop:function(){this.done=!0;var F=this.tryEntries[0].completion;if(F.type==="throw")throw F.arg;return this.rval},dispatchException:function(F){if(this.done)throw F;var U=this;function Q(q,ve){return J.type="throw",J.arg=F,U.next=q,ve&&(U.method="next",U.arg=void 0),!!ve}for(var N=this.tryEntries.length-1;N>=0;--N){var R=this.tryEntries[N],J=R.completion;if(R.tryLoc==="root")return Q("end");if(R.tryLoc<=this.prev){var re=i.call(R,"catchLoc"),ee=i.call(R,"finallyLoc");if(re&&ee){if(this.prev<R.catchLoc)return Q(R.catchLoc,!0);if(this.prev<R.finallyLoc)return Q(R.finallyLoc)}else if(re){if(this.prev<R.catchLoc)return Q(R.catchLoc,!0)}else{if(!ee)throw new Error("try statement without catch or finally");if(this.prev<R.finallyLoc)return Q(R.finallyLoc)}}}},abrupt:function(F,U){for(var Q=this.tryEntries.length-1;Q>=0;--Q){var N=this.tryEntries[Q];if(N.tryLoc<=this.prev&&i.call(N,"finallyLoc")&&this.prev<N.finallyLoc){var R=N;break}}R&&(F==="break"||F==="continue")&&R.tryLoc<=U&&U<=R.finallyLoc&&(R=null);var J=R?R.completion:{};return J.type=F,J.arg=U,R?(this.method="next",this.next=R.finallyLoc,d):this.complete(J)},complete:function(F,U){if(F.type==="throw")throw F.arg;return F.type==="break"||F.type==="continue"?this.next=F.arg:F.type==="return"?(this.rval=this.arg=F.arg,this.method="return",this.next="end"):F.type==="normal"&&U&&(this.next=U),d},finish:function(F){for(var U=this.tryEntries.length-1;U>=0;--U){var Q=this.tryEntries[U];if(Q.finallyLoc===F)return this.complete(Q.completion,Q.afterLoc),M(Q),d}},catch:function(F){for(var U=this.tryEntries.length-1;U>=0;--U){var Q=this.tryEntries[U];if(Q.tryLoc===F){var N=Q.completion;if(N.type==="throw"){var R=N.arg;M(Q)}return R}}throw new Error("illegal catch attempt")},delegateYield:function(F,U,Q){return this.delegate={iterator:I(F),resultName:U,nextLoc:Q},this.method==="next"&&(this.arg=void 0),d}},n}r.exports=t,r.exports.__esModule=!0,r.exports.default=r.exports})(fP);var yhe=fP.exports,pv=yhe(),mhe=pv;try{regeneratorRuntime=pv}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=pv:Function("r","regeneratorRuntime = r")(pv)}const Kn=qi(mhe);var whe=1;function cP(){return whe++}var Fe;(function(r){r[r.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",r[r.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",r[r.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN",r[r.ZERO=0]="ZERO",r[r.ONE=1]="ONE",r[r.SRC_COLOR=768]="SRC_COLOR",r[r.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",r[r.SRC_ALPHA=770]="SRC_ALPHA",r[r.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",r[r.DST_ALPHA=772]="DST_ALPHA",r[r.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",r[r.DST_COLOR=774]="DST_COLOR",r[r.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",r[r.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",r[r.FUNC_ADD=32774]="FUNC_ADD",r[r.BLEND_EQUATION=32777]="BLEND_EQUATION",r[r.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",r[r.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",r[r.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",r[r.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",r[r.MAX_EXT=32776]="MAX_EXT",r[r.MIN_EXT=32775]="MIN_EXT",r[r.BLEND_DST_RGB=32968]="BLEND_DST_RGB",r[r.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",r[r.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",r[r.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",r[r.CONSTANT_COLOR=32769]="CONSTANT_COLOR",r[r.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",r[r.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",r[r.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",r[r.BLEND_COLOR=32773]="BLEND_COLOR",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",r[r.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",r[r.STREAM_DRAW=35040]="STREAM_DRAW",r[r.STATIC_DRAW=35044]="STATIC_DRAW",r[r.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",r[r.BUFFER_SIZE=34660]="BUFFER_SIZE",r[r.BUFFER_USAGE=34661]="BUFFER_USAGE",r[r.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",r[r.FRONT=1028]="FRONT",r[r.BACK=1029]="BACK",r[r.FRONT_AND_BACK=1032]="FRONT_AND_BACK",r[r.CULL_FACE=2884]="CULL_FACE",r[r.BLEND=3042]="BLEND",r[r.DITHER=3024]="DITHER",r[r.STENCIL_TEST=2960]="STENCIL_TEST",r[r.DEPTH_TEST=2929]="DEPTH_TEST",r[r.SCISSOR_TEST=3089]="SCISSOR_TEST",r[r.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",r[r.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",r[r.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",r[r.NO_ERROR=0]="NO_ERROR",r[r.INVALID_ENUM=1280]="INVALID_ENUM",r[r.INVALID_VALUE=1281]="INVALID_VALUE",r[r.INVALID_OPERATION=1282]="INVALID_OPERATION",r[r.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",r[r.CW=2304]="CW",r[r.CCW=2305]="CCW",r[r.LINE_WIDTH=2849]="LINE_WIDTH",r[r.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",r[r.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",r[r.CULL_FACE_MODE=2885]="CULL_FACE_MODE",r[r.FRONT_FACE=2886]="FRONT_FACE",r[r.DEPTH_RANGE=2928]="DEPTH_RANGE",r[r.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",r[r.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",r[r.DEPTH_FUNC=2932]="DEPTH_FUNC",r[r.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",r[r.STENCIL_FUNC=2962]="STENCIL_FUNC",r[r.STENCIL_FAIL=2964]="STENCIL_FAIL",r[r.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",r[r.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",r[r.STENCIL_REF=2967]="STENCIL_REF",r[r.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",r[r.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",r[r.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",r[r.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",r[r.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",r[r.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",r[r.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",r[r.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",r[r.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",r[r.VIEWPORT=2978]="VIEWPORT",r[r.SCISSOR_BOX=3088]="SCISSOR_BOX",r[r.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",r[r.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",r[r.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",r[r.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",r[r.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",r[r.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",r[r.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",r[r.RED_BITS=3410]="RED_BITS",r[r.GREEN_BITS=3411]="GREEN_BITS",r[r.BLUE_BITS=3412]="BLUE_BITS",r[r.ALPHA_BITS=3413]="ALPHA_BITS",r[r.DEPTH_BITS=3414]="DEPTH_BITS",r[r.STENCIL_BITS=3415]="STENCIL_BITS",r[r.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",r[r.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",r[r.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",r[r.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",r[r.SAMPLES=32937]="SAMPLES",r[r.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",r[r.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",r[r.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",r[r.DONT_CARE=4352]="DONT_CARE",r[r.FASTEST=4353]="FASTEST",r[r.NICEST=4354]="NICEST",r[r.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",r[r.BYTE=5120]="BYTE",r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.SHORT=5122]="SHORT",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.INT=5124]="INT",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.FLOAT=5126]="FLOAT",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.ALPHA=6406]="ALPHA",r[r.RGB=6407]="RGB",r[r.RGBA=6408]="RGBA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",r[r.VERTEX_SHADER=35633]="VERTEX_SHADER",r[r.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",r[r.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",r[r.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",r[r.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",r[r.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",r[r.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",r[r.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",r[r.SHADER_TYPE=35663]="SHADER_TYPE",r[r.DELETE_STATUS=35712]="DELETE_STATUS",r[r.LINK_STATUS=35714]="LINK_STATUS",r[r.VALIDATE_STATUS=35715]="VALIDATE_STATUS",r[r.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",r[r.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",r[r.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",r[r.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",r[r.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",r[r.NEVER=512]="NEVER",r[r.LESS=513]="LESS",r[r.EQUAL=514]="EQUAL",r[r.LEQUAL=515]="LEQUAL",r[r.GREATER=516]="GREATER",r[r.NOTEQUAL=517]="NOTEQUAL",r[r.GEQUAL=518]="GEQUAL",r[r.ALWAYS=519]="ALWAYS",r[r.KEEP=7680]="KEEP",r[r.REPLACE=7681]="REPLACE",r[r.INCR=7682]="INCR",r[r.DECR=7683]="DECR",r[r.INVERT=5386]="INVERT",r[r.INCR_WRAP=34055]="INCR_WRAP",r[r.DECR_WRAP=34056]="DECR_WRAP",r[r.VENDOR=7936]="VENDOR",r[r.RENDERER=7937]="RENDERER",r[r.VERSION=7938]="VERSION",r[r.NEAREST=9728]="NEAREST",r[r.LINEAR=9729]="LINEAR",r[r.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",r[r.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",r[r.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",r[r.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",r[r.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",r[r.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",r[r.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",r[r.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE=5890]="TEXTURE",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",r[r.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",r[r.TEXTURE0=33984]="TEXTURE0",r[r.TEXTURE1=33985]="TEXTURE1",r[r.TEXTURE2=33986]="TEXTURE2",r[r.TEXTURE3=33987]="TEXTURE3",r[r.TEXTURE4=33988]="TEXTURE4",r[r.TEXTURE5=33989]="TEXTURE5",r[r.TEXTURE6=33990]="TEXTURE6",r[r.TEXTURE7=33991]="TEXTURE7",r[r.TEXTURE8=33992]="TEXTURE8",r[r.TEXTURE9=33993]="TEXTURE9",r[r.TEXTURE10=33994]="TEXTURE10",r[r.TEXTURE11=33995]="TEXTURE11",r[r.TEXTURE12=33996]="TEXTURE12",r[r.TEXTURE13=33997]="TEXTURE13",r[r.TEXTURE14=33998]="TEXTURE14",r[r.TEXTURE15=33999]="TEXTURE15",r[r.TEXTURE16=34e3]="TEXTURE16",r[r.TEXTURE17=34001]="TEXTURE17",r[r.TEXTURE18=34002]="TEXTURE18",r[r.TEXTURE19=34003]="TEXTURE19",r[r.TEXTURE20=34004]="TEXTURE20",r[r.TEXTURE21=34005]="TEXTURE21",r[r.TEXTURE22=34006]="TEXTURE22",r[r.TEXTURE23=34007]="TEXTURE23",r[r.TEXTURE24=34008]="TEXTURE24",r[r.TEXTURE25=34009]="TEXTURE25",r[r.TEXTURE26=34010]="TEXTURE26",r[r.TEXTURE27=34011]="TEXTURE27",r[r.TEXTURE28=34012]="TEXTURE28",r[r.TEXTURE29=34013]="TEXTURE29",r[r.TEXTURE30=34014]="TEXTURE30",r[r.TEXTURE31=34015]="TEXTURE31",r[r.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",r[r.REPEAT=10497]="REPEAT",r[r.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",r[r.FLOAT_VEC2=35664]="FLOAT_VEC2",r[r.FLOAT_VEC3=35665]="FLOAT_VEC3",r[r.FLOAT_VEC4=35666]="FLOAT_VEC4",r[r.INT_VEC2=35667]="INT_VEC2",r[r.INT_VEC3=35668]="INT_VEC3",r[r.INT_VEC4=35669]="INT_VEC4",r[r.BOOL=35670]="BOOL",r[r.BOOL_VEC2=35671]="BOOL_VEC2",r[r.BOOL_VEC3=35672]="BOOL_VEC3",r[r.BOOL_VEC4=35673]="BOOL_VEC4",r[r.FLOAT_MAT2=35674]="FLOAT_MAT2",r[r.FLOAT_MAT3=35675]="FLOAT_MAT3",r[r.FLOAT_MAT4=35676]="FLOAT_MAT4",r[r.SAMPLER_2D=35678]="SAMPLER_2D",r[r.SAMPLER_CUBE=35680]="SAMPLER_CUBE",r[r.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",r[r.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",r[r.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",r[r.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",r[r.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",r[r.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",r[r.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",r[r.COMPILE_STATUS=35713]="COMPILE_STATUS",r[r.LOW_FLOAT=36336]="LOW_FLOAT",r[r.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",r[r.HIGH_FLOAT=36338]="HIGH_FLOAT",r[r.LOW_INT=36339]="LOW_INT",r[r.MEDIUM_INT=36340]="MEDIUM_INT",r[r.HIGH_INT=36341]="HIGH_INT",r[r.FRAMEBUFFER=36160]="FRAMEBUFFER",r[r.RENDERBUFFER=36161]="RENDERBUFFER",r[r.RGBA4=32854]="RGBA4",r[r.RGB5_A1=32855]="RGB5_A1",r[r.RGB565=36194]="RGB565",r[r.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",r[r.STENCIL_INDEX=6401]="STENCIL_INDEX",r[r.STENCIL_INDEX8=36168]="STENCIL_INDEX8",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL",r[r.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",r[r.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",r[r.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",r[r.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",r[r.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",r[r.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",r[r.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",r[r.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",r[r.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",r[r.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",r[r.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",r[r.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",r[r.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",r[r.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",r[r.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",r[r.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",r[r.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",r[r.NONE=0]="NONE",r[r.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",r[r.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",r[r.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",r[r.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",r[r.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",r[r.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",r[r.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",r[r.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",r[r.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",r[r.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",r[r.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",r[r.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",r[r.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",r[r.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",r[r.COPY_SRC=1]="COPY_SRC",r[r.COPY_DST=2]="COPY_DST",r[r.SAMPLED=4]="SAMPLED",r[r.STORAGE=8]="STORAGE",r[r.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(Fe||(Fe={}));var Bhe=function(){function r(){yi(this,r),this.config=void 0}return mi(r,[{key:"get",value:function(){return this.config}},{key:"set",value:function(t){this.config=t}}]),r}(),cc;(function(r){r.Void="Void",r.Boolean="Boolean",r.Float="Float",r.Uint32="Uint32",r.Int32="Int32",r.Vector="Vector",r.Vector2Float="vec2<f32>",r.Vector3Float="vec3<f32>",r.Vector4Float="vec4<f32>",r.Vector2Boolean="vec2<bool>",r.Vector3Boolean="vec3<bool>",r.Vector4Boolean="vec4<bool>",r.Vector2Uint="vec2<u32>",r.Vector3Uint="vec3<u32>",r.Vector4Uint="vec4<u32>",r.Vector2Int="vec2<i32>",r.Vector3Int="vec3<i32>",r.Vector4Int="vec4<i32>",r.Matrix="Matrix",r.Matrix3x3Float="mat3x3<f32>",r.Matrix4x4Float="mat4x4<i32>",r.Struct="Struct",r.FloatArray="Float[]",r.Vector4FloatArray="vec4<f32>[]"})(cc||(cc={}));var gM;(function(r){r.Program="Program",r.Identifier="Identifier",r.VariableDeclaration="VariableDeclaration",r.BlockStatement="BlockStatement",r.ReturnStatement="ReturnStatement",r.FunctionDeclaration="FunctionDeclaration",r.VariableDeclarator="VariableDeclarator",r.AssignmentExpression="AssignmentExpression",r.LogicalExpression="LogicalExpression",r.BinaryExpression="BinaryExpression",r.ArrayExpression="ArrayExpression",r.UnaryExpression="UnaryExpression",r.UpdateExpression="UpdateExpression",r.FunctionExpression="FunctionExpression",r.MemberExpression="MemberExpression",r.ConditionalExpression="ConditionalExpression",r.ExpressionStatement="ExpressionStatement",r.CallExpression="CallExpression",r.NumThreadStatement="NumThreadStatement",r.StorageStatement="StorageStatement",r.DoWhileStatement="DoWhileStatement",r.WhileStatement="WhileStatement",r.ForStatement="ForStatement",r.BreakStatement="BreakStatement",r.ContinueStatement="ContinueStatement",r.IfStatement="IfStatement",r.ImportedFunctionStatement="ImportedFunctionStatement"})(gM||(gM={}));var ff;(function(r){r.Input="Input",r.Output="Output",r.Uniform="Uniform",r.Workgroup="Workgroup",r.UniformConstant="UniformConstant",r.Image="Image",r.StorageBuffer="StorageBuffer",r.Private="Private",r.Function="Function"})(ff||(ff={}));var Dl;(function(r){r.GLSL100="GLSL100",r.GLSL450="GLSL450",r.WGSL="WGSL"})(Dl||(Dl={}));var Ehe="__DefineValuePlaceholder__";function bhe(){if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function pM(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function yM(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?pM(Object(t),!0).forEach(function(n){Je(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):pM(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var hP=function(){function r(e,t){yi(this,r),this.engine=e,this.configService=t,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return mi(r,[{key:"init",value:function(){var t=this.configService.get(),n=t.canvas,a=t.engineOptions;this.initPromise=this.engine.init(yM({canvas:n||bhe(),antialiasing:!1},a))}},{key:"setBundle",value:function(t){this.compiledBundle=JSON.parse(JSON.stringify(t))}},{key:"setDispatch",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=t),this}},{key:"setMaxIteration",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=t),this}},{key:"setBinding",value:function(t,n){var a=this;if(typeof t=="string"){var i=hhe(n)||ug(n)||ghe(n);if(this.compiledBundle&&this.compiledBundle.context){var o=this.compiledBundle.context.defines.find(function(s){return s.name===t});if(o)return o.value=n,this;var A=this.compiledBundle.context.uniforms.find(function(s){return s.name===t});A&&(i?(A.data=n,A.isReferer=!1,A.storageClass===ff.Uniform?this.model&&this.model.updateUniform(t,n):this.model&&this.model.updateBuffer(t,n)):(A.isReferer=!0,A.data=n))}}else Object.keys(t).forEach(function(s){a.setBinding(s,t[s])});return this}},{key:"execute",value:function(){var e=hA(Kn.mark(function n(){var a=this,i,o,A=arguments;return Kn.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(i=A.length>0&&A[0]!==void 0?A[0]:1,!this.dirty){u.next=6;break}return this.compiledBundle.context&&(i>1?this.compiledBundle.context.maxIteration=i:this.compiledBundle.context.maxIteration++),u.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(f){var l=f.isReferer;return l}).forEach(function(f){var l=f.data,c=f.name;a.model.confirmInput(l.model,c)}),o=0;o<i;o++)this.model.run();return this.engine.endFrame(),u.abrupt("return",this);case 12:case"end":return u.stop()}},n,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getOutput",value:function(){var e=hA(Kn.mark(function n(){return Kn.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",this.model.readData());case 1:case"end":return i.stop()}},n,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"compile",value:function(){var e=hA(Kn.mark(function n(){var a,i,o;return Kn.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,this.initPromise;case 2:return a=yM({},this.compiledBundle.context),i=this.engine.supportWebGPU?this.engine.useWGSL?Dl.WGSL:Dl.GLSL450:Dl.GLSL100,o=this.compiledBundle.shaders[i],a.defines.filter(function(u){return u.runtime}).forEach(function(u){var f="".concat(Ehe).concat(u.name);o=o.replace(f,"".concat(u.value))}),a.shader=o,a.uniforms.forEach(function(u){if(!u.data&&u.storageClass===ff.StorageBuffer){var f=1;u.type===cc.FloatArray?f=1:u.type===cc.Vector4FloatArray&&(f=4),u.data=new Float32Array(a.output.length*f).fill(0)}}),this.compiledBundle.context=a,s.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=s.sent;case 12:case"end":return s.stop()}},n,this)}));function t(){return e.apply(this,arguments)}return t}()}]),r}(),dP={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(we,function(){var t=function(T){return T instanceof Uint8Array||T instanceof Uint16Array||T instanceof Uint32Array||T instanceof Int8Array||T instanceof Int16Array||T instanceof Int32Array||T instanceof Float32Array||T instanceof Float64Array||T instanceof Uint8ClampedArray},n=function(T,H){for(var $=Object.keys(H),le=0;le<$.length;++le)T[$[le]]=H[$[le]];return T},a=`
`;function i(T){return typeof atob<"u"?atob(T):"base64:"+T}function o(T){var H=new Error("(regl) "+T);throw console.error(H),H}function A(T,H){T||o(H)}function s(T){return T?": "+T:""}function u(T,H,$){T in H||o("unknown parameter ("+T+")"+s($)+". possible values: "+Object.keys(H).join())}function f(T,H){t(T)||o("invalid parameter type"+s(H)+". must be a typed array")}function l(T,H){switch(H){case"number":return typeof T=="number";case"object":return typeof T=="object";case"string":return typeof T=="string";case"boolean":return typeof T=="boolean";case"function":return typeof T=="function";case"undefined":return typeof T>"u";case"symbol":return typeof T=="symbol"}}function c(T,H,$){l(T,H)||o("invalid parameter type"+s($)+". expected "+H+", got "+typeof T)}function h(T,H){T>=0&&(T|0)===T||o("invalid parameter type, ("+T+")"+s(H)+". must be a nonnegative integer")}function d(T,H,$){H.indexOf(T)<0&&o("invalid value"+s($)+". must be one of: "+H)}var v=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function g(T){Object.keys(T).forEach(function(H){v.indexOf(H)<0&&o('invalid regl constructor argument "'+H+'". must be one of '+v)})}function p(T,H){for(T=T+"";T.length<H;)T=" "+T;return T}function y(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function m(T,H){this.number=T,this.line=H,this.errors=[]}function w(T,H,$){this.file=T,this.line=H,this.message=$}function B(){var T=new Error,H=(T.stack||T).toString(),$=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(H);if($)return $[1];var le=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(H);return le?le[1]:"unknown"}function E(){var T=new Error,H=(T.stack||T).toString(),$=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(H);if($)return $[1];var le=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(H);return le?le[1]:"unknown"}function b(T,H){var $=T.split(`
`),le=1,Be=0,fe={unknown:new y,0:new y};fe.unknown.name=fe[0].name=H||B(),fe.unknown.lines.push(new m(0,""));for(var he=0;he<$.length;++he){var Ie=$[he],Le=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Ie);if(Le)switch(Le[1]){case"line":var Pe=/(\d+)(\s+\d+)?/.exec(Le[2]);Pe&&(le=Pe[1]|0,Pe[2]&&(Be=Pe[2]|0,Be in fe||(fe[Be]=new y)));break;case"define":var De=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Le[2]);De&&(fe[Be].name=De[1]?i(De[2]):De[2]);break}fe[Be].lines.push(new m(le++,Ie))}return Object.keys(fe).forEach(function(He){var We=fe[He];We.lines.forEach(function(Te){We.index[Te.number]=Te})}),fe}function C(T){var H=[];return T.split(`
`).forEach(function($){if(!($.length<5)){var le=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec($);le?H.push(new w(le[1]|0,le[2]|0,le[3].trim())):$.length>0&&H.push(new w("unknown",0,$))}}),H}function _(T,H){H.forEach(function($){var le=T[$.file];if(le){var Be=le.index[$.line];if(Be){Be.errors.push($),le.hasErrors=!0;return}}T.unknown.hasErrors=!0,T.unknown.lines[0].errors.push($)})}function x(T,H,$,le,Be){if(!T.getShaderParameter(H,T.COMPILE_STATUS)){var fe=T.getShaderInfoLog(H),he=le===T.FRAGMENT_SHADER?"fragment":"vertex";U($,"string",he+" shader source must be a string",Be);var Ie=b($,Be),Le=C(fe);_(Ie,Le),Object.keys(Ie).forEach(function(Pe){var De=Ie[Pe];if(!De.hasErrors)return;var He=[""],We=[""];function Te(Ge,oe){He.push(Ge),We.push(oe||"")}Te("file number "+Pe+": "+De.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),De.lines.forEach(function(Ge){if(Ge.errors.length>0){Te(p(Ge.number,4)+"|  ","background-color:yellow; font-weight:bold"),Te(Ge.line+a,"color:red; background-color:yellow; font-weight:bold");var oe=0;Ge.errors.forEach(function(de){var ke=de.message,Ye=/^\s*'(.*)'\s*:\s*(.*)$/.exec(ke);if(Ye){var Ce=Ye[1];switch(ke=Ye[2],Ce){case"assign":Ce="=";break}oe=Math.max(Ge.line.indexOf(Ce,oe),0)}else oe=0;Te(p("| ",6)),Te(p("^^^",oe+3)+a,"font-weight:bold"),Te(p("| ",6)),Te(ke+a,"font-weight:bold")}),Te(p("| ",6)+a)}else Te(p(Ge.number,4)+"|  "),Te(Ge.line+a,"color:red")}),typeof document<"u"&&!window.chrome?(We[0]=He.join("%c"),console.log.apply(console,We)):console.log(He.join(""))}),A.raise("Error compiling "+he+" shader, "+Ie[0].name)}}function M(T,H,$,le,Be){if(!T.getProgramParameter(H,T.LINK_STATUS)){var fe=T.getProgramInfoLog(H),he=b($,Be),Ie=b(le,Be),Le='Error linking program with vertex shader, "'+Ie[0].name+'", and fragment shader "'+he[0].name+'"';typeof document<"u"?console.log("%c"+Le+a+"%c"+fe,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Le+a+fe),A.raise(Le)}}function S(T){T._commandRef=B()}function I(T,H,$,le){S(T);function Be(Le){return Le?le.id(Le):0}T._fragId=Be(T.static.frag),T._vertId=Be(T.static.vert);function fe(Le,Pe){Object.keys(Pe).forEach(function(De){Le[le.id(De)]=!0})}var he=T._uniformSet={};fe(he,H.static),fe(he,H.dynamic);var Ie=T._attributeSet={};fe(Ie,$.static),fe(Ie,$.dynamic),T._hasCount="count"in T.static||"count"in T.dynamic||"elements"in T.static||"elements"in T.dynamic}function D(T,H){var $=E();o(T+" in command "+(H||B())+($==="unknown"?"":" called from "+$))}function O(T,H,$){T||D(H,$||B())}function F(T,H,$,le){T in H||D("unknown parameter ("+T+")"+s($)+". possible values: "+Object.keys(H).join(),le||B())}function U(T,H,$,le){l(T,H)||D("invalid parameter type"+s($)+". expected "+H+", got "+typeof T,le||B())}function Q(T){T()}function N(T,H,$){T.texture?d(T.texture._texture.internalformat,H,"unsupported texture format for attachment"):d(T.renderbuffer._renderbuffer.format,$,"unsupported renderbuffer format for attachment")}var R=33071,J=9728,re=9984,ee=9985,q=9986,ve=9987,Me=5120,Re=5121,tt=5122,st=5123,at=5124,Et=5125,bt=5126,fr=32819,Qt=32820,Kt=33635,gr=34042,lr=36193,Ht={};Ht[Me]=Ht[Re]=1,Ht[tt]=Ht[st]=Ht[lr]=Ht[Kt]=Ht[fr]=Ht[Qt]=2,Ht[at]=Ht[Et]=Ht[bt]=Ht[gr]=4;function tr(T,H){return T===Qt||T===fr||T===Kt?2:T===gr?4:Ht[T]*H}function Kr(T){return!(T&T-1)&&!!T}function et(T,H,$){var le,Be=H.width,fe=H.height,he=H.channels;A(Be>0&&Be<=$.maxTextureSize&&fe>0&&fe<=$.maxTextureSize,"invalid texture shape"),(T.wrapS!==R||T.wrapT!==R)&&A(Kr(Be)&&Kr(fe),"incompatible wrap mode for texture, both width and height must be power of 2"),H.mipmask===1?Be!==1&&fe!==1&&A(T.minFilter!==re&&T.minFilter!==q&&T.minFilter!==ee&&T.minFilter!==ve,"min filter requires mipmap"):(A(Kr(Be)&&Kr(fe),"texture must be a square power of 2 to support mipmapping"),A(H.mipmask===(Be<<1)-1,"missing or incomplete mipmap data")),H.type===bt&&($.extensions.indexOf("oes_texture_float_linear")<0&&A(T.minFilter===J&&T.magFilter===J,"filter not supported, must enable oes_texture_float_linear"),A(!T.genMipmaps,"mipmap generation not supported with float textures"));var Ie=H.images;for(le=0;le<16;++le)if(Ie[le]){var Le=Be>>le,Pe=fe>>le;A(H.mipmask&1<<le,"missing mipmap data");var De=Ie[le];if(A(De.width===Le&&De.height===Pe,"invalid shape for mip images"),A(De.format===H.format&&De.internalformat===H.internalformat&&De.type===H.type,"incompatible type for mip image"),!De.compressed)if(De.data){var He=Math.ceil(tr(De.type,he)*Le/De.unpackAlignment)*De.unpackAlignment;A(De.data.byteLength===He*Pe,"invalid data for image, buffer size is inconsistent with image format")}else De.element||De.copy}else T.genMipmaps||A((H.mipmask&1<<le)===0,"extra mipmap data");H.compressed&&A(!T.genMipmaps,"mipmap generation for compressed images not supported")}function ae(T,H,$,le){var Be=T.width,fe=T.height,he=T.channels;A(Be>0&&Be<=le.maxTextureSize&&fe>0&&fe<=le.maxTextureSize,"invalid texture shape"),A(Be===fe,"cube map must be square"),A(H.wrapS===R&&H.wrapT===R,"wrap mode not supported by cube map");for(var Ie=0;Ie<$.length;++Ie){var Le=$[Ie];A(Le.width===Be&&Le.height===fe,"inconsistent cube map face shape"),H.genMipmaps&&(A(!Le.compressed,"can not generate mipmap for compressed textures"),A(Le.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Pe=Le.images,De=0;De<16;++De){var He=Pe[De];if(He){var We=Be>>De,Te=fe>>De;A(Le.mipmask&1<<De,"missing mipmap data"),A(He.width===We&&He.height===Te,"invalid shape for mip images"),A(He.format===T.format&&He.internalformat===T.internalformat&&He.type===T.type,"incompatible type for mip image"),He.compressed||(He.data?A(He.data.byteLength===We*Te*Math.max(tr(He.type,he),He.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):He.element||He.copy)}}}}var L=n(A,{optional:Q,raise:o,commandRaise:D,command:O,parameter:u,commandParameter:F,constructor:g,type:c,commandType:U,isTypedArray:f,nni:h,oneOf:d,shaderError:x,linkError:M,callSite:E,saveCommandRef:S,saveDrawInfo:I,framebufferFormat:N,guessCommand:B,texture2D:et,textureCube:ae}),be=0,Ne=0,pe=5,ze=6;function Ke(T,H){this.id=be++,this.type=T,this.data=H}function Xe(T){return T.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Ze(T){if(T.length===0)return[];var H=T.charAt(0),$=T.charAt(T.length-1);if(T.length>1&&H===$&&(H==='"'||H==="'"))return['"'+Xe(T.substr(1,T.length-2))+'"'];var le=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(T);if(le)return Ze(T.substr(0,le.index)).concat(Ze(le[1])).concat(Ze(T.substr(le.index+le[0].length)));var Be=T.split(".");if(Be.length===1)return['"'+Xe(T)+'"'];for(var fe=[],he=0;he<Be.length;++he)fe=fe.concat(Ze(Be[he]));return fe}function gt(T){return"["+Ze(T).join("][")+"]"}function Ot(T,H){return new Ke(T,gt(H+""))}function cr(T){return typeof T=="function"&&!T._reglType||T instanceof Ke}function Ut(T,H){if(typeof T=="function")return new Ke(Ne,T);if(typeof T=="number"||typeof T=="boolean")return new Ke(pe,T);if(Array.isArray(T))return new Ke(ze,T.map(($,le)=>Ut($,H+"["+le+"]")));if(T instanceof Ke)return T;L(!1,"invalid option type in uniform "+H)}var vr={DynamicVariable:Ke,define:Ot,isDynamic:cr,unbox:Ut,accessor:gt},sr={next:typeof requestAnimationFrame=="function"?function(T){return requestAnimationFrame(T)}:function(T){return setTimeout(T,16)},cancel:typeof cancelAnimationFrame=="function"?function(T){return cancelAnimationFrame(T)}:clearTimeout},wr=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function pr(){var T={"":0},H=[""];return{id:function($){var le=T[$];return le||(le=T[$]=H.length,H.push($),le)},str:function($){return H[$]}}}function hn(T,H,$){var le=document.createElement("canvas");n(le.style,{border:0,margin:0,padding:0,top:0,left:0}),T.appendChild(le),T===document.body&&(le.style.position="absolute",n(T.style,{margin:0,padding:0}));function Be(){var Ie=window.innerWidth,Le=window.innerHeight;if(T!==document.body){var Pe=T.getBoundingClientRect();Ie=Pe.right-Pe.left,Le=Pe.bottom-Pe.top}le.width=$*Ie,le.height=$*Le,n(le.style,{width:Ie+"px",height:Le+"px"})}var fe;T!==document.body&&typeof ResizeObserver=="function"?(fe=new ResizeObserver(function(){setTimeout(Be)}),fe.observe(T)):window.addEventListener("resize",Be,!1);function he(){fe?fe.disconnect():window.removeEventListener("resize",Be),T.removeChild(le)}return Be(),{canvas:le,onDestroy:he}}function rr(T,H){function $(le){try{return T.getContext(le,H)}catch{return null}}return $("webgl")||$("experimental-webgl")||$("webgl-experimental")}function Pr(T){return typeof T.nodeName=="string"&&typeof T.appendChild=="function"&&typeof T.getBoundingClientRect=="function"}function da(T){return typeof T.drawArrays=="function"||typeof T.drawElements=="function"}function jr(T){return typeof T=="string"?T.split():(L(Array.isArray(T),"invalid extension array"),T)}function Bi(T){return typeof T=="string"?(L(typeof document<"u","not supported outside of DOM"),document.querySelector(T)):T}function NA(T){var H=T||{},$,le,Be,fe,he={},Ie=[],Le=[],Pe=typeof window>"u"?1:window.devicePixelRatio,De=!1,He=function(Ge){Ge&&L.raise(Ge)},We=function(){};if(typeof H=="string"?(L(typeof document<"u","selector queries only supported in DOM enviroments"),$=document.querySelector(H),L($,"invalid query string for element")):typeof H=="object"?Pr(H)?$=H:da(H)?(fe=H,Be=fe.canvas):(L.constructor(H),"gl"in H?fe=H.gl:"canvas"in H?Be=Bi(H.canvas):"container"in H&&(le=Bi(H.container)),"attributes"in H&&(he=H.attributes,L.type(he,"object","invalid context attributes")),"extensions"in H&&(Ie=jr(H.extensions)),"optionalExtensions"in H&&(Le=jr(H.optionalExtensions)),"onDone"in H&&(L.type(H.onDone,"function","invalid or missing onDone callback"),He=H.onDone),"profile"in H&&(De=!!H.profile),"pixelRatio"in H&&(Pe=+H.pixelRatio,L(Pe>0,"invalid pixel ratio"))):L.raise("invalid arguments to regl"),$&&($.nodeName.toLowerCase()==="canvas"?Be=$:le=$),!fe){if(!Be){L(typeof document<"u","must manually specify webgl context outside of DOM environments");var Te=hn(le||document.body,He,Pe);if(!Te)return null;Be=Te.canvas,We=Te.onDestroy}he.premultipliedAlpha===void 0&&(he.premultipliedAlpha=!0),fe=rr(Be,he)}return fe?{gl:fe,canvas:Be,container:le,extensions:Ie,optionalExtensions:Le,pixelRatio:Pe,profile:De,onDone:He,onDestroy:We}:(We(),He("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function kA(T,H){var $={};function le(he){L.type(he,"string","extension name must be string");var Ie=he.toLowerCase(),Le;try{Le=$[Ie]=T.getExtension(Ie)}catch{}return!!Le}for(var Be=0;Be<H.extensions.length;++Be){var fe=H.extensions[Be];if(!le(fe))return H.onDestroy(),H.onDone('"'+fe+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return H.optionalExtensions.forEach(le),{extensions:$,restore:function(){Object.keys($).forEach(function(he){if($[he]&&!le(he))throw new Error("(regl): error restoring extension "+he)})}}}function An(T,H){for(var $=Array(T),le=0;le<T;++le)$[le]=H(le);return $}var Za=5120,Ao=5121,PA=5122,QA=5123,RA=5124,va=5125,Qr=5126;function ga(T){for(var H=16;H<=1<<28;H*=16)if(T<=H)return H;return 0}function It(T){var H,$;return H=(T>65535)<<4,T>>>=H,$=(T>255)<<3,T>>>=$,H|=$,$=(T>15)<<2,T>>>=$,H|=$,$=(T>3)<<1,T>>>=$,H|=$,H|T>>1}function yr(){var T=An(8,function(){return[]});function H(fe){var he=ga(fe),Ie=T[It(he)>>2];return Ie.length>0?Ie.pop():new ArrayBuffer(he)}function $(fe){T[It(fe.byteLength)>>2].push(fe)}function le(fe,he){var Ie=null;switch(fe){case Za:Ie=new Int8Array(H(he),0,he);break;case Ao:Ie=new Uint8Array(H(he),0,he);break;case PA:Ie=new Int16Array(H(2*he),0,he);break;case QA:Ie=new Uint16Array(H(2*he),0,he);break;case RA:Ie=new Int32Array(H(4*he),0,he);break;case va:Ie=new Uint32Array(H(4*he),0,he);break;case Qr:Ie=new Float32Array(H(4*he),0,he);break;default:return null}return Ie.length!==he?Ie.subarray(0,he):Ie}function Be(fe){$(fe.buffer)}return{alloc:H,free:$,allocType:le,freeType:Be}}var wt=yr();wt.zero=yr();var Ir=3408,dn=3410,so=3411,uo=3412,qa=3413,Ei=3414,fo=3415,lo=33901,Qp=33902,Rp=3379,Hp=3386,Gp=34921,zp=36347,Kp=36348,jp=35661,$p=35660,Wp=34930,Vp=36349,Xp=34076,Yp=34024,lR=7936,cR=7937,hR=7938,dR=35724,vR=34047,gR=36063,pR=34852,eh=3553,sb=34067,yR=34069,mR=33984,Bf=6408,Zp=5126,ub=5121,qp=36160,wR=36053,BR=36064,ER=16384,bR=function(T,H){var $=1;H.ext_texture_filter_anisotropic&&($=T.getParameter(vR));var le=1,Be=1;H.webgl_draw_buffers&&(le=T.getParameter(pR),Be=T.getParameter(gR));var fe=!!H.oes_texture_float;if(fe){var he=T.createTexture();T.bindTexture(eh,he),T.texImage2D(eh,0,Bf,1,1,0,Bf,Zp,null);var Ie=T.createFramebuffer();if(T.bindFramebuffer(qp,Ie),T.framebufferTexture2D(qp,BR,eh,he,0),T.bindTexture(eh,null),T.checkFramebufferStatus(qp)!==wR)fe=!1;else{T.viewport(0,0,1,1),T.clearColor(1,0,0,1),T.clear(ER);var Le=wt.allocType(Zp,4);T.readPixels(0,0,1,1,Bf,Zp,Le),T.getError()?fe=!1:(T.deleteFramebuffer(Ie),T.deleteTexture(he),fe=Le[0]===1),wt.freeType(Le)}}var Pe=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),De=!0;if(!Pe){var He=T.createTexture(),We=wt.allocType(ub,36);T.activeTexture(mR),T.bindTexture(sb,He),T.texImage2D(yR,0,Bf,3,3,0,Bf,ub,We),wt.freeType(We),T.bindTexture(sb,null),T.deleteTexture(He),De=!T.getError()}return{colorBits:[T.getParameter(dn),T.getParameter(so),T.getParameter(uo),T.getParameter(qa)],depthBits:T.getParameter(Ei),stencilBits:T.getParameter(fo),subpixelBits:T.getParameter(Ir),extensions:Object.keys(H).filter(function(Te){return!!H[Te]}),maxAnisotropic:$,maxDrawbuffers:le,maxColorAttachments:Be,pointSizeDims:T.getParameter(lo),lineWidthDims:T.getParameter(Qp),maxViewportDims:T.getParameter(Hp),maxCombinedTextureUnits:T.getParameter(jp),maxCubeMapSize:T.getParameter(Xp),maxRenderbufferSize:T.getParameter(Yp),maxTextureUnits:T.getParameter(Wp),maxTextureSize:T.getParameter(Rp),maxAttributes:T.getParameter(Gp),maxVertexUniforms:T.getParameter(zp),maxVertexTextureUnits:T.getParameter($p),maxVaryingVectors:T.getParameter(Kp),maxFragmentUniforms:T.getParameter(Vp),glsl:T.getParameter(dR),renderer:T.getParameter(cR),vendor:T.getParameter(lR),version:T.getParameter(hR),readFloat:fe,npotTextureCube:De}};function Ja(T){return!!T&&typeof T=="object"&&Array.isArray(T.shape)&&Array.isArray(T.stride)&&typeof T.offset=="number"&&T.shape.length===T.stride.length&&(Array.isArray(T.data)||t(T.data))}var pa=function(T){return Object.keys(T).map(function(H){return T[H]})},th={shape:SR,flatten:_R};function xR(T,H,$){for(var le=0;le<H;++le)$[le]=T[le]}function CR(T,H,$,le){for(var Be=0,fe=0;fe<H;++fe)for(var he=T[fe],Ie=0;Ie<$;++Ie)le[Be++]=he[Ie]}function fb(T,H,$,le,Be,fe){for(var he=fe,Ie=0;Ie<H;++Ie)for(var Le=T[Ie],Pe=0;Pe<$;++Pe)for(var De=Le[Pe],He=0;He<le;++He)Be[he++]=De[He]}function lb(T,H,$,le,Be){for(var fe=1,he=$+1;he<H.length;++he)fe*=H[he];var Ie=H[$];if(H.length-$===4){var Le=H[$+1],Pe=H[$+2],De=H[$+3];for(he=0;he<Ie;++he)fb(T[he],Le,Pe,De,le,Be),Be+=fe}else for(he=0;he<Ie;++he)lb(T[he],H,$+1,le,Be),Be+=fe}function _R(T,H,$,le){var Be=1;if(H.length)for(var fe=0;fe<H.length;++fe)Be*=H[fe];else Be=0;var he=le||wt.allocType($,Be);switch(H.length){case 0:break;case 1:xR(T,H[0],he);break;case 2:CR(T,H[0],H[1],he);break;case 3:fb(T,H[0],H[1],H[2],he,0);break;default:lb(T,H,0,he,0)}return he}function SR(T){for(var H=[],$=T;$.length;$=$[0])H.push($.length);return H}var Jp={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},MR=5120,IR=5122,TR=5124,FR=5121,LR=5123,DR=5125,OR=5126,UR=5126,HA={int8:MR,int16:IR,int32:TR,uint8:FR,uint16:LR,uint32:DR,float:OR,float32:UR},NR=35048,kR=35040,rh={dynamic:NR,stream:kR,static:35044},e0=th.flatten,cb=th.shape,hb=35044,PR=35040,t0=5121,r0=5126,Ko=[];Ko[5120]=1,Ko[5122]=2,Ko[5124]=4,Ko[5121]=1,Ko[5123]=2,Ko[5125]=4,Ko[5126]=4;function nh(T){return Jp[Object.prototype.toString.call(T)]|0}function db(T,H){for(var $=0;$<H.length;++$)T[$]=H[$]}function vb(T,H,$,le,Be,fe,he){for(var Ie=0,Le=0;Le<$;++Le)for(var Pe=0;Pe<le;++Pe)T[Ie++]=H[Be*Le+fe*Pe+he]}function QR(T,H,$,le){var Be=0,fe={};function he(oe){this.id=Be++,this.buffer=T.createBuffer(),this.type=oe,this.usage=hb,this.byteLength=0,this.dimension=1,this.dtype=t0,this.persistentData=null,$.profile&&(this.stats={size:0})}he.prototype.bind=function(){T.bindBuffer(this.type,this.buffer)},he.prototype.destroy=function(){We(this)};var Ie=[];function Le(oe,de){var ke=Ie.pop();return ke||(ke=new he(oe)),ke.bind(),He(ke,de,PR,0,1,!1),ke}function Pe(oe){Ie.push(oe)}function De(oe,de,ke){oe.byteLength=de.byteLength,T.bufferData(oe.type,de,ke)}function He(oe,de,ke,Ye,Ce,rt){var Se;if(oe.usage=ke,Array.isArray(de)){if(oe.dtype=Ye||r0,de.length>0){var je;if(Array.isArray(de[0])){Se=cb(de);for(var _e=1,$e=1;$e<Se.length;++$e)_e*=Se[$e];oe.dimension=_e,je=e0(de,Se,oe.dtype),De(oe,je,ke),rt?oe.persistentData=je:wt.freeType(je)}else if(typeof de[0]=="number"){oe.dimension=Ce;var pt=wt.allocType(oe.dtype,de.length);db(pt,de),De(oe,pt,ke),rt?oe.persistentData=pt:wt.freeType(pt)}else t(de[0])?(oe.dimension=de[0].length,oe.dtype=Ye||nh(de[0])||r0,je=e0(de,[de.length,de[0].length],oe.dtype),De(oe,je,ke),rt?oe.persistentData=je:wt.freeType(je)):L.raise("invalid buffer data")}}else if(t(de))oe.dtype=Ye||nh(de),oe.dimension=Ce,De(oe,de,ke),rt&&(oe.persistentData=new Uint8Array(new Uint8Array(de.buffer)));else if(Ja(de)){Se=de.shape;var Tt=de.stride,Ve=de.offset,Qe=0,xe=0,Mt=0,Nt=0;Se.length===1?(Qe=Se[0],xe=1,Mt=Tt[0],Nt=0):Se.length===2?(Qe=Se[0],xe=Se[1],Mt=Tt[0],Nt=Tt[1]):L.raise("invalid shape"),oe.dtype=Ye||nh(de.data)||r0,oe.dimension=xe;var it=wt.allocType(oe.dtype,Qe*xe);vb(it,de.data,Qe,xe,Mt,Nt,Ve),De(oe,it,ke),rt?oe.persistentData=it:wt.freeType(it)}else de instanceof ArrayBuffer?(oe.dtype=t0,oe.dimension=Ce,De(oe,de,ke),rt&&(oe.persistentData=new Uint8Array(new Uint8Array(de)))):L.raise("invalid buffer data")}function We(oe){H.bufferCount--,le(oe);var de=oe.buffer;L(de,"buffer must not be deleted already"),T.deleteBuffer(de),oe.buffer=null,delete fe[oe.id]}function Te(oe,de,ke,Ye){H.bufferCount++;var Ce=new he(de);fe[Ce.id]=Ce;function rt(_e){var $e=hb,pt=null,Tt=0,Ve=0,Qe=1;return Array.isArray(_e)||t(_e)||Ja(_e)||_e instanceof ArrayBuffer?pt=_e:typeof _e=="number"?Tt=_e|0:_e&&(L.type(_e,"object","buffer arguments must be an object, a number or an array"),"data"in _e&&(L(pt===null||Array.isArray(pt)||t(pt)||Ja(pt),"invalid data for buffer"),pt=_e.data),"usage"in _e&&(L.parameter(_e.usage,rh,"invalid buffer usage"),$e=rh[_e.usage]),"type"in _e&&(L.parameter(_e.type,HA,"invalid buffer type"),Ve=HA[_e.type]),"dimension"in _e&&(L.type(_e.dimension,"number","invalid dimension"),Qe=_e.dimension|0),"length"in _e&&(L.nni(Tt,"buffer length must be a nonnegative integer"),Tt=_e.length|0)),Ce.bind(),pt?He(Ce,pt,$e,Ve,Qe,Ye):(Tt&&T.bufferData(Ce.type,Tt,$e),Ce.dtype=Ve||t0,Ce.usage=$e,Ce.dimension=Qe,Ce.byteLength=Tt),$.profile&&(Ce.stats.size=Ce.byteLength*Ko[Ce.dtype]),rt}function Se(_e,$e){L($e+_e.byteLength<=Ce.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+_e.byteLength+" starting from offset "+$e+" to a buffer of size "+Ce.byteLength),T.bufferSubData(Ce.type,$e,_e)}function je(_e,$e){var pt=($e||0)|0,Tt;if(Ce.bind(),t(_e)||_e instanceof ArrayBuffer)Se(_e,pt);else if(Array.isArray(_e)){if(_e.length>0)if(typeof _e[0]=="number"){var Ve=wt.allocType(Ce.dtype,_e.length);db(Ve,_e),Se(Ve,pt),wt.freeType(Ve)}else if(Array.isArray(_e[0])||t(_e[0])){Tt=cb(_e);var Qe=e0(_e,Tt,Ce.dtype);Se(Qe,pt),wt.freeType(Qe)}else L.raise("invalid buffer data")}else if(Ja(_e)){Tt=_e.shape;var xe=_e.stride,Mt=0,Nt=0,it=0,Gt=0;Tt.length===1?(Mt=Tt[0],Nt=1,it=xe[0],Gt=0):Tt.length===2?(Mt=Tt[0],Nt=Tt[1],it=xe[0],Gt=xe[1]):L.raise("invalid shape");var Ft=Array.isArray(_e.data)?Ce.dtype:nh(_e.data),Rt=wt.allocType(Ft,Mt*Nt);vb(Rt,_e.data,Mt,Nt,it,Gt,_e.offset),Se(Rt,pt),wt.freeType(Rt)}else L.raise("invalid data for buffer subdata");return rt}return ke||rt(oe),rt._reglType="buffer",rt._buffer=Ce,rt.subdata=je,$.profile&&(rt.stats=Ce.stats),rt.destroy=function(){We(Ce)},rt}function Ge(){pa(fe).forEach(function(oe){oe.buffer=T.createBuffer(),T.bindBuffer(oe.type,oe.buffer),T.bufferData(oe.type,oe.persistentData||oe.byteLength,oe.usage)})}return $.profile&&(H.getTotalBufferSize=function(){var oe=0;return Object.keys(fe).forEach(function(de){oe+=fe[de].stats.size}),oe}),{create:Te,createStream:Le,destroyStream:Pe,clear:function(){pa(fe).forEach(We),Ie.forEach(We)},getBuffer:function(oe){return oe&&oe._buffer instanceof he?oe._buffer:null},restore:Ge,_initBuffer:He}}var RR=0,HR=0,GR=1,zR=1,KR=4,jR=4,Gs={points:RR,point:HR,lines:GR,line:zR,triangles:KR,triangle:jR,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},$R=0,WR=1,Ef=4,VR=5120,zs=5121,gb=5122,Ks=5123,pb=5124,GA=5125,n0=34963,XR=35040,YR=35044;function ZR(T,H,$,le){var Be={},fe=0,he={uint8:zs,uint16:Ks};H.oes_element_index_uint&&(he.uint32=GA);function Ie(Ge){this.id=fe++,Be[this.id]=this,this.buffer=Ge,this.primType=Ef,this.vertCount=0,this.type=0}Ie.prototype.bind=function(){this.buffer.bind()};var Le=[];function Pe(Ge){var oe=Le.pop();return oe||(oe=new Ie($.create(null,n0,!0,!1)._buffer)),He(oe,Ge,XR,-1,-1,0,0),oe}function De(Ge){Le.push(Ge)}function He(Ge,oe,de,ke,Ye,Ce,rt){Ge.buffer.bind();var Se;if(oe){var je=rt;!rt&&(!t(oe)||Ja(oe)&&!t(oe.data))&&(je=H.oes_element_index_uint?GA:Ks),$._initBuffer(Ge.buffer,oe,de,je,3)}else T.bufferData(n0,Ce,de),Ge.buffer.dtype=Se||zs,Ge.buffer.usage=de,Ge.buffer.dimension=3,Ge.buffer.byteLength=Ce;if(Se=rt,!rt){switch(Ge.buffer.dtype){case zs:case VR:Se=zs;break;case Ks:case gb:Se=Ks;break;case GA:case pb:Se=GA;break;default:L.raise("unsupported type for element array")}Ge.buffer.dtype=Se}Ge.type=Se,L(Se!==GA||!!H.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var _e=Ye;_e<0&&(_e=Ge.buffer.byteLength,Se===Ks?_e>>=1:Se===GA&&(_e>>=2)),Ge.vertCount=_e;var $e=ke;if(ke<0){$e=Ef;var pt=Ge.buffer.dimension;pt===1&&($e=$R),pt===2&&($e=WR),pt===3&&($e=Ef)}Ge.primType=$e}function We(Ge){le.elementsCount--,L(Ge.buffer!==null,"must not double destroy elements"),delete Be[Ge.id],Ge.buffer.destroy(),Ge.buffer=null}function Te(Ge,oe){var de=$.create(null,n0,!0),ke=new Ie(de._buffer);le.elementsCount++;function Ye(Ce){if(!Ce)de(),ke.primType=Ef,ke.vertCount=0,ke.type=zs;else if(typeof Ce=="number")de(Ce),ke.primType=Ef,ke.vertCount=Ce|0,ke.type=zs;else{var rt=null,Se=YR,je=-1,_e=-1,$e=0,pt=0;Array.isArray(Ce)||t(Ce)||Ja(Ce)?rt=Ce:(L.type(Ce,"object","invalid arguments for elements"),"data"in Ce&&(rt=Ce.data,L(Array.isArray(rt)||t(rt)||Ja(rt),"invalid data for element buffer")),"usage"in Ce&&(L.parameter(Ce.usage,rh,"invalid element buffer usage"),Se=rh[Ce.usage]),"primitive"in Ce&&(L.parameter(Ce.primitive,Gs,"invalid element buffer primitive"),je=Gs[Ce.primitive]),"count"in Ce&&(L(typeof Ce.count=="number"&&Ce.count>=0,"invalid vertex count for elements"),_e=Ce.count|0),"type"in Ce&&(L.parameter(Ce.type,he,"invalid buffer type"),pt=he[Ce.type]),"length"in Ce?$e=Ce.length|0:($e=_e,pt===Ks||pt===gb?$e*=2:(pt===GA||pt===pb)&&($e*=4))),He(ke,rt,Se,je,_e,$e,pt)}return Ye}return Ye(Ge),Ye._reglType="elements",Ye._elements=ke,Ye.subdata=function(Ce,rt){return de.subdata(Ce,rt),Ye},Ye.destroy=function(){We(ke)},Ye}return{create:Te,createStream:Pe,destroyStream:De,getElements:function(Ge){return typeof Ge=="function"&&Ge._elements instanceof Ie?Ge._elements:null},clear:function(){pa(Be).forEach(We)}}}var yb=new Float32Array(1),qR=new Uint32Array(yb.buffer),JR=5123;function mb(T){for(var H=wt.allocType(JR,T.length),$=0;$<T.length;++$)if(isNaN(T[$]))H[$]=65535;else if(T[$]===1/0)H[$]=31744;else if(T[$]===-1/0)H[$]=64512;else{yb[0]=T[$];var le=qR[0],Be=le>>>31<<15,fe=(le<<1>>>24)-127,he=le>>13&1024-1;if(fe<-24)H[$]=Be;else if(fe<-14){var Ie=-14-fe;H[$]=Be+(he+1024>>Ie)}else fe>15?H[$]=Be+31744:H[$]=Be+(fe+15<<10)+he}return H}function Rr(T){return Array.isArray(T)||t(T)}var wb=function(T){return!(T&T-1)&&!!T},e4=34467,bi=3553,a0=34067,ah=34069,zA=6408,i0=6406,ih=6407,bf=6409,oh=6410,Bb=32854,o0=32855,Eb=36194,t4=32819,r4=32820,n4=33635,a4=34042,A0=6402,Ah=34041,s0=35904,u0=35906,js=36193,f0=33776,l0=33777,c0=33778,h0=33779,bb=35986,xb=35987,Cb=34798,_b=35840,Sb=35841,Mb=35842,Ib=35843,Tb=36196,$s=5121,d0=5123,v0=5125,xf=5126,i4=10242,o4=10243,A4=10497,g0=33071,s4=33648,u4=10240,f4=10241,p0=9728,l4=9729,y0=9984,Fb=9985,Lb=9986,m0=9987,c4=33170,sh=4352,h4=4353,d4=4354,v4=34046,g4=3317,p4=37440,y4=37441,m4=37443,Db=37444,Cf=33984,w4=[y0,Lb,Fb,m0],uh=[0,bf,oh,ih,zA],Ta={};Ta[bf]=Ta[i0]=Ta[A0]=1,Ta[Ah]=Ta[oh]=2,Ta[ih]=Ta[s0]=3,Ta[zA]=Ta[u0]=4;function Ws(T){return"[object "+T+"]"}var Ob=Ws("HTMLCanvasElement"),Ub=Ws("OffscreenCanvas"),Nb=Ws("CanvasRenderingContext2D"),kb=Ws("ImageBitmap"),Pb=Ws("HTMLImageElement"),Qb=Ws("HTMLVideoElement"),B4=Object.keys(Jp).concat([Ob,Ub,Nb,kb,Pb,Qb]),Vs=[];Vs[$s]=1,Vs[xf]=4,Vs[js]=2,Vs[d0]=2,Vs[v0]=4;var xn=[];xn[Bb]=2,xn[o0]=2,xn[Eb]=2,xn[Ah]=4,xn[f0]=.5,xn[l0]=.5,xn[c0]=1,xn[h0]=1,xn[bb]=.5,xn[xb]=1,xn[Cb]=1,xn[_b]=.5,xn[Sb]=.25,xn[Mb]=.5,xn[Ib]=.25,xn[Tb]=.5;function Rb(T){return Array.isArray(T)&&(T.length===0||typeof T[0]=="number")}function Hb(T){if(!Array.isArray(T))return!1;var H=T.length;return!(H===0||!Rr(T[0]))}function KA(T){return Object.prototype.toString.call(T)}function Gb(T){return KA(T)===Ob}function zb(T){return KA(T)===Ub}function E4(T){return KA(T)===Nb}function b4(T){return KA(T)===kb}function x4(T){return KA(T)===Pb}function C4(T){return KA(T)===Qb}function w0(T){if(!T)return!1;var H=KA(T);return B4.indexOf(H)>=0?!0:Rb(T)||Hb(T)||Ja(T)}function Kb(T){return Jp[Object.prototype.toString.call(T)]|0}function _4(T,H){var $=H.length;switch(T.type){case $s:case d0:case v0:case xf:var le=wt.allocType(T.type,$);le.set(H),T.data=le;break;case js:T.data=mb(H);break;default:L.raise("unsupported texture type, must specify a typed array")}}function jb(T,H){return wt.allocType(T.type===js?xf:T.type,H)}function $b(T,H){T.type===js?(T.data=mb(H),wt.freeType(H)):T.data=H}function S4(T,H,$,le,Be,fe){for(var he=T.width,Ie=T.height,Le=T.channels,Pe=he*Ie*Le,De=jb(T,Pe),He=0,We=0;We<Ie;++We)for(var Te=0;Te<he;++Te)for(var Ge=0;Ge<Le;++Ge)De[He++]=H[$*Te+le*We+Be*Ge+fe];$b(T,De)}function fh(T,H,$,le,Be,fe){var he;if(typeof xn[T]<"u"?he=xn[T]:he=Ta[T]*Vs[H],fe&&(he*=6),Be){for(var Ie=0,Le=$;Le>=1;)Ie+=he*Le*Le,Le/=2;return Ie}else return he*$*le}function M4(T,H,$,le,Be,fe,he){var Ie={"don't care":sh,"dont care":sh,nice:d4,fast:h4},Le={repeat:A4,clamp:g0,mirror:s4},Pe={nearest:p0,linear:l4},De=n({mipmap:m0,"nearest mipmap nearest":y0,"linear mipmap nearest":Fb,"nearest mipmap linear":Lb,"linear mipmap linear":m0},Pe),He={none:0,browser:Db},We={uint8:$s,rgba4:t4,rgb565:n4,"rgb5 a1":r4},Te={alpha:i0,luminance:bf,"luminance alpha":oh,rgb:ih,rgba:zA,rgba4:Bb,"rgb5 a1":o0,rgb565:Eb},Ge={};H.ext_srgb&&(Te.srgb=s0,Te.srgba=u0),H.oes_texture_float&&(We.float32=We.float=xf),H.oes_texture_half_float&&(We.float16=We["half float"]=js),H.webgl_depth_texture&&(n(Te,{depth:A0,"depth stencil":Ah}),n(We,{uint16:d0,uint32:v0,"depth stencil":a4})),H.webgl_compressed_texture_s3tc&&n(Ge,{"rgb s3tc dxt1":f0,"rgba s3tc dxt1":l0,"rgba s3tc dxt3":c0,"rgba s3tc dxt5":h0}),H.webgl_compressed_texture_atc&&n(Ge,{"rgb atc":bb,"rgba atc explicit alpha":xb,"rgba atc interpolated alpha":Cb}),H.webgl_compressed_texture_pvrtc&&n(Ge,{"rgb pvrtc 4bppv1":_b,"rgb pvrtc 2bppv1":Sb,"rgba pvrtc 4bppv1":Mb,"rgba pvrtc 2bppv1":Ib}),H.webgl_compressed_texture_etc1&&(Ge["rgb etc1"]=Tb);var oe=Array.prototype.slice.call(T.getParameter(e4));Object.keys(Ge).forEach(function(j){var ce=Ge[j];oe.indexOf(ce)>=0&&(Te[j]=ce)});var de=Object.keys(Te);$.textureFormats=de;var ke=[];Object.keys(Te).forEach(function(j){var ce=Te[j];ke[ce]=j});var Ye=[];Object.keys(We).forEach(function(j){var ce=We[j];Ye[ce]=j});var Ce=[];Object.keys(Pe).forEach(function(j){var ce=Pe[j];Ce[ce]=j});var rt=[];Object.keys(De).forEach(function(j){var ce=De[j];rt[ce]=j});var Se=[];Object.keys(Le).forEach(function(j){var ce=Le[j];Se[ce]=j});var je=de.reduce(function(j,ce){var ue=Te[ce];return ue===bf||ue===i0||ue===bf||ue===oh||ue===A0||ue===Ah||H.ext_srgb&&(ue===s0||ue===u0)?j[ue]=ue:ue===o0||ce.indexOf("rgba")>=0?j[ue]=zA:j[ue]=ih,j},{});function _e(){this.internalformat=zA,this.format=zA,this.type=$s,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Db,this.width=0,this.height=0,this.channels=0}function $e(j,ce){j.internalformat=ce.internalformat,j.format=ce.format,j.type=ce.type,j.compressed=ce.compressed,j.premultiplyAlpha=ce.premultiplyAlpha,j.flipY=ce.flipY,j.unpackAlignment=ce.unpackAlignment,j.colorSpace=ce.colorSpace,j.width=ce.width,j.height=ce.height,j.channels=ce.channels}function pt(j,ce){if(!(typeof ce!="object"||!ce)){if("premultiplyAlpha"in ce&&(L.type(ce.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),j.premultiplyAlpha=ce.premultiplyAlpha),"flipY"in ce&&(L.type(ce.flipY,"boolean","invalid texture flip"),j.flipY=ce.flipY),"alignment"in ce&&(L.oneOf(ce.alignment,[1,2,4,8],"invalid texture unpack alignment"),j.unpackAlignment=ce.alignment),"colorSpace"in ce&&(L.parameter(ce.colorSpace,He,"invalid colorSpace"),j.colorSpace=He[ce.colorSpace]),"type"in ce){var ue=ce.type;L(H.oes_texture_float||!(ue==="float"||ue==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),L(H.oes_texture_half_float||!(ue==="half float"||ue==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),L(H.webgl_depth_texture||!(ue==="uint16"||ue==="uint32"||ue==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),L.parameter(ue,We,"invalid texture type"),j.type=We[ue]}var nt=j.width,zt=j.height,z=j.channels,k=!1;"shape"in ce?(L(Array.isArray(ce.shape)&&ce.shape.length>=2,"shape must be an array"),nt=ce.shape[0],zt=ce.shape[1],ce.shape.length===3&&(z=ce.shape[2],L(z>0&&z<=4,"invalid number of channels"),k=!0),L(nt>=0&&nt<=$.maxTextureSize,"invalid width"),L(zt>=0&&zt<=$.maxTextureSize,"invalid height")):("radius"in ce&&(nt=zt=ce.radius,L(nt>=0&&nt<=$.maxTextureSize,"invalid radius")),"width"in ce&&(nt=ce.width,L(nt>=0&&nt<=$.maxTextureSize,"invalid width")),"height"in ce&&(zt=ce.height,L(zt>=0&&zt<=$.maxTextureSize,"invalid height")),"channels"in ce&&(z=ce.channels,L(z>0&&z<=4,"invalid number of channels"),k=!0)),j.width=nt|0,j.height=zt|0,j.channels=z|0;var V=!1;if("format"in ce){var ie=ce.format;L(H.webgl_depth_texture||!(ie==="depth"||ie==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),L.parameter(ie,Te,"invalid texture format");var Ae=j.internalformat=Te[ie];j.format=je[Ae],ie in We&&("type"in ce||(j.type=We[ie])),ie in Ge&&(j.compressed=!0),V=!0}!k&&V?j.channels=Ta[j.format]:k&&!V?j.channels!==uh[j.format]&&(j.format=j.internalformat=uh[j.channels]):V&&k&&L(j.channels===Ta[j.format],"number of channels inconsistent with specified format")}}function Tt(j){T.pixelStorei(p4,j.flipY),T.pixelStorei(y4,j.premultiplyAlpha),T.pixelStorei(m4,j.colorSpace),T.pixelStorei(g4,j.unpackAlignment)}function Ve(){_e.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Qe(j,ce){var ue=null;if(w0(ce)?ue=ce:ce&&(L.type(ce,"object","invalid pixel data type"),pt(j,ce),"x"in ce&&(j.xOffset=ce.x|0),"y"in ce&&(j.yOffset=ce.y|0),w0(ce.data)&&(ue=ce.data)),L(!j.compressed||ue instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),ce.copy){L(!ue,"can not specify copy and data field for the same texture");var nt=Be.viewportWidth,zt=Be.viewportHeight;j.width=j.width||nt-j.xOffset,j.height=j.height||zt-j.yOffset,j.needsCopy=!0,L(j.xOffset>=0&&j.xOffset<nt&&j.yOffset>=0&&j.yOffset<zt&&j.width>0&&j.width<=nt&&j.height>0&&j.height<=zt,"copy texture read out of bounds")}else if(!ue)j.width=j.width||1,j.height=j.height||1,j.channels=j.channels||4;else if(t(ue))j.channels=j.channels||4,j.data=ue,!("type"in ce)&&j.type===$s&&(j.type=Kb(ue));else if(Rb(ue))j.channels=j.channels||4,_4(j,ue),j.alignment=1,j.needsFree=!0;else if(Ja(ue)){var z=ue.data;!Array.isArray(z)&&j.type===$s&&(j.type=Kb(z));var k=ue.shape,V=ue.stride,ie,Ae,Z,Y,te,K;k.length===3?(Z=k[2],K=V[2]):(L(k.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Z=1,K=1),ie=k[0],Ae=k[1],Y=V[0],te=V[1],j.alignment=1,j.width=ie,j.height=Ae,j.channels=Z,j.format=j.internalformat=uh[Z],j.needsFree=!0,S4(j,z,Y,te,K,ue.offset)}else if(Gb(ue)||zb(ue)||E4(ue))Gb(ue)||zb(ue)?j.element=ue:j.element=ue.canvas,j.width=j.element.width,j.height=j.element.height,j.channels=4;else if(b4(ue))j.element=ue,j.width=ue.width,j.height=ue.height,j.channels=4;else if(x4(ue))j.element=ue,j.width=ue.naturalWidth,j.height=ue.naturalHeight,j.channels=4;else if(C4(ue))j.element=ue,j.width=ue.videoWidth,j.height=ue.videoHeight,j.channels=4;else if(Hb(ue)){var W=j.width||ue[0].length,G=j.height||ue.length,ne=j.channels;Rr(ue[0][0])?ne=ne||ue[0][0].length:ne=ne||1;for(var se=th.shape(ue),me=1,Ee=0;Ee<se.length;++Ee)me*=se[Ee];var ge=jb(j,me);th.flatten(ue,se,"",ge),$b(j,ge),j.alignment=1,j.width=W,j.height=G,j.channels=ne,j.format=j.internalformat=uh[ne],j.needsFree=!0}j.type===xf?L($.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):j.type===js&&L($.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function xe(j,ce,ue){var nt=j.element,zt=j.data,z=j.internalformat,k=j.format,V=j.type,ie=j.width,Ae=j.height;Tt(j),nt?T.texImage2D(ce,ue,k,k,V,nt):j.compressed?T.compressedTexImage2D(ce,ue,z,ie,Ae,0,zt):j.needsCopy?(le(),T.copyTexImage2D(ce,ue,k,j.xOffset,j.yOffset,ie,Ae,0)):T.texImage2D(ce,ue,k,ie,Ae,0,k,V,zt||null)}function Mt(j,ce,ue,nt,zt){var z=j.element,k=j.data,V=j.internalformat,ie=j.format,Ae=j.type,Z=j.width,Y=j.height;Tt(j),z?T.texSubImage2D(ce,zt,ue,nt,ie,Ae,z):j.compressed?T.compressedTexSubImage2D(ce,zt,ue,nt,V,Z,Y,k):j.needsCopy?(le(),T.copyTexSubImage2D(ce,zt,ue,nt,j.xOffset,j.yOffset,Z,Y)):T.texSubImage2D(ce,zt,ue,nt,Z,Y,ie,Ae,k)}var Nt=[];function it(){return Nt.pop()||new Ve}function Gt(j){j.needsFree&&wt.freeType(j.data),Ve.call(j),Nt.push(j)}function Ft(){_e.call(this),this.genMipmaps=!1,this.mipmapHint=sh,this.mipmask=0,this.images=Array(16)}function Rt(j,ce,ue){var nt=j.images[0]=it();j.mipmask=1,nt.width=j.width=ce,nt.height=j.height=ue,nt.channels=j.channels=4}function ar(j,ce){var ue=null;if(w0(ce))ue=j.images[0]=it(),$e(ue,j),Qe(ue,ce),j.mipmask=1;else if(pt(j,ce),Array.isArray(ce.mipmap))for(var nt=ce.mipmap,zt=0;zt<nt.length;++zt)ue=j.images[zt]=it(),$e(ue,j),ue.width>>=zt,ue.height>>=zt,Qe(ue,nt[zt]),j.mipmask|=1<<zt;else ue=j.images[0]=it(),$e(ue,j),Qe(ue,ce),j.mipmask=1;$e(j,j.images[0]),j.compressed&&(j.internalformat===f0||j.internalformat===l0||j.internalformat===c0||j.internalformat===h0)&&L(j.width%4===0&&j.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Wr(j,ce){for(var ue=j.images,nt=0;nt<ue.length;++nt){if(!ue[nt])return;xe(ue[nt],ce,nt)}}var sn=[];function $t(){var j=sn.pop()||new Ft;_e.call(j),j.mipmask=0;for(var ce=0;ce<16;++ce)j.images[ce]=null;return j}function Jr(j){for(var ce=j.images,ue=0;ue<ce.length;++ue)ce[ue]&&Gt(ce[ue]),ce[ue]=null;sn.push(j)}function Br(){this.minFilter=p0,this.magFilter=p0,this.wrapS=g0,this.wrapT=g0,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=sh}function Vr(j,ce){if("min"in ce){var ue=ce.min;L.parameter(ue,De),j.minFilter=De[ue],w4.indexOf(j.minFilter)>=0&&!("faces"in ce)&&(j.genMipmaps=!0)}if("mag"in ce){var nt=ce.mag;L.parameter(nt,Pe),j.magFilter=Pe[nt]}var zt=j.wrapS,z=j.wrapT;if("wrap"in ce){var k=ce.wrap;typeof k=="string"?(L.parameter(k,Le),zt=z=Le[k]):Array.isArray(k)&&(L.parameter(k[0],Le),L.parameter(k[1],Le),zt=Le[k[0]],z=Le[k[1]])}else{if("wrapS"in ce){var V=ce.wrapS;L.parameter(V,Le),zt=Le[V]}if("wrapT"in ce){var ie=ce.wrapT;L.parameter(ie,Le),z=Le[ie]}}if(j.wrapS=zt,j.wrapT=z,"anisotropic"in ce){var Ae=ce.anisotropic;L(typeof Ae=="number"&&Ae>=1&&Ae<=$.maxAnisotropic,"aniso samples must be between 1 and "),j.anisotropic=ce.anisotropic}if("mipmap"in ce){var Z=!1;switch(typeof ce.mipmap){case"string":L.parameter(ce.mipmap,Ie,"invalid mipmap hint"),j.mipmapHint=Ie[ce.mipmap],j.genMipmaps=!0,Z=!0;break;case"boolean":Z=j.genMipmaps=ce.mipmap;break;case"object":L(Array.isArray(ce.mipmap),"invalid mipmap type"),j.genMipmaps=!1,Z=!0;break;default:L.raise("invalid mipmap type")}Z&&!("min"in ce)&&(j.minFilter=y0)}}function en(j,ce){T.texParameteri(ce,f4,j.minFilter),T.texParameteri(ce,u4,j.magFilter),T.texParameteri(ce,i4,j.wrapS),T.texParameteri(ce,o4,j.wrapT),H.ext_texture_filter_anisotropic&&T.texParameteri(ce,v4,j.anisotropic),j.genMipmaps&&(T.hint(c4,j.mipmapHint),T.generateMipmap(ce))}var tn=0,vn={},Cn=$.maxTextureUnits,Hr=Array(Cn).map(function(){return null});function kt(j){_e.call(this),this.mipmask=0,this.internalformat=zA,this.id=tn++,this.refCount=1,this.target=j,this.texture=T.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Br,he.profile&&(this.stats={size:0})}function _n(j){T.activeTexture(Cf),T.bindTexture(j.target,j.texture)}function hr(){var j=Hr[0];j?T.bindTexture(j.target,j.texture):T.bindTexture(bi,null)}function Bt(j){var ce=j.texture;L(ce,"must not double destroy texture");var ue=j.unit,nt=j.target;ue>=0&&(T.activeTexture(Cf+ue),T.bindTexture(nt,null),Hr[ue]=null),T.deleteTexture(ce),j.texture=null,j.params=null,j.pixels=null,j.refCount=0,delete vn[j.id],fe.textureCount--}n(kt.prototype,{bind:function(){var j=this;j.bindCount+=1;var ce=j.unit;if(ce<0){for(var ue=0;ue<Cn;++ue){var nt=Hr[ue];if(nt){if(nt.bindCount>0)continue;nt.unit=-1}Hr[ue]=j,ce=ue;break}ce>=Cn&&L.raise("insufficient number of texture units"),he.profile&&fe.maxTextureUnits<ce+1&&(fe.maxTextureUnits=ce+1),j.unit=ce,T.activeTexture(Cf+ce),T.bindTexture(j.target,j.texture)}return ce},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Bt(this)}});function jt(j,ce){var ue=new kt(bi);vn[ue.id]=ue,fe.textureCount++;function nt(k,V){var ie=ue.texInfo;Br.call(ie);var Ae=$t();return typeof k=="number"?typeof V=="number"?Rt(Ae,k|0,V|0):Rt(Ae,k|0,k|0):k?(L.type(k,"object","invalid arguments to regl.texture"),Vr(ie,k),ar(Ae,k)):Rt(Ae,1,1),ie.genMipmaps&&(Ae.mipmask=(Ae.width<<1)-1),ue.mipmask=Ae.mipmask,$e(ue,Ae),L.texture2D(ie,Ae,$),ue.internalformat=Ae.internalformat,nt.width=Ae.width,nt.height=Ae.height,_n(ue),Wr(Ae,bi),en(ie,bi),hr(),Jr(Ae),he.profile&&(ue.stats.size=fh(ue.internalformat,ue.type,Ae.width,Ae.height,ie.genMipmaps,!1)),nt.format=ke[ue.internalformat],nt.type=Ye[ue.type],nt.mag=Ce[ie.magFilter],nt.min=rt[ie.minFilter],nt.wrapS=Se[ie.wrapS],nt.wrapT=Se[ie.wrapT],nt}function zt(k,V,ie,Ae){L(!!k,"must specify image data");var Z=V|0,Y=ie|0,te=Ae|0,K=it();return $e(K,ue),K.width=0,K.height=0,Qe(K,k),K.width=K.width||(ue.width>>te)-Z,K.height=K.height||(ue.height>>te)-Y,L(ue.type===K.type&&ue.format===K.format&&ue.internalformat===K.internalformat,"incompatible format for texture.subimage"),L(Z>=0&&Y>=0&&Z+K.width<=ue.width&&Y+K.height<=ue.height,"texture.subimage write out of bounds"),L(ue.mipmask&1<<te,"missing mipmap data"),L(K.data||K.element||K.needsCopy,"missing image data"),_n(ue),Mt(K,bi,Z,Y,te),hr(),Gt(K),nt}function z(k,V){var ie=k|0,Ae=V|0||ie;if(ie===ue.width&&Ae===ue.height)return nt;nt.width=ue.width=ie,nt.height=ue.height=Ae,_n(ue);for(var Z=0;ue.mipmask>>Z;++Z){var Y=ie>>Z,te=Ae>>Z;if(!Y||!te)break;T.texImage2D(bi,Z,ue.format,Y,te,0,ue.format,ue.type,null)}return hr(),he.profile&&(ue.stats.size=fh(ue.internalformat,ue.type,ie,Ae,!1,!1)),nt}return nt(j,ce),nt.subimage=zt,nt.resize=z,nt._reglType="texture2d",nt._texture=ue,he.profile&&(nt.stats=ue.stats),nt.destroy=function(){ue.decRef()},nt}function qt(j,ce,ue,nt,zt,z){var k=new kt(a0);vn[k.id]=k,fe.cubeCount++;var V=new Array(6);function ie(Y,te,K,W,G,ne){var se,me=k.texInfo;for(Br.call(me),se=0;se<6;++se)V[se]=$t();if(typeof Y=="number"||!Y){var Ee=Y|0||1;for(se=0;se<6;++se)Rt(V[se],Ee,Ee)}else if(typeof Y=="object")if(te)ar(V[0],Y),ar(V[1],te),ar(V[2],K),ar(V[3],W),ar(V[4],G),ar(V[5],ne);else if(Vr(me,Y),pt(k,Y),"faces"in Y){var ge=Y.faces;for(L(Array.isArray(ge)&&ge.length===6,"cube faces must be a length 6 array"),se=0;se<6;++se)L(typeof ge[se]=="object"&&!!ge[se],"invalid input for cube map face"),$e(V[se],k),ar(V[se],ge[se])}else for(se=0;se<6;++se)ar(V[se],Y);else L.raise("invalid arguments to cube map");for($e(k,V[0]),$.npotTextureCube||L(wb(k.width)&&wb(k.height),"your browser does not support non power or two texture dimensions"),me.genMipmaps?k.mipmask=(V[0].width<<1)-1:k.mipmask=V[0].mipmask,L.textureCube(k,me,V,$),k.internalformat=V[0].internalformat,ie.width=V[0].width,ie.height=V[0].height,_n(k),se=0;se<6;++se)Wr(V[se],ah+se);for(en(me,a0),hr(),he.profile&&(k.stats.size=fh(k.internalformat,k.type,ie.width,ie.height,me.genMipmaps,!0)),ie.format=ke[k.internalformat],ie.type=Ye[k.type],ie.mag=Ce[me.magFilter],ie.min=rt[me.minFilter],ie.wrapS=Se[me.wrapS],ie.wrapT=Se[me.wrapT],se=0;se<6;++se)Jr(V[se]);return ie}function Ae(Y,te,K,W,G){L(!!te,"must specify image data"),L(typeof Y=="number"&&Y===(Y|0)&&Y>=0&&Y<6,"invalid face");var ne=K|0,se=W|0,me=G|0,Ee=it();return $e(Ee,k),Ee.width=0,Ee.height=0,Qe(Ee,te),Ee.width=Ee.width||(k.width>>me)-ne,Ee.height=Ee.height||(k.height>>me)-se,L(k.type===Ee.type&&k.format===Ee.format&&k.internalformat===Ee.internalformat,"incompatible format for texture.subimage"),L(ne>=0&&se>=0&&ne+Ee.width<=k.width&&se+Ee.height<=k.height,"texture.subimage write out of bounds"),L(k.mipmask&1<<me,"missing mipmap data"),L(Ee.data||Ee.element||Ee.needsCopy,"missing image data"),_n(k),Mt(Ee,ah+Y,ne,se,me),hr(),Gt(Ee),ie}function Z(Y){var te=Y|0;if(te!==k.width){ie.width=k.width=te,ie.height=k.height=te,_n(k);for(var K=0;K<6;++K)for(var W=0;k.mipmask>>W;++W)T.texImage2D(ah+K,W,k.format,te>>W,te>>W,0,k.format,k.type,null);return hr(),he.profile&&(k.stats.size=fh(k.internalformat,k.type,ie.width,ie.height,!1,!0)),ie}}return ie(j,ce,ue,nt,zt,z),ie.subimage=Ae,ie.resize=Z,ie._reglType="textureCube",ie._texture=k,he.profile&&(ie.stats=k.stats),ie.destroy=function(){k.decRef()},ie}function Gr(){for(var j=0;j<Cn;++j)T.activeTexture(Cf+j),T.bindTexture(bi,null),Hr[j]=null;pa(vn).forEach(Bt),fe.cubeCount=0,fe.textureCount=0}he.profile&&(fe.getTotalTextureSize=function(){var j=0;return Object.keys(vn).forEach(function(ce){j+=vn[ce].stats.size}),j});function Ci(){for(var j=0;j<Cn;++j){var ce=Hr[j];ce&&(ce.bindCount=0,ce.unit=-1,Hr[j]=null)}pa(vn).forEach(function(ue){ue.texture=T.createTexture(),T.bindTexture(ue.target,ue.texture);for(var nt=0;nt<32;++nt)if(ue.mipmask&1<<nt)if(ue.target===bi)T.texImage2D(bi,nt,ue.internalformat,ue.width>>nt,ue.height>>nt,0,ue.internalformat,ue.type,null);else for(var zt=0;zt<6;++zt)T.texImage2D(ah+zt,nt,ue.internalformat,ue.width>>nt,ue.height>>nt,0,ue.internalformat,ue.type,null);en(ue.texInfo,ue.target)})}function ZA(){for(var j=0;j<Cn;++j){var ce=Hr[j];ce&&(ce.bindCount=0,ce.unit=-1,Hr[j]=null),T.activeTexture(Cf+j),T.bindTexture(bi,null),T.bindTexture(a0,null)}}return{create2D:jt,createCube:qt,clear:Gr,getTexture:function(j){return null},restore:Ci,refresh:ZA}}var jo=36161,lh=32854,Wb=32855,Vb=36194,Xb=33189,Yb=36168,Zb=34041,qb=35907,Jb=34836,ex=34842,tx=34843,ei=[];ei[lh]=2,ei[Wb]=2,ei[Vb]=2,ei[Xb]=2,ei[Yb]=1,ei[Zb]=4,ei[qb]=4,ei[Jb]=16,ei[ex]=8,ei[tx]=6;function rx(T,H,$){return ei[T]*H*$}var I4=function(T,H,$,le,Be){var fe={rgba4:lh,rgb565:Vb,"rgb5 a1":Wb,depth:Xb,stencil:Yb,"depth stencil":Zb};H.ext_srgb&&(fe.srgba=qb),H.ext_color_buffer_half_float&&(fe.rgba16f=ex,fe.rgb16f=tx),H.webgl_color_buffer_float&&(fe.rgba32f=Jb);var he=[];Object.keys(fe).forEach(function(Te){var Ge=fe[Te];he[Ge]=Te});var Ie=0,Le={};function Pe(Te){this.id=Ie++,this.refCount=1,this.renderbuffer=Te,this.format=lh,this.width=0,this.height=0,Be.profile&&(this.stats={size:0})}Pe.prototype.decRef=function(){--this.refCount<=0&&De(this)};function De(Te){var Ge=Te.renderbuffer;L(Ge,"must not double destroy renderbuffer"),T.bindRenderbuffer(jo,null),T.deleteRenderbuffer(Ge),Te.renderbuffer=null,Te.refCount=0,delete Le[Te.id],le.renderbufferCount--}function He(Te,Ge){var oe=new Pe(T.createRenderbuffer());Le[oe.id]=oe,le.renderbufferCount++;function de(Ye,Ce){var rt=0,Se=0,je=lh;if(typeof Ye=="object"&&Ye){var _e=Ye;if("shape"in _e){var $e=_e.shape;L(Array.isArray($e)&&$e.length>=2,"invalid renderbuffer shape"),rt=$e[0]|0,Se=$e[1]|0}else"radius"in _e&&(rt=Se=_e.radius|0),"width"in _e&&(rt=_e.width|0),"height"in _e&&(Se=_e.height|0);"format"in _e&&(L.parameter(_e.format,fe,"invalid renderbuffer format"),je=fe[_e.format])}else typeof Ye=="number"?(rt=Ye|0,typeof Ce=="number"?Se=Ce|0:Se=rt):Ye?L.raise("invalid arguments to renderbuffer constructor"):rt=Se=1;if(L(rt>0&&Se>0&&rt<=$.maxRenderbufferSize&&Se<=$.maxRenderbufferSize,"invalid renderbuffer size"),!(rt===oe.width&&Se===oe.height&&je===oe.format))return de.width=oe.width=rt,de.height=oe.height=Se,oe.format=je,T.bindRenderbuffer(jo,oe.renderbuffer),T.renderbufferStorage(jo,je,rt,Se),L(T.getError()===0,"invalid render buffer format"),Be.profile&&(oe.stats.size=rx(oe.format,oe.width,oe.height)),de.format=he[oe.format],de}function ke(Ye,Ce){var rt=Ye|0,Se=Ce|0||rt;return rt===oe.width&&Se===oe.height||(L(rt>0&&Se>0&&rt<=$.maxRenderbufferSize&&Se<=$.maxRenderbufferSize,"invalid renderbuffer size"),de.width=oe.width=rt,de.height=oe.height=Se,T.bindRenderbuffer(jo,oe.renderbuffer),T.renderbufferStorage(jo,oe.format,rt,Se),L(T.getError()===0,"invalid render buffer format"),Be.profile&&(oe.stats.size=rx(oe.format,oe.width,oe.height))),de}return de(Te,Ge),de.resize=ke,de._reglType="renderbuffer",de._renderbuffer=oe,Be.profile&&(de.stats=oe.stats),de.destroy=function(){oe.decRef()},de}Be.profile&&(le.getTotalRenderbufferSize=function(){var Te=0;return Object.keys(Le).forEach(function(Ge){Te+=Le[Ge].stats.size}),Te});function We(){pa(Le).forEach(function(Te){Te.renderbuffer=T.createRenderbuffer(),T.bindRenderbuffer(jo,Te.renderbuffer),T.renderbufferStorage(jo,Te.format,Te.width,Te.height)}),T.bindRenderbuffer(jo,null)}return{create:He,clear:function(){pa(Le).forEach(De)},restore:We}},co=36160,B0=36161,jA=3553,ch=34069,nx=36064,ax=36096,ix=36128,ox=33306,Ax=36053,T4=36054,F4=36055,L4=36057,D4=36061,O4=36193,U4=5121,N4=5126,sx=6407,ux=6408,k4=6402,P4=[sx,ux],E0=[];E0[ux]=4,E0[sx]=3;var hh=[];hh[U4]=1,hh[N4]=4,hh[O4]=2;var Q4=32854,R4=32855,H4=36194,G4=33189,z4=36168,fx=34041,K4=35907,j4=34836,$4=34842,W4=34843,V4=[Q4,R4,H4,K4,$4,W4,j4],Xs={};Xs[Ax]="complete",Xs[T4]="incomplete attachment",Xs[L4]="incomplete dimensions",Xs[F4]="incomplete, missing attachment",Xs[D4]="unsupported";function X4(T,H,$,le,Be,fe){var he={cur:null,next:null,dirty:!1,setFBO:null},Ie=["rgba"],Le=["rgba4","rgb565","rgb5 a1"];H.ext_srgb&&Le.push("srgba"),H.ext_color_buffer_half_float&&Le.push("rgba16f","rgb16f"),H.webgl_color_buffer_float&&Le.push("rgba32f");var Pe=["uint8"];H.oes_texture_half_float&&Pe.push("half float","float16"),H.oes_texture_float&&Pe.push("float","float32");function De(Ve,Qe,xe){this.target=Ve,this.texture=Qe,this.renderbuffer=xe;var Mt=0,Nt=0;Qe?(Mt=Qe.width,Nt=Qe.height):xe&&(Mt=xe.width,Nt=xe.height),this.width=Mt,this.height=Nt}function He(Ve){Ve&&(Ve.texture&&Ve.texture._texture.decRef(),Ve.renderbuffer&&Ve.renderbuffer._renderbuffer.decRef())}function We(Ve,Qe,xe){if(Ve)if(Ve.texture){var Mt=Ve.texture._texture,Nt=Math.max(1,Mt.width),it=Math.max(1,Mt.height);L(Nt===Qe&&it===xe,"inconsistent width/height for supplied texture"),Mt.refCount+=1}else{var Gt=Ve.renderbuffer._renderbuffer;L(Gt.width===Qe&&Gt.height===xe,"inconsistent width/height for renderbuffer"),Gt.refCount+=1}}function Te(Ve,Qe){Qe&&(Qe.texture?T.framebufferTexture2D(co,Ve,Qe.target,Qe.texture._texture.texture,0):T.framebufferRenderbuffer(co,Ve,B0,Qe.renderbuffer._renderbuffer.renderbuffer))}function Ge(Ve){var Qe=jA,xe=null,Mt=null,Nt=Ve;typeof Ve=="object"&&(Nt=Ve.data,"target"in Ve&&(Qe=Ve.target|0)),L.type(Nt,"function","invalid attachment data");var it=Nt._reglType;return it==="texture2d"?(xe=Nt,L(Qe===jA)):it==="textureCube"?(xe=Nt,L(Qe>=ch&&Qe<ch+6,"invalid cube map target")):it==="renderbuffer"?(Mt=Nt,Qe=B0):L.raise("invalid regl object for attachment"),new De(Qe,xe,Mt)}function oe(Ve,Qe,xe,Mt,Nt){if(xe){var it=le.create2D({width:Ve,height:Qe,format:Mt,type:Nt});return it._texture.refCount=0,new De(jA,it,null)}else{var Gt=Be.create({width:Ve,height:Qe,format:Mt});return Gt._renderbuffer.refCount=0,new De(B0,null,Gt)}}function de(Ve){return Ve&&(Ve.texture||Ve.renderbuffer)}function ke(Ve,Qe,xe){Ve&&(Ve.texture?Ve.texture.resize(Qe,xe):Ve.renderbuffer&&Ve.renderbuffer.resize(Qe,xe),Ve.width=Qe,Ve.height=xe)}var Ye=0,Ce={};function rt(){this.id=Ye++,Ce[this.id]=this,this.framebuffer=T.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Se(Ve){Ve.colorAttachments.forEach(He),He(Ve.depthAttachment),He(Ve.stencilAttachment),He(Ve.depthStencilAttachment)}function je(Ve){var Qe=Ve.framebuffer;L(Qe,"must not double destroy framebuffer"),T.deleteFramebuffer(Qe),Ve.framebuffer=null,fe.framebufferCount--,delete Ce[Ve.id]}function _e(Ve){var Qe;T.bindFramebuffer(co,Ve.framebuffer);var xe=Ve.colorAttachments;for(Qe=0;Qe<xe.length;++Qe)Te(nx+Qe,xe[Qe]);for(Qe=xe.length;Qe<$.maxColorAttachments;++Qe)T.framebufferTexture2D(co,nx+Qe,jA,null,0);T.framebufferTexture2D(co,ox,jA,null,0),T.framebufferTexture2D(co,ax,jA,null,0),T.framebufferTexture2D(co,ix,jA,null,0),Te(ax,Ve.depthAttachment),Te(ix,Ve.stencilAttachment),Te(ox,Ve.depthStencilAttachment);var Mt=T.checkFramebufferStatus(co);!T.isContextLost()&&Mt!==Ax&&L.raise("framebuffer configuration not supported, status = "+Xs[Mt]),T.bindFramebuffer(co,he.next?he.next.framebuffer:null),he.cur=he.next,T.getError()}function $e(Ve,Qe){var xe=new rt;fe.framebufferCount++;function Mt(it,Gt){var Ft;L(he.next!==xe,"can not update framebuffer which is currently in use");var Rt=0,ar=0,Wr=!0,sn=!0,$t=null,Jr=!0,Br="rgba",Vr="uint8",en=1,tn=null,vn=null,Cn=null,Hr=!1;if(typeof it=="number")Rt=it|0,ar=Gt|0||Rt;else if(!it)Rt=ar=1;else{L.type(it,"object","invalid arguments for framebuffer");var kt=it;if("shape"in kt){var _n=kt.shape;L(Array.isArray(_n)&&_n.length>=2,"invalid shape for framebuffer"),Rt=_n[0],ar=_n[1]}else"radius"in kt&&(Rt=ar=kt.radius),"width"in kt&&(Rt=kt.width),"height"in kt&&(ar=kt.height);("color"in kt||"colors"in kt)&&($t=kt.color||kt.colors,Array.isArray($t)&&L($t.length===1||H.webgl_draw_buffers,"multiple render targets not supported")),$t||("colorCount"in kt&&(en=kt.colorCount|0,L(en>0,"invalid color buffer count")),"colorTexture"in kt&&(Jr=!!kt.colorTexture,Br="rgba4"),"colorType"in kt&&(Vr=kt.colorType,Jr?(L(H.oes_texture_float||!(Vr==="float"||Vr==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),L(H.oes_texture_half_float||!(Vr==="half float"||Vr==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Vr==="half float"||Vr==="float16"?(L(H.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Br="rgba16f"):(Vr==="float"||Vr==="float32")&&(L(H.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Br="rgba32f"),L.oneOf(Vr,Pe,"invalid color type")),"colorFormat"in kt&&(Br=kt.colorFormat,Ie.indexOf(Br)>=0?Jr=!0:Le.indexOf(Br)>=0?Jr=!1:Jr?L.oneOf(kt.colorFormat,Ie,"invalid color format for texture"):L.oneOf(kt.colorFormat,Le,"invalid color format for renderbuffer"))),("depthTexture"in kt||"depthStencilTexture"in kt)&&(Hr=!!(kt.depthTexture||kt.depthStencilTexture),L(!Hr||H.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in kt&&(typeof kt.depth=="boolean"?Wr=kt.depth:(tn=kt.depth,sn=!1)),"stencil"in kt&&(typeof kt.stencil=="boolean"?sn=kt.stencil:(vn=kt.stencil,Wr=!1)),"depthStencil"in kt&&(typeof kt.depthStencil=="boolean"?Wr=sn=kt.depthStencil:(Cn=kt.depthStencil,Wr=!1,sn=!1))}var hr=null,Bt=null,jt=null,qt=null;if(Array.isArray($t))hr=$t.map(Ge);else if($t)hr=[Ge($t)];else for(hr=new Array(en),Ft=0;Ft<en;++Ft)hr[Ft]=oe(Rt,ar,Jr,Br,Vr);L(H.webgl_draw_buffers||hr.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),L(hr.length<=$.maxColorAttachments,"too many color attachments, not supported"),Rt=Rt||hr[0].width,ar=ar||hr[0].height,tn?Bt=Ge(tn):Wr&&!sn&&(Bt=oe(Rt,ar,Hr,"depth","uint32")),vn?jt=Ge(vn):sn&&!Wr&&(jt=oe(Rt,ar,!1,"stencil","uint8")),Cn?qt=Ge(Cn):!tn&&!vn&&sn&&Wr&&(qt=oe(Rt,ar,Hr,"depth stencil","depth stencil")),L(!!tn+!!vn+!!Cn<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Gr=null;for(Ft=0;Ft<hr.length;++Ft)if(We(hr[Ft],Rt,ar),L(!hr[Ft]||hr[Ft].texture&&P4.indexOf(hr[Ft].texture._texture.format)>=0||hr[Ft].renderbuffer&&V4.indexOf(hr[Ft].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Ft+" is invalid"),hr[Ft]&&hr[Ft].texture){var Ci=E0[hr[Ft].texture._texture.format]*hh[hr[Ft].texture._texture.type];Gr===null?Gr=Ci:L(Gr===Ci,"all color attachments much have the same number of bits per pixel.")}return We(Bt,Rt,ar),L(!Bt||Bt.texture&&Bt.texture._texture.format===k4||Bt.renderbuffer&&Bt.renderbuffer._renderbuffer.format===G4,"invalid depth attachment for framebuffer object"),We(jt,Rt,ar),L(!jt||jt.renderbuffer&&jt.renderbuffer._renderbuffer.format===z4,"invalid stencil attachment for framebuffer object"),We(qt,Rt,ar),L(!qt||qt.texture&&qt.texture._texture.format===fx||qt.renderbuffer&&qt.renderbuffer._renderbuffer.format===fx,"invalid depth-stencil attachment for framebuffer object"),Se(xe),xe.width=Rt,xe.height=ar,xe.colorAttachments=hr,xe.depthAttachment=Bt,xe.stencilAttachment=jt,xe.depthStencilAttachment=qt,Mt.color=hr.map(de),Mt.depth=de(Bt),Mt.stencil=de(jt),Mt.depthStencil=de(qt),Mt.width=xe.width,Mt.height=xe.height,_e(xe),Mt}function Nt(it,Gt){L(he.next!==xe,"can not resize a framebuffer which is currently in use");var Ft=Math.max(it|0,1),Rt=Math.max(Gt|0||Ft,1);if(Ft===xe.width&&Rt===xe.height)return Mt;for(var ar=xe.colorAttachments,Wr=0;Wr<ar.length;++Wr)ke(ar[Wr],Ft,Rt);return ke(xe.depthAttachment,Ft,Rt),ke(xe.stencilAttachment,Ft,Rt),ke(xe.depthStencilAttachment,Ft,Rt),xe.width=Mt.width=Ft,xe.height=Mt.height=Rt,_e(xe),Mt}return Mt(Ve,Qe),n(Mt,{resize:Nt,_reglType:"framebuffer",_framebuffer:xe,destroy:function(){je(xe),Se(xe)},use:function(it){he.setFBO({framebuffer:Mt},it)}})}function pt(Ve){var Qe=Array(6);function xe(Nt){var it;L(Qe.indexOf(he.next)<0,"can not update framebuffer which is currently in use");var Gt={color:null},Ft=0,Rt=null,ar="rgba",Wr="uint8",sn=1;if(typeof Nt=="number")Ft=Nt|0;else if(!Nt)Ft=1;else{L.type(Nt,"object","invalid arguments for framebuffer");var $t=Nt;if("shape"in $t){var Jr=$t.shape;L(Array.isArray(Jr)&&Jr.length>=2,"invalid shape for framebuffer"),L(Jr[0]===Jr[1],"cube framebuffer must be square"),Ft=Jr[0]}else"radius"in $t&&(Ft=$t.radius|0),"width"in $t?(Ft=$t.width|0,"height"in $t&&L($t.height===Ft,"must be square")):"height"in $t&&(Ft=$t.height|0);("color"in $t||"colors"in $t)&&(Rt=$t.color||$t.colors,Array.isArray(Rt)&&L(Rt.length===1||H.webgl_draw_buffers,"multiple render targets not supported")),Rt||("colorCount"in $t&&(sn=$t.colorCount|0,L(sn>0,"invalid color buffer count")),"colorType"in $t&&(L.oneOf($t.colorType,Pe,"invalid color type"),Wr=$t.colorType),"colorFormat"in $t&&(ar=$t.colorFormat,L.oneOf($t.colorFormat,Ie,"invalid color format for texture"))),"depth"in $t&&(Gt.depth=$t.depth),"stencil"in $t&&(Gt.stencil=$t.stencil),"depthStencil"in $t&&(Gt.depthStencil=$t.depthStencil)}var Br;if(Rt)if(Array.isArray(Rt))for(Br=[],it=0;it<Rt.length;++it)Br[it]=Rt[it];else Br=[Rt];else{Br=Array(sn);var Vr={radius:Ft,format:ar,type:Wr};for(it=0;it<sn;++it)Br[it]=le.createCube(Vr)}for(Gt.color=Array(Br.length),it=0;it<Br.length;++it){var en=Br[it];L(typeof en=="function"&&en._reglType==="textureCube","invalid cube map"),Ft=Ft||en.width,L(en.width===Ft&&en.height===Ft,"invalid cube map shape"),Gt.color[it]={target:ch,data:Br[it]}}for(it=0;it<6;++it){for(var tn=0;tn<Br.length;++tn)Gt.color[tn].target=ch+it;it>0&&(Gt.depth=Qe[0].depth,Gt.stencil=Qe[0].stencil,Gt.depthStencil=Qe[0].depthStencil),Qe[it]?Qe[it](Gt):Qe[it]=$e(Gt)}return n(xe,{width:Ft,height:Ft,color:Br})}function Mt(Nt){var it,Gt=Nt|0;if(L(Gt>0&&Gt<=$.maxCubeMapSize,"invalid radius for cube fbo"),Gt===xe.width)return xe;var Ft=xe.color;for(it=0;it<Ft.length;++it)Ft[it].resize(Gt);for(it=0;it<6;++it)Qe[it].resize(Gt);return xe.width=xe.height=Gt,xe}return xe(Ve),n(xe,{faces:Qe,resize:Mt,_reglType:"framebufferCube",destroy:function(){Qe.forEach(function(Nt){Nt.destroy()})}})}function Tt(){he.cur=null,he.next=null,he.dirty=!0,pa(Ce).forEach(function(Ve){Ve.framebuffer=T.createFramebuffer(),_e(Ve)})}return n(he,{getFramebuffer:function(Ve){if(typeof Ve=="function"&&Ve._reglType==="framebuffer"){var Qe=Ve._framebuffer;if(Qe instanceof rt)return Qe}return null},create:$e,createCube:pt,clear:function(){pa(Ce).forEach(je)},restore:Tt})}var Y4=5126,lx=34962;function b0(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Y4,this.offset=0,this.stride=0,this.divisor=0}function Z4(T,H,$,le,Be){for(var fe=$.maxAttributes,he=new Array(fe),Ie=0;Ie<fe;++Ie)he[Ie]=new b0;var Le=0,Pe={},De={Record:b0,scope:{},state:he,currentVAO:null,targetVAO:null,restore:We()?Ce:function(){},createVAO:rt,getVAO:Ge,destroyBuffer:He,setVAO:We()?oe:de,clear:We()?ke:function(){}};function He(Se){for(var je=0;je<he.length;++je){var _e=he[je];_e.buffer===Se&&(T.disableVertexAttribArray(je),_e.buffer=null)}}function We(){return H.oes_vertex_array_object}function Te(){return H.angle_instanced_arrays}function Ge(Se){return typeof Se=="function"&&Se._vao?Se._vao:null}function oe(Se){if(Se!==De.currentVAO){var je=We();Se?je.bindVertexArrayOES(Se.vao):je.bindVertexArrayOES(null),De.currentVAO=Se}}function de(Se){if(Se!==De.currentVAO){if(Se)Se.bindAttrs();else for(var je=Te(),_e=0;_e<he.length;++_e){var $e=he[_e];$e.buffer?(T.enableVertexAttribArray(_e),T.vertexAttribPointer(_e,$e.size,$e.type,$e.normalized,$e.stride,$e.offfset),je&&$e.divisor&&je.vertexAttribDivisorANGLE(_e,$e.divisor)):(T.disableVertexAttribArray(_e),T.vertexAttrib4f(_e,$e.x,$e.y,$e.z,$e.w))}De.currentVAO=Se}}function ke(){pa(Pe).forEach(function(Se){Se.destroy()})}function Ye(){this.id=++Le,this.attributes=[];var Se=We();Se?this.vao=Se.createVertexArrayOES():this.vao=null,Pe[this.id]=this,this.buffers=[]}Ye.prototype.bindAttrs=function(){for(var Se=Te(),je=this.attributes,_e=0;_e<je.length;++_e){var $e=je[_e];$e.buffer?(T.enableVertexAttribArray(_e),T.bindBuffer(lx,$e.buffer.buffer),T.vertexAttribPointer(_e,$e.size,$e.type,$e.normalized,$e.stride,$e.offset),Se&&$e.divisor&&Se.vertexAttribDivisorANGLE(_e,$e.divisor)):(T.disableVertexAttribArray(_e),T.vertexAttrib4f(_e,$e.x,$e.y,$e.z,$e.w))}for(var pt=je.length;pt<fe;++pt)T.disableVertexAttribArray(pt)},Ye.prototype.refresh=function(){var Se=We();Se&&(Se.bindVertexArrayOES(this.vao),this.bindAttrs(),De.currentVAO=this)},Ye.prototype.destroy=function(){if(this.vao){var Se=We();this===De.currentVAO&&(De.currentVAO=null,Se.bindVertexArrayOES(null)),Se.deleteVertexArrayOES(this.vao),this.vao=null}Pe[this.id]&&(delete Pe[this.id],le.vaoCount-=1)};function Ce(){var Se=We();Se&&pa(Pe).forEach(function(je){je.refresh()})}function rt(Se){var je=new Ye;le.vaoCount+=1;function _e($e){L(Array.isArray($e),"arguments to vertex array constructor must be an array"),L($e.length<fe,"too many attributes"),L($e.length>0,"must specify at least one attribute");var pt={},Tt=je.attributes;Tt.length=$e.length;for(var Ve=0;Ve<$e.length;++Ve){var Qe=$e[Ve],xe=Tt[Ve]=new b0,Mt=Qe.data||Qe;if(Array.isArray(Mt)||t(Mt)||Ja(Mt)){var Nt;je.buffers[Ve]&&(Nt=je.buffers[Ve],t(Mt)&&Nt._buffer.byteLength>=Mt.byteLength?Nt.subdata(Mt):(Nt.destroy(),je.buffers[Ve]=null)),je.buffers[Ve]||(Nt=je.buffers[Ve]=Be.create(Qe,lx,!1,!0)),xe.buffer=Be.getBuffer(Nt),xe.size=xe.buffer.dimension|0,xe.normalized=!1,xe.type=xe.buffer.dtype,xe.offset=0,xe.stride=0,xe.divisor=0,xe.state=1,pt[Ve]=1}else Be.getBuffer(Qe)?(xe.buffer=Be.getBuffer(Qe),xe.size=xe.buffer.dimension|0,xe.normalized=!1,xe.type=xe.buffer.dtype,xe.offset=0,xe.stride=0,xe.divisor=0,xe.state=1):Be.getBuffer(Qe.buffer)?(xe.buffer=Be.getBuffer(Qe.buffer),xe.size=(+Qe.size||xe.buffer.dimension)|0,xe.normalized=!!Qe.normalized||!1,"type"in Qe?(L.parameter(Qe.type,HA,"invalid buffer type"),xe.type=HA[Qe.type]):xe.type=xe.buffer.dtype,xe.offset=(Qe.offset||0)|0,xe.stride=(Qe.stride||0)|0,xe.divisor=(Qe.divisor||0)|0,xe.state=1,L(xe.size>=1&&xe.size<=4,"size must be between 1 and 4"),L(xe.offset>=0,"invalid offset"),L(xe.stride>=0&&xe.stride<=255,"stride must be between 0 and 255"),L(xe.divisor>=0,"divisor must be positive"),L(!xe.divisor||!!H.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Qe?(L(Ve>0,"first attribute must not be a constant"),xe.x=+Qe.x||0,xe.y=+Qe.y||0,xe.z=+Qe.z||0,xe.w=+Qe.w||0,xe.state=2):L(!1,"invalid attribute spec for location "+Ve)}for(var it=0;it<je.buffers.length;++it)!pt[it]&&je.buffers[it]&&(je.buffers[it].destroy(),je.buffers[it]=null);return je.refresh(),_e}return _e.destroy=function(){for(var $e=0;$e<je.buffers.length;++$e)je.buffers[$e]&&je.buffers[$e].destroy();je.buffers.length=0,je.destroy()},_e._vao=je,_e._reglType="vao",_e(Se)}return De}var cx=35632,q4=35633,J4=35718,e3=35721;function t3(T,H,$,le){var Be={},fe={};function he(oe,de,ke,Ye){this.name=oe,this.id=de,this.location=ke,this.info=Ye}function Ie(oe,de){for(var ke=0;ke<oe.length;++ke)if(oe[ke].id===de.id){oe[ke].location=de.location;return}oe.push(de)}function Le(oe,de,ke){var Ye=oe===cx?Be:fe,Ce=Ye[de];if(!Ce){var rt=H.str(de);Ce=T.createShader(oe),T.shaderSource(Ce,rt),T.compileShader(Ce),L.shaderError(T,Ce,rt,oe,ke),Ye[de]=Ce}return Ce}var Pe={},De=[],He=0;function We(oe,de){this.id=He++,this.fragId=oe,this.vertId=de,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,le.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Te(oe,de,ke){var Ye,Ce,rt=Le(cx,oe.fragId),Se=Le(q4,oe.vertId),je=oe.program=T.createProgram();if(T.attachShader(je,rt),T.attachShader(je,Se),ke)for(Ye=0;Ye<ke.length;++Ye){var _e=ke[Ye];T.bindAttribLocation(je,_e[0],_e[1])}T.linkProgram(je),L.linkError(T,je,H.str(oe.fragId),H.str(oe.vertId),de);var $e=T.getProgramParameter(je,J4);le.profile&&(oe.stats.uniformsCount=$e);var pt=oe.uniforms;for(Ye=0;Ye<$e;++Ye)if(Ce=T.getActiveUniform(je,Ye),Ce)if(Ce.size>1)for(var Tt=0;Tt<Ce.size;++Tt){var Ve=Ce.name.replace("[0]","["+Tt+"]");Ie(pt,new he(Ve,H.id(Ve),T.getUniformLocation(je,Ve),Ce))}else Ie(pt,new he(Ce.name,H.id(Ce.name),T.getUniformLocation(je,Ce.name),Ce));var Qe=T.getProgramParameter(je,e3);le.profile&&(oe.stats.attributesCount=Qe);var xe=oe.attributes;for(Ye=0;Ye<Qe;++Ye)Ce=T.getActiveAttrib(je,Ye),Ce&&Ie(xe,new he(Ce.name,H.id(Ce.name),T.getAttribLocation(je,Ce.name),Ce))}le.profile&&($.getMaxUniformsCount=function(){var oe=0;return De.forEach(function(de){de.stats.uniformsCount>oe&&(oe=de.stats.uniformsCount)}),oe},$.getMaxAttributesCount=function(){var oe=0;return De.forEach(function(de){de.stats.attributesCount>oe&&(oe=de.stats.attributesCount)}),oe});function Ge(){Be={},fe={};for(var oe=0;oe<De.length;++oe)Te(De[oe],null,De[oe].attributes.map(function(de){return[de.location,de.name]}))}return{clear:function(){var oe=T.deleteShader.bind(T);pa(Be).forEach(oe),Be={},pa(fe).forEach(oe),fe={},De.forEach(function(de){T.deleteProgram(de.program)}),De.length=0,Pe={},$.shaderCount=0},program:function(oe,de,ke,Ye){L.command(oe>=0,"missing vertex shader",ke),L.command(de>=0,"missing fragment shader",ke);var Ce=Pe[de];Ce||(Ce=Pe[de]={});var rt=Ce[oe];if(rt&&(rt.refCount++,!Ye))return rt;var Se=new We(de,oe);return $.shaderCount++,Te(Se,ke,Ye),rt||(Ce[oe]=Se),De.push(Se),n(Se,{destroy:function(){if(Se.refCount--,Se.refCount<=0){T.deleteProgram(Se.program);var je=De.indexOf(Se);De.splice(je,1),$.shaderCount--}Ce[Se.vertId].refCount<=0&&(T.deleteShader(fe[Se.vertId]),delete fe[Se.vertId],delete Pe[Se.fragId][Se.vertId]),Object.keys(Pe[Se.fragId]).length||(T.deleteShader(Be[Se.fragId]),delete Be[Se.fragId],delete Pe[Se.fragId])}})},restore:Ge,shader:Le,frag:-1,vert:-1}}var r3=6408,_f=5121,n3=3333,dh=5126;function a3(T,H,$,le,Be,fe,he){function Ie(De){var He;H.next===null?(L(Be.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),He=_f):(L(H.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),He=H.next.colorAttachments[0].texture._texture.type,fe.oes_texture_float?(L(He===_f||He===dh,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),He===dh&&L(he.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):L(He===_f,"Reading from a framebuffer is only allowed for the type 'uint8'"));var We=0,Te=0,Ge=le.framebufferWidth,oe=le.framebufferHeight,de=null;t(De)?de=De:De&&(L.type(De,"object","invalid arguments to regl.read()"),We=De.x|0,Te=De.y|0,L(We>=0&&We<le.framebufferWidth,"invalid x offset for regl.read"),L(Te>=0&&Te<le.framebufferHeight,"invalid y offset for regl.read"),Ge=(De.width||le.framebufferWidth-We)|0,oe=(De.height||le.framebufferHeight-Te)|0,de=De.data||null),de&&(He===_f?L(de instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):He===dh&&L(de instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),L(Ge>0&&Ge+We<=le.framebufferWidth,"invalid width for read pixels"),L(oe>0&&oe+Te<=le.framebufferHeight,"invalid height for read pixels"),$();var ke=Ge*oe*4;return de||(He===_f?de=new Uint8Array(ke):He===dh&&(de=de||new Float32Array(ke))),L.isTypedArray(de,"data buffer for regl.read() must be a typedarray"),L(de.byteLength>=ke,"data buffer for regl.read() too small"),T.pixelStorei(n3,4),T.readPixels(We,Te,Ge,oe,r3,He,de),de}function Le(De){var He;return H.setFBO({framebuffer:De.framebuffer},function(){He=Ie(De)}),He}function Pe(De){return!De||!("framebuffer"in De)?Ie(De):Le(De)}return Pe}function Ys(T){return Array.prototype.slice.call(T)}function Zs(T){return Ys(T).join("")}function i3(){var T=0,H=[],$=[];function le(He){for(var We=0;We<$.length;++We)if($[We]===He)return H[We];var Te="g"+T++;return H.push(Te),$.push(He),Te}function Be(){var He=[];function We(){He.push.apply(He,Ys(arguments))}var Te=[];function Ge(){var oe="v"+T++;return Te.push(oe),arguments.length>0&&(He.push(oe,"="),He.push.apply(He,Ys(arguments)),He.push(";")),oe}return n(We,{def:Ge,toString:function(){return Zs([Te.length>0?"var "+Te.join(",")+";":"",Zs(He)])}})}function fe(){var He=Be(),We=Be(),Te=He.toString,Ge=We.toString;function oe(de,ke){We(de,ke,"=",He.def(de,ke),";")}return n(function(){He.apply(He,Ys(arguments))},{def:He.def,entry:He,exit:We,save:oe,set:function(de,ke,Ye){oe(de,ke),He(de,ke,"=",Ye,";")},toString:function(){return Te()+Ge()}})}function he(){var He=Zs(arguments),We=fe(),Te=fe(),Ge=We.toString,oe=Te.toString;return n(We,{then:function(){return We.apply(We,Ys(arguments)),this},else:function(){return Te.apply(Te,Ys(arguments)),this},toString:function(){var de=oe();return de&&(de="else{"+de+"}"),Zs(["if(",He,"){",Ge(),"}",de])}})}var Ie=Be(),Le={};function Pe(He,We){var Te=[];function Ge(){var Ce="a"+Te.length;return Te.push(Ce),Ce}We=We||0;for(var oe=0;oe<We;++oe)Ge();var de=fe(),ke=de.toString,Ye=Le[He]=n(de,{arg:Ge,toString:function(){return Zs(["function(",Te.join(),"){",ke(),"}"])}});return Ye}function De(){var He=['"use strict";',Ie,"return {"];Object.keys(Le).forEach(function(Ge){He.push('"',Ge,'":',Le[Ge].toString(),",")}),He.push("}");var We=Zs(He).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Te=Function.apply(null,H.concat(We));return Te.apply(null,$)}return{global:Ie,link:le,block:Be,proc:Pe,scope:fe,cond:he,compile:De}}var qs="xyzw".split(""),hx=5121,Js=1,x0=2,C0=0,_0=1,S0=2,M0=3,vh=4,dx=5,vx=6,gx="dither",px="blend.enable",yx="blend.color",I0="blend.equation",T0="blend.func",mx="depth.enable",wx="depth.func",Bx="depth.range",Ex="depth.mask",F0="colorMask",bx="cull.enable",xx="cull.face",L0="frontFace",D0="lineWidth",Cx="polygonOffset.enable",O0="polygonOffset.offset",_x="sample.alpha",Sx="sample.enable",U0="sample.coverage",Mx="stencil.enable",Ix="stencil.mask",N0="stencil.func",k0="stencil.opFront",Sf="stencil.opBack",Tx="scissor.enable",gh="scissor.box",ho="viewport",Mf="profile",$A="framebuffer",If="vert",Tf="frag",WA="elements",VA="primitive",XA="count",ph="offset",yh="instances",Ff="vao",P0="Width",Q0="Height",eu=$A+P0,tu=$A+Q0,o3=ho+P0,A3=ho+Q0,Fx="drawingBuffer",Lx=Fx+P0,Dx=Fx+Q0,s3=[T0,I0,N0,k0,Sf,U0,ho,gh,O0],ru=34962,u3=34963,f3=35632,l3=35633,Ox=3553,c3=34067,h3=2884,d3=3042,v3=3024,g3=2960,p3=2929,y3=3089,m3=32823,w3=32926,B3=32928,R0=5126,mh=35664,wh=35665,Bh=35666,H0=5124,Eh=35667,bh=35668,xh=35669,G0=35670,Ch=35671,_h=35672,Sh=35673,Lf=35674,Df=35675,Of=35676,Uf=35678,Nf=35680,Ux=4,kf=1028,YA=1029,Nx=2304,z0=2305,E3=32775,b3=32776,x3=519,$o=7680,kx=0,Px=1,Qx=32774,C3=513,Rx=36160,_3=36064,xi={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Hx=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],nu={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Wo={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Gx={frag:f3,vert:l3},K0={cw:Nx,ccw:z0};function Mh(T){return Array.isArray(T)||t(T)||Ja(T)}function zx(T){return T.sort(function(H,$){return H===ho?-1:$===ho?1:H<$?-1:1})}function Xn(T,H,$,le){this.thisDep=T,this.contextDep=H,this.propDep=$,this.append=le}function Vo(T){return T&&!(T.thisDep||T.contextDep||T.propDep)}function $r(T){return new Xn(!1,!1,!1,T)}function ta(T,H){var $=T.type;if($===C0){var le=T.data.length;return new Xn(!0,le>=1,le>=2,H)}else if($===vh){var Be=T.data;return new Xn(Be.thisDep,Be.contextDep,Be.propDep,H)}else{if($===dx)return new Xn(!1,!1,!1,H);if($===vx){for(var fe=!1,he=!1,Ie=!1,Le=0;Le<T.data.length;++Le){var Pe=T.data[Le];if(Pe.type===_0)Ie=!0;else if(Pe.type===S0)he=!0;else if(Pe.type===M0)fe=!0;else if(Pe.type===C0){fe=!0;var De=Pe.data;De>=1&&(he=!0),De>=2&&(Ie=!0)}else Pe.type===vh&&(fe=fe||Pe.data.thisDep,he=he||Pe.data.contextDep,Ie=Ie||Pe.data.propDep)}return new Xn(fe,he,Ie,H)}else return new Xn($===M0,$===S0,$===_0,H)}}var Kx=new Xn(!1,!1,!1,function(){});function S3(T,H,$,le,Be,fe,he,Ie,Le,Pe,De,He,We,Te,Ge){var oe=Pe.Record,de={add:32774,subtract:32778,"reverse subtract":32779};$.ext_blend_minmax&&(de.min=E3,de.max=b3);var ke=$.angle_instanced_arrays,Ye=$.webgl_draw_buffers,Ce={dirty:!0,profile:Ge.profile},rt={},Se=[],je={},_e={};function $e(z){return z.replace(".","_")}function pt(z,k,V){var ie=$e(z);Se.push(z),rt[ie]=Ce[ie]=!!V,je[ie]=k}function Tt(z,k,V){var ie=$e(z);Se.push(z),Array.isArray(V)?(Ce[ie]=V.slice(),rt[ie]=V.slice()):Ce[ie]=rt[ie]=V,_e[ie]=k}pt(gx,v3),pt(px,d3),Tt(yx,"blendColor",[0,0,0,0]),Tt(I0,"blendEquationSeparate",[Qx,Qx]),Tt(T0,"blendFuncSeparate",[Px,kx,Px,kx]),pt(mx,p3,!0),Tt(wx,"depthFunc",C3),Tt(Bx,"depthRange",[0,1]),Tt(Ex,"depthMask",!0),Tt(F0,F0,[!0,!0,!0,!0]),pt(bx,h3),Tt(xx,"cullFace",YA),Tt(L0,L0,z0),Tt(D0,D0,1),pt(Cx,m3),Tt(O0,"polygonOffset",[0,0]),pt(_x,w3),pt(Sx,B3),Tt(U0,"sampleCoverage",[1,!1]),pt(Mx,g3),Tt(Ix,"stencilMask",-1),Tt(N0,"stencilFunc",[x3,0,-1]),Tt(k0,"stencilOpSeparate",[kf,$o,$o,$o]),Tt(Sf,"stencilOpSeparate",[YA,$o,$o,$o]),pt(Tx,y3),Tt(gh,"scissor",[0,0,T.drawingBufferWidth,T.drawingBufferHeight]),Tt(ho,ho,[0,0,T.drawingBufferWidth,T.drawingBufferHeight]);var Ve={gl:T,context:We,strings:H,next:rt,current:Ce,draw:He,elements:fe,buffer:Be,shader:De,attributes:Pe.state,vao:Pe,uniforms:Le,framebuffer:Ie,extensions:$,timer:Te,isBufferArgs:Mh},Qe={primTypes:Gs,compareFuncs:nu,blendFuncs:xi,blendEquations:de,stencilOps:Wo,glTypes:HA,orientationType:K0};L.optional(function(){Ve.isArrayLike=Rr}),Ye&&(Qe.backBuffer=[YA],Qe.drawBuffer=An(le.maxDrawbuffers,function(z){return z===0?[0]:An(z,function(k){return _3+k})}));var xe=0;function Mt(){var z=i3(),k=z.link,V=z.global;z.id=xe++,z.batchId="0";var ie=k(Ve),Ae=z.shared={props:"a0"};Object.keys(Ve).forEach(function(W){Ae[W]=V.def(ie,".",W)}),L.optional(function(){z.CHECK=k(L),z.commandStr=L.guessCommand(),z.command=k(z.commandStr),z.assert=function(W,G,ne){W("if(!(",G,"))",this.CHECK,".commandRaise(",k(ne),",",this.command,");")},Qe.invalidBlendCombinations=Hx});var Z=z.next={},Y=z.current={};Object.keys(_e).forEach(function(W){Array.isArray(Ce[W])&&(Z[W]=V.def(Ae.next,".",W),Y[W]=V.def(Ae.current,".",W))});var te=z.constants={};Object.keys(Qe).forEach(function(W){te[W]=V.def(JSON.stringify(Qe[W]))}),z.invoke=function(W,G){switch(G.type){case C0:var ne=["this",Ae.context,Ae.props,z.batchId];return W.def(k(G.data),".call(",ne.slice(0,Math.max(G.data.length+1,4)),")");case _0:return W.def(Ae.props,G.data);case S0:return W.def(Ae.context,G.data);case M0:return W.def("this",G.data);case vh:return G.data.append(z,W),G.data.ref;case dx:return G.data.toString();case vx:return G.data.map(function(se){return z.invoke(W,se)})}},z.attribCache={};var K={};return z.scopeAttrib=function(W){var G=H.id(W);if(G in K)return K[G];var ne=Pe.scope[G];ne||(ne=Pe.scope[G]=new oe);var se=K[G]=k(ne);return se},z}function Nt(z){var k=z.static,V=z.dynamic,ie;if(Mf in k){var Ae=!!k[Mf];ie=$r(function(Y,te){return Ae}),ie.enable=Ae}else if(Mf in V){var Z=V[Mf];ie=ta(Z,function(Y,te){return Y.invoke(te,Z)})}return ie}function it(z,k){var V=z.static,ie=z.dynamic;if($A in V){var Ae=V[$A];return Ae?(Ae=Ie.getFramebuffer(Ae),L.command(Ae,"invalid framebuffer object"),$r(function(Y,te){var K=Y.link(Ae),W=Y.shared;te.set(W.framebuffer,".next",K);var G=W.context;return te.set(G,"."+eu,K+".width"),te.set(G,"."+tu,K+".height"),K})):$r(function(Y,te){var K=Y.shared;te.set(K.framebuffer,".next","null");var W=K.context;return te.set(W,"."+eu,W+"."+Lx),te.set(W,"."+tu,W+"."+Dx),"null"})}else if($A in ie){var Z=ie[$A];return ta(Z,function(Y,te){var K=Y.invoke(te,Z),W=Y.shared,G=W.framebuffer,ne=te.def(G,".getFramebuffer(",K,")");L.optional(function(){Y.assert(te,"!"+K+"||"+ne,"invalid framebuffer object")}),te.set(G,".next",ne);var se=W.context;return te.set(se,"."+eu,ne+"?"+ne+".width:"+se+"."+Lx),te.set(se,"."+tu,ne+"?"+ne+".height:"+se+"."+Dx),ne})}else return null}function Gt(z,k,V){var ie=z.static,Ae=z.dynamic;function Z(K){if(K in ie){var W=ie[K];L.commandType(W,"object","invalid "+K,V.commandStr);var G=!0,ne=W.x|0,se=W.y|0,me,Ee;return"width"in W?(me=W.width|0,L.command(me>=0,"invalid "+K,V.commandStr)):G=!1,"height"in W?(Ee=W.height|0,L.command(Ee>=0,"invalid "+K,V.commandStr)):G=!1,new Xn(!G&&k&&k.thisDep,!G&&k&&k.contextDep,!G&&k&&k.propDep,function(ft,Pt){var ot=ft.shared.context,xt=me;"width"in W||(xt=Pt.def(ot,".",eu,"-",ne));var Dt=Ee;return"height"in W||(Dt=Pt.def(ot,".",tu,"-",se)),[ne,se,xt,Dt]})}else if(K in Ae){var ge=Ae[K],Ue=ta(ge,function(ft,Pt){var ot=ft.invoke(Pt,ge);L.optional(function(){ft.assert(Pt,ot+"&&typeof "+ot+'==="object"',"invalid "+K)});var xt=ft.shared.context,Dt=Pt.def(ot,".x|0"),ir=Pt.def(ot,".y|0"),Dr=Pt.def('"width" in ',ot,"?",ot,".width|0:","(",xt,".",eu,"-",Dt,")"),Yn=Pt.def('"height" in ',ot,"?",ot,".height|0:","(",xt,".",tu,"-",ir,")");return L.optional(function(){ft.assert(Pt,Dr+">=0&&"+Yn+">=0","invalid "+K)}),[Dt,ir,Dr,Yn]});return k&&(Ue.thisDep=Ue.thisDep||k.thisDep,Ue.contextDep=Ue.contextDep||k.contextDep,Ue.propDep=Ue.propDep||k.propDep),Ue}else return k?new Xn(k.thisDep,k.contextDep,k.propDep,function(ft,Pt){var ot=ft.shared.context;return[0,0,Pt.def(ot,".",eu),Pt.def(ot,".",tu)]}):null}var Y=Z(ho);if(Y){var te=Y;Y=new Xn(Y.thisDep,Y.contextDep,Y.propDep,function(K,W){var G=te.append(K,W),ne=K.shared.context;return W.set(ne,"."+o3,G[2]),W.set(ne,"."+A3,G[3]),G})}return{viewport:Y,scissor_box:Z(gh)}}function Ft(z,k){var V=z.static,ie=typeof V[Tf]=="string"&&typeof V[If]=="string";if(ie){if(Object.keys(k.dynamic).length>0)return null;var Ae=k.static,Z=Object.keys(Ae);if(Z.length>0&&typeof Ae[Z[0]]=="number"){for(var Y=[],te=0;te<Z.length;++te)L(typeof Ae[Z[te]]=="number","must specify all vertex attribute locations when using vaos"),Y.push([Ae[Z[te]]|0,Z[te]]);return Y}}return null}function Rt(z,k,V){var ie=z.static,Ae=z.dynamic;function Z(G){if(G in ie){var ne=H.id(ie[G]);L.optional(function(){De.shader(Gx[G],ne,L.guessCommand())});var se=$r(function(){return ne});return se.id=ne,se}else if(G in Ae){var me=Ae[G];return ta(me,function(Ee,ge){var Ue=Ee.invoke(ge,me),ft=ge.def(Ee.shared.strings,".id(",Ue,")");return L.optional(function(){ge(Ee.shared.shader,".shader(",Gx[G],",",ft,",",Ee.command,");")}),ft})}return null}var Y=Z(Tf),te=Z(If),K=null,W;return Vo(Y)&&Vo(te)?(K=De.program(te.id,Y.id,null,V),W=$r(function(G,ne){return G.link(K)})):W=new Xn(Y&&Y.thisDep||te&&te.thisDep,Y&&Y.contextDep||te&&te.contextDep,Y&&Y.propDep||te&&te.propDep,function(G,ne){var se=G.shared.shader,me;Y?me=Y.append(G,ne):me=ne.def(se,".",Tf);var Ee;te?Ee=te.append(G,ne):Ee=ne.def(se,".",If);var ge=se+".program("+Ee+","+me;return L.optional(function(){ge+=","+G.command}),ne.def(ge+")")}),{frag:Y,vert:te,progVar:W,program:K}}function ar(z,k){var V=z.static,ie=z.dynamic;function Ae(){if(WA in V){var G=V[WA];Mh(G)?G=fe.getElements(fe.create(G,!0)):G&&(G=fe.getElements(G),L.command(G,"invalid elements",k.commandStr));var ne=$r(function(me,Ee){if(G){var ge=me.link(G);return me.ELEMENTS=ge,ge}return me.ELEMENTS=null,null});return ne.value=G,ne}else if(WA in ie){var se=ie[WA];return ta(se,function(me,Ee){var ge=me.shared,Ue=ge.isBufferArgs,ft=ge.elements,Pt=me.invoke(Ee,se),ot=Ee.def("null"),xt=Ee.def(Ue,"(",Pt,")"),Dt=me.cond(xt).then(ot,"=",ft,".createStream(",Pt,");").else(ot,"=",ft,".getElements(",Pt,");");return L.optional(function(){me.assert(Dt.else,"!"+Pt+"||"+ot,"invalid elements")}),Ee.entry(Dt),Ee.exit(me.cond(xt).then(ft,".destroyStream(",ot,");")),me.ELEMENTS=ot,ot})}return null}var Z=Ae();function Y(){if(VA in V){var G=V[VA];return L.commandParameter(G,Gs,"invalid primitve",k.commandStr),$r(function(se,me){return Gs[G]})}else if(VA in ie){var ne=ie[VA];return ta(ne,function(se,me){var Ee=se.constants.primTypes,ge=se.invoke(me,ne);return L.optional(function(){se.assert(me,ge+" in "+Ee,"invalid primitive, must be one of "+Object.keys(Gs))}),me.def(Ee,"[",ge,"]")})}else if(Z)return Vo(Z)?Z.value?$r(function(se,me){return me.def(se.ELEMENTS,".primType")}):$r(function(){return Ux}):new Xn(Z.thisDep,Z.contextDep,Z.propDep,function(se,me){var Ee=se.ELEMENTS;return me.def(Ee,"?",Ee,".primType:",Ux)});return null}function te(G,ne){if(G in V){var se=V[G]|0;return L.command(!ne||se>=0,"invalid "+G,k.commandStr),$r(function(Ee,ge){return ne&&(Ee.OFFSET=se),se})}else if(G in ie){var me=ie[G];return ta(me,function(Ee,ge){var Ue=Ee.invoke(ge,me);return ne&&(Ee.OFFSET=Ue,L.optional(function(){Ee.assert(ge,Ue+">=0","invalid "+G)})),Ue})}else if(ne&&Z)return $r(function(Ee,ge){return Ee.OFFSET="0",0});return null}var K=te(ph,!0);function W(){if(XA in V){var G=V[XA]|0;return L.command(typeof G=="number"&&G>=0,"invalid vertex count",k.commandStr),$r(function(){return G})}else if(XA in ie){var ne=ie[XA];return ta(ne,function(Ee,ge){var Ue=Ee.invoke(ge,ne);return L.optional(function(){Ee.assert(ge,"typeof "+Ue+'==="number"&&'+Ue+">=0&&"+Ue+"===("+Ue+"|0)","invalid vertex count")}),Ue})}else if(Z)if(Vo(Z)){if(Z)return K?new Xn(K.thisDep,K.contextDep,K.propDep,function(Ee,ge){var Ue=ge.def(Ee.ELEMENTS,".vertCount-",Ee.OFFSET);return L.optional(function(){Ee.assert(ge,Ue+">=0","invalid vertex offset/element buffer too small")}),Ue}):$r(function(Ee,ge){return ge.def(Ee.ELEMENTS,".vertCount")});var se=$r(function(){return-1});return L.optional(function(){se.MISSING=!0}),se}else{var me=new Xn(Z.thisDep||K.thisDep,Z.contextDep||K.contextDep,Z.propDep||K.propDep,function(Ee,ge){var Ue=Ee.ELEMENTS;return Ee.OFFSET?ge.def(Ue,"?",Ue,".vertCount-",Ee.OFFSET,":-1"):ge.def(Ue,"?",Ue,".vertCount:-1")});return L.optional(function(){me.DYNAMIC=!0}),me}return null}return{elements:Z,primitive:Y(),count:W(),instances:te(yh,!1),offset:K}}function Wr(z,k){var V=z.static,ie=z.dynamic,Ae={};return Se.forEach(function(Z){var Y=$e(Z);function te(K,W){if(Z in V){var G=K(V[Z]);Ae[Y]=$r(function(){return G})}else if(Z in ie){var ne=ie[Z];Ae[Y]=ta(ne,function(se,me){return W(se,me,se.invoke(me,ne))})}}switch(Z){case bx:case px:case gx:case Mx:case mx:case Tx:case Cx:case _x:case Sx:case Ex:return te(function(K){return L.commandType(K,"boolean",Z,k.commandStr),K},function(K,W,G){return L.optional(function(){K.assert(W,"typeof "+G+'==="boolean"',"invalid flag "+Z,K.commandStr)}),G});case wx:return te(function(K){return L.commandParameter(K,nu,"invalid "+Z,k.commandStr),nu[K]},function(K,W,G){var ne=K.constants.compareFuncs;return L.optional(function(){K.assert(W,G+" in "+ne,"invalid "+Z+", must be one of "+Object.keys(nu))}),W.def(ne,"[",G,"]")});case Bx:return te(function(K){return L.command(Rr(K)&&K.length===2&&typeof K[0]=="number"&&typeof K[1]=="number"&&K[0]<=K[1],"depth range is 2d array",k.commandStr),K},function(K,W,G){L.optional(function(){K.assert(W,K.shared.isArrayLike+"("+G+")&&"+G+".length===2&&typeof "+G+'[0]==="number"&&typeof '+G+'[1]==="number"&&'+G+"[0]<="+G+"[1]","depth range must be a 2d array")});var ne=W.def("+",G,"[0]"),se=W.def("+",G,"[1]");return[ne,se]});case T0:return te(function(K){L.commandType(K,"object","blend.func",k.commandStr);var W="srcRGB"in K?K.srcRGB:K.src,G="srcAlpha"in K?K.srcAlpha:K.src,ne="dstRGB"in K?K.dstRGB:K.dst,se="dstAlpha"in K?K.dstAlpha:K.dst;return L.commandParameter(W,xi,Y+".srcRGB",k.commandStr),L.commandParameter(G,xi,Y+".srcAlpha",k.commandStr),L.commandParameter(ne,xi,Y+".dstRGB",k.commandStr),L.commandParameter(se,xi,Y+".dstAlpha",k.commandStr),L.command(Hx.indexOf(W+", "+ne)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+W+", "+ne+")",k.commandStr),[xi[W],xi[ne],xi[G],xi[se]]},function(K,W,G){var ne=K.constants.blendFuncs;L.optional(function(){K.assert(W,G+"&&typeof "+G+'==="object"',"invalid blend func, must be an object")});function se(ot,xt){var Dt=W.def('"',ot,xt,'" in ',G,"?",G,".",ot,xt,":",G,".",ot);return L.optional(function(){K.assert(W,Dt+" in "+ne,"invalid "+Z+"."+ot+xt+", must be one of "+Object.keys(xi))}),Dt}var me=se("src","RGB"),Ee=se("dst","RGB");L.optional(function(){var ot=K.constants.invalidBlendCombinations;K.assert(W,ot+".indexOf("+me+'+", "+'+Ee+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var ge=W.def(ne,"[",me,"]"),Ue=W.def(ne,"[",se("src","Alpha"),"]"),ft=W.def(ne,"[",Ee,"]"),Pt=W.def(ne,"[",se("dst","Alpha"),"]");return[ge,ft,Ue,Pt]});case I0:return te(function(K){if(typeof K=="string")return L.commandParameter(K,de,"invalid "+Z,k.commandStr),[de[K],de[K]];if(typeof K=="object")return L.commandParameter(K.rgb,de,Z+".rgb",k.commandStr),L.commandParameter(K.alpha,de,Z+".alpha",k.commandStr),[de[K.rgb],de[K.alpha]];L.commandRaise("invalid blend.equation",k.commandStr)},function(K,W,G){var ne=K.constants.blendEquations,se=W.def(),me=W.def(),Ee=K.cond("typeof ",G,'==="string"');return L.optional(function(){function ge(Ue,ft,Pt){K.assert(Ue,Pt+" in "+ne,"invalid "+ft+", must be one of "+Object.keys(de))}ge(Ee.then,Z,G),K.assert(Ee.else,G+"&&typeof "+G+'==="object"',"invalid "+Z),ge(Ee.else,Z+".rgb",G+".rgb"),ge(Ee.else,Z+".alpha",G+".alpha")}),Ee.then(se,"=",me,"=",ne,"[",G,"];"),Ee.else(se,"=",ne,"[",G,".rgb];",me,"=",ne,"[",G,".alpha];"),W(Ee),[se,me]});case yx:return te(function(K){return L.command(Rr(K)&&K.length===4,"blend.color must be a 4d array",k.commandStr),An(4,function(W){return+K[W]})},function(K,W,G){return L.optional(function(){K.assert(W,K.shared.isArrayLike+"("+G+")&&"+G+".length===4","blend.color must be a 4d array")}),An(4,function(ne){return W.def("+",G,"[",ne,"]")})});case Ix:return te(function(K){return L.commandType(K,"number",Y,k.commandStr),K|0},function(K,W,G){return L.optional(function(){K.assert(W,"typeof "+G+'==="number"',"invalid stencil.mask")}),W.def(G,"|0")});case N0:return te(function(K){L.commandType(K,"object",Y,k.commandStr);var W=K.cmp||"keep",G=K.ref||0,ne="mask"in K?K.mask:-1;return L.commandParameter(W,nu,Z+".cmp",k.commandStr),L.commandType(G,"number",Z+".ref",k.commandStr),L.commandType(ne,"number",Z+".mask",k.commandStr),[nu[W],G,ne]},function(K,W,G){var ne=K.constants.compareFuncs;L.optional(function(){function ge(){K.assert(W,Array.prototype.join.call(arguments,""),"invalid stencil.func")}ge(G+"&&typeof ",G,'==="object"'),ge('!("cmp" in ',G,")||(",G,".cmp in ",ne,")")});var se=W.def('"cmp" in ',G,"?",ne,"[",G,".cmp]",":",$o),me=W.def(G,".ref|0"),Ee=W.def('"mask" in ',G,"?",G,".mask|0:-1");return[se,me,Ee]});case k0:case Sf:return te(function(K){L.commandType(K,"object",Y,k.commandStr);var W=K.fail||"keep",G=K.zfail||"keep",ne=K.zpass||"keep";return L.commandParameter(W,Wo,Z+".fail",k.commandStr),L.commandParameter(G,Wo,Z+".zfail",k.commandStr),L.commandParameter(ne,Wo,Z+".zpass",k.commandStr),[Z===Sf?YA:kf,Wo[W],Wo[G],Wo[ne]]},function(K,W,G){var ne=K.constants.stencilOps;L.optional(function(){K.assert(W,G+"&&typeof "+G+'==="object"',"invalid "+Z)});function se(me){return L.optional(function(){K.assert(W,'!("'+me+'" in '+G+")||("+G+"."+me+" in "+ne+")","invalid "+Z+"."+me+", must be one of "+Object.keys(Wo))}),W.def('"',me,'" in ',G,"?",ne,"[",G,".",me,"]:",$o)}return[Z===Sf?YA:kf,se("fail"),se("zfail"),se("zpass")]});case O0:return te(function(K){L.commandType(K,"object",Y,k.commandStr);var W=K.factor|0,G=K.units|0;return L.commandType(W,"number",Y+".factor",k.commandStr),L.commandType(G,"number",Y+".units",k.commandStr),[W,G]},function(K,W,G){L.optional(function(){K.assert(W,G+"&&typeof "+G+'==="object"',"invalid "+Z)});var ne=W.def(G,".factor|0"),se=W.def(G,".units|0");return[ne,se]});case xx:return te(function(K){var W=0;return K==="front"?W=kf:K==="back"&&(W=YA),L.command(!!W,Y,k.commandStr),W},function(K,W,G){return L.optional(function(){K.assert(W,G+'==="front"||'+G+'==="back"',"invalid cull.face")}),W.def(G,'==="front"?',kf,":",YA)});case D0:return te(function(K){return L.command(typeof K=="number"&&K>=le.lineWidthDims[0]&&K<=le.lineWidthDims[1],"invalid line width, must be a positive number between "+le.lineWidthDims[0]+" and "+le.lineWidthDims[1],k.commandStr),K},function(K,W,G){return L.optional(function(){K.assert(W,"typeof "+G+'==="number"&&'+G+">="+le.lineWidthDims[0]+"&&"+G+"<="+le.lineWidthDims[1],"invalid line width")}),G});case L0:return te(function(K){return L.commandParameter(K,K0,Y,k.commandStr),K0[K]},function(K,W,G){return L.optional(function(){K.assert(W,G+'==="cw"||'+G+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),W.def(G+'==="cw"?'+Nx+":"+z0)});case F0:return te(function(K){return L.command(Rr(K)&&K.length===4,"color.mask must be length 4 array",k.commandStr),K.map(function(W){return!!W})},function(K,W,G){return L.optional(function(){K.assert(W,K.shared.isArrayLike+"("+G+")&&"+G+".length===4","invalid color.mask")}),An(4,function(ne){return"!!"+G+"["+ne+"]"})});case U0:return te(function(K){L.command(typeof K=="object"&&K,Y,k.commandStr);var W="value"in K?K.value:1,G=!!K.invert;return L.command(typeof W=="number"&&W>=0&&W<=1,"sample.coverage.value must be a number between 0 and 1",k.commandStr),[W,G]},function(K,W,G){L.optional(function(){K.assert(W,G+"&&typeof "+G+'==="object"',"invalid sample.coverage")});var ne=W.def('"value" in ',G,"?+",G,".value:1"),se=W.def("!!",G,".invert");return[ne,se]})}}),Ae}function sn(z,k){var V=z.static,ie=z.dynamic,Ae={};return Object.keys(V).forEach(function(Z){var Y=V[Z],te;if(typeof Y=="number"||typeof Y=="boolean")te=$r(function(){return Y});else if(typeof Y=="function"){var K=Y._reglType;K==="texture2d"||K==="textureCube"?te=$r(function(W){return W.link(Y)}):K==="framebuffer"||K==="framebufferCube"?(L.command(Y.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Z+'"',k.commandStr),te=$r(function(W){return W.link(Y.color[0])})):L.commandRaise('invalid data for uniform "'+Z+'"',k.commandStr)}else Rr(Y)?te=$r(function(W){var G=W.global.def("[",An(Y.length,function(ne){return L.command(typeof Y[ne]=="number"||typeof Y[ne]=="boolean","invalid uniform "+Z,W.commandStr),Y[ne]}),"]");return G}):L.commandRaise('invalid or missing data for uniform "'+Z+'"',k.commandStr);te.value=Y,Ae[Z]=te}),Object.keys(ie).forEach(function(Z){var Y=ie[Z];Ae[Z]=ta(Y,function(te,K){return te.invoke(K,Y)})}),Ae}function $t(z,k){var V=z.static,ie=z.dynamic,Ae={};return Object.keys(V).forEach(function(Z){var Y=V[Z],te=H.id(Z),K=new oe;if(Mh(Y))K.state=Js,K.buffer=Be.getBuffer(Be.create(Y,ru,!1,!0)),K.type=0;else{var W=Be.getBuffer(Y);if(W)K.state=Js,K.buffer=W,K.type=0;else if(L.command(typeof Y=="object"&&Y,"invalid data for attribute "+Z,k.commandStr),"constant"in Y){var G=Y.constant;K.buffer="null",K.state=x0,typeof G=="number"?K.x=G:(L.command(Rr(G)&&G.length>0&&G.length<=4,"invalid constant for attribute "+Z,k.commandStr),qs.forEach(function(ft,Pt){Pt<G.length&&(K[ft]=G[Pt])}))}else{Mh(Y.buffer)?W=Be.getBuffer(Be.create(Y.buffer,ru,!1,!0)):W=Be.getBuffer(Y.buffer),L.command(!!W,'missing buffer for attribute "'+Z+'"',k.commandStr);var ne=Y.offset|0;L.command(ne>=0,'invalid offset for attribute "'+Z+'"',k.commandStr);var se=Y.stride|0;L.command(se>=0&&se<256,'invalid stride for attribute "'+Z+'", must be integer betweeen [0, 255]',k.commandStr);var me=Y.size|0;L.command(!("size"in Y)||me>0&&me<=4,'invalid size for attribute "'+Z+'", must be 1,2,3,4',k.commandStr);var Ee=!!Y.normalized,ge=0;"type"in Y&&(L.commandParameter(Y.type,HA,"invalid type for attribute "+Z,k.commandStr),ge=HA[Y.type]);var Ue=Y.divisor|0;"divisor"in Y&&(L.command(Ue===0||ke,'cannot specify divisor for attribute "'+Z+'", instancing not supported',k.commandStr),L.command(Ue>=0,'invalid divisor for attribute "'+Z+'"',k.commandStr)),L.optional(function(){var ft=k.commandStr,Pt=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Y).forEach(function(ot){L.command(Pt.indexOf(ot)>=0,'unknown parameter "'+ot+'" for attribute pointer "'+Z+'" (valid parameters are '+Pt+")",ft)})}),K.buffer=W,K.state=Js,K.size=me,K.normalized=Ee,K.type=ge||W.dtype,K.offset=ne,K.stride=se,K.divisor=Ue}}Ae[Z]=$r(function(ft,Pt){var ot=ft.attribCache;if(te in ot)return ot[te];var xt={isStream:!1};return Object.keys(K).forEach(function(Dt){xt[Dt]=K[Dt]}),K.buffer&&(xt.buffer=ft.link(K.buffer),xt.type=xt.type||xt.buffer+".dtype"),ot[te]=xt,xt})}),Object.keys(ie).forEach(function(Z){var Y=ie[Z];function te(K,W){var G=K.invoke(W,Y),ne=K.shared,se=K.constants,me=ne.isBufferArgs,Ee=ne.buffer;L.optional(function(){K.assert(W,G+"&&(typeof "+G+'==="object"||typeof '+G+'==="function")&&('+me+"("+G+")||"+Ee+".getBuffer("+G+")||"+Ee+".getBuffer("+G+".buffer)||"+me+"("+G+'.buffer)||("constant" in '+G+"&&(typeof "+G+'.constant==="number"||'+ne.isArrayLike+"("+G+".constant))))",'invalid dynamic attribute "'+Z+'"')});var ge={isStream:W.def(!1)},Ue=new oe;Ue.state=Js,Object.keys(Ue).forEach(function(xt){ge[xt]=W.def(""+Ue[xt])});var ft=ge.buffer,Pt=ge.type;W("if(",me,"(",G,")){",ge.isStream,"=true;",ft,"=",Ee,".createStream(",ru,",",G,");",Pt,"=",ft,".dtype;","}else{",ft,"=",Ee,".getBuffer(",G,");","if(",ft,"){",Pt,"=",ft,".dtype;",'}else if("constant" in ',G,"){",ge.state,"=",x0,";","if(typeof "+G+'.constant === "number"){',ge[qs[0]],"=",G,".constant;",qs.slice(1).map(function(xt){return ge[xt]}).join("="),"=0;","}else{",qs.map(function(xt,Dt){return ge[xt]+"="+G+".constant.length>"+Dt+"?"+G+".constant["+Dt+"]:0;"}).join(""),"}}else{","if(",me,"(",G,".buffer)){",ft,"=",Ee,".createStream(",ru,",",G,".buffer);","}else{",ft,"=",Ee,".getBuffer(",G,".buffer);","}",Pt,'="type" in ',G,"?",se.glTypes,"[",G,".type]:",ft,".dtype;",ge.normalized,"=!!",G,".normalized;");function ot(xt){W(ge[xt],"=",G,".",xt,"|0;")}return ot("size"),ot("offset"),ot("stride"),ot("divisor"),W("}}"),W.exit("if(",ge.isStream,"){",Ee,".destroyStream(",ft,");","}"),ge}Ae[Z]=ta(Y,te)}),Ae}function Jr(z,k){var V=z.static,ie=z.dynamic;if(Ff in V){var Ae=V[Ff];return Ae!==null&&Pe.getVAO(Ae)===null&&(Ae=Pe.createVAO(Ae)),$r(function(Y){return Y.link(Pe.getVAO(Ae))})}else if(Ff in ie){var Z=ie[Ff];return ta(Z,function(Y,te){var K=Y.invoke(te,Z);return te.def(Y.shared.vao+".getVAO("+K+")")})}return null}function Br(z){var k=z.static,V=z.dynamic,ie={};return Object.keys(k).forEach(function(Ae){var Z=k[Ae];ie[Ae]=$r(function(Y,te){return typeof Z=="number"||typeof Z=="boolean"?""+Z:Y.link(Z)})}),Object.keys(V).forEach(function(Ae){var Z=V[Ae];ie[Ae]=ta(Z,function(Y,te){return Y.invoke(te,Z)})}),ie}function Vr(z,k,V,ie,Ae){var Z=z.static,Y=z.dynamic;L.optional(function(){var ot=[$A,If,Tf,WA,VA,ph,XA,yh,Mf,Ff].concat(Se);function xt(Dt){Object.keys(Dt).forEach(function(ir){L.command(ot.indexOf(ir)>=0,'unknown parameter "'+ir+'"',Ae.commandStr)})}xt(Z),xt(Y)});var te=Ft(z,k),K=it(z),W=Gt(z,K,Ae),G=ar(z,Ae),ne=Wr(z,Ae),se=Rt(z,Ae,te);function me(ot){var xt=W[ot];xt&&(ne[ot]=xt)}me(ho),me($e(gh));var Ee=Object.keys(ne).length>0,ge={framebuffer:K,draw:G,shader:se,state:ne,dirty:Ee,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(ge.profile=Nt(z),ge.uniforms=sn(V,Ae),ge.drawVAO=ge.scopeVAO=Jr(z),!ge.drawVAO&&se.program&&!te&&$.angle_instanced_arrays){var Ue=!0,ft=se.program.attributes.map(function(ot){var xt=k.static[ot];return Ue=Ue&&!!xt,xt});if(Ue&&ft.length>0){var Pt=Pe.getVAO(Pe.createVAO(ft));ge.drawVAO=new Xn(null,null,null,function(ot,xt){return ot.link(Pt)}),ge.useVAO=!0}}return te?ge.useVAO=!0:ge.attributes=$t(k,Ae),ge.context=Br(ie),ge}function en(z,k,V){var ie=z.shared,Ae=ie.context,Z=z.scope();Object.keys(V).forEach(function(Y){k.save(Ae,"."+Y);var te=V[Y],K=te.append(z,k);Array.isArray(K)?Z(Ae,".",Y,"=[",K.join(),"];"):Z(Ae,".",Y,"=",K,";")}),k(Z)}function tn(z,k,V,ie){var Ae=z.shared,Z=Ae.gl,Y=Ae.framebuffer,te;Ye&&(te=k.def(Ae.extensions,".webgl_draw_buffers"));var K=z.constants,W=K.drawBuffer,G=K.backBuffer,ne;V?ne=V.append(z,k):ne=k.def(Y,".next"),ie||k("if(",ne,"!==",Y,".cur){"),k("if(",ne,"){",Z,".bindFramebuffer(",Rx,",",ne,".framebuffer);"),Ye&&k(te,".drawBuffersWEBGL(",W,"[",ne,".colorAttachments.length]);"),k("}else{",Z,".bindFramebuffer(",Rx,",null);"),Ye&&k(te,".drawBuffersWEBGL(",G,");"),k("}",Y,".cur=",ne,";"),ie||k("}")}function vn(z,k,V){var ie=z.shared,Ae=ie.gl,Z=z.current,Y=z.next,te=ie.current,K=ie.next,W=z.cond(te,".dirty");Se.forEach(function(G){var ne=$e(G);if(!(ne in V.state)){var se,me;if(ne in Y){se=Y[ne],me=Z[ne];var Ee=An(Ce[ne].length,function(Ue){return W.def(se,"[",Ue,"]")});W(z.cond(Ee.map(function(Ue,ft){return Ue+"!=="+me+"["+ft+"]"}).join("||")).then(Ae,".",_e[ne],"(",Ee,");",Ee.map(function(Ue,ft){return me+"["+ft+"]="+Ue}).join(";"),";"))}else{se=W.def(K,".",ne);var ge=z.cond(se,"!==",te,".",ne);W(ge),ne in je?ge(z.cond(se).then(Ae,".enable(",je[ne],");").else(Ae,".disable(",je[ne],");"),te,".",ne,"=",se,";"):ge(Ae,".",_e[ne],"(",se,");",te,".",ne,"=",se,";")}}}),Object.keys(V.state).length===0&&W(te,".dirty=false;"),k(W)}function Cn(z,k,V,ie){var Ae=z.shared,Z=z.current,Y=Ae.current,te=Ae.gl;zx(Object.keys(V)).forEach(function(K){var W=V[K];if(!(ie&&!ie(W))){var G=W.append(z,k);if(je[K]){var ne=je[K];Vo(W)?G?k(te,".enable(",ne,");"):k(te,".disable(",ne,");"):k(z.cond(G).then(te,".enable(",ne,");").else(te,".disable(",ne,");")),k(Y,".",K,"=",G,";")}else if(Rr(G)){var se=Z[K];k(te,".",_e[K],"(",G,");",G.map(function(me,Ee){return se+"["+Ee+"]="+me}).join(";"),";")}else k(te,".",_e[K],"(",G,");",Y,".",K,"=",G,";")}})}function Hr(z,k){ke&&(z.instancing=k.def(z.shared.extensions,".angle_instanced_arrays"))}function kt(z,k,V,ie,Ae){var Z=z.shared,Y=z.stats,te=Z.current,K=Z.timer,W=V.profile;function G(){return typeof performance>"u"?"Date.now()":"performance.now()"}var ne,se;function me(ot){ne=k.def(),ot(ne,"=",G(),";"),typeof Ae=="string"?ot(Y,".count+=",Ae,";"):ot(Y,".count++;"),Te&&(ie?(se=k.def(),ot(se,"=",K,".getNumPendingQueries();")):ot(K,".beginQuery(",Y,");"))}function Ee(ot){ot(Y,".cpuTime+=",G(),"-",ne,";"),Te&&(ie?ot(K,".pushScopeStats(",se,",",K,".getNumPendingQueries(),",Y,");"):ot(K,".endQuery();"))}function ge(ot){var xt=k.def(te,".profile");k(te,".profile=",ot,";"),k.exit(te,".profile=",xt,";")}var Ue;if(W){if(Vo(W)){W.enable?(me(k),Ee(k.exit),ge("true")):ge("false");return}Ue=W.append(z,k),ge(Ue)}else Ue=k.def(te,".profile");var ft=z.block();me(ft),k("if(",Ue,"){",ft,"}");var Pt=z.block();Ee(Pt),k.exit("if(",Ue,"){",Pt,"}")}function _n(z,k,V,ie,Ae){var Z=z.shared;function Y(K){switch(K){case mh:case Eh:case Ch:return 2;case wh:case bh:case _h:return 3;case Bh:case xh:case Sh:return 4;default:return 1}}function te(K,W,G){var ne=Z.gl,se=k.def(K,".location"),me=k.def(Z.attributes,"[",se,"]"),Ee=G.state,ge=G.buffer,Ue=[G.x,G.y,G.z,G.w],ft=["buffer","normalized","offset","stride"];function Pt(){k("if(!",me,".buffer){",ne,".enableVertexAttribArray(",se,");}");var xt=G.type,Dt;if(G.size?Dt=k.def(G.size,"||",W):Dt=W,k("if(",me,".type!==",xt,"||",me,".size!==",Dt,"||",ft.map(function(Dr){return me+"."+Dr+"!=="+G[Dr]}).join("||"),"){",ne,".bindBuffer(",ru,",",ge,".buffer);",ne,".vertexAttribPointer(",[se,Dt,xt,G.normalized,G.stride,G.offset],");",me,".type=",xt,";",me,".size=",Dt,";",ft.map(function(Dr){return me+"."+Dr+"="+G[Dr]+";"}).join(""),"}"),ke){var ir=G.divisor;k("if(",me,".divisor!==",ir,"){",z.instancing,".vertexAttribDivisorANGLE(",[se,ir],");",me,".divisor=",ir,";}")}}function ot(){k("if(",me,".buffer){",ne,".disableVertexAttribArray(",se,");",me,".buffer=null;","}if(",qs.map(function(xt,Dt){return me+"."+xt+"!=="+Ue[Dt]}).join("||"),"){",ne,".vertexAttrib4f(",se,",",Ue,");",qs.map(function(xt,Dt){return me+"."+xt+"="+Ue[Dt]+";"}).join(""),"}")}Ee===Js?Pt():Ee===x0?ot():(k("if(",Ee,"===",Js,"){"),Pt(),k("}else{"),ot(),k("}"))}ie.forEach(function(K){var W=K.name,G=V.attributes[W],ne;if(G){if(!Ae(G))return;ne=G.append(z,k)}else{if(!Ae(Kx))return;var se=z.scopeAttrib(W);L.optional(function(){z.assert(k,se+".state","missing attribute "+W)}),ne={},Object.keys(new oe).forEach(function(me){ne[me]=k.def(se,".",me)})}te(z.link(K),Y(K.info.type),ne)})}function hr(z,k,V,ie,Ae){for(var Z=z.shared,Y=Z.gl,te,K=0;K<ie.length;++K){var W=ie[K],G=W.name,ne=W.info.type,se=V.uniforms[G],me=z.link(W),Ee=me+".location",ge;if(se){if(!Ae(se))continue;if(Vo(se)){var Ue=se.value;if(L.command(Ue!==null&&typeof Ue<"u",'missing uniform "'+G+'"',z.commandStr),ne===Uf||ne===Nf){L.command(typeof Ue=="function"&&(ne===Uf&&(Ue._reglType==="texture2d"||Ue._reglType==="framebuffer")||ne===Nf&&(Ue._reglType==="textureCube"||Ue._reglType==="framebufferCube")),"invalid texture for uniform "+G,z.commandStr);var ft=z.link(Ue._texture||Ue.color[0]._texture);k(Y,".uniform1i(",Ee,",",ft+".bind());"),k.exit(ft,".unbind();")}else if(ne===Lf||ne===Df||ne===Of){L.optional(function(){L.command(Rr(Ue),"invalid matrix for uniform "+G,z.commandStr),L.command(ne===Lf&&Ue.length===4||ne===Df&&Ue.length===9||ne===Of&&Ue.length===16,"invalid length for matrix uniform "+G,z.commandStr)});var Pt=z.global.def("new Float32Array(["+Array.prototype.slice.call(Ue)+"])"),ot=2;ne===Df?ot=3:ne===Of&&(ot=4),k(Y,".uniformMatrix",ot,"fv(",Ee,",false,",Pt,");")}else{switch(ne){case R0:L.commandType(Ue,"number","uniform "+G,z.commandStr),te="1f";break;case mh:L.command(Rr(Ue)&&Ue.length===2,"uniform "+G,z.commandStr),te="2f";break;case wh:L.command(Rr(Ue)&&Ue.length===3,"uniform "+G,z.commandStr),te="3f";break;case Bh:L.command(Rr(Ue)&&Ue.length===4,"uniform "+G,z.commandStr),te="4f";break;case G0:L.commandType(Ue,"boolean","uniform "+G,z.commandStr),te="1i";break;case H0:L.commandType(Ue,"number","uniform "+G,z.commandStr),te="1i";break;case Ch:L.command(Rr(Ue)&&Ue.length===2,"uniform "+G,z.commandStr),te="2i";break;case Eh:L.command(Rr(Ue)&&Ue.length===2,"uniform "+G,z.commandStr),te="2i";break;case _h:L.command(Rr(Ue)&&Ue.length===3,"uniform "+G,z.commandStr),te="3i";break;case bh:L.command(Rr(Ue)&&Ue.length===3,"uniform "+G,z.commandStr),te="3i";break;case Sh:L.command(Rr(Ue)&&Ue.length===4,"uniform "+G,z.commandStr),te="4i";break;case xh:L.command(Rr(Ue)&&Ue.length===4,"uniform "+G,z.commandStr),te="4i";break}k(Y,".uniform",te,"(",Ee,",",Rr(Ue)?Array.prototype.slice.call(Ue):Ue,");")}continue}else ge=se.append(z,k)}else{if(!Ae(Kx))continue;ge=k.def(Z.uniforms,"[",H.id(G),"]")}ne===Uf?(L(!Array.isArray(ge),"must specify a scalar prop for textures"),k("if(",ge,"&&",ge,'._reglType==="framebuffer"){',ge,"=",ge,".color[0];","}")):ne===Nf&&(L(!Array.isArray(ge),"must specify a scalar prop for cube maps"),k("if(",ge,"&&",ge,'._reglType==="framebufferCube"){',ge,"=",ge,".color[0];","}")),L.optional(function(){function Yn(ti,Zx){z.assert(k,ti,'bad data or missing for uniform "'+G+'".  '+Zx)}function j0(ti){L(!Array.isArray(ge),"must not specify an array type for uniform"),Yn("typeof "+ge+'==="'+ti+'"',"invalid type, expected "+ti)}function Fa(ti,Zx){Array.isArray(ge)?L(ge.length===ti,"must have length "+ti):Yn(Z.isArrayLike+"("+ge+")&&"+ge+".length==="+ti,"invalid vector, should have length "+ti,z.commandStr)}function Yx(ti){L(!Array.isArray(ge),"must not specify a value type"),Yn("typeof "+ge+'==="function"&&'+ge+'._reglType==="texture'+(ti===Ox?"2d":"Cube")+'"',"invalid texture type",z.commandStr)}switch(ne){case H0:j0("number");break;case Eh:Fa(2);break;case bh:Fa(3);break;case xh:Fa(4);break;case R0:j0("number");break;case mh:Fa(2);break;case wh:Fa(3);break;case Bh:Fa(4);break;case G0:j0("boolean");break;case Ch:Fa(2);break;case _h:Fa(3);break;case Sh:Fa(4);break;case Lf:Fa(4);break;case Df:Fa(9);break;case Of:Fa(16);break;case Uf:Yx(Ox);break;case Nf:Yx(c3);break}});var xt=1;switch(ne){case Uf:case Nf:var Dt=k.def(ge,"._texture");k(Y,".uniform1i(",Ee,",",Dt,".bind());"),k.exit(Dt,".unbind();");continue;case H0:case G0:te="1i";break;case Eh:case Ch:te="2i",xt=2;break;case bh:case _h:te="3i",xt=3;break;case xh:case Sh:te="4i",xt=4;break;case R0:te="1f";break;case mh:te="2f",xt=2;break;case wh:te="3f",xt=3;break;case Bh:te="4f",xt=4;break;case Lf:te="Matrix2fv";break;case Df:te="Matrix3fv";break;case Of:te="Matrix4fv";break}if(k(Y,".uniform",te,"(",Ee,","),te.charAt(0)==="M"){var ir=Math.pow(ne-Lf+2,2),Dr=z.global.def("new Float32Array(",ir,")");Array.isArray(ge)?k("false,(",An(ir,function(Yn){return Dr+"["+Yn+"]="+ge[Yn]}),",",Dr,")"):k("false,(Array.isArray(",ge,")||",ge," instanceof Float32Array)?",ge,":(",An(ir,function(Yn){return Dr+"["+Yn+"]="+ge+"["+Yn+"]"}),",",Dr,")")}else xt>1?k(An(xt,function(Yn){return Array.isArray(ge)?ge[Yn]:ge+"["+Yn+"]"})):(L(!Array.isArray(ge),"uniform value must not be an array"),k(ge));k(");")}}function Bt(z,k,V,ie){var Ae=z.shared,Z=Ae.gl,Y=Ae.draw,te=ie.draw;function K(){var Dt=te.elements,ir,Dr=k;return Dt?((Dt.contextDep&&ie.contextDynamic||Dt.propDep)&&(Dr=V),ir=Dt.append(z,Dr)):ir=Dr.def(Y,".",WA),ir&&Dr("if("+ir+")"+Z+".bindBuffer("+u3+","+ir+".buffer.buffer);"),ir}function W(){var Dt=te.count,ir,Dr=k;return Dt?((Dt.contextDep&&ie.contextDynamic||Dt.propDep)&&(Dr=V),ir=Dt.append(z,Dr),L.optional(function(){Dt.MISSING&&z.assert(k,"false","missing vertex count"),Dt.DYNAMIC&&z.assert(Dr,ir+">=0","missing vertex count")})):(ir=Dr.def(Y,".",XA),L.optional(function(){z.assert(Dr,ir+">=0","missing vertex count")})),ir}var G=K();function ne(Dt){var ir=te[Dt];return ir?ir.contextDep&&ie.contextDynamic||ir.propDep?ir.append(z,V):ir.append(z,k):k.def(Y,".",Dt)}var se=ne(VA),me=ne(ph),Ee=W();if(typeof Ee=="number"){if(Ee===0)return}else V("if(",Ee,"){"),V.exit("}");var ge,Ue;ke&&(ge=ne(yh),Ue=z.instancing);var ft=G+".type",Pt=te.elements&&Vo(te.elements);function ot(){function Dt(){V(Ue,".drawElementsInstancedANGLE(",[se,Ee,ft,me+"<<(("+ft+"-"+hx+")>>1)",ge],");")}function ir(){V(Ue,".drawArraysInstancedANGLE(",[se,me,Ee,ge],");")}G?Pt?Dt():(V("if(",G,"){"),Dt(),V("}else{"),ir(),V("}")):ir()}function xt(){function Dt(){V(Z+".drawElements("+[se,Ee,ft,me+"<<(("+ft+"-"+hx+")>>1)"]+");")}function ir(){V(Z+".drawArrays("+[se,me,Ee]+");")}G?Pt?Dt():(V("if(",G,"){"),Dt(),V("}else{"),ir(),V("}")):ir()}ke&&(typeof ge!="number"||ge>=0)?typeof ge=="string"?(V("if(",ge,">0){"),ot(),V("}else if(",ge,"<0){"),xt(),V("}")):ot():xt()}function jt(z,k,V,ie,Ae){var Z=Mt(),Y=Z.proc("body",Ae);return L.optional(function(){Z.commandStr=k.commandStr,Z.command=Z.link(k.commandStr)}),ke&&(Z.instancing=Y.def(Z.shared.extensions,".angle_instanced_arrays")),z(Z,Y,V,ie),Z.compile().body}function qt(z,k,V,ie){Hr(z,k),V.useVAO?V.drawVAO?k(z.shared.vao,".setVAO(",V.drawVAO.append(z,k),");"):k(z.shared.vao,".setVAO(",z.shared.vao,".targetVAO);"):(k(z.shared.vao,".setVAO(null);"),_n(z,k,V,ie.attributes,function(){return!0})),hr(z,k,V,ie.uniforms,function(){return!0}),Bt(z,k,k,V)}function Gr(z,k){var V=z.proc("draw",1);Hr(z,V),en(z,V,k.context),tn(z,V,k.framebuffer),vn(z,V,k),Cn(z,V,k.state),kt(z,V,k,!1,!0);var ie=k.shader.progVar.append(z,V);if(V(z.shared.gl,".useProgram(",ie,".program);"),k.shader.program)qt(z,V,k,k.shader.program);else{V(z.shared.vao,".setVAO(null);");var Ae=z.global.def("{}"),Z=V.def(ie,".id"),Y=V.def(Ae,"[",Z,"]");V(z.cond(Y).then(Y,".call(this,a0);").else(Y,"=",Ae,"[",Z,"]=",z.link(function(te){return jt(qt,z,k,te,1)}),"(",ie,");",Y,".call(this,a0);"))}Object.keys(k.state).length>0&&V(z.shared.current,".dirty=true;")}function Ci(z,k,V,ie){z.batchId="a1",Hr(z,k);function Ae(){return!0}_n(z,k,V,ie.attributes,Ae),hr(z,k,V,ie.uniforms,Ae),Bt(z,k,k,V)}function ZA(z,k,V,ie){Hr(z,k);var Ae=V.contextDep,Z=k.def(),Y="a0",te="a1",K=k.def();z.shared.props=K,z.batchId=Z;var W=z.scope(),G=z.scope();k(W.entry,"for(",Z,"=0;",Z,"<",te,";++",Z,"){",K,"=",Y,"[",Z,"];",G,"}",W.exit);function ne(ft){return ft.contextDep&&Ae||ft.propDep}function se(ft){return!ne(ft)}if(V.needsContext&&en(z,G,V.context),V.needsFramebuffer&&tn(z,G,V.framebuffer),Cn(z,G,V.state,ne),V.profile&&ne(V.profile)&&kt(z,G,V,!1,!0),ie)V.useVAO?V.drawVAO?ne(V.drawVAO)?G(z.shared.vao,".setVAO(",V.drawVAO.append(z,G),");"):W(z.shared.vao,".setVAO(",V.drawVAO.append(z,W),");"):W(z.shared.vao,".setVAO(",z.shared.vao,".targetVAO);"):(W(z.shared.vao,".setVAO(null);"),_n(z,W,V,ie.attributes,se),_n(z,G,V,ie.attributes,ne)),hr(z,W,V,ie.uniforms,se),hr(z,G,V,ie.uniforms,ne),Bt(z,W,G,V);else{var me=z.global.def("{}"),Ee=V.shader.progVar.append(z,G),ge=G.def(Ee,".id"),Ue=G.def(me,"[",ge,"]");G(z.shared.gl,".useProgram(",Ee,".program);","if(!",Ue,"){",Ue,"=",me,"[",ge,"]=",z.link(function(ft){return jt(Ci,z,V,ft,2)}),"(",Ee,");}",Ue,".call(this,a0[",Z,"],",Z,");")}}function j(z,k){var V=z.proc("batch",2);z.batchId="0",Hr(z,V);var ie=!1,Ae=!0;Object.keys(k.context).forEach(function(me){ie=ie||k.context[me].propDep}),ie||(en(z,V,k.context),Ae=!1);var Z=k.framebuffer,Y=!1;Z?(Z.propDep?ie=Y=!0:Z.contextDep&&ie&&(Y=!0),Y||tn(z,V,Z)):tn(z,V,null),k.state.viewport&&k.state.viewport.propDep&&(ie=!0);function te(me){return me.contextDep&&ie||me.propDep}vn(z,V,k),Cn(z,V,k.state,function(me){return!te(me)}),(!k.profile||!te(k.profile))&&kt(z,V,k,!1,"a1"),k.contextDep=ie,k.needsContext=Ae,k.needsFramebuffer=Y;var K=k.shader.progVar;if(K.contextDep&&ie||K.propDep)ZA(z,V,k,null);else{var W=K.append(z,V);if(V(z.shared.gl,".useProgram(",W,".program);"),k.shader.program)ZA(z,V,k,k.shader.program);else{V(z.shared.vao,".setVAO(null);");var G=z.global.def("{}"),ne=V.def(W,".id"),se=V.def(G,"[",ne,"]");V(z.cond(se).then(se,".call(this,a0,a1);").else(se,"=",G,"[",ne,"]=",z.link(function(me){return jt(ZA,z,k,me,2)}),"(",W,");",se,".call(this,a0,a1);"))}}Object.keys(k.state).length>0&&V(z.shared.current,".dirty=true;")}function ce(z,k){var V=z.proc("scope",3);z.batchId="a2";var ie=z.shared,Ae=ie.current;en(z,V,k.context),k.framebuffer&&k.framebuffer.append(z,V),zx(Object.keys(k.state)).forEach(function(Y){var te=k.state[Y],K=te.append(z,V);Rr(K)?K.forEach(function(W,G){V.set(z.next[Y],"["+G+"]",W)}):V.set(ie.next,"."+Y,K)}),kt(z,V,k,!0,!0),[WA,ph,XA,yh,VA].forEach(function(Y){var te=k.draw[Y];te&&V.set(ie.draw,"."+Y,""+te.append(z,V))}),Object.keys(k.uniforms).forEach(function(Y){var te=k.uniforms[Y].append(z,V);Array.isArray(te)&&(te="["+te.join()+"]"),V.set(ie.uniforms,"["+H.id(Y)+"]",te)}),Object.keys(k.attributes).forEach(function(Y){var te=k.attributes[Y].append(z,V),K=z.scopeAttrib(Y);Object.keys(new oe).forEach(function(W){V.set(K,"."+W,te[W])})}),k.scopeVAO&&V.set(ie.vao,".targetVAO",k.scopeVAO.append(z,V));function Z(Y){var te=k.shader[Y];te&&V.set(ie.shader,"."+Y,te.append(z,V))}Z(If),Z(Tf),Object.keys(k.state).length>0&&(V(Ae,".dirty=true;"),V.exit(Ae,".dirty=true;")),V("a1(",z.shared.context,",a0,",z.batchId,");")}function ue(z){if(!(typeof z!="object"||Rr(z))){for(var k=Object.keys(z),V=0;V<k.length;++V)if(vr.isDynamic(z[k[V]]))return!0;return!1}}function nt(z,k,V){var ie=k.static[V];if(!ie||!ue(ie))return;var Ae=z.global,Z=Object.keys(ie),Y=!1,te=!1,K=!1,W=z.global.def("{}");Z.forEach(function(ne){var se=ie[ne];if(vr.isDynamic(se)){typeof se=="function"&&(se=ie[ne]=vr.unbox(se));var me=ta(se,null);Y=Y||me.thisDep,K=K||me.propDep,te=te||me.contextDep}else{switch(Ae(W,".",ne,"="),typeof se){case"number":Ae(se);break;case"string":Ae('"',se,'"');break;case"object":Array.isArray(se)&&Ae("[",se.join(),"]");break;default:Ae(z.link(se));break}Ae(";")}});function G(ne,se){Z.forEach(function(me){var Ee=ie[me];if(vr.isDynamic(Ee)){var ge=ne.invoke(se,Ee);se(W,".",me,"=",ge,";")}})}k.dynamic[V]=new vr.DynamicVariable(vh,{thisDep:Y,contextDep:te,propDep:K,ref:W,append:G}),delete k.static[V]}function zt(z,k,V,ie,Ae){var Z=Mt();Z.stats=Z.link(Ae),Object.keys(k.static).forEach(function(te){nt(Z,k,te)}),s3.forEach(function(te){nt(Z,z,te)});var Y=Vr(z,k,V,ie,Z);return Gr(Z,Y),ce(Z,Y),j(Z,Y),n(Z.compile(),{destroy:function(){Y.shader.program.destroy()}})}return{next:rt,current:Ce,procs:function(){var z=Mt(),k=z.proc("poll"),V=z.proc("refresh"),ie=z.block();k(ie),V(ie);var Ae=z.shared,Z=Ae.gl,Y=Ae.next,te=Ae.current;ie(te,".dirty=false;"),tn(z,k),tn(z,V,null,!0);var K;ke&&(K=z.link(ke)),$.oes_vertex_array_object&&V(z.link($.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var W=0;W<le.maxAttributes;++W){var G=V.def(Ae.attributes,"[",W,"]"),ne=z.cond(G,".buffer");ne.then(Z,".enableVertexAttribArray(",W,");",Z,".bindBuffer(",ru,",",G,".buffer.buffer);",Z,".vertexAttribPointer(",W,",",G,".size,",G,".type,",G,".normalized,",G,".stride,",G,".offset);").else(Z,".disableVertexAttribArray(",W,");",Z,".vertexAttrib4f(",W,",",G,".x,",G,".y,",G,".z,",G,".w);",G,".buffer=null;"),V(ne),ke&&V(K,".vertexAttribDivisorANGLE(",W,",",G,".divisor);")}return V(z.shared.vao,".currentVAO=null;",z.shared.vao,".setVAO(",z.shared.vao,".targetVAO);"),Object.keys(je).forEach(function(se){var me=je[se],Ee=ie.def(Y,".",se),ge=z.block();ge("if(",Ee,"){",Z,".enable(",me,")}else{",Z,".disable(",me,")}",te,".",se,"=",Ee,";"),V(ge),k("if(",Ee,"!==",te,".",se,"){",ge,"}")}),Object.keys(_e).forEach(function(se){var me=_e[se],Ee=Ce[se],ge,Ue,ft=z.block();if(ft(Z,".",me,"("),Rr(Ee)){var Pt=Ee.length;ge=z.global.def(Y,".",se),Ue=z.global.def(te,".",se),ft(An(Pt,function(ot){return ge+"["+ot+"]"}),");",An(Pt,function(ot){return Ue+"["+ot+"]="+ge+"["+ot+"];"}).join("")),k("if(",An(Pt,function(ot){return ge+"["+ot+"]!=="+Ue+"["+ot+"]"}).join("||"),"){",ft,"}")}else ge=ie.def(Y,".",se),Ue=ie.def(te,".",se),ft(ge,");",te,".",se,"=",ge,";"),k("if(",ge,"!==",Ue,"){",ft,"}");V(ft)}),z.compile()}(),compile:zt}}function M3(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var I3=34918,T3=34919,jx=35007,F3=function(T,H){if(!H.ext_disjoint_timer_query)return null;var $=[];function le(){return $.pop()||H.ext_disjoint_timer_query.createQueryEXT()}function Be(ke){$.push(ke)}var fe=[];function he(ke){var Ye=le();H.ext_disjoint_timer_query.beginQueryEXT(jx,Ye),fe.push(Ye),Te(fe.length-1,fe.length,ke)}function Ie(){H.ext_disjoint_timer_query.endQueryEXT(jx)}function Le(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Pe=[];function De(){return Pe.pop()||new Le}function He(ke){Pe.push(ke)}var We=[];function Te(ke,Ye,Ce){var rt=De();rt.startQueryIndex=ke,rt.endQueryIndex=Ye,rt.sum=0,rt.stats=Ce,We.push(rt)}var Ge=[],oe=[];function de(){var ke,Ye,Ce=fe.length;if(Ce!==0){oe.length=Math.max(oe.length,Ce+1),Ge.length=Math.max(Ge.length,Ce+1),Ge[0]=0,oe[0]=0;var rt=0;for(ke=0,Ye=0;Ye<fe.length;++Ye){var Se=fe[Ye];H.ext_disjoint_timer_query.getQueryObjectEXT(Se,T3)?(rt+=H.ext_disjoint_timer_query.getQueryObjectEXT(Se,I3),Be(Se)):fe[ke++]=Se,Ge[Ye+1]=rt,oe[Ye+1]=ke}for(fe.length=ke,ke=0,Ye=0;Ye<We.length;++Ye){var je=We[Ye],_e=je.startQueryIndex,$e=je.endQueryIndex;je.sum+=Ge[$e]-Ge[_e];var pt=oe[_e],Tt=oe[$e];Tt===pt?(je.stats.gpuTime+=je.sum/1e6,He(je)):(je.startQueryIndex=pt,je.endQueryIndex=Tt,We[ke++]=je)}We.length=ke}}return{beginQuery:he,endQuery:Ie,pushScopeStats:Te,update:de,getNumPendingQueries:function(){return fe.length},clear:function(){$.push.apply($,fe);for(var ke=0;ke<$.length;ke++)H.ext_disjoint_timer_query.deleteQueryEXT($[ke]);fe.length=0,$.length=0},restore:function(){fe.length=0,$.length=0}}},L3=16384,D3=256,O3=1024,U3=34962,$x="webglcontextlost",Wx="webglcontextrestored",Vx=1,N3=2,k3=3;function Xx(T,H){for(var $=0;$<T.length;++$)if(T[$]===H)return $;return-1}function P3(T){var H=NA(T);if(!H)return null;var $=H.gl,le=$.getContextAttributes(),Be=$.isContextLost(),fe=kA($,H);if(!fe)return null;var he=pr(),Ie=M3(),Le=fe.extensions,Pe=F3($,Le),De=wr(),He=$.drawingBufferWidth,We=$.drawingBufferHeight,Te={tick:0,time:0,viewportWidth:He,viewportHeight:We,framebufferWidth:He,framebufferHeight:We,drawingBufferWidth:He,drawingBufferHeight:We,pixelRatio:H.pixelRatio},Ge={},oe={elements:null,primitive:4,count:-1,offset:0,instances:-1},de=bR($,Le),ke=QR($,Ie,H,Ce),Ye=Z4($,Le,de,Ie,ke);function Ce(Bt){return Ye.destroyBuffer(Bt)}var rt=ZR($,Le,ke,Ie),Se=t3($,he,Ie,H),je=M4($,Le,de,function(){pt.procs.poll()},Te,Ie,H),_e=I4($,Le,de,Ie,H),$e=X4($,Le,de,je,_e,Ie),pt=S3($,he,Le,de,ke,rt,je,$e,Ge,Ye,Se,oe,Te,Pe,H),Tt=a3($,$e,pt.procs.poll,Te,le,Le,de),Ve=pt.next,Qe=$.canvas,xe=[],Mt=[],Nt=[],it=[H.onDestroy],Gt=null;function Ft(){if(xe.length===0){Pe&&Pe.update(),Gt=null;return}Gt=sr.next(Ft),Cn();for(var Bt=xe.length-1;Bt>=0;--Bt){var jt=xe[Bt];jt&&jt(Te,null,0)}$.flush(),Pe&&Pe.update()}function Rt(){!Gt&&xe.length>0&&(Gt=sr.next(Ft))}function ar(){Gt&&(sr.cancel(Ft),Gt=null)}function Wr(Bt){Bt.preventDefault(),Be=!0,ar(),Mt.forEach(function(jt){jt()})}function sn(Bt){$.getError(),Be=!1,fe.restore(),Se.restore(),ke.restore(),je.restore(),_e.restore(),$e.restore(),Ye.restore(),Pe&&Pe.restore(),pt.procs.refresh(),Rt(),Nt.forEach(function(jt){jt()})}Qe&&(Qe.addEventListener($x,Wr,!1),Qe.addEventListener(Wx,sn,!1));function $t(){xe.length=0,ar(),Qe&&(Qe.removeEventListener($x,Wr),Qe.removeEventListener(Wx,sn)),Se.clear(),$e.clear(),_e.clear(),je.clear(),rt.clear(),ke.clear(),Ye.clear(),Pe&&Pe.clear(),it.forEach(function(Bt){Bt()})}function Jr(Bt){L(!!Bt,"invalid args to regl({...})"),L.type(Bt,"object","invalid args to regl({...})");function jt(Ae){var Z=n({},Ae);delete Z.uniforms,delete Z.attributes,delete Z.context,delete Z.vao,"stencil"in Z&&Z.stencil.op&&(Z.stencil.opBack=Z.stencil.opFront=Z.stencil.op,delete Z.stencil.op);function Y(te){if(te in Z){var K=Z[te];delete Z[te],Object.keys(K).forEach(function(W){Z[te+"."+W]=K[W]})}}return Y("blend"),Y("depth"),Y("cull"),Y("stencil"),Y("polygonOffset"),Y("scissor"),Y("sample"),"vao"in Ae&&(Z.vao=Ae.vao),Z}function qt(Ae,Z){var Y={},te={};return Object.keys(Ae).forEach(function(K){var W=Ae[K];if(vr.isDynamic(W)){te[K]=vr.unbox(W,K);return}else if(Z&&Array.isArray(W)){for(var G=0;G<W.length;++G)if(vr.isDynamic(W[G])){te[K]=vr.unbox(W,K);return}}Y[K]=W}),{dynamic:te,static:Y}}var Gr=qt(Bt.context||{},!0),Ci=qt(Bt.uniforms||{},!0),ZA=qt(Bt.attributes||{},!1),j=qt(jt(Bt),!1),ce={gpuTime:0,cpuTime:0,count:0},ue=pt.compile(j,ZA,Ci,Gr,ce),nt=ue.draw,zt=ue.batch,z=ue.scope,k=[];function V(Ae){for(;k.length<Ae;)k.push(null);return k}function ie(Ae,Z){var Y;if(Be&&L.raise("context lost"),typeof Ae=="function")return z.call(this,null,Ae,0);if(typeof Z=="function")if(typeof Ae=="number")for(Y=0;Y<Ae;++Y)z.call(this,null,Z,Y);else if(Array.isArray(Ae))for(Y=0;Y<Ae.length;++Y)z.call(this,Ae[Y],Z,Y);else return z.call(this,Ae,Z,0);else if(typeof Ae=="number"){if(Ae>0)return zt.call(this,V(Ae|0),Ae|0)}else if(Array.isArray(Ae)){if(Ae.length)return zt.call(this,Ae,Ae.length)}else return nt.call(this,Ae)}return n(ie,{stats:ce,destroy:function(){ue.destroy()}})}var Br=$e.setFBO=Jr({framebuffer:vr.define.call(null,Vx,"framebuffer")});function Vr(Bt,jt){var qt=0;pt.procs.poll();var Gr=jt.color;Gr&&($.clearColor(+Gr[0]||0,+Gr[1]||0,+Gr[2]||0,+Gr[3]||0),qt|=L3),"depth"in jt&&($.clearDepth(+jt.depth),qt|=D3),"stencil"in jt&&($.clearStencil(jt.stencil|0),qt|=O3),L(!!qt,"called regl.clear with no buffer specified"),$.clear(qt)}function en(Bt){if(L(typeof Bt=="object"&&Bt,"regl.clear() takes an object as input"),"framebuffer"in Bt)if(Bt.framebuffer&&Bt.framebuffer_reglType==="framebufferCube")for(var jt=0;jt<6;++jt)Br(n({framebuffer:Bt.framebuffer.faces[jt]},Bt),Vr);else Br(Bt,Vr);else Vr(null,Bt)}function tn(Bt){L.type(Bt,"function","regl.frame() callback must be a function"),xe.push(Bt);function jt(){var qt=Xx(xe,Bt);L(qt>=0,"cannot cancel a frame twice");function Gr(){var Ci=Xx(xe,Gr);xe[Ci]=xe[xe.length-1],xe.length-=1,xe.length<=0&&ar()}xe[qt]=Gr}return Rt(),{cancel:jt}}function vn(){var Bt=Ve.viewport,jt=Ve.scissor_box;Bt[0]=Bt[1]=jt[0]=jt[1]=0,Te.viewportWidth=Te.framebufferWidth=Te.drawingBufferWidth=Bt[2]=jt[2]=$.drawingBufferWidth,Te.viewportHeight=Te.framebufferHeight=Te.drawingBufferHeight=Bt[3]=jt[3]=$.drawingBufferHeight}function Cn(){Te.tick+=1,Te.time=kt(),vn(),pt.procs.poll()}function Hr(){je.refresh(),vn(),pt.procs.refresh(),Pe&&Pe.update()}function kt(){return(wr()-De)/1e3}Hr();function _n(Bt,jt){L.type(jt,"function","listener callback must be a function");var qt;switch(Bt){case"frame":return tn(jt);case"lost":qt=Mt;break;case"restore":qt=Nt;break;case"destroy":qt=it;break;default:L.raise("invalid event, must be one of frame,lost,restore,destroy")}return qt.push(jt),{cancel:function(){for(var Gr=0;Gr<qt.length;++Gr)if(qt[Gr]===jt){qt[Gr]=qt[qt.length-1],qt.pop();return}}}}var hr=n(Jr,{clear:en,prop:vr.define.bind(null,Vx),context:vr.define.bind(null,N3),this:vr.define.bind(null,k3),draw:Jr({}),buffer:function(Bt){return ke.create(Bt,U3,!1,!1)},elements:function(Bt){return rt.create(Bt,!1)},texture:je.create2D,cube:je.createCube,renderbuffer:_e.create,framebuffer:$e.create,framebufferCube:$e.createCube,vao:Ye.createVAO,attributes:le,frame:tn,on:_n,limits:de,hasExtension:function(Bt){return de.extensions.indexOf(Bt.toLowerCase())>=0},read:Tt,destroy:$t,_gl:$,_refresh:Hr,poll:function(){Cn(),Pe&&Pe.update()},now:kt,stats:Ie});return H.onDone(null,hr),hr}return P3})})(dP);var xhe=dP.exports;const Che=qi(xhe);var _he=function(){function r(e,t){yi(this,r),this.attribute=void 0,this.buffer=void 0;var n=t.buffer,a=t.offset,i=t.stride,o=t.normalized,A=t.size,s=t.divisor;this.buffer=n,this.attribute={buffer:n.get(),offset:a||0,stride:i||0,normalized:o||!1,divisor:s||0},A&&(this.attribute.size=A)}return mi(r,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),r}(),po,Vf,yo,Oa,Xf,qo,Yf,hd,Mi,es,Nn,Ii,Ti,dd,She=(po={},Je(po,Fe.POINTS,"points"),Je(po,Fe.LINES,"lines"),Je(po,Fe.LINE_LOOP,"line loop"),Je(po,Fe.LINE_STRIP,"line strip"),Je(po,Fe.TRIANGLES,"triangles"),Je(po,Fe.TRIANGLE_FAN,"triangle fan"),Je(po,Fe.TRIANGLE_STRIP,"triangle strip"),po),vP=(Vf={},Je(Vf,Fe.STATIC_DRAW,"static"),Je(Vf,Fe.DYNAMIC_DRAW,"dynamic"),Je(Vf,Fe.STREAM_DRAW,"stream"),Vf),RE=(yo={},Je(yo,Fe.BYTE,"int8"),Je(yo,Fe.UNSIGNED_INT,"int16"),Je(yo,Fe.INT,"int32"),Je(yo,Fe.UNSIGNED_BYTE,"uint8"),Je(yo,Fe.UNSIGNED_SHORT,"uint16"),Je(yo,Fe.UNSIGNED_INT,"uint32"),Je(yo,Fe.FLOAT,"float"),yo),Mhe=(Oa={},Je(Oa,Fe.ALPHA,"alpha"),Je(Oa,Fe.LUMINANCE,"luminance"),Je(Oa,Fe.LUMINANCE_ALPHA,"luminance alpha"),Je(Oa,Fe.RGB,"rgb"),Je(Oa,Fe.RGBA,"rgba"),Je(Oa,Fe.RGBA4,"rgba4"),Je(Oa,Fe.RGB5_A1,"rgb5 a1"),Je(Oa,Fe.RGB565,"rgb565"),Je(Oa,Fe.DEPTH_COMPONENT,"depth"),Je(Oa,Fe.DEPTH_STENCIL,"depth stencil"),Oa),Ihe=(Xf={},Je(Xf,Fe.DONT_CARE,"dont care"),Je(Xf,Fe.NICEST,"nice"),Je(Xf,Fe.FASTEST,"fast"),Xf),mM=(qo={},Je(qo,Fe.NEAREST,"nearest"),Je(qo,Fe.LINEAR,"linear"),Je(qo,Fe.LINEAR_MIPMAP_LINEAR,"mipmap"),Je(qo,Fe.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),Je(qo,Fe.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),Je(qo,Fe.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),qo),wM=(Yf={},Je(Yf,Fe.REPEAT,"repeat"),Je(Yf,Fe.CLAMP_TO_EDGE,"clamp"),Je(Yf,Fe.MIRRORED_REPEAT,"mirror"),Yf),The=(hd={},Je(hd,Fe.NONE,"none"),Je(hd,Fe.BROWSER_DEFAULT_WEBGL,"browser"),hd),Fhe=(Mi={},Je(Mi,Fe.NEVER,"never"),Je(Mi,Fe.ALWAYS,"always"),Je(Mi,Fe.LESS,"less"),Je(Mi,Fe.LEQUAL,"lequal"),Je(Mi,Fe.GREATER,"greater"),Je(Mi,Fe.GEQUAL,"gequal"),Je(Mi,Fe.EQUAL,"equal"),Je(Mi,Fe.NOTEQUAL,"notequal"),Mi),BM=(es={},Je(es,Fe.FUNC_ADD,"add"),Je(es,Fe.MIN_EXT,"min"),Je(es,Fe.MAX_EXT,"max"),Je(es,Fe.FUNC_SUBTRACT,"subtract"),Je(es,Fe.FUNC_REVERSE_SUBTRACT,"reverse subtract"),es),vd=(Nn={},Je(Nn,Fe.ZERO,"zero"),Je(Nn,Fe.ONE,"one"),Je(Nn,Fe.SRC_COLOR,"src color"),Je(Nn,Fe.ONE_MINUS_SRC_COLOR,"one minus src color"),Je(Nn,Fe.SRC_ALPHA,"src alpha"),Je(Nn,Fe.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),Je(Nn,Fe.DST_COLOR,"dst color"),Je(Nn,Fe.ONE_MINUS_DST_COLOR,"one minus dst color"),Je(Nn,Fe.DST_ALPHA,"dst alpha"),Je(Nn,Fe.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),Je(Nn,Fe.CONSTANT_COLOR,"constant color"),Je(Nn,Fe.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),Je(Nn,Fe.CONSTANT_ALPHA,"constant alpha"),Je(Nn,Fe.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),Je(Nn,Fe.SRC_ALPHA_SATURATE,"src alpha saturate"),Nn),Lhe=(Ii={},Je(Ii,Fe.NEVER,"never"),Je(Ii,Fe.ALWAYS,"always"),Je(Ii,Fe.LESS,"less"),Je(Ii,Fe.LEQUAL,"lequal"),Je(Ii,Fe.GREATER,"greater"),Je(Ii,Fe.GEQUAL,"gequal"),Je(Ii,Fe.EQUAL,"equal"),Je(Ii,Fe.NOTEQUAL,"notequal"),Ii),cu=(Ti={},Je(Ti,Fe.ZERO,"zero"),Je(Ti,Fe.KEEP,"keep"),Je(Ti,Fe.REPLACE,"replace"),Je(Ti,Fe.INVERT,"invert"),Je(Ti,Fe.INCR,"increment"),Je(Ti,Fe.DECR,"decrement"),Je(Ti,Fe.INCR_WRAP,"increment wrap"),Je(Ti,Fe.DECR_WRAP,"decrement wrap"),Ti),Dhe=(dd={},Je(dd,Fe.FRONT,"front"),Je(dd,Fe.BACK,"back"),dd),Ohe=function(){function r(e,t){yi(this,r),this.buffer=void 0;var n=t.data,a=t.usage,i=t.type;this.buffer=e.buffer({data:n,usage:vP[a||Fe.STATIC_DRAW],type:RE[i||Fe.UNSIGNED_BYTE]})}return mi(r,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(t){var n=t.data,a=t.offset;this.buffer.subdata(n,a)}}]),r}();function W1(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Uhe(r){if(Array.isArray(r))return W1(r)}function Nhe(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function khe(r,e){if(r){if(typeof r=="string")return W1(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return W1(r,e)}}function Phe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qhe(r){return Uhe(r)||Nhe(r)||khe(r)||Phe()}function EM(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function bM(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?EM(Object(t),!0).forEach(function(n){Je(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):EM(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Rhe=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,xM=0,Hhe=function(){function r(e,t){var n=this;yi(this,r),this.reGl=e,this.context=t,this.entity=cP(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var a={};this.context.uniforms.forEach(function(u){var f=u.name,l=u.type,c=u.data,h=u.isReferer,d=u.storageClass;if(d===ff.StorageBuffer){if(h)n.textureCache[f]={data:void 0},a["".concat(f,"Size")]=function(){return c.compiledBundle.context.output.textureSize};else{n.textureCache[f]=n.calcDataTexture(f,l,c);var v=n.textureCache[f],g=v.textureWidth,p=v.isOutput;a["".concat(f,"Size")]=[g,g],p&&(n.outputTextureName=f,n.context.needPingpong&&(n.outputTextureName="".concat(f,"Output"),n.textureCache[n.outputTextureName]=n.calcDataTexture(f,l,c)))}a[f]=function(){return n.textureCache[f].texture}}else if(d===ff.Uniform){if(c&&(Array.isArray(c)||ug(c))&&c.length>16)throw new Error("invalid data type ".concat(l));a[f]=function(){return u.data}}});var i=this.getOuputDataTexture(),o=i.textureWidth,A=i.texelCount;a.u_OutputTextureSize=[o,o],a.u_OutputTexelCount=A,this.context.output.textureSize=[o,o];var s={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:a,vert:Rhe,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(s)}return mi(r,[{key:"run",value:function(){var t=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){t.computeCommand()})}},{key:"readData",value:function(){var e=hA(Kn.mark(function n(){var a=this,i,o,A,s,u,f,l,c;return Kn.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){i=a.reGl.read()}),!i){d.next=6;break}if(o=this.getOuputDataTexture(),A=o.originalDataLength,s=o.elementsPerTexel,u=o.typedArrayConstructor,f=u===void 0?Float32Array:u,l=[],s!==4)for(c=0;c<i.length;c+=4)s===1?l.push(i[c]):s===2?l.push(i[c],i[c+1]):l.push(i[c],i[c+1],i[c+2]);else l=i;return d.abrupt("return",new f(l.slice(0,A)));case 6:return d.abrupt("return",new Float32Array);case 7:case"end":return d.stop()}},n,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"confirmInput",value:function(t,n){var a;this.entity===t.entity?(this.dynamicPingpong=!0,a=this):a=t,this.textureCache[n].id=a.getOuputDataTexture().id,this.textureCache[n].texture=a.getOuputDataTexture().texture}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(t,n){var a=this.context.uniforms.find(function(s){var u=s.name;return u===t});if(a){var i=this.calcDataTexture(t,a.type,n),o=i.texture,A=i.data;this.textureCache[t].data=A,this.textureCache[t].texture=o}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var t=this.context.output.name;this.textureCache[t].id=this.getOuputDataTexture().id,this.textureCache[t].texture=this.getOuputDataTexture().texture}var n=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=n}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var t=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=t}},{key:"cloneDataTexture",value:function(t){var n=t.data,a=t.textureWidth;return bM(bM({},t),{},{id:xM++,texture:this.reGl.texture({width:a,height:a,data:n,type:"float"})})}},{key:"calcDataTexture",value:function(t,n,a){var i=1;n===cc.Vector4FloatArray&&(i=4);for(var o=[],A=0;A<a.length;A+=i)i===1?o.push(a[A],0,0,0):i===2?o.push(a[A],a[A+1],0,0):i===3?o.push(a[A],a[A+1],a[A+2],0):i===4&&o.push(a[A],a[A+1],a[A+2],a[A+3]);var s=a.length,u=Math.ceil(s/i),f=Math.ceil(Math.sqrt(u)),l=f*f;u<l&&o.push.apply(o,Qhe(new Array((l-u)*4).fill(0)));var c=this.reGl.texture({width:f,height:f,data:o,type:"float"});return{id:xM++,data:o,originalDataLength:s,typedArrayConstructor:ug(a)?a.constructor:void 0,textureWidth:f,texture:c,texelCount:u,elementsPerTexel:i,isOutput:t===this.context.output.name}}}]),r}(),Ghe=function(){function r(e,t){yi(this,r),this.elements=void 0;var n=t.data,a=t.usage,i=t.type,o=t.count;this.elements=e.elements({data:n,usage:vP[a||Fe.STATIC_DRAW],type:RE[i||Fe.UNSIGNED_BYTE],count:o})}return mi(r,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(t){var n=t.data;this.elements.subdata(n)}},{key:"destroy",value:function(){this.elements.destroy()}}]),r}(),zhe=function(){function r(e,t){yi(this,r),this.framebuffer=void 0;var n=t.width,a=t.height,i=t.color,o=t.colors;t.depth,t.stencil;var A={width:n,height:a};Array.isArray(o)&&(A.colors=o.map(function(s){return s.get()})),i&&typeof i!="boolean"&&(A.color=i.get()),this.framebuffer=e.framebuffer(A)}return mi(r,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(t){var n=t.width,a=t.height;this.framebuffer.resize(n,a)}}]),r}();function Khe(r,e){return function(t){return r(e(t))}}var jhe=Khe,$he=jhe,Whe=$he(Object.getPrototypeOf,Object),Vhe=Whe,Xhe=PE,Yhe=Vhe,Zhe=QE,qhe="[object Object]",Jhe=Function.prototype,ede=Object.prototype,gP=Jhe.toString,tde=ede.hasOwnProperty,rde=gP.call(Object);function nde(r){if(!Zhe(r)||Xhe(r)!=qhe)return!1;var e=Yhe(r);if(e===null)return!0;var t=tde.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&gP.call(t)==rde}var ade=nde;const ide=qi(ade);function Wy(r){var e={};return Object.keys(r).forEach(function(t){V1(t,r[t],e,"")}),e}function V1(r,e,t,n){if(e===null||typeof e=="number"||typeof e=="boolean"||Array.isArray(e)&&typeof e[0]=="number"||ug(e)||e===""||e.resize!==void 0){t["".concat(n&&n+".").concat(r)]=e;return}ide(e)&&Object.keys(e).forEach(function(a){V1(a,e[a],t,"".concat(n&&n+".").concat(r))}),Array.isArray(e)&&e.forEach(function(a,i){Object.keys(a).forEach(function(o){V1(o,a[o],t,"".concat(n&&n+".").concat(r,"[").concat(i,"]"))})})}function CM(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function hu(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?CM(Object(t),!0).forEach(function(n){Je(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):CM(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var ode=function(){function r(e,t){yi(this,r),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=e;var n=t.vs,a=t.fs,i=t.defines,o=t.attributes,A=t.uniforms,s=t.primitive,u=t.count,f=t.elements,l=t.depth,c=t.blend,h=t.stencil,d=t.cull,v=t.instances,g=t.scissor,p=t.viewport,y={};A&&(this.uniforms=Wy(A),Object.keys(A).forEach(function(E){y[E]=e.prop(E)}));var m={};Object.keys(o).forEach(function(E){m[E]=o[E].get()});var w=i&&this.generateDefines(i)||"",B={attributes:m,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(w,`
`).concat(a),uniforms:y,vert:`
`.concat(w,`
`).concat(n),primitive:She[s===void 0?Fe.TRIANGLES:s]};v&&(B.instances=v),u&&(B.count=u),f&&(B.elements=f.get()),g&&(B.scissor=g),p&&(B.viewport=p),this.initDepthDrawParams({depth:l},B),this.initBlendDrawParams({blend:c},B),this.initStencilDrawParams({stencil:h},B),this.initCullDrawParams({cull:d},B),this.drawCommand=e(B)}return mi(r,[{key:"addUniforms",value:function(t){this.uniforms=hu(hu({},this.uniforms),Wy(t))}},{key:"draw",value:function(t){var n=hu(hu({},this.uniforms),Wy(t.uniforms||{})),a={};Object.keys(n).forEach(function(i){var o=uf(n[i]);o==="boolean"||o==="number"||Array.isArray(n[i])||n[i].BYTES_PER_ELEMENT?a[i]=n[i]:o==="string"||(a[i]=n[i].get())}),this.drawCommand(a)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(t,n){var a=t.depth;a&&(n.depth={enable:a.enable===void 0?!0:!!a.enable,mask:a.mask===void 0?!0:!!a.mask,func:Fhe[a.func||Fe.LESS],range:a.range||[0,1]})}},{key:"initBlendDrawParams",value:function(t,n){var a=t.blend;if(a){var i=a.enable,o=a.func,A=a.equation,s=a.color,u=s===void 0?[0,0,0,0]:s;n.blend={enable:!!i,func:{srcRGB:vd[o&&o.srcRGB||Fe.SRC_ALPHA],srcAlpha:vd[o&&o.srcAlpha||Fe.SRC_ALPHA],dstRGB:vd[o&&o.dstRGB||Fe.ONE_MINUS_SRC_ALPHA],dstAlpha:vd[o&&o.dstAlpha||Fe.ONE_MINUS_SRC_ALPHA]},equation:{rgb:BM[A&&A.rgb||Fe.FUNC_ADD],alpha:BM[A&&A.alpha||Fe.FUNC_ADD]},color:u}}}},{key:"initStencilDrawParams",value:function(t,n){var a=t.stencil;if(a){var i=a.enable,o=a.mask,A=o===void 0?-1:o,s=a.func,u=s===void 0?{cmp:Fe.ALWAYS,ref:0,mask:-1}:s,f=a.opFront,l=f===void 0?{fail:Fe.KEEP,zfail:Fe.KEEP,zpass:Fe.KEEP}:f,c=a.opBack,h=c===void 0?{fail:Fe.KEEP,zfail:Fe.KEEP,zpass:Fe.KEEP}:c;n.stencil={enable:!!i,mask:A,func:hu(hu({},u),{},{cmp:Lhe[u.cmp]}),opFront:{fail:cu[l.fail],zfail:cu[l.zfail],zpass:cu[l.zpass]},opBack:{fail:cu[h.fail],zfail:cu[h.zfail],zpass:cu[h.zpass]}}}}},{key:"initCullDrawParams",value:function(t,n){var a=t.cull;if(a){var i=a.enable,o=a.face,A=o===void 0?Fe.BACK:o;n.cull={enable:!!i,face:Dhe[A]}}}},{key:"generateDefines",value:function(t){return Object.keys(t).map(function(n){return"#define ".concat(n," ").concat(Number(t[n]))}).join(`
`)}}]),r}(),Ade=function(){function r(e,t){yi(this,r),this.texture=void 0,this.width=void 0,this.height=void 0;var n=t.data,a=t.type,i=a===void 0?Fe.UNSIGNED_BYTE:a,o=t.width,A=t.height,s=t.flipY,u=s===void 0?!1:s,f=t.format,l=f===void 0?Fe.RGBA:f,c=t.mipmap,h=c===void 0?!1:c,d=t.wrapS,v=d===void 0?Fe.CLAMP_TO_EDGE:d,g=t.wrapT,p=g===void 0?Fe.CLAMP_TO_EDGE:g,y=t.aniso,m=y===void 0?0:y,w=t.alignment,B=w===void 0?1:w,E=t.premultiplyAlpha,b=E===void 0?!1:E,C=t.mag,_=C===void 0?Fe.NEAREST:C,x=t.min,M=x===void 0?Fe.NEAREST:x,S=t.colorSpace,I=S===void 0?Fe.BROWSER_DEFAULT_WEBGL:S;this.width=o,this.height=A;var D={width:o,height:A,type:RE[i],format:Mhe[l],wrapS:wM[v],wrapT:wM[p],mag:mM[_],min:mM[M],alignment:B,flipY:u,colorSpace:The[I],premultiplyAlpha:b,aniso:m};n&&(D.data=n),typeof h=="number"?D.mipmap=Ihe[h]:typeof h=="boolean"&&(D.mipmap=h),this.texture=e.texture(D)}return mi(r,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(t){var n=t.width,a=t.height;this.texture.resize(n,a),this.width=n,this.height=a}},{key:"destroy",value:function(){this.texture.destroy()}}]),r}(),sde=function(){function r(){var e=this;yi(this,r),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var t=hA(Kn.mark(function n(a){return Kn.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!a.uniforms){o.next=3;break}return o.next=3,Promise.all(Object.keys(a.uniforms).map(function(){var A=hA(Kn.mark(function s(u){var f;return Kn.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(a.uniforms[u]&&a.uniforms[u].load!==void 0)){c.next=5;break}return c.next=3,a.uniforms[u].load();case 3:f=c.sent,a.uniforms[u]=f;case 5:case"end":return c.stop()}},s)}));return function(s){return A.apply(this,arguments)}}()));case 3:return o.abrupt("return",new ode(e.gl,a));case 4:case"end":return o.stop()}},n)}));return function(n){return t.apply(this,arguments)}}(),this.createAttribute=function(t){return new _he(e.gl,t)},this.createBuffer=function(t){return new Ohe(e.gl,t)},this.createElements=function(t){return new Ghe(e.gl,t)},this.createTexture2D=function(t){return new Ade(e.gl,t)},this.createFramebuffer=function(t){return new zhe(e.gl,t)},this.useFramebuffer=function(t,n){e.gl({framebuffer:t?t.get():null})(n)},this.createComputeModel=function(){var t=hA(Kn.mark(function n(a){return Kn.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",new Hhe(e.gl,a));case 1:case"end":return o.stop()}},n)}));return function(n){return t.apply(this,arguments)}}(),this.clear=function(t){var n=t.color,a=t.depth,i=t.stencil,o=t.framebuffer,A=o===void 0?null:o,s={color:n,depth:a,stencil:i};s.framebuffer=A===null?A:A.get(),e.gl.clear(s)},this.setScissor=function(t){e.gl&&e.gl._gl&&(t.enable&&t.box?(e.gl._gl.enable(Fe.SCISSOR_TEST),e.gl._gl.scissor(t.box.x,t.box.y,t.box.width,t.box.height)):e.gl._gl.disable(Fe.SCISSOR_TEST),e.gl._refresh())},this.viewport=function(t){var n=t.x,a=t.y,i=t.width,o=t.height;e.gl&&e.gl._gl&&(e.gl._gl.viewport(n,a,i,o),e.gl._refresh())},this.readPixels=function(t){var n=t.framebuffer,a=t.x,i=t.y,o=t.width,A=t.height,s={x:a,y:i,width:o,height:A};return n&&(s.framebuffer=n.get()),e.gl.read(s)},this.getCanvas=function(){return e.$canvas},this.getGLContext=function(){return e.gl._gl},this.destroy=function(){e.gl&&(e.gl.destroy(),e.inited=!1)}}return mi(r,[{key:"init",value:function(){var e=hA(Kn.mark(function n(a){return Kn.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!this.inited){o.next=2;break}return o.abrupt("return");case 2:return this.$canvas=a.canvas,o.next=5,new Promise(function(A,s){Che({canvas:a.canvas,attributes:{alpha:!0,antialias:a.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(f,l){(f||!l)&&s(f),A(l)}})});case 5:this.gl=o.sent,this.inited=!0;case 7:case"end":return o.stop()}},n,this)}));function t(n){return e.apply(this,arguments)}return t}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),r}(),ude=function(){function r(){yi(this,r),this.engine=void 0,this.configService=new Bhe}return mi(r,[{key:"setConfig",value:function(t){this.configService.set(t)}},{key:"setEngine",value:function(t){this.engine=t}},{key:"createEntity",value:function(){return cP()}},{key:"createKernel",value:function(t){var n=new hP(this.engine,this.configService);return typeof t=="string"?n.setBundle(JSON.parse(t)):n.setBundle(t),n.init(),n}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=new r;return n.setConfig(t),n.setEngine(new sde),n}}]),r}();const fde=Object.freeze(Object.defineProperty({__proto__:null,Kernel:hP,World:ude},Symbol.toStringTag,{value:"Module"})),pP=Zi(fde);var xa={};Object.defineProperty(xa,"__esModule",{value:!0});xa.arrayToTextureData=xa.attributesToTextureData=xa.buildTextureDataWithTwoEdgeAttr=xa.buildTextureData=xa.proccessToFunc=void 0;var lde=zr(),fg=ep,cde=function(r,e){var t;return r?(0,lde.isNumber)(r)?t=function(){return r}:t=r:t=function(){return e||1},t};xa.proccessToFunc=cde;var hde=function(r,e){var t=[],n=[],a={},i=0;for(i=0;i<r.length;i++){var o=r[i];a[o.id]=i,t.push(o.x),t.push(o.y),t.push(0),t.push(0),n.push([])}for(i=0;i<e.length;i++){var A=e[i],s=(0,fg.getEdgeTerminal)(A,"source"),u=(0,fg.getEdgeTerminal)(A,"target");!isNaN(a[s])&&!isNaN(a[u])&&(n[a[s]].push(a[u]),n[a[u]].push(a[s]))}var f=0;for(i=0;i<r.length;i++){var l=t.length,c=n[i],h=c.length;t[i*4+2]=l,t[i*4+3]=h,f=Math.max(f,h);for(var d=0;d<h;++d){var v=c[d];t.push(+v)}}for(;t.length%4!==0;)t.push(0);return{maxEdgePerVetex:f,array:new Float32Array(t)}};xa.buildTextureData=hde;var dde=function(r,e,t,n){var a=[],i=[],o={},A=0;for(A=0;A<r.length;A++){var s=r[A];o[s.id]=A,a.push(s.x),a.push(s.y),a.push(0),a.push(0),i.push([])}for(A=0;A<e.length;A++){var u=e[A],f=(0,fg.getEdgeTerminal)(u,"source"),l=(0,fg.getEdgeTerminal)(u,"target");i[o[f]].push(o[l]),i[o[f]].push(t(u)),i[o[f]].push(n(u)),i[o[f]].push(0),i[o[l]].push(o[f]),i[o[l]].push(t(u)),i[o[l]].push(n(u)),i[o[l]].push(0)}var c=0;for(A=0;A<r.length;A++){var h=a.length,d=i[A],v=d.length;a[A*4+2]=h+1048576*v/4,a[A*4+3]=0,c=Math.max(c,v/4);for(var g=0;g<v;++g){var p=d[g];a.push(+p)}}for(;a.length%4!==0;)a.push(0);return{maxEdgePerVetex:c,array:new Float32Array(a)}};xa.buildTextureDataWithTwoEdgeAttr=dde;var vde=function(r,e){var t=[],n=r.length,a={};return e.forEach(function(i){r.forEach(function(o,A){if(a[i[o]]===void 0&&(a[i[o]]=Object.keys(a).length),t.push(a[i[o]]),A===n-1)for(;t.length%4!==0;)t.push(0)})}),{array:new Float32Array(t),count:Object.keys(a).length}};xa.attributesToTextureData=vde;var gde=function(r){for(var e=[],t=r.length,n=r[0].length,a=function(o){r.forEach(function(A,s){if(e.push(A[o]),s===t-1)for(;e.length%4!==0;)e.push(0)})},i=0;i<n;i++)a(i);return new Float32Array(e)};xa.arrayToTextureData=gde;var zi={};Object.defineProperty(zi,"__esModule",{value:!0});zi.clusterBundle=zi.clusterCode=zi.fruchtermanBundle=zi.fruchtermanCode=void 0;zi.fruchtermanCode=`
import { globalInvocationID } from 'g-webgpu';
const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class Fruchterman {
  @in @out
  u_Data: vec4[];
  @in
  u_K: float;
  @in
  u_K2: float;
  
  @in
  u_Center: vec2;
  @in
  u_Gravity: float;
  @in
  u_ClusterGravity: float;
  @in
  u_Speed: float;
  @in
  u_MaxDisplace: float;
  @in
  u_Clustering: float;
  @in
  u_AttributeArray: vec4[];
  @in
  u_ClusterCenters: vec4[];
  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const xDist = currentNode[0] - nextNode[0];
        const yDist = currentNode[1] - nextNode[1];
        const dist = (xDist * xDist + yDist * yDist) + 0.01;
        let param = this.u_K2 / dist;
        
        if (dist > 0.0) {
          dx += param * xDist;
          dy += param * yDist;
          if (xDist == 0 && yDist == 0) {
            const sign = i < j ? 1 : -1;
            dx += param * sign;
            dy += param * sign;
          }
        }
      }
    }
    return [dx, dy];
  }
  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // 
    let dx = 0, dy = 0;
    const vx = currentNode[0] - this.u_Center[0];
    const vy = currentNode[1] - this.u_Center[1];
    const gf = 0.01 * this.u_K * this.u_Gravity;
    dx = gf * vx;
    dy = gf * vy;
    if (this.u_Clustering == 1) {
      const clusterIdx = int(nodeAttributes[0]);
      const center = this.u_ClusterCenters[clusterIdx];
      const cvx = currentNode[0] - center[0];
      const cvy = currentNode[1] - center[1];
      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;
      const parma = this.u_K * this.u_ClusterGravity / dist;
      dx += parma * cvx;
      dy += parma * cvy;
    }
    return [dx, dy];
  }
  calcAttractive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    const arr_offset = int(floor(currentNode[2] + 0.5));
    const length = int(floor(currentNode[3] + 0.5));
    const node_buffer: vec4;
    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + p;
      // when arr_idx % 4 == 0 update currentNodedx_buffer
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)];
      }
      const float_j = buf_offset == 0 ? node_buffer[0] :
                      buf_offset == 1 ? node_buffer[1] :
                      buf_offset == 2 ? node_buffer[2] :
                                        node_buffer[3];
      const nextNode = this.u_Data[int(float_j)];
      const xDist = currentNode[0] - nextNode[0];
      const yDist = currentNode[1] - nextNode[1];
      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;
      let attractiveF = dist / this.u_K;
    
      if (dist > 0.0) {
        dx -= xDist * attractiveF;
        dy -= yDist * attractiveF;
        if (xDist == 0 && yDist == 0) {
          const sign = i < int(float_j) ? 1 : -1;
          dx -= sign * attractiveF;
          dy -= sign * attractiveF;
        }
      }
    }
    return [dx, dy];
  }
  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    let dx = 0, dy = 0;
    if (i >= VERTEX_COUNT) {
      this.u_Data[i] = currentNode;
      return;
    }

    // [gravity, fx, fy, 0]
    const nodeAttributes = this.u_AttributeArray[i];

    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {
      // the node is fixed
      this.u_Data[i] = [
        nodeAttributes[1],
        nodeAttributes[2],
        currentNode[2],
        currentNode[3]
      ];
      return;
    }

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    dx += repulsive[0];
    dy += repulsive[1];
    // attractive
    const attractive = this.calcAttractive(i, currentNode);
    dx += attractive[0];
    dy += attractive[1];
    // gravity
    const gravity = this.calcGravity(currentNode, nodeAttributes);
    dx -= gravity[0];
    dy -= gravity[1];
    // speed
    dx *= this.u_Speed;
    dy *= this.u_Speed;

    // move
    const distLength = sqrt(dx * dx + dy * dy);
    if (distLength > 0.0) {
      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);
      this.u_Data[i] = [
        currentNode[0] + dx / distLength * limitedDist,
        currentNode[1] + dy / distLength * limitedDist,
        currentNode[2],
        currentNode[3]
      ];
    }
  }
}
`;zi.fruchtermanBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}';zi.clusterCode=`
import { globalInvocationID } from 'g-webgpu';
const VERTEX_COUNT;
const CLUSTER_COUNT;
@numthreads(1, 1, 1)
class CalcCenter {
  @in
  u_Data: vec4[];
  @in
  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]
  @in @out
  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]
  @main
  compute() {
    const i = globalInvocationID.x;
    const center = this.u_ClusterCenters[i];
    let sumx = 0;
    let sumy = 0;
    let count = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      const attributes = this.u_NodeAttributes[j];
      const clusterIdx = int(attributes[0]);
      const vertex = this.u_Data[j];
      if (clusterIdx == i) {
        sumx += vertex.x;
        sumy += vertex.y;
        count += 1;
      }
    }
    this.u_ClusterCenters[i] = [
      sumx / count,
      sumy / count,
      count,
      i
    ];
  }
}
`;zi.clusterBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}';var pde=we&&we.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),gd=we&&we.__awaiter||function(r,e,t,n){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function A(f){try{u(n.next(f))}catch(l){o(l)}}function s(f){try{u(n.throw(f))}catch(l){o(l)}}function u(f){f.done?i(f.value):a(f.value).then(A,s)}u((n=n.apply(r,e||[])).next())})},pd=we&&we.__generator||function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function A(u){return function(f){return s([u,f])}}function s(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(n=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,a=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(f){u=[6,f],a=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(jc,"__esModule",{value:!0});jc.FruchtermanGPULayout=void 0;var yde=qr,du=zr(),_M=pP,SM=xa,MM=zi,mde=Uo,wde=function(r){pde(e,r);function e(t){var n=r.call(this)||this;return n.maxIteration=1e3,n.gravity=10,n.speed=1,n.clustering=!1,n.clusterField="cluster",n.clusterGravity=10,n.workerEnabled=!1,n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},e.prototype.execute=function(){return gd(this,void 0,void 0,function(){var t,n,a,i,o,A=this;return pd(this,function(s){switch(s.label){case 0:return t=this,n=t.nodes,!n||n.length===0?(t.onLayoutEnd&&t.onLayoutEnd(),[2]):(!t.width&&typeof window<"u"&&(t.width=window.innerWidth),!t.height&&typeof window<"u"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]),a=t.center,n.length===1?(n[0].x=a[0],n[0].y=a[1],t.onLayoutEnd&&t.onLayoutEnd(),[2]):(i={},o={},n.forEach(function(u,f){(0,du.isNumber)(u.x)||(u.x=Math.random()*A.width),(0,du.isNumber)(u.y)||(u.y=Math.random()*A.height),i[u.id]=u,o[u.id]=f}),t.nodeMap=i,t.nodeIdxMap=o,[4,t.run()]));case 1:return s.sent(),[2]}})})},e.prototype.executeWithWorker=function(t,n){return gd(this,void 0,void 0,function(){var a,i,o,A,s,u=this;return pd(this,function(f){switch(f.label){case 0:return a=this,i=a.nodes,o=a.center,!i||i.length===0?[2]:i.length===1?(i[0].x=o[0],i[0].y=o[1],[2]):(A={},s={},i.forEach(function(l,c){(0,du.isNumber)(l.x)||(l.x=Math.random()*u.width),(0,du.isNumber)(l.y)||(l.y=Math.random()*u.height),A[l.id]=l,s[l.id]=c}),a.nodeMap=A,a.nodeIdxMap=s,[4,a.run(t,n)]);case 1:return f.sent(),[2]}})})},e.prototype.run=function(t,n){return gd(this,void 0,void 0,function(){var a,i,o,A,s,u,f,l,c,h,d,v,g,p,y,m,w,B,E,b,C,_,x,M,S,I,D=this;return pd(this,function(O){switch(O.label){case 0:for(a=this,i=a.nodes,o=a.edges,A=a.maxIteration,s=a.center,u=a.height*a.width,f=Math.sqrt(u)/10,l=u/(i.length+1),c=Math.sqrt(l),h=a.speed,d=a.clustering,v=(0,SM.attributesToTextureData)([a.clusterField],i),g=v.array,p=v.count,i.forEach(function(F,U){var Q=0,N=0;(0,du.isNumber)(F.fx)&&(0,du.isNumber)(F.fy)&&(Q=F.fx||.001,N=F.fy||.001),g[4*U+1]=Q,g[4*U+2]=N}),y=i.length,m=(0,SM.buildTextureData)(i,o),w=m.maxEdgePerVetex,B=m.array,E=a.workerEnabled,E?b=_M.World.create({canvas:t,engineOptions:{supportCompute:!0}}):b=_M.World.create({engineOptions:{supportCompute:!0}}),C=a.onLayoutEnd,_=[],x=0;x<p;x++)_.push(0,0,0,0);return M=b.createKernel(MM.fruchtermanBundle).setDispatch([y,1,1]).setBinding({u_Data:B,u_K:c,u_K2:l,u_Gravity:a.gravity,u_ClusterGravity:a.clusterGravity||a.gravity||1,u_Speed:h,u_MaxDisplace:f,u_Clustering:d?1:0,u_Center:s,u_AttributeArray:g,u_ClusterCenters:_,MAX_EDGE_PER_VERTEX:w,VERTEX_COUNT:y}),d&&(S=b.createKernel(MM.clusterBundle).setDispatch([p,1,1]).setBinding({u_Data:B,u_NodeAttributes:g,u_ClusterCenters:_,VERTEX_COUNT:y,CLUSTER_COUNT:p})),I=function(){return gd(D,void 0,void 0,function(){var F,U;return pd(this,function(Q){switch(Q.label){case 0:F=0,Q.label=1;case 1:return F<A?[4,M.execute()]:[3,6];case 2:return Q.sent(),d?(S.setBinding({u_Data:M}),[4,S.execute()]):[3,4];case 3:Q.sent(),M.setBinding({u_ClusterCenters:S}),Q.label=4;case 4:M.setBinding({u_MaxDisplace:f*=.99}),Q.label=5;case 5:return F++,[3,1];case 6:return[4,M.getOutput()];case 7:return U=Q.sent(),t?n.postMessage({type:mde.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:U}):i.forEach(function(N,R){var J=U[4*R],re=U[4*R+1];N.x=J,N.y=re}),C&&C(),[2]}})})},[4,I()];case 1:return O.sent(),[2]}})})},e.prototype.getType=function(){return"fruchterman-gpu"},e}(yde.Base);jc.FruchtermanGPULayout=wde;var $c={},Ki={};Object.defineProperty(Ki,"__esModule",{value:!0});Ki.aveMovementBundle=Ki.aveMovementCode=Ki.gForceBundle=Ki.gForceCode=void 0;Ki.gForceCode=`
import { globalInvocationID } from 'g-webgpu';

const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
const SHIFT_20 = 1048576;

@numthreads(1, 1, 1)
class GGForce {
  @in @out
  u_Data: vec4[];

  @in
  u_damping: float;
  
  @in
  u_maxSpeed: float;

  @in
  u_minMovement: float;

  @in
  u_AveMovement: vec4[];

  @in
  u_coulombDisScale: float;

  @in
  u_factor: float;

  @in
  u_NodeAttributeArray1: vec4[];

  @in
  u_NodeAttributeArray2: vec4[];

  @in
  u_interval: float;

  unpack_float(packedValue: float): ivec2 {
    const packedIntValue = int(packedValue);
    const v0 = packedIntValue / SHIFT_20;
    return [v0, packedIntValue - v0 * SHIFT_20];
  }

  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let ax = 0, ay = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const vx = currentNode[0] - nextNode[0];
        const vy = currentNode[1] - nextNode[1];
        const dist = sqrt(vx * vx + vy * vy) + 0.01;
        const n_dist = (dist + 0.1) * this.u_coulombDisScale;
        const direx = vx / dist;
        const direy = vy / dist;
        const attributesi = this.u_NodeAttributeArray1[i];
        const attributesj = this.u_NodeAttributeArray1[j];
        const massi = attributesi[0];
        const nodeStrengthi = attributesi[2];
        const nodeStrengthj = attributesj[2];
        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;
        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);
        const param = nodeStrength * this.u_factor / (n_dist * n_dist);
        ax += direx * param;
        ay += direy * param;
      }
    }
    return [ax, ay];
  }

  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {
    // note: attributes2 = [centerX, centerY, gravity, 0]

    const vx = currentNode[0] - attributes2[0];
    const vy = currentNode[1] - attributes2[1];
    
    const ax = vx * attributes2[2];
    const ay = vy * attributes2[2];
    
    return [ax, ay];
  }

  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {
    // note: attributes1 = [mass, degree, nodeSterngth, 0]

    const mass = attributes1[0];
    let ax = 0, ay = 0;
    // const arr_offset = int(floor(currentNode[2] + 0.5));
    // const length = int(floor(currentNode[3] + 0.5));

    const compressed = this.unpack_float(currentNode[2]);
    const length = compressed[0];
    const arr_offset = compressed[1];

    const node_buffer: vec4;
    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + 4 * p; // i 节点的第 p 条边开始的小格子位置
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)]; // 大格子，大格子位置=小个子位置 / 4，
      }

      let float_j: float = node_buffer[0];

      const nextNode = this.u_Data[int(float_j)];
      const vx = nextNode[0] - currentNode[0];
      const vy = nextNode[1] - currentNode[1];
      const dist = sqrt(vx * vx + vy * vy) + 0.01;
      const direx = vx / dist;
      const direy = vy / dist;
      const edgeLength = node_buffer[1];
      const edgeStrength = node_buffer[2];
      const diff: float = edgeLength - dist;//edgeLength
      // const param = diff * this.u_stiffness / mass; //
      const param = diff * edgeStrength / mass; // 
      ax -= direx * param;
      ay -= direy * param;
    }
    return [ax, ay];
  }

  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    const movement = u_AveMovement[0];
    let ax = 0, ay = 0;

    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {
      this.u_Data[i] = currentNode;
      return;
    }

    // 每个节点属性占两个数组中各一格
    // [mass, degree, nodeStrength, fx]
    const nodeAttributes1 = this.u_NodeAttributeArray1[i];
    // [centerX, centerY, centerGravity, fy]
    const nodeAttributes2 = this.u_NodeAttributeArray2[i];

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    ax += repulsive[0];
    ay += repulsive[1];

    // attractive
    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);
    ax += attractive[0];
    ay += attractive[1];

    // gravity
    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);
    ax -= gravity[0];
    ay -= gravity[1];

    // speed
    const param = this.u_interval * this.u_damping;
    let vx = ax * param;
    let vy = ay * param;
    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;
    if (vlength > this.u_maxSpeed) {
      const param2 = this.u_maxSpeed / vlength;
      vx = param2 * vx;
      vy = param2 * vy;
    }

    // move
    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {
      this.u_Data[i] = [
        nodeAttributes1[3],
        nodeAttributes2[3],
        currentNode[2],
        0
      ];
    } else {
      const distx = vx * this.u_interval;
      const disty = vy * this.u_interval;
      const distLength = sqrt(distx * distx + disty * disty);
      this.u_Data[i] = [
        currentNode[0] + distx,
        currentNode[1] + disty,
        currentNode[2],
        distLength
      ];
    }
    
    // the avarage move distance
    // need to share memory
    
  }
}
`;Ki.gForceBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}';Ki.aveMovementCode=`
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class CalcAveMovement {
  @in
  u_Data: vec4[];
  @in
  u_iter: float;
  @in @out
  u_AveMovement: vec4[];
  @main
  compute() {
    let movement = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      const vertex = this.u_Data[j];
      movement += vertex[3];
    }
    movement = movement / float(VERTEX_COUNT);
    this.u_AveMovement[0] = [movement, 0, 0, 0];
  }
}
`;Ki.aveMovementBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}';var Bde=we&&we.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Vy=we&&we.__awaiter||function(r,e,t,n){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function A(f){try{u(n.next(f))}catch(l){o(l)}}function s(f){try{u(n.throw(f))}catch(l){o(l)}}function u(f){f.done?i(f.value):a(f.value).then(A,s)}u((n=n.apply(r,e||[])).next())})},Xy=we&&we.__generator||function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function A(u){return function(f){return s([u,f])}}function s(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(n=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,a=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(f){u=[6,f],a=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty($c,"__esModule",{value:!0});$c.GForceGPULayout=void 0;var Ede=qr,mo=zr(),IM=pP,wo=xa,bde=ep,TM=Ki,xde=Uo,Cde=function(r){Bde(e,r);function e(t){var n=r.call(this)||this;return n.maxIteration=1e3,n.edgeStrength=200,n.nodeStrength=1e3,n.coulombDisScale=.005,n.damping=.9,n.maxSpeed=1e3,n.minMovement=.5,n.interval=.02,n.factor=1,n.linkDistance=1,n.gravity=10,n.workerEnabled=!1,n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},e.prototype.execute=function(){return Vy(this,void 0,void 0,function(){var t,n,a,i,o;return Xy(this,function(A){switch(A.label){case 0:return t=this,n=t.nodes,!n||n.length===0?(t.onLayoutEnd&&t.onLayoutEnd(),[2]):(!t.width&&typeof window<"u"&&(t.width=window.innerWidth),!t.height&&typeof window<"u"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]),a=t.center,n.length===1?(n[0].x=a[0],n[0].y=a[1],t.onLayoutEnd&&t.onLayoutEnd(),[2]):(i={},o={},n.forEach(function(s,u){(0,mo.isNumber)(s.x)||(s.x=Math.random()*t.width),(0,mo.isNumber)(s.y)||(s.y=Math.random()*t.height),i[s.id]=s,o[s.id]=u}),t.nodeMap=i,t.nodeIdxMap=o,t.nodeStrength=(0,wo.proccessToFunc)(t.nodeStrength,1),t.edgeStrength=(0,wo.proccessToFunc)(t.edgeStrength,1),[4,t.run()]));case 1:return A.sent(),[2]}})})},e.prototype.executeWithWorker=function(t,n){var a=this,i=a.nodes,o=a.center;if(!(!i||i.length===0)){if(i.length===1){i[0].x=o[0],i[0].y=o[1];return}var A={},s={};i.forEach(function(u,f){(0,mo.isNumber)(u.x)||(u.x=Math.random()*a.width),(0,mo.isNumber)(u.y)||(u.y=Math.random()*a.height),A[u.id]=u,s[u.id]=f}),a.nodeMap=A,a.nodeIdxMap=s,a.nodeStrength=(0,wo.proccessToFunc)(a.nodeStrength,1),a.edgeStrength=(0,wo.proccessToFunc)(a.edgeStrength,1),a.run(t,n)}},e.prototype.run=function(t,n){return Vy(this,void 0,void 0,function(){var a,i,o,A,s,u,f,l,c,h,d,v,g,p,y,m,w,B,E,b,C,_,x,M,S,I,D,O=this;return Xy(this,function(F){switch(F.label){case 0:for(a=this,i=a.nodes,o=a.edges,A=a.maxIteration,!a.width&&typeof window<"u"&&(a.width=window.innerWidth),!a.height&&typeof window<"u"&&(a.height=window.innerHeight),s=i.length,a.linkDistance=(0,wo.proccessToFunc)(a.linkDistance),a.edgeStrength=(0,wo.proccessToFunc)(a.edgeStrength),u=(0,wo.buildTextureDataWithTwoEdgeAttr)(i,o,a.linkDistance,a.edgeStrength),f=u.maxEdgePerVetex,l=u.array,a.degrees=(0,bde.getDegree)(i.length,a.nodeIdxMap,o).map(function(U){return U.all}),c=[],h=[],d=[],v=[],g=[],p=[],y=[],a.getMass||(a.getMass=function(U){return a.degrees[a.nodeIdxMap[U.id]]||1}),m=a.gravity,w=a.center,i.forEach(function(U,Q){c.push(a.getMass(U)),h.push(a.nodeStrength(U)),a.degrees[Q]||(a.degrees[Q]=0);var N=[w[0],w[1],m];if(a.getCenter){var R=a.getCenter(U,a.degrees[Q]);R&&(0,mo.isNumber)(R[0])&&(0,mo.isNumber)(R[1])&&(0,mo.isNumber)(R[2])&&(N=R)}d.push(N[0]),v.push(N[1]),g.push(N[2]),(0,mo.isNumber)(U.fx)&&(0,mo.isNumber)(U.fy)?(p.push(U.fx||.001),y.push(U.fy||.001)):(p.push(0),y.push(0))}),B=(0,wo.arrayToTextureData)([c,a.degrees,h,p]),E=(0,wo.arrayToTextureData)([d,v,g,y]),b=a.workerEnabled,b?C=IM.World.create({canvas:t,engineOptions:{supportCompute:!0}}):C=IM.World.create({engineOptions:{supportCompute:!0}}),_=a.onLayoutEnd,x=[],l.forEach(function(U){x.push(U)}),M=0;M<4;M++)x.push(0);return S=C.createKernel(TM.gForceBundle).setDispatch([s,1,1]).setBinding({u_Data:l,u_damping:a.damping,u_maxSpeed:a.maxSpeed,u_minMovement:a.minMovement,u_coulombDisScale:a.coulombDisScale,u_factor:a.factor,u_NodeAttributeArray1:B,u_NodeAttributeArray2:E,MAX_EDGE_PER_VERTEX:f,VERTEX_COUNT:s,u_AveMovement:x,u_interval:a.interval}),I=C.createKernel(TM.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:l,VERTEX_COUNT:s,u_AveMovement:[0,0,0,0]}),D=function(){return Vy(O,void 0,void 0,function(){var U,Q,N;return Xy(this,function(R){switch(R.label){case 0:U=0,R.label=1;case 1:return U<A?[4,S.execute()]:[3,5];case 2:return R.sent(),I.setBinding({u_Data:S}),[4,I.execute()];case 3:R.sent(),Q=Math.max(.02,a.interval-U*.002),S.setBinding({u_interval:Q,u_AveMovement:I}),R.label=4;case 4:return U++,[3,1];case 5:return[4,S.getOutput()];case 6:return N=R.sent(),t?n.postMessage({type:xde.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:N}):i.forEach(function(J,re){var ee=N[4*re],q=N[4*re+1];J.x=ee,J.y=q}),_&&_(),[2]}})})},[4,D()];case 1:return F.sent(),[2]}})})},e.prototype.getType=function(){return"gForce-gpu"},e}(Ede.Base);$c.GForceGPULayout=Cde;var Wc={},_de=we&&we.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Wc,"__esModule",{value:!0});Wc.ComboForceLayout=void 0;var Sde=qr,Vt=zr(),Mde=function(r){_de(e,r);function e(t){var n=r.call(this)||this;return n.center=[0,0],n.maxIteration=100,n.gravity=10,n.comboGravity=10,n.linkDistance=10,n.alpha=1,n.alphaMin=.001,n.alphaDecay=1-Math.pow(n.alphaMin,1/300),n.alphaTarget=0,n.velocityDecay=.6,n.edgeStrength=.6,n.nodeStrength=30,n.preventOverlap=!1,n.preventNodeOverlap=!1,n.preventComboOverlap=!1,n.collideStrength=void 0,n.nodeCollideStrength=.5,n.comboCollideStrength=.5,n.comboSpacing=20,n.comboPadding=10,n.optimizeRangeFactor=1,n.onTick=function(){},n.onLayoutEnd=function(){},n.depthAttractiveForceScale=1,n.depthRepulsiveForceScale=2,n.nodes=[],n.edges=[],n.combos=[],n.comboTrees=[],n.width=300,n.height=300,n.bias=[],n.nodeMap={},n.oriComboMap={},n.indexMap={},n.comboMap={},n.previousLayouted=!1,n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},e.prototype.execute=function(){var t=this,n=t.nodes,a=t.center;if(t.comboTree={id:"comboTreeRoot",depth:-1,children:t.comboTrees},!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}if(n.length===1){n[0].x=a[0],n[0].y=a[1],t.onLayoutEnd&&t.onLayoutEnd();return}t.initVals(),t.run(),t.onLayoutEnd&&t.onLayoutEnd()},e.prototype.run=function(){var t=this,n=t.nodes,a=t.previousLayouted?t.maxIteration/5:t.maxIteration;!t.width&&typeof window<"u"&&(t.width=window.innerWidth),!t.height&&typeof window<"u"&&(t.height=window.innerHeight);var i=t.center,o=t.velocityDecay,A=t.comboMap;t.previousLayouted||t.initPos(A);for(var s=function(c){var h=[];n.forEach(function(d,v){h[v]={x:0,y:0}}),t.applyCalculate(h),t.applyComboCenterForce(h),n.forEach(function(d,v){!(0,Vt.isNumber)(d.x)||!(0,Vt.isNumber)(d.y)||(d.x+=h[v].x*o,d.y+=h[v].y*o)}),t.alpha+=(t.alphaTarget-t.alpha)*t.alphaDecay,t.onTick()},u=0;u<a;u++)s();var f=[0,0];n.forEach(function(c){!(0,Vt.isNumber)(c.x)||!(0,Vt.isNumber)(c.y)||(f[0]+=c.x,f[1]+=c.y)}),f[0]/=n.length,f[1]/=n.length;var l=[i[0]-f[0],i[1]-f[1]];n.forEach(function(c,h){!(0,Vt.isNumber)(c.x)||!(0,Vt.isNumber)(c.y)||(c.x+=l[0],c.y+=l[1])}),t.combos.forEach(function(c){var h=A[c.id];h&&h.empty&&(c.x=h.cx||c.x,c.y=h.cy||c.y)}),t.previousLayouted=!0},e.prototype.initVals=function(){var t=this,n=t.edges,a=t.nodes,i=t.combos,o={},A={},s={};a.forEach(function(U,Q){A[U.id]=U,s[U.id]=Q}),t.nodeMap=A,t.indexMap=s;var u={};i.forEach(function(U){u[U.id]=U}),t.oriComboMap=u,t.comboMap=t.getComboMap();var f=t.preventOverlap;t.preventComboOverlap=t.preventComboOverlap||f,t.preventNodeOverlap=t.preventNodeOverlap||f;var l=t.collideStrength;l&&(t.comboCollideStrength=l,t.nodeCollideStrength=l),t.comboCollideStrength=t.comboCollideStrength?t.comboCollideStrength:0,t.nodeCollideStrength=t.nodeCollideStrength?t.nodeCollideStrength:0;for(var c=0;c<n.length;++c){var h=(0,Vt.getEdgeTerminal)(n[c],"source"),d=(0,Vt.getEdgeTerminal)(n[c],"target");o[h]?o[h]++:o[h]=1,o[d]?o[d]++:o[d]=1}for(var v=[],c=0;c<n.length;++c){var h=(0,Vt.getEdgeTerminal)(n[c],"source"),d=(0,Vt.getEdgeTerminal)(n[c],"target");v[c]=o[h]/(o[h]+o[d])}this.bias=v;var g=t.nodeSize,p=t.nodeSpacing,y,m;if((0,Vt.isNumber)(p)?m=function(){return p}:(0,Vt.isFunction)(p)?m=p:m=function(){return 0},this.nodeSpacing=m,!g)y=function(U){if(U.size){if((0,Vt.isArray)(U.size)){var Q=U.size[0]>U.size[1]?U.size[0]:U.size[1];return Q/2}if((0,Vt.isObject)(U.size)){var Q=U.size.width>U.size.height?U.size.width:U.size.height;return Q/2}return U.size/2}return 10};else if((0,Vt.isFunction)(g))y=function(U){return g(U)};else if((0,Vt.isArray)(g)){var w=g[0]>g[1]?g[0]:g[1],B=w/2;y=function(U){return B}}else{var E=g/2;y=function(U){return E}}this.nodeSize=y;var b=t.comboSpacing,C;(0,Vt.isNumber)(b)?C=function(){return b}:(0,Vt.isFunction)(b)?C=b:C=function(){return 0},this.comboSpacing=C;var _=t.comboPadding,x;(0,Vt.isNumber)(_)?x=function(){return _}:(0,Vt.isArray)(_)?x=function(){return Math.max.apply(null,_)}:(0,Vt.isFunction)(_)?x=_:x=function(){return 0},this.comboPadding=x;var M=this.linkDistance,S;M||(M=10),(0,Vt.isNumber)(M)?S=function(U){return M}:S=M,this.linkDistance=S;var I=this.edgeStrength,D;I||(I=1),(0,Vt.isNumber)(I)?D=function(U){return I}:D=I,this.edgeStrength=D;var O=this.nodeStrength,F;O||(O=30),(0,Vt.isNumber)(O)?F=function(U){return O}:F=O,this.nodeStrength=F},e.prototype.initPos=function(t){var n=this,a=n.nodes;a.forEach(function(i,o){var A=i.comboId,s=t[A];A&&s?(i.x=s.cx+100/(o+1),i.y=s.cy+100/(o+1)):(i.x=100/(o+1),i.y=100/(o+1))})},e.prototype.getComboMap=function(){var t=this,n=t.nodeMap,a=t.comboTrees,i=t.oriComboMap,o={};return(a||[]).forEach(function(A){var s=[];(0,Vt.traverseTreeUp)(A,function(u){if(u.itemType==="node"||!i[u.id])return!0;if(o[u.id]===void 0){var f={id:u.id,name:u.id,cx:0,cy:0,count:0,depth:t.oriComboMap[u.id].depth||0,children:[]};o[u.id]=f}var l=u.children;l&&l.forEach(function(d){if(!o[d.id]&&!n[d.id])return!0;s.push(d)});var c=o[u.id];if(c.cx=0,c.cy=0,s.length===0){c.empty=!0;var h=i[u.id];c.cx=h.x,c.cy=h.y}return s.forEach(function(d){if(c.count++,d.itemType!=="node"){var v=o[d.id];(0,Vt.isNumber)(v.cx)&&(c.cx+=v.cx),(0,Vt.isNumber)(v.cy)&&(c.cy+=v.cy);return}var g=n[d.id];g&&((0,Vt.isNumber)(g.x)&&(c.cx+=g.x),(0,Vt.isNumber)(g.y)&&(c.cy+=g.y))}),c.cx/=c.count||1,c.cy/=c.count||1,c.children=s,!0})}),o},e.prototype.applyComboCenterForce=function(t){var n=this,a=n.gravity,i=n.comboGravity||a,o=this.alpha,A=n.comboTrees,s=n.indexMap,u=n.nodeMap,f=n.comboMap;(A||[]).forEach(function(l){(0,Vt.traverseTreeUp)(l,function(c){if(c.itemType==="node")return!0;var h=f[c.id];if(!h)return!0;var d=f[c.id],v=(d.depth+1)/10*.5,g=d.cx,p=d.cy;return d.cx=0,d.cy=0,d.children.forEach(function(y){if(y.itemType!=="node"){var m=f[y.id];m&&(0,Vt.isNumber)(m.cx)&&(d.cx+=m.cx),m&&(0,Vt.isNumber)(m.cy)&&(d.cy+=m.cy);return}var w=u[y.id],B=w.x-g||.005,E=w.y-p||.005,b=Math.sqrt(B*B+E*E),C=s[w.id],_=i*o/b*v;t[C].x-=B*_,t[C].y-=E*_,(0,Vt.isNumber)(w.x)&&(d.cx+=w.x),(0,Vt.isNumber)(w.y)&&(d.cy+=w.y)}),d.cx/=d.count||1,d.cy/=d.count||1,!0})})},e.prototype.applyCalculate=function(t){var n=this,a=n.comboMap,i=n.nodes,o={};i.forEach(function(s,u){i.forEach(function(f,l){if(!(u<l)){var c=s.x-f.x||.005,h=s.y-f.y||.005,d=c*c+h*h,v=Math.sqrt(d);d<1&&(d=v),o["".concat(s.id,"-").concat(f.id)]={vx:c,vy:h,vl2:d,vl:v},o["".concat(f.id,"-").concat(s.id)]={vl2:d,vl:v,vx:-c,vy:-h}}})}),n.updateComboSizes(a),n.calRepulsive(t,o),n.calAttractive(t,o);var A=n.preventComboOverlap;A&&n.comboNonOverlapping(t,a)},e.prototype.updateComboSizes=function(t){var n=this,a=n.comboTrees,i=n.nodeMap,o=n.nodeSize,A=n.comboSpacing,s=n.comboPadding;(a||[]).forEach(function(u){var f=[];(0,Vt.traverseTreeUp)(u,function(l){if(l.itemType==="node")return!0;var c=t[l.id];if(!c)return!1;var h=l.children;h&&h.forEach(function(g){!t[g.id]&&!i[g.id]||f.push(g)}),c.minX=1/0,c.minY=1/0,c.maxX=-1/0,c.maxY=-1/0,f.forEach(function(g){if(g.itemType!=="node")return!0;var p=i[g.id];if(!p)return!0;var y=o(p),m=p.x-y,w=p.y-y,B=p.x+y,E=p.y+y;c.minX>m&&(c.minX=m),c.minY>w&&(c.minY=w),c.maxX<B&&(c.maxX=B),c.maxY<E&&(c.maxY=E)});var d=n.oriComboMap[l.id].size||10;(0,Vt.isArray)(d)&&(d=d[0]);var v=Math.max(c.maxX-c.minX,c.maxY-c.minY,d);return c.r=v/2+A(c)/2+s(c),!0})})},e.prototype.comboNonOverlapping=function(t,n){var a=this,i=a.comboTree,o=a.comboCollideStrength,A=a.indexMap,s=a.nodeMap;(0,Vt.traverseTreeUp)(i,function(u){if(!n[u.id]&&!s[u.id]&&u.id!=="comboTreeRoot")return!1;var f=u.children;return f&&f.length>1&&f.forEach(function(l,c){if(l.itemType==="node")return!1;var h=n[l.id];h&&f.forEach(function(d,v){if(c<=v||d.itemType==="node")return!1;var g=n[d.id];if(!g)return!1;var p=h.cx-g.cx||.005,y=h.cy-g.cy||.005,m=p*p+y*y,w=h.r||1,B=g.r||1,E=w+B,b=B*B,C=w*w;if(m<E*E){var _=l.children;if(!_||_.length===0)return!1;var x=d.children;if(!x||x.length===0)return!1;var M=Math.sqrt(m),S=(E-M)/M*o,I=p*S,D=y*S,O=b/(C+b),F=1-O;_.forEach(function(U){if(U.itemType!=="node")return!1;if(s[U.id]){var Q=A[U.id];x.forEach(function(N){if(N.itemType!=="node"||!s[N.id])return!1;var R=A[N.id];t[Q].x+=I*O,t[Q].y+=D*O,t[R].x-=I*F,t[R].y-=D*F})}})}})}),!0})},e.prototype.calRepulsive=function(t,n){var a=this,i=a.nodes,o=a.width*a.optimizeRangeFactor,A=a.nodeStrength,s=a.alpha,u=a.nodeCollideStrength,f=a.preventNodeOverlap,l=a.nodeSize,c=a.nodeSpacing,h=a.depthRepulsiveForceScale,d=a.center;i.forEach(function(v,g){if(!(!v.x||!v.y)){if(d){var p=a.gravity,y=v.x-d[0]||.005,m=v.y-d[1]||.005,w=Math.sqrt(y*y+m*m);t[g].x-=y*p*s/w,t[g].y-=m*p*s/w}i.forEach(function(B,E){if(g!==E&&!(!B.x||!B.y)){var b=n["".concat(v.id,"-").concat(B.id)],C=b.vl2,_=b.vl;if(!(_>o)){var x=n["".concat(v.id,"-").concat(B.id)],M=x.vx,S=x.vy,I=Math.log(Math.abs(B.depth-v.depth)/10)+1||1;I=I<1?1:I,B.comboId!==v.comboId&&(I+=1);var D=I?Math.pow(h,I):1,O=A(B)*s/C*D;if(t[g].x+=M*O,t[g].y+=S*O,g<E&&f){var F=l(v)+c(v)||1,U=l(B)+c(B)||1,Q=F+U;if(C<Q*Q){var N=(Q-_)/_*u,R=U*U,J=R/(F*F+R),re=M*N,ee=S*N;t[g].x+=re*J,t[g].y+=ee*J,J=1-J,t[E].x-=re*J,t[E].y-=ee*J}}}}})}})},e.prototype.calAttractive=function(t,n){var a=this,i=a.edges,o=a.linkDistance,A=a.alpha,s=a.edgeStrength,u=a.bias,f=a.depthAttractiveForceScale;i.forEach(function(l,c){var h=(0,Vt.getEdgeTerminal)(l,"source"),d=(0,Vt.getEdgeTerminal)(l,"target");if(!(!h||!d||h===d)){var v=a.indexMap[h],g=a.indexMap[d],p=a.nodeMap[h],y=a.nodeMap[d];if(!(!p||!y)){var m=p.depth===y.depth?0:Math.log(Math.abs(p.depth-y.depth)/10);p.comboId===y.comboId&&(m=m/2);var w=m?Math.pow(f,m):1;if(p.comboId!==y.comboId&&w===1?w=f/2:p.comboId===y.comboId&&(w=2),!(!(0,Vt.isNumber)(y.x)||!(0,Vt.isNumber)(p.x)||!(0,Vt.isNumber)(y.y)||!(0,Vt.isNumber)(p.y))){var B=n["".concat(d,"-").concat(h)],E=B.vl,b=B.vx,C=B.vy,_=(E-o(l))/E*A*s(l)*w,x=b*_,M=C*_,S=u[c];t[g].x-=x*S,t[g].y-=M*S,t[v].x+=x*(1-S),t[v].y+=M*(1-S)}}}})},e.prototype.getType=function(){return"comboForce"},e}(Sde.Base);Wc.ComboForceLayout=Mde;var Zf={},FM;function yP(){if(FM)return Zf;FM=1;var r=we&&we.__extends||function(){var A=function(s,u){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,l){f.__proto__=l}||function(f,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(f[c]=l[c])},A(s,u)};return function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");A(s,u);function f(){this.constructor=s}s.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}}(),e=we&&we.__assign||function(){return e=Object.assign||function(A){for(var s,u=1,f=arguments.length;u<f;u++){s=arguments[u];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(A[l]=s[l])}return A},e.apply(this,arguments)};Object.defineProperty(Zf,"__esModule",{value:!0}),Zf.ComboCombinedLayout=void 0;var t=Uo,n=qr,a=zr(),i=_P(),o=function(A){r(s,A);function s(u){var f=A.call(this)||this;return f.center=[0,0],f.nodes=[],f.edges=[],f.combos=[],f.comboEdges=[],f.comboPadding=10,f.comboTrees=[],f.updateCfg(u),f}return s.prototype.getDefaultCfg=function(){return{}},s.prototype.execute=function(){var u=this,f=u.nodes,l=u.center;if(!f||f.length===0){u.onLayoutEnd&&u.onLayoutEnd();return}if(f.length===1){f[0].x=l[0],f[0].y=l[1],u.onLayoutEnd&&u.onLayoutEnd();return}u.initVals(),u.run(),u.onLayoutEnd&&u.onLayoutEnd()},s.prototype.run=function(){var u,f=this,l=f.nodes,c=f.edges,h=f.combos,d=f.comboEdges,v=f.center,g={};l.forEach(function(O){g[O.id]=O});var p={};h.forEach(function(O){p[O.id]=O});var y=f.getInnerGraphs(g),m=[],w=[],B={},E=!0;this.comboTrees.forEach(function(O){var F=y[O.id],U=e(e({},O),{x:F.x||p[O.id].x,y:F.y||p[O.id].y,fx:F.fx||p[O.id].fx,fy:F.fy||p[O.id].fy,mass:F.mass||p[O.id].mass,size:F.size});w.push(U),!isNaN(U.x)&&U.x!==0&&!isNaN(U.y)&&U.y!==0?E=!1:(U.x=Math.random()*100,U.y=Math.random()*100),m.push(O.id),(0,a.traverseTreeUp)(O,function(Q){return Q.id!==O.id&&(B[Q.id]=O.id),!0})}),l.forEach(function(O){if(!(O.comboId&&p[O.comboId])){var F=e({},O);w.push(F),!isNaN(F.x)&&F.x!==0&&!isNaN(F.y)&&F.y!==0?E=!1:(F.x=Math.random()*100,F.y=Math.random()*100),m.push(O.id)}});var b=[];if(c.concat(d).forEach(function(O){var F=B[O.source]||O.source,U=B[O.target]||O.target;F!==U&&m.includes(F)&&m.includes(U)&&b.push({source:F,target:U})}),w!=null&&w.length){if(w.length===1)w[0].x=v[0],w[0].y=v[1];else{var C={nodes:w,edges:b},_=this.outerLayout||new i.GForceLayout({gravity:1,factor:4,linkDistance:function(O,F,U){var Q,N,R=((((Q=F.size)===null||Q===void 0?void 0:Q[0])||30)+(((N=U.size)===null||N===void 0?void 0:N[0])||30))/2;return Math.min(R*1.5,700)}}),x=(u=_.getType)===null||u===void 0?void 0:u.call(_);if(_.updateCfg({center:v,kg:5,preventOverlap:!0,animate:!1}),E&&t.FORCE_LAYOUT_TYPE_MAP[x]){var M=w.length<100?new i.MDSLayout:new i.GridLayout;M.layout(C)}_.layout(C)}w.forEach(function(O){var F=y[O.id];if(!F){var U=g[O.id];U&&(U.x=O.x,U.y=O.y);return}F.visited=!0,F.x=O.x,F.y=O.y,F.nodes.forEach(function(Q){Q.x+=O.x,Q.y+=O.y})})}for(var S=Object.keys(y),I=function(O){var F=S[O],U=y[F];if(!U)return"continue";U.nodes.forEach(function(Q){U.visited||(Q.x+=U.x||0,Q.y+=U.y||0),g[Q.id]&&(g[Q.id].x=Q.x,g[Q.id].y=Q.y)}),p[F]&&(p[F].x=U.x,p[F].y=U.y)},D=S.length-1;D>=0;D--)I(D);return{nodes:l,edges:c,combos:h,comboEdges:d}},s.prototype.getInnerGraphs=function(u){var f=this,l=f.comboTrees,c=f.nodeSize,h=f.edges,d=f.comboPadding,v=f.spacing,g={},p=this.innerLayout||new i.ConcentricLayout({type:"concentric",sortBy:"id"});return p.center=[0,0],p.preventOverlap=!0,p.nodeSpacing=v,(l||[]).forEach(function(y){(0,a.traverseTreeUp)(y,function(m){var w,B=(d==null?void 0:d(m))||10;if((0,a.isArray)(B)&&(B=Math.max.apply(Math,B)),!((w=m.children)===null||w===void 0)&&w.length){var b=m.children.map(function(N){if(N.itemType==="combo")return g[N.id];var R=u[N.id]||{};return e(e({},R),N)}),C=b.map(function(N){return N.id}),_={nodes:b,edges:h.filter(function(N){return C.includes(N.source)&&C.includes(N.target)})},x=1/0;b.forEach(function(N){var R;N.size||(N.size=((R=g[N.id])===null||R===void 0?void 0:R.size)||(c==null?void 0:c(N))||[30,30]),(0,a.isNumber)(N.size)&&(N.size=[N.size,N.size]),x>N.size[0]&&(x=N.size[0]),x>N.size[1]&&(x=N.size[1])}),p.layout(_);var M=(0,a.getLayoutBBox)(b),S=M.minX,I=M.minY,D=M.maxX,O=M.maxY,F={x:(D+S)/2,y:(O+I)/2};_.nodes.forEach(function(N){N.x-=F.x,N.y-=F.y});var U=Math.max(D-S,x)+B*2,Q=Math.max(O-I,x)+B*2;g[m.id]={id:m.id,nodes:b,size:[U,Q]}}else if(m.itemType==="combo"){var E=B?[B*2,B*2]:[30,30];g[m.id]={id:m.id,nodes:[],size:E}}return!0})}),g},s.prototype.initVals=function(){var u=this,f=u.nodeSize,l=u.spacing,c,h;if((0,a.isNumber)(l)?h=function(){return l}:(0,a.isFunction)(l)?h=l:h=function(){return 0},this.spacing=h,!f)c=function(m){var w=h(m);if(m.size){if((0,a.isArray)(m.size)){var B=m.size[0]>m.size[1]?m.size[0]:m.size[1];return(B+w)/2}if((0,a.isObject)(m.size)){var B=m.size.width>m.size.height?m.size.width:m.size.height;return(B+w)/2}return(m.size+w)/2}return 10+w/2};else if((0,a.isFunction)(f))c=function(m){var w=f(m),B=h(m);if((0,a.isArray)(m.size)){var E=m.size[0]>m.size[1]?m.size[0]:m.size[1];return(E+B)/2}return((w||10)+B)/2};else if((0,a.isArray)(f)){var d=f[0]>f[1]?f[0]:f[1],v=d/2;c=function(m){return v+h(m)/2}}else{var g=f/2;c=function(m){return g+h(m)/2}}this.nodeSize=c;var p=u.comboPadding,y;(0,a.isNumber)(p)?y=function(){return p}:(0,a.isArray)(p)?y=function(){return Math.max.apply(null,p)}:(0,a.isFunction)(p)?y=p:y=function(){return 0},this.comboPadding=y},s.prototype.getType=function(){return"comboCombined"},s}(n.Base);return Zf.ComboCombinedLayout=o,Zf}var Vc={},HE={};Object.defineProperty(HE,"__esModule",{value:!0});var Ide=function(){function r(e){this.id=e.id||0,this.rx=e.rx,this.ry=e.ry,this.fx=0,this.fy=0,this.mass=e.mass,this.degree=e.degree,this.g=e.g||0}return r.prototype.distanceTo=function(e){var t=this.rx-e.rx,n=this.ry-e.ry;return Math.hypot(t,n)},r.prototype.setPos=function(e,t){this.rx=e,this.ry=t},r.prototype.resetForce=function(){this.fx=0,this.fy=0},r.prototype.addForce=function(e){var t=e.rx-this.rx,n=e.ry-this.ry,a=Math.hypot(t,n);a=a<1e-4?1e-4:a;var i=this.g*(this.degree+1)*(e.degree+1)/a;this.fx+=i*t/a,this.fy+=i*n/a},r.prototype.in=function(e){return e.contains(this.rx,this.ry)},r.prototype.add=function(e){var t=this.mass+e.mass,n=(this.rx*this.mass+e.rx*e.mass)/t,a=(this.ry*this.mass+e.ry*e.mass)/t,i=this.degree+e.degree,o={rx:n,ry:a,mass:t,degree:i};return new r(o)},r}();HE.default=Ide;var GE={};Object.defineProperty(GE,"__esModule",{value:!0});var Tde=function(){function r(e){this.xmid=e.xmid,this.ymid=e.ymid,this.length=e.length,this.massCenter=e.massCenter||[0,0],this.mass=e.mass||1}return r.prototype.getLength=function(){return this.length},r.prototype.contains=function(e,t){var n=this.length/2;return e<=this.xmid+n&&e>=this.xmid-n&&t<=this.ymid+n&&t>=this.ymid-n},r.prototype.NW=function(){var e=this.xmid-this.length/4,t=this.ymid+this.length/4,n=this.length/2,a={xmid:e,ymid:t,length:n},i=new r(a);return i},r.prototype.NE=function(){var e=this.xmid+this.length/4,t=this.ymid+this.length/4,n=this.length/2,a={xmid:e,ymid:t,length:n},i=new r(a);return i},r.prototype.SW=function(){var e=this.xmid-this.length/4,t=this.ymid-this.length/4,n=this.length/2,a={xmid:e,ymid:t,length:n},i=new r(a);return i},r.prototype.SE=function(){var e=this.xmid+this.length/4,t=this.ymid-this.length/4,n=this.length/2,a={xmid:e,ymid:t,length:n},i=new r(a);return i},r}();GE.default=Tde;var zE={};Object.defineProperty(zE,"__esModule",{value:!0});var Fde=function(){function r(e){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,e!=null&&(this.quad=e)}return r.prototype.insert=function(e){if(this.body==null){this.body=e;return}this._isExternal()?(this.quad&&(this.NW=new r(this.quad.NW()),this.NE=new r(this.quad.NE()),this.SW=new r(this.quad.SW()),this.SE=new r(this.quad.SE())),this._putBody(this.body),this._putBody(e),this.body=this.body.add(e)):(this.body=this.body.add(e),this._putBody(e))},r.prototype._putBody=function(e){this.quad&&(e.in(this.quad.NW())&&this.NW?this.NW.insert(e):e.in(this.quad.NE())&&this.NE?this.NE.insert(e):e.in(this.quad.SW())&&this.SW?this.SW.insert(e):e.in(this.quad.SE())&&this.SE&&this.SE.insert(e))},r.prototype._isExternal=function(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null},r.prototype.updateForce=function(e){if(!(this.body==null||e===this.body))if(this._isExternal())e.addForce(this.body);else{var t=this.quad?this.quad.getLength():0,n=this.body.distanceTo(e);t/n<this.theta?e.addForce(this.body):(this.NW&&this.NW.updateForce(e),this.NE&&this.NE.updateForce(e),this.SW&&this.SW.updateForce(e),this.SE&&this.SE.updateForce(e))}},r}();zE.default=Fde;var Lde=we&&we.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),KE=we&&we.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Vc,"__esModule",{value:!0});Vc.ForceAtlas2Layout=void 0;var Dde=qr,Bo=zr(),Ode=KE(HE),Ude=KE(GE),Nde=KE(zE),kde=function(r){Lde(e,r);function e(t){var n=r.call(this)||this;return n.center=[0,0],n.width=300,n.height=300,n.nodes=[],n.edges=[],n.kr=5,n.kg=1,n.mode="normal",n.preventOverlap=!1,n.dissuadeHubs=!1,n.barnesHut=void 0,n.maxIteration=0,n.ks=.1,n.ksmax=10,n.tao=.1,n.onLayoutEnd=function(){},n.prune=void 0,n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{}},e.prototype.execute=function(){var t=this,n=t.nodes,a=t.onLayoutEnd,i=t.prune,o=t.maxIteration;!t.width&&typeof window<"u"&&(t.width=window.innerWidth),!t.height&&typeof window<"u"&&(t.height=window.innerHeight);for(var A=[],s=n.length,u=0;u<s;u+=1){var f=n[u],l=10,c=10;(0,Bo.isNumber)(f.size)&&(l=f.size,c=f.size),(0,Bo.isArray)(f.size)?(isNaN(f.size[0])||(l=f.size[0]),isNaN(f.size[1])||(c=f.size[1])):(0,Bo.isObject)(f.size)&&(l=f.size.width,c=f.size.height),t.getWidth&&!isNaN(t.getWidth(f))&&(c=t.getWidth(f)),t.getHeight&&!isNaN(t.getHeight(f))&&(l=t.getHeight(f));var h=Math.max(l,c);A.push(h)}t.barnesHut===void 0&&s>250&&(t.barnesHut=!0),t.prune===void 0&&s>100&&(t.prune=!0),this.maxIteration===0&&!t.prune?(o=250,s<=200&&s>100?o=1e3:s>200&&(o=1200),this.maxIteration=o):this.maxIteration===0&&i&&(o=100,s<=200&&s>100?o=500:s>200&&(o=950),this.maxIteration=o),t.kr||(t.kr=50,s>100&&s<=500?t.kr=20:s>500&&(t.kr=1)),t.kg||(t.kg=20,s>100&&s<=500?t.kg=10:s>500&&(t.kg=1)),this.nodes=t.updateNodesByForces(A),a()},e.prototype.updateNodesByForces=function(t){for(var n=this,a=n.edges,i=n.maxIteration,o=n.nodes,A=a.filter(function(b){var C=(0,Bo.getEdgeTerminal)(b,"source"),_=(0,Bo.getEdgeTerminal)(b,"target");return C!==_}),s=o.length,u=A.length,f=[],l={},c={},h=[],d=0;d<s;d+=1)l[o[d].id]=d,f[d]=0,(o[d].x===void 0||isNaN(o[d].x))&&(o[d].x=Math.random()*1e3),(o[d].y===void 0||isNaN(o[d].y))&&(o[d].y=Math.random()*1e3),h.push({x:o[d].x,y:o[d].y});for(var d=0;d<u;d+=1){for(var v=void 0,g=void 0,p=0,y=0,m=0;m<s;m+=1){var w=(0,Bo.getEdgeTerminal)(A[d],"source"),B=(0,Bo.getEdgeTerminal)(A[d],"target");o[m].id===w?(v=o[m],p=m):o[m].id===B&&(g=o[m],y=m),c[d]={sourceIdx:p,targetIdx:y}}v&&(f[l[v.id]]+=1),g&&(f[l[g.id]]+=1)}var E=i;if(o=this.iterate(E,l,c,u,f,t),n.prune){for(var m=0;m<u;m+=1)f[c[m].sourceIdx]<=1?(o[c[m].sourceIdx].x=o[c[m].targetIdx].x,o[c[m].sourceIdx].y=o[c[m].targetIdx].y):f[c[m].targetIdx]<=1&&(o[c[m].targetIdx].x=o[c[m].sourceIdx].x,o[c[m].targetIdx].y=o[c[m].sourceIdx].y);n.prune=!1,n.barnesHut=!1,E=100,o=this.iterate(E,l,c,u,f,t)}return o},e.prototype.iterate=function(t,n,a,i,o,A){for(var s=this,u=s.nodes,f=s.kr,l=s.preventOverlap,c=s.barnesHut,h=u.length,d=0,v=100,g=t,p=50,y=[],m=[],w=[],B=0;B<h;B+=1)if(y[2*B]=0,y[2*B+1]=0,c){var E={id:B,rx:u[B].x,ry:u[B].y,mass:1,g:f,degree:o[B]};w[B]=new Ode.default(E)}for(;g>0;){for(var B=0;B<h;B+=1)m[2*B]=y[2*B],m[2*B+1]=y[2*B+1],y[2*B]=0,y[2*B+1]=0;y=this.getAttrForces(g,p,i,n,a,o,A,y),c&&(l&&g>p||!l)?y=this.getOptRepGraForces(y,w,o):y=this.getRepGraForces(g,p,y,v,A,o);var b=this.updatePos(y,m,d,o);u=b.nodes,d=b.sg,g--,s.tick&&s.tick()}return u},e.prototype.getAttrForces=function(t,n,a,i,o,A,s,u){for(var f=this,l=f.nodes,c=f.preventOverlap,h=f.dissuadeHubs,d=f.mode,v=f.prune,g=0;g<a;g+=1){var p=l[o[g].sourceIdx],y=o[g].sourceIdx,m=l[o[g].targetIdx],w=o[g].targetIdx;if(!(v&&(A[y]<=1||A[w]<=1))){var B=[m.x-p.x,m.y-p.y],E=Math.hypot(B[0],B[1]);E=E<1e-4?1e-4:E,B[0]=B[0]/E,B[1]=B[1]/E,c&&t<n&&(E=E-s[y]-s[w]);var b=E,C=b;d==="linlog"&&(b=Math.log(1+E),C=b),h&&(b=E/A[y],C=E/A[w]),c&&t<n&&E<=0?(b=0,C=0):c&&t<n&&E>0&&(b=E,C=E),u[2*i[p.id]]+=b*B[0],u[2*i[m.id]]-=C*B[0],u[2*i[p.id]+1]+=b*B[1],u[2*i[m.id]+1]-=C*B[1]}}return u},e.prototype.getRepGraForces=function(t,n,a,i,o,A){for(var s=this,u=s.nodes,f=s.preventOverlap,l=s.kr,c=s.kg,h=s.center,d=s.prune,v=u.length,g=0;g<v;g+=1){for(var p=g+1;p<v;p+=1)if(!(d&&(A[g]<=1||A[p]<=1))){var y=[u[p].x-u[g].x,u[p].y-u[g].y],m=Math.hypot(y[0],y[1]);m=m<1e-4?1e-4:m,y[0]=y[0]/m,y[1]=y[1]/m,f&&t<n&&(m=m-o[g]-o[p]);var w=l*(A[g]+1)*(A[p]+1)/m;f&&t<n&&m<0?w=i*(A[g]+1)*(A[p]+1):f&&t<n&&m===0?w=0:f&&t<n&&m>0&&(w=l*(A[g]+1)*(A[p]+1)/m),a[2*g]-=w*y[0],a[2*p]+=w*y[0],a[2*g+1]-=w*y[1],a[2*p+1]+=w*y[1]}var B=[u[g].x-h[0],u[g].y-h[1]],E=Math.hypot(B[0],B[1]);B[0]=B[0]/E,B[1]=B[1]/E;var b=c*(A[g]+1);a[2*g]-=b*B[0],a[2*g+1]-=b*B[1]}return a},e.prototype.getOptRepGraForces=function(t,n,a){for(var i=this,o=i.nodes,A=i.kg,s=i.center,u=i.prune,f=o.length,l=9e10,c=-9e10,h=9e10,d=-9e10,v=0;v<f;v+=1)u&&a[v]<=1||(n[v].setPos(o[v].x,o[v].y),o[v].x>=c&&(c=o[v].x),o[v].x<=l&&(l=o[v].x),o[v].y>=d&&(d=o[v].y),o[v].y<=h&&(h=o[v].y));for(var g=Math.max(c-l,d-h),p={xmid:(c+l)/2,ymid:(d+h)/2,length:g,massCenter:s,mass:f},y=new Ude.default(p),m=new Nde.default(y),v=0;v<f;v+=1)u&&a[v]<=1||n[v].in(y)&&m.insert(n[v]);for(var v=0;v<f;v+=1)if(!(u&&a[v]<=1)){n[v].resetForce(),m.updateForce(n[v]),t[2*v]-=n[v].fx,t[2*v+1]-=n[v].fy;var w=[o[v].x-s[0],o[v].y-s[1]],B=Math.hypot(w[0],w[1]);B=B<1e-4?1e-4:B,w[0]=w[0]/B,w[1]=w[1]/B;var E=A*(a[v]+1);t[2*v]-=E*w[0],t[2*v+1]-=E*w[1]}return t},e.prototype.updatePos=function(t,n,a,i){for(var o=this,A=o.nodes,s=o.ks,u=o.tao,f=o.prune,l=o.ksmax,c=A.length,h=[],d=[],v=0,g=0,p=0;p<c;p+=1)if(!(f&&i[p]<=1)){var y=[t[2*p]-n[2*p],t[2*p+1]-n[2*p+1]],m=Math.hypot(y[0],y[1]),w=[t[2*p]+n[2*p],t[2*p+1]+n[2*p+1]],B=Math.hypot(w[0],w[1]);h[p]=m,d[p]=B/2,v+=(i[p]+1)*h[p],g+=(i[p]+1)*d[p]}var E=a;a=u*g/v,E!==0&&(a=a>1.5*E?1.5*E:a);for(var p=0;p<c;p+=1)if(!(f&&i[p]<=1)&&!((0,Bo.isNumber)(A[p].fx)&&(0,Bo.isNumber)(A[p].fy))){var b=s*a/(1+a*Math.sqrt(h[p])),C=Math.hypot(t[2*p],t[2*p+1]);C=C<1e-4?1e-4:C;var _=l/C;b=b>_?_:b;var x=b*t[2*p],M=b*t[2*p+1];A[p].x+=x,A[p].y+=M}return{nodes:A,sg:a}},e}(Dde.Base);Vc.ForceAtlas2Layout=kde;var Xc={},jE={},$E={},WE={},Ou=we&&we.__assign||function(){return Ou=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},Ou.apply(this,arguments)};Object.defineProperty(WE,"__esModule",{value:!0});var Pde=function(){function r(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return r.prototype.init=function(e,t,n){this.cells=[],this.CELL_W=n.CELL_W||r.DEFAULT_CELL_W,this.CELL_H=n.CELL_H||r.DEFAULT_CELL_H,this.columnNum=Math.ceil(e/this.CELL_W),this.rowNum=Math.ceil(t/this.CELL_H),r.MIN_DIST=Math.pow(e,2)+Math.pow(t,2);for(var a=0;a<this.columnNum;a++){for(var i=[],o=0;o<this.rowNum;o++){var A={dx:a,dy:o,x:a*this.CELL_W,y:o*this.CELL_H,occupied:!1};i.push(A)}this.cells.push(i)}},r.prototype.findGridByNodeId=function(e){for(var t,n,a=0;a<this.columnNum;a++)for(var i=0;i<this.rowNum;i++)if(this.cells[a][i].node&&((n=(t=this.cells[a][i])===null||t===void 0?void 0:t.node)===null||n===void 0?void 0:n.id)===e)return{column:a,row:i};return null},r.prototype.sqdist=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},r.prototype.occupyNearest=function(e){for(var t=r.MIN_DIST,n,a=null,i=0;i<this.columnNum;i++)for(var o=0;o<this.rowNum;o++)!this.cells[i][o].occupied&&(n=this.sqdist(e,this.cells[i][o]))<t&&(t=n,a=this.cells[i][o]);return a&&(a.occupied=!0),a},r.prototype.insertColumn=function(e,t){if(!(t<=0)){for(var n=0;n<t;n++){this.cells[n+this.columnNum]=[];for(var a=0;a<this.rowNum;a++)this.cells[n+this.columnNum][a]={dx:n,dy:a,x:n*this.CELL_W,y:a*this.CELL_H,occupied:!1,node:null}}for(var n=this.columnNum-1;n>e;n--)for(var a=0;a<this.rowNum;a++)this.cells[n+t][a]=Ou(Ou({},this.cells[n][a]),{x:(n+t)*this.CELL_W,y:a*this.CELL_H}),this.cells[n][a]={x:n*this.CELL_W,y:a*this.CELL_H,occupied:!0,node:null};for(var a=0;a<this.additionColumn.length;a++)this.additionColumn[a]>=e&&(this.additionColumn[a]+=t);for(var n=0;n<t;n++)this.additionColumn.push(e+n+1);this.columnNum+=t}},r.prototype.insertRow=function(e,t){if(!(t<=0)){for(var n=0;n<t;n++)for(var a=0;a<this.columnNum;a++)this.cells[a][n+this.rowNum]={dx:a,dy:n,x:a*this.CELL_W,y:n*this.CELL_H,occupied:!1,node:null};for(var a=0;a<this.columnNum;a++)for(var n=this.rowNum-1;n>e;n--)this.cells[a][n+t]=Ou(Ou({},this.cells[a][n]),{dx:a,dy:n+t,x:a*this.CELL_W,y:(n+t)*this.CELL_H}),this.cells[a][n]={dx:a,dy:n,x:a*this.CELL_W,y:n*this.CELL_H,occupied:!1,node:null};for(var n=0;n<this.additionRow.length;n++)this.additionRow[n]>=e&&(this.additionRow[n]+=t);for(var a=0;a<t;a++)this.additionRow.push(e+a+1);this.rowNum+=t}},r.prototype.getNodes=function(){for(var e=[],t=0;t<this.columnNum;t++)for(var n=0;n<this.rowNum;n++)this.cells[t][n].node&&e.push(this.cells[t][n]);return e},r.MIN_DIST=50,r.DEFAULT_CELL_W=80,r.DEFAULT_CELL_H=80,r}();WE.default=Pde;var Qde=we&&we.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($E,"__esModule",{value:!0});var Rde=Qde(WE);function Hde(r,e){if(!r.nodes||r.nodes.length===0)return r;var t=e.width,n=e.height,a=e.nodeMinGap,i=1e4,o=1e4;r.nodes.forEach(function(y){var m=y.size[0]||50,w=y.size[1]||50;i=Math.min(m,i),o=Math.min(w,o)});var A=new Rde.default;A.init(t,n,{CELL_H:o,CELL_W:i}),r.nodes.forEach(function(y){var m=A.occupyNearest(y);m&&(m.node={id:y.id,size:y.size},y.x=m.x,y.y=m.y,y.dx=m.dx,y.dy=m.dy)});for(var s=0;s<r.nodes.length;s++){var u=r.nodes[s],f=A.findGridByNodeId(u.id);if(!f)throw new Error("can not find node cell");var l=f.column,c=f.row;if(u.size[0]+a>i){for(var h=Math.ceil((u.size[0]+a)/i)-1,d=h,v=0;v<h;v++){var g=A.additionColumn.indexOf(l+v+1)>-1;if(g&&!A.cells[l+v+1][c].node)d--;else break}A.insertColumn(l,d)}if(u.size[1]+a>o){for(var h=Math.ceil((u.size[1]+a)/o)-1,d=h,v=0;v<h;v++){var g=A.additionRow.indexOf(c+v+1)>-1;if(g&&!A.cells[l][c+v+1].node)d--;else break}A.insertRow(c,d)}}for(var s=0;s<A.columnNum;s++)for(var p=function(m){var w=A.cells[s][m];if(w.node){var B=r.nodes.find(function(E){var b;return E.id===((b=w==null?void 0:w.node)===null||b===void 0?void 0:b.id)});B&&(B.x=w.x+B.size[0]/2,B.y=w.y+B.size[1]/2)}},v=0;v<A.rowNum;v++)p(v)}$E.default=Hde;var VE={};Object.defineProperty(VE,"__esModule",{value:!0});var mP=1200,wP=800,yd=1e7,qf=10,BP=3.141592653589793,Yy=1.5707963267948966,Gde=BP*.375,zde=BP*.625,yv=new Map,Kde=10,jde=10,Zy=.8,LM=.1,$de=.5;function Wde(r,e,t){var n=r.x-r.size[0]/2,a=r.y-r.size[1]/2,i=r.x+r.size[0]/2,o=r.y+r.size[1]/2,A=e.x-e.size[0]/2,s=e.y-e.size[1]/2,u=e.x+e.size[0]/2,f=e.y+e.size[1]/2,l=r.x,c=r.y,h=e.x,d=e.y,v=h-l,g=Math.atan2(v,d-c),p=0,y=0,m=0,w=0;g>Yy?(y=a-f,p=A-i,m=parseFloat(y?(y/Math.cos(g)).toFixed(2):p.toFixed(2)),w=parseFloat(p?(p/Math.sin(g)).toFixed(2):y.toFixed(2))):0<g&&g<=Yy?(y=s-o,p=A-i,y>p?m=w=parseFloat(y?(y/Math.cos(g)).toFixed(2):p.toFixed(2)):m=w=parseFloat(p?(p/Math.sin(g)).toFixed(2):y.toFixed(2))):g<-Yy?(y=a-f,p=-(u-n),y>p?m=w=parseFloat(y?(y/Math.cos(g)).toFixed(2):p.toFixed(2)):m=w=parseFloat(p?(p/Math.sin(g)).toFixed(2):y.toFixed(2))):(y=s-o,Math.abs(v)>(i-n)/2?p=n-u:p=v,y>p?m=w=parseFloat(y?(y/Math.cos(g)).toFixed(2):p.toFixed(2)):m=w=parseFloat(p&&g!==0?(p/Math.sin(g)).toFixed(2):y.toFixed(2)));var B=parseFloat(g.toFixed(2)),E=t;return t&&(E=Gde<B&&B<zde),{distance:Math.abs(m<w?m:w),isHoriz:E}}function EP(r,e){var t=yv.get(r.id)||[],n=t.find(function(F){return F.source===e.id||F.target===e.id}),a=r.size[0]*r.size[1],i=e.size[0]*e.size[1],o=a>i?e:r,A=a>i?r:e,s=o.x-o.size[0]/2,u=o.y-o.size[1]/2,f=o.x+o.size[0]/2,l=o.y+o.size[1]/2,c=A.x-A.size[0]/2,h=A.y-A.size[1]/2,d=A.x+A.size[0]/2,v=A.y+A.size[1]/2,g=o.x,p=o.y,y=A.x,m=A.y,w=f>=c&&d>=s&&l>=h&&v>=u,B=0,E=0;if(w){E=Math.sqrt(Math.pow(y-g,2)+Math.pow(m-p,2));var b=s>c?s:c,C=u>h?u:h,_=f<d?f:d,x=l<v?l:v,M=_-b,S=x-C,I=M*S;E===0&&(E=1e-7),B=qf*1/E*100+I,B*=yd}else{var D=!1,O=Wde(o,A,D);E=O.distance,D=O.isHoriz,E<=qf?E!==0?n?B+=qf+yd*1/E:B+=qf+yd*qf/E:B+=yd:(B+=E,n&&(B+=E*E))}return B}function bP(r){for(var e=0,t=0;t<r.length;t++){var n=r[t];(n.x<0||n.y<0||n.x>mP||n.y>wP)&&(e+=1e12);for(var a=t+1;a<r.length;a++)e+=EP(n,r[a])}return e}function Vde(r,e,t,n){var a=new Map;t.forEach(function(g,p){a.set(g.id,g)});var i=n.filter(function(g){return g.source===r.id||g.target===r.id})||[],o=[];i.forEach(function(g){var p=g.source===r.id?g.target:g.source,y=a.get(p);y&&o.push(y)});for(var A=!0,s=0;s<o.length;s++){var u=o[s],f=Math.atan((r.y-u.y)/(u.x-r.y))*180,l=Math.atan((e.y-u.y)/(u.x-e.y))*180,c=f<30||f>150,h=l<30||l>150,d=f>70&&f<110,v=l>70&&l<110;if(c&&!h||f*l<0){A=!1;break}else if(d&&!v||f*l<0){A=!1;break}else if((u.x-r.x)*(u.x-e.x)<0){A=!1;break}else if((u.y-r.y)*(u.y-e.y)<0){A=!1;break}}return A}function Xde(r,e){for(var t=!1,n=1,a=Kde*n,i=jde*n,o=[a,-a,0,0],A=[0,0,i,-i],s=0;s<r.length;++s)for(var u=r[s],f=DM(u,r),l=0;l<o.length;l++){var c=Vde(u,{x:u.x+o[l],y:u.y+A[l]},r,e);if(c){u.x+=o[l],u.y+=A[l];var h=DM(u,r),d=Math.random();h<f||d<Zy&&d>LM?(f=h,t=!0):(u.x-=o[l],u.y-=A[l])}}return Zy>LM&&(Zy*=$de),t?bP(r):0}function DM(r,e){var t=0;(r.x<0||r.y<0||r.x+r.size[0]+20>mP||r.y+r.size[1]+20>wP)&&(t+=1e12);for(var n=0;n<e.length;++n)r.id!==e[n].id&&(t+=EP(r,e[n]));return t}function Yde(r,e){if(r.length===0)return{nodes:r,edges:e};r.forEach(function(u){var f=e.filter(function(l){return l.source===u.id||l.target===u.id});yv.set(u,f)}),r.sort(function(u,f){var l,c;return((l=yv.get(u.id))===null||l===void 0?void 0:l.length)-((c=yv.get(f.id))===null||c===void 0?void 0:c.length)});for(var t=bP(r),n=20,a=1,i=0,o=50,A=0;n>0&&(A++,!(A>=o));){var s=Xde(r,e);s!==0&&(i=s),a=i-t,t=i,a===0?--n:n=20}return r.forEach(function(u){u.x=u.x-u.size[0]/2,u.y=u.y-u.size[1]/2}),{nodes:r,edges:e}}VE.default=Yde;var X1=we&&we.__assign||function(){return X1=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},X1.apply(this,arguments)},Zde=we&&we.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var a=Object.getOwnPropertyDescriptor(e,t);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,a)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),qde=we&&we.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Jde=we&&we.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Zde(e,r,t);return qde(e,r),e},xP=we&&we.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(jE,"__esModule",{value:!0});var vu=Jde(PB),eve=xP($E),tve=xP(VE),rve=gf;function nve(r,e){var t=r.nodes,n=r.edges,a=e.width,i=e.height;if(!(t!=null&&t.length))return Promise.resolve();var o=[];t.forEach(function(d){var v=n.filter(function(p){return p.source===d.id||p.target===d.id});if(v.length>1){var g=X1({},d);delete g.size,o.push(g)}});var A=[];n.forEach(function(d){var v=o.find(function(p){return p.id===d.source}),g=o.find(function(p){return p.id===d.target});v&&g&&A.push(d)});var s=new rve.DagreLayout({type:"dagre",ranksep:e.nodeMinGap,nodesep:e.nodeMinGap}),u=s.layout({nodes:o,edges:A}).nodes;t.forEach(function(d){var v=(u||[]).find(function(g){return g.id===d.id});d.x=(v==null?void 0:v.x)||a/2,d.y=(v==null?void 0:v.y)||i/2});var f=JSON.parse(JSON.stringify(t)),l=JSON.parse(JSON.stringify(n)),c=vu.forceSimulation().nodes(f).force("link",vu.forceLink(l).id(function(d){return d.id}).distance(function(d){var v=A.find(function(g){return g.source===d.source&&g.target===d.target});return v?30:20})).force("charge",vu.forceManyBody()).force("center",vu.forceCenter(a/2,i/2)).force("x",vu.forceX(a/2)).force("y",vu.forceY(i/2)).alpha(.3).alphaDecay(.08).alphaMin(.001),h=new Promise(function(d){c.on("end",function(){t.forEach(function(B){var E=f.find(function(b){return b.id===B.id});E&&(B.x=E.x,B.y=E.y)});var v=Math.min.apply(Math,t.map(function(B){return B.x})),g=Math.max.apply(Math,t.map(function(B){return B.x})),p=Math.min.apply(Math,t.map(function(B){return B.y})),y=Math.max.apply(Math,t.map(function(B){return B.y})),m=a/(g-v),w=i/(y-p);t.forEach(function(B){B.x!==void 0&&m<1&&(B.x=(B.x-v)*m),B.y!==void 0&&w<1&&(B.y=(B.y-p)*w)}),t.forEach(function(B){B.sizeTemp=B.size,B.size=[10,10]}),(0,tve.default)(t,n),t.forEach(function(B){B.size=B.sizeTemp||[],delete B.sizeTemp}),(0,eve.default)({nodes:t,edges:n},e),d()})});return h}jE.default=nve;var ave=we&&we.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ive=we&&we.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xc,"__esModule",{value:!0});Xc.ERLayout=void 0;var ove=qr,Ave=ive(jE),sve=function(r){ave(e,r);function e(t){var n=r.call(this)||this;return n.width=300,n.height=300,n.nodeMinGap=50,n.onLayoutEnd=function(){},t&&n.updateCfg(t),n}return e.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},e.prototype.execute=function(){var t=this,n=t.nodes,a=t.edges;return n==null||n.forEach(function(i){i.size||(i.size=[50,50])}),(0,Ave.default)({nodes:n,edges:a},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(function(){t.onLayoutEnd&&t.onLayoutEnd()})},e.prototype.getType=function(){return"er"},e}(ove.Base);Xc.ERLayout=sve;var ts={},OM;function uve(){if(OM)return ts;OM=1,Object.defineProperty(ts,"__esModule",{value:!0}),ts.Layouts=ts.Layout=void 0;var r=Lo,e=Tc,t=Fc,n=Dc,a=Lc,i=kB,o=Oc,A=gf,s=DE,u=Gc,f=zc,l=Kc,c=jc,h=$c,d=Wc,v=yP(),g=Vc,p=Xc,y=kc,m=zr(),w=function(){function B(E){var b=(0,r.getLayoutByName)(E.type);this.layoutInstance=new b(E)}return B.prototype.layout=function(E){return this.layoutInstance.layout(E)},B.prototype.updateCfg=function(E){this.layoutInstance.updateCfg(E)},B.prototype.init=function(E){this.correctLayers(E.nodes),this.layoutInstance.init(E)},B.prototype.correctLayers=function(E){if(E!=null&&E.length){var b=1/0,C=[];if(E.forEach(function(x){(0,m.isString)(x.layer)&&(x.layer=parseInt(x.layer,10)),!(x.layer===void 0||isNaN(x.layer))&&(C.push(x),x.layer<b&&(b=x.layer))}),b<=0){var _=Math.abs(b)+1;C.forEach(function(x){return x.layer+=_})}}},B.prototype.execute=function(){this.layoutInstance.execute()},B.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},B.prototype.destroy=function(){return this.layoutInstance.destroy()},B}();return ts.Layout=w,ts.Layouts={force:i.ForceLayout,fruchterman:l.FruchtermanLayout,forceAtlas2:g.ForceAtlas2Layout,gForce:a.GForceLayout,force2:n.Force2Layout,dagre:A.DagreLayout,dagreCompound:y.DagreCompoundLayout,circular:o.CircularLayout,radial:s.RadialLayout,concentric:u.ConcentricLayout,grid:e.GridLayout,mds:f.MDSLayout,comboForce:d.ComboForceLayout,comboCombined:v.ComboCombinedLayout,random:t.RandomLayout,"gForce-gpu":h.GForceGPULayout,"fruchterman-gpu":c.FruchtermanGPULayout,er:p.ERLayout},ts}var CP={};Object.defineProperty(CP,"__esModule",{value:!0});var UM;function _P(){return UM||(UM=1,function(r){var e=we&&we.__createBinding||(Object.create?function(E,b,C,_){_===void 0&&(_=C);var x=Object.getOwnPropertyDescriptor(b,C);(!x||("get"in x?!b.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return b[C]}}),Object.defineProperty(E,_,x)}:function(E,b,C,_){_===void 0&&(_=C),E[_]=b[C]}),t=we&&we.__exportStar||function(E,b){for(var C in E)C!=="default"&&!Object.prototype.hasOwnProperty.call(b,C)&&e(b,E,C)};Object.defineProperty(r,"__esModule",{value:!0}),r.ERLayout=r.ForceAtlas2Layout=r.ComboCombinedLayout=r.ComboForceLayout=r.GForceGPULayout=r.FruchtermanGPULayout=r.FruchtermanLayout=r.MDSLayout=r.ConcentricLayout=r.RadialLayout=r.DagreCompoundLayout=r.DagreLayout=r.CircularLayout=r.ForceLayout=r.Force2Layout=r.GForceLayout=r.RandomLayout=r.GridLayout=r.Layouts=r.Layout=void 0;var n=Tc;Object.defineProperty(r,"GridLayout",{enumerable:!0,get:function(){return n.GridLayout}});var a=Fc;Object.defineProperty(r,"RandomLayout",{enumerable:!0,get:function(){return a.RandomLayout}});var i=Lc;Object.defineProperty(r,"GForceLayout",{enumerable:!0,get:function(){return i.GForceLayout}});var o=Dc;Object.defineProperty(r,"Force2Layout",{enumerable:!0,get:function(){return o.Force2Layout}});var A=kB;Object.defineProperty(r,"ForceLayout",{enumerable:!0,get:function(){return A.ForceLayout}});var s=Oc;Object.defineProperty(r,"CircularLayout",{enumerable:!0,get:function(){return s.CircularLayout}});var u=gf;Object.defineProperty(r,"DagreLayout",{enumerable:!0,get:function(){return u.DagreLayout}});var f=kc;Object.defineProperty(r,"DagreCompoundLayout",{enumerable:!0,get:function(){return f.DagreCompoundLayout}});var l=DE;Object.defineProperty(r,"RadialLayout",{enumerable:!0,get:function(){return l.RadialLayout}});var c=Gc;Object.defineProperty(r,"ConcentricLayout",{enumerable:!0,get:function(){return c.ConcentricLayout}});var h=zc;Object.defineProperty(r,"MDSLayout",{enumerable:!0,get:function(){return h.MDSLayout}});var d=Kc;Object.defineProperty(r,"FruchtermanLayout",{enumerable:!0,get:function(){return d.FruchtermanLayout}});var v=jc;Object.defineProperty(r,"FruchtermanGPULayout",{enumerable:!0,get:function(){return v.FruchtermanGPULayout}});var g=$c;Object.defineProperty(r,"GForceGPULayout",{enumerable:!0,get:function(){return g.GForceGPULayout}});var p=Wc;Object.defineProperty(r,"ComboForceLayout",{enumerable:!0,get:function(){return p.ComboForceLayout}});var y=yP();Object.defineProperty(r,"ComboCombinedLayout",{enumerable:!0,get:function(){return y.ComboCombinedLayout}});var m=Vc;Object.defineProperty(r,"ForceAtlas2Layout",{enumerable:!0,get:function(){return m.ForceAtlas2Layout}});var w=Xc;Object.defineProperty(r,"ERLayout",{enumerable:!0,get:function(){return w.ERLayout}});var B=uve();Object.defineProperty(r,"Layout",{enumerable:!0,get:function(){return B.Layout}}),Object.defineProperty(r,"Layouts",{enumerable:!0,get:function(){return B.Layouts}}),t(CP,r)}(wy)),wy}(function(r){var e=we&&we.__createBinding||(Object.create?function(a,i,o,A){A===void 0&&(A=o);var s=Object.getOwnPropertyDescriptor(i,o);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(a,A,s)}:function(a,i,o,A){A===void 0&&(A=o),a[A]=i[o]}),t=we&&we.__exportStar||function(a,i){for(var o in a)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,a,o)};Object.defineProperty(r,"__esModule",{value:!0}),r.getLayoutByName=r.unRegisterLayout=r.registerLayout=void 0;var n=Lo;Object.defineProperty(r,"registerLayout",{enumerable:!0,get:function(){return n.registerLayout}}),Object.defineProperty(r,"unRegisterLayout",{enumerable:!0,get:function(){return n.unRegisterLayout}}),Object.defineProperty(r,"getLayoutByName",{enumerable:!0,get:function(){return n.getLayoutByName}}),t(_P(),r)})(Yt);var SP={exports:{}};(function(r,e){(function(n,a){r.exports=a()})(typeof self<"u"?self:we,function(){return function(t){var n={};function a(i){if(n[i])return n[i].exports;var o=n[i]={i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=t,a.c=n,a.d=function(i,o,A){a.o(i,o)||Object.defineProperty(i,o,{configurable:!1,enumerable:!0,get:A})},a.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return a.d(o,"a",o),o},a.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},a.p="",a(a.s=36)}([function(t,n,a){var i=a(3);n.a=function(o){return Array.isArray?Array.isArray(o):Object(i.a)(o,"Array")}},function(t,n,a){var i=function(o){return o!==null&&typeof o!="function"&&isFinite(o.length)};n.a=i},function(t,n,a){var i=a(3);n.a=function(o){return Object(i.a)(o,"Function")}},function(t,n,a){var i={}.toString,o=function(A,s){return i.call(A)==="[object "+s+"]"};n.a=o},function(t,n,a){var i=a(3);n.a=function(o){return Object(i.a)(o,"String")}},function(t,n,a){var i=a(3),o=function(A){return Object(i.a)(A,"Number")};n.a=o},function(t,n,a){var i=a(38),o=i.mix;function A(s,u,f,l){return l===void 0&&(l="height"),f==="center"?(s[l]+u[l])/2:s.height}t.exports={assign:o,getHeight:A}},function(t,n,a){var i=function(o){return o==null};n.a=i},function(t,n,a){var i=a(0),o=a(12);function A(s,u){if(s){var f;if(Object(i.a)(s))for(var l=0,c=s.length;l<c&&(f=u(s[l],l),f!==!1);l++);else if(Object(o.a)(s)){for(var h in s)if(s.hasOwnProperty(h)&&(f=u(s[h],h),f===!1))break}}}n.a=A},function(t,n,a){var i=a(7);n.a=function(o){return Object(i.a)(o)?"":o.toString()}},function(t,n,a){var i=a(14),o=a(3),A=function(s){if(!Object(i.a)(s)||!Object(o.a)(s,"Object"))return!1;if(Object.getPrototypeOf(s)===null)return!0;for(var u=s;Object.getPrototypeOf(u)!==null;)u=Object.getPrototypeOf(u);return Object.getPrototypeOf(s)===u};n.a=A},function(t,n,a){var i=a(18),o=function(){function A(u,f){f===void 0&&(f={});var l=this;l.options=f,l.rootNode=i(u,f)}var s=A.prototype;return s.execute=function(){throw new Error("please override this method")},A}();t.exports=o},function(t,n,a){n.a=function(i){var o=typeof i;return i!==null&&o==="object"||o==="function"}},function(t,n,a){var i=a(1),o=function(A,s){return Object(i.a)(A)?A.indexOf(s)>-1:!1};n.a=o},function(t,n,a){var i=function(o){return typeof o=="object"&&o!==null};n.a=i},function(t,n,a){var i=a(8),o=a(2),A=Object.values?function(s){return Object.values(s)}:function(s){var u=[];return Object(i.a)(s,function(f,l){Object(o.a)(s)&&l==="prototype"||u.push(f)}),u};n.a=A},function(t,n,a){n.a=o;function i(A,s){for(var u in s)s.hasOwnProperty(u)&&u!=="constructor"&&s[u]!==void 0&&(A[u]=s[u])}function o(A,s,u,f){return s&&i(A,s),u&&i(A,u),f&&i(A,f),A}},function(t,n,a){var i=a(35),o=["LR","RL","TB","BT","H","V"],A=["LR","RL","H"],s=function(l){return A.indexOf(l)>-1},u=o[0];t.exports=function(f,l,c){var h=l.direction||u;if(l.isHorizontal=s(h),h&&o.indexOf(h)===-1)throw new TypeError("Invalid direction: "+h);if(h===o[0])c(f,l);else if(h===o[1])c(f,l),f.right2left();else if(h===o[2])c(f,l);else if(h===o[3])c(f,l),f.bottom2top();else if(h===o[4]||h===o[5]){var d=i(f,l),v=d.left,g=d.right;c(v,l),c(g,l),l.isHorizontal?v.right2left():v.bottom2top(),g.translate(v.x-g.x,v.y-g.y),f.x=v.x,f.y=g.y;var p=f.getBoundingBox();l.isHorizontal?p.top<0&&f.translate(0,-p.top):p.left<0&&f.translate(-p.left,0)}var y=l.fixedRoot;return y===void 0&&(y=!0),y&&f.translate(-(f.x+f.width/2+f.hgap),-(f.y+f.height/2+f.vgap)),f}},function(t,n,a){var i=a(6),o=18,A=o*2,s=o,u={getId:function(h){return h.id||h.name},getPreH:function(h){return h.preH||0},getPreV:function(h){return h.preV||0},getHGap:function(h){return h.hgap||s},getVGap:function(h){return h.vgap||s},getChildren:function(h){return h.children},getHeight:function(h){return h.height||A},getWidth:function(h){var d=h.label||" ";return h.width||d.split("").length*o}};function f(c,h){var d=this;if(d.vgap=d.hgap=0,c instanceof f)return c;d.data=c;var v=h.getHGap(c),g=h.getVGap(c);return d.preH=h.getPreH(c),d.preV=h.getPreV(c),d.width=h.getWidth(c),d.height=h.getHeight(c),d.width+=d.preH,d.height+=d.preV,d.id=h.getId(c),d.x=d.y=0,d.depth=0,d.children||(d.children=[]),d.addGap(v,g),d}i.assign(f.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(h,d){var v=this;v.hgap+=h,v.vgap+=d,v.width+=2*h,v.height+=2*d},eachNode:function(h){for(var d=this,v=[d],g;g=v.shift();)h(g),v=g.children.concat(v)},DFTraverse:function(h){this.eachNode(h)},BFTraverse:function(h){for(var d=this,v=[d],g;g=v.shift();)h(g),v=v.concat(g.children)},getBoundingBox:function(){var h={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(d){h.left=Math.min(h.left,d.x),h.top=Math.min(h.top,d.y),h.width=Math.max(h.width,d.x+d.width),h.height=Math.max(h.height,d.y+d.height)}),h},translate:function(h,d){h===void 0&&(h=0),d===void 0&&(d=0),this.eachNode(function(v){v.x+=h,v.y+=d,v.x+=v.preH,v.y+=v.preV})},right2left:function(){var h=this,d=h.getBoundingBox();h.eachNode(function(v){v.x=v.x-(v.x-d.left)*2-v.width}),h.translate(d.width,0)},bottom2top:function(){var h=this,d=h.getBoundingBox();h.eachNode(function(v){v.y=v.y-(v.y-d.top)*2-v.height}),h.translate(0,d.height)}});function l(c,h,d){h===void 0&&(h={}),h=i.assign({},u,h);var v=new f(c,h),g=[v],p;if(!d&&!c.collapsed){for(;p=g.shift();)if(!p.data.collapsed){var y=h.getChildren(p.data),m=y?y.length:0;if(p.children=new Array(m),y&&m)for(var w=0;w<m;w++){var B=new f(y[w],h);p.children[w]=B,g.push(B),B.parent=p,B.depth=p.depth+1}}}return v}t.exports=l},function(t,n,a){var i=a(1),o=function(A,s){if(!Object(i.a)(A))return A;for(var u=[],f=0;f<A.length;f++){var l=A[f];s(l,f)&&u.push(l)}return u};n.a=o},function(t,n,a){var i=a(7),o=a(21);function A(s,u){var f=Object(o.a)(u),l=f.length;if(Object(i.a)(s))return!l;for(var c=0;c<l;c+=1){var h=f[c];if(u[h]!==s[h]||!(h in s))return!1}return!0}n.a=A},function(t,n,a){var i=a(8),o=a(2),A=Object.keys?function(s){return Object.keys(s)}:function(s){var u=[];return Object(i.a)(s,function(f,l){Object(o.a)(s)&&l==="prototype"||u.push(l)}),u};n.a=A},function(t,n,a){var i=a(0);n.a=function(o){if(Object(i.a)(o))return o.reduce(function(A,s){return Math.max(A,s)},o[0])}},function(t,n,a){var i=a(0);n.a=function(o){if(Object(i.a)(o))return o.reduce(function(A,s){return Math.min(A,s)},o[0])}},function(t,n,a){var i=a(1),o=Array.prototype.splice,A=function(u,f){if(!Object(i.a)(u))return[];for(var l=u?f.length:0,c=l-1;l--;){var h=void 0,d=f[l];(l===c||d!==h)&&(h=d,o.call(u,d,1))}return u};n.a=A},function(t,n,a){var i=a(8),o=a(0),A=a(10),s=function(u,f,l){if(!Object(o.a)(u)&&!Object(A.a)(u))return u;var c=l;return Object(i.a)(u,function(h,d){c=f(c,h,d)}),c};n.a=s},function(t,n,a){n.a=i;function i(o,A){A===void 0&&(A=new Map);var s=[];if(Array.isArray(o))for(var u=0,f=o.length;u<f;u++){var l=o[u];A.has(l)||(s.push(l),A.set(l,!0))}return s}},function(t,n,a){n.a=s;var i=a(0),o=a(2),A=a(28);function s(u,f){if(!f)return{0:u};if(!Object(o.a)(f)){var l=Object(i.a)(f)?f:f.replace(/\s+/g,"").split("*");f=function(c){for(var h="_",d=0,v=l.length;d<v;d++)h+=c[l[d]]&&c[l[d]].toString();return h}}return Object(A.a)(u,f)}},function(t,n,a){var i=a(0),o=a(2),A=Object.prototype.hasOwnProperty;function s(u,f){if(!f||!Object(i.a)(u))return{};for(var l={},c=Object(o.a)(f)?f:function(g){return g[f]},h,d=0;d<u.length;d++){var v=u[d];h=c(v),A.call(l,h)?l[h].push(v):l[h]=[v]}return l}n.a=s},function(t,n,a){n.a=function(i,o){return i.hasOwnProperty(o)}},function(t,n,a){var i={}.toString,o=function(A){return i.call(A).replace(/^\[object /,"").replace(/]$/,"")};n.a=o},function(t,n,a){var i=Object.prototype,o=function(A){var s=A&&A.constructor,u=typeof s=="function"&&s.prototype||i;return A===u};n.a=o},function(t,n,a){var i=a(2);n.a=function(o,A){if(!Object(i.a)(o))throw new TypeError("Expected a function");var s=function(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];var l=A?A.apply(this,u):u[0],c=s.cache;if(c.has(l))return c.get(l);var h=o.apply(this,u);return c.set(l,h),h};return s.cache=new Map,s}},function(t,n,a){var i=a(14),o=a(1),A=a(4),s=function(u,f){if(u===f)return!0;if(!u||!f||Object(A.a)(u)||Object(A.a)(f))return!1;if(Object(o.a)(u)||Object(o.a)(f)){if(u.length!==f.length)return!1;for(var l=!0,c=0;c<u.length&&(l=s(u[c],f[c]),!!l);c++);return l}if(Object(i.a)(u)||Object(i.a)(f)){var h=Object.keys(u),d=Object.keys(f);if(h.length!==d.length)return!1;for(var l=!0,c=0;c<h.length&&(l=s(u[h[c]],f[h[c]]),!!l);c++);return l}return!1};n.a=s},function(t,n,a){var i=a(116),o=a(15),A=a(32),s=a(4),u;n.a=Object(A.a)(function(f,l){l===void 0&&(l={});var c=l.fontSize,h=l.fontFamily,d=l.fontWeight,v=l.fontStyle,g=l.fontVariant;return u||(u=document.createElement("canvas").getContext("2d")),u.font=[v,g,d,c+"px",h].join(" "),u.measureText(Object(s.a)(f)?f:"").width},function(f,l){return l===void 0&&(l={}),Object(i.a)([f],Object(o.a)(l)).join("")})},function(t,n,a){var i=a(18);t.exports=function(o,A){for(var s=i(o.data,A,!0),u=i(o.data,A,!0),f=o.children.length,l=Math.round(f/2),c=A.getSide||function(g,p){return p<l?"right":"left"},h=0;h<f;h++){var d=o.children[h],v=c(d,h);v==="right"?u.children.push(d):s.children.push(d)}return s.eachNode(function(g){g.isRoot()||(g.side="left")}),u.eachNode(function(g){g.isRoot()||(g.side="right")}),{left:s,right:u}}},function(t,n,a){var i={compactBox:a(37),dendrogram:a(120),indented:a(122),mindmap:a(124)};t.exports=i},function(t,n,a){function i(d,v){d.prototype=Object.create(v.prototype),d.prototype.constructor=d,o(d,v)}function o(d,v){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,y){return p.__proto__=y,p},o(d,v)}var A=a(11),s=a(119),u=a(17),f=a(6),l=function(d){i(v,d);function v(){return d.apply(this,arguments)||this}var g=v.prototype;return g.execute=function(){var y=this;return u(y.rootNode,y.options,s)},v}(A),c={};function h(d,v){return v=f.assign({},c,v),new l(d,v).execute()}t.exports=h},function(t,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=a(13);a.d(n,"contains",function(){return i.a}),a.d(n,"includes",function(){return i.a});var o=a(39);a.d(n,"difference",function(){return o.a});var A=a(40);a.d(n,"find",function(){return A.a});var s=a(41);a.d(n,"findIndex",function(){return s.a});var u=a(42);a.d(n,"firstValue",function(){return u.a});var f=a(43);a.d(n,"flatten",function(){return f.a});var l=a(44);a.d(n,"flattenDeep",function(){return l.a});var c=a(45);a.d(n,"getRange",function(){return c.a});var h=a(46);a.d(n,"pull",function(){return h.a});var d=a(24);a.d(n,"pullAt",function(){return d.a});var v=a(25);a.d(n,"reduce",function(){return v.a});var g=a(47);a.d(n,"remove",function(){return g.a});var p=a(48);a.d(n,"sortBy",function(){return p.a});var y=a(49);a.d(n,"union",function(){return y.a});var m=a(26);a.d(n,"uniq",function(){return m.a});var w=a(50);a.d(n,"valuesOfKey",function(){return w.a});var B=a(51);a.d(n,"head",function(){return B.a});var E=a(52);a.d(n,"last",function(){return E.a});var b=a(53);a.d(n,"startsWith",function(){return b.a});var C=a(54);a.d(n,"endsWith",function(){return C.a});var _=a(19);a.d(n,"filter",function(){return _.a});var x=a(55);a.d(n,"every",function(){return x.a});var M=a(56);a.d(n,"some",function(){return M.a});var S=a(57);a.d(n,"group",function(){return S.a});var I=a(28);a.d(n,"groupBy",function(){return I.a});var D=a(27);a.d(n,"groupToMap",function(){return D.a});var O=a(58);a.d(n,"getWrapBehavior",function(){return O.a});var F=a(59);a.d(n,"wrapBehavior",function(){return F.a});var U=a(60);a.d(n,"number2color",function(){return U.a});var Q=a(61);a.d(n,"parseRadius",function(){return Q.a});var N=a(62);a.d(n,"clamp",function(){return N.a});var R=a(63);a.d(n,"fixedBase",function(){return R.a});var J=a(64);a.d(n,"isDecimal",function(){return J.a});var re=a(65);a.d(n,"isEven",function(){return re.a});var ee=a(66);a.d(n,"isInteger",function(){return ee.a});var q=a(67);a.d(n,"isNegative",function(){return q.a});var ve=a(68);a.d(n,"isNumberEqual",function(){return ve.a});var Me=a(69);a.d(n,"isOdd",function(){return Me.a});var Re=a(70);a.d(n,"isPositive",function(){return Re.a});var tt=a(22);a.d(n,"max",function(){return tt.a});var st=a(71);a.d(n,"maxBy",function(){return st.a});var at=a(23);a.d(n,"min",function(){return at.a});var Et=a(72);a.d(n,"minBy",function(){return Et.a});var bt=a(73);a.d(n,"mod",function(){return bt.a});var fr=a(74);a.d(n,"toDegree",function(){return fr.a});var Qt=a(75);a.d(n,"toInteger",function(){return Qt.a});var Kt=a(76);a.d(n,"toRadian",function(){return Kt.a});var gr=a(77);a.d(n,"forIn",function(){return gr.a});var lr=a(29);a.d(n,"has",function(){return lr.a});var Ht=a(78);a.d(n,"hasKey",function(){return Ht.a});var tr=a(79);a.d(n,"hasValue",function(){return tr.a});var Kr=a(21);a.d(n,"keys",function(){return Kr.a});var et=a(20);a.d(n,"isMatch",function(){return et.a});var ae=a(15);a.d(n,"values",function(){return ae.a});var L=a(80);a.d(n,"lowerCase",function(){return L.a});var be=a(81);a.d(n,"lowerFirst",function(){return be.a});var Ne=a(82);a.d(n,"substitute",function(){return Ne.a});var pe=a(83);a.d(n,"upperCase",function(){return pe.a});var ze=a(84);a.d(n,"upperFirst",function(){return ze.a});var Ke=a(30);a.d(n,"getType",function(){return Ke.a});var Xe=a(85);a.d(n,"isArguments",function(){return Xe.a});var Ze=a(0);a.d(n,"isArray",function(){return Ze.a});var gt=a(1);a.d(n,"isArrayLike",function(){return gt.a});var Ot=a(86);a.d(n,"isBoolean",function(){return Ot.a});var cr=a(87);a.d(n,"isDate",function(){return cr.a});var Ut=a(88);a.d(n,"isError",function(){return Ut.a});var vr=a(2);a.d(n,"isFunction",function(){return vr.a});var sr=a(89);a.d(n,"isFinite",function(){return sr.a});var wr=a(7);a.d(n,"isNil",function(){return wr.a});var pr=a(90);a.d(n,"isNull",function(){return pr.a});var hn=a(5);a.d(n,"isNumber",function(){return hn.a});var rr=a(12);a.d(n,"isObject",function(){return rr.a});var Pr=a(14);a.d(n,"isObjectLike",function(){return Pr.a});var da=a(10);a.d(n,"isPlainObject",function(){return da.a});var jr=a(31);a.d(n,"isPrototype",function(){return jr.a});var Bi=a(91);a.d(n,"isRegExp",function(){return Bi.a});var NA=a(4);a.d(n,"isString",function(){return NA.a});var kA=a(3);a.d(n,"isType",function(){return kA.a});var An=a(92);a.d(n,"isUndefined",function(){return An.a});var Za=a(93);a.d(n,"isElement",function(){return Za.a});var Ao=a(94);a.d(n,"requestAnimationFrame",function(){return Ao.a});var PA=a(95);a.d(n,"clearAnimationFrame",function(){return PA.a});var QA=a(96);a.d(n,"augment",function(){return QA.a});var RA=a(97);a.d(n,"clone",function(){return RA.a});var va=a(98);a.d(n,"debounce",function(){return va.a});var Qr=a(32);a.d(n,"memoize",function(){return Qr.a});var ga=a(99);a.d(n,"deepMix",function(){return ga.a});var It=a(8);a.d(n,"each",function(){return It.a});var yr=a(100);a.d(n,"extend",function(){return yr.a});var wt=a(101);a.d(n,"indexOf",function(){return wt.a});var Ir=a(102);a.d(n,"isEmpty",function(){return Ir.a});var dn=a(33);a.d(n,"isEqual",function(){return dn.a});var so=a(103);a.d(n,"isEqualWith",function(){return so.a});var uo=a(104);a.d(n,"map",function(){return uo.a});var qa=a(105);a.d(n,"mapValues",function(){return qa.a});var Ei=a(16);a.d(n,"mix",function(){return Ei.a}),a.d(n,"assign",function(){return Ei.a});var fo=a(106);a.d(n,"get",function(){return fo.a});var lo=a(107);a.d(n,"set",function(){return lo.a});var Qp=a(108);a.d(n,"pick",function(){return Qp.a});var Rp=a(109);a.d(n,"omit",function(){return Rp.a});var Hp=a(110);a.d(n,"throttle",function(){return Hp.a});var Gp=a(111);a.d(n,"toArray",function(){return Gp.a});var zp=a(9);a.d(n,"toString",function(){return zp.a});var Kp=a(112);a.d(n,"uniqueId",function(){return Kp.a});var jp=a(113);a.d(n,"noop",function(){return jp.a});var $p=a(114);a.d(n,"identity",function(){return $p.a});var Wp=a(115);a.d(n,"size",function(){return Wp.a});var Vp=a(34);a.d(n,"measureTextWidth",function(){return Vp.a});var Xp=a(117);a.d(n,"getEllipsisText",function(){return Xp.a});var Yp=a(118);a.d(n,"Cache",function(){return Yp.a})},function(t,n,a){var i=a(19),o=a(13),A=function(s,u){return u===void 0&&(u=[]),Object(i.a)(s,function(f){return!Object(o.a)(u,f)})};n.a=A},function(t,n,a){var i=a(2),o=a(20),A=a(0),s=a(10);function u(f,l){if(!Object(A.a)(f))return null;var c;if(Object(i.a)(l)&&(c=l),Object(s.a)(l)&&(c=function(d){return Object(o.a)(d,l)}),c){for(var h=0;h<f.length;h+=1)if(c(f[h]))return f[h]}return null}n.a=u},function(t,n,a){function i(o,A,s){s===void 0&&(s=0);for(var u=s;u<o.length;u++)if(A(o[u],u))return u;return-1}n.a=i},function(t,n,a){var i=a(7),o=a(0),A=function(s,u){for(var f=null,l=0;l<s.length;l++){var c=s[l],h=c[u];if(!Object(i.a)(h)){Object(o.a)(h)?f=h[0]:f=h;break}}return f};n.a=A},function(t,n,a){var i=a(0),o=function(A){if(!Object(i.a)(A))return[];for(var s=[],u=0;u<A.length;u++)s=s.concat(A[u]);return s};n.a=o},function(t,n,a){var i=a(0),o=function(A,s){if(s===void 0&&(s=[]),!Object(i.a)(A))s.push(A);else for(var u=0;u<A.length;u+=1)o(A[u],s);return s};n.a=o},function(t,n,a){var i=a(0),o=a(22),A=a(23),s=function(u){var f=u.filter(function(v){return!isNaN(v)});if(!f.length)return{min:0,max:0};if(Object(i.a)(u[0])){for(var l=[],c=0;c<u.length;c++)l=l.concat(u[c]);f=l}var h=Object(o.a)(f),d=Object(A.a)(f);return{min:d,max:h}};n.a=s},function(t,n,a){var i=Array.prototype,o=i.splice,A=i.indexOf,s=function(u){for(var f=[],l=1;l<arguments.length;l++)f[l-1]=arguments[l];for(var c=0;c<f.length;c++)for(var h=f[c],d=-1;(d=A.call(u,h))>-1;)o.call(u,d,1);return u};n.a=s},function(t,n,a){var i=a(1),o=a(24),A=function(s,u){var f=[];if(!Object(i.a)(s))return f;for(var l=-1,c=[],h=s.length;++l<h;){var d=s[l];u(d,l,s)&&(f.push(d),c.push(l))}return Object(o.a)(s,c),f};n.a=A},function(t,n,a){var i=a(0),o=a(4),A=a(2);function s(u,f){var l;if(Object(A.a)(f))l=function(h,d){return f(h)-f(d)};else{var c=[];Object(o.a)(f)?c.push(f):Object(i.a)(f)&&(c=f),l=function(h,d){for(var v=0;v<c.length;v+=1){var g=c[v];if(h[g]>d[g])return 1;if(h[g]<d[g])return-1}return 0}}return u.sort(l),u}n.a=s},function(t,n,a){var i=a(26),o=function(){for(var A=[],s=0;s<arguments.length;s++)A[s]=arguments[s];return Object(i.a)([].concat.apply([],A))};n.a=o},function(t,n,a){var i=a(0),o=a(7);n.a=function(A,s){for(var u=[],f={},l=0;l<A.length;l++){var c=A[l],h=c[s];if(!Object(o.a)(h)){Object(i.a)(h)||(h=[h]);for(var d=0;d<h.length;d++){var v=h[d];f[v]||(u.push(v),f[v]=!0)}}}return u}},function(t,n,a){n.a=o;var i=a(1);function o(A){if(Object(i.a)(A))return A[0]}},function(t,n,a){n.a=o;var i=a(1);function o(A){if(Object(i.a)(A)){var s=A;return s[s.length-1]}}},function(t,n,a){var i=a(0),o=a(4);function A(s,u){return Object(i.a)(s)||Object(o.a)(s)?s[0]===u:!1}n.a=A},function(t,n,a){var i=a(0),o=a(4);function A(s,u){return Object(i.a)(s)||Object(o.a)(s)?s[s.length-1]===u:!1}n.a=A},function(t,n,a){var i=function(o,A){for(var s=0;s<o.length;s++)if(!A(o[s],s))return!1;return!0};n.a=i},function(t,n,a){var i=function(o,A){for(var s=0;s<o.length;s++)if(A(o[s],s))return!0;return!1};n.a=i},function(t,n,a){var i=a(27);n.a=function(o,A){if(!A)return[o];var s=Object(i.a)(o,A),u=[];for(var f in s)u.push(s[f]);return u}},function(t,n,a){function i(o,A){return o["_wrap_"+A]}n.a=i},function(t,n,a){function i(o,A){if(o["_wrap_"+A])return o["_wrap_"+A];var s=function(u){o[A](u)};return o["_wrap_"+A]=s,s}n.a=i},function(t,n,a){var i={};function o(A){var s=i[A];if(!s){for(var u=A.toString(16),f=u.length;f<6;f++)u="0"+u;s="#"+u,i[A]=s}return s}n.a=o},function(t,n,a){var i=a(0);function o(A){var s=0,u=0,f=0,l=0;return Object(i.a)(A)?A.length===1?s=u=f=l=A[0]:A.length===2?(s=f=A[0],u=l=A[1]):A.length===3?(s=A[0],u=l=A[1],f=A[2]):(s=A[0],u=A[1],f=A[2],l=A[3]):s=u=f=l=A,{r1:s,r2:u,r3:f,r4:l}}n.a=o},function(t,n,a){var i=function(o,A,s){return o<A?A:o>s?s:o};n.a=i},function(t,n,a){var i=function(o,A){var s=A.toString(),u=s.indexOf(".");if(u===-1)return Math.round(o);var f=s.substr(u+1).length;return f>20&&(f=20),parseFloat(o.toFixed(f))};n.a=i},function(t,n,a){var i=a(5),o=function(A){return Object(i.a)(A)&&A%1!==0};n.a=o},function(t,n,a){var i=a(5),o=function(A){return Object(i.a)(A)&&A%2===0};n.a=o},function(t,n,a){var i=a(5),o=Number.isInteger?Number.isInteger:function(A){return Object(i.a)(A)&&A%1===0};n.a=o},function(t,n,a){var i=a(5),o=function(A){return Object(i.a)(A)&&A<0};n.a=o},function(t,n,a){n.a=o;var i=1e-5;function o(A,s,u){return u===void 0&&(u=i),Math.abs(A-s)<u}},function(t,n,a){var i=a(5),o=function(A){return Object(i.a)(A)&&A%2!==0};n.a=o},function(t,n,a){var i=a(5),o=function(A){return Object(i.a)(A)&&A>0};n.a=o},function(t,n,a){var i=a(0),o=a(2);n.a=function(A,s){if(Object(i.a)(A)){for(var u,f=-1/0,l=0;l<A.length;l++){var c=A[l],h=Object(o.a)(s)?s(c):c[s];h>f&&(u=c,f=h)}return u}}},function(t,n,a){var i=a(0),o=a(2);n.a=function(A,s){if(Object(i.a)(A)){for(var u,f=1/0,l=0;l<A.length;l++){var c=A[l],h=Object(o.a)(s)?s(c):c[s];h<f&&(u=c,f=h)}return u}}},function(t,n,a){var i=function(o,A){return(o%A+A)%A};n.a=i},function(t,n,a){var i=180/Math.PI,o=function(A){return i*A};n.a=o},function(t,n,a){n.a=parseInt},function(t,n,a){var i=Math.PI/180,o=function(A){return i*A};n.a=o},function(t,n,a){var i=a(8);n.a=i.a},function(t,n,a){var i=a(29);n.a=i.a},function(t,n,a){var i=a(13),o=a(15);n.a=function(A,s){return Object(i.a)(Object(o.a)(A),s)}},function(t,n,a){var i=a(9),o=function(A){return Object(i.a)(A).toLowerCase()};n.a=o},function(t,n,a){var i=a(9),o=function(A){var s=Object(i.a)(A);return s.charAt(0).toLowerCase()+s.substring(1)};n.a=o},function(t,n,a){function i(o,A){return!o||!A?o:o.replace(/\\?\{([^{}]+)\}/g,function(s,u){return s.charAt(0)==="\\"?s.slice(1):A[u]===void 0?"":A[u]})}n.a=i},function(t,n,a){var i=a(9),o=function(A){return Object(i.a)(A).toUpperCase()};n.a=o},function(t,n,a){var i=a(9),o=function(A){var s=Object(i.a)(A);return s.charAt(0).toUpperCase()+s.substring(1)};n.a=o},function(t,n,a){var i=a(3),o=function(A){return Object(i.a)(A,"Arguments")};n.a=o},function(t,n,a){var i=a(3),o=function(A){return Object(i.a)(A,"Boolean")};n.a=o},function(t,n,a){var i=a(3),o=function(A){return Object(i.a)(A,"Date")};n.a=o},function(t,n,a){var i=a(3),o=function(A){return Object(i.a)(A,"Error")};n.a=o},function(t,n,a){var i=a(5);n.a=function(o){return Object(i.a)(o)&&isFinite(o)}},function(t,n,a){var i=function(o){return o===null};n.a=i},function(t,n,a){var i=a(3),o=function(A){return Object(i.a)(A,"RegExp")};n.a=o},function(t,n,a){var i=function(o){return o===void 0};n.a=i},function(t,n,a){var i=function(o){return o instanceof Element||o instanceof HTMLDocument};n.a=i},function(t,n,a){n.a=i;function i(o){var A=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(s){return setTimeout(s,16)};return A(o)}},function(t,n,a){n.a=i;function i(o){var A=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;A(o)}},function(t,n,a){var i=a(16),o=a(2),A=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];for(var f=s[0],l=1;l<s.length;l++){var c=s[l];Object(o.a)(c)&&(c=c.prototype),Object(i.a)(f.prototype,c)}};n.a=A},function(t,n,a){var i=a(0),o=function(A){if(typeof A!="object"||A===null)return A;var s;if(Object(i.a)(A)){s=[];for(var u=0,f=A.length;u<f;u++)typeof A[u]=="object"&&A[u]!=null?s[u]=o(A[u]):s[u]=A[u]}else{s={};for(var l in A)typeof A[l]=="object"&&A[l]!=null?s[l]=o(A[l]):s[l]=A[l]}return s};n.a=o},function(t,n,a){function i(o,A,s){var u;return function(){var f=this,l=arguments,c=function(){u=null,s||o.apply(f,l)},h=s&&!u;clearTimeout(u),u=setTimeout(c,A),h&&o.apply(f,l)}}n.a=i},function(t,n,a){var i=a(0),o=a(10),A=5;function s(f,l,c,h){c=c||0,h=h||A;for(var d in l)if(l.hasOwnProperty(d)){var v=l[d];v!==null&&Object(o.a)(v)?(Object(o.a)(f[d])||(f[d]={}),c<h?s(f[d],v,c+1,h):f[d]=l[d]):Object(i.a)(v)?(f[d]=[],f[d]=f[d].concat(v)):v!==void 0&&(f[d]=v)}}var u=function(f){for(var l=[],c=1;c<arguments.length;c++)l[c-1]=arguments[c];for(var h=0;h<l.length;h+=1)s(f,l[h]);return f};n.a=u},function(t,n,a){var i=a(16),o=a(2),A=function(s,u,f,l){Object(o.a)(u)||(f=u,u=s,s=function(){});var c=Object.create?function(d,v){return Object.create(d,{constructor:{value:v}})}:function(d,v){function g(){}g.prototype=d;var p=new g;return p.constructor=v,p},h=c(u.prototype,s);return s.prototype=Object(i.a)(h,s.prototype),s.superclass=c(u.prototype,u),Object(i.a)(h,f),Object(i.a)(s,l),s};n.a=A},function(t,n,a){var i=a(1),o=function(A,s){if(!Object(i.a)(A))return-1;var u=Array.prototype.indexOf;if(u)return u.call(A,s);for(var f=-1,l=0;l<A.length;l++)if(A[l]===s){f=l;break}return f};n.a=o},function(t,n,a){var i=a(7),o=a(1),A=a(30),s=a(31),u=Object.prototype.hasOwnProperty;function f(l){if(Object(i.a)(l))return!0;if(Object(o.a)(l))return!l.length;var c=Object(A.a)(l);if(c==="Map"||c==="Set")return!l.size;if(Object(s.a)(l))return!Object.keys(l).length;for(var h in l)if(u.call(l,h))return!1;return!0}n.a=f},function(t,n,a){var i=a(2),o=a(33);n.a=function(A,s,u){return Object(i.a)(u)?!!u(A,s):Object(o.a)(A,s)}},function(t,n,a){var i=a(1),o=function(A,s){if(!Object(i.a)(A))return A;for(var u=[],f=0;f<A.length;f++){var l=A[f];u.push(s(l,f))}return u};n.a=o},function(t,n,a){var i=a(7),o=a(12),A=function(s){return s};n.a=function(s,u){u===void 0&&(u=A);var f={};return Object(o.a)(s)&&!Object(i.a)(s)&&Object.keys(s).forEach(function(l){f[l]=u(s[l],l)}),f}},function(t,n,a){var i=a(4);n.a=function(o,A,s){for(var u=0,f=Object(i.a)(A)?A.split("."):A;o&&u<f.length;)o=o[f[u++]];return o===void 0||u<f.length?s:o}},function(t,n,a){var i=a(12),o=a(4),A=a(5);n.a=function(s,u,f){var l=s,c=Object(o.a)(u)?u.split("."):u;return c.forEach(function(h,d){d<c.length-1?(Object(i.a)(l[h])||(l[h]=Object(A.a)(c[d+1])?[]:{}),l=l[h]):l[h]=f}),s}},function(t,n,a){var i=a(8),o=a(10),A=Object.prototype.hasOwnProperty;n.a=function(s,u){if(s===null||!Object(o.a)(s))return{};var f={};return Object(i.a)(u,function(l){A.call(s,l)&&(f[l]=s[l])}),f}},function(t,n,a){var i=a(25);n.a=function(o,A){return Object(i.a)(o,function(s,u,f){return A.includes(f)||(s[f]=u),s},{})}},function(t,n,a){n.a=function(i,o,A){var s,u,f,l,c=0;A||(A={});var h=function(){c=A.leading===!1?0:Date.now(),s=null,l=i.apply(u,f),s||(u=f=null)},d=function(){var v=Date.now();!c&&A.leading===!1&&(c=v);var g=o-(v-c);return u=this,f=arguments,g<=0||g>o?(s&&(clearTimeout(s),s=null),c=v,l=i.apply(u,f),s||(u=f=null)):!s&&A.trailing!==!1&&(s=setTimeout(h,g)),l};return d.cancel=function(){clearTimeout(s),c=0,s=u=f=null},d}},function(t,n,a){var i=a(1);n.a=function(o){return Object(i.a)(o)?Array.prototype.slice.call(o):[]}},function(t,n,a){var i={};n.a=function(o){return o=o||"g",i[o]?i[o]+=1:i[o]=1,o+i[o]}},function(t,n,a){n.a=function(){}},function(t,n,a){n.a=function(i){return i}},function(t,n,a){n.a=A;var i=a(7),o=a(1);function A(s){return Object(i.a)(s)?0:Object(o.a)(s)?s.length:Object.keys(s).length}},function(t,n,a){n.a=i;function i(){for(var o=0,A=0,s=arguments.length;A<s;A++)o+=arguments[A].length;for(var u=Array(o),f=0,A=0;A<s;A++)for(var l=arguments[A],c=0,h=l.length;c<h;c++,f++)u[f]=l[c];return u}},function(t,n,a){var i=a(4),o=a(9),A=a(34);n.a=function(s,u,f,l){l===void 0&&(l="...");var c=16,h=Object(A.a)(l,f),d=Object(i.a)(s)?s:Object(o.a)(s),v=u,g=[],p,y;if(Object(A.a)(s,f)<=u)return s;for(;p=d.substr(0,c),y=Object(A.a)(p,f),!(y+h>v&&y>v);)if(g.push(p),v-=y,d=d.substr(c),!d)return g.join("");for(;p=d.substr(0,1),y=Object(A.a)(p,f),!(y+h>v);)if(g.push(p),v-=y,d=d.substr(1),!d)return g.join("");return""+g.join("")+l}},function(t,n,a){var i=function(){function o(){this.map={}}return o.prototype.has=function(A){return this.map[A]!==void 0},o.prototype.get=function(A,s){var u=this.map[A];return u===void 0?s:u},o.prototype.set=function(A,s){this.map[A]=s},o.prototype.clear=function(){this.map={}},o.prototype.delete=function(A){delete this.map[A]},o.prototype.size=function(){return Object.keys(this.map).length},o}();n.a=i},function(t,n){function a(f,l,c,h){h===void 0&&(h=[]);var d=this;d.w=f||0,d.h=l||0,d.y=c||0,d.x=0,d.c=h||[],d.cs=h.length,d.prelim=0,d.mod=0,d.shift=0,d.change=0,d.tl=null,d.tr=null,d.el=null,d.er=null,d.msel=0,d.mser=0}a.fromNode=function(f,l){if(!f)return null;var c=[];return f.children.forEach(function(h){c.push(a.fromNode(h,l))}),l?new a(f.height,f.width,f.x,c):new a(f.width,f.height,f.y,c)};function i(f,l,c){c?f.y+=l:f.x+=l,f.children.forEach(function(h){i(h,l,c)})}function o(f,l){var c=l?f.y:f.x;return f.children.forEach(function(h){c=Math.min(o(h,l),c)}),c}function A(f,l){var c=o(f,l);i(f,-c,l)}function s(f,l,c){c?l.y=f.x:l.x=f.x,f.c.forEach(function(h,d){s(h,l.children[d],c)})}function u(f,l,c){c===void 0&&(c=0),l?(f.x=c,c+=f.width):(f.y=c,c+=f.height),f.children.forEach(function(h){u(h,l,c)})}t.exports=function(f,l){l===void 0&&(l={});var c=l.isHorizontal;function h(S){if(S.cs===0){d(S);return}h(S.c[0]);for(var I=x(m(S.c[0].el),0,null),D=1;D<S.cs;++D){h(S.c[D]);var O=m(S.c[D].er);v(S,D,I),I=x(O,D,I)}E(S),d(S)}function d(S){S.cs===0?(S.el=S,S.er=S,S.msel=S.mser=0):(S.el=S.c[0].el,S.msel=S.c[0].msel,S.er=S.c[S.cs-1].er,S.mser=S.c[S.cs-1].mser)}function v(S,I,D){for(var O=S.c[I-1],F=O.mod,U=S.c[I],Q=U.mod;O!==null&&U!==null;){m(O)>D.low&&(D=D.nxt);var N=F+O.prelim+O.w-(Q+U.prelim);N>0&&(Q+=N,g(S,I,D.index,N));var R=m(O),J=m(U);R<=J&&(O=y(O),O!==null&&(F+=O.mod)),R>=J&&(U=p(U),U!==null&&(Q+=U.mod))}!O&&U?w(S,I,U,Q):O&&!U&&B(S,I,O,F)}function g(S,I,D,O){S.c[I].mod+=O,S.c[I].msel+=O,S.c[I].mser+=O,C(S,I,D,O)}function p(S){return S.cs===0?S.tl:S.c[0]}function y(S){return S.cs===0?S.tr:S.c[S.cs-1]}function m(S){return S.y+S.h}function w(S,I,D,O){var F=S.c[0].el;F.tl=D;var U=O-D.mod-S.c[0].msel;F.mod+=U,F.prelim-=U,S.c[0].el=S.c[I].el,S.c[0].msel=S.c[I].msel}function B(S,I,D,O){var F=S.c[I].er;F.tr=D;var U=O-D.mod-S.c[I].mser;F.mod+=U,F.prelim-=U,S.c[I].er=S.c[I-1].er,S.c[I].mser=S.c[I-1].mser}function E(S){S.prelim=(S.c[0].prelim+S.c[0].mod+S.c[S.cs-1].mod+S.c[S.cs-1].prelim+S.c[S.cs-1].w)/2-S.w/2}function b(S,I){I+=S.mod,S.x=S.prelim+I,_(S);for(var D=0;D<S.cs;D++)b(S.c[D],I)}function C(S,I,D,O){if(D!==I-1){var F=I-D;S.c[D+1].shift+=O/F,S.c[I].shift-=O/F,S.c[I].change-=O-O/F}}function _(S){for(var I=0,D=0,O=0;O<S.cs;O++)I+=S.c[O].shift,D+=I+S.c[O].change,S.c[O].mod+=D}function x(S,I,D){for(;D!==null&&S>=D.low;)D=D.nxt;return{low:S,index:I,nxt:D}}u(f,c);var M=a.fromNode(f,c);return h(M),b(M,0),s(M,f,c),A(f,c),f}},function(t,n,a){function i(d,v){d.prototype=Object.create(v.prototype),d.prototype.constructor=d,o(d,v)}function o(d,v){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,y){return p.__proto__=y,p},o(d,v)}var A=a(11),s=a(121),u=a(17),f=a(6),l=function(d){i(v,d);function v(){return d.apply(this,arguments)||this}var g=v.prototype;return g.execute=function(){var y=this;return y.rootNode.width=0,u(y.rootNode,y.options,s)},v}(A),c={};function h(d,v){return v=f.assign({},c,v),new l(d,v).execute()}t.exports=h},function(t,n,a){var i=a(6);function o(u,f){f===void 0&&(f=[]);var l=this;l.x=l.y=0,l.leftChild=l.rightChild=null,l.height=0,l.children=f}var A={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function s(u,f,l){l?(f.x=u.x,f.y=u.y):(f.x=u.y,f.y=u.x),u.children.forEach(function(c,h){s(c,f.children[h],l)})}t.exports=function(u,f){f===void 0&&(f={}),f=i.assign({},A,f);var l=0;function c(p){if(!p)return null;p.width=0,p.depth&&p.depth>l&&(l=p.depth);var y=p.children,m=y.length,w=new o(p.height,[]);return y.forEach(function(B,E){var b=c(B);w.children.push(b),E===0&&(w.leftChild=b),E===m-1&&(w.rightChild=b)}),w.originNode=p,w.isLeaf=p.isLeaf(),w}function h(p){if(p.isLeaf||p.children.length===0)p.drawingDepth=l;else{var y=p.children.map(function(w){return h(w)}),m=Math.min.apply(null,y);p.drawingDepth=m-1}return p.drawingDepth}var d;function v(p){p.x=p.drawingDepth*f.rankSep,p.isLeaf?(p.y=0,d&&(p.y=d.y+d.height+f.nodeSep,p.originNode.parent!==d.originNode.parent&&(p.y+=f.subTreeSep)),d=p):(p.children.forEach(function(y){v(y)}),p.y=(p.leftChild.y+p.rightChild.y)/2)}var g=c(u);return h(g),v(g),s(g,u,f.isHorizontal),u}},function(t,n,a){function i(g,p){g.prototype=Object.create(p.prototype),g.prototype.constructor=g,o(g,p)}function o(g,p){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,w){return m.__proto__=w,m},o(g,p)}var A=a(11),s=a(123),u=a(35),f=a(6),l=["LR","RL","H"],c=l[0],h=function(g){i(p,g);function p(){return g.apply(this,arguments)||this}var y=p.prototype;return y.execute=function(){var w=this,B=w.options,E=w.rootNode;B.isHorizontal=!0;var b=B.indent,C=b===void 0?20:b,_=B.dropCap,x=_===void 0?!0:_,M=B.direction,S=M===void 0?c:M,I=B.align;if(S&&l.indexOf(S)===-1)throw new TypeError("Invalid direction: "+S);if(S===l[0])s(E,C,x,I);else if(S===l[1])s(E,C,x,I),E.right2left();else if(S===l[2]){var D=u(E,B),O=D.left,F=D.right;s(O,C,x,I),O.right2left(),s(F,C,x,I);var U=O.getBoundingBox();F.translate(U.width,0),E.x=F.x-E.width/2}return E},p}(A),d={};function v(g,p){return p=f.assign({},d,p),new h(g,p).execute()}t.exports=v},function(t,n,a){var i=a(6);function o(A,s,u,f,l){var c=typeof u=="function"?u(A):u*A.depth;if(!f)try{if(A.id===A.parent.children[0].id){A.x+=c,A.y=s?s.y:0;return}}catch{}if(A.x+=c,s){if(A.y=s.y+i.getHeight(s,A,l),s.parent&&A.parent.id!==s.parent.id){var h=s.parent,d=h.y+i.getHeight(h,A,l);A.y=d>A.y?d:A.y}}else A.y=0}t.exports=function(A,s,u,f){var l=null;A.eachNode(function(c){o(c,l,s,u,f),l=c})}},function(t,n,a){function i(d,v){d.prototype=Object.create(v.prototype),d.prototype.constructor=d,o(d,v)}function o(d,v){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,y){return p.__proto__=y,p},o(d,v)}var A=a(11),s=a(125),u=a(17),f=a(6),l=function(d){i(v,d);function v(){return d.apply(this,arguments)||this}var g=v.prototype;return g.execute=function(){var y=this;return u(y.rootNode,y.options,s)},v}(A),c={};function h(d,v){return v=f.assign({},c,v),new l(d,v).execute()}t.exports=h},function(t,n,a){var i=a(6);function o(u,f){var l=0;return u.children.length?u.children.forEach(function(c){l+=o(c,f)}):l=u.height,u._subTreeSep=f.getSubTreeSep(u.data),u.totalHeight=Math.max(u.height,l)+2*u._subTreeSep,u.totalHeight}function A(u){var f=u.children,l=f.length;if(l){f.forEach(function(p){A(p)});var c=f[0],h=f[l-1],d=h.y-c.y+h.height,v=0;if(f.forEach(function(p){v+=p.totalHeight}),d>u.height)u.y=c.y+d/2-u.height/2;else if(f.length!==1||u.height>v){var g=u.y+(u.height-d)/2-c.y;f.forEach(function(p){p.translate(0,g)})}else u.y=(c.y+c.height/2+h.y+h.height/2)/2-u.height/2}}var s={getSubTreeSep:function(){return 0}};t.exports=function(u,f){f===void 0&&(f={}),f=i.assign({},s,f),u.parent={x:0,width:0,height:0,y:0},u.BFTraverse(function(l){l.x=l.parent.x+l.parent.width}),u.parent=null,o(u,f),u.startY=0,u.y=u.totalHeight/2-u.height/2,u.eachNode(function(l){var c=l.children,h=c.length;if(h){var d=c[0];if(d.startY=l.startY+l._subTreeSep,h===1)d.y=l.y+l.height/2-d.height/2;else{d.y=d.startY+d.totalHeight/2-d.height/2;for(var v=1;v<h;v++){var g=c[v];g.startY=c[v-1].startY+c[v-1].totalHeight,g.y=g.startY+g.totalHeight/2-g.height/2}}}}),A(u)}}])})})(SP);var fve=SP.exports;const lg=qi(fve);var NM=Hn.traverseTree,lve=function(e,t){var n;return e?vt(e)?n=function(i){return e}:n=e:n=function(i){return t||1},n},cve=function(e,t){var n=[],a=[],i={},o=0;for(o=0;o<e.length;o++){var A=e[o];i[A.id]=o,n.push(A.x),n.push(A.y),n.push(0),n.push(0),a.push([])}for(o=0;o<t.length;o++){var s=t[o];a[i[s.source]].push(i[s.target]),a[i[s.target]].push(i[s.source])}var u=0;for(o=0;o<e.length;o++){var f=n.length,l=a[o],c=l.length;n[o*4+2]=f,n[o*4+3]=l.length,u=Math.max(u,l.length);for(var h=0;h<c;++h){var d=l[h];n.push(+d)}}for(;n.length%4!==0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:u}},hve=function(e,t,n){var a=[],i=[],o={},A=0;for(A=0;A<e.length;A++){var s=e[A];o[s.id]=A,a.push(s.x),a.push(s.y),a.push(0),a.push(0),i.push([])}for(A=0;A<t.length;A++){var u=t[A];i[o[u.source]].push(o[u.target]),i[o[u.source]].push(n(u)),i[o[u.target]].push(o[u.source]),i[o[u.target]].push(n(u))}var f=0;for(A=0;A<e.length;A++){var l=a.length,c=i[A],h=c.length;a[A*4+2]=l,a[A*4+3]=h/2,f=Math.max(f,h/2);for(var d=0;d<h;++d){var v=c[d];a.push(+v)}}for(;a.length%4!==0;)a.push(0);return{array:new Float32Array(a),maxEdgePerVetex:f}},dve=function(e,t,n,a){var i=[],o=[],A={},s=0;for(s=0;s<e.length;s++){var u=e[s];A[u.id]=s,i.push(u.x),i.push(u.y),i.push(0),i.push(0),o.push([])}for(s=0;s<t.length;s++){var f=t[s];o[A[f.source]].push(A[f.target]),o[A[f.source]].push(n(f)),o[A[f.source]].push(a(f)),o[A[f.source]].push(0),o[A[f.target]].push(A[f.source]),o[A[f.target]].push(n(f)),o[A[f.target]].push(a(f)),o[A[f.target]].push(0)}var l=0;for(s=0;s<e.length;s++){var c=i.length,h=o[s],d=h.length;i[s*4+2]=c+1048576*d/4,i[s*4+3]=0,l=Math.max(l,d/4);for(var v=0;v<d;++v){var g=h[v];i.push(+g)}}for(;i.length%4!==0;)i.push(0);return{array:new Float32Array(i),maxEdgePerVetex:l}},vve=function(e,t){var n=[],a=e.length,i={};return t.forEach(function(o){e.forEach(function(A,s){if(i[o[A]]===void 0&&(i[o[A]]=Object.keys(i).length),n.push(i[o[A]]),s===a-1)for(;n.length%4!==0;)n.push(0)})}),{array:new Float32Array(n),count:Object.keys(i).length}},gve=function(e){for(var t=[],n=e.length,a=e[0].length,i=function(s){e.forEach(function(u,f){if(t.push(u[s]),f===n-1)for(;t.length%4!==0;)t.push(0)})},o=0;o<a;o++)i(o);return new Float32Array(t)},pve=function(e,t){var n=["V","TB","BT"],a={x:1/0,y:1/0},i={x:-1/0,y:-1/0},o="x",A="y";t&&n.indexOf(t)>=0&&(A="x",o="y");var s=0;NM(e,function(l){return s++,l.x>i.x&&(i.x=l.x),l.x<a.x&&(a.x=l.x),l.y>i.y&&(i.y=l.y),l.y<a.y&&(a.y=l.y),!0});var u=Math.PI*2/s,f=i[A]-a[A];return f===0||NM(e,function(l){var c=(l[A]-a[A])/f*(Math.PI*2-u)+u,h=Math.abs(o==="x"?l.x-e.x:l.y-e.y);return l.x=h*Math.cos(c),l.y=h*Math.sin(c),!0}),e};const yve=Object.freeze(Object.defineProperty({__proto__:null,arrayToTextureData:gve,attributesToTextureData:vve,buildTextureData:cve,buildTextureDataWithOneEdgeAttr:hve,buildTextureDataWithTwoEdgeAttr:dve,proccessToFunc:lve,radialLayout:pve},Symbol.toStringTag,{value:"Module"}));var MP=function r(){return typeof window>"u"||typeof document>"u"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl")))}catch{return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),t},addGetWebGLMessage:function(t){t=t||{};var n=t.parent!==void 0?t.parent:document.body,a=t.id!==void 0?t.id:"oldie",i=r().getWebGLErrorMessage();i.id=a,n.appendChild(i)}}};const mve=Object.freeze(Object.defineProperty({__proto__:null,gpuDetector:MP},Symbol.toStringTag,{value:"Module"}));var IP=function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("firefox")>-1?"firefox":e.indexOf("safari")>-1?"safari":e.indexOf("opr")>-1?"opera":e.indexOf("chrome")>-1?"chrome":e.indexOf("trident")>-1?"ie 11":e.indexOf("ie")>-1?"ie":"unknown"};const wve=Object.freeze(Object.defineProperty({__proto__:null,getBrowserName:IP},Symbol.toStringTag,{value:"Module"}));var zo=P(P(P(P(P({},Hn),aZ),yve),mve),wve),Bve=zo.radialLayout,Eve=function(){function r(e){this.type=e.type,this.radial=e.radial,this.config=e}return r.prototype.init=function(e){var t=this;if(this.data=e,this.radial){this.layoutMethod=function(n){var a=lg[t.type](n,t.config);return Bve(a),a};return}this.layoutMethod=function(n){return lg[t.type](n,t.config)}},r.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},r.prototype.layout=function(e){return this.init(e),this.execute()},r}();Yt.registerLayout("grid",Yt.GridLayout);Yt.registerLayout("random",Yt.RandomLayout);Yt.registerLayout("force",Yt.ForceLayout);Yt.registerLayout("circular",Yt.CircularLayout);Yt.registerLayout("dagre",Yt.DagreLayout);Yt.registerLayout("dagreCompound",Yt.DagreCompoundLayout);Yt.registerLayout("radial",Yt.RadialLayout);Yt.registerLayout("concentric",Yt.ConcentricLayout);Yt.registerLayout("mds",Yt.MDSLayout);Yt.registerLayout("fruchterman",Yt.FruchtermanLayout);Yt.registerLayout("fruchterman-gpu",Yt.FruchtermanGPULayout);Yt.registerLayout("gForce",Yt.GForceLayout);Yt.registerLayout("force2",Yt.Force2Layout);Yt.registerLayout("gForce-gpu",Yt.GForceGPULayout);Yt.registerLayout("comboForce",Yt.ComboForceLayout);Yt.registerLayout("comboCombined",Yt.ComboCombinedLayout);Yt.registerLayout("forceAtlas2",Yt.ForceAtlas2Layout);var bve=function(e,t){t.isCustomLayout=!0,Yt.Layouts[e]=Yt.registerLayout(e,t)},xve=function(){function r(e,t){var n=e.toString(),a=new Blob(["importScripts('".concat(t,"');(").concat(n,")()")],{type:"text/javascript"});return new Worker(URL.createObjectURL(a))}return r}(),Cve=function(e){e===void 0&&(e="https://unpkg.com/@antv/layout@0.3.23/dist/layout.min.js");function t(){var a={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("force2",layout.Force2Layout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout);function i(A){var s=A.data.type;return s===a.RUN||s===a.GPURUN}function o(A){var s=this,u=A.data.type;switch(u){case a.RUN:{var f=A.data,l=f.nodes,c=f.edges,h=f.layoutCfg,d=h===void 0?{}:h,v=d.type,g=layout.getLayoutByName(v);if(!g){this.postMessage({type:a.ERROR,message:"layout ".concat(v," not found")});break}var p;d.onLayoutEnd=function(){s.postMessage({type:a.END,nodes:l}),p==null||p.destroy()},p=new g(d),p.init({nodes:l,edges:c}),p.execute();break}case a.GPURUN:{var y=A.data,m=y.nodes,c=y.edges,w=y.layoutCfg,d=w===void 0?{}:w,B=y.canvas,v=d.type,g=layout.getLayoutByName(v);if(!g){this.postMessage({type:a.ERROR,message:"layout ".concat(v," not found")});break}if(v.split("-")[1]!=="gpu"){this.postMessage({type:a.ERROR,message:"layout ".concat(v," does not support GPU")});break}var E=new g(d);E.init({nodes:m,edges:c}),E.executeWithWorker(B,this);break}}}onmessage=function(s){i(s)&&o(s)}}var n=new xve(t,e);return n},gu={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};function Y1(r){"@babel/helpers - typeof";return Y1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y1(r)}var kM=function(e){return setTimeout(e,16)},PM=function(e){return clearTimeout(e)},md={requestAnimationFrame:function(e){var t=typeof window<"u"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||kM;return t(e)},cancelAnimationFrame:function(e){var t=typeof window<"u"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||PM;return t(e)}},_ve=["fruchterman","gForce"],Sve=["force","grid","circular"],Mve=function(r){Lt(e,r);function e(t){var n=r.call(this,t)||this;return n.graph=t,n.layoutCfg=t.get("layout")||{},n.layoutType=n.getLayoutType(),n.worker=null,n.workerData={},n.initLayout(),n}return e.prototype.initLayout=function(){},e.prototype.getWorker=function(){return this.worker?this.worker:(typeof Worker>"u"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=Cve(this.layoutCfg.workerScriptURL),this.worker)},e.prototype.stopWorker=function(){var t=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,t.requestId&&(md.cancelAnimationFrame(t.requestId),t.requestId=null),t.requestId2&&(md.cancelAnimationFrame(t.requestId2),t.requestId2=null))},e.prototype.execLayoutMethod=function(t,n){var a=this;return new Promise(function(i,o){return Ba(a,void 0,void 0,function(){var A,s,u,f,l,v,c,h,d,v,g;return Ea(this,function(p){switch(p.label){case 0:if(A=this.graph,!A||A.get("destroyed"))return[2];s=t.type,t.onLayoutEnd=function(){A.emit("aftersublayout",{type:s}),i()},s&&this.isGPU&&(TP(s)?s="".concat(s,"-gpu"):console.warn("The '".concat(s,"' layout does not support GPU calculation for now, it will run in CPU."))),Hn.isForce(s)?(u=t.onTick,f=t.animate,l=f===void 0&&(s==="force"||s==="force2"),v=function(){u&&u(),(f||l)&&A.refreshPositions()},t.tick=v):(s==="comboForce"||s==="comboCombined")&&(t.comboTrees=A.get("comboTrees")),c=!1;try{h=new Yt.Layouts[s](t),this.layoutMethods[n]&&this.layoutMethods[n].destroy(),this.layoutMethods[n]=h}catch{console.warn("The layout method: '".concat(s,"' does not exist! Please specify it first.")),o()}return c=h.enableTick,c&&(d=t.onTick,v=function(){d&&d(),A.refreshPositions()},h.tick=v),g=this.filterLayoutData(this.data,t),Fve(g,n),h.init(g),A.emit("beforesublayout",{type:s}),[4,h.execute()];case 1:return p.sent(),h.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd(),[2]}})})})},e.prototype.updateLayoutMethod=function(t,n){var a=this;return new Promise(function(i,o){return Ba(a,void 0,void 0,function(){var A,s,u,f,l,c,h;return Ea(this,function(d){switch(d.label){case 0:return A=this.graph,s=n==null?void 0:n.type,n.onLayoutEnd=function(){A.emit("aftersublayout",{type:s}),i()},Hn.isForce(s)&&(u=n.onTick,f=n.animate,l=f===void 0&&(s==="force"||s==="force2"),c=function(){u==null||u(),(f||l)&&A.refreshPositions()},n.tick=c),h=this.filterLayoutData(this.data,n),t.init(h),t.updateCfg(n),A.emit("beforesublayout",{type:s}),[4,t.execute()];case 1:return d.sent(),t.isCustomLayout&&n.onLayoutEnd&&n.onLayoutEnd(),[2]}})})})},e.prototype.layout=function(t){var n=this,a,i=this.graph;if(!(!i||i.get("destroyed"))){this.data=this.setDataFromGraph();var o=this.data,A=o.nodes,s=o.hiddenNodes;if(!A)return!1;var u=i.get("width"),f=i.get("height"),l={};Object.assign(l,{width:u,height:f,center:[u/2,f/2]},this.layoutCfg),this.layoutCfg=l;var c=l.type,h=!1;(a=this.layoutMethods)===null||a===void 0||a.forEach(function(B){var E;return h=!!(!((E=B.nodes)===null||E===void 0)&&E.length)||h});var d=this.destoryLayoutMethods();i.emit("beforelayout");var v=Promise.resolve();h&&c&&(d==null?void 0:d.length)===1&&d[0]===c?this.tweakInit():v=this.initPositions(l.center,A);var g=this.initPositions(l.center,s);g.then(),this.isGPU=QM(l,c);var p=l.onLayoutEnd,y=l.layoutEndFormatted,m=l.adjust;if(y||(l.layoutEndFormatted=!0,l.onAllLayoutEnd=function(){return Ba(n,void 0,void 0,function(){return Ea(this,function(B){switch(B.label){case 0:return p&&p(A),this.refreshLayout(),m&&l.pipes?[4,this.adjustPipesBox(this.data,m)]:[3,2];case 1:B.sent(),this.refreshLayout(),B.label=2;case 2:return i.emit("afterlayout"),[2]}})})}),this.stopWorker(),l.workerEnabled&&this.layoutWithWorker(this.data,t))return!0;var w=!1;return l.type?(w=!0,v=v.then(function(){return Ba(n,void 0,void 0,function(){return Ea(this,function(B){switch(B.label){case 0:return[4,this.execLayoutMethod(l,0)];case 1:return[2,B.sent()]}})})})):l.pipes&&(w=!0,l.pipes.forEach(function(B,E){v=v.then(function(){return Ba(n,void 0,void 0,function(){return Ea(this,function(b){switch(b.label){case 0:return[4,this.execLayoutMethod(B,E)];case 1:return[2,b.sent()]}})})})})),w?v.then(function(){l.onAllLayoutEnd&&l.onAllLayoutEnd(),t&&t()}).catch(function(B){console.warn("graph layout failed,",B)}):(i.refreshPositions(),t==null||t()),!1}},e.prototype.tweakInit=function(){var t=this,n=t.data,a=t.graph,i=n.nodes,o=n.edges;if(i!=null&&i.length){var A={};i.forEach(function(f){var l=f.x,c=f.y;!isNaN(l)&&!isNaN(c)&&(A[f.id]={x:l,y:c},f.mass=f.mass||2)}),o.forEach(function(f){var l=f.source,c=f.target,h=A[l],d=A[c];!h&&d?A[l]={x:d.x+(Math.random()-.5)*80,y:d.y+(Math.random()-.5)*80}:!d&&h&&(A[c]={x:h.x+(Math.random()-.5)*80,y:h.y+(Math.random()-.5)*80})});var s=a.get("width"),u=a.get("height");i.forEach(function(f){var l=A[f.id]||{x:s/2+(Math.random()-.5)*20,y:u/2+(Math.random()-.5)*20};f.x=l.x,f.y=l.y})}},e.prototype.initWithPreset=function(t,n){var a=this;return new Promise(function(i,o){return Ba(a,void 0,void 0,function(){var A,s,u,f,l,c,h;return Ea(this,function(d){switch(d.label){case 0:return A=this,s=A.layoutCfg,u=A.data,f=s.preset,!(f!=null&&f.type)||!Yt.Layouts[f==null?void 0:f.type]?(n==null||n(),i(),[2,!1]):(l=QM(f,f.type),c=l?"".concat(f.type,"-gpu"):f.type,h=new Yt.Layouts[c](f),delete s.preset,h.init(u),[4,h.execute()]);case 1:return d.sent(),t==null||t(),i(),[2,!0]}})})})},e.prototype.layoutWithWorker=function(t,n){var a=this,i=this,o=i.layoutCfg,A=i.graph,s=this.getWorker(),u=this.workerData;if(!s)return!1;u.requestId=null,u.requestId2=null,u.currentTick=null,u.currentTickData=null,A.emit("beforelayout");var f=Promise.resolve(),l=!1;if(o.type)l=!0,f=f.then(function(){return a.runWebworker(s,t,o)});else if(o.pipes){l=!0;for(var c=function(p){f=f.then(function(){return a.runWebworker(s,t,p)})},h=0,d=o.pipes;h<d.length;h++){var v=d[h];c(v)}}return l&&f.then(function(){o.onAllLayoutEnd&&o.onAllLayoutEnd(),n==null||n()}).catch(function(g){console.error("layout failed",g)}),!0},e.prototype.runWebworker=function(t,n,a){var i=this,o=this.isGPU,A=this.filterLayoutData(n,a),s=A.nodes,u=A.edges,f=document.createElement("canvas"),l=o&&typeof window<"u"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in f,c=Ive(a,function(d){return typeof d!="function"});if(!l)t.postMessage({type:gu.RUN,nodes:s,edges:u,layoutCfg:c});else{var h=f.transferControlToOffscreen();c.type="".concat(c.type,"-gpu"),t.postMessage({type:gu.GPURUN,nodes:s,edges:u,layoutCfg:c,canvas:h},[h])}return new Promise(function(d,v){t.onmessage=function(g){i.handleWorkerMessage(d,v,g,A,a)}})},e.prototype.handleWorkerMessage=function(t,n,a,i,o){var A=this,s=A.graph,u=A.workerData,f=a.data,l=f.type,c=function(){o.onTick&&o.onTick()};switch(l){case gu.TICK:u.currentTick=f.currentTick,u.currentTickData=f,u.requestId||(u.requestId=md.requestAnimationFrame(function(){qy(i,f),s.refreshPositions(),c(),f.currentTick===f.totalTicks?t():u.currentTick===f.totalTicks&&(u.requestId2=md.requestAnimationFrame(function(){qy(i,u.currentTickData),s.refreshPositions(),u.requestId2=null,c(),t()})),u.requestId=null}));break;case gu.END:u.currentTick==null&&(qy(i,f),t());break;case gu.GPUEND:u.currentTick==null&&(Tve(i,f),t());break;case gu.ERROR:console.warn("Web-Worker layout error!",f.message),n();break;default:n();break}},e.prototype.updateLayoutCfg=function(t){var n=this,a=this,i=a.graph,o=a.layoutMethods;if(!(!i||i.get("destroyed"))){var A=t.disableTriggerLayout,s=mn(t,["disableTriggerLayout"]),u=mt({},this.layoutCfg,s);if(this.layoutCfg=u,!A){if(!(o!=null&&o.length)){this.layout();return}if(this.data=this.setDataFromGraph(),this.stopWorker(),!(s.workerEnabled&&this.layoutWithWorker(this.data,null))){i.emit("beforelayout");var f=Promise.resolve(),l=!1;(o==null?void 0:o.length)===1?(l=!0,f=f.then(function(){return Ba(n,void 0,void 0,function(){return Ea(this,function(c){switch(c.label){case 0:return[4,this.updateLayoutMethod(o[0],u)];case 1:return[2,c.sent()]}})})})):o!=null&&o.length&&(l=!0,o.forEach(function(c,h){var d=u.pipes[h];f=f.then(function(){return Ba(n,void 0,void 0,function(){return Ea(this,function(v){switch(v.label){case 0:return[4,this.updateLayoutMethod(c,d)];case 1:return[2,v.sent()]}})})})})),l&&f.then(function(){u.onAllLayoutEnd&&u.onAllLayoutEnd()}).catch(function(c){console.warn("layout failed",c)})}}}},e.prototype.adjustPipesBox=function(t,n){var a=this;return new Promise(function(i){var o=t.nodes;o!=null&&o.length||i(),Sve.includes(n)||(console.warn("The adjust type ".concat(n," is not supported yet, please assign it with 'force', 'grid', or 'circular'.")),i());var A={center:a.layoutCfg.center,nodeSize:function(d){return Math.max(d.height,d.width)},preventOverlap:!0,onLayoutEnd:function(){}},s=a.getLayoutBBox(o),u=s.groupNodes,f=s.layoutNodes,l=Xt(f);A.onLayoutEnd=function(){f==null||f.forEach(function(h,d){var v,g,p,y=h.x-((v=l[d])===null||v===void 0?void 0:v.x),m=h.y-((g=l[d])===null||g===void 0?void 0:g.y);(p=u[d])===null||p===void 0||p.forEach(function(w){w.x+=y,w.y+=m})}),i()};var c=new Yt.Layouts[n](A);c.layout({nodes:f})})},e.prototype.destroy=function(){this.destoryLayoutMethods();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},e}(xO);function qy(r,e){for(var t=r.nodes,n=e.nodes,a=t.length,i=0;i<a;i++){var o=t[i];o.x=n[i].x,o.y=n[i].y}}function Ive(r,e){var t={};return r&&Y1(r)==="object"?(Object.keys(r).forEach(function(n){r.hasOwnProperty(n)&&e(r[n])&&(t[n]=r[n])}),t):r}function Tve(r,e){for(var t=r.nodes,n=e.vertexEdgeData,a=t.length,i=0;i<a;i++){var o=t[i],A=n[4*i],s=n[4*i+1];o.x=A,o.y=s}}function Fve(r,e){var t;if(!((t=r==null?void 0:r.nodes)===null||t===void 0)&&t.length){var n=r.nodes;n.forEach(function(a){a.layoutOrder=e})}}function TP(r){return _ve.includes(r)}function QM(r,e){var t=e;e&&e.split("-")[1]==="gpu"&&(t=e.split("-")[0],r.gpuEnabled=!0);var n=!1;return r.gpuEnabled&&(n=!0,MP().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),n=!1)),n&&!TP(t)&&(console.warn("The '".concat(t,"' layout does not support GPU calculation for now, it will run in CPU.")),n=!1),n}var Lve=function(e){var t=e.clone();return Dve(e,t),t},Dve=function r(e,t){var n;e.isGroup()&&t.isGroup()&&((n=e.get("children"))===null||n===void 0||n.forEach(function(A,s){var u=t.get("children")[s];r(A,u)}));var a=e.get("type"),i=t.get("type");if(!(a!=="image"||i!=="image")){var o=e.get("clipShape");o&&t.setClip({type:o.get("type"),attrs:o.attr()})}},RM=Xa,Ove="svg",FP=function(r){Lt(e,r);function e(t){var n=r.call(this,t)||this,a=n.get("defaultNode");return a||n.set("defaultNode",{type:"circle"}),a.type||(a.type="circle",n.set("defaultNode",a)),n.destroyed=!1,n}return e.prototype.initLayoutController=function(){var t=new Mve(this);this.set({layoutController:t})},e.prototype.initEventController=function(){var t=new fZ(this);this.set({eventController:t})},e.prototype.initCanvas=function(){var t=this.get("container");if(typeof t=="string"&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var n=t.clientWidth,a=t.clientHeight,i=this.get("width")||n,o=this.get("height")||a;!this.get("width")&&!this.get("height")&&(this.set("width",n),this.set("height",a));var A=this.get("renderer"),s;if(A===Ove)s=new Ml({container:t,width:i,height:o});else{var u={container:t,width:i,height:o},f=this.get("pixelRatio");f&&(u.pixelRatio=f,window.devicePixelRatio=f),s=new So(u)}this.set("canvas",s)},e.prototype.initPlugins=function(){var t=this;ye(t.get("plugins"),function(n){!n.destroyed&&n.initPlugin&&n.initPlugin(t)})},e.prototype.downloadImageWatermark=function(t,n,a,i){return Ba(this,void 0,void 0,function(){var o,A,s;return Ea(this,function(u){switch(u.label){case 0:return o=t.style.backgroundImage,A=o.slice(5,o.length-2),s=new Image,s.src=A,[4,new Promise(function(f){s.onload=function(){var l=n.createPattern(s,"repeat");n.rect(0,0,a,i),n.fillStyle=l,n.fill(),f("")}})];case 1:return u.sent(),[2]}})})},e.prototype.asyncToDataUrl=function(t,n,a,i,o,A){var s=this,u=document.querySelector(".g6-graph-watermarker"),f=this.get("canvas"),l=f.getRenderer(),c=A||f.get("el"),h="";t||(t="image/png"),setTimeout(function(){return Ba(s,void 0,void 0,function(){var d,v,g,p,y,m,w,B,E,b;return Ea(this,function(C){switch(C.label){case 0:return l!=="svg"?[3,1]:(d=c.cloneNode(!0),v=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),g=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",v),g.replaceChild(d,g.documentElement),p=new XMLSerializer().serializeToString(g),h="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(p)),[3,4]);case 1:return y=void 0,m=c.getContext("2d"),w=i||this.get("width"),B=o||this.get("height"),E=void 0,u?[4,this.downloadImageWatermark(u,m,w,B)]:[3,3];case 2:C.sent(),C.label=3;case 3:if(n){b=typeof window<"u"?window.devicePixelRatio:1;try{y=m.getImageData(0,0,w*b,B*b),E=m.globalCompositeOperation,m.globalCompositeOperation="destination-over",m.fillStyle=n,m.fillRect(0,0,w,B)}catch{console.error("Download image failed. Out of memory at ImageData creation")}}h=c.toDataURL(t),n&&(m.clearRect(0,0,w,B),m.putImageData(y,0,0),m.globalCompositeOperation=E),C.label=4;case 4:return a&&a(h),[2]}})})},16)},e.prototype.toDataURL=function(t,n){var a=this.get("canvas"),i=a.getRenderer(),o=a.get("el");t||(t="image/png");var A="";if(i==="svg"){var s=o.cloneNode(!0),u=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),f=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",u);f.replaceChild(s,f.documentElement);var l=new XMLSerializer().serializeToString(f);A="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(l))}else{var c=void 0,h=o.getContext("2d"),d=Math.max(this.get("width"),500),v=Math.max(this.get("height"),500),g=void 0;if(n){var p=typeof window<"u"&&window.devicePixelRatio||1;try{c=h.getImageData(0,0,d*p,v*p),g=h.globalCompositeOperation,h.globalCompositeOperation="destination-over",h.fillStyle=n,h.fillRect(0,0,d,v)}catch{console.error("Download image failed. Out of memory at ImageData creation")}}A=o.toDataURL(t),n&&(h.clearRect(0,0,d,v),h.putImageData(c,0,0),h.globalCompositeOperation=g)}return A},e.prototype.toFullDataURL=function(t,n,a){var i=this.get("group").getCanvasBBox(),o=i.height,A=i.width,s=this.get("renderer"),u=Sr('<div id="virtual-image"></div>'),f=a?a.backgroundColor:void 0,l=a?a.padding:void 0;l?vt(l)&&(l=[l,l,l,l]):l=[0,0,0,0];var c=o+l[0]+l[2],h=A+l[1]+l[3],d={container:u,height:c,width:h,quickHit:!0},v=s==="svg"?new Ml(d):new So(d),g=this.get("group"),p=g.clone(),y=Xt(p.getMatrix());y||(y=[1,0,0,0,1,0,0,0,1]);var m=(i.maxX+i.minX)/2,w=(i.maxY+i.minY)/2;y=RM(y,[["t",-m,-w],["t",A/2+l[3],o/2+l[0]]]),p.resetMatrix(),p.setMatrix(y),v.add(p);var B=v.get("el"),E="";n||(n="image/png"),setTimeout(function(){if(s==="svg"){var b=B.cloneNode(!0),C=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),_=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",C);_.replaceChild(b,_.documentElement);var x=new XMLSerializer().serializeToString(_);E="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(x))}else{var M=void 0,S=B.getContext("2d"),I=void 0;if(f){var D=typeof window<"u"?window.devicePixelRatio:1;try{M=S.getImageData(0,0,h*D,c*D),I=S.globalCompositeOperation,S.globalCompositeOperation="destination-over",S.fillStyle=f,S.fillRect(0,0,h,c)}catch{console.error("Download image failed. Out of memory at ImageData creation")}}E=B.toDataURL(n),f&&(S.clearRect(0,0,h,c),S.putImageData(M,0,0),S.globalCompositeOperation=I)}t&&t(E)},16)},e.prototype.downloadFullImage=function(t,n,a){var i=this,o=this.get("group").getCanvasBBox(),A=o.height,s=o.width,u=this.get("renderer"),f=Sr('<div id="virtual-image"></div>'),l=document.querySelector(".g6-graph-watermarker"),c=a?a.backgroundColor:void 0,h=a?a.padding:void 0;h?vt(h)&&(h=[h,h,h,h]):h=[0,0,0,0];var d=A+h[0]+h[2],v=s+h[1]+h[3];if(l){var g=this.get("graphWaterMarker").cfg||{},p=g.width,y=g.height;d=Math.ceil(d/y)*y,v=Math.ceil(v/p)*p}var m={container:f,height:d,width:v},w=u==="svg"?new Ml(m):new So(m),B=this.get("group"),E=Lve(B),b=Xt(E.getMatrix());b||(b=[1,0,0,0,1,0,0,0,1]);var C=(o.maxX+o.minX)/2,_=(o.maxY+o.minY)/2;b=RM(b,[["t",-C,-_],["t",s/2+h[3],A/2+h[0]]]),E.resetMatrix(),E.setMatrix(b),w.add(E);var x=w.get("el");n||(n="image/png"),this.asyncToDataUrl(n,c,function(M){var S=document.createElement("a"),I=(t||"graph")+(u==="svg"?".svg":".".concat(n.split("/")[1]));i.dataURLToImage(M,u,S,I);var D=document.createEvent("MouseEvents");D.initEvent("click",!1,!1),S.dispatchEvent(D)},v,d,x)},e.prototype.downloadImage=function(t,n,a){var i=this,o=this;o.stopAnimate();var A=o.get("canvas"),s=A.getRenderer();n||(n="image/png");var u=(t||"graph")+(s==="svg"?".svg":n.split("/")[1]),f=document.createElement("a");o.asyncToDataUrl(n,a,function(l){i.dataURLToImage(l,s,f,u);var c=document.createEvent("MouseEvents");c.initEvent("click",!1,!1),f.dispatchEvent(c)})},e.prototype.dataURLToImage=function(t,n,a,i){if(!t||t==="data:"){console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items");return}if(typeof window<"u")if(window.Blob&&window.URL&&n!=="svg"){var o=t.split(","),A="";if(o&&o.length>0){var s=o[0].match(/:(.*?);/);s&&s.length>=2&&(A=s[1])}for(var u=atob(o[1]),f=u.length,l=new Uint8Array(f);f--;)l[f]=u.charCodeAt(f);var c=new Blob([l],{type:A});window.navigator.msSaveBlob?window.navigator.msSaveBlob(c,i):a.addEventListener("click",function(){a.download=i,a.href=window.URL.createObjectURL(c)})}else a.addEventListener("click",function(){a.download=i,a.href=t})},e.prototype.addPlugin=function(t){var n=this;t.destroyed||(n.get("plugins").push(t),t.initPlugin(n))},e.prototype.removePlugin=function(t){var n=this.get("plugins"),a=n.indexOf(t);a>=0&&(t.destroyPlugin(),n.splice(a,1))},e.prototype.setImageWaterMarker=function(t,n){t===void 0&&(t=ws.waterMarkerImage);var a=this.get("container");Oe(a)&&(a=document.getElementById(a)),a.style.position||(a.style.position="relative");var i=this.get("graphWaterMarker"),o=br({},ws.imageWaterMarkerConfig,n),A=o.width,s=o.height,u=o.compatible,f=o.image;if(!t){var l=u?a:document.querySelector(".g6-graph-watermarker");l&&(l.style.cssText=void 0),i&&i.clear();return}if(i)i.clear();else{var c={container:a,width:A,height:s,capture:!1},h=this.get("pixelRatio");h&&(c.pixelRatio=h,window.devicePixelRatio=h),i=new So(c),this.set("graphWaterMarker",i)}i.get("el").style.display="none";var d=i.get("context"),v=f.rotate,g=f.x,p=f.y;d.rotate(-v*Math.PI/180);var y=new Image;y.crossOrigin="anonymous",y.src=t,y.onload=function(){if(d.drawImage(y,g,p,f.width,f.height),d.rotate(v*Math.PI/180),u)a.style.cssText="background-image: url(".concat(i.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var m=document.querySelector(".g6-graph-watermarker");m||(m=document.createElement("div"),m.className="g6-graph-watermarker"),m.className="g6-graph-watermarker",i.destroyed||(m.style.cssText="background-image: url(".concat(i.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),a.appendChild(m))}}},e.prototype.setTextWaterMarker=function(t,n){var a=this.get("container");Oe(a)&&(a=document.getElementById(a)),a.style.position||(a.style.position="relative");var i=this.get("graphWaterMarker"),o=br({},ws.textWaterMarkerConfig,n),A=o.width,s=o.height,u=o.compatible,f=o.text;if(!(t!=null&&t.length)){var l=u?a:document.querySelector(".g6-graph-watermarker");l&&(l.style.cssText=void 0),i&&i.clear();return}if(i)i.clear();else{var c={container:a,width:A,height:s,capture:!1},h=this.get("pixelRatio");h&&(c.pixelRatio=h,window.devicePixelRatio=h),i=new So(c),this.set("graphWaterMarker",i)}i.get("el").style.display="none";var d=i.get("context"),v=f.rotate,g=f.fill,p=f.fontFamily,y=f.fontSize,m=f.baseline,w=f.x,B=f.y,E=f.lineHeight;d.rotate(-v*Math.PI/180),d.font="".concat(y,"px ").concat(p),d.fillStyle=g,d.textBaseline=m;for(var b=Oe(t)?[t]:t,C=b.length-1;C>=0;C--)d.fillText(b[C],w,B+C*E);if(d.rotate(v*Math.PI/180),u)a.style.cssText="background-image: url(".concat(i.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var _=document.querySelector(".g6-graph-watermarker");_||(_=document.createElement("div"),_.className="g6-graph-watermarker"),_.style.cssText="background-image: url(".concat(i.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),a.appendChild(_)}},e.prototype.destroy=function(){var t,n,a,i;ye(this.get("plugins"),function(f){f.destroyPlugin()});var o=this.get("tooltips");if(o)for(var A=0;A<o.length;A++){var s=o[A];if(s){var u=s.parentElement;u&&u.removeChild(s)}}(t=this.get("eventController"))===null||t===void 0||t.destroy(),(n=this.get("layoutController"))===null||n===void 0||n.destroy(),(a=this.get("graphWaterMarker"))===null||a===void 0||a.destroy(),(i=document.querySelector(".g6-graph-watermarker"))===null||i===void 0||i.remove(),r.prototype.destroy.call(this)},e}(wO),Uve=zo.radialLayout,Jy=zo.traverseTree,Nve=function(r){Lt(e,r);function e(t){var n=r.call(this,t)||this;return n.layoutAnimating=!1,n.set("removeList",[]),n.set("layoutMethod",n.getLayout()),n}return e.prototype.getLayout=function(){var t=this.get("layout");return t?typeof t=="function"?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction=t.type==="indented"?"LR":"TB"),t.radial?function(n){var a=lg[t.type](n,t);return Uve(a),a}:function(n){return lg[t.type](n,t)}):null},e.indexOfChild=function(t,n){var a=-1;return ye(t,function(i,o){if(n===i.id)return a=o,!1}),a},e.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return t.animate=!0,t},e.prototype.innerAddChild=function(t,n,a){var i=this,o=t.data;o&&(o.x=t.x,o.y=t.y,o.depth=t.depth);var A=i.addItem("node",o,!1);if(n){if(A.set("parent",n),a){var s=n.get("originAttrs");if(s)A.set("originAttrs",s);else{var u=n.getModel();A.set("originAttrs",{x:u.x,y:u.y})}}var f=n.get("children");f?f.push(A):n.set("children",[A]),i.addItem("edge",{source:n.get("id"),target:A.get("id"),id:"".concat(n.get("id"),":").concat(A.get("id"))},!1)}return ye(t.children||[],function(l){i.innerAddChild(l,A,a)}),i.emit("afteraddchild",{item:A,parent:n}),A},e.prototype.innerUpdateChild=function(t,n,a){var i=this,o=i.findById(t.id);if(!o){i.innerAddChild(t,n,a);return}ye(t.children||[],function(d){i.innerUpdateChild(d,o,a)});var A=o.get("children");if(A){var s=A.length;if(s>0)for(var u=A.length-1;u>=0;u--){var f=A[u].getModel();e.indexOfChild(t.children||[],f.id)===-1&&(i.innerRemoveChild(f.id,{x:t.x,y:t.y},a),A.splice(u,1))}}var l,c;o.get("originAttrs")&&(l=o.get("originAttrs").x,c=o.get("originAttrs").y);var h=o.getModel();a&&o.set("originAttrs",{x:h.x,y:h.y}),o.set("model",Object.assign(h,t.data)),(l!==t.x||c!==t.y)&&o.updatePosition({x:t.x,y:t.y})},e.prototype.innerRemoveChild=function(t,n,a){var i=this,o=i.findById(t);if(o)if(ye(o.get("children"),function(s){i.innerRemoveChild(s.getModel().id,n,a)}),a){var A=o.getModel();o.set("to",n),o.set("originAttrs",{x:A.x,y:A.y}),i.get("removeList").push(o)}else i.removeItem(o,!1)},e.prototype.changeData=function(t,n){n===void 0&&(n=!0);var a=this;this.getNodes().map(function(i){return a.clearItemStates(i)}),this.getEdges().map(function(i){return a.clearItemStates(i)}),n&&this.get("enabledStack")&&this.pushStack("changedata",{before:a.get("originData"),after:t||a.get("data")}),t?(a.data(t),a.render(!1)):a.layout(this.get("fitView"))},e.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");var n=this;n.updateLayout(t)},e.prototype.updateLayout=function(t,n,a,i){i===void 0&&(i=!0);var o=this;if(!t){console.warn("layout cannot be null");return}if(i&&this.get("enabledStack")&&this.pushStack("layout",{before:o.get("layout"),after:t}),o.set("layout",t),o.set("layoutMethod",o.getLayout()),o.layout(),n){var A=a;A||(n==="begin"?A={x:0,y:0}:A={x:this.getWidth()/2,y:this.getHeight()/2}),A=this.getPointByCanvas(A.x,A.y);var s=this.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];A.x=A.x*s[0]+s[6],A.y=A.y*s[0]+s[7];var u=this.getGroup().getCanvasBBox(),f=u.minX,l=u.maxX,c=u.minY,h=u.maxY,d={x:(f+l)/2,y:(c+h)/2};n==="begin"&&(d.x=f,d.y=c),this.translate(A.x-d.x,A.y-d.y)}},e.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");var n=this;n.layout(t)},e.prototype.layout=function(t){var n=this,a=this,i=a.get("data"),o=a.get("layoutMethod"),A=a.get("layout"),s=i;if(A!=null&&A.excludeInvisibles){i=Xt(a.get("data"));var u={};Jy(i,function(c){var h=c.children;if(!(h!=null&&h.length))return!0;for(var d=h.length-1;d>=0;d--){var v=n.findById(h[d].id),g=v?!v.isVisible():h[d].visible===!1;g&&(u[c.id]=u[c.id]||[],u[c.id].push({idx:d,child:h.splice(d,1)[0]}))}}),s=o?o(i,a.get("layout")):i,Jy(s,function(c){var h=u[c.id];if(h!=null&&h.length)for(var d=h.length-1;d>=0;d--){var v=h[d],g=v.idx,p=v.child;c.children.splice(g,0,p)}})}else s=o?o(i,a.get("layout")):i;var f=a.get("animate");if(a.emit("beforerefreshlayout",{data:i,layoutData:s}),a.emit("beforelayout"),a.innerUpdateChild(s,void 0,f),t){var l=a.get("viewController");l.fitView()}f?a.layoutAnimate(s):(a.refresh(),a.paint()),a.emit("afterrefreshlayout",{data:i,layoutData:s}),a.emit("afterlayout")},e.prototype.addChild=function(t,n,a){a===void 0&&(a=!0);var i=this;i.emit("beforeaddchild",{model:t,parent:n}),Oe(n)||(n=n.get("id"));var o=i.findDataById(n);if(o){o.children||(o.children=[]),o.children.push(t);var A=i.findById(n);A.refresh(),i.changeData(void 0,a)}},e.prototype.updateChildren=function(t,n,a){a===void 0&&(a=!0);var i=this,o=i.findById(n);if(!n||!o){console.warn("Update children failed! There is no node with id '".concat(n,"'"));return}var A=i.findDataById(n);A.children=t,o.refresh(),i.changeData(void 0,a)},e.prototype.updateChild=function(t,n,a){a===void 0&&(a=!0);var i=this;if(!n||!i.findById(n)){i.changeData(t,a);return}var o=i.findDataById(n),A=i.findById(t.id);if(o.children||(o.children=[]),!A)o.children.push(t);else{var s=e.indexOfChild(o.children,t.id);s>-1&&(o.children[s]=t)}var u=i.findById(n);u==null||u.refresh(),i.changeData(void 0,a)},e.prototype.removeChild=function(t,n){n===void 0&&(n=!0);var a=this,i=a.findById(t),o;if(i?o=i==null?void 0:i.get("parent"):o=a.getNodes().find(function(l){var c=l.getModel().children||[];return!!c.find(function(h){return h.id===t})}),o&&!o.destroyed){var A=o.get("id"),s=a.findDataById(A),u=s&&s.children||[],f=e.indexOfChild(u,t);u.splice(f,1),o.refresh()}a.changeData(void 0,n)},e.prototype.findDataById=function(t,n){var a=this;if(n||(n=a.get("data")),t===n.id)return n;var i=null;return ye(n.children||[],function(o){if(o.id===t)return i=o,!1;if(i=a.findDataById(t,o),i)return!1}),i},e.prototype.layoutAnimate=function(t,n){var a=this,i=this.get("animateCfg");a.emit("beforeanimate",{data:t}),a.getEdges().forEach(function(o){var A=o.get("model");A.sourceAnchor||(A.sourceAnchor=o.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(o){Jy(t,function(A){var s=a.findById(A.id);if(s){var u=s.get("originAttrs"),f=s.get("model");if(u||(u={x:f.x,y:f.y},s.set("originAttrs",u)),n){var l=n(s,o,u,t);s.set("model",Object.assign(f,l))}else f.x=u.x+(A.x-u.x)*o,f.y=u.y+(A.y-u.y)*o}return!0}),ye(a.get("removeList"),function(A){var s=A.getModel(),u=A.get("originAttrs"),f=A.get("to");s.x=u.x+(f.x-u.x)*o,s.y=u.y+(f.y-u.y)*o}),a.refreshPositions()},{duration:i.duration,easing:i.ease,callback:function(){ye(a.getNodes(),function(A){A.set("originAttrs",null)}),ye(a.get("removeList"),function(A){a.removeItem(A,!1)}),a.set("removeList",[]),i.callback&&i.callback(),a.emit("afteranimate",{data:t})},delay:i.delay})},e.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},e.prototype.isLayoutAnimating=function(){return this.layoutAnimating},e.prototype.render=function(t){t===void 0&&(t=!0);var n=this,a=n.get("data");if(!a||!On(a)||!Object.keys(a).length)throw new Error("data must be defined first");n.clear(),t&&this.get("enabledStack")&&this.clearStack(),n.emit("beforerender"),n.layout(this.get("fitView")),n.emit("afterrender")},e.prototype.save=function(){return this.get("data")},e.prototype.data=function(t){r.prototype.data.call(this,t),this.set("originData",JSON.parse(JSON.stringify(t)))},e}(FP),kve=function(){function r(e){this._cfgs=br(this.getDefaultCfgs(),e),this._events={},this.destroyed=!1}return r.prototype.getDefaultCfgs=function(){return{}},r.prototype.initPlugin=function(e){var t=this;t.set("graph",e);var n=t.getEvents(),a={};ye(n,function(i,o){var A=ls(t,i);a[o]=A,e.on(o,A)}),this._events=a,this.init()},r.prototype.getEvents=function(){return{}},r.prototype.get=function(e){var t;return(t=this._cfgs)===null||t===void 0?void 0:t[e]},r.prototype.set=function(e,t){this._cfgs[e]=t},r.prototype.destroy=function(){},r.prototype.destroyPlugin=function(){this.destroy();var e=this.get("graph"),t=this._events;ye(t,function(n,a){e.off(a,n)}),this._events=null,this._cfgs=null,this.destroyed=!0},r}();const ha=kve;var Pve=globalThis&&globalThis.__extends||function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=i[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),HM="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",Qve=function(r){Pve(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{img:HM,follow:!0}},e.prototype.init=function(){var t=this.get("graph"),n=t.get("container"),a=t.get("canvas").get("el"),i=this.get("img")||HM;i.includes("url(")||(i='url("'.concat(i,'")'));var o=Sr(`<div class='g6-grid-container' style="position:absolute;overflow:hidden;z-index: -1;"></div>`),A=Sr(`<div
        class='g6-grid'
        style='position:absolute;
        background-image: `.concat(i,`;
        user-select: none
        '></div>`));this.set("container",o),this.set("gridContainer",A),this.positionInit(),o.appendChild(A),n.insertBefore(o,a)},e.prototype.positionInit=function(){var t=this.get("graph"),n=t.get("minZoom"),a=t.get("width"),i=t.get("height");Wt(this.get("container"),{width:"".concat(a,"px"),height:"".concat(i,"px")});var o=a*80/n,A=i*80/n;Wt(this.get("gridContainer"),{width:"".concat(o,"px"),height:"".concat(A,"px"),left:"-".concat(o/2,"px"),top:"-".concat(A/2,"px")})},e.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},e.prototype.updateGrid=function(t){var n=this.get("gridContainer"),a=t.matrix;a||(a=[1,0,0,0,1,0,0,0,1]);var i=this.get("follow"),o="matrix(".concat(a[0],", ").concat(a[1],", ").concat(a[3],", ").concat(a[4],", ").concat(i?a[6]:"0",", ").concat(i?a[7]:"0",")");Wt(n,{transform:o})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t=this.get("graph"),n=t.get("container"),a=this.get("container");n.removeChild(a)},e}(ha);const Rve=Qve;var XE={exports:{}},GM=[],Jf=[],Hve="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function LP(r,e){if(e=e||{},r===void 0)throw new Error(Hve);var t=e.prepend===!0?"prepend":"append",n=e.container!==void 0?e.container:document.querySelector("head"),a=GM.indexOf(n);a===-1&&(a=GM.push(n)-1,Jf[a]={});var i;return Jf[a]!==void 0&&Jf[a][t]!==void 0?i=Jf[a][t]:(i=Jf[a][t]=Gve(),t==="prepend"?n.insertBefore(i,n.childNodes[0]):n.appendChild(i)),r.charCodeAt(0)===65279&&(r=r.substr(1,r.length)),i.styleSheet?i.styleSheet.cssText+=r:i.textContent+=r,i}function Gve(){var r=document.createElement("style");return r.setAttribute("type","text/css"),r}XE.exports=LP;XE.exports.insertCss=LP;var zve=XE.exports;const _p=qi(zve);var Kve=globalThis&&globalThis.__extends||function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=i[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();typeof document<"u"&&_p(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var jve=function(r){Kve(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(n){return`
          <ul class='g6-contextmenu-ul'>
            <li>菜单项1</li>
            <li>菜单项2</li>
          </ul>
        `},shouldBegin:function(n){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},e.prototype.init=function(){var t=this.get("className"),n=Sr("<div class=".concat(t||"g6-component-contextmenu","></div>"));Wt(n,{top:"0px",position:"absolute",visibility:"hidden"});var a=this.get("container");a||(a=this.get("graph").get("container")),Oe(a)&&(a=document.getElementById(a)),a.appendChild(n),this.set("menu",n)},e.prototype.onMenuShow=function(t){var n=this;t.preventDefault();var a=this.get("itemTypes");if(t.item){if(t.item&&t.item.getType&&a.indexOf(t.item.getType())===-1){n.onMenuHide();return}}else if(a.indexOf("canvas")===-1){n.onMenuHide();return}var i=this.get("shouldBegin");if(i(t)){var o=this.get("menu"),A=this.get("getContent"),s=this.get("graph"),u=A(t,s);Oe(u)?o.innerHTML=u:o.innerHTML=u.outerHTML,this.removeMenuEventListener();var f=this.get("handleMenuClick");if(f){var l=function(C){f(C.target,t.item,s)};this.set("handleMenuClickWrapper",l),o.addEventListener("click",l)}var c=s.get("width"),h=s.get("height"),d=o.getBoundingClientRect(),v=this.get("offsetX")||0,g=this.get("offsetY")||0,p=s.getContainer().offsetTop,y=s.getContainer().offsetLeft,m=t.canvasX+y+v,w=t.canvasY+p+g;m+d.width>c&&(m=t.canvasX-d.width-v+y),w+d.height>h&&(w=t.canvasY-d.height-g+p),Wt(o,{top:"".concat(w,"px"),left:"".concat(m,"px"),visibility:"visible"});var B=this.get("trigger")==="click",E=function(C){if(B){B=!1;return}n.onMenuHide()};document.body.addEventListener("click",E),this.set("handler",E)}},e.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),n=this.get("handler");if(t){var a=this.get("menu");a.removeEventListener("click",t),this.set("handleMenuClickWrapper",null)}n&&document.body.removeEventListener("click",n)},e.prototype.onMenuHide=function(){var t=this.get("menu");t&&Wt(t,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var n=this.get("container");n||(n=this.get("graph").get("container")),Oe(n)&&(n=document.getElementById(n)),n.removeChild(t)}},e}(ha);const $ve=jve;var Wve=globalThis&&globalThis.__extends||function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=i[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Z1=globalThis&&globalThis.__assign||function(){return Z1=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},Z1.apply(this,arguments)},zM=Math.max,Vve=Xa,Xve="default",Yve="keyShape",Zve="delegate",KM="svg",qve=function(r){Wve(e,r);function e(t){var n=r.call(this,t)||this;return n.handleUpdateCanvas=Bc(function(a){var i=n;i.destroyed||i.updateCanvas()},100,!1),n}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,n=this._cfgs,a=n.size,i=n.graph;if(!this.destroyed){var o=this.get("canvas"),A=o.get("container"),s=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,u=navigator.userAgent.toLowerCase().indexOf("safari")>-1,f=Sr(`
      <div
        class=`.concat(n.viewportClassName,`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff;
          cursor:move'
        draggable=`).concat(!(u||s),`
      </div>`)),l=0,c=0,h=!1,d=0,v=0,g=0,p=0,y=0,m=0,w=u||s?"mousedown":"dragstart";f.addEventListener(w,function(C){var _,x;if(C.dataTransfer){var M=new Image;M.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(x=(_=C.dataTransfer).setDragImage)===null||x===void 0||x.call(_,M,0,0);try{C.dataTransfer.setData("text/html","view-port-minimap")}catch{C.dataTransfer.setData("text","view-port-minimap")}}if(n.refresh=!1,C.target===f){var S=f.style;d=parseInt(S.left,10),v=parseInt(S.top,10),g=parseInt(S.width,10),p=parseInt(S.height,10),!(g>a[0]||p>a[1])&&(m=i.getZoom(),y=t.get("ratio"),h=!0,l=C.clientX,c=C.clientY)}},!1);var B=function(_){if(!(!h||ht(_.clientX)||ht(_.clientY))){var x=l-_.clientX,M=c-_.clientY;(d-x<0||d-x+g>=a[0])&&(x=0),(v-M<0||v-M+p>=a[1])&&(M=0),d-=x,v-=M,Wt(f,{left:"".concat(d,"px"),top:"".concat(v,"px")}),i.translate(x*m/y,M*m/y),l=_.clientX,c=_.clientY}};!u&&!s&&f.addEventListener("drag",B,!1);var E=function(){h=!1,n.refresh=!0},b=u||s?"mouseup":"dragend";f.addEventListener(b,E,!1),A.addEventListener("mouseleave",E),A.addEventListener("mouseup",E),(u||s)&&A.addEventListener("mousemove",B,!1),this.set("viewport",f),A.appendChild(f)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),n=this.get("totaldx"),a=this.get("totaldy"),i=this.get("graph"),o=this.get("size"),A=i.get("canvas").get("el"),s=i.get("width")||A.scrollWidth||500,u=i.get("height")||A.scrollHeight||500,f=i.getPointByCanvas(0,0),l=i.getPointByCanvas(s,u),c=this.get("viewport");c||this.initViewport();var h=(l.x-f.x)*t,d=(l.y-f.y)*t,v=f.x*t+n,g=f.y*t+a,p=v+h,y=g+d;v<0&&(h+=v,v=0),p>o[0]&&(h=h-(p-o[0])),g<0&&(d+=g,g=0),y>o[1]&&(d=d-(y-o[1])),this.set("ratio",t);var m="".concat(v,"px"),w="".concat(g,"px");Wt(c,{left:m,top:w,width:"".concat(h,"px"),height:"".concat(d,"px")})}},e.prototype.updateGraphShapes=function(){var t=this._cfgs.graph,n=this.get("canvas"),a=t.get("group");if(!a.destroyed){n.clear();var i;this.get("hideEdge")?(i=n.addGroup(),a.get("children").forEach(function(A){A.get("id").includes("-edge")||i.add(A.clone())})):(i=a.clone(),i.resetMatrix(),n.add(i));var o=t.get("renderer");o===KM&&this.updateVisible(i)}},e.prototype.updateVisible=function(t){var n=this;if(!t.isGroup()&&!t.get("visible"))t.hide();else{var a=t.get("children");if(!a||!a.length)return;a.forEach(function(i){i.get("visible")||i.hide(),n.updateVisible(i)})}},e.prototype.updateKeyShapes=function(){var t=this,n=this._cfgs.graph,a=this.get("canvas"),i=a.get("children")[0]||a.addGroup();this.get("hideEdge")||ye(n.getEdges(),function(s){t.updateOneEdgeKeyShape(s,i)}),ye(n.getNodes(),function(s){t.updateOneNodeKeyShape(s,i)});var o=n.getCombos();if(o&&o.length){var A=i.find(function(s){return s.get("name")==="comboGroup"})||i.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||(ye(o,function(s){t.updateOneComboKeyShape(s,A)}),A==null||A.sort(),A==null||A.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.updateOneComboKeyShape=function(t,n){if(!this.destroyed){var a=this.get("itemMap")||{},i=a[t.get("id")],o=t.getBBox(),A=t.get("keyShape").clone(),s=A.attr(),u={x:o.centerX,y:o.centerY};i?u=Object.assign(s,u):(i=A,n.add(i));var f=i.get("type");(f==="rect"||f==="image")&&(u.x=o.minX,u.y=o.minY),i.attr(u),t.isVisible()?i.show():i.hide(),i.exist=!0;var l=t.getModel().depth;isNaN(l)||i.set("zIndex",l),a[t.get("id")]=i,this.set("itemMap",a)}},e.prototype.updateOneNodeKeyShape=function(t,n){var a=this.get("itemMap")||{},i=a[t.get("id")],o=t.getBBox(),A=t.get("keyShape").clone(),s=A.attr(),u={x:o.centerX,y:o.centerY};i?(u=Object.assign(s,u),i.toFront()):(i=A,n.add(i));var f=i.get("type");(f==="rect"||f==="image")&&(u.x=o.minX,u.y=o.minY),i.attr(u),t.isVisible()?i.show():i.hide(),i.exist=!0;var l=t.getModel().depth;isNaN(l)||i.set("zIndex",l),a[t.get("id")]=i,this.set("itemMap",a)},e.prototype.updateDelegateShapes=function(){var t=this,n=this._cfgs.graph,a=this.get("canvas"),i=a.get("children")[0]||a.addGroup();this.get("hideEdge")||ye(n.getEdges(),function(s){t.updateOneEdgeKeyShape(s,i)}),ye(n.getNodes(),function(s){t.updateOneNodeDelegateShape(s,i)});var o=n.getCombos();if(o&&o.length){var A=i.find(function(s){return s.get("name")==="comboGroup"})||i.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||(ye(o,function(s){t.updateOneComboKeyShape(s,A)}),A==null||A.sort(),A==null||A.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},n=Object.keys(t);if(!(!n||n.length===0))for(var a=n.length-1;a>=0;a--){var i=t[n[a]],o=i.exist;i.exist=!1,o||(i.remove(),delete t[n[a]])}},e.prototype.updateOneEdgeKeyShape=function(t,n){var a=this.get("itemMap")||{},i=a[t.get("id")];if(i){var o=t.get("keyShape").attr("path");i.attr("path",o)}else i=t.get("keyShape").clone(),n.add(i);t.isVisible()?i.show():i.hide(),i.exist=!0,a[t.get("id")]=i,this.set("itemMap",a)},e.prototype.updateOneNodeDelegateShape=function(t,n){var a=this.get("delegateStyle"),i=this.get("itemMap")||{},o=i[t.get("id")],A=t.getBBox();if(o){var s={x:A.minX,y:A.minY,width:A.width,height:A.height};o.attr(s),o.toFront()}else o=n.addShape("rect",{attrs:Z1({x:A.minX,y:A.minY,width:A.width,height:A.height},a),name:"minimap-node-shape"});t.isVisible()?o.show():o.hide(),o.exist=!0,i[t.get("id")]=o,this.set("itemMap",i)},e.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},e.prototype.initContainer=function(){var t=this,n=t.get("graph"),a=t.get("size"),i=t.get("className"),o=t.get("container"),A=Sr("<div class='".concat(i,"' style='width: ").concat(a[0],"px; height: ").concat(a[1],"px; overflow: hidden'></div>"));Oe(o)&&(o=document.getElementById(o)),o?o.appendChild(A):n.get("container").appendChild(A),t.set("container",A);var s=Sr('<div class="g6-minimap-container" style="position: relative;"></div>');A.appendChild(s),s.addEventListener("dragenter",function(l){l.preventDefault()}),s.addEventListener("dragover",function(l){l.preventDefault()});var u,f=n.get("renderer");f===KM?u=new Ml({container:s,width:a[0],height:a[1]}):u=new So({container:s,width:a[0],height:a[1]}),t.set("canvas",u),t.updateCanvas()},e.prototype.updateCanvas=function(){if(!this.destroyed){var t=this.get("refresh");if(t){var n=this.get("graph");if(!n.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var a=this.get("size"),i=this.get("canvas"),o=this.get("type"),A=this.get("padding");if(!i.destroyed){switch(o){case Xve:this.updateGraphShapes();break;case Yve:this.updateKeyShapes();break;case Zve:this.updateDelegateShapes();break}var s=i.get("children")[0];if(s){s.resetMatrix();var u=s.getCanvasBBox(),f=n.get("canvas").getCanvasBBox(),l=n.getZoom()||1,c=f.width/l,h=f.height/l;Number.isFinite(u.width)&&(c=zM(u.width,c),h=zM(u.height,h)),c+=2*A,h+=2*A;var d=Math.min(a[0]/c,a[1]/h),v=[1,0,0,0,1,0,0,0,1],g=0,p=0;Number.isFinite(u.minX)&&(g=-u.minX),Number.isFinite(u.minY)&&(p=-u.minY);var y=(a[0]-(c-2*A)*d)/2,m=(a[1]-(h-2*A)*d)/2;v=Vve(v,[["t",g,p],["s",d,d],["t",y,m]]),s.setMatrix(v),this.set("ratio",d),this.set("totaldx",y+g*d),this.set("totaldy",m+p*d),this.set("dx",y),this.set("dy",m),this.updateViewport()}}}}}},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t;(t=this.get("canvas"))===null||t===void 0||t.destroy();var n=this.get("container");n!=null&&n.parentNode&&n.parentNode.removeChild(n)},e}(ha);const Jve=qve;var ege=globalThis&&globalThis.__extends||function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=i[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();function Fi(r,e,t){var n=r.x-e.x,a=r.y-e.y;return!t||Math.abs(n)>t||Math.abs(a)>t?Math.sqrt(n*n+a*a):t}function tge(r,e){return r.x*e.x+r.y*e.y}function jM(r,e){var t=(e.source.y-e.target.y)/(e.source.x-e.target.x),n=(t*t*e.source.x+t*(r.y-e.source.y)+r.x)/(t*t+1),a=t*(n-e.source.x)+e.source.y;return{x:n,y:a}}var rge=function(r){ege(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},e.prototype.init=function(){var t=this.get("graph"),n=this.get("onTick"),a=function(){n&&n(),t.refreshPositions()};this.set("tick",a)},e.prototype.bundling=function(t){var n=this;if(n.set("data",t),!n.isTicking()){var a=t.edges||[],i=t.nodes||[],o={},A=!1;if(i.forEach(function(w){(w.x===null||!w.y===null||w.x===void 0||!w.y===void 0)&&(A=!0),o[w.id]=w}),A)throw new Error("please layout the graph or assign x and y for nodes first");n.set("nodeIdMap",o);var s=n.get("divisions"),u=n.get("divRate"),f=n.divideEdges(s);n.set("edgePoints",f);var l=n.getEdgeBundles();n.set("edgeBundles",l);for(var c=n.get("cycles"),h=n.get("iterations"),d=n.get("iterRate"),v=n.get("lambda"),g=0;g<c;g++){for(var p=function(B){var E=[];a.forEach(function(b,C){if(b.source!==b.target){var _=o[b.source],x=o[b.target];E[C]=n.getEdgeForces({source:_,target:x},C,s,v);for(var M=0;M<s+1;M++)f[C][M].x+=E[C][M].x,f[C][M].y+=E[C][M].y}})},y=0;y<h;y++)p(y);v=v/2,s*=u,h*=d,f=n.divideEdges(s),n.set("edgePoints",f)}a.forEach(function(w,B){w.source!==w.target&&(w.type="polyline",w.controlPoints=f[B].slice(1,f[B].length-1))});var m=n.get("graph");m.refresh()}},e.prototype.updateBundling=function(t){var n=this,a=t.data;if(a&&n.set("data",a),n.get("ticking")&&n.set("ticking",!1),Object.keys(t).forEach(function(o){n.set(o,t[o])}),t.onTick){var i=this.get("graph");n.set("tick",function(){t.onTick(),i.refresh()})}n.bundling(a)},e.prototype.divideEdges=function(t){var n=this,a=n.get("data").edges,i=n.get("nodeIdMap"),o=n.get("edgePoints");return(!o||o===void 0)&&(o=[]),a.forEach(function(A,s){var u;(!o[s]||o[s]===void 0)&&(o[s]=[]);var f=i[A.source],l=i[A.target];if(t===1)o[s].push({x:f.x,y:f.y}),o[s].push({x:.5*(f.x+l.x),y:.5*(f.y+l.y)}),o[s].push({x:l.x,y:l.y});else{var c=0;!((u=o[s])===null||u===void 0)&&u.length?c=n.getEdgeLength(o[s]):c=Fi({x:f.x,y:f.y},{x:l.x,y:l.y});var h=c/(t+1),d=h,v=[{x:f.x,y:f.y}];o[s].forEach(function(g,p){if(p!==0){for(var y=Fi(g,o[s][p-1]);y>d;){var m=d/y,w={x:o[s][p-1].x,y:o[s][p-1].y};w.x+=m*(g.x-o[s][p-1].x),w.y+=m*(g.y-o[s][p-1].y),v.push(w),y-=d,d=h}d-=y}}),v.push({x:l.x,y:l.y}),o[s]=v}}),o},e.prototype.getEdgeLength=function(t){var n=0;return t.forEach(function(a,i){i!==0&&(n+=Fi(a,t[i-1]))}),n},e.prototype.getEdgeBundles=function(){var t=this,n=t.get("data"),a=n.edges||[],i=t.get("bundleThreshold"),o=t.get("nodeIdMap"),A=t.get("edgeBundles");return A||(A=[]),a.forEach(function(s,u){(!A[u]||A[u]===void 0)&&(A[u]=[])}),a.forEach(function(s,u){var f=o[s.source],l=o[s.target];a.forEach(function(c,h){if(!(h<=u)){var d=o[c.source],v=o[c.target],g=t.getBundleScore({source:f,target:l},{source:d,target:v});g>=i&&(A[u].push(h),A[h].push(u))}})}),A},e.prototype.getBundleScore=function(t,n){var a=this;t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,n.vx=n.target.x-n.source.x,n.vy=n.target.y-n.source.y,t.length=Fi({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),n.length=Fi({x:n.source.x,y:n.source.y},{x:n.target.x,y:n.target.y});var i=a.getAngleScore(t,n),o=a.getScaleScore(t,n),A=a.getPositionScore(t,n),s=a.getVisibilityScore(t,n);return i*o*A*s},e.prototype.getAngleScore=function(t,n){var a=tge({x:t.vx,y:t.vy},{x:n.vx,y:n.vy});return a/(t.length*n.length)},e.prototype.getScaleScore=function(t,n){var a=(t.length+n.length)/2,i=2/(a/Math.min(t.length,n.length)+Math.max(t.length,n.length)/a);return i},e.prototype.getPositionScore=function(t,n){var a=(t.length+n.length)/2,i={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},o={x:(n.source.x+n.target.x)/2,y:(n.source.y+n.target.y)/2},A=Fi(i,o);return a/(a+A)},e.prototype.getVisibilityScore=function(t,n){var a=this.getEdgeVisibility(t,n),i=this.getEdgeVisibility(n,t);return a<i?a:i},e.prototype.getEdgeVisibility=function(t,n){var a=jM(n.source,t),i=jM(n.target,t),o={x:(a.x+i.x)/2,y:(a.y+i.y)/2},A={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*Fi(o,A)/Fi(a,i))},e.prototype.getEdgeForces=function(t,n,a,i){for(var o=this,A=o.get("edgePoints"),s=o.get("K"),u=s/(Fi(t.source,t.target)*(a+1)),f=[{x:0,y:0}],l=1;l<a;l++){var c={x:0,y:0},h=o.getSpringForce({pre:A[n][l-1],cur:A[n][l],next:A[n][l+1]},u),d=o.getElectrostaticForce(l,n);c.x=i*(h.x+d.x),c.y=i*(h.y+d.y),f.push(c)}return f.push({x:0,y:0}),f},e.prototype.getSpringForce=function(t,n){var a=t.pre.x+t.next.x-2*t.cur.x,i=t.pre.y+t.next.y-2*t.cur.y;return a*=n,i*=n,{x:a,y:i}},e.prototype.getElectrostaticForce=function(t,n){var a=this,i=a.get("eps"),o=a.get("edgeBundles"),A=a.get("edgePoints"),s=o[n],u={x:0,y:0};return s.forEach(function(f){var l={x:A[f][t].x-A[n][t].x,y:A[f][t].y-A[n][t].y};if(Math.abs(l.x)>i||Math.abs(l.y)>i){var c=Fi(A[f][t],A[n][t]),h=1/c;u.x+=l.x*h,u.y+=l.y*h}}),u},e.prototype.isTicking=function(){return this.get("ticking")},e.prototype.getSimulation=function(){return this.get("forceSimulation")},e.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),r.prototype.destroy.call(this)},e}(ha);const nge=rge;var age=globalThis&&globalThis.__extends||function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=i[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),q1=globalThis&&globalThis.__assign||function(){return q1=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},q1.apply(this,arguments)},wd=.05,$M={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},ige=function(r){age(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:Xt($M),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"};break}return t},e.prototype.init=function(){var t=this,n=t.get("r");t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{}),t.set("r2",n*n);var a=t.get("d");t.set("molecularParam",(a+1)*n)},e.prototype.createDelegate=function(t){var n=this,a=this,i=a.get("delegate");(!i||i.destroyed)&&(a.magnify(t),i=a.get("delegate"),i.on("dragstart",function(o){a.set("delegateCenterDiff",{x:i.attr("x")-o.x,y:i.attr("y")-o.y})}),i.on("drag",function(o){a.magnify(o)}),this.get("scaleDBy")==="wheel"&&i.on("mousewheel",function(o){n.scaleDByWheel(o)}),this.get("scaleRBy")==="wheel"&&i.on("mousewheel",function(o){a.scaleRByWheel(o)}))},e.prototype.scaleRByWheel=function(t){var n=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var a=n.get("graph"),i,o=n.get("delegate"),A=o?{x:o.attr("x"),y:o.attr("y")}:void 0,s=A||a.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?i=1-wd:i=1/(1-wd);var u=n.get("maxR"),f=n.get("minR"),l=n.get("r");(l>(u||a.get("height"))&&i>1||l<(f||a.get("height")*.05)&&i<1)&&(i=1),l*=i,n.set("r",l),n.set("r2",l*l);var c=n.get("d");n.set("molecularParam",(c+1)*l),n.set("delegateCenterDiff",void 0),n.magnify(t,s)}},e.prototype.scaleRByDrag=function(t){var n=this;if(t){var a=n.get("dragPrePos"),i=n.get("graph"),o,A=i.getPointByClient(t.clientX,t.clientY);t.x-a.x<0?o=1-wd:o=1/(1-wd);var s=n.get("maxR"),u=n.get("minR"),f=n.get("r");(f>(s||i.get("height"))&&o>1||f<(u||i.get("height")*.05)&&o<1)&&(o=1),f*=o,n.set("r",f),n.set("r2",f*f);var l=n.get("d");n.set("molecularParam",(l+1)*f),n.magnify(t,A),n.set("dragPrePos",{x:t.x,y:t.y})}},e.prototype.scaleDByWheel=function(t){var n=this;if(!(!t&&!t.originalEvent)){t.preventDefault&&t.preventDefault();var a=0;t.originalEvent.wheelDelta<0?a=-.1:a=.1;var i=n.get("d"),o=i+a,A=n.get("maxD"),s=n.get("minD");if(o<A&&o>s){n.set("d",o);var u=n.get("r");n.set("molecularParam",(o+1)*u);var f=n.get("delegate"),l=f?{x:f.attr("x"),y:f.attr("y")}:void 0;n.set("delegateCenterDiff",void 0),n.magnify(t,l)}}},e.prototype.scaleDByDrag=function(t){var n=this,a=n.get("dragPrePos"),i=t.x-a.x>0?.1:-.1,o=n.get("d"),A=o+i,s=n.get("maxD"),u=n.get("minD");if(A<s&&A>u){n.set("d",A);var f=n.get("r");n.set("molecularParam",(A+1)*f),n.magnify(t)}n.set("dragPrePos",{x:t.x,y:t.y})},e.prototype.magnify=function(t,n){var a=this;a.restoreCache();var i=a.get("graph"),o=a.get("cachedMagnifiedModels"),A=a.get("cachedOriginPositions"),s=a.get("showLabel"),u=a.get("r"),f=a.get("r2"),l=a.get("d"),c=a.get("molecularParam"),h=i.getNodes(),d=h.length,v=n?{x:n.x,y:n.y}:{x:t.x,y:t.y};a.get("dragging")&&(a.get("trigger")==="mousemove"||a.get("trigger")==="click")&&(v=a.get("cacheCenter"));var g=a.get("delegateCenterDiff");g&&(v.x+=g.x,v.y+=g.y),a.updateDelegate(v,u);for(var p=0;p<d;p++){var y=h[p].getModel(),m=y.x,w=y.y;if(!(isNaN(m)||isNaN(w))){var B=(m-v.x)*(m-v.x)+(w-v.y)*(w-v.y);if(!isNaN(B)&&B<f&&B!==0){var E=Math.sqrt(B),b=c*E/(l*E+u),C=(m-v.x)/E,_=(w-v.y)/E;if(y.x=C*b+v.x,y.y=_*b+v.y,A[y.id]||(A[y.id]={x:m,y:w,texts:[]}),o.push(y),s&&2*E<u)for(var x=h[p],M=x.getContainer(),S=M.getChildren(),I=S.length,D=0;D<I;D++){var O=S[D];O.get("type")==="text"&&(A[y.id].texts.push({visible:O.get("visible"),shape:O}),O.set("visible",!0))}}}}i.refreshPositions()},e.prototype.restoreCache=function(){for(var t=this,n=t.get("cachedMagnifiedModels"),a=t.get("cachedOriginPositions"),i=n.length,o=0;o<i;o++){var A=n[o],s=A.id,u=a[s];A.x=u.x,A.y=u.y;for(var f=u.texts.length,l=0;l<f;l++){var c=u.texts[l];c.shape.set("visible",c.visible)}}t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{})},e.prototype.updateParams=function(t){var n=this,a=t.r,i=t.d,o=t.trigger,A=t.minD,s=t.maxD,u=t.minR,f=t.maxR,l=t.scaleDBy,c=t.scaleRBy;isNaN(t.r)||(n.set("r",a),n.set("r2",a*a)),isNaN(i)||n.set("d",i),isNaN(s)||n.set("maxD",s),isNaN(A)||n.set("minD",A),isNaN(f)||n.set("maxR",f),isNaN(u)||n.set("minR",u);var h=n.get("d"),d=n.get("r");if(n.set("molecularParam",(h+1)*d),(o==="mousemove"||o==="click"||o==="drag")&&n.set("trigger",o),l==="drag"||l==="wheel"||l==="unset"){n.set("scaleDBy",l),n.get("delegate").remove(),n.get("delegate").destroy();var v=n.get("dPercentText");v&&(v.remove(),v.destroy())}if(c==="drag"||c==="wheel"||c==="unset"){n.set("scaleRBy",c),n.get("delegate").remove(),n.get("delegate").destroy();var v=n.get("dPercentText");v&&(v.remove(),v.destroy())}},e.prototype.updateDelegate=function(t,n){var a=this,i=this,o=i.get("graph"),A=i.get("delegate");if(!A||A.destroyed){var s=o.get("group"),u=i.get("delegateStyle")||$M;A=s.addShape("circle",{attrs:q1({r:n/1.5,x:t.x,y:t.y},u),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?A.on("mousewheel",function(d){i.scaleRByWheel(d)}):this.get("scaleRBy")==="drag"&&(A.on("dragstart",function(d){i.set("dragging",!0),i.set("cacheCenter",{x:d.x,y:d.y}),i.set("dragPrePos",{x:d.x,y:d.y})}),A.on("drag",function(d){i.scaleRByDrag(d)}),A.on("dragend",function(d){i.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?A.on("mousewheel",function(d){a.scaleDByWheel(d)}):this.get("scaleDBy")==="drag"&&(A.on("dragstart",function(d){i.set("dragging",!0),i.set("cacheCenter",{x:d.x,y:d.y}),i.set("dragPrePos",{x:d.x,y:d.y})}),A.on("drag",function(d){a.scaleDByDrag(d)}),A.on("dragend",function(d){i.set("dragging",!1)})))}else A.attr({x:t.x,y:t.y,r:n/1.5});if(i.get("showDPercent")){var f=Math.round((i.get("d")-i.get("minD"))/(i.get("maxD")-i.get("minD"))*100),l=i.get("dPercentText"),c=t.y+n/1.5+16;if(!l||l.destroyed){var h=o.get("group");l=h.addShape("text",{attrs:{text:"".concat(f,"%"),x:t.x,y:c,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),i.set("dPercentText",l)}else l.attr({text:"".concat(f,"%"),x:t.x,y:c})}i.set("delegate",A)},e.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var n=this.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy());var a=this.get("dPercentText");a&&!a.destroyed&&(a.remove(),a.destroy())},e.prototype.destroy=function(){this.clear()},e}(ha);const oge=ige;var Age=globalThis&&globalThis.__extends||function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=i[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),WM=.05;typeof document<"u"&&_p(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var sge=function(e){if(!e)return[];if(e.composedPath)return e.composedPath();for(var t=[],n=e.target;n;){if(t.push(n),n.tagName==="HTML")return t.push(document,window),t;n=n.parentElement}return t},uge=function(r){Age(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(n){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},e.prototype.init=function(){var t=this,n=this.get("graph"),a=this.get("getContent"),i=a(n),o=i;Oe(i)&&(o=Sr(i));var A=this.get("className");o.setAttribute("class",A||"g6-component-toolbar");var s=this.get("container");s||(s=this.get("graph").get("container")),Oe(s)&&(s=document.getElementById(s)),s.appendChild(o),this.set("toolBar",o);var u=this.get("handleClick");o.addEventListener("click",function(l){var c=sge(l).filter(function(d){return d.nodeName==="LI"});if(c.length!==0){var h=c[0].getAttribute("code");h&&(u?u(h,n):t.handleDefaultOperator(h))}});var f=this.get("position");f&&Wt(o,{top:"".concat(f.y,"px"),left:"".concat(f.x,"px")}),this.bindUndoRedo()},e.prototype.bindUndoRedo=function(){var t=this.get("graph"),n=document.querySelector('.g6-component-toolbar li[code="undo"]'),a=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),i=document.querySelector('.g6-component-toolbar li[code="redo"]'),o=document.querySelector('.g6-component-toolbar li[code="redo"] svg');!n||!a||!i||!o||(n.setAttribute("style","cursor: not-allowed"),a.setAttribute("style","opacity: 0.4"),i.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4"),t.on("stackchange",function(A){var s=A.undoStack,u=A.redoStack,f=s.length,l=u.length;f===0?(n.setAttribute("style","cursor: not-allowed"),a.setAttribute("style","opacity: 0.4")):(n.removeAttribute("style"),a.removeAttribute("style")),l===0?(i.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4")):(i.removeAttribute("style"),o.removeAttribute("style"))}))},e.prototype.undo=function(){var t=this.get("graph"),n=t.getUndoStack();if(!(!n||n.length===0)){var a=n.pop();if(a){var i=a.action;t.pushStack(i,Xt(a.data),"redo");var o=a.data.before;if(i==="add"&&(o=a.data.after),!o)return;switch(i){case"visible":{Object.keys(o).forEach(function(l){var c=o[l];c&&c.forEach(function(h){var d=t.findById(h.id);h.visible?t.showItem(d,!1):t.hideItem(d,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(l){var c=o[l];c&&c.forEach(function(h){var d=t.findById(h.id);delete h.id,t.updateItem(d,h,!1),d.getType()==="combo"&&t.updateCombo(d)})});break;case"changedata":t.changeData(o,!1);break;case"delete":{Object.keys(o).forEach(function(l){var c=o[l];c&&c.forEach(function(h){var d=h.itemType;delete h.itemType,t.addItem(d,h,!1)})});break}case"add":Object.keys(o).forEach(function(l){var c=o[l];c&&c.forEach(function(h){t.removeItem(h.id,!1)})});break;case"updateComboTree":Object.keys(o).forEach(function(l){var c=o[l];c&&c.forEach(function(h){t.updateComboTree(h.id,h.parentId,!1)})});break;case"createCombo":var A=a.data.after.combos,s=A[A.length-1];Object.keys(o).forEach(function(l){var c=o[l];c&&c.forEach(function(h){t.updateComboTree(h.id,h.parentId,!1)})}),t.removeItem(s.id,!1);break;case"uncombo":var u=o.combos[o.combos.length-1],f=o.nodes.concat(o.combos).map(function(l){return l.id}).filter(function(l){return l!==u.id});t.createCombo(u,f,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break}}}},e.prototype.redo=function(){var t=this.get("graph"),n=t.getRedoStack();if(!(!n||n.length===0)){var a=n.pop();if(a){var i=a.action,o=a.data.after;if(t.pushStack(i,Xt(a.data)),i==="delete"&&(o=a.data.before),!o)return;switch(i){case"visible":{Object.keys(o).forEach(function(f){var l=o[f];l&&l.forEach(function(c){var h=t.findById(c.id);c.visible?t.showItem(h,!1):t.hideItem(h,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(f){var l=o[f];l&&l.forEach(function(c){var h=t.findById(c.id);delete c.id,t.updateItem(h,c,!1),h.getType()==="combo"&&t.updateCombo(h)})});break;case"changedata":t.changeData(o,!1);break;case"delete":o.edges&&o.edges.forEach(function(f){t.removeItem(f.id,!1)}),o.nodes&&o.nodes.forEach(function(f){t.removeItem(f.id,!1)}),o.combos&&o.combos.forEach(function(f){t.removeItem(f.id,!1)});break;case"add":{Object.keys(o).forEach(function(f){var l=o[f];l&&l.forEach(function(c){var h=c.itemType;delete c.itemType,t.addItem(h,c,!1)})});break}case"updateComboTree":Object.keys(o).forEach(function(f){var l=o[f];l&&l.forEach(function(c){t.updateComboTree(c.id,c.parentId,!1)})});break;case"createCombo":var A=o.combos[o.combos.length-1];t.createCombo(A,A.children.map(function(f){return f.id}),!1);break;case"uncombo":var s=a.data.before.combos,u=s[s.length-1];t.uncombo(u.id,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break}}}},e.prototype.zoomOut=function(){var t=this.get("graph"),n=t.getZoom(),a=1/(1-WM*this.get("zoomSensitivity")),i=this.get("maxZoom")||t.get("maxZoom");a*n>i||t.zoomTo(n*a)},e.prototype.zoomIn=function(){var t=this.get("graph"),n=t.getZoom(),a=1-WM*this.get("zoomSensitivity"),i=this.get("minZoom")||t.get("minZoom");a*n<i||t.zoomTo(n*a)},e.prototype.realZoom=function(){var t=this.get("graph");t.zoomTo(1)},e.prototype.autoZoom=function(){var t=this.get("graph");t.fitView([20,20])},e.prototype.handleDefaultOperator=function(t){switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom();break}},e.prototype.destroy=function(){var t=this.get("toolBar");if(t){var n=this.get("container");n||(n=this.get("graph").get("container")),Oe(n)&&(n=document.getElementById(n)),n.removeChild(t)}var a=this.get("handleClick");a&&t.removeEventListener("click",a)},e}(ha);const fge=uge;var lge=globalThis&&globalThis.__extends||function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=i[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();typeof document<"u"&&_p(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var cge=function(r){lge(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(n){return`
          <h4 class='tooltip-type'>类型：`.concat(n.item.getType(),`</h4>
          <span class='tooltip-id'>ID：`).concat(n.item.getID(),`</span>
        `)},shouldBegin:function(n){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},e.prototype.init=function(){var t=this,n=t.get("className")||"g6-component-tooltip",a=Sr("<div class='".concat(n,"'></div>")),i=t.get("container");i||(i=t.get("graph").get("container")),Oe(i)&&(i=document.getElementById(i)),Wt(a,{position:"absolute",visibility:"hidden",display:"none"}),i.appendChild(a),t.get("trigger")!=="click"&&(a.addEventListener("mouseenter",function(o){Wt(a,{visibility:"visible",display:"unset"})}),a.addEventListener("mouseleave",function(o){t.hideTooltip()})),t.set("tooltip",a)},e.prototype.onClick=function(t){var n=this.get("itemTypes");if(!(t.item&&t.item.getType&&n.indexOf(t.item.getType())===-1)){var a=t.item,i=this.get("graph");this.currentTarget===a?(this.currentTarget=null,this.hideTooltip(),i.emit("tooltipchange",{item:t.item,action:"hide"})):(this.currentTarget=a,this.showTooltip(t),i.emit("tooltipchange",{item:t.item,action:"show"}))}},e.prototype.onMouseEnter=function(t){var n=this.get("itemTypes");if(!(t.item&&t.item.getType&&n.indexOf(t.item.getType())===-1)){var a=t.item,i=this.get("graph");this.currentTarget=a,this.showTooltip(t),i.emit("tooltipchange",{item:t.item,action:"show"})}},e.prototype.onMouseMove=function(t){var n=this.get("itemTypes");t.item&&t.item.getType&&n.indexOf(t.item.getType())===-1||!this.currentTarget||t.item!==this.currentTarget||this.showTooltip(t)},e.prototype.onMouseLeave=function(){this.hideTooltip();var t=this.get("graph");t.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},e.prototype.clearContainer=function(){var t=this.get("tooltip");t&&(t.innerHTML="")},e.prototype.showTooltip=function(t){if(t.item){var n=this.get("itemTypes");if(!(t.item.getType&&n.indexOf(t.item.getType())===-1)){var a=this.get("tooltip"),i=this.get("getContent"),o=i(t);Oe(o)?a.innerHTML=o:(this.clearContainer(),a.appendChild(o)),this.updatePosition(t)}}},e.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&Wt(t,{visibility:"hidden",display:"none"})},e.prototype.updatePosition=function(t){var n=this.get("shouldBegin"),a=this.get("tooltip");if(!n(t)){Wt(a,{visibility:"hidden",display:"none"});return}var i=this.get("graph"),o=i.get("width"),A=i.get("height"),s=this.get("offsetX")||0,u=this.get("offsetY")||0,f=i.getPointByClient(t.clientX,t.clientY),l=this.get("fixToNode"),c=t.item;if(c.getType&&c.getType()==="node"&&l&&yt(l)&&l.length>=2){var h=c.getBBox();f={x:h.minX+h.width*l[0],y:h.minY+h.height*l[1]}}var d=i.getCanvasByPoint(f.x,f.y),v=d.x,g=d.y,p=i.getContainer(),y={x:v+p.offsetLeft+s,y:g+p.offsetTop+u};Wt(a,{visibility:"visible",display:"unset"});var m=a.getBoundingClientRect();v+m.width+s>o&&(y.x-=m.width+s),g+m.height+u>A&&(y.y-=m.height+u,y.y<0&&(y.y=0)),Wt(a,{left:"".concat(y.x,"px"),top:"".concat(y.y,"px")})},e.prototype.hide=function(){this.onMouseLeave()},e.prototype.destroy=function(){var t=this.get("tooltip");if(t){var n=this.get("container");n||(n=this.get("graph").get("container")),Oe(n)&&(n=document.getElementById(n)),n.removeChild(t)}},e}(ha);const hge=cge;var DP="timebarstartplay",OP="timebarendplay",ki="valuechange",Bs="timebarConfigChanged",dA="playPauseBtn",hc="nextStepBtn",dc="preStepBtn",dge=function(){function r(e){var t=e.x,n=t===void 0?0:t,a=e.y,i=a===void 0?0:a,o=e.container,A=e.text,s=e.padding,u=s===void 0?[4,4,4,4]:s,f=e.className,l=f===void 0?"g6-component-timebar-tooltip":f,c=e.backgroundColor,h=c===void 0?"#000":c,d=e.textColor,v=d===void 0?"#fff":d,g=e.opacity,p=g===void 0?.8:g,y=e.fontSize,m=y===void 0?12:y;this.container=o,this.className=l,this.backgroundColor=h,this.textColor=v,this.x=n,this.y=i,this.text=A,this.padding=u,this.opacity=p,this.fontSize=m,this.render()}return r.prototype.render=function(){var e=this,t=e.className;e.x,e.y;var n=e.backgroundColor,a=e.textColor,i=e.text,o=e.padding,A=e.opacity,s=e.fontSize,u=e.container,f=Sr("<div class='".concat(t,`' style="position: absolute; width: fit-content; height: fit-content; opacity: `).concat(A,'"></div>'));Oe(u)&&(u=document.getElementById(u)),u.appendChild(f),e.parentHeight=u.offsetHeight,e.parentWidth=u.offsetWidth,Wt(f,{visibility:"hidden",top:0,left:0});var l=Sr(`
      <div style='position: absolute; white-space:nowrap; background-color: `.concat(n,"; font-size: ").concat(s,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(a,"; padding: ").concat(o[0],"px ").concat(o[1],"px ").concat(o[2],"px ").concat(o[3],"px'></div>"));l.innerHTML=i,f.appendChild(l),e.backgroundDOM=l;var c=Sr("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(n,"'></div>"));f.appendChild(c),e.arrowDOM=c,e.container=f},r.prototype.show=function(e){var t=this,n=e.text,a=e.x;e.y,e.clientX,e.clientY,t.backgroundDOM.innerHTML=n;var i=t.backgroundDOM.offsetWidth,o=t.backgroundDOM.offsetHeight,A=t.arrowDOM.offsetWidth,s=t.arrowDOM.offsetHeight;Wt(t.container,{top:"".concat(-o-s,"px"),left:"".concat(a,"px"),visibility:"visible"}),Wt(t.backgroundDOM,{marginLeft:"".concat(-i/2,"px")}),Wt(t.arrowDOM,{marginLeft:"".concat(-A/2,"px"),top:"".concat(o,"px")});var u=a-i/2,f=a+i/2;u<0?Wt(t.backgroundDOM,{marginLeft:"".concat(-i/2-u,"px")}):f>t.parentWidth&&Wt(t.backgroundDOM,{marginLeft:"".concat(-i/2-f+t.parentWidth+12,"px")})},r.prototype.hide=function(){Wt(this.container,{top:0,left:0,visibility:"hidden"})},r}();const vge=dge;var J1=globalThis&&globalThis.__assign||function(){return J1=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},J1.apply(this,arguments)},gge=function(){function r(e){this.config=br({},e),this.init()}return r.prototype.update=function(e){this.config=br({},this.config,e),this.updateElement(),this.renderMarker()},r.prototype.init=function(){this.initElement(),this.renderMarker()},r.prototype.initElement=function(){var e=this.config,t=e.group,n=e.style,a=n.scale,i=a===void 0?1:a,o=n.offsetX,A=o===void 0?0:o,s=n.offsetY,u=s===void 0?0:s,f=this.config.x+A,l=this.config.y+u,c=t.addGroup({name:dA});this.startMarkerGroup=c.addGroup({name:dA}),this.circle=t.addShape("circle",{attrs:J1({x:f,y:l,r:this.config.r*i},n),name:dA}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(f,l,i),fill:n.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=c.addGroup({name:dA});var h=.25*this.config.r*i,d=.5*this.config.r*Math.sqrt(3)*i;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:f-.375*this.config.r*i,y:l-d/2,width:h,height:d,fill:n.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:f+1/8*this.config.r*i,y:l-d/2,width:h,height:d,fill:n.stroke||"#aaa",lineWidth:0}})},r.prototype.updateElement=function(){var e=this.config.style,t=e.scale,n=t===void 0?1:t,a=e.offsetX,i=a===void 0?0:a,o=e.offsetY,A=o===void 0?0:o,s=this.config.x+i,u=this.config.y+A;this.circle.attr("x",s),this.circle.attr("y",u),this.circle.attr("r",this.config.r*n),this.startMarker.attr("path",this.getStartMarkerPath(s,u,n));var f=.25*this.config.r*n,l=.5*this.config.r*Math.sqrt(3)*n;this.pauseLeftMarker.attr("x",s-(1/4+1/8)*this.config.r*n),this.pauseLeftMarker.attr("y",u-l/2),this.pauseLeftMarker.attr("width",f),this.pauseLeftMarker.attr("height",l),this.pauseRightMarker.attr("x",s+1/8*this.config.r*n),this.pauseRightMarker.attr("y",u-l/2),this.pauseRightMarker.attr("width",f),this.pauseRightMarker.attr("height",l)},r.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},r.prototype.getStartMarkerPath=function(e,t,n){var a=.5*this.config.r*Math.sqrt(3)*n;return[["M",e-a/Math.sqrt(3)/2,t-a/2],["L",e+a/Math.sqrt(3),t],["L",e-a/Math.sqrt(3)/2,t+a/2]]},r}();const pge=gge;var nn=globalThis&&globalThis.__assign||function(){return nn=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},nn.apply(this,arguments)},el=Xa,yge="#aaa",mge="green",wge={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},Bge={fill:"#fff"},Ege={fill:"green"},UP={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},NP={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},bge={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:UP,timeTypeControllerStyle:NP},em=110,Jo=50,Ui={SINGLE:"single",RANGE:"range"},xge=function(){function r(e){this.controllerCfg=br({},bge,e),this.group=e.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||Ui.RANGE,this.fontFamily=e.fontFamily||"Arial, sans-serif",this.init()}return r.prototype.init=function(){this.renderPlayButton()},r.prototype.getNextMarkerPath=function(e,t,n){return[["M",e,t-n],["L",e+n,t],["L",e,t+n],["Z",e,t-n],["M",e,t],["L",e-n,t-n],["L",e-n,t+n],["Z"]]},r.prototype.getPreMarkerPath=function(e,t,n){return[["M",e,t-n],["L",e-n,t],["L",e,t+n],["L",e,t-n],["M",e,t],["L",e+n,t-n],["L",e+n,t+n],["Z"]]},r.prototype.renderPlayButton=function(){var e=this.controllerCfg,t=e.width,n=e.height,a=e.x,i=e.y,o=e.hideTimeTypeController,A=e.fill,s=A===void 0?yge:A,u=e.stroke,f=u===void 0?mge:u,l=e.containerStyle,c=l===void 0?{}:l,h=nn(nn({},wge),e.playBtnStyle||{}),d=nn(nn({},Bge),e.preBtnStyle||{}),v=nn(nn({},Ege),e.nextBtnStyle||{}),g=n/2-5,p=i+10,y=this.controllerGroup.addShape("rect",{attrs:nn({x:a,y:p,width:t,height:n,stroke:f,fill:s},c),name:"container-rect"});this.playButton?this.playButton.update({x:t/2,y:p,r:g}):this.playButton=new pge({group:this.controllerGroup,x:t/2,y:p+g+5,r:g,isPlay:this.isPlay,style:h});var m=d.offsetX||0,w=d.offsetY||0,B=(d.scale||1)*g;this.controllerGroup.addShape("path",{attrs:nn({path:this.getPreMarkerPath(t/2-5*g+m,p+g+5+w,B*.5)},d),name:dc});var E=v.offsetX||0,b=v.offsetY||0,C=(v.scale||1)*g;this.controllerGroup.addShape("path",{attrs:nn({path:this.getNextMarkerPath(t/2+5*g+E,p+g+5+b,C*.5)},v),name:hc}),y.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent();var _=this.controllerCfg.scale,x=_===void 0?1:_,M=this.controllerGroup.getCanvasBBox(),S=(M.maxX+M.minX)/2,I=(M.maxY+M.minY)/2,D=el([1,0,0,0,1,0,0,0,1],[["t",-S,-I],["s",x,x],["t",S,I]]);this.controllerGroup.setMatrix(D)},r.prototype.renderSpeedBtn=function(){var e=this.controllerCfg,t=e.y,n=e.width,a=e.hideTimeTypeController,i=nn(nn({},UP),this.controllerCfg.speedControllerStyle||{}),o=i.scroller,A=o===void 0?{}:o,s=i.text,u=s===void 0?{}:s,f=i.pointer,l=f===void 0?{}:f,c=i.scale,h=c===void 0?1:c,d=i.offsetX,v=d===void 0?0:d,g=i.offsetY,p=g===void 0?0:g,y=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=y;var m=5;this.speedAxisY=[19,22,26,32,39];for(var w=0;w<5;w++){var B=t+this.speedAxisY[w],E=n-(a?Jo:em);y.addShape("line",{attrs:nn({x1:E,x2:E+15,y1:B,y2:B},A),speed:m,name:"speed-rect"}),this.speedAxisY[w]=B,m=m-1}this.speedText=y.addShape("text",{attrs:nn({x:n-(a?Jo:em)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},u),name:"speed-text"}),this.speedPoint=y.addShape("path",{attrs:nn({path:this.getPointerPath(n-(a?Jo:em),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},l),name:"speed-pointer"});var b=this.speedGroup.getCanvasBBox(),C=(b.maxX+b.minX)/2,_=(b.maxY+b.minY)/2,x=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];x=el(x,[["t",-C,-_],["s",h,h],["t",C+v*h,_+p*h]]),this.speedGroup.setMatrix(x)},r.prototype.getPointerPath=function(e,t){return[["M",e,t],["L",e-10,t-4],["L",e-10,t+4],["Z"]]},r.prototype.renderToggleTime=function(){var e,t,n=this.controllerCfg,a=n.width,i=n.defaultTimeType,o=nn(nn({},NP),this.controllerCfg.timeTypeControllerStyle||{}),A=o.scale,s=A===void 0?1:A,u=o.offsetX,f=u===void 0?0:u,l=o.offsetY,c=l===void 0?0:l,h=o.box,d=h===void 0?{}:h,v=o.check,g=v===void 0?{}:v,p=o.text,y=p===void 0?{}:p;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"});var m=i===Ui.SINGLE;this.toggleGroup.addShape("rect",{attrs:nn({x:a-Jo,y:this.speedAxisY[0]+3.5},d),isChecked:m,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:nn({path:[["M",a-Jo+3,this.speedAxisY[1]+6],["L",a-Jo+7,this.speedAxisY[1]+10],["L",a-Jo+12,this.speedAxisY[1]+4]]},g),capture:!1,name:"check-icon"}),m||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:nn({text:m?((e=this.controllerCfg)===null||e===void 0?void 0:e.timeRangeControllerText)||"时间范围":((t=this.controllerCfg)===null||t===void 0?void 0:t.timePointControllerText)||"单一时间",x:a-Jo+15,y:this.speedAxisY[0]+4,fontFamily:typeof window<"u"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},y),name:"checked-text"});var w=this.toggleGroup.getCanvasBBox(),B=(w.maxX+w.minX)/2,E=(w.maxY+w.minY)/2,b=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];b=el(b,[["t",-B,-E],["s",s,s],["t",B+f*s,E+c*s]]),this.toggleGroup.setMatrix(b)},r.prototype.bindEvent=function(){var e=this;this.speedGroup.on("speed-rect:click",function(t){var n=t.target.attr("y1"),a=e.speedPoint.attr("matrix"),i=e.speedAxisY.indexOf(a[7]||0),o=e.speedAxisY.indexOf(n),A=e.speedAxisY[o]-e.speedAxisY[i];a=el(a,[["t",0,A]]),e.speedPoint.setMatrix(a),e.currentSpeed=e.speedAxisY.length-o,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(Bs,{speed:e.currentSpeed,type:e.currentType})}),this.speedGroup.on("mousewheel",function(t){t.preventDefault();var n=e.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],a=n[7],i=e.speedAxisY.indexOf(a);if(i===-1){var o=1/0;e.speedAxisY.forEach(function(s,u){var f=Math.abs(s-a);o>f&&(o=f,i=u)})}t.originalEvent.deltaY>0?i=Math.max(0,i-1):i=Math.min(e.speedAxisY.length-1,i+1);var A=e.speedAxisY[i]-a;n=el(n,[["t",0,A]]),e.speedPoint.setMatrix(n),e.currentSpeed=e.speedAxisY.length-i,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(Bs,{speed:e.currentSpeed,type:e.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(t){var n,a,i=t.target.get("isChecked");i?(e.checkedIcon.hide(),e.checkedText.attr("text",((a=e.controllerCfg)===null||a===void 0?void 0:a.timePointControllerText)||"单一时间"),e.currentType=Ui.RANGE):(e.checkedIcon.show(),e.checkedText.attr("text",((n=e.controllerCfg)===null||n===void 0?void 0:n.timeRangeControllerText)||"时间范围"),e.currentType=Ui.SINGLE),t.target.set("isChecked",!i),e.group.emit(Bs,{type:e.currentType,speed:e.currentSpeed})})},r.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},r}();const kP=xge;var Ol=globalThis&&globalThis.__assign||function(){return Ol=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},Ol.apply(this,arguments)},Cge=Xa,_ge={fill:"#5B8FF9"},Sge={fill:"#e6e8e9"},Mge=function(){function r(e){this.frameCount=0,this.fontFamily="Arial, sans-serif";var t=e.graph,n=e.canvas,a=e.group,i=e.width,o=e.height,A=e.padding,s=e.data,u=e.start,f=e.end,l=e.x,c=l===void 0?0:l,h=e.y,d=h===void 0?0:h,v=e.tickLabelFormatter,g=e.selectedTickStyle,p=g===void 0?_ge:g,y=e.unselectedTickStyle,m=y===void 0?Sge:y,w=e.tooltipBackgroundColor,B=e.tooltipFomatter,E=e.tickLabelStyle,b=e.controllerCfg,C=b===void 0?{speed:1}:b;this.graph=t,this.group=a,this.sliceGroup=a.addGroup({name:"slice-group"}),this.canvas=n,this.width=i,this.height=o,this.padding=A,this.data=s,this.start=u,this.end=f,this.tickLabelFormatter=v,this.tickLabelStyle=E||{},this.selectedTickStyle=p,this.unselectedTickStyle=m,this.controllerCfg=C,this.currentSpeed=C.speed||1,this.x=c,this.y=d,this.tooltipBackgroundColor=w,this.tooltipFomatter=B,this.fontFamily=typeof window<"u"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return r.prototype.renderSlices=function(){var e=this,t=this,n=t.width,a=t.height,i=t.padding,o=t.data,A=t.start,s=t.end,u=t.tickLabelFormatter,f=t.selectedTickStyle,l=t.unselectedTickStyle,c=t.tickLabelStyle,h=n-2*i,d=10,v=4,g=3*i+v+d,p=a-g-2*i,y=2,m=o.length,w=(h-y*(m-1))/m;this.tickWidth=w;var B=this.sliceGroup,E=[],b=[],C=Math.round(m*A),_=Math.round(m*s);this.startTickRectId=C,this.endTickRectId=_;var x=c.rotate;delete c.rotate,o.forEach(function(S,I){var D=I>=C&&I<=_,O=D?f:l,F=B.addShape("rect",{attrs:Ol({x:i+I*(w+y),y:i,width:w,height:p},O),draggable:!0,name:"tick-rect-".concat(I)}),U=B.addShape("rect",{attrs:{x:i+I*w+y*(2*I-1)/2,y:i,width:I===0||I===m-1?w+y/2:w+y,height:p,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(I)});U.toFront();var Q=F.getBBox(),N=(Q.minX+Q.maxX)/2;E.push({rect:F,pickRect:U,value:S.date,x:N,y:Q.minY});var R;if(u?(R=u(S),!Oe(R)&&R&&(R=S.date)):I%Math.round(m/10)===0&&(R=S.date),R){b.push(R);var J=Q.maxY+i*2;B.addShape("line",{attrs:{stroke:"#BFBFBF",x1:N,y1:J,x2:N,y2:J+v},name:"tick-line"});var re=J+v+i,ee=B.addShape("text",{attrs:Ol({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:N,y:re,textAlign:"center",text:R,textBaseline:"top",fontSize:10,fontFamily:e.fontFamily||"Arial, sans-serif"},c),capture:!1,name:"tick-label"}),q=ee.getBBox();if(q.maxX>n?ee.attr("textAlign","right"):q.minX<0&&ee.attr("textAlign","left"),vt(x)&&b.length!==10){var ve=Cge([1,0,0,0,1,0,0,0,1],[["t",-N,-re],["r",x],["t",N-5,re+2]]);ee.attr({textAlign:"left",matrix:ve})}b.length===1?ee.attr({textAlign:"left"}):b.length===10&&ee.attr({textAlign:"right"})}}),this.tickRects=E;var M=this.group;this.currentSpeed=1,this.controllerBtnGroup=new kP(Ol({group:M,x:this.x,y:this.y+a+5,width:n,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},r.prototype.initEvent=function(){var e=this,t=this.sliceGroup;t.on("click",function(f){var l=f.target;if(!(l.get("type")!=="rect"||!l.get("name"))){var c=parseInt(l.get("name").split("-")[2],10);if(!isNaN(c)){var h=e.tickRects,d=e.unselectedTickStyle;h.forEach(function(y){y.rect.attr(d)});var v=e.selectedTickStyle;h[c].rect.attr(v),e.startTickRectId=c,e.endTickRectId=c;var g=h.length,p=c/g;e.graph.emit(ki,{value:[p,p]})}}}),t.on("dragstart",function(f){var l=e.tickRects,c=e.unselectedTickStyle;l.forEach(function(y){y.rect.attr(c)});var h=f.target,d=parseInt(h.get("name").split("-")[2],10),v=e.selectedTickStyle;l[d].rect.attr(v),e.startTickRectId=d;var g=l.length,p=d/g;e.graph.emit(ki,{value:[p,p]}),e.dragging=!0}),t.on("dragover",function(f){if(e.dragging&&f.target.get("type")==="rect"){for(var l=parseInt(f.target.get("name").split("-")[2],10),c=e.startTickRectId,h=e.tickRects,d=e.selectedTickStyle,v=e.unselectedTickStyle,g=0;g<h.length;g++){var p=g>=c&&g<=l?d:v;h[g].rect.attr(p)}var y=h.length;e.endTickRectId=l;var m=c/y,w=l/y;e.graph.emit(ki,{value:[m,w]})}}),t.on("drop",function(f){if(e.dragging&&(e.dragging=!1,f.target.get("type")==="rect")){var l=e.startTickRectId,c=parseInt(f.target.get("name").split("-")[2],10);if(!(c<l)){var h=e.selectedTickStyle,d=e.tickRects;d[c].rect.attr(h),e.endTickRectId=c;var v=d.length,g=l/v,p=c/v;e.graph.emit(ki,{value:[g,p]})}}});var n=this,a=n.tooltipBackgroundColor,i=n.tooltipFomatter,o=n.canvas,A=new vge({container:o.get("container"),backgroundColor:a}),s=this.tickRects;s.forEach(function(f){var l=f.pickRect;l.on("mouseenter",function(c){var h=c.target;if(h.get("type")==="rect"){var d=parseInt(h.get("name").split("-")[2],10),v=o.getClientByPoint(s[d].x,s[d].y);A.show({x:s[d].x,y:s[d].y,clientX:v.x,clientY:v.y,text:i?i(s[d].value):s[d].value})}}),l.on("mouseleave",function(c){A.hide()})});var u=this.group;u.on("".concat(dA,":click"),function(){e.isPlay=!e.isPlay,e.changePlayStatus()}),u.on("".concat(hc,":click"),function(){e.updateStartEnd(1)}),u.on("".concat(dc,":click"),function(){e.updateStartEnd(-1)}),u.on(Bs,function(f){f.type;var l=f.speed;e.currentSpeed=l})},r.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(DP,null)):this.playHandler&&(typeof window<"u"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(OP,null))},r.prototype.startPlay=function(){var e=this;return typeof window<"u"?window.requestAnimationFrame(function(){var t=e.currentSpeed;e.frameCount%(60/t)===0&&(e.frameCount=0,e.updateStartEnd(1)),e.frameCount++,e.isPlay&&(e.playHandler=e.startPlay())}):void 0},r.prototype.updateStartEnd=function(e){var t=this,n=this.tickRects,a=n.length,i=this.unselectedTickStyle,o=this.selectedTickStyle,A=t.endTickRectId;if(e>0?t.endTickRectId++:(n[t.endTickRectId].rect.attr(i),t.endTickRectId--),A!==t.startTickRectId)t.endTickRectId<t.startTickRectId&&(t.startTickRectId=t.endTickRectId);else{for(var s=t.startTickRectId;s<=t.endTickRectId-1;s++)n[s].rect.attr(i);t.startTickRectId=t.endTickRectId}if(n[t.endTickRectId]){n[t.endTickRectId].rect.attr(o);var u=t.startTickRectId/a,f=t.endTickRectId/a;this.graph.emit(ki,{value:[u,f]})}},r.prototype.destory=function(){var e=this.sliceGroup;e.off("click"),e.off("dragstart"),e.off("dragover"),e.off("drop"),this.tickRects.forEach(function(t){var n=t.pickRect;n.off("mouseenter"),n.off("mouseleave")}),this.tickRects.length=0,e.off("".concat(dA,":click")),e.off("".concat(hc,":click")),e.off("".concat(dc,":click")),e.off(Bs),this.sliceGroup.destroy()},r}();const Ige=Mge;var PP={};function Tge(r){return PP[r]}function no(r,e){PP[r]=e}var YE=function(){function r(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return r.prototype.translate=function(e){return e},r.prototype.change=function(e){mt(this.__cfg__,e),this.init()},r.prototype.clone=function(){return this.constructor(this.__cfg__)},r.prototype.getTicks=function(){var e=this;return _s(this.ticks,function(t,n){return On(t)?t:{text:e.getText(t,n),tickValue:t,value:e.scale(t)}})},r.prototype.getText=function(e,t){var n=this.formatter,a=n?n(e,t):e;return ht(a)||!Lr(a.toString)?"":a.toString()},r.prototype.getConfig=function(e){return this.__cfg__[e]},r.prototype.init=function(){mt(this,this.__cfg__),this.setDomain(),dF(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},r.prototype.initCfg=function(){},r.prototype.setDomain=function(){},r.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if(Oe(e)){var n=Tge(e);if(!n)throw new Error("There is no method to to calculate ticks!");t=n(this)}else Lr(e)&&(t=e(this));return t},r.prototype.rangeMin=function(){return this.range[0]},r.prototype.rangeMax=function(){return this.range[1]},r.prototype.calcPercent=function(e,t,n){return vt(e)?(e-t)/(n-t):NaN},r.prototype.calcValue=function(e,t,n){return t+e*(n-t)},r}(),Yc=function(r){Lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},e.prototype.translate=function(t){this.buildIndexMap();var n=this.translateIndexMap.get(t);return n===void 0&&(n=vt(t)?t:NaN),n},e.prototype.scale=function(t){var n=this.translate(t),a=this.calcPercent(n,this.min,this.max);return this.calcValue(a,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var n=this.max-this.min,a=this.calcPercent(t,this.rangeMin(),this.rangeMax()),i=Math.round(n*a)+this.min;return i<this.min||i>this.max?NaN:this.values[i]},e.prototype.getText=function(t){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];var i=t;return vt(t)&&!this.values.includes(t)&&(i=this.values[i]),r.prototype.getText.apply(this,Ig([i],n))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if(ht(this.getConfig("min"))&&(this.min=0),ht(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(YE),QP=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,nA="\\d\\d?",eA="\\d\\d",Fge="\\d{3}",Lge="\\d{4}",Ul="[^\\s]+",RP=/\[([^]*?)\]/gm;function HP(r,e){for(var t=[],n=0,a=r.length;n<a;n++)t.push(r[n].substr(0,e));return t}var VM=function(r){return function(e,t){var n=t[r].map(function(i){return i.toLowerCase()}),a=n.indexOf(e.toLowerCase());return a>-1?a:null}};function TA(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var n=0,a=e;n<a.length;n++){var i=a[n];for(var o in i)r[o]=i[o]}return r}var GP=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],zP=["January","February","March","April","May","June","July","August","September","October","November","December"],Dge=HP(zP,3),Oge=HP(GP,3),ZE={dayNamesShort:Oge,dayNames:GP,monthNamesShort:Dge,monthNames:zP,amPm:["am","pm"],DoFn:function(r){return r+["th","st","nd","rd"][r%10>3?0:(r-r%10!==10?1:0)*r%10]}},cg=TA({},ZE),KP=function(r){return cg=TA(cg,r)},XM=function(r){return r.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},na=function(r,e){for(e===void 0&&(e=2),r=String(r);r.length<e;)r="0"+r;return r},Uge={D:function(r){return String(r.getDate())},DD:function(r){return na(r.getDate())},Do:function(r,e){return e.DoFn(r.getDate())},d:function(r){return String(r.getDay())},dd:function(r){return na(r.getDay())},ddd:function(r,e){return e.dayNamesShort[r.getDay()]},dddd:function(r,e){return e.dayNames[r.getDay()]},M:function(r){return String(r.getMonth()+1)},MM:function(r){return na(r.getMonth()+1)},MMM:function(r,e){return e.monthNamesShort[r.getMonth()]},MMMM:function(r,e){return e.monthNames[r.getMonth()]},YY:function(r){return na(String(r.getFullYear()),4).substr(2)},YYYY:function(r){return na(r.getFullYear(),4)},h:function(r){return String(r.getHours()%12||12)},hh:function(r){return na(r.getHours()%12||12)},H:function(r){return String(r.getHours())},HH:function(r){return na(r.getHours())},m:function(r){return String(r.getMinutes())},mm:function(r){return na(r.getMinutes())},s:function(r){return String(r.getSeconds())},ss:function(r){return na(r.getSeconds())},S:function(r){return String(Math.round(r.getMilliseconds()/100))},SS:function(r){return na(Math.round(r.getMilliseconds()/10),2)},SSS:function(r){return na(r.getMilliseconds(),3)},a:function(r,e){return r.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(r,e){return r.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(r){var e=r.getTimezoneOffset();return(e>0?"-":"+")+na(Math.floor(Math.abs(e)/60)*100+Math.abs(e)%60,4)},Z:function(r){var e=r.getTimezoneOffset();return(e>0?"-":"+")+na(Math.floor(Math.abs(e)/60),2)+":"+na(Math.abs(e)%60,2)}},YM=function(r){return+r-1},ZM=[null,nA],qM=[null,Ul],JM=["isPm",Ul,function(r,e){var t=r.toLowerCase();return t===e.amPm[0]?0:t===e.amPm[1]?1:null}],eI=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(r){var e=(r+"").match(/([+-]|\d\d)/gi);if(e){var t=+e[1]*60+parseInt(e[2],10);return e[0]==="+"?t:-t}return 0}],Nge={D:["day",nA],DD:["day",eA],Do:["day",nA+Ul,function(r){return parseInt(r,10)}],M:["month",nA,YM],MM:["month",eA,YM],YY:["year",eA,function(r){var e=new Date,t=+(""+e.getFullYear()).substr(0,2);return+(""+(+r>68?t-1:t)+r)}],h:["hour",nA,void 0,"isPm"],hh:["hour",eA,void 0,"isPm"],H:["hour",nA],HH:["hour",eA],m:["minute",nA],mm:["minute",eA],s:["second",nA],ss:["second",eA],YYYY:["year",Lge],S:["millisecond","\\d",function(r){return+r*100}],SS:["millisecond",eA,function(r){return+r*10}],SSS:["millisecond",Fge],d:ZM,dd:ZM,ddd:qM,dddd:qM,MMM:["month",Ul,VM("monthNamesShort")],MMMM:["month",Ul,VM("monthNames")],a:JM,A:JM,ZZ:eI,Z:eI},hg={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},jP=function(r){return TA(hg,r)},$P=function(r,e,t){if(e===void 0&&(e=hg.default),t===void 0&&(t={}),typeof r=="number"&&(r=new Date(r)),Object.prototype.toString.call(r)!=="[object Date]"||isNaN(r.getTime()))throw new Error("Invalid Date pass to format");e=hg[e]||e;var n=[];e=e.replace(RP,function(i,o){return n.push(o),"@@@"});var a=TA(TA({},cg),t);return e=e.replace(QP,function(i){return Uge[i](r,a)}),e.replace(/@@@/g,function(){return n.shift()})};function WP(r,e,t){if(t===void 0&&(t={}),typeof e!="string")throw new Error("Invalid format in fecha parse");if(e=hg[e]||e,r.length>1e3)return null;var n=new Date,a={year:n.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},i=[],o=[],A=e.replace(RP,function(w,B){return o.push(XM(B)),"@@@"}),s={},u={};A=XM(A).replace(QP,function(w){var B=Nge[w],E=B[0],b=B[1],C=B[3];if(s[E])throw new Error("Invalid format. "+E+" specified twice in format");return s[E]=!0,C&&(u[C]=!0),i.push(B),"("+b+")"}),Object.keys(u).forEach(function(w){if(!s[w])throw new Error("Invalid format. "+w+" is required in specified format")}),A=A.replace(/@@@/g,function(){return o.shift()});var f=r.match(new RegExp(A,"i"));if(!f)return null;for(var l=TA(TA({},cg),t),c=1;c<f.length;c++){var h=i[c-1],d=h[0],v=h[2],g=v?v(f[c],l):+f[c];if(g==null)return null;a[d]=g}a.isPm===1&&a.hour!=null&&+a.hour!=12?a.hour=+a.hour+12:a.isPm===0&&+a.hour==12&&(a.hour=0);var p;if(a.timezoneOffset==null){p=new Date(a.year,a.month,a.day,a.hour,a.minute,a.second,a.millisecond);for(var y=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],c=0,m=y.length;c<m;c++)if(s[y[c][0]]&&a[y[c][0]]!==p[y[c][1]]())return null}else if(p=new Date(Date.UTC(a.year,a.month,a.day,a.hour,a.minute-a.timezoneOffset,a.second,a.millisecond)),a.month>11||a.month<0||a.day>31||a.day<1||a.hour>23||a.hour<0||a.minute>59||a.minute<0||a.second>59||a.second<0)return null;return p}var VP={format:$P,parse:WP,defaultI18n:ZE,setGlobalDateI18n:KP,setGlobalDateMasks:jP};const kge=Object.freeze(Object.defineProperty({__proto__:null,assign:TA,default:VP,defaultI18n:ZE,format:$P,parse:WP,setGlobalDateI18n:KP,setGlobalDateMasks:jP},Symbol.toStringTag,{value:"Module"}));function Pge(r){return function(e,t,n,a){for(var i=ht(n)?0:n,o=ht(a)?e.length:a;i<o;){var A=i+o>>>1;r(e[A])>t?o=A:i=A+1}return i}}var tI="format";function XP(r,e){var t=kge[tI]||VP[tI];return t(r,e)}function dg(r){return Oe(r)&&(r.indexOf("T")>0?r=new Date(r).getTime():r=new Date(r.replace(/-/gi,"/")).getTime()),Pw(r)&&(r=r.getTime()),r}var oi=1e3,Es=60*oi,bs=60*Es,Io=24*bs,Nl=Io*31,rI=Io*365,tl=[["HH:mm:ss",oi],["HH:mm:ss",oi*10],["HH:mm:ss",oi*30],["HH:mm",Es],["HH:mm",Es*10],["HH:mm",Es*30],["HH",bs],["HH",bs*6],["HH",bs*12],["YYYY-MM-DD",Io],["YYYY-MM-DD",Io*4],["YYYY-WW",Io*7],["YYYY-MM",Nl],["YYYY-MM",Nl*4],["YYYY-MM",Nl*6],["YYYY",Io*380]];function Qge(r,e,t){var n=(e-r)/t,a=Pge(function(o){return o[1]})(tl,n)-1,i=tl[a];return a<0?i=tl[0]:a>=tl.length&&(i=$a(tl)),i}var Rge=function(r){Lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="timeCat",t}return e.prototype.translate=function(t){t=dg(t);var n=this.values.indexOf(t);return n===-1&&(vt(t)&&t<this.values.length?n=t:n=NaN),n},e.prototype.getText=function(t,n){var a=this.translate(t);if(a>-1){var i=this.values[a],o=this.formatter;return i=o?o(i,n):XP(i,this.mask),i}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var t=this.values;ye(t,function(n,a){t[a]=dg(n)}),t.sort(function(n,a){return n-a}),r.prototype.setDomain.call(this)},e}(Yc),Sp=function(r){Lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.isContinuous=!0,t}return e.prototype.scale=function(t){if(ht(t))return NaN;var n=this.rangeMin(),a=this.rangeMax(),i=this.max,o=this.min;if(i===o)return n;var A=this.getScalePercent(t);return n+A*(a-n)},e.prototype.init=function(){r.prototype.init.call(this);var t=this.ticks,n=ji(t),a=$a(t);n<this.min&&(this.min=n),a>this.max&&(this.max=a),ht(this.minLimit)||(this.min=n),ht(this.maxLimit)||(this.max=a)},e.prototype.setDomain=function(){var t=rF(this.values),n=t.min,a=t.max;ht(this.min)&&(this.min=n),ht(this.max)&&(this.max=a),this.min>this.max&&(this.min=n,this.max=a)},e.prototype.calculateTicks=function(){var t=this,n=r.prototype.calculateTicks.call(this);return this.nice||(n=Tg(n,function(a){return a>=t.min&&a<=t.max})),n},e.prototype.getScalePercent=function(t){var n=this.max,a=this.min;return(t-a)/(n-a)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(YE),Hge=function(r){Lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return e.prototype.invert=function(t){var n=this.getInvertPercent(t);return this.min+n*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(Sp);const Zc=Hge;function sA(r,e){var t=Math.E,n;return e>=0?n=Math.pow(t,Math.log(e)/r):n=Math.pow(t,Math.log(-e)/r)*-1,n}function Qa(r,e){return r===1?1:Math.log(e)/Math.log(r)}function YP(r,e,t){ht(t)&&(t=Math.max.apply(null,r));var n=t;return ye(r,function(a){a>0&&a<n&&(n=a)}),n===t&&(n=t/e),n>1&&(n=1),n}var Gge=function(r){Lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="log",t}return e.prototype.invert=function(t){var n=this.base,a=Qa(n,this.max),i=this.rangeMin(),o=this.rangeMax()-i,A,s=this.positiveMin;if(s){if(t===0)return 0;A=Qa(n,s/n);var u=1/(a-A)*o;if(t<u)return t/u*s}else A=Qa(n,this.min);var f=(t-i)/o,l=f*(a-A)+A;return Math.pow(n,l)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){r.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");t===0&&(this.positiveMin=YP(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var n=this.max,a=this.min;if(n===a||t<=0)return 0;var i=this.base,o=this.positiveMin;o&&(a=o*1/i);var A;return t<o?A=t/o/(Qa(i,n)-Qa(i,a)):A=(Qa(i,t)-Qa(i,a))/(Qa(i,n)-Qa(i,a)),A},e}(Sp),zge=function(r){Lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="pow",t}return e.prototype.invert=function(t){var n=this.getInvertPercent(t),a=this.exponent,i=sA(a,this.max),o=sA(a,this.min),A=n*(i-o)+o,s=A>=0?1:-1;return Math.pow(A,a)*s},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var n=this.max,a=this.min;if(n===a)return 0;var i=this.exponent,o=(sA(i,t)-sA(i,a))/(sA(i,n)-sA(i,a));return o},e}(Sp),Kge=function(r){Lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="time",t}return e.prototype.getText=function(t,n){var a=this.translate(t),i=this.formatter;return i?i(a,n):XP(a,this.mask)},e.prototype.scale=function(t){var n=t;return(Oe(n)||Pw(n))&&(n=this.translate(n)),r.prototype.scale.call(this,n)},e.prototype.translate=function(t){return dg(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,n=this.getConfig("min"),a=this.getConfig("max");if((!ht(n)||!vt(n))&&(this.min=this.translate(this.min)),(!ht(a)||!vt(a))&&(this.max=this.translate(this.max)),t&&t.length){var i=[],o=1/0,A=o,s=0;ye(t,function(u){var f=dg(u);if(isNaN(f))throw new TypeError("Invalid Time: "+u+" in time scale!");o>f?(A=o,o=f):A>f&&(A=f),s<f&&(s=f),i.push(f)}),t.length>1&&(this.minTickInterval=A-o),ht(n)&&(this.min=o),ht(a)&&(this.max=s)}},e}(Zc),ZP=function(r){Lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="quantize",t}return e.prototype.invert=function(t){var n=this.ticks,a=n.length,i=this.getInvertPercent(t),o=Math.floor(i*(a-1));if(o>=a-1)return $a(n);if(o<0)return ji(n);var A=n[o],s=n[o+1],u=o/(a-1),f=(o+1)/(a-1);return A+(i-u)/(f-u)*(s-A)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var t=r.prototype.calculateTicks.call(this);return this.nice||($a(t)!==this.max&&t.push(this.max),ji(t)!==this.min&&t.unshift(this.min)),t},e.prototype.getScalePercent=function(t){var n=this.ticks;if(t<ji(n))return 0;if(t>$a(n))return 1;var a=0;return ye(n,function(i,o){if(t>=i)a=o;else return!1}),a/(n.length-1)},e}(Sp),jge=function(r){Lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="quantile",t}return e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}(ZP),qP={};function $ge(r){return qP[r]}function ao(r,e){if($ge(r))throw new Error("type '"+r+"' existed.");qP[r]=e}var Wge=function(r){Lt(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&vt(t)?t:this.range[0]},e.prototype.invert=function(t){var n=this.range;return t<n[0]||t>n[1]?NaN:this.values[0]},e}(YE);function JP(r){var e=r.values,t=r.tickInterval,n=r.tickCount,a=r.showLast;if(vt(t)){var i=Tg(e,function(d,v){return v%t===0}),o=$a(e);return a&&$a(i)!==o&&i.push(o),i}var A=e.length,s=r.min,u=r.max;if(ht(s)&&(s=0),ht(u)&&(u=e.length-1),!vt(n)||n>=A)return e.slice(s,u+1);if(n<=0||u<=0)return[];for(var f=n===1?A:Math.floor(A/(n-1)),l=[],c=s,h=0;h<n&&!(c>=u);h++)c=Math.min(s+h*f,u),h===n-1&&a?l.push(e[u]):l.push(e[c]);return l}function Vge(r){var e=r.min,t=r.max,n=r.nice,a=r.tickCount,i=new Xge;return i.domain([e,t]),n&&i.nice(a),i.ticks(a)}var tm=5,nI=Math.sqrt(50),aI=Math.sqrt(10),iI=Math.sqrt(2),Xge=function(){function r(){this._domain=[0,1]}return r.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},r.prototype.nice=function(e){var t,n;e===void 0&&(e=tm);var a=this._domain.slice(),i=0,o=this._domain.length-1,A=this._domain[i],s=this._domain[o],u;return s<A&&(t=[s,A],A=t[0],s=t[1],n=[o,i],i=n[0],o=n[1]),u=mv(A,s,e),u>0?(A=Math.floor(A/u)*u,s=Math.ceil(s/u)*u,u=mv(A,s,e)):u<0&&(A=Math.ceil(A*u)/u,s=Math.floor(s*u)/u,u=mv(A,s,e)),u>0?(a[i]=Math.floor(A/u)*u,a[o]=Math.ceil(s/u)*u,this.domain(a)):u<0&&(a[i]=Math.ceil(A*u)/u,a[o]=Math.floor(s*u)/u,this.domain(a)),this},r.prototype.ticks=function(e){return e===void 0&&(e=tm),Yge(this._domain[0],this._domain[this._domain.length-1],e||tm)},r}();function Yge(r,e,t){var n,a=-1,i,o,A;if(e=+e,r=+r,t=+t,r===e&&t>0)return[r];if((n=e<r)&&(i=r,r=e,e=i),(A=mv(r,e,t))===0||!isFinite(A))return[];if(A>0)for(r=Math.ceil(r/A),e=Math.floor(e/A),o=new Array(i=Math.ceil(e-r+1));++a<i;)o[a]=(r+a)*A;else for(r=Math.floor(r*A),e=Math.ceil(e*A),o=new Array(i=Math.ceil(r-e+1));++a<i;)o[a]=(r-a)/A;return n&&o.reverse(),o}function mv(r,e,t){var n=(e-r)/Math.max(0,t),a=Math.floor(Math.log(n)/Math.LN10),i=n/Math.pow(10,a);return a>=0?(i>=nI?10:i>=aI?5:i>=iI?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(i>=nI?10:i>=aI?5:i>=iI?2:1)}function oI(r,e,t){var n;return t==="ceil"?n=Math.ceil(r/e):t==="floor"?n=Math.floor(r/e):n=Math.round(r/e),n*e}function qE(r,e,t){var n=oI(r,t,"floor"),a=oI(e,t,"ceil");n=Xd(n,t),a=Xd(a,t);for(var i=[],o=Math.max((a-n)/(Math.pow(2,12)-1),t),A=n;A<=a;A=A+o){var s=Xd(A,o);i.push(s)}return{min:n,max:a,ticks:i}}function JE(r,e,t){var n,a=r.minLimit,i=r.maxLimit,o=r.min,A=r.max,s=r.tickCount,u=s===void 0?5:s,f=ht(a)?ht(e)?o:e:a,l=ht(i)?ht(t)?A:t:i;if(f>l&&(n=[f,l],l=n[0],f=n[1]),u<=2)return[f,l];for(var c=(l-f)/(u-1),h=[],d=0;d<u;d++)h.push(f+c*d);return h}function Zge(r){var e=r.min,t=r.max,n=r.tickInterval,a=r.minLimit,i=r.maxLimit,o=Vge(r);return!ht(a)||!ht(i)?JE(r,ji(o),$a(o)):n?qE(e,t,n).ticks:o}function ss(r){return Math.abs(r)<1e-15?r:parseFloat(r.toFixed(15))}var qge=[1,5,2,2.5,4,3],AI=Number.EPSILON*100;function Jge(r,e){return(r%e+e)%e}function epe(r){return Math.round(r*1e12)/1e12}function tpe(r,e,t,n,a,i){var o=Dg(e),A=Qw(e,r),s=0,u=Jge(n,i);return(u<AI||i-u<AI)&&n<=0&&a>=0&&(s=1),1-A/(o-1)-t+s}function rpe(r,e,t){var n=Dg(e),a=Qw(e,r),i=1;return 1-a/(n-1)-t+i}function npe(r,e,t,n,a,i){var o=(r-1)/(i-a),A=(e-1)/(Math.max(i,n)-Math.min(t,a));return 2-Math.max(o/A,A/o)}function ape(r,e){return r>=e?2-(r-1)/(e-1):1}function ipe(r,e,t,n){var a=e-r;return 1-.5*(Math.pow(e-n,2)+Math.pow(r-t,2))/Math.pow(.1*a,2)}function ope(r,e,t){var n=e-r;if(t>n){var a=(t-n)/2;return 1-Math.pow(a,2)/Math.pow(.1*n,2)}return 1}function Ape(){return 1}function spe(r,e,t,n,a,i){t===void 0&&(t=5),n===void 0&&(n=!0),a===void 0&&(a=qge),i===void 0&&(i=[.25,.2,.5,.05]);var o=t<0?0:Math.round(t);if(Number.isNaN(r)||Number.isNaN(e)||typeof r!="number"||typeof e!="number"||!o)return{min:0,max:0,ticks:[]};if(e-r<1e-15||o===1)return{min:r,max:e,ticks:[r]};if(e-r>1e148){var A=t||5,s=(e-r)/A;return{min:r,max:e,ticks:Array(A).fill(null).map(function(J,re){return ss(r+s*re)})}}for(var u={score:-2,lmin:0,lmax:0,lstep:0},f=1;f<1/0;){for(var l=0;l<a.length;l+=1){var c=a[l],h=rpe(c,a,f);if(i[0]*h+i[1]+i[2]+i[3]<u.score){f=1/0;break}for(var d=2;d<1/0;){var v=ape(d,o);if(i[0]*h+i[1]+i[2]*v+i[3]<u.score)break;for(var g=(e-r)/(d+1)/f/c,p=Math.ceil(Math.log10(g));p<1/0;){var y=f*c*Math.pow(10,p),m=ope(r,e,y*(d-1));if(i[0]*h+i[1]*m+i[2]*v+i[3]<u.score)break;var w=Math.floor(e/y)*f-(d-1)*f,B=Math.ceil(r/y)*f;if(w<=B)for(var A=B-w,E=0;E<=A;E+=1){var b=w+E,C=b*(y/f),_=C+y*(d-1),x=y,M=tpe(c,a,f,C,_,x),S=ipe(r,e,C,_),I=npe(d,o,r,e,C,_),D=Ape(),O=i[0]*M+i[1]*S+i[2]*I+i[3]*D;O>u.score&&(!n||C<=r&&_>=e)&&(u.lmin=C,u.lmax=_,u.lstep=x,u.score=O)}p+=1}d+=1}}f+=1}var F=ss(u.lmax),U=ss(u.lmin),Q=ss(u.lstep),N=Math.floor(epe((F-U)/Q))+1,R=new Array(N);R[0]=ss(U);for(var l=1;l<N;l++)R[l]=ss(R[l-1]+Q);return{min:Math.min(r,ji(R)),max:Math.max(e,$a(R)),ticks:R}}function upe(r){var e=r.min,t=r.max,n=r.tickCount,a=r.nice,i=r.tickInterval,o=r.minLimit,A=r.maxLimit,s=spe(e,t,n,a).ticks;return!ht(o)||!ht(A)?JE(r,ji(s),$a(s)):i?qE(e,t,i).ticks:s}function fpe(r){var e=r.base,t=r.tickCount,n=r.min,a=r.max,i=r.values,o,A=Qa(e,a);if(n>0)o=Math.floor(Qa(e,n));else{var s=YP(i,e,a);o=Math.floor(Qa(e,s))}for(var u=A-o,f=Math.ceil(u/t),l=[],c=o;c<A+f;c=c+f)l.push(Math.pow(e,c));return n<=0&&l.unshift(0),l}function eQ(r,e,t){if(t===void 0&&(t=5),r===e)return{max:e,min:r,ticks:[r]};var n=t<0?0:Math.round(t);if(n===0)return{max:e,min:r,ticks:[]};var a=1.5,i=.5+1.5*a,o=e-r,A=o/n,s=Math.pow(10,Math.floor(Math.log10(A))),u=s;2*s-A<a*(A-u)&&(u=2*s,5*s-A<i*(A-u)&&(u=5*s,10*s-A<a*(A-u)&&(u=10*s)));for(var f=Math.ceil(e/u),l=Math.floor(r/u),c=Math.max(f*u,e),h=Math.min(l*u,r),d=Math.floor((c-h)/u)+1,v=new Array(d),g=0;g<d;g++)v[g]=ss(h+g*u);return{min:h,max:c,ticks:v}}function lpe(r){var e=r.exponent,t=r.tickCount,n=Math.ceil(sA(e,r.max)),a=Math.floor(sA(e,r.min)),i=eQ(a,n,t).ticks;return i.map(function(o){var A=o>=0?1:-1;return Math.pow(o,e)*A})}function cpe(r,e){var t=r.length*e;return e===1?r[r.length-1]:e===0?r[0]:t%1!==0?r[Math.ceil(t)-1]:r.length%2===0?(r[t-1]+r[t])/2:r[t]}function hpe(r){var e=r.tickCount,t=r.values;if(!t||!t.length)return[];for(var n=t.slice().sort(function(A,s){return A-s}),a=[],i=0;i<e;i++){var o=i/(e-1);a.push(cpe(n,o))}return a}function dpe(r){var e=r.min,t=r.max,n=r.tickCount,a=r.tickInterval,i=r.minLimit,o=r.maxLimit,A=eQ(e,t,n).ticks;return!ht(i)||!ht(o)?JE(r,ji(A),$a(A)):a?qE(e,t,a).ticks:A}function vpe(r){var e=r.min,t=r.max,n=r.minTickInterval,a=r.tickInterval,i=r.tickCount;if(a)i=Math.ceil((t-e)/a);else{a=Qge(e,t,i)[1];var o=(t-e)/a,A=o/i;A>1&&(a=a*Math.ceil(A)),n&&a<n&&(a=n)}a=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),a);for(var s=[],u=e;u<t+a;u+=a)s.push(u);return s}function gpe(r){var e=JP(P({showLast:!0},r));return e}function vg(r){return new Date(r).getFullYear()}function ppe(r){return new Date(r,0,1).getTime()}function ew(r){return new Date(r).getMonth()}function ype(r,e){var t=vg(r),n=vg(e),a=ew(r),i=ew(e);return(n-t)*12+(i-a)%12}function mpe(r,e){return new Date(r,e,1).getTime()}function wpe(r,e){return Math.ceil((e-r)/Io)}function Bpe(r,e){return Math.ceil((e-r)/bs)}function Epe(r,e){return Math.ceil((e-r)/(60*1e3))}function bpe(r){var e=r.min,t=r.max,n=r.minTickInterval,a=r.tickCount,i=r.tickInterval,o=[];i||(i=(t-e)/a,n&&i<n&&(i=n)),i=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),i);var A=vg(e);if(i>rI)for(var s=vg(t),u=Math.ceil(i/rI),f=A;f<=s+u;f=f+u)o.push(ppe(f));else if(i>Nl)for(var l=Math.ceil(i/Nl),c=ew(e),h=ype(e,t),f=0;f<=h+l;f=f+l)o.push(mpe(A,f+c));else if(i>Io)for(var d=new Date(e),v=d.getFullYear(),g=d.getMonth(),p=d.getDate(),y=Math.ceil(i/Io),m=wpe(e,t),f=0;f<m+y;f=f+y)o.push(new Date(v,g,p+f).getTime());else if(i>bs)for(var d=new Date(e),v=d.getFullYear(),g=d.getMonth(),y=d.getDate(),w=d.getHours(),B=Math.ceil(i/bs),E=Bpe(e,t),f=0;f<=E+B;f=f+B)o.push(new Date(v,g,y,w+f).getTime());else if(i>Es)for(var b=Epe(e,t),C=Math.ceil(i/Es),f=0;f<=b+C;f=f+C)o.push(e+f*Es);else{var _=i;_<oi&&(_=oi);for(var x=Math.floor(e/oi)*oi,M=Math.ceil((t-e)/oi),S=Math.ceil(_/oi),f=0;f<M+S;f=f+S)o.push(x+f*oi)}return o.length>=512&&console.warn("Notice: current ticks length("+o.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+i+") is too small, increase the value to solve the problem!"),o}no("cat",JP);no("time-cat",gpe);no("wilkinson-extended",upe);no("r-pretty",dpe);no("time",vpe);no("time-pretty",bpe);no("log",fpe);no("pow",lpe);no("quantile",hpe);no("d3-linear",Zge);ao("cat",Yc);ao("category",Yc);ao("identity",Wge);ao("linear",Zc);ao("log",Gge);ao("pow",zge);ao("time",Kge);ao("timeCat",Rge);ao("quantize",ZP);ao("quantile",jge);var xpe=globalThis&&globalThis.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))};function Cpe(r){return _s(r,function(e,t){var n=t===0?"M":"L",a=e[0],i=e[1];return[n,a,i]})}function tQ(r){return Cpe(r)}function _pe(r){if(r.length<=2)return tQ(r);var e=[];ye(r,function(o){bA(o,e.slice(e.length-2))||e.push(o[0],o[1])});var t=rO(e,!1),n=ji(r),a=n[0],i=n[1];return t.unshift(["M",a,i]),t}function Spe(r,e,t,n){n===void 0&&(n=!0);var a=new Zc({values:r}),i=new Yc({values:_s(r,function(A,s){return s})}),o=_s(r,function(A,s){return[i.scale(s)*e,t-a.scale(A)*t]});return n?_pe(o):tQ(o)}function Mpe(r,e,t,n){n===void 0&&(n=5);for(var a=new Zc({values:r}),i=new Yc({values:_s(r,function(c,h){return h})}),o=_s(r,function(c,h){return[i.scale(h)*e,t-a.scale(c)*t]}),A=[],s=0;s<o.length;s++){var u=o[s],f={x:u[0],y:u[1],y0:t,size:n},l=Fpe(f);A.push.apply(A,l)}return Lpe(A)}function Ipe(r,e){var t=new Zc({values:r}),n=Math.max(0,t.min);return e-t.scale(n)*e}function Tpe(r,e,t,n){var a=xpe([],r,!0),i=Ipe(n,t);return a.push(["L",e,i]),a.push(["L",0,i]),a.push(["Z"]),a}function Fpe(r){var e=r.x,t=r.y,n=r.y0,a=r.size,i,o;yt(t)?(i=t[0],o=t[1]):(i=n,o=t);var A,s;yt(e)?(A=e[0],s=e[1]):(A=e-a/2,s=e+a/2);var u=[{x:A,y:i},{x:A,y:o}];return u.push({x:s,y:o},{x:s,y:i}),u}function Lpe(r,e){e===void 0&&(e=!0);var t=[],n=r[0];t.push(["M",n.x,n.y]);for(var a=1,i=r.length;a<i;a++)t.push(["L",r[a].x,r[a].y]);return e&&(t.push(["L",n.x,n.y]),t.push(["z"])),t}var kl=globalThis&&globalThis.__assign||function(){return kl=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},kl.apply(this,arguments)},Dpe={stroke:"#C5C5C5",strokeOpacity:.85},Ope={fill:"#CACED4",opacity:.85},Upe=function(){function r(e){var t=e.x,n=t===void 0?0:t,a=e.y,i=a===void 0?0:a,o=e.width,A=o===void 0?200:o,s=e.height,u=s===void 0?26:s,f=e.smooth,l=f===void 0?!0:f,c=e.isArea,h=c===void 0?!1:c,d=e.data,v=d===void 0?[]:d,g=e.lineStyle,p=e.areaStyle,y=e.group,m=e.interval,w=m===void 0?null:m;this.group=y,this.x=n,this.y=i,this.width=A,this.height=u,this.data=v,this.smooth=l,this.isArea=h,this.lineStyle=Object.assign({},Dpe,g),this.areaStyle=Object.assign({},Ope,p),this.intervalConfig=w,this.renderLine()}return r.prototype.renderLine=function(){var e=this,t=e.x,n=e.y,a=e.width,i=e.height;e.barWidth;var o=e.data,A=e.smooth,s=e.isArea,u=e.lineStyle,f=e.areaStyle,l=this.group.addGroup({name:"trend-group"});if(o){var c=Spe(o,a,i,A);if(l.addShape("path",{attrs:kl({path:c},u),name:"trend-line"}),s){var h=Tpe(c,a,i,o);l.addShape("path",{attrs:kl({path:h},f),name:"trend-area"})}}this.intervalConfig&&l.addShape("path",{attrs:kl({path:Mpe(this.intervalConfig.data,a,i,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),l.move(t,n)},r.prototype.destory=function(){this.group.destroy()},r}();const Npe=Upe;var Uu=globalThis&&globalThis.__assign||function(){return Uu=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},Uu.apply(this,arguments)},kpe={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},Ppe={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},Qpe=function(){function r(e){var t=e.group,n=e.name,a=e.type,i=e.x,o=i===void 0?0:i,A=e.y,s=A===void 0?0:A,u=e.width,f=u===void 0?2:u,l=e.height,c=l===void 0?24:l,h=e.style,d=h===void 0?{}:h;this.group=t,this.name=n,this.handleType=a,this.x=o,this.y=s,this.width=f,this.height=c,a==="trend"?this.style=Uu(Uu({},kpe),d):a==="simple"&&(this.style=Uu(Uu({},Ppe),d)),this.renderHandle()}return r.prototype.setX=function(e){this.setXY(e,void 0)},r.prototype.setY=function(e){this.setXY(void 0,e)},r.prototype.setXY=function(e,t){vt(e)&&(this.x=e),vt(t)&&(this.y=t),this.updateXY()},r.prototype.renderHandle=function(){var e=this,t=e.width,n=e.height,a=e.style,i=e.name,o=a.fill,A=a.stroke,s=a.radius,u=a.opacity,f=a.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:n,fill:o,stroke:A,radius:s,opacity:u,cursor:f},name:"".concat(i,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:o,stroke:A,radius:s,opacity:u,cursor:f,lineAppendWidth:12},name:"".concat(i,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:n,r:2*t,fill:o,stroke:A,radius:s,opacity:u,cursor:f},name:"".concat(i,"-handler")})):this.handleType==="simple"&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:n/2,r:2*t,fill:o,stroke:A,radius:s,opacity:u,cursor:f,lineWidth:2},name:"".concat(i,"-handler")})),this.updateXY(),this.handleType==="trend"?this.bindTrendEvents():this.handleType==="simple"&&this.bindSimpleEvents()},r.prototype.bindSimpleEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var n=e.style.highLightFill;e.topCircle.attr("fill",n)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var n=e.style.fill;e.topCircle.attr("fill",n)})},r.prototype.bindTrendEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var n=e.style.highLightFill;e.verticalLine.attr("fill",n),e.topCircle.attr("fill",n),e.bottomCircle.attr("fill",n)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var n=e.style.fill;e.verticalLine.attr("fill",n),e.topCircle.attr("fill",n),e.bottomCircle.attr("fill",n)})},r.prototype.show=function(){this.handleGroup.show()},r.prototype.hide=function(){this.handleGroup.hide()},r.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},r}();const sI=Qpe;var Cr=globalThis&&globalThis.__assign||function(){return Cr=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},Cr.apply(this,arguments)},Rpe=Xa,Hpe={fill:"#416180",opacity:.05},Gpe={fill:"#416180",opacity:.15,radius:5},zpe={fill:"#5B8FF9",opacity:.3,cursor:"grab"},tw=2,Kpe={width:tw,height:24},jpe={textBaseline:"middle",fill:"#000",opacity:.45},$pe={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},Wpe={lineWidth:1,stroke:"#ccc"},Vpe=function(){function r(e){var t=this;this.prevX=0,this.onMouseDown=function(J){return function(re){t.currentHandler=J;var ee=re.originalEvent;ee.stopPropagation(),ee.preventDefault(),t.prevX=xo(ee,"touches.0.pageX",ee.pageX);var q=t.canvas.get("container");q.addEventListener("mousemove",t.onMouseMove),q.addEventListener("mouseup",t.onMouseUp),q.addEventListener("mouseleave",t.onMouseUp),q.addEventListener("touchmove",t.onMouseMove),q.addEventListener("touchend",t.onMouseUp),q.addEventListener("touchcancel",t.onMouseUp)}},this.onMouseMove=function(J){J.stopPropagation(),J.preventDefault();var re=xo(J,"touches.0.pageX",J.pageX),ee=re-t.prevX,q=t.adjustOffsetRange(ee/t.width);t.updateStartEnd(q),t.updateUI(),t.prevX=re},this.onMouseUp=function(){t.currentHandler&&(t.currentHandler=void 0);var J=t.canvas.get("container");J&&(J.removeEventListener("mousemove",t.onMouseMove),J.removeEventListener("mouseup",t.onMouseUp),J.removeEventListener("mouseleave",t.onMouseUp),J.removeEventListener("touchmove",t.onMouseMove),J.removeEventListener("touchend",t.onMouseUp),J.removeEventListener("touchcancel",t.onMouseUp))};var n=e.x,a=n===void 0?0:n,i=e.y,o=i===void 0?0:i,A=e.width,s=A===void 0?100:A,u=e.height,f=e.padding,l=f===void 0?10:f,c=e.trendCfg,h=e.controllerCfg,d=h===void 0?{speed:1}:h,v=e.backgroundStyle,g=v===void 0?{}:v,p=e.foregroundStyle,y=p===void 0?{}:p,m=e.handlerStyle,w=m===void 0?{}:m,B=e.textStyle,E=B===void 0?{}:B,b=e.start,C=b===void 0?0:b,_=e.end,x=_===void 0?1:_,M=e.minText,S=M===void 0?"":M,I=e.maxText,D=I===void 0?"":I,O=e.group,F=e.graph,U=e.canvas,Q=e.tick,N=Q===void 0?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(re){return re},ticks:[]}:Q,R=e.type;this.graph=F,this.canvas=U,this.group=O,this.timeBarType=R,this.x=a,this.y=o,this.width=s,this.height=u,this.padding=l,this.ticks=N.ticks,this.trendCfg=c,this.controllerCfg=d,this.currentSpeed=d.speed||1,this.tickLabelFormatter=N.tickLabelFormatter,R==="trend"?this.backgroundStyle=Cr(Cr({},Hpe),g):R==="simple"&&(this.backgroundStyle=Cr(Cr({},Gpe),g)),this.foregroundStyle=Cr(Cr({},zpe),y),this.handlerStyle=Cr(Cr({},Kpe),w),this.textStyle=Cr(Cr({},jpe),E),this.tickLabelStyle=Cr(Cr({},$pe),N.tickLabelStyle),this.tickLineStyle=Cr(Cr({},Wpe),N.tickLineStyle),this.currentMode=d.defaultTimeType||Ui.RANGE,this.start=C,this.end=x,this.minText=S,this.maxText=D,this.fontFamily=typeof window<"u"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return r.prototype.update=function(e){var t=e.x,n=e.y,a=e.width,i=e.height,o=e.minText,A=e.maxText,s=e.start,u=e.end;this.start=Math.min(1,Math.max(s,0)),this.end=Math.min(1,Math.max(u,0)),mt(this,{x:t,y:n,width:a,height:i,minText:o,maxText:A}),this.updateUI()},r.prototype.setText=function(e,t){this.minTextShape.attr("text",e),this.maxTextShape.attr("text",t)},r.prototype.renderSlider=function(){var e=this,t=this,n=t.width,a=t.height,i=t.timeBarType;if(i==="trend"&&Dg(xo(this.trendCfg,"data"))){var o=new Npe(Cr(Cr({x:this.x,y:this.y,width:n,height:a},this.trendCfg),{group:this.group}));this.trendComponent=o}var A=this.group.addGroup({name:"slider-group"});A.addShape("rect",{attrs:Cr({x:0,y:0,width:n,height:a},this.backgroundStyle),name:"background"});var s=this.group.addGroup();i==="trend"?(this.minTextShape=s.addShape("text",{attrs:Cr({x:0,y:a/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=s.addShape("text",{attrs:Cr({y:a/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=s.addShape("text",{attrs:Cr({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=s.addShape("text",{attrs:Cr({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:Cr({x:0,y:this.y,height:a},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",function(p){p.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function(p){p.target.attr("cursor",e.foregroundStyle.cursor||"grab")});var u=xo(this.handlerStyle,"width",2),f=xo(this.handlerStyle,"height",24),l=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new sI({name:"minHandlerShape",group:l,type:i,x:this.x,y:this.y,width:u,height:f,style:this.handlerStyle});var c=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new sI({name:"maxHandlerShape",group:c,type:i,x:this.x,y:this.y,width:u,height:f,style:this.handlerStyle});var h=this.ticks,d=n/(h.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(p){p.destroy()});var v=-1/0,g=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=h.map(function(p,y){e.tickPosList.push(e.x+y*d);var m;e.tickLabelFormatter?(m=e.tickLabelFormatter(p),!Oe(m)&&m&&(m=p.date)):m=p.date;var w=e.x+y*d,B=e.y+a+5,E=e.group.addShape("text",{attrs:Cr({x:w,y:B,text:m,fontFamily:e.fontFamily||"Arial, sans-serif"},e.tickLabelStyle),name:"tick-label"});if(vt(g)&&y!==h.length-1){var b=Rpe([1,0,0,0,1,0,0,0,1],[["t",-w,-B],["r",g],["t",w-5,B+2]]);E.attr({textAlign:"left",matrix:b})}y===0?E.attr({textAlign:"left"}):y!==h.length-1&&E.attr({textAlign:"right"});var C=e.group.addShape("line",{attrs:Cr({x1:e.x+y*d,y1:e.y+a+2,x2:e.x+y*d,y2:e.y+a+6},e.tickLineStyle),name:"tick-line"});C.toBack();var _=E.getBBox();return _.minX>v?(E.show(),C.show(),v=_.minX+_.width+10):(E.hide(),C.hide()),E}),this.controllerBtnGroup=new kP(Cr({group:this.group,x:this.x,y:this.y+a+25,width:n,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),A.move(this.x,this.y),this.bindEvents(),this.currentMode===Ui.SINGLE&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},r.prototype.bindEvents=function(){var e=this,t=this.group.find(function(a){return a.get("name")==="minHandlerShape"});t&&(t.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),t.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var n=this.group.find(function(a){return a.get("name")==="maxHandlerShape"});n&&(n.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),n.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat(dA,":click"),function(){e.isPlay=!e.isPlay,e.currentHandler=e.maxHandlerShape,e.changePlayStatus()}),this.group.on("".concat(hc,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(.01),e.updateUI()}),this.group.on("".concat(dc,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(-.01),e.updateUI()}),this.group.on(Bs,function(a){var i=a.type,o=a.speed;e.currentSpeed=o,e.currentMode=i,i===Ui.SINGLE?(e.minHandlerShape.hide(),e.foregroundShape.hide(),e.minTextShape.hide()):i===Ui.RANGE&&(e.minHandlerShape.show(),e.foregroundShape.show(),e.minTextShape.show())})},r.prototype.adjustTickIndex=function(e){for(var t=0;t<this.tickPosList.length-1;t++)if(this.tickPosList[t]<=e&&e<=this.tickPosList[t+1])return Math.abs(this.tickPosList[t]-e)<Math.abs(e-this.tickPosList[t+1])?t:t+1;return 0},r.prototype.adjustOffsetRange=function(e){switch(this.currentHandler){case this.minHandlerShape:{var t=0-this.start,n=1-this.start;return Math.min(n,Math.max(t,e))}case this.maxHandlerShape:{var t=0-this.end,n=1-this.end;return Math.min(n,Math.max(t,e))}case this.foregroundShape:{var t=0-this.start,n=1-this.end;return Math.min(n,Math.max(t,e))}default:return 0}},r.prototype.updateStartEnd=function(e){var t=this.ticks[this.adjustTickIndex(this.start*this.width)],n=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler){this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t==null?void 0:t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n==null?void 0:n.date;return}switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=e,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date;break;case this.foregroundShape:this.start+=e,this.end+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date;break}},r.prototype.updateUI=function(){var e=this;this.start<0&&(this.start=0),this.start>1&&(this.start=1),this.end>1&&(this.end=1),this.end<0&&(this.end=0);var t=this.x+this.start*this.width,n=this.x+this.end*this.width;this.foregroundShape.attr("x",t),this.foregroundShape.attr("width",n-t);var a=xo(this.handlerStyle,"width",tw);this.setText(this.minText,this.maxText);var i=this.dodgeText([t,n]),o=i[0],A=i[1];this.minHandlerShape.setX(t-a/2),ye(o,function(s,u){return e.minTextShape.attr(u,s)}),this.maxHandlerShape.setX(n-a/2),ye(A,function(s,u){return e.maxTextShape.attr(u,s)}),this.currentMode===Ui.RANGE?this.graph.emit(ki,{value:[this.start,this.end].sort()}):this.currentMode===Ui.SINGLE&&this.graph.emit(ki,{value:[this.end,this.end]})},r.prototype.dodgeText=function(e){var t,n,a=2,i=xo(this.handlerStyle,"width",tw),o=this.minTextShape,A=this.maxTextShape,s=e[0],u=e[1],f=!1;s>u&&(t=[u,s],s=t[0],u=t[1],n=[A,o],o=n[0],A=n[1],f=!0);var l=o.getBBox(),c=A.getBBox(),h=null,d=null;return this.timeBarType==="trend"?(h=s-l.width<this.x+a?{x:s+i/2+a,textAlign:"left"}:{x:s-i/2-a,textAlign:"right"},d=u+c.width>this.x+this.width?{x:u-i/2-a,textAlign:"right"}:{x:u+i/2+a,textAlign:"left"}):this.timeBarType==="simple"&&(h=o.attr("x")>l.width?{x:s,textAlign:"center"}:{x:s,textAlign:"left"},d=A.attr("x")>this.width-c.width?{x:u,textAlign:"right"}:{x:u,textAlign:"center"}),f?[d,h]:[h,d]},r.prototype.startPlay=function(){var e=this;return typeof window<"u"?window.requestAnimationFrame(function(){var t=e,n=t.ticks,a=t.width,i=e.currentSpeed,o=a/n.length,A=o/((10-i)*1e3/60),s=e.adjustOffsetRange(A/e.width);e.updateStartEnd(s),e.updateUI(),e.isPlay&&(e.playHandler=e.startPlay())}):void 0},r.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(DP,null)):this.playHandler&&(typeof window<"u"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(OP,null))},r.prototype.destory=function(){this.graph.off(ki,function(){});var e=this.group,t=e.find(function(a){return a.get("name")==="minHandlerShape"});t&&(t.off("minHandlerShape-handler:mousedown"),t.off("minHandlerShape-handler:touchstart"),t.destroy());var n=e.find(function(a){return a.get("name")==="maxHandlerShape"});n&&(n.off("maxHandlerShape-handler:mousedown"),n.off("maxHandlerShape-handler:touchstart"),n.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),e.off("".concat(dA,":click")),e.off("".concat(hc,":click")),e.off("".concat(dc,":click")),e.off(Bs),e.destroy(),this.trendComponent&&this.trendComponent.destory()},r}();const Xpe=Vpe;var Ype=globalThis&&globalThis.__extends||function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=i[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Co=globalThis&&globalThis.__assign||function(){return Co=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},Co.apply(this,arguments)},Zpe=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(t[n[a]]=r[n[a]]);return t},qpe=4,Jpe=26,e0e=function(r){Ype(e,r);function e(t){var n=r.call(this,t)||this;return n.afterrenderListener=function(a){return n.filterData({})},n.valueChangeListener=jl(function(a){return n.filterData(a)},200,{trailing:!0,leading:!0}),n.changeData=function(a){var i=n.get("graph");n.cacheGraphData=i.get("data"),n.filterData({})},n}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{},putInGraphContainer:!0}},e.prototype.initContainer=function(){var t=this.get("graph"),n=this._cfgs,a=n.width,i=n.height,o=n.putInGraphContainer,A=this.get("className")||"g6-component-timebar",s=this.get("container"),u;if(s?(Oe(s)&&(s=document.getElementById(s)),u=s):(u=Sr("<div class='".concat(A,"'></div>")),Wt(u,{position:"relative"})),o){var f=this.get("graph").get("container");f.appendChild(u)}this.set("timeBarContainer",u);var l,c=t.get("renderer");c==="SVG"?l=new Ml({container:u,width:a,height:i}):l=new So({container:u,width:a,height:i}),this.get("containerCSS")&&Wt(u,this.get("containerCSS")),this.set("canvas",l)},e.prototype.init=function(){this.initContainer();var t=this.get("canvas"),n=t.addGroup({name:"timebar-group"});this.set("timeBarGroup",n),this.renderTrend(),this.initEvent();var a=typeof window<"u"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",a)},e.prototype.play=function(){this.togglePlay(!0)},e.prototype.pause=function(){this.togglePlay(!1)},e.prototype.togglePlay=function(t){var n=this.get("timebar");n&&(n.isPlay=!!t,n.changePlayStatus())},e.prototype.renderTrend=function(){var t=this,n=this._cfgs,a=n.width,i=n.x,o=n.y,A=n.padding,s=n.type,u=n.trend,f=n.slider,l=n.controllerCfg,c=n.textStyle,h=n.tick,d=n.backgroundStyle,v=n.foregroundStyle,g=u.data,p=Zpe(u,["data"]),y=a-2*A,m=s==="trend"?Jpe:qpe,w=this.get("graph"),B=this.get("timeBarGroup"),E=this.get("canvas"),b=null;if(s==="trend"||s==="simple"){var C=this.get("getValue");b=new Xpe(Co(Co({graph:w,canvas:E,group:B,type:s,x:i+A,y:s==="trend"?o+A:o+A+15,width:y,height:m,padding:A,backgroundStyle:d,foregroundStyle:v,trendCfg:Co(Co({},p),{data:g.map(function(x){return(C==null?void 0:C(x))||x.value})})},f),{tick:{ticks:g,tickLabelFormatter:h.tickLabelFormatter,tickLabelStyle:h.tickLabelStyle,tickLineStyle:h.tickLineStyle},handlerStyle:Co(Co({},f.handlerStyle),{height:f.height||m}),controllerCfg:l,textStyle:c}))}else s==="tick"&&(b=new Ige(Co({graph:w,canvas:E,group:B,x:i+A,y:o+A,width:a,height:42,padding:2,controllerCfg:l},h)));var _=function x(){var M=t.get("timebar");M.draggingHandler=!1,M.isPlay&&(M.isPlay=!1,M.currentHandler=M.maxHandlerShape,M.changePlayStatus()),document.removeEventListener("mouseup",x)};E.on("mousedown",function(x){(x.target.get("name")==="maxHandlerShape-handler"||x.target.get("name")==="minHandlerShape-handler"||x.target===b.foregroundShape)&&document.addEventListener("mouseup",_)}),this.set("timebar",b)},e.prototype.filterData=function(t){var n,a=t.value;if(!a){a=[];var i=this._cfgs.type;!i||i==="trend"||i==="simple"?(a[0]=this._cfgs.slider.start,a[1]=this._cfgs.slider.end):i==="tick"&&(a[0]=this._cfgs.tick.start,a[1]=this._cfgs.tick.end)}var o=null,A=this._cfgs.type;if(A==="trend"||A==="simple"?o=this._cfgs.trend.data:A==="tick"&&(o=this._cfgs.tick.data),!o||o.length===0){console.warn("请配置 TimeBar 组件的数据");return}var s=this.get("rangeChange"),u=this.get("graph"),f=Math.round(o.length*a[0]),l=Math.round(o.length*a[1]);l=l>=o.length?o.length-1:l,f=f>=o.length?o.length-1:f;var c=(n=this._cfgs.tick)===null||n===void 0?void 0:n.tickLabelFormatter,h=c?c(o[f]):o[f].date,d=c?c(o[l]):o[l].date;if(A!=="tick"){var v=this.get("timebar");v.setText(h,d)}if(s)s(u,h,d);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=u.get("data"));var g=this.get("filterItemTypes"),p=this.get("changeData"),y=this.get("getDate"),m=this.get("shouldIgnore"),w=o[f].date,B=o[l].date;if(p||p===void 0){var E=this.cacheGraphData.nodes,b=this.cacheGraphData.edges,C={},_={};u.getNodes().forEach(function(x){return C[x.getID()]=!0}),u.getEdges().forEach(function(x){return _[x.getID()]=!0}),g.includes("node")&&(E==null||E.forEach(function(x){var M=+((y==null?void 0:y(x))||x.date),S=M>=w&&M<=B||(m==null?void 0:m("node",x,{min:w,max:B})),I=C[x.id];I&&!S?(u.removeItem(x.id),C[x.id]=!1):!I&&S&&(u.addItem("node",x),C[x.id]=!0)}),b==null||b.forEach(function(x){var M=C[x.source]&&C[x.target]||(m==null?void 0:m("edge",x,{min:w,max:B})),S=!!u.findById(x.id);S&&!M?(u.removeItem(x.id),_[x.id]=!1):!S&&M?(u.addItem("edge",x),_[x.id]=!0):S||(_[x.id]=!1)})),(this.get("filterEdge")||g.includes("edge"))&&(b==null||b.filter(function(x){var M=+((y==null?void 0:y(x))||x.date),S=M>=w&&M<=B||(m==null?void 0:m("edge",x,{min:w,max:B})),I=C[x.source]&&C[x.target],D=S&&I,O=_[x.id];O&&!D?(_[x.id]=!1,u.removeItem(x.id)):!O&&D&&(_[x.id]=!0,u.addItem("edge",x))}))}else g.includes("node")&&u.getNodes().forEach(function(x){var M=x.getModel();if(!(m!=null&&m("node",M,{min:w,max:B}))){var S=+((y==null?void 0:y(M))||M.date);S<w||S>B?u.hideItem(x):u.showItem(x)}}),(this.get("filterEdge")||g.includes("edge"))&&u.getEdges().forEach(function(x){var M=x.getModel();if(!(m!=null&&m("edge",M,{min:o[f].date,max:o[l].date}))){var S=+((y==null?void 0:y(M))||M.date);if(S<o[f].date||S>o[l].date)u.hideItem(x);else{var I=x.getSource().isVisible(),D=x.getTarget().isVisible();I&&D&&u.showItem(x)}}})}},e.prototype.initEvent=function(){var t=this.get("graph");t.on("afterchangedata",this.changeData),t.on("afterrender",this.afterrenderListener),t.on(ki,this.valueChangeListener)},e.prototype.destroy=function(){var t=this.get("graph");t.off("afterchangedata",this.changeData),t.off("afterrender",this.afterrenderListener),t.off(ki,this.valueChangeListener);var n=this.get("timebar");n&&n.destory&&n.destory(),r.prototype.destroy.call(this);var a=this.get("timeBarContainer");if(a){var i=this.get("container");i||(i=this.get("graph").get("container")),Oe(i)&&(i=document.getElementById(i)),i===a&&(i=i.parentElement),i.removeChild(a)}},e}(ha);const t0e=e0e;var r0e=globalThis&&globalThis.__extends||function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=i[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),n0e=Hn.applyMatrix;function a0e(r,e){var t,n;if(r.naturalWidth)t=r.naturalWidth,n=r.naturalHeight;else{var a=new Image;a.src=r.src,a.onload=function(){e&&e(a.width,a.height)}}return[t,n]}var i0e=function(r){r0e(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,n=this._cfgs,a=n.graph;if(!this.destroyed){var i=this.get("container");Oe(i)&&(i=document.getElementById(i));var o=Sr("<div class=".concat(n.viewportClassName,`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff;
        cursor:move'
      </div>`)),A=0,s=0,u=!1,f=0,l=0,c=0,h=0,d=0,v=0;i.addEventListener("mousedown",function(g){if(n.refresh=!1,g.target===o){var p=o.style;c=parseInt(p.width,10),h=parseInt(p.height,10);var y=t.get("width"),m=t.get("height");c>y||h>m||(v=a.getZoom(),d=t.get("ratio"),u=!0,A=g.clientX,s=g.clientY)}},!1),i.addEventListener("mousemove",function(g){if(!(!u||ht(g.clientX)||ht(g.clientY))){var p=t.get("width"),y=t.get("height"),m=o.style;f=parseInt(m.left,10),l=parseInt(m.top,10),c=parseInt(m.width,10),h=parseInt(m.height,10);var w=A-g.clientX,B=s-g.clientY;f-w<0?w=f:f-w+c>=p&&(w=0),l-B<0?B=l:l-B+h>=y&&(B=0),f-=w,l-=B,Wt(o,{left:"".concat(f,"px"),top:"".concat(l,"px")}),a.translate(w*v/d,B*v/d),A=g.clientX,s=g.clientY}},!1),i.addEventListener("mouseleave",function(){u=!1,n.refresh=!0},!1),i.addEventListener("mouseup",function(){u=!1,n.refresh=!0},!1),this.set("viewport",o),i.appendChild(o)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),n=this.get("width"),a=this.get("height"),i=this.get("graph"),o=i.get("width"),A=i.get("height"),s=o/A,u=i.getGroup(),f=u.getCanvasBBox(),l=[(f.minX+f.maxX)/2,(f.minY+f.maxY)/2],c=[f.maxX-f.minX,f.maxY-f.minY],h={centerX:l[0],centerY:l[1],width:0,height:0,minX:0,minY:0};f[0]/f[1]>s?(h.width=c[0],h.height=h.width/s):(h.height=c[1],h.width=h.height*s),h.minX=l[0]-h.width/2,h.minY=l[1]-h.height/2;var d=u.getMatrix();d||(d=[1,0,0,0,1,0,0,0,1]);var v=Hw([1,0,0,0,1,0,0,0,1],d),g=n0e({x:h.minX,y:h.minY},v),p=i.getCanvasByPoint(g.x,g.y),y=this.get("viewport");y||this.initViewport();var m=o/h.width,w=m*n,B=m*a,E=n*-p.x/h.width,b=a*-p.y/h.height,C=E+w,_=b+B;E<0&&(w+=E,E=0),C>n&&(w=w-(C-n)),b<0&&(B+=b,b=0),_>a&&(B=B-(_-a)),this.set("ratio",t);var x="".concat(E,"px"),M="".concat(b,"px");Wt(y,{left:x,top:M,width:"".concat(w,"px"),height:"".concat(B,"px")})}},e.prototype.init=function(){this.initContainer()},e.prototype.initContainer=function(){var t=this,n=t.get("graph"),a=n.get("width"),i=n.get("height"),o=i/a,A=t.get("className"),s=t.get("container"),u=t.get("width"),f=t.get("height");!u&&!f&&(u=200),u?(f=o*u,t.set("height",f)):(u=1/o*f,t.set("width",u));var l=Sr("<div class='".concat(A,"' style='width: ").concat(u,"px; height: ").concat(f,"px; overflow: hidden; position: relative;'></div>"));Oe(s)&&(s=document.getElementById(s)),s?s.appendChild(l):n.get("container").appendChild(l),t.set("container",l);var c=Sr('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');l.appendChild(c);var h=Sr('<span style="display: table-cell; vertical-align: middle; "></span>');c.appendChild(h),t.set("containerDOM",c),t.set("containerSpan",h);var d=Sr('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />'));t.set("imgDOM",d),t.updateImgSize(),h.appendChild(d),t.updateCanvas()},e.prototype.updateImgSize=function(){var t=this,n=t.get("imgDOM"),a=t.get("width"),i=t.get("height");n.onload=function(){var o=a0e(n);o[0]>o[1]?n.width=a:n.height=i}},e.prototype.updateCanvas=function(){var t=this.get("refresh");if(t){var n=this.get("graph");if(!n.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var a=this.get("width"),i=n.get("canvas").getCanvasBBox(),o=i.width,A=a/o;this.set("ratio",A),this.updateViewport()}}},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateGraphImg=function(t){var n=this,a=n.get("imgDOM");a.remove(),n.set("graphImg",t);var i=Sr('<img alt="" src="'.concat(t,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));n.set("imgDOM",i),i.src=t,n.updateImgSize();var o=n.get("containerSpan");o.appendChild(i),n.updateCanvas()},e.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},e}(ha);const o0e=i0e;var A0e=globalThis&&globalThis.__extends||function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=i[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),rw=globalThis&&globalThis.__assign||function(){return rw=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},rw.apply(this,arguments)},s0e=Hn.distance,uI=.05,fI={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},u0e=function(r){A0e(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:Xt(fI),showLabel:"edge",scaleRBy:"wheel"}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"};break}return t},e.prototype.init=function(){var t=this,n=t.get("showLabel"),a=n==="node"||n==="both",i=n==="edge"||n==="both";t.set("showNodeLabel",a),t.set("showEdgeLabel",i);var o=t.get("shouldShow");o||t.set("shouldShow",function(){return!0})},e.prototype.createDelegate=function(t){var n=this,a=n.get("delegate");(!a||a.destroyed)&&(n.filter(t),a=n.get("delegate"),a.on("dragstart",function(i){}),a.on("drag",function(i){n.filter(i)}),this.get("scaleRBy")==="wheel"&&a.on("mousewheel",function(i){n.scaleRByWheel(i)}))},e.prototype.scaleRByWheel=function(t){var n=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var a=n.get("graph"),i,o=n.get("delegate"),A=o?{x:o.attr("x"),y:o.attr("y")}:void 0;A||a.getPointByClient(t.clientX,t.clientY),t.originalEvent.wheelDelta<0?i=1-uI:i=1/(1-uI);var s=n.get("maxR"),u=n.get("minR"),f=n.get("r");(f>(s||a.get("height"))&&i>1||f<(u||a.get("height")*.05)&&i<1)&&(i=1),f*=i,n.set("r",f),n.filter(t)}},e.prototype.filter=function(t){var n=this,a=n.get("graph"),i=a.getNodes(),o={},A=n.get("r"),s=n.get("type"),u={x:t.x,y:t.y};n.updateDelegate(u,A);var f=n.get("shouldShow"),l=n.get("vShapes");l&&l.forEach(function(p){p.remove(),p.destroy()}),l=[],i.forEach(function(p){var y=p.getModel(),m=y.x,w=y.y;s0e({x:m,y:w},u)<A&&(o[y.id]=p)});var c=a.getEdges(),h=[];c.forEach(function(p){var y=p.getModel(),m=y.source,w=y.target;f(y)&&(s==="only-source"||s==="one"?o[m]&&!o[w]&&h.push(p):s==="only-target"||s==="one"?o[w]&&!o[m]&&h.push(p):s==="both"&&o[m]&&o[w]&&h.push(p))});var d=n.get("showNodeLabel"),v=n.get("showEdgelabel"),g=a.get("group");h.forEach(function(p){var y=p.get("group").get("children");y.forEach(function(m){var w=m.get("type"),B=g.addShape(w,{attrs:m.attr()});l.push(B),d&&w==="text"&&B.set("visible",!0)})}),Object.keys(o).forEach(function(p){var y=o[p],m=y.get("group").clone();if(g.add(m),l.push(m),v)for(var w=m.get("children"),B=0;B<w.length;B++){var E=w[B];E.get("type")==="text"&&E.set("visible",!0)}}),n.set("vShapes",l)},e.prototype.updateParams=function(t){var n=this,a=t.r,i=t.trigger,o=t.minR,A=t.maxR,s=t.scaleRBy,u=t.showLabel,f=t.shouldShow;if(isNaN(t.r)||n.set("r",a),isNaN(A)||n.set("maxR",A),isNaN(o)||n.set("minR",o),(i==="mousemove"||i==="click")&&n.set("trigger",i),s==="wheel"||s==="unset"){n.set("scaleRBy",s),n.get("delegate").remove(),n.get("delegate").destroy();var l=n.get("dPercentText");l&&(l.remove(),l.destroy())}(u==="node"||u==="both")&&n.set("showNodeLabel",!0),(u==="edge"||u==="both")&&n.set("showEdgeLabel",!0),f&&n.set("shouldShow",f)},e.prototype.updateDelegate=function(t,n){var a=this,i=a.get("graph"),o=a.get("delegate");if(!o||o.destroyed){var A=i.get("group"),s=a.get("delegateStyle")||fI;o=A.addShape("circle",{attrs:rw({r:n,x:t.x,y:t.y},s),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&o.on("mousewheel",function(u){a.scaleRByWheel(u)})}else o.attr({x:t.x,y:t.y,r:n});a.set("delegate",o)},e.prototype.clear=function(){var t=this,n=t.get("vShapes");n&&n.forEach(function(i){i.remove(),i.destroy()}),n=[],t.set("vShapes",n);var a=t.get("delegate");a&&!a.destroyed&&(a.remove(),a.destroy())},e.prototype.destroy=function(){this.clear()},e}(ha);const f0e=u0e;var l0e=globalThis&&globalThis.__extends||function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=i[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),c0e=Hn.pointLineDistance,h0e={stroke:"#FA8C16",lineWidth:1},d0e=function(r){l0e(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{line:h0e,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},e.prototype.init=function(){},e.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},e.prototype.onDragStart=function(){this.initBoxLine()},e.prototype.onDrag=function(t){var n=t.item,a=n.get("delegateShape")||n,i=a.getBBox(),o=n.getModel(),A=o.x-i.x,s=o.y-i.y;this.show({x:i.minX+A,y:i.minY+s},{width:i.width,height:i.height})},e.prototype.onDragEnd=function(){this.destory()},e.prototype.initBoxLine=function(){var t=this._cfgs,n=t.horizontalLines,a=t.verticalLines,i=t.itemAlignType,o=this.get("graph"),A=o.getNodes();A.forEach(function(s){var u=s.getBBox(),f=s.get("id");i===!0||i==="horizontal"?(n["".concat(f,"tltr")]=[u.minX,u.minY,u.maxX,u.minY,s],n["".concat(f,"lcrc")]=[u.minX,u.centerY,u.maxX,u.centerY,s],n["".concat(f,"blbr")]=[u.minX,u.maxY,u.maxX,u.maxY,s]):i==="center"&&(n["".concat(f,"lcrc")]=[u.minX,u.centerY,u.maxX,u.centerY,s]),i===!0||i==="vertical"?(a["".concat(f,"tlbl")]=[u.minX,u.minY,u.minX,u.maxY,s],a["".concat(f,"tcbc")]=[u.centerX,u.minY,u.centerX,u.maxY,s],a["".concat(f,"trbr")]=[u.maxX,u.minY,u.maxX,u.maxY,s]):i==="center"&&(a["".concat(f,"tcbc")]=[u.centerX,u.minY,u.centerX,u.maxY,s])})},e.prototype.show=function(t,n){var a=mt({},t);return this.itemAlign(t,n,a),t},e.prototype.itemAlign=function(t,n,a){var i=this,o=this._cfgs,A=o.horizontalLines,s=o.verticalLines,u=o.tolerance,f={x:a.x+n.width/2,y:a.y},l={x:a.x+n.width/2,y:a.y+n.height/2},c={x:a.x+n.width/2,y:a.y+n.height},h={x:a.x,y:a.y+n.height/2},d={x:a.x+n.width,y:a.y+n.height/2},v=[],g=[],p=null;if(this.clearAlignLine(),ye(A,function(m){m[4].isVisible&&(v.push(i.getLineDisObject(m,f)),v.push(i.getLineDisObject(m,l)),v.push(i.getLineDisObject(m,c)))}),ye(s,function(m){m[4].isVisible&&(g.push(i.getLineDisObject(m,h)),g.push(i.getLineDisObject(m,l)),g.push(i.getLineDisObject(m,d)))}),v.sort(function(m,w){return m.dis-w.dis}),g.sort(function(m,w){return m.dis-w.dis}),v.length!==0&&v[0].dis<u){t.y=v[0].line[1]-v[0].point.y+a.y,p={type:"item",horizontals:[v[0]]};for(var y=1;y<3;y++)v[0].dis===v[y].dis&&p.horizontals.push(v[y])}if(g.length!==0&&g[0].dis<u){t.x=g[0].line[0]-g[0].point.x+a.x,p?p.verticals=[g[0]]:p={type:"item",verticals:[g[0]]};for(var y=1;y<3;y++)g[0].dis===g[y].dis&&p.verticals.push(g[y])}p&&(p.bbox=n,this.addAlignLine(p))},e.prototype.addAlignLine=function(t){var n=t.bbox,a=t.type,i=t.horizontals,o=t.verticals,A=this._cfgs,s=A.line,u=A.alignLines,f=this.get("graph"),l=f.get("group");a==="item"&&(i&&ye(i,function(c){var h=c.line,d=c.point,v=(h[0]+h[2])/2,g,p;d.x<v?(g=d.x-n.width/2,p=Math.max(h[0],h[2])):(g=d.x+n.width/2,p=Math.min(h[0],h[2]));var y=mt({x1:g,y1:h[1],x2:p,y2:h[1]},s),m=l.addShape("line",{attrs:y,capture:!1});u.push(m)}),o&&ye(o,function(c){var h=c.line,d=c.point,v=(h[1]+h[3])/2,g,p;d.y<v?(g=d.y-n.height/2,p=Math.max(h[1],h[3])):(g=d.y+n.height/2,p=Math.min(h[1],h[3]));var y=mt({x1:h[0],y1:g,x2:h[0],y2:p},s),m=l.addShape("line",{attrs:y,capture:!1});u.push(m)}))},e.prototype.getLineDisObject=function(t,n){return{line:t,point:n,dis:c0e(t,n)}},e.prototype.getContainer=function(){return this.get("container")},e.prototype.clearAlignLine=function(){var t=this._cfgs.alignLines;ye(t,function(n){n.remove()}),t.length=0},e.prototype.destory=function(){var t=this._cfgs,n=t.horizontalLines,a=t.verticalLines,i=this.get("graph"),o=i.getNodes();o.forEach(function(A){var s=A.get("id");delete n["".concat(s,"tltr")],delete n["".concat(s,"lcrc")],delete n["".concat(s,"blbr")],delete a["".concat(s,"tlbl")],delete a["".concat(s,"tcbc")],delete a["".concat(s,"trbr")]}),this.clearAlignLine()},e}(ha);const v0e=d0e;var g0e=globalThis&&globalThis.__extends||function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=i[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ur=globalThis&&globalThis.__assign||function(){return Ur=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},Ur.apply(this,arguments)},p0e=["click","mouseenter"],y0e=function(r){g0e(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},e.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var t=this.get("filter")||{},n=t.multiple;n&&t.trigger==="mouseenter"&&this.set("multiple",!1);var a=this.get("align");if(!a){var i=this.get("position").split("-");i.includes("left")&&(a="left"),i.includes("right")?a="right":a="center",this.set("align",a)}var o=this.get("graph"),A=o.get("container"),s=Sr(`<div class='g6-legend-container' style="position: absolute;"></div>`);A.appendChild(s),this.set("container",s);var u=this.render();Wt(s,this.getContainerPos(u)),this.bindEvents()},e.prototype.getContainerPos=function(t){t===void 0&&(t=[0,0]);var n=this,a=n.get("graph"),i=this.get("offsetX"),o=this.get("offsetY"),A=this.get("margin"),s=this.get("position").split("-"),u={top:0,right:1,bottom:2,left:3},f=0,l=0,c={left:(a.getWidth()-t[0])/2+f,top:(a.getHeight()-t[1])/2+l};return s.forEach(function(h){var d=A[u[h]],v=h;switch(h){case"top":d+=l;break;case"left":d+=f;break;case"bottom":d=a.getHeight()-t[1]-d+l,v="top";break;default:d=a.getWidth()-t[0]-d+f,v="left";break}c[v]=d}),c.top+=o+a.getContainer().offsetTop,c.left+=i+a.getContainer().offsetLeft,Object.keys(c).forEach(function(h){c[h]="".concat(c[h],"px")}),c},e.prototype.bindEvents=function(){var t=this,n=t.get("filter");if(!(!n||!n.enable)){var a=n.trigger||"click";p0e.includes(a)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),a="click");var i=t.get("legendCanvas");a==="mouseenter"?(i.on("node-container:mouseenter",function(o){return t.filterData(o)}),i.on("node-container:mouseleave",function(o){t.clearFilter(),t.clearActiveLegend()})):(i.on("node-container:click",function(o){return t.filterData(o)}),i.on("click",function(o){o.target&&o.target.isCanvas&&o.target.isCanvas()&&(t.clearFilter(),t.clearActiveLegend())}))}},e.prototype.changeData=function(t){this.set("data",t);var n=this.render();Wt(this.get("container"),this.getContainerPos(n))},e.prototype.activateLegend=function(t){var n=this.get("filter"),a=n==null?void 0:n.multiple;a||this.clearActiveLegend();var i=t.get("parent");i.get("active")?(i.set("active",!1),this.findLegendItemsByState("active").length&&i.set("inactive",!0)):(i.set("inactive",!1),i.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(l){l.set("inactive",!0)}):this.clearActiveLegend();var o=(n==null?void 0:n.legendStateStyles)||{},A=(o==null?void 0:o.inactive)||{opacity:.5,"text-shape":{opacity:.5}},s=A["text-shape"]||{};this.findLegendItemsByState("inactive").forEach(function(l){var c=l.get("children"),h=c[0],d=c[1];h.attr(Ur(Ur({},h.get("oriAttrs")),A)),d.attr(Ur(Ur({},d.get("oriAttrs")),s))});var u=(o==null?void 0:o.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},f=u["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(l){var c=l.get("children"),h=c[0],d=c[1];h.attr(Ur(Ur({},h.get("oriAttrs")),u)),d.attr(Ur(Ur({},d.get("oriAttrs")),f))})},e.prototype.findLegendItemsByState=function(t,n,a){n===void 0&&(n="all"),a===void 0&&(a=!0);var i=this.get("legendCanvas").find(function(s){return s.get("name")==="root"}),o=i.find(function(s){return s.get("name")==="node-group"}),A=i.find(function(s){return s.get("name")==="edge-group"});return n==="node"?o.get("children").filter(function(s){return!!s.get(t)===a}):n==="edge"?A.get("children").filter(function(s){return!!s.get(t)===a}):o.get("children").filter(function(s){return!!s.get(t)===a}).concat(A.get("children").filter(function(s){return!!s.get(t)===a}))},e.prototype.clearActiveLegend=function(){var t=this.get("legendCanvas"),n=t.find(function(i){return i.get("name")==="root"}),a=[n.find(function(i){return i.get("name")==="node-group"}),n.find(function(i){return i.get("name")==="edge-group"})];a.forEach(function(i){i.get("children").forEach(function(o){o.set("active",!1),o.set("inactive",!1);var A=o.get("children"),s=A[0],u=A[1];s.attr(s.get("oriAttrs")),u.attr(u.get("oriAttrs"))})})},e.prototype.filterData=function(t){var n=this.get("filter"),a=n==null?void 0:n.filterFunctions;if(!(!n||!a)){var i=this.get("legendCanvas"),o=this.get("graph"),A=n.graphActiveState||"active",s=n.graphInactiveState||"inactive",u=n.multiple;this.clearFilter(),u||this.clearActiveLegend(),this.activateLegend(t.target);var f=i.find(function(p){return p.get("name")==="root"}),l=f.find(function(p){return p.get("name")==="node-group"}),c=f.find(function(p){return p.get("name")==="edge-group"}),h=l.get("children").filter(function(p){return p.get("active")}),d=c.get("children").filter(function(p){return p.get("active")}),v=0,g=["getNodes","getEdges"];g.forEach(function(p){o[p]().forEach(function(y){var m=!1,w=p==="getNodes"?h:d;w.forEach(function(B){var E=a[B.get("id")];m=m||E(y.getModel())}),m?(o.setItemState(y,s,!1),o.setItemState(y,A,!0),v++):(o.setItemState(y,A,!1),o.setItemState(y,s,!0))})}),v||g.forEach(function(p){o[p]().forEach(function(y){o.clearItemStates(y,[s])})})}},e.prototype.clearFilter=function(){var t=this.get("graph"),n=this.get("filter");if(n){var a=n.graphActiveState||"active",i=n.graphInactiveState||"inactive";t.getNodes().forEach(function(o){t.clearItemStates(o,[a,i])}),t.getEdges().forEach(function(o){t.clearItemStates(o,[a,i])})}},e.prototype.render=function(){var t=this;this.processData();var n=this.get("legendCanvas");n?n.clear():n=new So({container:this.get("container"),width:200,height:200});var a=n.addGroup({name:"root"}),i=a.addGroup({name:"node-group"}),o=a.addGroup({name:"edge-group"});this.set("legendCanvas",n);var A=this.get("itemsData"),s=["nodes","edges"],u=[i,o];s.forEach(function(F,U){A[F].forEach(function(Q){var N,R=u[U].addGroup({id:Q.id,name:"node-container"}),J,re=Q.type,ee=t.getShapeSize(Q),q=ee.width,ve=ee.height,Me=ee.r,Re=t.getStyle(F.substr(0,4),Q);switch(Q.type){case"circle":J={r:Me,x:0,y:0};break;case"rect":J={width:q,height:ve,x:-q/2,y:-ve/2};break;case"ellipse":J={rx:q,ry:ve,x:0,y:0},re="ellipse";break;case"line":J={x1:-q/2,y1:0,x2:q/2,y2:0},re="line";break;case"quadratic":J={path:[["M",-q/2,0],["Q",0,q/2,q/2,0]]},re="path";break;case"cubic":J={path:[["M",-q/2,0],["C",-q/6,q/2,q/6,-q/2,q/2,0]]},re="path";break;case"diamond":J={path:[["M",0,-ve],["L",q,0],["L",0,ve],["L",-q,0],["Z"]]},re="path";break;case"triangle":J={path:[["M",-q,ve],["L",0,-ve],["L",q,ve],["Z"]]},re="path";break;case"star":J={path:Hn.getStarPath(Me*3,Me*1.2)},re="path";break;default:J={r:Me,x:0,y:0};break}var tt=R.addShape(re,{attrs:Ur(Ur({},J),Re),name:"".concat(Q.type,"-node-keyShape"),oriAttrs:Ur({opacity:1},Re)});if(Q.label){var st=tt.getBBox(),at=((N=Q.labelCfg)===null||N===void 0?void 0:N.style)||{},Et=Ur({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},at);R.addShape("text",{attrs:Ur({x:st.maxX+4,y:0,text:Q.label},Et),className:"legend-label",name:"".concat(Q.type,"-node-text"),oriAttrs:Et})}})});var f=this.get("padding"),l,c=a.find(function(F){return F.get("name")==="title-container"}),h={height:0,maxY:0,width:0};if(this.get("title")){c||(c=a.addGroup({name:"title-container"}));var d={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:f[0]},v=this.get("titleConfig")||{},g=Object.assign(d,v.style||{});l=c.addShape("text",{attrs:Ur({text:this.get("title")},g)}),h=c.getCanvasBBox(),c.setMatrix([1,0,0,0,1,0,v.offsetX,v.offsetY,1])}this.layoutItems();var p=a.getCanvasBBox(),y=i.getCanvasBBox(),m=y.minX<0?Math.abs(y.minX)+f[3]:f[3],w=h.maxY<y.minY?Math.abs(h.maxY-y.minY)+f[0]:h.maxY+f[0],B=[1,0,0,0,1,0,m,w,1];i.setMatrix(B),p=a.getCanvasBBox();var E=[p.minX+p.width+f[1],p.minY+p.height+f[2]];if(l){var v=Ur({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));h=c.getCanvasBBox();var b=c.getMatrix()||[1,0,0,0,1,0,0,0,1];v.position==="center"?b[6]=E[0]/2+v.offsetX:v.position==="right"?(b[6]=E[0]-f[3]+v.offsetX,l.attr({textAlign:"right"})):(b[6]=f[3]+v.offsetX,l.attr({textAlign:"left"})),c.setMatrix(b),h=c.getCanvasBBox(),m=y.minX<0?Math.abs(y.minX)+f[3]:f[3],w=y.minY<h.maxY?Math.abs(h.maxY-y.minY)+f[0]:h.maxY+f[0],B=[1,0,0,0,1,0,m,w,1],i.setMatrix(B);var C=[1,0,0,0,1,0,m,w,1];this.get("layout")==="vertical"?C[6]+=y.maxX+this.get("horiSep"):C[7]+=y.maxY+this.get("vertiSep"),o.setMatrix(C)}else{y=i.getCanvasBBox();var _=[1,0,0,0,1,0,0,0,1];this.get("layout")==="vertical"?_[6]+=B[6]+y.maxX+this.get("horiSep"):_[7]+=B[7]+y.maxY+this.get("vertiSep"),o.setMatrix(_)}p=a.getCanvasBBox(),y=i.getCanvasBBox(),B=i.getMatrix()||[1,0,0,0,1,0,0,0,1];var x=o.getMatrix()||[1,0,0,0,1,0,0,0,1],M=o.getCanvasBBox();E=[Math.max(y.width+B[6],M.width+x[6])+f[1],Math.max(y.height+B[7],M.height+x[7])+f[2]],n.changeSize(E[0],E[1]);var S=this.get("containerStyle"),I=a.getMatrix()||[1,0,0,0,1,0,0,0,1],D=Hn.invertMatrix({x:0,y:0},I),O=a.addShape("rect",{attrs:Ur({x:D.x+(S.lineWidth||1),y:D.y+(S.lineWidth||1),width:E[0]-2*(S.lineWidth||1),height:E[1]-2*(S.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},S),name:"legend-back-rect",capture:!1});return O.toBack(),E},e.prototype.layoutItems=function(){var t=this.get("legendCanvas"),n=this.get("horiSep"),a=this.get("vertiSep"),i=this.get("layout"),o=this.get("align"),A=[0,0],s=t.find(function(m){return m.get("name")==="root"}),u=s.find(function(m){return m.get("name")==="node-group"}),f=s.find(function(m){return m.get("name")==="edge-group"}),l={min:0,max:-1/0};u.get("children").forEach(function(m,w){w===0&&(l.min=A[0]);var B=m.get("children")[0],E=m.getCanvasBBox(),b=B.getBBox(),C=b.width,_=b.height,x=0,M=0;i==="vertical"?(x=A[1],M=A[0]+C/2,A[0]=M+E.height+a,E.maxX+x+C/2):(x=A[0]+C/2,M=A[1],A[0]=x+E.width+n,E.maxY+M+_/2),A[0]>l.max&&(l.max=A[0]),m.setMatrix([1,0,0,0,1,0,x,M,1])});var c=l.max-l.min,h={min:0,max:-1/0},d=u.getCanvasBBox();A[0]=0,A[1]=i==="vertical"?d.maxX+n:d.maxY+a,f.get("children").forEach(function(m,w){w===0&&(h.min=A[0]);var B=m.get("children")[0],E=m.getCanvasBBox(),b=B.getBBox(),C=b.width,_=b.height,x=0,M=0;i==="vertical"?(x=A[1],M=A[0],A[0]=M+E.height+a,m.setMatrix([1,0,0,0,1,0,0,M+_/2,1])):(x=A[0],M=A[1],A[0]=x+E.width+n,m.setMatrix([1,0,0,0,1,0,x+C/2,0,1])),A[0]>h.max&&(h.max=A[0])});var v=h.max-h.min;if(o&&o!==""&&o!=="left"){var g=c-v,p=o==="center"?Math.abs(g)/2:Math.abs(g),y=g<0?u:f;y.get("children").forEach(function(m){var w=m.getMatrix()||[1,0,0,0,1,0,0,0,1];i==="vertical"?w[7]+=p:w[6]+=p,m.setMatrix(w)})}},e.prototype.processData=function(){var t=this.get("data"),n={nodes:[],edges:[]};t.nodes&&(t.nodes.sort(function(a,i){return a.order-i.order}),t.nodes.forEach(function(a){var i,o,A,s,u,f=a.size||[((i=a.style)===null||i===void 0?void 0:i.width)||((o=a.style)===null||o===void 0?void 0:o.r)||8,((A=a.style)===null||A===void 0?void 0:A.height)||((s=a.style)===null||s===void 0?void 0:s.r)||8],l=((u=a.labelCfg)===null||u===void 0?void 0:u.style)||{};n.nodes.push({id:a.id||Yi(),type:a.type||"circle",style:Ur({},a.style),order:a.order,label:a.label,itemType:"node",size:f,labelCfg:{position:"right",style:Ur({fontFamily:"Arial"},l)}})})),t.edges&&(t.edges.sort(function(a,i){return a.order-i.order}),t.edges.forEach(function(a){var i,o,A=a.type||"line";a.type==="cubic-horizontal"&&(A="cubic");var s=((i=a.labelCfg)===null||i===void 0?void 0:i.style)||{},u=a.size||[((o=a.style)===null||o===void 0?void 0:o.width)||8,1];n.edges.push({id:a.id||Yi(),type:A,size:u,style:Ur({lineWidth:yt(u)?u[1]:1},a.style),order:a.order,label:a.label,itemType:"edge",labelCfg:{position:"right",style:Ur({fontFamily:"Arial"},s)}})})),this.set("itemsData",n)},e.prototype.getContainer=function(){return this.get("container")},e.prototype.formatArray=function(t){var n=this.get(t);if(vt(n))this.set(t,[n,n,n,n]);else if(yt(n))switch(n.length){case 0:this.set(t,[0,0,0,0]);break;case 1:this.set(t,[n[0],n[0],n[0],n[0]]);break;case 2:this.set(t,[n[0],n[1],n[0],n[1]]);break;case 3:this.set(t,[n[0],n[1],n[2],n[1]]);break}return this.get(t)},e.prototype.getShapeSize=function(t){var n,a,i;return t.size&&(yt(t.size)?(n=t.size[0],a=t.size[1]||t.size[0],i=t.size[0]/2):vt(t.size)&&(n=t.size,a=t.size,i=t.size/2)),t.style&&(t.style.width&&(n=t.style.width),t.style.height&&(a=t.style.height),t.style.r&&(i=t.style.r)),i||(i=5),n||(n=i),a||(a=i),{width:n,height:a,r:i}},e.prototype.getStyle=function(t,n){var a=t==="node"?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1};return Ur(Ur({},a),n.style||{})},e.prototype.destroy=function(){var t=this.get("legendCanvas");t==null||t.destroy();var n=this.get("graph"),a=n.get("container"),i=this.get("container");a.removeChild(i)},e}(ha);const m0e=y0e;var w0e=globalThis&&globalThis.__extends||function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=i[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Na=globalThis&&globalThis.__assign||function(){return Na=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},Na.apply(this,arguments)},lI=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(t[n[a]]=r[n[a]]);return t};typeof document<"u"&&_p(`
  .g6-annotation-container {
    background-color: rgba(255, 255, 255, 0.3);
    padding: 8px;
  }
  .g6-annotation-wrapper {
    background-color: #fff;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);
  }
  .g6-annotation-header-wapper {
    height: fit-content;
    width: 100%;
    background-color: #5B8FF9;
    display: inline-flex;
    cursor: move;
  }
  .g6-annotation-title {
    margin: 4px 40px 4px 8px;
    cursor: text;
    min-width: 32px;
  }
  .g6-annotation-collapse {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-expand {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-close {
    margin: 4px 8px 4px 0;
    cursor: pointer;
  }
  .g6-annotation-content {
    padding: 8px;
    width: fit-content;
    cursor: text;
    word-break: break-all;
    min-width: 32px;
  }
  .g6-annotation-title-input-wrapper {
    margin: 4px 40px 4px 8px;
  }
  .g6-annotation-content-input {
    height: 100%;
    word-break: break-all;
  }
  .g6-annotation-content-input-wrapper {
    margin: 8px;
    height: 100%;
  }
`);var cI="canvas-annotation",B0e=function(r){w0e(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},e.prototype.getEvents=function(){var t={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};switch(this.get("trigger")){case"click":t=Na(Na({},t),{"node:click":"showAnnotation","edge:click":"showAnnotation"})}return t},e.prototype.getDOMContent=function(t){if(!this.destroyed){var n=t.collapsed,a=t.maxWidth,i=t.title,o=i===void 0?"":i,A=t.content,s=A===void 0?"":A,u=t.borderRadius,f=u===void 0?5:u,l=n?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",c=n?"":" <p class='g6-annotation-content'>".concat(s,"</p>"),h="<p class='g6-annotation-close'>x</p>",d=n?"".concat(f,"px"):"".concat(f,"px ").concat(f,"px 0 0");return'<div class="g6-annotation-wrapper" style="border-radius: '.concat(f,"px; max-width: ").concat(a,`px">
        <div
          class="g6-annotation-header-wapper"
          style="border-radius: `).concat(d,`;"
        >
          <h4 class='g6-annotation-title'>`).concat(o,`</h4>
          `).concat(l,`
          `).concat(h,`
        </div>
        `).concat(c,`
      </div>`)}},e.prototype.init=function(){var t=this;if(!t.destroyed){var n=t.get("graph"),a=n.getContainer(),i=t.get("container"),o=this.get("containerCfg");o?(i=this.createContainer(),a.appendChild(i)):i=a,this.set("container",i);var A=a.getBoundingClientRect(),s=new So({container:a,width:A.right-A.left,height:A.bottom-A.top});Wt(s.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",Bc(function(){return t.resizeCanvas(t)},100));var u=s.addGroup({id:"annotation-link-group"});t.set("linkGroup",u),t.set("canvas",s),t.get("getTitle")||t.set("getTitle",function(l){var c,h=((c=l==null?void 0:l.getModel)===null||c===void 0?void 0:c.call(l))||{},d=h.label,v=h.id;return d||v||"-"}),t.get("getContent")||t.set("getContent",function(l){var c,h;if(!l)return"-";var d=((c=l.getModel)===null||c===void 0?void 0:c.call(l))||{},v=d.label,g=d.id,p=(h=l.getType)===null||h===void 0?void 0:h.call(l),y=p?"".concat(p,": "):"";return"".concat(y).concat(v||g||"")});var f=t.get("defaultData");f&&this.readData(f)}},e.prototype.createContainer=function(){var t=this;if(!this.destroyed){var n=this.get("containerCfg"),a=this.get("graph"),i=a.getContainer(),o=i.getBoundingClientRect(),A=o.left,s=o.right,u=o.top,f=o.bottom,l=f-u,c=s-A,h=n.position,d=h===void 0?"top":h,v=n.offsetX,g=v===void 0?0:v,p=n.offsetY,y=p===void 0?0:p,m=lI(n,["position","offsetX","offsetY"]),w=n.height,B=w===void 0?"fit-content":w,E=n.width,b=E===void 0?a.getWidth():E;B==="100%"&&(B=l),b==="100%"&&(b=c);var C="unset",_="unset",x={};switch(d){case"right":C="".concat(l,"px"),x={top:0,right:0},x.right+=A+g,x.top+=u+y;break;case"bottom":_="".concat(c,"px"),x={bottom:0,left:0},x.left+=A+g,x.bottom+=u+y;break;case"top":_="".concat(c,"px");case"left":C="".concat(l,"px");default:x={top:0,left:0},x.left+=A+g,x.top+=u+y;break}Object.keys(x).forEach(function(S){x[S]="".concat(x[S],"px")});var M=Sr("<div class='".concat(n.className," g6-annotation-container'></div>"));return Wt(M,Na(Na({position:"absolute",display:d==="top"||d==="bottom"?"inline-flex":"unset",width:vt(b)?"".concat(b,"px"):b,height:vt(B)?"".concat(B,"px"):B,maxHeight:C,maxWidth:_,overflow:"scroll"},x),m)),i.appendChild(M),M.addEventListener("scroll",function(S){t.updateLinks()}),M}},e.prototype.resizeCanvas=function(t){clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(function(){if(!(!t||t.destroyed)){var n=t.get("container").getBoundingClientRect(),a=n.right-n.left,i=n.bottom-n.top;t.get("canvas").changeSize(a,i),t.updateOutsideCards(t)}},250)},e.prototype.updateOutsideCards=function(t){var n=t||this,a=n.get("cardInfoMap")||{},i=n.get("graph"),o=i.getPointByCanvas(0,0),A=i.getPointByCanvas(i.getWidth(),i.getHeight()),s=i.getClientByPoint(o.x,o.y),u=s.x,f=s.y,l=i.getClientByPoint(A.x,A.y),c=l.x,h=l.y;Object.values(a).forEach(function(d){var v=d.card;if(v){var g=v.style,p=rs(g.left),y=rs(g.top),m=v.getBoundingClientRect(),w=m.width,B=m.height,E=p,b=y;p+w>c-u&&(E=c-u-w),p<0&&(E=0),y+B>h-f&&(b=h-f-B),y<0&&(b=0),Wt(v,{left:"".concat(E,"px"),top:"".concat(b,"px")})}}),n.updateLinks()},e.prototype.showAnnotation=function(t){if(!this.destroyed){var n=t.item;this.toggleAnnotation(n)}},e.prototype.hideCards=function(){var t=this;if(!t.destroyed){var n=t.get("cardInfoMap")||{};Object.keys(n).forEach(function(a){t.hideCard(a)})}},e.prototype.toggleAnnotation=function(t,n){var a,i;n===void 0&&(n={});var o=this;if(!o.destroyed){var A=o.get("cardInfoMap")||{},s=o.get("graph"),u=o.get("container"),f=o.get("containerCfg"),l=Object.assign({},o.get("cardCfg")||{},n),c=l.minHeight,h=l.minWidth,d=l.width,v=l.height,g=l.collapsed,p=g===void 0?!1:g,y=l.x,m=l.y,w=l.title,B=l.content,E=l.maxTitleLength,b=l.defaultBegin,C=lI(l,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),_=o.get("linkGroup"),x=this.get("rows")||[[]],M=(a=t.isCanvas)===null||a===void 0?void 0:a.call(t),S=M?cI:t.getID(),I=A[S]||{},D=I.card,O=I.link,F=I.x,U=I.y,Q=I.title,N=I.content,R=this.get("getTitle"),J=this.get("getContent"),re=this.get("getContentPlaceholder")||function(){return""},ee=this.get("getTitlePlaceHolder")||function(){return""},q=re(t),ve=ee(t),Me=Sr(this.getDOMContent(Na({itemId:S,collapsed:p,title:((i=Q||w||(R==null?void 0:R(t)))===null||i===void 0?void 0:i.substr(0,E))||ve,content:N||B||(J==null?void 0:J(t))||q},C))),Re=vt(c)?"".concat(c,"px"):c;Wt(Me,{minHeight:p?"unset":Re,minWidth:vt(h)?"".concat(h,"px"):h,height:v,width:d});var tt=!!D;tt?(O==null||O.remove(!0),u.replaceChild(Me,D)):u.appendChild(Me);var st;if(!f){if(st=u.getBoundingClientRect()||{},y!==void 0&&m!==void 0)F=y,U=m;else if(!tt&&!M){var at=st.top,Et=b||{},bt=Et.left,fr=Et.right,Qt=fr===void 0?16:fr,Kt=Et.top,gr=Kt===void 0?8:Kt,lr=Et.bottom,Ht=Qt,tr=gr;isNaN(bt)||(Ht=u.scrollWidth-bt),isNaN(lr)||(tr=u.scrollHeight-lr);var Kr=vt(h)?h:100;F=u.scrollWidth-Me.scrollWidth-(x.length-1)*Kr-Ht;var et=x[x.length-1],ae=(et[et.length-1]||{}).bbox;U=(ae==null?void 0:ae.bottom)-at||tr}Wt(Me,{position:"absolute",left:"".concat(F,"px"),top:"".concat(U,"px"),cusor:f?"unset":"move"})}this.bindListener(Me,S);var L=Me.getBoundingClientRect();if(!M){var be=rm(t,L,s,this.get("canvas")),Ne=this.get("linkStyle");O=_.addShape("path",{attrs:Na({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:be},Ne)})}if(A[S]=Na(Na({},A[S]||{}),{id:S,collapsed:p,card:Me,link:O,x:F,y:U,cardBBox:L,content:N||B,title:Q||w,contentPlaceholder:q,titlePlaceholder:ve,isCanvas:M}),o.set("cardInfoMap",A),f)this.updateCardPositionsInConatainer(),this.updateLinks();else{var pe=!isNaN(y)&&!isNaN(m);if(!tt&&!M&&!pe){var ze=st.bottom,Ke=ze===void 0?0:ze,at=st.top;x[x.length-1].push({id:S,bbox:L}),L.top>Ke-at-L.height-16&&x.push([]),this.set("rows",x)}}this.updateCardSize(S);var Xe=this.get("onAnnotationChange");Xe==null||Xe(A[S],tt?"update":"create")}},e.prototype.updateCardPositionsInConatainer=function(){if(!this.destroyed){var t=this.get("cardInfoMap");if(t){var n=this.get("container"),a=this.get("containerCfg").position,i=n.getBoundingClientRect().width,o=getComputedStyle(n),A=rs(o.paddingLeft)+rs(o.paddingRight);i-=A,Object.values(t).forEach(function(s){var u=s.card,f=u.getBoundingClientRect().width;switch(a){case"right":Wt(u,{marginLeft:i?"".concat(i-f,"px"):"0px"});break;case"top":case"bottom":Wt(u,{marginLeft:"8px"})}})}}},e.prototype.handleExpandCollapseCard=function(t){if(!this.destroyed){var n=this.get("graph"),a=this.get("cardInfoMap");if(a){var i=a[t].collapsed,o=n.findById(t);if(o){var A=this.get("cardCfg").collapseType;A==="hide"&&!i?this.hideCard(t):this.toggleAnnotation(o,{collapsed:!i}),a[t]=Na(Na({},a[t]),{collapsed:!i})}}}},e.prototype.hideCard=function(t){if(!this.destroyed){var n=this.get("cardInfoMap");if(!(!n||!n[t])){var a=n[t],i=a.card,o=a.link;Wt(i,{display:"none"}),o==null||o.hide();var A=this.get("onAnnotationChange");A(n[t],"hide")}}},e.prototype.removeCard=function(t){if(!this.destroyed){var n=this.get("cardInfoMap");if(n){var a=n[t],i=a.card,o=a.link,A=this.get("container");A.removeChild(i),o==null||o.remove(!0),delete n[t];var s=this.get("onAnnotationChange");s(a,"remove")}}},e.prototype.bindListener=function(t,n){var a=this;if(!this.destroyed){t.addEventListener("mousemove",function(s){var u;if(s.target.className==="g6-annotation-collapse"?u="collapse":s.target.className==="g6-annotation-expand"?u="expand":s.target.className==="g6-annotation-close"&&(u="close"),u){var f=a.get("cardCfg").onMouseEnterIcon,l=f===void 0?function(){}:f;l(s,n,u)}}),t.addEventListener("mouseout",function(s){var u;if(s.target.className==="g6-annotation-collapse"?u="collapse":s.target.className==="g6-annotation-expand"?u="expand":s.target.className==="g6-annotation-close"&&(u="close"),u){var f=a.get("cardCfg").onMouseLeaveIcon,l=f===void 0?function(){}:f;l(s,n,u)}}),t.addEventListener("mouseenter",function(s){var u=a.get("cardInfoMap");if(u){var f=a.get("graph"),l=f.findById(n);if(l){var c=a.get("itemHighlightState");f.setItemState(l,c,!0)}var h=u[n].link;if(h){var d=a.get("linkHighlightStyle")||{};h.attr(d)}}}),t.addEventListener("mouseleave",function(s){var u=a.get("cardInfoMap");if(u){var f=a.get("graph"),l=f.findById(n);if(l){var c=a.get("itemHighlightState");f.setItemState(l,c,!1)}var h=u[n].link;if(h){var d=a.get("linkHighlightStyle")||{};Object.keys(d).forEach(function(g){h.attr(g,void 0),h.attr(g,void 0)});var v=a.get("linkStyle");h.attr(v)}}}),t.addEventListener("click",function(s){var u=(a.get("cardCfg")||{}).onClickIcon;if(s.target.className==="g6-annotation-collapse"||s.target.className==="g6-annotation-expand"){var f=a.get("cardCfg").collapseType;f==="hide"?a.hideCard(n):a.handleExpandCollapseCard(n),u==null||u(s,n,s.target.className==="g6-annotation-collapse"?"collapse":"expand")}else if(s.target.className==="g6-annotation-close"){var l=a.get("cardCfg").closeType;l==="remove"?a.removeCard(n):a.hideCard(n),u==null||u(s,n,"close")}});var i=this.get("editable");i&&t.addEventListener("dblclick",function(s){var u=a.get("cardInfoMap"),f=(a.get("cardCfg")||{}).maxTitleLength,l=f===void 0?20:f;if(u){var c=s.target,h=c.className;if(!(h!=="g6-annotation-title"&&h!=="g6-annotation-content")){var d=h==="g6-annotation-title"?c.getBoundingClientRect():c.parentNode.getBoundingClientRect(),v=d.width,g=d.height,p=getComputedStyle(c),y=h==="g6-annotation-title"?"input":"textarea",m=Sr("<".concat(y,' class="').concat(h,'-input" type="textarea" style="width:').concat(v,"px; height: ").concat(g,'px; min-width: 16px;"/>')),w=Sr('<div class="'.concat(h,'-input-wrapper" style="width: ').concat(v,"px; height: ").concat(g,"px; min-width: 16px; margin-right: ").concat(p.marginRight,'" />'));w.appendChild(m),c.parentNode.replaceChild(w,c);var B=u[n],E=B.contentPlaceholder,b=B.titlePlaceholder,C=B.content,_=B.title,x=C;h==="g6-annotation-title"?(m.name="title",m.maxLength=l,x=_):m.name="content",x?(m.innerHTML=c.innerHTML,m.value=c.innerHTML):m.placeholder=h==="g6-annotation-title"?b:E,m.focus(),m.addEventListener("blur",function(M){m.value&&(c.innerHTML=m.value,B[m.name||"title"]=m.value),w.parentNode.replaceChild(c,w),a.updateCardSize(n);var S=a.get("onAnnotationChange");S==null||S(B,"update")})}}});var o=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"];t.draggable=!0,t.addEventListener("dragstart",function(s){var u=s.target.className;if(!o.includes(u)){var f=t.style;a.set("dragging",{card:t,x:s.clientX,y:s.clientY,left:rs(f.left),top:rs(f.top)})}}),t.addEventListener("drag",function(s){s.preventDefault();var u=a.get("cardInfoMap");if(u){var f=s.clientX,l=s.clientY,c=a.get("dragging");if(!(isNaN(f)||isNaN(l)||!c)){var h=c.x,d=c.y,v=c.left,g=c.top,p=c.card,y=f-h,m=l-d;v+=y,g+=m;var w=a.get("graph"),B=w.getPointByCanvas(0,0),E=w.getPointByCanvas(w.getWidth(),w.getHeight()),b=w.getClientByPoint(B.x,B.y),C=b.x,_=b.y,x=w.getClientByPoint(E.x,E.y),M=x.x,S=x.y,I=p.getBoundingClientRect(),D=I.right-I.left,O=I.bottom-I.top;(v>M-C-D&&y>0||v<0&&y<0)&&(v-=y),(g>S-_-O&&m>0||g<0&&m<0)&&(g-=m),Wt(p,{left:"".concat(v,"px"),top:"".concat(g,"px"),visibility:"hidden"}),h=f,d=l;var F=(u[n]||{}).link;if(F){var U=w.findById(n);F.attr("path",rm(U,I,w,a.get("canvas")))}a.set("dragging",{x:h,y:d,left:v,top:g,card:p})}}});var A=function(u){var f=a.get("cardInfoMap");if(f){var l=a.get("dragging");if(l){var c=l.left,h=l.top,d=l.card;f[n].x=c,f[n].y=h,Wt(d,{visibility:"visible"}),a.set("dragging",!1);var v=a.get("rows");v==null||v.forEach(function(p){for(var y=p.length-1;y>=0;y--)p[y].id===n&&p.splice(y,1)});var g=a.get("onAnnotationChange");g==null||g(f[n],"update")}}};t.addEventListener("dragend",A)}},e.prototype.updateCardSize=function(t){var n=this.get("cardInfoMap");if(n){var a=n[t].card,i=a.getBoundingClientRect().width,o=a.getElementsByClassName("g6-annotation-title")[0];if(o){var A=getComputedStyle(o),s=rs(A.marginLeft),u=o.getBoundingClientRect().width;Wt(o,{marginRight:"".concat(i-s-24-16-u,"px")})}}},e.prototype.updateLink=function(t){var n=t.item;if(n){var a=this.get("cardInfoMap");if(a){var i=this.get("canvas"),o=this.get("graph"),A=n.getID(),s=a[A]||{},u=s.link,f=s.card;if(u){var l=rm(n,f.getBoundingClientRect(),o,i);u.attr("path",l)}}}},e.prototype.updateLinks=function(){var t=this;if(!this.destroyed){var n=this.get("cardInfoMap");if(n){var a=this.get("graph");Object.values(n).forEach(function(i){var o=i.id,A=a.findById(o);t.updateLink({item:A})})}}},e.prototype.onGraphDataChange=function(){var t=this,n=this.get("cardInfoMap");if(n){var a=this.get("graph");Object.values(n).forEach(function(i){var o=i.id,A=i.card,s=i.isCanvas;if(!(!A||s||A.style.display==="none")){var u=a.findById(o);u&&u.isVisible()?t.toggleAnnotation(u):t.hideCard(o)}})}},e.prototype.onGraphItemVisibilityChange=function(t){var n=t.item,a=t.visible;if(!(!n||n.destroyed)){var i=this.get("cardInfoMap");if(i){var o=n.getID();i[o]&&(a||this.hideCard(o))}}},e.prototype.saveData=function(t){t===void 0&&(t=!1);var n=this.get("cardInfoMap");if(n){var a=this.get("graph"),i=this.get("getTitle"),o=this.get("getContent"),A=[];return Object.values(n).forEach(function(s){var u=s.title,f=s.content,l=s.x,c=s.y,h=s.id,d=s.collapsed,v=s.card;if(!(v&&v.style.display==="none"&&!t)){var g=a.findById(h)||a.get("canvas");A.push({id:h,x:l,y:c,collapsed:d,title:u||(i==null?void 0:i(g)),content:f||(o==null?void 0:o(g)),visible:v&&v.style.display!=="none"})}}),A}},e.prototype.readData=function(t){var n=this,a=this.get("graph");t.forEach(function(i){var o=i.id,A=i.x,s=i.y,u=i.title,f=i.content,l=i.collapsed,c=i.visible,h=a.findById(o);if(!h&&o===cI&&(h=a.get("canvas")),!h){var d=n.get("cardInfoMap")||{};d[o]=i,n.set("cardInfoMap",d);return}n.toggleAnnotation(h,{x:A,y:s,title:u,content:f,collapsed:l}),c||n.hideCard(o)})},e.prototype.clear=function(){var t=this.get("cardInfoMap");if(t){var n=this.get("container");Object.values(t).forEach(function(a){var i=a.card,o=a.link;n.removeChild(i),o==null||o.remove(!0)}),this.set("cardInfoMap",{})}},e.prototype.destroy=function(){var t;this.clear(),(t=this.get("canvas"))===null||t===void 0||t.destroy();var n=this.get("graph");!n||n.destroyed||(this.get("containerCfg")&&n.getContainer().removeChild(this.get("container")),this.destroyed=!0)},e}(ha);const E0e=B0e;var b0e=function(e,t){var n,a,i=1/0;Object.keys(e).forEach(function(s){var u=e[s];Object.keys(t).forEach(function(f){var l=t[f],c=u.x-l.x,h=u.y-l.y,d=c*c+h*h;i>d&&(i=d,n=u,a=l)})});var o=20,A=Hn.getControlPoint(n,a,.5,o);return[["M",n.x,n.y],["Q",A.x,A.y,a.x,a.y]]},rm=function(e,t,n,a){var i,o,A=e.getType();if(A==="edge")o=[e.getKeyShape().getPoint(.5)];else{var s=(i=e.getKeyShape)===null||i===void 0?void 0:i.call(e).getBBox(),u=s.minX,f=s.minY,l=s.maxX,c=s.maxY,h=e.getModel(),d=h.x,v=h.y;u+=d,f+=v,l+=d,c+=v,o={left:{x:u,y:(f+c)/2},right:{x:l,y:(f+c)/2},top:{x:(u+l)/2,y:f},bottom:{x:(u+l)/2,y:c}}}Object.keys(o).forEach(function(_){var x=o[_],M=x.x,S=x.y,I=n.getClientByPoint(M,S);o[_]=a.getPointByClient(I.x,I.y)});var g=t.top,p=g===void 0?0:g,y=t.left,m=y===void 0?0:y,w=t.right,B=w===void 0?0:w,E=t.bottom,b=E===void 0?0:E,C={left:a.getPointByClient(m,(p+b)/2),right:a.getPointByClient(B,(p+b)/2),top:a.getPointByClient((m+B)/2,p),bottom:a.getPointByClient((m+B)/2,b)};return b0e(o,C)},rs=function(e){return Number(e.replace(/\s+|px/gi,""))||0},x0e={PluginBase:ha,Menu:$ve,Grid:Rve,Minimap:Jve,Bundling:nge,ToolBar:fge,Tooltip:hge,Fisheye:oge,TimeBar:t0e,ImageMinimap:o0e,EdgeFilterLens:f0e,SnapLine:v0e,Legend:m0e,Annotation:E0e};const fn=x0e;ko("circle",{options:{size:qe.defaultNode.size,style:{x:0,y:0,stroke:qe.defaultNode.style.stroke,fill:qe.defaultNode.style.fill,lineWidth:qe.defaultNode.style.lineWidth},labelCfg:{style:{fill:qe.nodeLabel.style.fill,fontSize:qe.nodeLabel.style.fontSize,fontFamily:qe.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:qe.defaultNode.linkPoints.size,lineWidth:qe.defaultNode.linkPoints.lineWidth,fill:qe.defaultNode.linkPoints.fill,stroke:qe.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:P({},qe.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).icon,a=n===void 0?{}:n,i=this.getShapeStyle(e),o=br({},a,e.icon),A="".concat(this.type,"-keyShape"),s=t.addShape("circle",{attrs:i,className:A,name:A,draggable:!0});t.shapeMap[A]=s;var u=o.width,f=o.height,l=o.show,c=o.text;if(l){var h="".concat(this.type,"-icon");c?t.shapeMap[h]=t.addShape("text",{attrs:P({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:h,name:h,draggable:!0}):t.shapeMap[h]=t.addShape("image",{attrs:P({x:-u/2,y:-f/2},o),className:h,name:h,draggable:!0})}return this.drawLinkPoints(e,t),s},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints;if(n){var a=n||{},i=a.top,o=a.left,A=a.right,s=a.bottom,u=a.size,f=a.r,l=mn(a,["top","left","right","bottom","size","r"]),c=this.getSize(e),h=c[0]/2;if(o){var d="link-point-left";t.shapeMap[d]=t.addShape("circle",{attrs:P(P({},l),{x:-h,y:0,r:u/2||f||5}),className:d,name:d,isAnchorPoint:!0})}if(A){var v="link-point-right";t.shapeMap[v]=t.addShape("circle",{attrs:P(P({},l),{x:h,y:0,r:u/2||f||5}),className:v,name:v,isAnchorPoint:!0})}if(i){var g="link-point-top";t.shapeMap[g]=t.addShape("circle",{attrs:P(P({},l),{x:0,y:-h,r:u/2||f||5}),className:g,name:g,isAnchorPoint:!0})}if(s){var p="link-point-bottom";t.shapeMap[p]=t.addShape("circle",{attrs:P(P({},l),{x:0,y:h,r:u/2||f||5}),className:p,name:p,isAnchorPoint:!0})}}},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},a=br({},t,n),i=this.getSize(e),o=i[0]/2,A=P({x:0,y:0,r:o},a);return A},update:function(e,t,n){var a=t.getContainer(),i=this.getSize(e),o=P({},e.style);e.style.stroke===void 0&&e.color&&(o.stroke=e.color),e.style.r===void 0&&!isNaN(i[0])&&(o.r=i[0]/2),this.updateShape(e,t,o,!0,n),this.updateLinkPoints(e,a)}},"single-node");ko("rect",{options:{size:[100,30],style:{radius:0,stroke:qe.defaultNode.style.stroke,fill:qe.defaultNode.style.fill,lineWidth:qe.defaultNode.style.lineWidth},labelCfg:{style:{fill:qe.nodeLabel.style.fill,fontSize:qe.nodeLabel.style.fontSize,fontFamily:qe.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:qe.defaultNode.linkPoints.size,lineWidth:qe.defaultNode.linkPoints.lineWidth,fill:qe.defaultNode.linkPoints.fill,stroke:qe.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:P({},qe.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(e,t){var n=this.getShapeStyle(e),a=t.addShape("rect",{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return t.shapeMap["".concat(this.type,"-keyShape")]=a,this.drawLinkPoints(e,t),a},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,a=n===void 0?{}:n,i=a.top,o=a.left,A=a.right,s=a.bottom,u=a.size,f=a.r,l=mn(a,["top","left","right","bottom","size","r"]),c=this.getSize(e),h=c[0],d=c[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:P(P({},l),{x:-h/2,y:0,r:u/2||f||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),A&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:P(P({},l),{x:h/2,y:0,r:u/2||f||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:P(P({},l),{x:0,y:-d/2,r:u/2||f||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:P(P({},l),{x:0,y:d/2,r:u/2||f||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},a=mt({},t,n),i=this.getSize(e),o=a.width||i[0],A=a.height||i[1],s=P({x:-o/2,y:-A/2,width:o,height:A},a);return s},update:function(e,t,n){var a=t.getContainer(),i=this.getOptions({}).style,o=this.getSize(e),A=t.get("keyShape");e.size||(o[0]=A.attr("width")||i.width,o[1]=A.attr("height")||i.height);var s={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},u=mt({},i,A.attr(),s);u=mt(u,e.style),this.updateShape(e,t,u,!1,n),this.updateLinkPoints(e,a)}},"single-node");ko("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:qe.defaultNode.style.stroke,fill:qe.defaultNode.style.fill,lineWidth:qe.defaultNode.style.lineWidth},labelCfg:{style:{fill:qe.nodeLabel.style.fill,fontSize:qe.nodeLabel.style.fontSize,fontFamily:qe.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:qe.defaultNode.linkPoints.size,lineWidth:qe.defaultNode.linkPoints.lineWidth,fill:qe.defaultNode.linkPoints.fill,stroke:qe.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:P({},qe.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).icon,a=n===void 0?{}:n,i=this.getShapeStyle(e),o=t.addShape("ellipse",{attrs:i,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});t.shapeMap["ellipse-keyShape"]=o;var A=a.width,s=a.height,u=a.show,f=a.text;return u&&(f?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:P({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:P({x:-A/2,y:-s/2},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,a=n===void 0?{}:n,i=a.top,o=a.left,A=a.right,s=a.bottom,u=a.size,f=a.r,l=mn(a,["top","left","right","bottom","size","r"]),c=this.getSize(e),h=c[0]/2,d=c[1]/2;o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:P(P({},l),{x:-h,y:0,r:u/2||f||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),A&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:P(P({},l),{x:h,y:0,r:u/2||f||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:P(P({},l),{x:0,y:-d,r:u/2||f||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:P(P({},l),{x:0,y:d,r:u/2||f||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},a=mt({},t,n),i=this.getSize(e),o=i[0]/2,A=i[1]/2,s=P({x:0,y:0,rx:o,ry:A},a);return s},update:function(e,t,n){var a=t.getContainer(),i=this.getOptions({}).style,o=this.getSize(e),A={stroke:e.color,rx:o[0]/2,ry:o[1]/2},s=t.get("keyShape"),u=mt({},i,s.attr(),A);u=mt(u,e.style),this.updateShape(e,t,u,!0,n),this.updateLinkPoints(e,a)}},"single-node");ko("diamond",{options:{size:[80,80],style:{stroke:qe.defaultNode.style.stroke,fill:qe.defaultNode.style.fill,lineWidth:qe.defaultNode.style.lineWidth},labelCfg:{style:{fill:qe.nodeLabel.style.fill,fontSize:qe.nodeLabel.style.fontSize,fontFamily:qe.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:qe.defaultNode.linkPoints.size,lineWidth:qe.defaultNode.linkPoints.lineWidth,fill:qe.defaultNode.linkPoints.fill,stroke:qe.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:P({},qe.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).icon,a=n===void 0?{}:n,i=this.getShapeStyle(e),o=t.addShape("path",{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var A=a.width,s=a.height,u=a.show,f=a.text;return u&&(f?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:P({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:P({x:-A/2,y:-s/2},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,a=n===void 0?{}:n,i=a.top,o=a.left,A=a.right,s=a.bottom,u=a.size,f=a.r,l=mn(a,["top","left","right","bottom","size","r"]),c=this.getSize(e),h=c[0],d=c[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:P(P({},l),{x:-h/2,y:0,r:u/2||f||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),A&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:P(P({},l),{x:h/2,y:0,r:u/2||f||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:P(P({},l),{x:0,y:-d/2,r:u/2||f||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:P(P({},l),{x:0,y:d/2,r:u/2||f||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(e){var t=this.getSize(e),n=t[0],a=t[1],i=[["M",0,-a/2],["L",n/2,0],["L",0,a/2],["L",-n/2,0],["Z"]];return i},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},a=mt({},t,n),i=this.getPath(e),o=P({path:i},a);return o},update:function(e,t,n){var a=t.getContainer(),i=this.getOptions({}).style,o=this.getPath(e),A={stroke:e.color,path:o},s=t.get("keyShape"),u=mt({},i,s.attr(),A);u=mt(u,e.style),this.updateShape(e,t,u,!0,n),this.updateLinkPoints(e,a)}},"single-node");ko("triangle",{options:{size:40,direction:"up",style:{stroke:qe.defaultNode.style.stroke,fill:qe.defaultNode.style.fill,lineWidth:qe.defaultNode.style.lineWidth},labelCfg:{style:{fill:qe.nodeLabel.style.fill,fontSize:qe.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:qe.defaultNode.linkPoints.size,lineWidth:qe.defaultNode.linkPoints.lineWidth,fill:qe.defaultNode.linkPoints.fill,stroke:qe.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:P({},qe.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(e,t){var n=this.mergeStyle||this.getOptions(e),a=n.icon,i=a===void 0?{}:a,o=n.direction,A=this.getShapeStyle(e),s=e.direction||o,u=t.addShape("path",{attrs:A,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=u;var f=i.width,l=i.height,c=i.show,h=i.offset,d=i.text;if(c)if(d)t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:P({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0});else{var v=-f/2,g=-l/2;(s==="up"||s==="down")&&(g+=h),(s==="left"||s==="right")&&(v+=h),t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:P({x:v,y:g},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})}return this.drawLinkPoints(e,t),u},drawLinkPoints:function(e,t){var n=this.mergeStyle||this.getOptions(e),a=n.linkPoints,i=a===void 0?{}:a,o=n.direction,A=e.direction||o,s=i.top,u=i.left,f=i.right,l=i.bottom,c=i.size,h=i.r,d=mn(i,["top","left","right","bottom","size","r"]),v=this.getSize(e),g=v[0];if(u){var p=null,y=g*Math.sin(1/3*Math.PI),m=g*Math.sin(1/3*Math.PI);A==="up"?p=[-m,y]:A==="down"?p=[-m,-y]:A==="left"&&(p=[-m,m-y]),p&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:P(P({},d),{x:p[0],y:p[1],r:c/2||h||5}),className:"link-point-left",name:"link-point-left"}))}if(f){var w=null,y=g*Math.sin(1/3*Math.PI),m=g*Math.sin(1/3*Math.PI);A==="up"?w=[m,y]:A==="down"?w=[m,-y]:A==="right"&&(w=[m,m-y]),w&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:P(P({},d),{x:w[0],y:w[1],r:c/2||h||5}),className:"link-point-right",name:"link-point-right"}))}if(s){var B=null,y=g*Math.sin(1/3*Math.PI),m=g*Math.sin(1/3*Math.PI);A==="up"?B=[m-y,-y]:A==="left"?B=[m,-y]:A==="right"&&(B=[-m,-y]),B&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:P(P({},d),{x:B[0],y:B[1],r:c/2||h||5}),className:"link-point-top",name:"link-point-top"}))}if(l){var E=null,y=g*Math.sin(1/3*Math.PI),m=g*Math.sin(1/3*Math.PI);A==="down"?E=[-m+y,y]:A==="left"?E=[m,y]:A==="right"&&(E=[-m,y]),E&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:P(P({},d),{x:E[0],y:E[1],r:c/2||h||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(e){var t=(this.mergeStyle||this.getOptions(e)).direction,n=e.direction||t,a=this.getSize(e),i=a[0],o=i*Math.sin(1/3*Math.PI),A=i*Math.sin(1/3*Math.PI),s=[["M",-A,o],["L",0,-o],["L",A,o],["Z"]];return n==="down"?s=[["M",-A,-o],["L",A,-o],["L",0,o],["Z"]]:n==="left"?s=[["M",-A,A-o],["L",A,-A],["L",A,A],["Z"]]:n==="right"&&(s=[["M",A,A-o],["L",-A,A],["L",-A,-A],["Z"]]),s},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},a=mt({},t,n),i=this.getPath(e),o=P({path:i},a);return o},update:function(e,t,n){var a=t.getContainer(),i=this.getOptions({}).style,o=this.getPath(e),A={stroke:e.color,path:o},s=t.get("keyShape"),u=mt({},i,s.attr(),A);u=mt(u,e.style),this.updateShape(e,t,u,!0,n),this.updateLinkPoints(e,a)},updateLinkPoints:function(e,t){var n=this.getOptions({}),a=n.linkPoints,i=n.direction,o=e.direction||i,A=t.shapeMap["link-point-left"]||t.find(function(F){return F.get("className")==="link-point-left"}),s=t.shapeMap["link-point-right"]||t.find(function(F){return F.get("className")==="link-point-right"}),u=t.shapeMap["link-point-top"]||t.find(function(F){return F.get("className")==="link-point-top"}),f=t.shapeMap["link-point-bottom"]||t.find(function(F){return F.get("className")==="link-point-bottom"}),l=a,c=A||s||u||f;c&&(l=c.attr());var h=mt({},l,e.linkPoints),d=h.fill,v=h.stroke,g=h.lineWidth,p=h.size/2;p||(p=h.r);var y=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},m=y.left,w=y.right,B=y.top,E=y.bottom,b=this.getSize(e),C=b[0],_={r:p,fill:d,stroke:v,lineWidth:g},x=null,M=C*Math.sin(1/3*Math.PI),S=C*Math.sin(1/3*Math.PI);o==="up"?x=[-S,M]:o==="down"?x=[-S,-M]:o==="left"&&(x=[-S,S-M]),x&&(A?!m&&m!==void 0?(A.remove(),delete t.shapeMap["link-point-left"]):A.attr(P(P({},_),{x:x[0],y:x[1]})):m&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:P(P({},_),{x:x[0],y:x[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var I=null;o==="up"?I=[S,M]:o==="down"?I=[S,-M]:o==="right"&&(I=[S,S-M]),I&&(s?!w&&w!==void 0?(s.remove(),delete t.shapeMap["link-point-right"]):s.attr(P(P({},_),{x:I[0],y:I[1]})):w&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:P(P({},_),{x:I[0],y:I[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var D=null;o==="up"?D=[S-M,-M]:o==="left"?D=[S,-M]:o==="right"&&(D=[-S,-M]),D&&(u?!B&&B!==void 0?(u.remove(),delete t.shapeMap["link-point-top"]):u.attr(P(P({},_),{x:D[0],y:D[1]})):B&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:P(P({},_),{x:D[0],y:D[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var O=null;o==="down"?O=[-S+M,M]:o==="left"?O=[S,M]:o==="right"&&(O=[-S,M]),O&&(f?!E&&E!==void 0?(f.remove(),delete t.shapeMap["link-point-bottom"]):f.attr(P(P({},_),{x:O[0],y:O[1]})):E&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:P(P({},_),{x:O[0],y:O[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node");ko("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:qe.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:qe.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:qe.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).preRect,a=n===void 0?{}:n,i=this.getShapeStyle(e),o=this.getSize(e),A=o[0],s=o[1],u=t.addShape("rect",{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=u;var f=a.show,l=mn(a,["show"]);return f&&(t.shapeMap["pre-rect"]=t.addShape("rect",{attrs:P({x:-A/2,y:-s/2,height:s},l),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(e,t),this.drawStateIcon(e,t),this.drawLinkPoints(e,t),u},drawLogoIcon:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).logoIcon,a=n===void 0?{}:n,i=this.getSize(e),o=i[0];if(a.show){var A=a.width,s=a.height,u=a.x,f=a.y,l=a.offset,c=a.text,h=mn(a,["width","height","x","y","offset","text"]);c?t.shapeMap["rect-logo-icon"]=t.addShape("text",{attrs:P({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},h),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):t.shapeMap["rect-logo-icon"]=t.addShape("image",{attrs:P(P({},h),{x:u||-o/2+A+l,y:f||-s/2,width:A,height:s}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).stateIcon,a=n===void 0?{}:n,i=this.getSize(e),o=i[0];if(a.show){var A=a.width,s=a.height,u=a.x,f=a.y,l=a.offset,c=a.text,h=mn(a,["width","height","x","y","offset","text"]);c?t.shapeMap["rect-state-icon"]=t.addShape("text",{attrs:P({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},h),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):t.shapeMap["rect-state-icon"]=t.addShape("image",{attrs:P(P({},h),{x:u||o/2-A+l,y:f||-s/2,width:A,height:s}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,a=n===void 0?{}:n,i=a.top,o=a.left,A=a.right,s=a.bottom,u=a.size,f=a.r,l=mn(a,["top","left","right","bottom","size","r"]),c=this.getSize(e),h=c[0],d=c[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:P(P({},l),{x:-h/2,y:0,r:u/2||f||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),A&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:P(P({},l),{x:h/2,y:0,r:u/2||f||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:P(P({},l),{x:0,y:-d/2,r:u/2||f||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:P(P({},l),{x:0,y:d/2,r:u/2||f||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(e,t){var n=this.getOptions(e),a=n.labelCfg,i=a===void 0?{}:a,o=n.logoIcon,A=o===void 0?{}:o,s=n.descriptionCfg,u=s===void 0?{}:s,f=this.getSize(e),l=f[0],c=null,h=A.show,d=A.width,v=-l/2+i.offset;h&&(v=-l/2+d+i.offset);var g=i.style,p=u.style,y=u.paddingTop;return Oe(e.description)?(c=t.addShape("text",{attrs:P(P({},g),{x:v,y:-5,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=c,t.shapeMap["rect-description"]=t.addShape("text",{attrs:P(P({},p),{x:v,y:17+(y||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(c=t.addShape("text",{attrs:P(P({},g),{x:v,y:7,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=c),c},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},a=mt({},t,n),i=this.getSize(e),o=a.width||i[0],A=a.height||i[1],s=P({x:-o/2,y:-A/2,width:o,height:A},a);return s},update:function(e,t){var n=this.mergeStyle||this.getOptions(e),a=n.style,i=a===void 0?{}:a,o=n.labelCfg,A=o===void 0?{}:o,s=n.descriptionCfg,u=s===void 0?{}:s,f=this.getSize(e),l=f[0],c=f[1],h=t.get("keyShape");h.attr(P(P({},i),{x:-l/2,y:-c/2,width:l,height:c}));var d=t.getContainer(),v=d.shapeMap["rect-logo-icon"]||d.find(function(Me){return Me.get("className")==="rect-logo-icon"}),g=v?v.attr():{},p=mt({},g,e.logoIcon),y=p.width;y===void 0&&(y=this.options.logoIcon.width);var m=e.logoIcon?e.logoIcon.show:void 0,w=A.offset,B=-l/2+y+w;!m&&m!==void 0&&(B=-l/2+w);var E=d.shapeMap["node-label"]||d.find(function(Me){return Me.get("className")==="node-label"}),b=d.shapeMap["rect-description"]||d.find(function(Me){return Me.get("className")==="rect-description"});if(e.label)if(!E)d.shapeMap["node-label"]=d.addShape("text",{attrs:P(P({},A.style),{x:B,y:e.description?-5:7,text:e.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0});else{var C=e.labelCfg?e.labelCfg.style:{},_=mt({},E.attr(),C);e.label&&(_.text=e.label),_.x=B,Oe(e.description)&&(_.y=-5),b&&(b.resetMatrix(),b.attr({x:B})),E.resetMatrix(),E.attr(_)}if(Oe(e.description)){var x=u.paddingTop;if(!b)d.shapeMap["rect-description"]=d.addShape("text",{attrs:P(P({},u.style),{x:B,y:17+(x||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0});else{var C=e.descriptionCfg?e.descriptionCfg.style:{},M=mt({},b.attr(),C);Oe(e.description)&&(M.text=e.description),M.x=B,b.resetMatrix(),b.attr(P(P({},M),{y:17+(x||0)}))}}var S=d.shapeMap["pre-rect"]||d.find(function(Me){return Me.get("className")==="pre-rect"});if(S&&!S.destroyed){var I=mt({},S.attr(),e.preRect);S.attr(P(P({},I),{x:-l/2,y:-c/2,height:c}))}if(v&&!v.destroyed)if(!m&&m!==void 0)v.remove(),delete d.shapeMap["pre-rect"];else{var D=p.width,O=p.height,F=p.x,U=p.y,Q=p.offset,N=mn(p,["width","height","x","y","offset"]);v.attr(P(P({},N),{x:F||-l/2+D+Q,y:U||-O/2,width:D,height:O}))}else m&&this.drawLogoIcon(e,d);var R=d.shapeMap["rect-state-icon"]||d.find(function(Me){return Me.get("className")==="rect-state-icon"}),J=R?R.attr():{},re=mt({},J,e.stateIcon);if(R){!re.show&&re.show!==void 0&&(R.remove(),delete d.shapeMap["rect-state-icon"]);var ee=re.width,O=re.height,F=re.x,U=re.y,q=re.offset,ve=mn(re,["width","height","x","y","offset"]);R.attr(P(P({},ve),{x:F||l/2-ee+q,y:U||-O/2,width:ee,height:O}))}else re.show&&this.drawStateIcon(e,d);this.updateLinkPoints(e,d)},getOptions:function(e,t){return t==="move"?e:br({},this.options,this.getCustomConfig(e)||{},e)}},"single-node");ko("star",{options:{size:60,style:{stroke:qe.defaultNode.style.stroke,fill:qe.defaultNode.style.fill,lineWidth:qe.defaultNode.style.lineWidth},labelCfg:{style:{fill:qe.nodeLabel.style.fill,fontSize:qe.nodeLabel.style.fontSize,fontFamily:qe.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:qe.defaultNode.linkPoints.size,lineWidth:qe.defaultNode.linkPoints.lineWidth,fill:qe.defaultNode.linkPoints.fill,stroke:qe.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:P({},qe.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).icon,a=n===void 0?{}:n,i=this.getShapeStyle(e),o=t.addShape("path",{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var A=a.width,s=a.height,u=a.show,f=a.text;return u&&(f?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:P({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:P({x:-A/2,y:-s/2},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,a=n===void 0?{}:n,i=a.top,o=a.left,A=a.right,s=a.leftBottom,u=a.rightBottom,f=a.size,l=a.r,c=mn(a,["top","left","right","leftBottom","rightBottom","size","r"]),h=this.getSize(e),d=h[0];if(A){var v=Math.cos(.1*Math.PI)*d,g=Math.sin((18+72*0)/180*Math.PI)*d;t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:P(P({},c),{x:v,y:-g,r:f/2||l||5}),className:"link-point-right",name:"link-point-right"})}if(i){var v=Math.cos(.5*Math.PI)*d,g=Math.sin((18+72*1)/180*Math.PI)*d;t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:P(P({},c),{x:v,y:-g,r:f/2||l||5}),className:"link-point-top",name:"link-point-top"})}if(o){var v=Math.cos(.9*Math.PI)*d,g=Math.sin((18+72*2)/180*Math.PI)*d;t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:P(P({},c),{x:v,y:-g,r:f/2||l||5}),className:"link-point-left",name:"link-point-left"})}if(s){var v=Math.cos(1.3*Math.PI)*d,g=Math.sin((18+72*3)/180*Math.PI)*d;t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:P(P({},c),{x:v,y:-g,r:f/2||l||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(u){var v=Math.cos(1.7*Math.PI)*d,g=Math.sin((18+72*4)/180*Math.PI)*d;t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:P(P({},c),{x:v,y:-g,r:f/2||l||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(e){var t=this.getSize(e),n=t[0],a=n*3/8,i=e.innerR||a;return Hn.getStarPath(n,i)},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},a=mt({},t,n),i=this.getPath(e),o=P({path:i},a);return o},update:function(e,t,n){var a=t.getContainer(),i=this.getOptions({}).style,o=this.getPath(e),A={stroke:e.color,path:o},s=t.get("keyShape"),u=mt({},i,s.attr(),A);u=mt(u,e.style),this.updateShape(e,t,u,!0,n),this.updateLinkPoints(e,a)},updateLinkPoints:function(e,t){var n=this.getOptions({}).linkPoints,a=t.shapeMap["link-point-left"]||t.find(function(M){return M.get("className")==="link-point-left"}),i=t.shapeMap["link-point-right"]||t.find(function(M){return M.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(M){return M.get("className")==="link-point-top"}),A=t.shapeMap["link-point-left-bottom"]||t.find(function(M){return M.get("className")==="link-point-left-bottom"}),s=t.shapeMap["link-point-left-bottom"]||t.find(function(M){return M.get("className")==="link-point-right-bottom"}),u=n,f=a||i||o||A||s;f&&(u=f.attr());var l=mt({},u,e.linkPoints),c=l.fill,h=l.stroke,d=l.lineWidth,v=l.size/2;v||(v=l.r);var g=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},p=g.left,y=g.right,m=g.top,w=g.leftBottom,B=g.rightBottom,E=this.getSize(e),b=E[0],C={r:v,fill:c,stroke:h,lineWidth:d},_=Math.cos((18+72*0)/180*Math.PI)*b,x=Math.sin((18+72*0)/180*Math.PI)*b;i?!y&&y!==void 0?(i.remove(),delete t.shapeMap["link-point-right"]):i.attr(P(P({},C),{x:_,y:-x})):y&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:P(P({},C),{x:_,y:-x}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),_=Math.cos((18+72*1)/180*Math.PI)*b,x=Math.sin((18+72*1)/180*Math.PI)*b,o?!m&&m!==void 0?(o.remove(),delete t.shapeMap["link-point-top"]):o.attr(P(P({},C),{x:_,y:-x})):m&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:P(P({},C),{x:_,y:-x}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),_=Math.cos((18+72*2)/180*Math.PI)*b,x=Math.sin((18+72*2)/180*Math.PI)*b,a?!p&&p!==void 0?(a.remove(),delete t.shapeMap["link-point-left"]):a.attr(P(P({},C),{x:_,y:-x})):p&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:P(P({},C),{x:_,y:-x}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),_=Math.cos((18+72*3)/180*Math.PI)*b,x=Math.sin((18+72*3)/180*Math.PI)*b,A?!w&&w!==void 0?(A.remove(),delete t.shapeMap["link-point-left-bottom"]):A.attr(P(P({},C),{x:_,y:-x})):w&&(t.shapeMap["link-point-left-bottom"]=t.addShape("circle",{attrs:P(P({},C),{x:_,y:-x}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),_=Math.cos((18+72*4)/180*Math.PI)*b,x=Math.sin((18+72*4)/180*Math.PI)*b,s?!B&&B!==void 0?(s.remove(),delete t.shapeMap["link-point-right-bottom"]):s.attr(P(P({},C),{x:_,y:-x})):B&&(t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:P(P({},C),{x:_,y:-x}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");var hI=Hn.defaultSubjectColors,Pl="fan-shape-";ko("donut",{options:{size:qe.defaultNode.size,style:{x:0,y:0,stroke:qe.defaultNode.style.stroke,fill:qe.defaultNode.style.fill,lineWidth:qe.defaultNode.style.lineWidth},labelCfg:{style:{fill:qe.nodeLabel.style.fill,fontSize:qe.nodeLabel.style.fontSize,fontFamily:qe.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:qe.defaultNode.linkPoints.size,lineWidth:qe.defaultNode.linkPoints.lineWidth,fill:qe.defaultNode.linkPoints.fill,stroke:qe.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:P({},qe.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).icon,a=n===void 0?{}:n,i=this.getShapeStyle(e),o=br({},a,e.icon),A=t.addShape("circle",{attrs:i,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")});t.shapeMap["".concat(this.type,"-keyShape")]=A;var s=o.width,u=o.height,f=o.show,l=o.text;return f&&(l?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:P({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:P({x:-s/2,y:-u/2},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),C0e(e,t,A),this.drawLinkPoints(e,t),A},updateShape:function(e,t,n,a,i){var o=t.get("keyShape");o.attr(P({},n)),_0e(e,t,o),this.updateLabel(e,t,i),a&&this.updateIcon(e,t)}},"circle");var C0e=function(e,t,n){var a=e.donutAttrs,i=a===void 0?{}:a,o=e.donutColorMap,A=o===void 0?{}:o,s=Object.keys(i).length;if(i&&s>1){var u=rQ(i,A),f=u.configs,l=u.totalValue;if(l){var c=nQ(n),h=c.lineWidth,d=c.arcR,v=[d,0],g=0;if(s===1){nw(t,{arcR:d,arcBegin:v,beginAngle:g,config:f[0],fanIndex:0,lineWidth:h,totalValue:l,drawWhole:!0});return}for(var p=0;p<f.length;p++){var y=nw(t,{arcR:d,arcBegin:v,beginAngle:g,config:f[p],fanIndex:p,lineWidth:h,totalValue:l});if(y.shouldEnd)return;v=y.arcBegin,g=y.beginAngle}}}},nw=function(e,t){var n=t.arcR,a=t.arcBegin,i=t.beginAngle,o=t.config,A=t.fanIndex,s=t.lineWidth,u=t.totalValue,f=t.drawWhole,l=f===void 0?!1:f,c=t.updateShape,h=c===void 0?void 0:c,d=o.value/u;if(d<.001)return{beginAngle:i,arcBegin:a,shape:void 0,shouldEnd:!1};var v,g,p;if(l||d>.999)v=[n,1e-4],p=1;else{var y=d*Math.PI*2;g=i+y,v=[n*Math.cos(g),-n*Math.sin(g)],p=y>Math.PI?1:0}var m={path:[["M",a[0],a[1]],["A",n,n,0,p,0,v[0],v[1]]],stroke:o.color||(h==null?void 0:h.attr("stroke"))||hI[A%hI.length],lineWidth:s};return h?h.attr(m):e.shapeMap["".concat(Pl).concat(A)]=e.addShape("path",{attrs:m,name:"".concat(Pl).concat(A),draggable:!0}),{beginAngle:g,arcBegin:v,shape:e.shapeMap["".concat(Pl).concat(A)],shouldEnd:l||d>.999}},_0e=function(e,t,n){var a=e.donutAttrs,i=e.donutColorMap,o=i===void 0?{}:i,A={},s=t.getContainer();if(a){var u=rQ(a,o),f=u.configs,l=u.totalValue;if(l)for(var c=nQ(n),h=c.lineWidth,d=c.arcR,v=[d,0],g=0,p=0;p<f.length;p++){var y="".concat(Pl).concat(p),m=nw(s,{arcR:d,arcBegin:v,beginAngle:g,config:f[p],fanIndex:p,lineWidth:h,totalValue:l,drawWhole:f.length===1,updateShape:s.shapeMap[y]});if(m.shape&&(A[y]=!0),m.shouldEnd)break;v=m.arcBegin,g=m.beginAngle}}var w=Object.keys(s.shapeMap).filter(function(B){return B.includes(Pl)});w.forEach(function(B){A[B]||(s.shapeMap[B].remove(!0),delete s.shapeMap[B])})},rQ=function(e,t){var n=0,a=[];return Object.keys(e).forEach(function(i){var o=+e[i];isNaN(o)||(a.push({key:i,value:o,color:t[i]}),n+=o)}),{totalValue:n,configs:a}},nQ=function(e){var t=e.attr("r"),n=.6*t,a=(t+n)/2,i=t-n;return{lineWidth:i,arcR:a}},Bd=function(e){var t=e.x,n=e.y;return{x:t,y:n,centerX:t,centerY:n,minX:t,minY:n,maxX:t,maxY:n,height:0,width:0}},S0e=function(e){e===void 0&&(e=[]);var t=[],n=[];e.forEach(function(s){t.push(s.x),n.push(s.y)});var a=Math.min.apply(Math,t),i=Math.max.apply(Math,t),o=Math.min.apply(Math,n),A=Math.max.apply(Math,n);return{centerX:(a+i)/2,centerY:(o+A)/2,maxX:i,maxY:A,minX:a,minY:o,height:A-o,width:i-a}},eb=function(e){for(var t=[],n={},a=e.length,i=a-1;i>=0;i--){var o=e[i];o.id="".concat(o.x,"|||").concat(o.y),n[o.id]||(n[o.id]=o,t.push(o))}return t},aQ=function(e){return eb(e)},gg=function(e,t){return e.width||e.height?{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}:e},M0e=function(e,t){var n=Math.abs(e.x-t.centerX),a=Math.abs(e.y-t.centerY);return n===0&&a===0?0:n/t.width>a/t.height},aw=function(e,t,n){var a=M0e(t,e);if(a===0){var i=e.centerX,o=e.centerY;return n.y<t.y?o=e.minY:n.x>t.x?i=e.maxX:n.x<t.x?i=e.minX:n.x===t.x&&(o=e.maxY),{x:i,y:o}}return a?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}},dI=function(e,t){var n=Math.min(e.minX,t.minX),a=Math.min(e.minY,t.minY),i=Math.max(e.maxX,t.maxX),o=Math.max(e.maxY,t.maxY);return{centerX:(n+i)/2,centerY:(a+o)/2,minX:n,minY:a,maxX:i,maxY:o,height:o-a,width:i-n}},iw=function(e){return[{x:e.minX,y:e.minY},{x:e.maxX,y:e.minY},{x:e.maxX,y:e.maxY},{x:e.minX,y:e.maxY}]},Ed=function(e,t){var n=e.x,a=e.y;return n<t.minX||n>t.maxX||a<t.minY||a>t.maxY},I0e=function(e,t){return t<e.minX||t>e.maxX?[]:[{x:t,y:e.minY},{x:t,y:e.maxY}]},T0e=function(e,t){return t<e.minY||t>e.maxY?[]:[{x:e.minX,y:t},{x:e.maxX,y:t}]},F0e=function(e,t){return I0e(e,t.x).concat(T0e(e,t.y))},vc=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},L0e=function(e,t){var n=-2,a=0;return t.forEach(function(i){i&&(e.x===i.x&&(a+=n),e.y===i.y&&(a+=n))}),a},vI=function(e,t,n,a,i){return vc(e,t)+vc(e,n)+L0e(e,[t,n,a,i])},D0e=function r(e,t,n,a,i){i===void 0&&(i=0),e.unshift(t[a]),n[a]&&n[a]!==a&&i<=100&&r(e,t,n,n[a],i+1)},bd=function(e,t,n,a){var i=n.x-e.x,o=n.y-e.y,A=a.x-e.x,s=a.y-e.y,u=n.x-t.x,f=n.y-t.y,l=a.x-t.x,c=a.y-t.y,h=i*s-o*A,d=u*c-f*l,v=i*f-o*u,g=A*c-s*l;return h*d<=0&&v*g<=0},ow=function(e,t,n){if(n.width||n.height){var a=iw(n),i=a[0],o=a[1],A=a[2],s=a[3];return bd(e,t,i,o)||bd(e,t,i,s)||bd(e,t,o,A)||bd(e,t,A,s)}return!1},O0e=function(e,t,n,a){var i=[];return e.forEach(function(o){if(o!==t&&(o.x===t.x||o.y===t.y)){if(ow(o,t,n)||ow(o,t,a))return;i.push(o)}}),eb(i)},U0e=function(e,t,n,a,i,o,A){var s,u=[],f=(s={},s[t.id]=t,s),l={},c={},h={};c[t.id]=0,h[t.id]=vI(t,n,t);var d=new oQ;d.add({id:t.id,value:h[t.id]});var v={};e.forEach(function(B){v[B.id]=B});for(var g;Object.keys(f).length;){var p=d.minId(!1);if(p)g=f[p];else break;if(g===n){var y=[];return D0e(y,v,l,n.id),y}delete f[g.id],d.remove(g.id),u.push(g);var m=O0e(e,g,a,i),w=function(E){E.forEach(function(b){if(u.indexOf(b)===-1){var C=b.id;f[C]||(f[C]=b);var _=h[g.id]+vc(g,b);if(c[C]&&_>=c[C]){d.add({id:C,value:h[C]});return}l[C]=g.id,c[C]=_,h[C]=c[C]+vI(b,n,t,o,A),d.add({id:C,value:h[C]})}})};w(m)}return[t,n]},N0e=function(e,t,n){return!(e.x===t.x&&t.x===n.x||e.y===t.y&&t.y===n.y)},k0e=function(e,t,n,a){var i=vc(e,t),o=vc(n,t);i<a&&(a=i),o<a&&(a=o);var A={x:t.x-a/i*(t.x-e.x),y:t.y-a/i*(t.y-e.y)},s={x:t.x-a/o*(t.x-n.x),y:t.y-a/o*(t.y-n.y)};return[A,s]},gI=function(e,t){var n=[],a=e[0];return n.push("M".concat(a.x," ").concat(a.y)),e.forEach(function(i,o){var A=e[o+1],s=e[o+2];if(A&&s)if(N0e(i,A,s)){var u=k0e(i,A,s,t),f=u[0],l=u[1];n.push("L".concat(f.x," ").concat(f.y)),n.push("Q".concat(A.x," ").concat(A.y," ").concat(l.x," ").concat(l.y)),n.push("L".concat(l.x," ").concat(l.y))}else n.push("L".concat(A.x," ").concat(A.y));else A&&n.push("L".concat(A.x," ").concat(A.y))}),n.join("")},iQ=function(e,t,n,a,i){var o,A;if(!n||!n.getType())o=Bd(e);else if(n.getType()==="combo"){var s=n.getKeyShape().getBBox();if(s){var u=n.getModel(),f=u.x,l=u.y;o={x:f,y:l,width:s.width,height:s.height,minX:s.minX+f,maxX:s.maxX+f,minY:s.minY+l,maxY:s.maxY+l},o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=Bd(e)}else o=n&&n.getBBox();if(!a||!a.getType())A=Bd(t);else if(a.getType()==="combo"){var c=a.getKeyShape().getBBox();if(c){var h=a.getModel(),d=h.x,v=h.y;A={x:d,y:v,width:c.width,height:c.height,minX:c.minX+d,maxX:c.maxX+d,minY:c.minY+v,maxY:c.maxY+v},A.centerX=(A.minX+A.maxX)/2,A.centerY=(A.minY+A.maxY)/2}else A=Bd(t)}else A=a&&a.getBBox();var g=gg(o,i),p=gg(A,i),y=aw(g,e,t),m=aw(p,t,e),w=S0e([y,m]),B=dI(g,w),E=dI(p,w),b=[];b=b.concat(iw(B)).concat(iw(E));var C={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[w,B,E].forEach(function(x){b=b.concat(F0e(x,C).filter(function(M){return Ed(M,g)&&Ed(M,p)}))}),[{x:y.x,y:m.y},{x:m.x,y:y.y}].forEach(function(x){Ed(x,g)&&Ed(x,p)&&b.push(x)}),b.unshift(y),b.push(m),b=eb(b);var _=U0e(b,y,m,o,A,e,t);return _.unshift(e),_.push(t),aQ(_)},P0e=function(e){if(!(e!=null&&e.length))return e;for(var t=e[e.length-1],n={x:t.x,y:t.y},a=[t],i=[t],o=e.length-2;o>=0;o--){var A=e[o];if(A.x===n.x?a.push(A):(a=[A],n.x=A.x),A.y===n.y?i.push(A):(i=[A],n.y=A.y),a.length>2){var s=e.indexOf(a[1]);s>-1&&e.splice(s,1);continue}if(i.length>2){var s=e.indexOf(i[1]);s>-1&&e.splice(s,1)}}return e},oQ=function(){function r(){this.arr=[],this.map={},this.arr=[],this.map={}}return r.prototype._innerAdd=function(e,t){for(var n=[0,t-1];n[1]-n[0]>1;){var a=Math.floor((n[0]+n[1])/2);if(this.arr[a].value>e.value)n[1]=a;else if(this.arr[a].value<e.value)n[0]=a;else{this.arr.splice(a,0,e),this.map[e.id]=!0;return}}this.arr.splice(n[1],0,e),this.map[e.id]=!0},r.prototype.add=function(e){delete this.map[e.id];var t=this.arr.length;if(!t){this.arr.push(e),this.map[e.id]=!0;return}if(this.arr[t-1].value<e.value){this.arr.push(e),this.map[e.id]=!0;return}this._innerAdd(e,t)},r.prototype.remove=function(e){this.map[e]&&delete this.map[e]},r.prototype._clearAndGetMinId=function(){for(var e,t=this.arr.length-1;t>=0;t--)this.map[this.arr[t].id]?e=this.arr[t].id:this.arr.splice(t,1);return e},r.prototype._findFirstId=function(){for(;this.arr.length;){var e=this.arr.shift();if(this.map[e.id])return e.id}},r.prototype.minId=function(e){return e?this._clearAndGetMinId():this._findFirstId()},r}(),Q0e=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},R0e=function(e,t,n,a,i){return aQ(iQ(e,t,n,a,i.offset))},H0e={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:Q0e,fallbackRoute:R0e},To=function(e,t){var n=Math.round(Math.abs(e/t)),a=e<0?-1:1;return n<0?0:a*n},G0e=function(e,t,n){var a={};return e.forEach(function(i){if(i)for(var o=gg(i.getBBox(),n),A=To(o.minX,t);A<=To(o.maxX,t);A+=1)for(var s=To(o.minY,t);s<=To(o.maxY,t);s+=1)a["".concat(A,"|||").concat(s)]=!0}),a},nm=function(e,t){var n=t.x-e.x,a=t.y-e.y;return n||a?Math.atan2(a,n):0},pI=function(e,t){var n=Math.abs(e-t);return n>Math.PI?2*Math.PI-n:n},yI=function(e,t,n){for(var a=1/0,i=0,o=t.length;i<o;i++){var A=n(e,t[i]);A<a&&(a=A)}return a},mI=function(e,t,n,a,i){var o=[];if(!n)return[e];var A=i.directions,s=i.offset,u=n.getBBox(),f=t.x>u.minX&&t.x<u.maxX&&t.y>u.minY&&t.y<u.maxY,l=gg(u,s);for(var c in l)l[c]=To(l[c],i.gridSize);if(f){for(var h=0,d=A;h<d.length;h++)for(var v=d[h],g=[[{x:l.minX,y:l.minY},{x:l.maxX,y:l.minY}],[{x:l.minX,y:l.minY},{x:l.minX,y:l.maxY}],[{x:l.maxX,y:l.minY},{x:l.maxX,y:l.maxY}],[{x:l.minX,y:l.maxY},{x:l.maxX,y:l.maxY}]],c=0;c<4;c++){var p=g[c],y=Hn.getLineIntersect(e,{x:e.x+v.stepX*l.width,y:e.y+v.stepY*l.height},p[0],p[1]);y&&!ow(e,y,u)&&(y.id="".concat(y.x,"|||").concat(y.y),o.push(y))}return o}var m=aw(l,e,a);return m.id="".concat(m.x,"|||").concat(m.y),[m]},Aw=function(e,t,n,a){var i=nm(e,t),o=n[e.id];if(!o){var A=nm(a,e);return pI(A,i)}var s=nm({x:o.x,y:o.y},e);return pI(s,i)},z0e=function(e,t,n,a,i,o,A){var s=[a],u=a,f=e.id,l=e.x,c=e.y,h={x:l,y:c,id:f};Aw(h,o,t,n)&&(u={x:o.x===a.x?a.x:h.x*A,y:o.y===a.y?a.y:h.y*A},s.unshift(u));for(var d=t[f];d&&d.id!==f;){var v={x:l,y:c,id:f},g={x:d.x,y:d.y,id:d.id},p=Aw(g,v,t,n);p&&(u={x:g.x===v.x?u.x:g.x*A,y:g.y===v.y?u.y:g.y*A},s.unshift(u)),f=g.id,l=g.x,c=g.y,d=t[f]}return s[0].x=l===n.x?i.x:u.x,s[0].y=c===n.y?i.y:u.y,s.unshift(i),s},K0e=function(e,t,n,a,i){if(isNaN(e.x)||isNaN(t.x))return[];var o=br(H0e,i);o.obstacles=o.obstacles||[];var A=o.penalties,s=o.gridSize,u=G0e(o.obstacles.concat([n,a]),s,o.offset),f={x:To(e.x,s),y:To(e.y,s)},l={x:To(t.x,s),y:To(t.y,s)};e.id="".concat(f.x,"|||").concat(f.y),t.id="".concat(l.x,"|||").concat(l.y);var c=mI(f,e,n,l,o),h=mI(l,t,a,f,o);c.forEach(function(N){delete u[N.id]}),h.forEach(function(N){delete u[N.id]});for(var d={},v={},g={},p={},y={},m=new oQ,w=0;w<c.length;w++){var B=c[w];d[B.id]=B,p[B.id]=0,y[B.id]=yI(B,h,o.distFunc),m.add({id:B.id,value:y[B.id]})}var E=o.maximumLoops,b,C,_,x,M,S,I=1/0,D={};for(h.forEach(function(N){D["".concat(N.x,"|||").concat(N.y)]=!0}),Object.keys(d).forEach(function(N){var R=d[N].id;y[R]<=I&&(I=y[R],b=d[R])});Object.keys(d).length>0&&E>0;){var O=m.minId((E+1)%30===0);if(O)b=d[O];else break;if(D["".concat(b.x,"|||").concat(b.y)])return z0e(b,g,f,t,e,l,s);delete d[b.id],m.remove(b.id),v[b.id]=!0;for(var w=0;w<o.directions.length;w++){C=o.directions[w];var F="".concat(Math.round(b.x)+C.stepX,"|||").concat(Math.round(b.y)+C.stepY);if(_={x:b.x+C.stepX,y:b.y+C.stepY,id:F},!v[F]&&(S=Aw(b,_,g,f),!(S>o.maxAllowedDirectionChange)&&!u[F])){d[F]||(d[F]=_);var U=A[S];x=o.distFunc(b,_)+(isNaN(U)?s:U),M=p[b.id]+x;var Q=p[F];Q&&M>=Q||(g[F]=b,p[F]=M,y[F]=M+yI(_,h,o.distFunc),m.add({id:F,value:y[F]}))}}E-=1}return o.fallbackRoute(e,t,n,a,o)};_O("polyline",{options:{color:qe.defaultEdge.color,size:qe.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:qe.defaultEdge.style.stroke,lineAppendWidth:qe.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:qe.edgeLabel.style.fill,fontSize:qe.edgeLabel.style.fontSize,fontFamily:qe.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:P({},qe.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(e,t){var n=this.getShapeStyle(e);n.radius===0&&delete n.radius;var a=t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:n});return t.shapeMap["edge-shape"]=a,a},getShapeStyle:function(e){var t=this.options.style,n={stroke:e.color},a=mt({},t,n,e.style);e=this.getPathPoints(e),this.radius=a.radius,this.offset=a.offset;var i=e.startPoint,o=e.endPoint,A=this.getControlPoints(e),s=[i];A&&(s=s.concat(A)),s.push(o);var u=e.sourceNode,f=e.targetNode,l=a.radius,c=this.options.routeCfg,h=mt({},c,e.routeCfg);h.offset=a.offset;var d=this.getPath(s,u,f,l,h,!A);(yt(d)&&d.length<=1||Oe(d)&&d.indexOf("L")===-1)&&(d="M0 0, L0 0"),(isNaN(i.x)||isNaN(i.y)||isNaN(o.x)||isNaN(o.y))&&(d="M0 0, L0 0");var v=mt({},qe.defaultEdge.style,a,{lineWidth:e.size,path:d});return v},updateShapeStyle:function(e,t){var n=t.getContainer();if(t.isVisible()){var a={stroke:e.color},i=n.shapeMap["edge-shape"]||n.find(function(w){return w.get("className")==="edge-shape"})||t.getKeyShape(),o=e.size;e=this.getPathPoints(e);var A=e.startPoint,s=e.endPoint,u=this.getControlPoints(e),f=[A];u&&(f=f.concat(u)),f.push(s);var l=i.attr(),c=mt({},a,l,e.style),h=e.sourceNode,d=e.targetNode,v=c.radius,g=this.options.routeCfg,p=mt({},g,e.routeCfg);p.offset=c.offset;var y=this.getPath(f,h,d,v,p,!u);(yt(y)&&y.length<=1||Oe(y)&&y.indexOf("L")===-1)&&(y="M0 0, L0 0"),(isNaN(A.x)||isNaN(A.y)||isNaN(s.x)||isNaN(s.y))&&(y="M0 0, L0 0"),l.endArrow&&c.endArrow===!1&&(e.style.endArrow={path:""}),l.startArrow&&c.startArrow===!1&&(e.style.startArrow={path:""});var m=mt(a,i.attr(),{lineWidth:o,path:y},e.style);i&&i.attr(m)}},getPath:function(e,t,n,a,i,o){var A=i.offset,s=i.obstacles,u=i.simple;if(!A||e.length>2||o===!1){if(a)return gI(e,a);var f=[];return ye(e,function(d,v){v===0?f.push(["M",d.x,d.y]):f.push(["L",d.x,d.y])}),f}u!==!1&&!(s!=null&&s.length)&&(u=!0);var l=u?iQ(e[e.length-1],e[0],n,t,A):K0e(e[0],e[e.length-1],t,n,i);if(!l||!l.length)return"M0 0, L0 0";if(a){var c=gI(l,a);return c}l=P0e(l);var h=Hn.pointsToPolygon(l);return h}},"single-edge");var wI=zo.cloneEvent,BI=zo.isNaN,EI=Math.abs,j0e=10,$0e=["shift","ctrl","alt","control"];const W0e={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(e){var t=this.origin,n=+e.clientX,a=+e.clientY;if(!(BI(n)||BI(a))){var i=n-t.x,o=a-t.y;this.get("direction")==="x"?o=0:this.get("direction")==="y"&&(i=0),this.origin={x:n,y:a};var A=this.graph.get("width"),s=this.graph.get("height"),u=this.graph.get("canvas").getCanvasBBox(),f=this.scalableRange,l=this.scalableRange;f<1&&f>-1&&(f=A*f,l=s*l),(u.minX<=A+f&&u.minX+i>A+f||u.maxX+f>=0&&u.maxX+f+i<0)&&(i=0),(u.minY<=s+l&&u.minY+o>s+l||u.maxY+l>=0&&u.maxY+l+o<0)&&(o=0),this.graph.translate(i,o)}},onTouchStart:function(e){var t=this,n=e.originalEvent.touches,a=n[0],i=n[1];a&&i||(e.preventDefault(),this.mousedown=!0,t.onDragStart(e))},onMouseDown:function(e){this.mousedown=!0},onDragMove:function(e){this.mousedown&&(this.dragstart?this.onDrag(e):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this,n=e.originalEvent;if(!(n&&e.name!=="touchstart"&&n.button!==0)&&!(e.name!=="touchstart"&&typeof window<"u"&&window.event&&!window.event.buttons&&!window.event.button)&&this.shouldBegin(e,this)&&!t.keydown&&this.allowDrag(e)){if(t.origin={x:e.clientX,y:e.clientY},t.dragging=!1,this.enableOptimize){for(var a=this.graph,i=a.getEdges(),o=0,A=i.length;o<A;o++){var s=i[o].get("group").get("children");s&&s.forEach(function(m){m.set("ori-visibility",m.get("ori-visibility")||m.get("visible")),m.hide()})}for(var u=a.getNodes(),f=0,l=u.length;f<l;f++)for(var c=u[f].getContainer(),h=c.get("children"),d=0,v=h;d<v.length;d++){var g=v[d],p=g.get("isKeyShape");p||(g.set("ori-visibility",g.get("ori-visibility")||g.get("visible")),g.hide())}}if(typeof window<"u"){var y=this;this.handleDOMContextMenu=function(m){return y.onMouseUp(m)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}},onTouchMove:function(e){var t=this,n=e.originalEvent.touches,a=n[0],i=n[1];if(a&&i){this.onMouseUp(e);return}e.preventDefault(),t.onDrag(e)},onDrag:function(e){if(this.mousedown){var t=this.graph;if(!this.keydown&&this.allowDrag(e)&&(e=wI(e),!!this.origin)){if(this.dragging)e.type="drag",t.emit("canvas:drag",e);else{if(EI(this.origin.x-e.clientX)+EI(this.origin.y-e.clientY)<j0e)return;this.shouldBegin(e,this)&&(e.type="dragstart",t.emit("canvas:dragstart",e),this.originPosition={x:e.clientX,y:e.clientY},this.dragging=!0)}this.shouldUpdate(e,this)&&this.updateViewport(e)}}},onMouseUp:function(e){var t,n;this.mousedown=!1,this.dragstart=!1;var a=this.graph;if(!this.keydown){var i=a.getZoom(),o=a.get("modeController"),A=(n=(t=o==null?void 0:o.modes[o.mode])===null||t===void 0?void 0:t.filter(function(b){return b.type==="zoom-canvas"}))===null||n===void 0?void 0:n[0],s=A?A.optimizeZoom||.1:0;if(this.enableOptimize){for(var u=a.getEdges(),f=0,l=u.length;f<l;f++){var c=u[f].get("group").get("children");c&&c.forEach(function(b){var C=b.get("ori-visibility");b.set("ori-visibility",void 0),C&&b.show()})}if(i>s)for(var h=a.getNodes(),d=0,v=h.length;d<v;d++)for(var g=h[d].getContainer(),p=g.get("children"),y=0,m=p;y<m.length;y++){var w=m[y],B=w.get("isKeyShape");if(!B){var E=w.get("ori-visibility");w.set("ori-visibility",void 0),E&&w.show()}}}if(!this.dragging){this.origin=null;return}e=wI(e),this.shouldEnd(e,this)&&this.updateViewport(e),e.type="dragend",e.dx=e.clientX-this.originPosition.x,e.dy=e.clientY-this.originPosition.y,a.emit("canvas:dragend",e),this.endDrag(),typeof window<"u"&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(e){var t=this,n=e.key;n&&($0e.indexOf(n.toLowerCase())>-1?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1},allowDrag:function(e){var t,n,a=e.target,i=a&&a.isCanvas&&a.isCanvas();if(wc(this.allowDragOnItem)&&!this.allowDragOnItem&&!i)return!1;if(On(this.allowDragOnItem)){var o=this.allowDragOnItem,A=o.node,s=o.edge,u=o.combo,f=(n=(t=e.item)===null||t===void 0?void 0:t.getType)===null||n===void 0?void 0:n.call(t);if(!A&&f==="node"||!s&&f==="edge"||!u&&f==="combo")return!1}return!0}},V0e={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd",afterchangedata:"onDragEnd"}},validationCombo:function(e){if(!this.origin||!e||e.destroyed)return!1;var t=e.getType();return t==="combo"},onTouchStart:function(e){if(e.item){var t=this;try{var n=e.originalEvent.touches,a=n[0],i=n[1];if(a&&i)return;e.preventDefault()}catch{console.warn("Touch original event not exist!")}this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},this.dragstart=!0,t.onDragStart(e)}},onTouchMove:function(e){var t=this;try{var n=e.originalEvent.touches,a=n[0],i=n[1];if(a&&i){t.onDragEnd(e);return}e.preventDefault()}catch{console.warn("Touch original event not exist!")}t.onDrag(e)},onMouseDown:function(e){this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},typeof window<"u"&&!this.windowEventBinded&&(this.windowEventBinded=!0,document.body.addEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.addEventListener("mouseup",this.onDragEnd.bind(this)))},onDragMove:function(e){var t,n;if(((n=(t=e.item)===null||t===void 0?void 0:t.getType)===null||n===void 0?void 0:n.call(t))!=="node"){this.onDragEnd();return}this.mousedown&&(this.dragstart?this.onDrag(P(P({},e),this.mousedown)):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this;if(this.currentShouldEnd=!0,!!this.shouldBegin(P(P({},e),this.mousedown),this)){var n=this.mousedown,a=n.item,i=n.target;if(!(!a||a.destroyed||a.hasLocked())){var o=a.getContainer();if(o.set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(a),i){var A=i.get("isAnchorPoint");if(A)return}var s=this.graph;this.targets=[],this.targetCombo=null;var u=s.findAllByState("node",this.selectedState),f=a.get("id"),l=u.filter(function(h){var d=h.get("id");return f===d});if(l.length===0?this.targets.push(a):u.length>1?u.forEach(function(h){var d=h.hasLocked();d||t.targets.push(h)}):this.targets.push(a),this.graph.get("enabledStack")&&this.enableStack){var c=[];this.targets.forEach(function(h){var d=h.getModel(),v=d.x,g=d.y,p=d.id;c.push({x:v,y:g,id:p})}),this.set("beforeDragNodes",c)}this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(h){var d=h.getEdges();d.forEach(function(v){v.isVisible()&&(t.hidenEdge[v.getID()]=!0,v.hide())})}),this.origin=this.mousedown.origin,this.point={},this.originPoint={}}}},onDrag:function(e){var t=this;if(!(!this.mousedown||!this.origin)&&this.shouldUpdate(e,this))if(this.get("enableDelegate"))this.updateDelegate(e);else if(this.enableDebounce)this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos});else{var n={};this.targets.map(function(a){t.update(a,e);var i=a.getModel().comboId;i&&(n[i]=t.graph.findById(i))}),this.onlyChangeComboSize&&this.updateParentCombos()}},onDragEnd:function(e){var t=this,n;if(this.mousedown=!1,this.dragstart=!1,typeof window<"u"&&this.windowEventBinded&&(this.windowEventBinded=!1,document.body.removeEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.removeEventListener("mouseup",this.onDragEnd.bind(this))),!!this.origin){(n=this.cachedCaptureItems)===null||n===void 0||n.forEach(function(o){var A=o.getContainer();A.set("capture",!0)}),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(o){var A=o.getEdges();A.forEach(function(s){t.hidenEdge[s.getID()]&&s.show(),s.refresh()})}),this.hidenEdge={};var a=this.graph;if(a.get("enabledStack")&&this.enableStack){var i={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach(function(o){i.before.nodes.push(o)}),this.targets.forEach(function(o){var A=o.getModel(),s=A.x,u=A.y,f=A.id;i.after.nodes.push({x:s,y:u,id:f})}),a.pushStack("update",Xt(i))}a.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(e){var t=e.item;if(this.currentShouldEnd=this.shouldEnd(e,t,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!this.validationCombo(t))){var n=this.graph;if(this.comboActiveState&&n.setItemState(t,this.comboActiveState,!1),this.targetCombo=t,this.onlyChangeComboSize)n.updateCombos();else{var a=t.getModel();this.targets.map(function(i){var o=i.getModel();o.comboId!==a.id&&n.updateComboTree(i,a.id)}),n.updateCombo(t)}n.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(e){var t=this.graph;this.currentShouldEnd=this.shouldEnd(e,void 0,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.targets||this.targets.length===0||!this.currentShouldEnd)&&(this.onlyChangeComboSize?this.updateParentCombos():this.targets.map(function(n){var a=n.getModel();a.comboId&&t.updateComboTree(n)}))},onDropNode:function(e){if(!(!this.targets||this.targets.length===0)){var t=this,n=e.item,a=t.graph,i=n.getModel().comboId,o=i?a.findById(i):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){if(this.onlyChangeComboSize)this.updateParentCombos();else if(i){var A=a.findById(i);t.comboActiveState&&a.setItemState(A,t.comboActiveState,!1),this.targets.map(function(s){var u=s.getModel();i!==u.comboId&&a.updateComboTree(s,i)}),a.updateCombo(A)}else this.targets.map(function(s){var u=s.getModel();u.comboId&&a.updateComboTree(s)});a.emit("dragnodeend",{items:this.targets,targetItem:n})}}},onDragEnter:function(e){var t=e.item;if(this.validationCombo(t)){var n=this.graph;this.comboActiveState&&n.setItemState(t,this.comboActiveState,!0)}},onDragLeave:function(e){var t=e.item;if(this.validationCombo(t)){var n=this.graph;this.comboActiveState&&n.setItemState(t,this.comboActiveState,!1)}},updatePositions:function(e,t){var n=this;!this.targets||this.targets.length===0||(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):t||this.targets.map(function(a){return n.update(a,e)}):this.targets.map(function(a){return n.update(a,e,t)}))},update:function(e,t,n){var a=this.origin,i=e.get("model"),o=e.get("id");this.point[o]||(this.point[o]={x:i.x||0,y:i.y||0});var A=t.x-a.x+this.point[o].x,s=t.y-a.y+this.point[o].y;n&&(A+=a.x-t.x,s+=a.y-t.y);var u={x:A,y:s};this.get("updateEdge")?this.graph.updateItem(e,u,!1):e.updatePosition(u)},debounceUpdate:Bc(function(r){var e=r.targets,t=r.graph,n=r.point,a=r.origin,i=r.evt,o=r.updateEdge,A=r.onlyChangeComboSize,s=r.updateParentCombos;e.map(function(u){var f=u.get("model"),l=u.get("id");n[l]||(n[l]={x:f.x||0,y:f.y||0});var c=i.x-a.x+n[l].x,h=i.y-a.y+n[l].y,d={x:c,y:h};o?t.updateItem(u,d,!1):u.updatePosition(d)}),A&&s(t,e)},50,!0),updateDelegate:function(e){var t=this.graph;if(this.delegateRect){var c=e.x-this.origin.x+this.originPoint.minX,h=e.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:c,y:h})}else{var n=t.get("group"),a=br({},ws.delegateStyle,this.delegateStyle),i=this.calculationGroupPosition(e),o=i.x,A=i.y,s=i.width,u=i.height,f=i.minX,l=i.minY;this.originPoint={x:o,y:A,width:s,height:u,minX:f,minY:l},this.delegateRect=n.addShape("rect",{attrs:P({width:s,height:u,x:o,y:A},a),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(e){var t=this.targets;t.length===0&&t.push(e.item);for(var n=1/0,a=-1/0,i=1/0,o=-1/0,A=0;A<t.length;A++){var s=t[A],u=s.getBBox(),f=u.minX,l=u.minY,c=u.maxX,h=u.maxY;f<n&&(n=f),l<i&&(i=l),c>a&&(a=c),h>o&&(o=h)}var d=Math.floor(n),v=Math.floor(i),g=Math.ceil(a)-Math.floor(n),p=Math.ceil(o)-Math.floor(i);return{x:d,y:v,width:g,height:p,minX:n,minY:i}},updateParentCombos:function(e,t){var n=e||this.graph,a=t||this.targets,i={};a==null||a.forEach(function(o){var A=o.getModel().comboId;A&&(i[A]=n.findById(A))}),Object.values(i).forEach(function(o){o&&n.updateCombo(o)})}},X0e={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(e){var t=this;try{var n=e.originalEvent.touches,a=n[0],i=n[1];if(a&&i)return;e.preventDefault()}catch{console.warn("Touch original event not exist!")}t.setAllItemStates(e)},clearOnTouchStart:function(e){var t=this;try{var n=e.originalEvent.touches,a=n[0],i=n[1];if(a&&i)return;e.preventDefault()}catch{console.warn("Touch original event not exist!")}t.clearActiveState(e)},setAllItemStates:function(e){clearTimeout(this.timer),this.throttleSetAllItemStates(e,this)},clearActiveState:function(e){var t=this;this.timer=setTimeout(function(){t.throttleClearActiveState(e,t)},50)},throttleSetAllItemStates:jl(function(r,e){var t=r.item,n=e.graph;if(!(!n||n.destroyed)&&(e.item=t,!!e.shouldUpdate(r.item,{event:r,action:"activate"},e))){for(var a=e.activeState,i=e.inactiveState,o=n.getNodes(),A=n.getCombos(),s=n.getEdges(),u=n.get("vedges"),f=o.length,l=A.length,c=s.length,h=u.length,d=e.inactiveItems||{},v=e.activeItems||{},g=0;g<f;g++){var p=o[g],y=p.getID(),m=p.hasState("selected");e.resetSelected&&m&&n.setItemState(p,"selected",!1),v[y]&&(n.setItemState(p,a,!1),delete v[y]),i&&!d[y]&&(n.setItemState(p,i,!0),d[y]=p)}for(var g=0;g<l;g++){var w=A[g],B=w.getID(),m=w.hasState("selected");e.resetSelected&&m&&n.setItemState(w,"selected",!1),v[B]&&(n.setItemState(w,a,!1),delete v[B]),i&&!d[B]&&(n.setItemState(w,i,!0),d[B]=w)}for(var g=0;g<c;g++){var E=s[g],b=E.getID();v[b]&&(n.setItemState(E,a,!1),delete v[b]),i&&!d[b]&&(n.setItemState(E,i,!0),d[b]=E)}for(var g=0;g<h;g++){var C=u[g],_=C.getID();v[_]&&(n.setItemState(C,a,!1),delete v[_]),i&&!d[_]&&(n.setItemState(C,i,!0),d[_]=C)}if(t&&!t.destroyed){i&&(n.setItemState(t,i,!1),delete d[t.getID()]),v[t.getID()]||(n.setItemState(t,a,!0),v[t.getID()]=t);for(var x=t.getEdges(),M=x.length,g=0;g<M;g++){var E=x[g],b=E.getID(),S=void 0;E.getSource()===t?S=E.getTarget():S=E.getSource();var I=S.getID();i&&d[I]&&(n.setItemState(S,i,!1),delete d[I]),v[I]||(n.setItemState(S,a,!0),v[I]=S),d[b]&&(n.setItemState(E,i,!1),delete d[b]),v[b]||(n.setItemState(E,a,!0),v[b]=E),E.toFront()}}e.activeItems=v,e.inactiveItems=d,n.emit("afteractivaterelations",{item:r.item,action:"activate"})}},50,{trailing:!0,leading:!0}),throttleClearActiveState:jl(function(r,e){var t=e.get("graph");if(!(!t||t.destroyed)&&e.shouldUpdate(r.item,{event:r,action:"deactivate"},e)){var n=e.activeState,a=e.inactiveState,i=e.activeItems||{},o=e.inactiveItems||{};Object.values(i).filter(function(A){return!A.destroyed}).forEach(function(A){t.clearItemStates(A,n)}),Object.values(o).filter(function(A){return!A.destroyed}).forEach(function(A){t.clearItemStates(A,a)}),e.activeItems={},e.inactiveItems={},t.emit("afteractivaterelations",{item:r.item||e.get("item"),action:"deactivate"})}},50,{trailing:!0,leading:!0})};var xd=Math.min,bI=Math.max,xI=Math.abs,CI="shift",Y0e=["drag","shift","ctrl","alt","control"];const Z0e={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:CI,includeEdges:!0,includeCombos:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return Y0e.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=CI,console.warn("Behavior brush-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(e){var t=e.item,n=this.brush;t||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),n||(n=this.createBrush()),this.originPoint={x:e.canvasX,y:e.canvasY},n.attr({width:0,height:0}),n.show(),this.dragging=!0)},onMouseMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||this.updateBrush(e))},onMouseUp:function(e){this.graph,!(!this.brush&&!this.dragging)&&(this.trigger!=="drag"&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(e),this.dragging=!1))},clearStates:function(){var e=this,t=e.graph,n=e.selectedState,a=t.findAllByState("node",n),i=t.findAllByState("edge",n),o=t.findAllByState("combo",n);a.forEach(function(A){return t.setItemState(A,n,!1)}),i.forEach(function(A){return t.setItemState(A,n,!1)}),o.forEach(function(A){return t.setItemState(A,n,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(e,t,n,a,i){var o=e.getBBox();return o.centerX>=t&&o.centerX<=n&&o.centerY>=a&&o.centerY<=i},getSelectedNodes:function(e){var t=this,n=this,a=n.graph,i=n.originPoint,o=n.shouldUpdate,A=n.isBBoxCenterInRect,s=this.selectedState,u={x:e.x,y:e.y},f=a.getPointByCanvas(i.x,i.y),l=xd(u.x,f.x),c=bI(u.x,f.x),h=xd(u.y,f.y),d=bI(u.y,f.y),v=[],g=[];a.getNodes().forEach(function(m){if(m.isVisible()&&A(m,l,c,h,d)&&o(m,"select",t)){v.push(m);var w=m.getModel();g.push(w.id),a.setItemState(m,s,!0)}});var p=[];this.includeEdges&&v.forEach(function(m){var w=m.getOutEdges();w.forEach(function(B){if(B.isVisible()){var E=B.getModel(),b=E.source,C=E.target;g.includes(b)&&g.includes(C)&&o(B,"select",t)&&(p.push(B),a.setItemState(B,t.selectedState,!0))}})});var y=[];this.includeCombos&&a.getCombos().forEach(function(m){if(m.isVisible()&&A(m,l,c,h,d)&&o(m,"select",t)){y.push(m);var w=m.getModel();g.push(w.id),a.setItemState(m,s,!0)}}),this.selectedEdges=p,this.selectedNodes=v,this.selectedCombos=y,this.onSelect&&this.onSelect(v,p,y),a.emit("nodeselectchange",{selectedItems:{nodes:v,edges:p,combos:y},select:!0})},createBrush:function(){var e=this,t=e.graph.get("canvas").addShape("rect",{attrs:e.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,this.delegate=t,t},updateBrush:function(e){var t=this.originPoint;this.brush.attr({width:xI(e.canvasX-t.x),height:xI(e.canvasY-t.y),x:xd(e.canvasX,t.x),y:xd(e.canvasY,t.y)})},onKeyDown:function(e){var t=e.key;if(t){var n=this.trigger.toLowerCase(),a=t.toLowerCase();a===n||a==="control"&&n==="ctrl"||a==="ctrl"&&n==="control"?this.keydown=!0:this.keydown=!1}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}};var _I="shift",q0e=["shift","ctrl","alt","control"];const J0e={getDefaultCfg:function(){return{multiple:!0,trigger:_I,selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){var e=this;return q0e.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=_I,console.warn("Behavior click-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'")),e.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(e){var t=this,n=e.item;if(!(!n||n.destroyed)){var a=n.getType(),i=t.graph,o=t.keydown,A=t.multiple,s=t.shouldUpdate,u=t.shouldBegin;if(u(e,t)){if(!o||!A){var f=i.findAllByState("node",t.selectedState).concat(i.findAllByState("edge",t.selectedState)).concat(i.findAllByState("combo",t.selectedState));ye(f,function(v){v!==n&&i.setItemState(v,t.selectedState,!1)})}var l=function(){switch(a){case"node":return t.selectNode;case"edge":return t.selectEdge;case"combo":return t.selectCombo;default:return!1}}();if(!l){var c=i.findAllByState("node",t.selectedState),h=i.findAllByState("edge",t.selectedState),d=i.findAllByState("combo",t.selectedState);i.emit("nodeselectchange",{selectedItems:{nodes:c,edges:h,combos:d},select:!1});return}if(n.hasState(t.selectedState)){s(e,t)&&i.setItemState(n,t.selectedState,!1);var c=i.findAllByState("node",t.selectedState),h=i.findAllByState("edge",t.selectedState),d=i.findAllByState("combo",t.selectedState);i.emit("nodeselectchange",{target:n,selectedItems:{nodes:c,edges:h,combos:d},select:!1})}else{s(e,t)&&i.setItemState(n,t.selectedState,!0);var c=i.findAllByState("node",t.selectedState),h=i.findAllByState("edge",t.selectedState),d=i.findAllByState("combo",t.selectedState);i.emit("nodeselectchange",{target:n,selectedItems:{nodes:c,edges:h,combos:d},select:!0})}}}},onCanvasClick:function(e){var t=this,n=this,a=n.graph,i=n.shouldBegin;if(i(e,this)){var o=a.findAllByState("node",this.selectedState);ye(o,function(u){a.setItemState(u,t.selectedState,!1)});var A=a.findAllByState("edge",this.selectedState);ye(A,function(u){a.setItemState(u,t.selectedState,!1)});var s=a.findAllByState("combo",this.selectedState);ye(s,function(u){a.setItemState(u,t.selectedState,!1)}),a.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})}},onKeyDown:function(e){var t=this,n=e.key;n&&(n.toLowerCase()===this.trigger.toLowerCase()||n.toLowerCase()==="control"?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.keydown=!1}};var eye=Xa,Cd=.05;const tye={getDefaultCfg:function(){return this.isFireFox=IP()==="firefox",{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var e=this.fixSelectedItems;return e.fixState||(e.fixState="selected"),e.fixAll&&(e.fixLineWidth=!0,e.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(e){var t=e.originalEvent.touches,n=t[0],a=t[1];e.preventDefault(),a&&(this.shouldBegin&&!this.shouldBegin(e,this)||(this.startPoint={pageX:n.pageX,pageY:n.pageY},this.moveable=!0,a&&(this.endPoint={pageX:a.pageX,pageY:a.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(e){if(this.moveable){e.preventDefault();var t=e.originalEvent.touches,n=t[0],a=t[1];if(a){this.endPoint||(this.endPoint={pageX:a.pageX,pageY:a.pageY});var i=function(v,g){return Math.hypot(g.x-v.x,g.y-v.y)},o=i({x:n.pageX,y:n.pageY},{x:a.pageX,y:a.pageY})/i({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),A=this.originScale*o;this.currentScale=A;var s=this.get("minZoom")||this.graph.get("minZoom"),u=this.get("maxZoom")||this.graph.get("maxZoom");if(!(A>u||A<s)){var f=this.get("animate"),l=this.get("animateCfg"),c=this.graph.get("canvas"),h=c.getPointByClient(e.clientX,e.clientY);this.graph.zoomTo(A,{x:h.x,y:h.y},f,l),this.graph.emit("wheelzoom",e)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(e){var t=this,n=this,a=n.graph,i=n.fixSelectedItems;if(!(this.shouldBegin&&!this.shouldBegin(e,this))&&this.shouldUpdate(e,this)){e.preventDefault();var o=a.get("canvas"),A=o.getPointByClient(e.clientX,e.clientY),s=this.get("sensitivity"),u=a.getZoom(),f=u,l=u;this.isFireFox?e.deltaY>0||e.wheelDelta<0?f=1-Cd*s:f=1/(1-Cd*s):e.wheelDelta<0?f=1-Cd*s:f=1/(1-Cd*s),l=u*f;var c=this.get("minZoom")||a.get("minZoom"),h=this.get("maxZoom")||a.get("maxZoom");l>h?l=h:l<c&&(l=c);var d=this.get("enableOptimize");if(d){var v=this.get("optimizeZoom"),g=this.get("optimized"),p=a.getNodes(),y=a.getEdges(),m=p.length,w=y.length;if(!g){for(var B=0;B<m;B++){var E=p[B];if(!E.destroyed)for(var b=E.get("group").get("children"),C=b.length,_=0;_<C;_++){var x=b[_];!x.destoryed&&!x.get("isKeyShape")&&(x.set("ori-visibility",x.get("ori-visibility")||x.get("visible")),x.hide())}}for(var M=0;M<w;M++)for(var S=y[M],b=S.get("group").get("children"),C=b.length,_=0;_<C;_++){var x=b[_];x.set("ori-visibility",x.get("ori-visibility")||x.get("visible")),x.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var I=setTimeout(function(){var et=a.getZoom(),ae=t.get("optimized");if(ae){t.set("optimized",!1);for(var L=0;L<m;L++){var be=p[L],Ne=be.get("group").get("children"),pe=Ne.length;if(et<v){var ze=be.getKeyShape(),Ke=ze.get("ori-visibility");ze.set("ori-visibility",void 0),Ke&&ze.show()}else for(var Xe=0;Xe<pe;Xe++){var Ze=Ne[Xe],Ke=Ze.get("ori-visibility");Ze.set("ori-visibility",void 0),!Ze.get("visible")&&Ke&&Ke&&Ze.show()}}for(var gt=0;gt<w;gt++){var Ot=y[gt],Ne=Ot.get("group").get("children"),pe=Ne.length;if(et<v){var ze=Ot.getKeyShape(),Ke=ze.get("ori-visibility");ze.set("ori-visibility",void 0),Ke&&ze.show()}else for(var Xe=0;Xe<pe;Xe++){var Ze=Ne[Xe];if(!Ze.get("visible")){var Ke=Ze.get("ori-visibility");Ze.set("ori-visibility",void 0),Ke&&Ze.show()}}}}},100);this.set("timeout",I)}if(u<=1){var D=void 0,O=void 0;if(i.fixAll||i.fixLineWidth||i.fixLabel){D=a.findAllByState("node",i.fixState),O=a.findAllByState("edge",i.fixState);for(var F=u/l,U=D.length,Q=0;Q<U;Q++){var E=D[Q],N=E.getContainer(),R=E.getModel(),J=E.getOriginStyle(),re=E.getStateStyle(i.fixState),ee=E.get("shapeFactory").getShape(R.type).getStateStyle(i.fixState,E)[i.fixState];if(i.fixAll){if(l<=1){var q=Xt(N.getMatrix());q||(q=[1,0,0,0,1,0,0,0,1]);var ve=E.getModel(),Me=ve.x,Re=ve.y;q=eye(q,[["t",-Me,-Re],["s",F,F],["t",Me,Re]]),N.setMatrix(q)}}else for(var b=N.get("children"),C=b.length,_=0;_<C;_++){var x=b[_],tt=void 0,st=void 0;if(i.fixLabel){var at=x.get("type");if(at==="text"){tt=x.attr("fontSize")||12;var Et=re[x.get("name")],bt=ee[x.get("name")],fr=Et?Et.fontSize:12,Qt=bt?bt.fontSize:12,Kt=fr||Qt||12;if(l<=1&&x.attr("fontSize",Kt/l),st)break}}if(i.fixLineWidth&&x.get("isKeyShape")){st=x.attr("lineWidth")||0;var gr=re.lineWidth||ee.lineWidth||J.lineWidth||0;if(l<=1&&x.attr("lineWidth",gr/l),tt)break}}}for(var lr=O.length,Ht=0;Ht<lr;Ht++)for(var S=O[Ht],N=S.getContainer(),b=N.get("children"),R=S.getModel(),re=S.getStateStyle(i.fixState),ee=S.get("shapeFactory").getShape(R.type).getStateStyle(i.fixState,S)[i.fixState],C=b.length,_=0;_<C;_++){var x=b[_],tt=void 0,st=void 0;if(i.fixLabel||i.fixAll){var at=x.get("type");if(at==="text"){tt=x.attr("fontSize")||12;var Et=re[x.get("name")],bt=ee[x.get("name")],fr=Et?Et.fontSize:12,Qt=bt?bt.fontSize:12,Kt=fr||Qt||12;if(l<=1&&x.attr("fontSize",Kt/l),st)break}}if((i.fixLineWidth||i.fixAll)&&x.get("isKeyShape")){st=x.attr("lineWidth")||0;var gr=re.lineWidth||ee.lineWidth||1;if(l<=1&&x.attr("lineWidth",gr/l),tt)break}}}}var tr=this.get("animate"),Kr=this.get("animateCfg");a.zoomTo(l,{x:A.x,y:A.y},tr,Kr),a.emit("wheelzoom",e)}}},AQ={onMouseEnter:function(e){var t=e.item;this.currentTarget=t,this.showTooltip(e),this.graph.emit("tooltipchange",{item:e.item,action:"show"})},onMouseMove:function(e){if(!this.shouldUpdate(e,this)){this.hideTooltip();return}!this.currentTarget||e.item!==this.currentTarget||this.updatePosition(e)},onMouseLeave:function(e){this.shouldEnd(e,this)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(e){var t=this.container;if(!(!e.item||e.item.destroyed)){t||(t=this.createTooltip(this.graph.get("canvas")),this.container=t);var n=this.formatText(e.item.get("model"),e);t.innerHTML=n,Wt(this.container,{visibility:"visible"}),this.updatePosition(e)}},hideTooltip:function(){Wt(this.container,{visibility:"hidden"})},updatePosition:function(e){var t=this.get("shouldBegin"),n=this,a=n.width,i=n.height,o=n.container,A=n.graph;if(!t(e,this)){Wt(o,{visibility:"hidden"});return}var s=A.getPointByClient(e.clientX,e.clientY),u=A.getCanvasByPoint(s.x,s.y),f=u.x,l=u.y,c=o.getBoundingClientRect();f>a/2?f-=c.width:f+=this.offset,l>i/2?l-=c.height:l+=this.offset;var h="".concat(f,"px"),d="".concat(l,"px");Wt(this.container,{left:h,top:d,visibility:"visible"})},createTooltip:function(e){var t=e.get("el");t.style.position="relative";var n=Sr('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>'));return t.parentNode.appendChild(n),Wt(n,{position:"absolute",visibility:"visible"}),this.width=e.get("width"),this.height=e.get("height"),this.container=n,this.graph.get("tooltips").push(n),n}},rye=P({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},AQ),nye=P({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: ".concat(t.source," target: ").concat(t.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},AQ);var SI="click",aye=["click","dblclick"];const iye={getDefaultCfg:function(){return{trigger:SI,onChange:function(){}}},getEvents:function(){var e,t;return aye.includes(this.trigger)?t=this.trigger:(t=SI,console.warn("Behavior collapse-expand 的 trigger 参数不合法，请输入 'click' 或 'dblclick'")),e={},e["node:".concat(t)]="onNodeClick",e.touchstart="onNodeClick",e},onNodeClick:function(e){var t=this;if(this.trigger==="click"){if(this.timer){clearTimeout(this.timer),this.timer=0;return}this.timer=setTimeout(function(){t.toggle(e),clearTimeout(t.timer),t.timer=0},200)}else this.toggle(e)},toggle:function(e){var t=e.item;if(t){var n=this.graph.findDataById(t.get("id"));if(n){var a=n.children;if(!(!a||a.length===0)){var i=!n.collapsed;this.shouldBegin(e,i,this)&&(n.collapsed=i,t.getModel().collapsed=i,this.graph.emit("itemcollapsed",{item:e.item,collapsed:i}),this.shouldUpdate(e,i,this)&&(this.onChange(t,i,this),this.graph.layout()))}}}}};var oye=zo.calculationItemsBBox,Aye=function r(e,t){if(t(e)!==!1&&e){var n=e.get("combos");if(n.length===0)return!1;ye(n,function(a){r(a,t)})}};const sye={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:mousedown":"onMouseDown","combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(e){var t=e.item;if(!t||t.destroyed||!this.shouldUpdate(e,this))return!1;var n=t.getType();return n==="combo"},onMouseDown:function(e){this.origin={x:e.x,y:e.y}},onDragStart:function(e){var t=this,n=this.graph,a=e.item;if(this.currentShouldEnd=!0,!!this.validationCombo(e)){this.targets=[];var i=n.findAllByState("combo",this.selectedState),o=a.get("id"),A=i.filter(function(u){var f=u.get("id");return o===f});A.length===0?this.targets.push(a):this.targets=i;var s=[];this.targets.forEach(function(u){var f=u.getModel(),l=f.x,c=f.y,h=f.id;s.push({x:l,y:c,id:h})}),this.set("beforeDragItems",s),this.activeState&&this.targets.map(function(u){var f=u.getModel();if(f.parentId){var l=n.findById(f.parentId);l&&n.setItemState(l,t.activeState,!0)}}),this.point={},this.originPoint={},this.currentItemChildCombos=[],Aye(a,function(u){if(u.destroyed)return!1;var f=u.getModel();return t.currentItemChildCombos.push(f.id),!0})}},onDrag:function(e){var t=this;if(this.origin&&this.validationCombo(e))if(this.enableDelegate)this.updateDelegate(e);else{if(this.activeState){var n=this.graph,a=e.item,i=a.getModel(),o=n.getCombos(),A=a.getBBox(),s=A.centerX,u=A.centerY,f=A.width,l=o.filter(function(c){var h=c.getModel();return i.parentId,h.id!==i.id&&!t.currentItemChildCombos.includes(h.id)});l.map(function(c){var h=c.getBBox(),d=h.centerX,v=h.centerY,g=h.width,p=s-d,y=u-v,m=2*Math.sqrt(p*p+y*y);f+g-m>.8*f?n.setItemState(c,t.activeState,!0):n.setItemState(c,t.activeState,!1)})}ye(this.targets,function(c){t.updateCombo(c,e)}),this.onlyChangeComboSize&&this.updateParentCombos()}},updatePositions:function(e,t){var n=this;(this.enableDelegate||t)&&ye(this.targets,function(a){n.updateCombo(a,e,t)})},onDrop:function(e){var t=this,n=e.item;if(this.currentShouldEnd=this.shouldEnd(e,n,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!n||!this.targets||n.destroyed)){var a=this.graph,i=n.getModel();this.targets.map(function(o){var A=o.getModel();A.parentId!==i.id?(t.activeState&&a.setItemState(n,t.activeState,!1),t.onlyChangeComboSize?a.updateCombo(o):a.updateComboTree(o,i.id,!1)):a.updateCombo(n)}),this.end(n,e),this.endComparison=!0}},onNodeDrop:function(e){var t=this;if(!(!this.targets||this.targets.length===0)){var n=this.graph,a=e.item,i=a.getModel().comboId,o=i?n.findById(i):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){var A;if(i){if(this.activeState){var s=n.findById(i);n.setItemState(s,this.activeState,!1)}this.targets.map(function(u){t.onlyChangeComboSize?n.updateCombo(u):i!==u.getID()&&(A=n.findById(i),i!==u.getModel().parentId&&n.updateComboTree(u,i,!1))})}else this.targets.map(function(u){if(t.onlyChangeComboSize)n.updateCombo(u);else{var f=u.getModel();f.comboId&&n.updateComboTree(u,void 0,!1)}});this.endComparison=!0,this.end(A,e)}}},onDragEnter:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,n=this.graph;this.activeState&&n.setItemState(t,this.activeState,!0)}},onDragLeave:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,n=this.graph;this.activeState&&n.setItemState(t,this.activeState,!1)}},onDragEnd:function(e){if(!(!this.targets||this.targets.length===0)){var t=e.item;this.currentShouldEnd&&this.updatePositions(e);var n=this.getParentCombo(t.getModel().parentId),a=this.graph;n&&this.activeState&&a.setItemState(n,this.activeState,!1),this.end(void 0,e)}},end:function(e,t){var n=this;if(this.origin){var a=this.graph;if(this.delegateShape){var i=a.get("delegateGroup");i.clear(),this.delegateShape=null}if(e&&this.activeState&&a.setItemState(e,this.activeState,!1),!e){var o=a.get("enabledStack")&&this.enableStack,A={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}};this.targets.map(function(s){if(!n.onlyChangeComboSize)a.updateComboTree(s,void 0,o);else{a.updateCombo(s);var u=s.getModel(),f=u.x,l=u.y,c=u.id;A.after.combos.push({x:f,y:l,id:c}),a.pushStack("update",A)}})}this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(e,t,n){var a=this;if(n===void 0&&(n={}),t(e,n)!==!1&&e){var i=e.get("combos");ye(i,function(A){a.traverse(A,t,n)});var o=e.get("nodes");ye(o,function(A){a.traverse(A,t,n)})}},updateCombo:function(e,t,n){this.updateSingleItem(e,t,n);var a={};this.traverse(e,function(i,o){return i.destroyed?!1:(i.getEdges().forEach(function(A){return o[A.getID()]=A}),!0)},a),Object.values(a).forEach(function(i){return i.refresh()})},updateSingleItem:function(e,t,n){var a=this.origin,i=this.graph,o=e.getModel(),A=e.get("id");this.point[A]||(this.point[A]={x:o.x,y:o.y});var s=t.x-a.x+this.point[A].x,u=t.y-a.y+this.point[A].y;n&&(s+=a.x-t.x,u+=a.y-t.y),i.updateItem(e,{x:s,y:u},!1)},getParentCombo:function(e){var t=this.graph;if(e){var n=t.findById(e);if(n)return n}},updateDelegate:function(e){var t=this.graph;if(this.delegateShape){var c=e.x-this.origin.x+this.originPoint.minX,h=e.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:c,y:h})}else{var n=t.get("delegateGroup"),a=null;this.targets.length>1?a=oye(this.targets):a=this.targets[0].getBBox();var i=a.x,o=a.y,A=a.width,s=a.height,u=a.minX,f=a.minY;this.originPoint={x:i,y:o,width:A,height:s,minX:u,minY:f};var l=P(P({},ws.delegateStyle),this.delegateStyle);this.delegateShape=n.addShape("rect",{attrs:P({width:a.width,height:a.height,x:a.x,y:a.y},l),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}},updateParentCombos:function(){var e=this,t=e.graph,n=e.targets,a={};n==null||n.forEach(function(i){var o=i.getModel().parentId;o&&(a[o]=t.findById(o))}),Object.values(a).forEach(function(i){i&&t.updateCombo(i)})}};var MI="dblclick",uye=["click","dblclick"];const fye={getDefaultCfg:function(){return{trigger:MI,relayout:!0}},getEvents:function(){var e,t;return uye.includes(this.trigger)?t=this.trigger:(t=MI,console.warn("Behavior collapse-expand-group 的 trigger 参数不合法，请输入 'click' 或 'dblclick'")),e={},e["combo:".concat(t)]="onComboClick",e},onComboClick:function(e){var t=e.item,n=this,a=n.graph,i=n.relayout;if(!(!t||t.destroyed||t.getType()!=="combo")){var o=t.getModel(),A=o.id;A&&(a.collapseExpandCombo(A),i&&a.get("layout")?a.layout():a.refreshPositions())}}};var lye=zo.isPolygonsIntersect,cye=zo.pathToPoints,II="shift",hye=["drag","shift","ctrl","alt","control"],dye=function(e,t){var n,a=e.getKeyShape();if(e.get("type")==="path")n=cye(a.attr("path"));else{var i=a.getCanvasBBox();n=[[i.minX,i.minY],[i.maxX,i.minY],[i.maxX,i.maxY],[i.minX,i.maxY]]}return lye(t,n)};const vye={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:II,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return hye.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=II,console.warn("Behavior lasso-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(e){var t=this.lasso,n=e.item;n||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates("dragstart"),t||(t=this.createLasso()),this.dragging=!0,this.originPoint={x:e.x,y:e.y},this.points.push(this.originPoint),t.show())},onDragMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||(this.points.push({x:e.x,y:e.y}),this.updateLasso(e)))},onDragEnd:function(e){!this.lasso&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var e=this.points,t=[];return e.length&&(e.forEach(function(n,a){a===0?t.push(["M",n.x,n.y]):t.push(["L",n.x,n.y])}),t.push(["L",e[0].x,e[0].y])),t},clearStates:function(e){e===void 0&&(e="canvas:click");var t=this,n=t.graph,a=t.selectedState,i=t.shouldDeselect,o=n.findAllByState("node",a),A=n.findAllByState("edge",a);(!i||i({action:e,nodes:o,edges:A}))&&(o.forEach(function(s){return n.setItemState(s,a,!1)}),A.forEach(function(s){return n.setItemState(s,a,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var e=this,t=this,n=t.graph,a=t.shouldUpdate,i=this.points.map(function(f){return[n.getCanvasByPoint(f.x,f.y).x,n.getCanvasByPoint(f.x,f.y).y]}),o=this.selectedState,A=[],s=[];n.getNodes().forEach(function(f){if(f.isVisible()&&dye(f,i)&&a(f,"select",e)){A.push(f);var l=f.getModel();s.push(l.id),n.setItemState(f,o,!0)}});var u=[];this.includeEdges&&A.forEach(function(f){var l=f.getOutEdges();l.forEach(function(c){if(c.isVisible()){var h=c.getModel(),d=h.source,v=h.target;s.includes(d)&&s.includes(v)&&a(c,"select",e)&&(u.push(c),n.setItemState(c,e.selectedState,!0))}})}),this.selectedEdges=u,this.selectedNodes=A,this.onSelect&&this.onSelect(A,u),n.emit("nodeselectchange",{selectedItems:{nodes:A,edges:u},select:!0})},createLasso:function(){var e=this,t=e.graph.get("delegateGroup").addShape("path",{attrs:P({path:[]},e.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.delegate=t,this.points=[],t},updateLasso:function(e){var t=this;this.lasso.attr({path:t.getLassoPath()})},onKeyDown:function(e){var t=e.key;t&&(t.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}};var TI="click",gye=["click","drag"],FI=void 0,pye=["shift","ctrl","control","alt","meta",void 0];const yye={getDefaultCfg:function(){return{trigger:TI,key:FI,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var e=this;gye.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=TI,console.warn("Behavior create-edge 的 trigger 参数不合法，请输入 'click'，'drag'")),e.key&&pye.indexOf(e.key.toLowerCase())===-1&&(e.trigger=FI,console.warn("Behavior create-edge 的 key 参数不合法，请输入 'shift'，'ctrl'，'alt'，'control'，或 undefined"));var t;return e.trigger==="drag"?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:e.trigger==="click"&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),e.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(e){var t=this;if(!(t.key&&!t.keydown)){var n=e.item;(!n||n.getID()===t.source||n.getType()!=="node")&&t.cancelCreating({item:t.edge,x:e.x,y:e.y})}},onClick:function(e){var t=this;if(!(t.key&&!t.keydown)){var n=e.item,a=t.graph,i=n.getModel(),o=t.getEdgeConfig;if(t.addingEdge&&t.edge){if(!t.shouldEnd(e,t))return;var A=void 0;o&&Lr(o)?A=o({source:t.source,target:i.id},t):A=t.edgeConfig;var s=P({target:i.id},A);if(t.source===i.id&&(s.type="loop"),a.emit("beforecreateedge",{}),a.updateItem(t.edge,s,!1),a.get("enabledStack")){var u=P(P({},t.edge.getModel()),{itemType:"edge"}),f={};f.edges=[u],a.pushStack("add",{before:{},after:f})}a.emit("aftercreateedge",{edge:t.edge}),t.edge.getKeyShape().set("capture",!0),t.edge=null,t.addingEdge=!1}else{if(!t.shouldBegin(e,t))return;var A=void 0;o&&Lr(o)?A=o({source:i.id,target:i.id},t):A=t.edgeConfig,t.edge=a.addItem("edge",P({source:i.id,target:i.id},A),!1),t.source=i.id,t.addingEdge=!0,t.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(e){var t=this;if(!(t.key&&!t.keydown)){t.edge&&t.edge.destroyed&&t.cancelCreating({item:t.edge});var n={x:e.x,y:e.y};if(!t.graph.findById(t.source)){t.addingEdge=!1;return}t.addingEdge&&t.edge&&t.graph.updateItem(t.edge,{target:n},!1)}},cancelCreating:function(e){var t,n,a=this;if(!(a.key&&!a.keydown)){var i=a.graph,o=e.item;if(a.addingEdge&&(a.edge===o||!((n=(t=e.target)===null||t===void 0?void 0:t.isCanvas)===null||n===void 0)&&n.call(t))){a.edge&&!a.edge.destroyed&&i.removeItem(a.edge,!1),a.edge=null,a.addingEdge=!1;return}}},onKeyDown:function(e){var t=this,n=e.key;n&&(n.toLowerCase()===t.key.toLowerCase()?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.addingEdge&&e.edge&&(e.graph.removeItem(e.edge,!1),e.addingEdge=!1,e.edge=null),this.keydown=!1}};var LI="ctrl",mye=["shift","ctrl","alt","control"],wye="1";const Bye={getDefaultCfg:function(){return{trigger:LI,combinedKey:wye,functionName:"fitView",functionParams:[]}},getEvents:function(){return mye.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=LI,console.warn("Behavior shortcuts-fit-view 的 trigger 参数 '".concat(this.trigger,"' 不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'"))),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(e){var t=e.key;if(t){var n=this.trigger.toLowerCase(),a=t.toLowerCase();this.triggerKeydown||(a===n||a==="control"&&n==="ctrl"||a==="ctrl"&&n==="control"?this.triggerKeydown=!0:this.triggerKeydown=!1);var i=this.graph;if(!i[this.functionName])return console.warn("Behavior shortcuts-fit-view 的 functionName 参数 '".concat(this.functionName,"' 不合法，它不是 Graph 的一个函数名")),{};if(this.triggerKeydown&&!this.combinedKey){this.functionParams&&this.functionParams.length?i[this.functionName].apply(i,this.functionParams):i[this.functionName]();return}var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(a===o||a==="control"&&o==="ctrl"||a==="ctrl"&&o==="control")&&(this.functionParams&&this.functionParams.length?i[this.functionName].apply(i,this.functionParams):i[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}};var Eye=["shift","ctrl","alt","control","meta"];const bye={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return(!this.zoomKey||Eye.indexOf(this.zoomKey)===-1)&&(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(e){var t=this;if(this.allowDrag(e)){var n=this.graph,a=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];a.includes("control")&&a.push("ctrl");var i=a.some(function(R){return e["".concat(R,"Key")]});if(i){var o=n.get("canvas"),A=o.getPointByClient(e.clientX,e.clientY),s=n.getZoom();e.wheelDelta>0?s=s+s*.05:s=s-s*.05,n.zoomTo(s,{x:A.x,y:A.y})}else{var u=e.deltaX||e.movementX,f=e.deltaY||e.movementY;!f&&navigator.userAgent.indexOf("Firefox")>-1&&(f=-e.wheelDelta*125/3);var l=this.graph.get("width"),c=this.graph.get("height"),h=this.graph.get("canvas").getCanvasBBox(),d=this.scalableRange,v=this.scalableRange;d<1&&d>-1&&(d=l*d,v=c*v);var g=h.minX,p=h.maxX,y=h.minY,m=h.maxY;u>0?p<-d?u=0:p-u<-d&&(u=p+d):u<0&&(g>l+d?u=0:g-u>l+d&&(u=g-(l+d))),f>0?m<-v?f=0:m-f<-v&&(f=m+v):f<0&&(y>c+v?f=0:y-f>c+v&&(f=y-(c+v))),this.get("direction")==="x"?f=0:this.get("direction")==="y"&&(u=0),n.translate(-u,-f)}e.preventDefault();var w=this.get("enableOptimize");if(w){var B=this.get("optimizeZoom"),E=this.get("optimized"),b=n.getNodes(),C=n.getEdges(),_=b.length,x=C.length;if(!E){for(var M=0;M<_;M++){var S=b[M];if(!S.destroyed)for(var I=S.get("group").get("children"),D=I.length,O=0;O<D;O++){var F=I[O];!F.destoryed&&!F.get("isKeyShape")&&(F.set("ori-visibility",F.get("ori-visibility")||F.get("visible")),F.hide())}}for(var U=0;U<x;U++)for(var Q=C[U],I=Q.get("group").get("children"),D=I.length,O=0;O<D;O++){var F=I[O];F.set("ori-visibility",F.get("ori-visibility")||F.get("visible")),F.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var N=setTimeout(function(){var R=n.getZoom(),J=t.get("optimized");if(J){t.set("optimized",!1);for(var re=0;re<_;re++){var ee=b[re],q=ee.get("group").get("children"),ve=q.length;if(R<B){var Me=ee.getKeyShape(),Re=Me.get("ori-visibility");Re&&Me.show()}else for(var tt=0;tt<ve;tt++){var st=q[tt],Re=st.get("ori-visibility");!st.get("visible")&&Re&&Re&&st.show()}}for(var at=0;at<x;at++){var Et=C[at],q=Et.get("group").get("children"),ve=q.length;if(R<B){var Me=Et.getKeyShape(),Re=Me.get("ori-visibility");Re&&Me.show()}else for(var tt=0;tt<ve;tt++){var st=q[tt];if(!st.get("visible")){var Re=st.get("ori-visibility");Re&&st.show()}}}}},100);this.set("timeout",N)}}},allowDrag:function(e){var t,n,a=e.target,i=a&&a.isCanvas&&a.isCanvas();if(wc(this.allowDragOnItem)&&!this.allowDragOnItem&&!i)return!1;if(On(this.allowDragOnItem)){var o=this.allowDragOnItem,A=o.node,s=o.edge,u=o.combo,f=(n=(t=e.item)===null||t===void 0?void 0:t.getType)===null||n===void 0?void 0:n.call(t);if(!A&&f==="node"||!s&&f==="edge"||!u&&f==="combo")return!1}return!0}};var xye={"drag-canvas":W0e,"zoom-canvas":tye,"drag-node":V0e,"activate-relations":X0e,"brush-select":Z0e,"click-select":J0e,"lasso-select":vye,tooltip:rye,"edge-tooltip":nye,"collapse-expand":iye,"drag-combo":sye,"collapse-expand-combo":fye,"create-edge":yye,"shortcuts-call":Bye,"scroll-canvas":bye};ye(xye,function(r,e){SO(e,r)});var Cye=P(P({},QK),j9);fn.Grid;fn.Minimap;fn.Bundling;fn.Menu;var _ye=fn.Fisheye;fn.ToolBar;fn.Tooltip;var Sye=fn.TimeBar,Mye=fn.ImageMinimap,Iye=fn.EdgeFilterLens,Tye=fn.SnapLine;fn.Legend;var Fye=fn.Annotation;const us={version:ws.version,Graph:FP,TreeGraph:Nve,Util:zo,Layout:Yt.Layouts,TreeLayout:Eve,registerLayout:bve,Global:ws,registerBehavior:SO,registerCombo:SV,registerEdge:_O,registerNode:ko,Minimap:fn.Minimap,Grid:fn.Grid,Bundling:fn.Bundling,Menu:fn.Menu,ToolBar:fn.ToolBar,Tooltip:fn.Tooltip,Legend:fn.Legend,TimeBar:Sye,SnapLine:Tye,Fisheye:_ye,ImageMinimap:Mye,EdgeFilterLens:Iye,Annotation:Fye,Algorithm:Cye,Arrow:BO,Marker:EO,Shape:xr};us.version="4.8.20";const Lye=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],Dye="#fff",Oye="default",Uye="#777",DI=us.Util.getColorSetsBySubjectColors(Lye,Dye,Oye,Uye),Mp=Q3("GraphData",{state:()=>({data:null,graph:null}),actions:{async fetchData(){const r=await K3();r.status==200&&(this.data=r.data,r.data.nodes.forEach(e=>{e.x!=null&&this.graph.destroyLayout()}),this.graph.data(this.data),this.updateNode())},updateNode(){this.data.nodes.forEach(r=>{r.comboId=r.sourceData.comboId;const e=this.data.combos.some(t=>t.id==r.comboId);r.comboId&&!e&&this.data.combos.push({id:r.comboId,label:r.comboId}),r.img="./assets/icons/"+r.sourceData.deviceType+".svg"}),this.data.combos.forEach((r,e)=>{const t=DI[e%DI.length];r.style={stroke:t.mainStroke,fill:t.mainFill,opacity:.8},r.labelCfg||(r.labelCfg={position:"top"})}),this.graph.render()}},getters:{}}),Nye={class:"body"},kye=cf({__name:"index",props:["selectedData"],setup(r){const e=r,t=Mp(),n=xl([]);Fw(async()=>{const i=await NT("combo");i.status==200&&(n.value=i.data)});const a=()=>{t.updateNode()};return(i,o)=>{const A=ia("el-input"),s=ia("el-form-item"),u=ia("el-option"),f=ia("el-select"),l=ia("el-form");return Qn(),oa("div",Nye,[kr(l,{"label-position":"top"},{default:qn(()=>[kr(s,{label:"名称"},{default:qn(()=>[kr(A,{disabled:"",modelValue:e.selectedData.sourceData.deviceName,"onUpdate:modelValue":o[0]||(o[0]=c=>e.selectedData.sourceData.deviceName=c)},null,8,["modelValue"])]),_:1}),kr(s,{label:"分区"},{default:qn(()=>[kr(f,{modelValue:e.selectedData.sourceData.comboId,"onUpdate:modelValue":o[1]||(o[1]=c=>e.selectedData.sourceData.comboId=c),placeholder:"",onBlur:a},{default:qn(()=>[(Qn(!0),oa(Sg,null,Lw(n.value,c=>(Qn(),Dw(u,{key:c.id,label:c.label,value:c.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),kr(s,{label:"设备类型"},{default:qn(()=>[kr(A,{disabled:"",modelValue:e.selectedData.sourceData.deviceType,"onUpdate:modelValue":o[2]||(o[2]=c=>e.selectedData.sourceData.deviceType=c)},null,8,["modelValue"])]),_:1})]),_:1})])}}});const Pye=mc(kye,[["__scopeId","data-v-3d374560"]]),Qye={class:"body"},Rye=cf({__name:"index",props:["selectedData"],setup(r){const e=r,t=Mp(),n=xl([]);Fw(async()=>{const i=await NT("link_type");i.status==200&&(n.value=i.data)});const a=()=>{t.graph.render()};return(i,o)=>{const A=ia("el-input"),s=ia("el-form-item"),u=ia("el-option"),f=ia("el-select"),l=ia("el-form");return Qn(),oa("div",Qye,[kr(l,{"label-position":"top"},{default:qn(()=>[kr(s,{label:"源设备名"},{default:qn(()=>[kr(A,{disabled:"",modelValue:e.selectedData.sourceData.sourceNode.deviceName,"onUpdate:modelValue":o[0]||(o[0]=c=>e.selectedData.sourceData.sourceNode.deviceName=c)},null,8,["modelValue"])]),_:1}),kr(s,{label:"目标备名"},{default:qn(()=>[kr(A,{modelValue:e.selectedData.sourceData.targetNode.deviceName,"onUpdate:modelValue":o[1]||(o[1]=c=>e.selectedData.sourceData.targetNode.deviceName=c),disabled:""},null,8,["modelValue"])]),_:1}),kr(s,{label:"链路类型"},{default:qn(()=>[kr(f,{modelValue:e.selectedData.sourceData.linkType,"onUpdate:modelValue":o[2]||(o[2]=c=>e.selectedData.sourceData.linkType=c),placeholder:"",onBlur:a},{default:qn(()=>[(Qn(!0),oa(Sg,null,Lw(n.value,c=>(Qn(),Dw(u,{key:c.id,label:c.label,value:c.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})])}}});const Hye=mc(Rye,[["__scopeId","data-v-c92eb464"]]),Gye=r=>(OT("data-v-c1743128"),r=r(),UT(),r),zye={key:0,class:"panel"},Kye={class:"header"},jye=Gye(()=>yA("div",{class:"title"},"属性面板",-1)),$ye={class:"close"},Wye={key:0},Vye={key:1},Xye=cf({__name:"index",props:["selectedData","selectedType"],setup(r,{emit:e}){const t=r,n=()=>{e("close")};return(a,i)=>{const o=ia("SvgIcon"),A=ia("el-button"),s=ia("el-scrollbar");return Qn(),Dw(R3,{name:"slide"},{default:qn(()=>[t.selectedType?(Qn(),oa("div",zye,[kr(s,null,{default:qn(()=>[yA("div",Kye,[jye,yA("div",$ye,[kr(A,{onClick:n},{default:qn(()=>[kr(o,{name:"close"})]),_:1})])]),t.selectedType==="node"?(Qn(),oa("div",Wye,[kr(Pye,{selectedData:t.selectedData},null,8,["selectedData"])])):t.selectedType==="edge"?(Qn(),oa("div",Vye,[kr(Hye,{selectedData:t.selectedData},null,8,["selectedData"])])):Cm("",!0)]),_:1})])):Cm("",!0)]),_:1})}}});const Yye=mc(Xye,[["__scopeId","data-v-c1743128"]]),Zye={class:"legend-container"},qye=["src"],Jye=cf({__name:"index",props:{items:Array},setup(r){return(e,t)=>(Qn(),oa("div",Zye,[(Qn(!0),oa(Sg,null,Lw(r.items,(n,a)=>(Qn(),oa("div",{key:a,class:"legend-item"},[n.type==="image"?(Qn(),oa("img",{key:0,src:n.content,class:"legend-image"},null,8,qye)):n.type==="line"?(Qn(),oa("div",{key:1,style:H3({backgroundColor:n.color,height:n.thickness+"px"}),class:"legend-line"},null,4)):Cm("",!0),yA("span",null,G3(n.label),1)]))),128))]))}});const eme=mc(Jye,[["__scopeId","data-v-e54510a5"]]);/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var sw=function(r,e){return sw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])},sw(r,e)};function wi(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");sw(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var uw=function(){return uw=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},uw.apply(this,arguments)};function Zn(r,e,t,n){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function A(f){try{u(n.next(f))}catch(l){o(l)}}function s(f){try{u(n.throw(f))}catch(l){o(l)}}function u(f){f.done?i(f.value):a(f.value).then(A,s)}u((n=n.apply(r,e||[])).next())})}function zn(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function A(u){return function(f){return s([u,f])}}function s(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,a=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(f){u=[6,f],a=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function _d(r,e,t){if(t||arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||e)}var No=function(){function r(e,t,n,a){this.left=e,this.top=t,this.width=n,this.height=a}return r.prototype.add=function(e,t,n,a){return new r(this.left+e,this.top+t,this.width+n,this.height+a)},r.fromClientRect=function(e,t){return new r(t.left+e.windowBounds.left,t.top+e.windowBounds.top,t.width,t.height)},r.fromDOMRectList=function(e,t){var n=Array.from(t).find(function(a){return a.width!==0});return n?new r(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):r.EMPTY},r.EMPTY=new r(0,0,0,0),r}(),Ip=function(r,e){return No.fromClientRect(r,e.getBoundingClientRect())},tme=function(r){var e=r.body,t=r.documentElement;if(!e||!t)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,t.scrollWidth),Math.max(e.offsetWidth,t.offsetWidth),Math.max(e.clientWidth,t.clientWidth)),a=Math.max(Math.max(e.scrollHeight,t.scrollHeight),Math.max(e.offsetHeight,t.offsetHeight),Math.max(e.clientHeight,t.clientHeight));return new No(0,0,n,a)},Tp=function(r){for(var e=[],t=0,n=r.length;t<n;){var a=r.charCodeAt(t++);if(a>=55296&&a<=56319&&t<n){var i=r.charCodeAt(t++);(i&64512)===56320?e.push(((a&1023)<<10)+(i&1023)+65536):(e.push(a),t--)}else e.push(a)}return e},an=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var t=r.length;if(!t)return"";for(var n=[],a=-1,i="";++a<t;){var o=r[a];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(a+1===t||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},OI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rme=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Sd=0;Sd<OI.length;Sd++)rme[OI.charCodeAt(Sd)]=Sd;var UI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Md=0;Md<UI.length;Md++)pl[UI.charCodeAt(Md)]=Md;var nme=function(r){var e=r.length*.75,t=r.length,n,a=0,i,o,A,s;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),f=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<t;n+=4)i=pl[r.charCodeAt(n)],o=pl[r.charCodeAt(n+1)],A=pl[r.charCodeAt(n+2)],s=pl[r.charCodeAt(n+3)],f[a++]=i<<2|o>>4,f[a++]=(o&15)<<4|A>>2,f[a++]=(A&3)<<6|s&63;return u},ame=function(r){for(var e=r.length,t=[],n=0;n<e;n+=2)t.push(r[n+1]<<8|r[n]);return t},ime=function(r){for(var e=r.length,t=[],n=0;n<e;n+=4)t.push(r[n+3]<<24|r[n+2]<<16|r[n+1]<<8|r[n]);return t},xs=5,tb=6+5,am=2,ome=tb-xs,sQ=65536>>xs,Ame=1<<xs,im=Ame-1,sme=1024>>xs,ume=sQ+sme,fme=ume,lme=32,cme=fme+lme,hme=65536>>tb,dme=1<<ome,vme=dme-1,NI=function(r,e,t){return r.slice?r.slice(e,t):new Uint16Array(Array.prototype.slice.call(r,e,t))},gme=function(r,e,t){return r.slice?r.slice(e,t):new Uint32Array(Array.prototype.slice.call(r,e,t))},pme=function(r,e){var t=nme(r),n=Array.isArray(t)?ime(t):new Uint32Array(t),a=Array.isArray(t)?ame(t):new Uint16Array(t),i=24,o=NI(a,i/2,n[4]/2),A=n[5]===2?NI(a,(i+n[4])/2):gme(n,Math.ceil((i+n[4])/4));return new yme(n[0],n[1],n[2],n[3],o,A)},yme=function(){function r(e,t,n,a,i,o){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=a,this.index=i,this.data=o}return r.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>xs],t=(t<<am)+(e&im),this.data[t];if(e<=65535)return t=this.index[sQ+(e-55296>>xs)],t=(t<<am)+(e&im),this.data[t];if(e<this.highStart)return t=cme-hme+(e>>tb),t=this.index[t],t+=e>>xs&vme,t=this.index[t],t=(t<<am)+(e&im),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r}(),kI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mme=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Id=0;Id<kI.length;Id++)mme[kI.charCodeAt(Id)]=Id;var wme="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",PI=50,Bme=1,uQ=2,fQ=3,Eme=4,bme=5,QI=7,lQ=8,RI=9,vA=10,fw=11,HI=12,lw=13,xme=14,yl=15,cw=16,Td=17,rl=18,Cme=19,GI=20,hw=21,nl=22,om=23,pu=24,wa=25,ml=26,wl=27,yu=28,_me=29,fs=30,Sme=31,Fd=32,Ld=33,dw=34,vw=35,gw=36,gc=37,pw=38,wv=39,Bv=40,Am=41,cQ=42,Mme=43,Ime=[9001,65288],hQ="!",dr="×",Dd="÷",yw=pme(wme),Eo=[fs,gw],mw=[Bme,uQ,fQ,bme],dQ=[vA,lQ],zI=[wl,ml],Tme=mw.concat(dQ),KI=[pw,wv,Bv,dw,vw],Fme=[yl,lw],Lme=function(r,e){e===void 0&&(e="strict");var t=[],n=[],a=[];return r.forEach(function(i,o){var A=yw.get(i);if(A>PI?(a.push(!0),A-=PI):a.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(i)!==-1)return n.push(o),t.push(cw);if(A===Eme||A===fw){if(o===0)return n.push(o),t.push(fs);var s=t[o-1];return Tme.indexOf(s)===-1?(n.push(n[o-1]),t.push(s)):(n.push(o),t.push(fs))}if(n.push(o),A===Sme)return t.push(e==="strict"?hw:gc);if(A===cQ||A===_me)return t.push(fs);if(A===Mme)return i>=131072&&i<=196605||i>=196608&&i<=262141?t.push(gc):t.push(fs);t.push(A)}),[n,t,a]},sm=function(r,e,t,n){var a=n[t];if(Array.isArray(r)?r.indexOf(a)!==-1:r===a)for(var i=t;i<=n.length;){i++;var o=n[i];if(o===e)return!0;if(o!==vA)break}if(a===vA)for(var i=t;i>0;){i--;var A=n[i];if(Array.isArray(r)?r.indexOf(A)!==-1:r===A)for(var s=t;s<=n.length;){s++;var o=n[s];if(o===e)return!0;if(o!==vA)break}if(A!==vA)break}return!1},jI=function(r,e){for(var t=r;t>=0;){var n=e[t];if(n===vA)t--;else return n}return 0},Dme=function(r,e,t,n,a){if(t[n]===0)return dr;var i=n-1;if(Array.isArray(a)&&a[i]===!0)return dr;var o=i-1,A=i+1,s=e[i],u=o>=0?e[o]:0,f=e[A];if(s===uQ&&f===fQ)return dr;if(mw.indexOf(s)!==-1)return hQ;if(mw.indexOf(f)!==-1||dQ.indexOf(f)!==-1)return dr;if(jI(i,e)===lQ)return Dd;if(yw.get(r[i])===fw||(s===Fd||s===Ld)&&yw.get(r[A])===fw||s===QI||f===QI||s===RI||[vA,lw,yl].indexOf(s)===-1&&f===RI||[Td,rl,Cme,pu,yu].indexOf(f)!==-1||jI(i,e)===nl||sm(om,nl,i,e)||sm([Td,rl],hw,i,e)||sm(HI,HI,i,e))return dr;if(s===vA)return Dd;if(s===om||f===om)return dr;if(f===cw||s===cw)return Dd;if([lw,yl,hw].indexOf(f)!==-1||s===xme||u===gw&&Fme.indexOf(s)!==-1||s===yu&&f===gw||f===GI||Eo.indexOf(f)!==-1&&s===wa||Eo.indexOf(s)!==-1&&f===wa||s===wl&&[gc,Fd,Ld].indexOf(f)!==-1||[gc,Fd,Ld].indexOf(s)!==-1&&f===ml||Eo.indexOf(s)!==-1&&zI.indexOf(f)!==-1||zI.indexOf(s)!==-1&&Eo.indexOf(f)!==-1||[wl,ml].indexOf(s)!==-1&&(f===wa||[nl,yl].indexOf(f)!==-1&&e[A+1]===wa)||[nl,yl].indexOf(s)!==-1&&f===wa||s===wa&&[wa,yu,pu].indexOf(f)!==-1)return dr;if([wa,yu,pu,Td,rl].indexOf(f)!==-1)for(var l=i;l>=0;){var c=e[l];if(c===wa)return dr;if([yu,pu].indexOf(c)!==-1)l--;else break}if([wl,ml].indexOf(f)!==-1)for(var l=[Td,rl].indexOf(s)!==-1?o:i;l>=0;){var c=e[l];if(c===wa)return dr;if([yu,pu].indexOf(c)!==-1)l--;else break}if(pw===s&&[pw,wv,dw,vw].indexOf(f)!==-1||[wv,dw].indexOf(s)!==-1&&[wv,Bv].indexOf(f)!==-1||[Bv,vw].indexOf(s)!==-1&&f===Bv||KI.indexOf(s)!==-1&&[GI,ml].indexOf(f)!==-1||KI.indexOf(f)!==-1&&s===wl||Eo.indexOf(s)!==-1&&Eo.indexOf(f)!==-1||s===pu&&Eo.indexOf(f)!==-1||Eo.concat(wa).indexOf(s)!==-1&&f===nl&&Ime.indexOf(r[A])===-1||Eo.concat(wa).indexOf(f)!==-1&&s===rl)return dr;if(s===Am&&f===Am){for(var h=t[i],d=1;h>0&&(h--,e[h]===Am);)d++;if(d%2!==0)return dr}return s===Fd&&f===Ld?dr:Dd},Ome=function(r,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=Lme(r,e.lineBreak),n=t[0],a=t[1],i=t[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(a=a.map(function(A){return[wa,fs,cQ].indexOf(A)!==-1?gc:A}));var o=e.wordBreak==="keep-all"?i.map(function(A,s){return A&&r[s]>=19968&&r[s]<=40959}):void 0;return[n,a,o]},Ume=function(){function r(e,t,n,a){this.codePoints=e,this.required=t===hQ,this.start=n,this.end=a}return r.prototype.slice=function(){return an.apply(void 0,this.codePoints.slice(this.start,this.end))},r}(),Nme=function(r,e){var t=Tp(r),n=Ome(t,e),a=n[0],i=n[1],o=n[2],A=t.length,s=0,u=0;return{next:function(){if(u>=A)return{done:!0,value:null};for(var f=dr;u<A&&(f=Dme(t,i,a,++u,o))===dr;);if(f!==dr||u===A){var l=new Ume(t,f,s,u);return s=u,{value:l,done:!1}}return{done:!0,value:null}}}},kme=1,Pme=2,qc=4,$I=8,pg=10,WI=47,Ql=92,Qme=9,Rme=32,Od=34,al=61,Hme=35,Gme=36,zme=37,Ud=39,Nd=40,il=41,Kme=95,aa=45,jme=33,$me=60,Wme=62,Vme=64,Xme=91,Yme=93,Zme=61,qme=123,kd=63,Jme=125,VI=124,e1e=126,t1e=128,XI=65533,um=42,gs=43,r1e=44,n1e=58,a1e=59,pc=46,i1e=0,o1e=8,A1e=11,s1e=14,u1e=31,f1e=127,Li=-1,vQ=48,gQ=97,pQ=101,l1e=102,c1e=117,h1e=122,yQ=65,mQ=69,wQ=70,d1e=85,v1e=90,jn=function(r){return r>=vQ&&r<=57},g1e=function(r){return r>=55296&&r<=57343},mu=function(r){return jn(r)||r>=yQ&&r<=wQ||r>=gQ&&r<=l1e},p1e=function(r){return r>=gQ&&r<=h1e},y1e=function(r){return r>=yQ&&r<=v1e},m1e=function(r){return p1e(r)||y1e(r)},w1e=function(r){return r>=t1e},Pd=function(r){return r===pg||r===Qme||r===Rme},yg=function(r){return m1e(r)||w1e(r)||r===Kme},YI=function(r){return yg(r)||jn(r)||r===aa},B1e=function(r){return r>=i1e&&r<=o1e||r===A1e||r>=s1e&&r<=u1e||r===f1e},uA=function(r,e){return r!==Ql?!1:e!==pg},Qd=function(r,e,t){return r===aa?yg(e)||uA(e,t):yg(r)?!0:!!(r===Ql&&uA(r,e))},fm=function(r,e,t){return r===gs||r===aa?jn(e)?!0:e===pc&&jn(t):jn(r===pc?e:r)},E1e=function(r){var e=0,t=1;(r[e]===gs||r[e]===aa)&&(r[e]===aa&&(t=-1),e++);for(var n=[];jn(r[e]);)n.push(r[e++]);var a=n.length?parseInt(an.apply(void 0,n),10):0;r[e]===pc&&e++;for(var i=[];jn(r[e]);)i.push(r[e++]);var o=i.length,A=o?parseInt(an.apply(void 0,i),10):0;(r[e]===mQ||r[e]===pQ)&&e++;var s=1;(r[e]===gs||r[e]===aa)&&(r[e]===aa&&(s=-1),e++);for(var u=[];jn(r[e]);)u.push(r[e++]);var f=u.length?parseInt(an.apply(void 0,u),10):0;return t*(a+A*Math.pow(10,-o))*Math.pow(10,s*f)},b1e={type:2},x1e={type:3},C1e={type:4},_1e={type:13},S1e={type:8},M1e={type:21},I1e={type:9},T1e={type:10},F1e={type:11},L1e={type:12},D1e={type:14},Rd={type:23},O1e={type:1},U1e={type:25},N1e={type:24},k1e={type:26},P1e={type:27},Q1e={type:28},R1e={type:29},H1e={type:31},ww={type:32},BQ=function(){function r(){this._value=[]}return r.prototype.write=function(e){this._value=this._value.concat(Tp(e))},r.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==ww;)e.push(t),t=this.consumeToken();return e},r.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Od:return this.consumeStringToken(Od);case Hme:var t=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(YI(t)||uA(n,a)){var i=Qd(t,n,a)?Pme:kme,o=this.consumeName();return{type:5,value:o,flags:i}}break;case Gme:if(this.peekCodePoint(0)===al)return this.consumeCodePoint(),_1e;break;case Ud:return this.consumeStringToken(Ud);case Nd:return b1e;case il:return x1e;case um:if(this.peekCodePoint(0)===al)return this.consumeCodePoint(),D1e;break;case gs:if(fm(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case r1e:return C1e;case aa:var A=e,s=this.peekCodePoint(0),u=this.peekCodePoint(1);if(fm(A,s,u))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Qd(A,s,u))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(s===aa&&u===Wme)return this.consumeCodePoint(),this.consumeCodePoint(),N1e;break;case pc:if(fm(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case WI:if(this.peekCodePoint(0)===um)for(this.consumeCodePoint();;){var f=this.consumeCodePoint();if(f===um&&(f=this.consumeCodePoint(),f===WI))return this.consumeToken();if(f===Li)return this.consumeToken()}break;case n1e:return k1e;case a1e:return P1e;case $me:if(this.peekCodePoint(0)===jme&&this.peekCodePoint(1)===aa&&this.peekCodePoint(2)===aa)return this.consumeCodePoint(),this.consumeCodePoint(),U1e;break;case Vme:var l=this.peekCodePoint(0),c=this.peekCodePoint(1),h=this.peekCodePoint(2);if(Qd(l,c,h)){var o=this.consumeName();return{type:7,value:o}}break;case Xme:return Q1e;case Ql:if(uA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case Yme:return R1e;case Zme:if(this.peekCodePoint(0)===al)return this.consumeCodePoint(),S1e;break;case qme:return F1e;case Jme:return L1e;case c1e:case d1e:var d=this.peekCodePoint(0),v=this.peekCodePoint(1);return d===gs&&(mu(v)||v===kd)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case VI:if(this.peekCodePoint(0)===al)return this.consumeCodePoint(),I1e;if(this.peekCodePoint(0)===VI)return this.consumeCodePoint(),M1e;break;case e1e:if(this.peekCodePoint(0)===al)return this.consumeCodePoint(),T1e;break;case Li:return ww}return Pd(e)?(this.consumeWhiteSpace(),H1e):jn(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):yg(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:an(e)}},r.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},r.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},r.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},r.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();mu(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var n=!1;t===kd&&e.length<6;)e.push(t),t=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(an.apply(void 0,e.map(function(s){return s===kd?vQ:s})),16),i=parseInt(an.apply(void 0,e.map(function(s){return s===kd?wQ:s})),16);return{type:30,start:a,end:i}}var o=parseInt(an.apply(void 0,e),16);if(this.peekCodePoint(0)===aa&&mu(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var A=[];mu(t)&&A.length<6;)A.push(t),t=this.consumeCodePoint();var i=parseInt(an.apply(void 0,A),16);return{type:30,start:o,end:i}}else return{type:30,start:o,end:o}},r.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Nd?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Nd?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},r.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Li)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===Ud||t===Od){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Li||this.peekCodePoint(0)===il)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),Rd)}for(;;){var a=this.consumeCodePoint();if(a===Li||a===il)return{type:22,value:an.apply(void 0,e)};if(Pd(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Li||this.peekCodePoint(0)===il?(this.consumeCodePoint(),{type:22,value:an.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Rd);if(a===Od||a===Ud||a===Nd||B1e(a))return this.consumeBadUrlRemnants(),Rd;if(a===Ql)if(uA(a,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Rd;else e.push(a)}},r.prototype.consumeWhiteSpace=function(){for(;Pd(this.peekCodePoint(0));)this.consumeCodePoint()},r.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===il||e===Li)return;uA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},r.prototype.consumeStringSlice=function(e){for(var t=5e4,n="";e>0;){var a=Math.min(t,e);n+=an.apply(void 0,this._value.splice(0,a)),e-=a}return this._value.shift(),n},r.prototype.consumeStringToken=function(e){var t="",n=0;do{var a=this._value[n];if(a===Li||a===void 0||a===e)return t+=this.consumeStringSlice(n),{type:0,value:t};if(a===pg)return this._value.splice(0,n),O1e;if(a===Ql){var i=this._value[n+1];i!==Li&&i!==void 0&&(i===pg?(t+=this.consumeStringSlice(n),n=-1,this._value.shift()):uA(a,i)&&(t+=this.consumeStringSlice(n),t+=an(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},r.prototype.consumeNumber=function(){var e=[],t=qc,n=this.peekCodePoint(0);for((n===gs||n===aa)&&e.push(this.consumeCodePoint());jn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===pc&&jn(a))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=$I;jn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((n===mQ||n===pQ)&&((a===gs||a===aa)&&jn(i)||jn(a)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=$I;jn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[E1e(e),t]},r.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],n=e[1],a=this.peekCodePoint(0),i=this.peekCodePoint(1),o=this.peekCodePoint(2);if(Qd(a,i,o)){var A=this.consumeName();return{type:15,number:t,flags:n,unit:A}}return a===zme?(this.consumeCodePoint(),{type:16,number:t,flags:n}):{type:17,number:t,flags:n}},r.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(mu(e)){for(var t=an(e);mu(this.peekCodePoint(0))&&t.length<6;)t+=an(this.consumeCodePoint());Pd(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(t,16);return n===0||g1e(n)||n>1114111?XI:n}return e===Li?XI:e},r.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(YI(t))e+=an(t);else if(uA(t,this.peekCodePoint(0)))e+=an(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),e}},r}(),EQ=function(){function r(e){this._tokens=e}return r.create=function(e){var t=new BQ;return t.write(e),new r(t.read())},r.parseValue=function(e){return r.create(e).parseComponentValue()},r.parseValues=function(e){return r.create(e).parseComponentValues()},r.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},r.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(t.type===32)return e;e.push(t),e.push()}},r.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},r.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||z1e(n,e))return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue()),n=this.consumeToken()}},r.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue())}},r.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?ww:e},r.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},r}(),Jc=function(r){return r.type===15},wf=function(r){return r.type===17},Er=function(r){return r.type===20},G1e=function(r){return r.type===0},Bw=function(r,e){return Er(r)&&r.value===e},bQ=function(r){return r.type!==31},lf=function(r){return r.type!==31&&r.type!==4},io=function(r){var e=[],t=[];return r.forEach(function(n){if(n.type===4){if(t.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(t),t=[];return}n.type!==31&&t.push(n)}),t.length&&e.push(t),e},z1e=function(r,e){return e===11&&r.type===12||e===28&&r.type===29?!0:e===2&&r.type===3},FA=function(r){return r.type===17||r.type===15},ln=function(r){return r.type===16||FA(r)},xQ=function(r){return r.length>1?[r[0],r[1]]:[r[0]]},Rn={type:17,number:0,flags:qc},rb={type:16,number:50,flags:qc},gA={type:16,number:100,flags:qc},Bl=function(r,e,t){var n=r[0],a=r[1];return[Mr(n,e),Mr(typeof a<"u"?a:n,t)]},Mr=function(r,e){if(r.type===16)return r.number/100*e;if(Jc(r))switch(r.unit){case"rem":case"em":return 16*r.number;case"px":default:return r.number}return r.number},CQ="deg",_Q="grad",SQ="rad",MQ="turn",Fp={name:"angle",parse:function(r,e){if(e.type===15)switch(e.unit){case CQ:return Math.PI*e.number/180;case _Q:return Math.PI/200*e.number;case SQ:return e.number;case MQ:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},IQ=function(r){return r.type===15&&(r.unit===CQ||r.unit===_Q||r.unit===SQ||r.unit===MQ)},TQ=function(r){var e=r.filter(Er).map(function(t){return t.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Rn,Rn];case"to top":case"bottom":return Ka(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Rn,gA];case"to right":case"left":return Ka(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[gA,gA];case"to bottom":case"top":return Ka(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[gA,Rn];case"to left":case"right":return Ka(270)}return 0},Ka=function(r){return Math.PI*r/180},BA={name:"color",parse:function(r,e){if(e.type===18){var t=K1e[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return t(r,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),a=e.value.substring(1,2),i=e.value.substring(2,3);return pA(parseInt(n+n,16),parseInt(a+a,16),parseInt(i+i,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),a=e.value.substring(1,2),i=e.value.substring(2,3),o=e.value.substring(3,4);return pA(parseInt(n+n,16),parseInt(a+a,16),parseInt(i+i,16),parseInt(o+o,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),a=e.value.substring(2,4),i=e.value.substring(4,6);return pA(parseInt(n,16),parseInt(a,16),parseInt(i,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),a=e.value.substring(2,4),i=e.value.substring(4,6),o=e.value.substring(6,8);return pA(parseInt(n,16),parseInt(a,16),parseInt(i,16),parseInt(o,16)/255)}}if(e.type===20){var A=Do[e.value.toUpperCase()];if(typeof A<"u")return A}return Do.TRANSPARENT}},EA=function(r){return(255&r)===0},In=function(r){var e=255&r,t=255&r>>8,n=255&r>>16,a=255&r>>24;return e<255?"rgba("+a+","+n+","+t+","+e/255+")":"rgb("+a+","+n+","+t+")"},pA=function(r,e,t,n){return(r<<24|e<<16|t<<8|Math.round(n*255)<<0)>>>0},ZI=function(r,e){if(r.type===17)return r.number;if(r.type===16){var t=e===3?1:255;return e===3?r.number/100*t:Math.round(r.number/100*t)}return 0},qI=function(r,e){var t=e.filter(lf);if(t.length===3){var n=t.map(ZI),a=n[0],i=n[1],o=n[2];return pA(a,i,o,1)}if(t.length===4){var A=t.map(ZI),a=A[0],i=A[1],o=A[2],s=A[3];return pA(a,i,o,s)}return 0};function lm(r,e,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(e-r)*t*6+r:t<1/2?e:t<2/3?(e-r)*6*(2/3-t)+r:r}var JI=function(r,e){var t=e.filter(lf),n=t[0],a=t[1],i=t[2],o=t[3],A=(n.type===17?Ka(n.number):Fp.parse(r,n))/(Math.PI*2),s=ln(a)?a.number/100:0,u=ln(i)?i.number/100:0,f=typeof o<"u"&&ln(o)?Mr(o,1):1;if(s===0)return pA(u*255,u*255,u*255,1);var l=u<=.5?u*(s+1):u+s-u*s,c=u*2-l,h=lm(c,l,A+1/3),d=lm(c,l,A),v=lm(c,l,A-1/3);return pA(h*255,d*255,v*255,f)},K1e={hsl:JI,hsla:JI,rgb:qI,rgba:qI},Rl=function(r,e){return BA.parse(r,EQ.create(e).parseComponentValue())},Do={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},j1e={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(r,e){return e.map(function(t){if(Er(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},$1e={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Lp=function(r,e){var t=BA.parse(r,e[0]),n=e[1];return n&&ln(n)?{color:t,stop:n}:{color:t,stop:null}},eT=function(r,e){var t=r[0],n=r[r.length-1];t.stop===null&&(t.stop=Rn),n.stop===null&&(n.stop=gA);for(var a=[],i=0,o=0;o<r.length;o++){var A=r[o].stop;if(A!==null){var s=Mr(A,e);s>i?a.push(s):a.push(i),i=s}else a.push(null)}for(var u=null,o=0;o<a.length;o++){var f=a[o];if(f===null)u===null&&(u=o);else if(u!==null){for(var l=o-u,c=a[u-1],h=(f-c)/(l+1),d=1;d<=l;d++)a[u+d-1]=h*d;u=null}}return r.map(function(v,g){var p=v.color;return{color:p,stop:Math.max(Math.min(1,a[g]/e),0)}})},W1e=function(r,e,t){var n=e/2,a=t/2,i=Mr(r[0],e)-n,o=a-Mr(r[1],t);return(Math.atan2(o,i)+Math.PI*2)%(Math.PI*2)},V1e=function(r,e,t){var n=typeof r=="number"?r:W1e(r,e,t),a=Math.abs(e*Math.sin(n))+Math.abs(t*Math.cos(n)),i=e/2,o=t/2,A=a/2,s=Math.sin(n-Math.PI/2)*A,u=Math.cos(n-Math.PI/2)*A;return[a,i-u,i+u,o-s,o+s]},ni=function(r,e){return Math.sqrt(r*r+e*e)},tT=function(r,e,t,n,a){var i=[[0,0],[0,e],[r,0],[r,e]];return i.reduce(function(o,A){var s=A[0],u=A[1],f=ni(t-s,n-u);return(a?f<o.optimumDistance:f>o.optimumDistance)?{optimumCorner:A,optimumDistance:f}:o},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},X1e=function(r,e,t,n,a){var i=0,o=0;switch(r.size){case 0:r.shape===0?i=o=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(t),Math.abs(t-a)):r.shape===1&&(i=Math.min(Math.abs(e),Math.abs(e-n)),o=Math.min(Math.abs(t),Math.abs(t-a)));break;case 2:if(r.shape===0)i=o=Math.min(ni(e,t),ni(e,t-a),ni(e-n,t),ni(e-n,t-a));else if(r.shape===1){var A=Math.min(Math.abs(t),Math.abs(t-a))/Math.min(Math.abs(e),Math.abs(e-n)),s=tT(n,a,e,t,!0),u=s[0],f=s[1];i=ni(u-e,(f-t)/A),o=A*i}break;case 1:r.shape===0?i=o=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(t),Math.abs(t-a)):r.shape===1&&(i=Math.max(Math.abs(e),Math.abs(e-n)),o=Math.max(Math.abs(t),Math.abs(t-a)));break;case 3:if(r.shape===0)i=o=Math.max(ni(e,t),ni(e,t-a),ni(e-n,t),ni(e-n,t-a));else if(r.shape===1){var A=Math.max(Math.abs(t),Math.abs(t-a))/Math.max(Math.abs(e),Math.abs(e-n)),l=tT(n,a,e,t,!1),u=l[0],f=l[1];i=ni(u-e,(f-t)/A),o=A*i}break}return Array.isArray(r.size)&&(i=Mr(r.size[0],n),o=r.size.length===2?Mr(r.size[1],a):i),[i,o]},Y1e=function(r,e){var t=Ka(180),n=[];return io(e).forEach(function(a,i){if(i===0){var o=a[0];if(o.type===20&&o.value==="to"){t=TQ(a);return}else if(IQ(o)){t=Fp.parse(r,o);return}}var A=Lp(r,a);n.push(A)}),{angle:t,stops:n,type:1}},Hd=function(r,e){var t=Ka(180),n=[];return io(e).forEach(function(a,i){if(i===0){var o=a[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){t=TQ(a);return}else if(IQ(o)){t=(Fp.parse(r,o)+Ka(270))%Ka(360);return}}var A=Lp(r,a);n.push(A)}),{angle:t,stops:n,type:1}},Z1e=function(r,e){var t=Ka(180),n=[],a=1,i=0,o=3,A=[];return io(e).forEach(function(s,u){var f=s[0];if(u===0){if(Er(f)&&f.value==="linear"){a=1;return}else if(Er(f)&&f.value==="radial"){a=2;return}}if(f.type===18){if(f.name==="from"){var l=BA.parse(r,f.values[0]);n.push({stop:Rn,color:l})}else if(f.name==="to"){var l=BA.parse(r,f.values[0]);n.push({stop:gA,color:l})}else if(f.name==="color-stop"){var c=f.values.filter(lf);if(c.length===2){var l=BA.parse(r,c[1]),h=c[0];wf(h)&&n.push({stop:{type:16,number:h.number*100,flags:h.flags},color:l})}}}}),a===1?{angle:(t+Ka(180))%Ka(360),stops:n,type:a}:{size:o,shape:i,stops:n,position:A,type:a}},FQ="closest-side",LQ="farthest-side",DQ="closest-corner",OQ="farthest-corner",UQ="circle",NQ="ellipse",kQ="cover",PQ="contain",q1e=function(r,e){var t=0,n=3,a=[],i=[];return io(e).forEach(function(o,A){var s=!0;if(A===0){var u=!1;s=o.reduce(function(l,c){if(u)if(Er(c))switch(c.value){case"center":return i.push(rb),l;case"top":case"left":return i.push(Rn),l;case"right":case"bottom":return i.push(gA),l}else(ln(c)||FA(c))&&i.push(c);else if(Er(c))switch(c.value){case UQ:return t=0,!1;case NQ:return t=1,!1;case"at":return u=!0,!1;case FQ:return n=0,!1;case kQ:case LQ:return n=1,!1;case PQ:case DQ:return n=2,!1;case OQ:return n=3,!1}else if(FA(c)||ln(c))return Array.isArray(n)||(n=[]),n.push(c),!1;return l},s)}if(s){var f=Lp(r,o);a.push(f)}}),{size:n,shape:t,stops:a,position:i,type:2}},Gd=function(r,e){var t=0,n=3,a=[],i=[];return io(e).forEach(function(o,A){var s=!0;if(A===0?s=o.reduce(function(f,l){if(Er(l))switch(l.value){case"center":return i.push(rb),!1;case"top":case"left":return i.push(Rn),!1;case"right":case"bottom":return i.push(gA),!1}else if(ln(l)||FA(l))return i.push(l),!1;return f},s):A===1&&(s=o.reduce(function(f,l){if(Er(l))switch(l.value){case UQ:return t=0,!1;case NQ:return t=1,!1;case PQ:case FQ:return n=0,!1;case LQ:return n=1,!1;case DQ:return n=2,!1;case kQ:case OQ:return n=3,!1}else if(FA(l)||ln(l))return Array.isArray(n)||(n=[]),n.push(l),!1;return f},s)),s){var u=Lp(r,o);a.push(u)}}),{size:n,shape:t,stops:a,position:i,type:2}},J1e=function(r){return r.type===1},ewe=function(r){return r.type===2},nb={name:"image",parse:function(r,e){if(e.type===22){var t={url:e.value,type:0};return r.cache.addImage(e.value),t}if(e.type===18){var n=QQ[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(r,e.values)}throw new Error("Unsupported image type "+e.type)}};function twe(r){return!(r.type===20&&r.value==="none")&&(r.type!==18||!!QQ[r.name])}var QQ={"linear-gradient":Y1e,"-moz-linear-gradient":Hd,"-ms-linear-gradient":Hd,"-o-linear-gradient":Hd,"-webkit-linear-gradient":Hd,"radial-gradient":q1e,"-moz-radial-gradient":Gd,"-ms-radial-gradient":Gd,"-o-radial-gradient":Gd,"-webkit-radial-gradient":Gd,"-webkit-gradient":Z1e},rwe={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(r,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e.filter(function(n){return lf(n)&&twe(n)}).map(function(n){return nb.parse(r,n)})}},nwe={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(r,e){return e.map(function(t){if(Er(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},awe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(r,e){return io(e).map(function(t){return t.filter(ln)}).map(xQ)}},iwe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(r,e){return io(e).map(function(t){return t.filter(Er).map(function(n){return n.value}).join(" ")}).map(owe)}},owe=function(r){switch(r){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Ku;(function(r){r.AUTO="auto",r.CONTAIN="contain",r.COVER="cover"})(Ku||(Ku={}));var Awe={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(r,e){return io(e).map(function(t){return t.filter(swe)})}},swe=function(r){return Er(r)||ln(r)},Dp=function(r){return{name:"border-"+r+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},uwe=Dp("top"),fwe=Dp("right"),lwe=Dp("bottom"),cwe=Dp("left"),Op=function(r){return{name:"border-radius-"+r,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return xQ(t.filter(ln))}}},hwe=Op("top-left"),dwe=Op("top-right"),vwe=Op("bottom-right"),gwe=Op("bottom-left"),Up=function(r){return{name:"border-"+r+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},pwe=Up("top"),ywe=Up("right"),mwe=Up("bottom"),wwe=Up("left"),Np=function(r){return{name:"border-"+r+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Jc(t)?t.number:0}}},Bwe=Np("top"),Ewe=Np("right"),bwe=Np("bottom"),xwe=Np("left"),Cwe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},_we={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(r,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},Swe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(r,e){return e.filter(Er).reduce(function(t,n){return t|Mwe(n.value)},0)}},Mwe=function(r){switch(r){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Iwe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Twe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(r,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},mg;(function(r){r.NORMAL="normal",r.STRICT="strict"})(mg||(mg={}));var Fwe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"strict":return mg.STRICT;case"normal":default:return mg.NORMAL}}},Lwe={name:"line-height",initialValue:"normal",prefix:!1,type:4},rT=function(r,e){return Er(r)&&r.value==="normal"?1.2*e:r.type===17?e*r.number:ln(r)?Mr(r,e):e},Dwe={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(r,e){return e.type===20&&e.value==="none"?null:nb.parse(r,e)}},Owe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(r,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},Ew={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},kp=function(r){return{name:"margin-"+r,initialValue:"0",prefix:!1,type:4}},Uwe=kp("top"),Nwe=kp("right"),kwe=kp("bottom"),Pwe=kp("left"),Qwe={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(r,e){return e.filter(Er).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Rwe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Pp=function(r){return{name:"padding-"+r,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Hwe=Pp("top"),Gwe=Pp("right"),zwe=Pp("bottom"),Kwe=Pp("left"),jwe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(r,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},$we={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(r,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Wwe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.length===1&&Bw(e[0],"none")?[]:io(e).map(function(t){for(var n={color:Do.TRANSPARENT,offsetX:Rn,offsetY:Rn,blur:Rn},a=0,i=0;i<t.length;i++){var o=t[i];FA(o)?(a===0?n.offsetX=o:a===1?n.offsetY=o:n.blur=o,a++):n.color=BA.parse(r,o)}return n})}},Vwe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Xwe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(r,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var t=qwe[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return t(e.values)}return null}},Ywe=function(r){var e=r.filter(function(t){return t.type===17}).map(function(t){return t.number});return e.length===6?e:null},Zwe=function(r){var e=r.filter(function(s){return s.type===17}).map(function(s){return s.number}),t=e[0],n=e[1];e[2],e[3];var a=e[4],i=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var o=e[12],A=e[13];return e[14],e[15],e.length===16?[t,n,a,i,o,A]:null},qwe={matrix:Ywe,matrix3d:Zwe},nT={type:16,number:50,flags:qc},Jwe=[nT,nT],eBe={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(r,e){var t=e.filter(ln);return t.length!==2?Jwe:[t[0],t[1]]}},tBe={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Hl;(function(r){r.NORMAL="normal",r.BREAK_ALL="break-all",r.KEEP_ALL="keep-all"})(Hl||(Hl={}));var rBe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"break-all":return Hl.BREAK_ALL;case"keep-all":return Hl.KEEP_ALL;case"normal":default:return Hl.NORMAL}}},nBe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(r,e){if(e.type===20)return{auto:!0,order:0};if(wf(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},RQ={name:"time",parse:function(r,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},aBe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(r,e){return wf(e)?e.number:1}},iBe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},oBe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(r,e){return e.filter(Er).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return t!==0})}},ABe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(r,e){var t=[],n=[];return e.forEach(function(a){switch(a.type){case 20:case 0:t.push(a.value);break;case 17:t.push(a.number.toString());break;case 4:n.push(t.join(" ")),t.length=0;break}}),t.length&&n.push(t.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},sBe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},uBe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(r,e){if(wf(e))return e.number;if(Er(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},fBe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.filter(Er).map(function(t){return t.value})}},lBe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},wn=function(r,e){return(r&e)!==0},cBe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(r,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e}},hBe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(r,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;for(var n=[],a=e.filter(bQ),i=0;i<a.length;i++){var o=a[i],A=a[i+1];if(o.type===20){var s=A&&wf(A)?A.number:1;n.push({counter:o.value,increment:s})}}return n}},dBe={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(r,e){if(e.length===0)return[];for(var t=[],n=e.filter(bQ),a=0;a<n.length;a++){var i=n[a],o=n[a+1];if(Er(i)&&i.value!=="none"){var A=o&&wf(o)?o.number:0;t.push({counter:i.value,reset:A})}}return t}},vBe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(r,e){return e.filter(Jc).map(function(t){return RQ.parse(r,t)})}},gBe={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(r,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;var n=[],a=e.filter(G1e);if(a.length%2!==0)return null;for(var i=0;i<a.length;i+=2){var o=a[i].value,A=a[i+1].value;n.push({open:o,close:A})}return n}},aT=function(r,e,t){if(!r)return"";var n=r[Math.min(e,r.length-1)];return n?t?n.open:n.close:""},pBe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.length===1&&Bw(e[0],"none")?[]:io(e).map(function(t){for(var n={color:255,offsetX:Rn,offsetY:Rn,blur:Rn,spread:Rn,inset:!1},a=0,i=0;i<t.length;i++){var o=t[i];Bw(o,"inset")?n.inset=!0:FA(o)?(a===0?n.offsetX=o:a===1?n.offsetY=o:a===2?n.blur=o:n.spread=o,a++):n.color=BA.parse(r,o)}return n})}},yBe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(r,e){var t=[0,1,2],n=[];return e.filter(Er).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),t.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},mBe={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},wBe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(r,e){return Jc(e)?e.number:0}},BBe=function(){function r(e,t){var n,a;this.animationDuration=dt(e,vBe,t.animationDuration),this.backgroundClip=dt(e,j1e,t.backgroundClip),this.backgroundColor=dt(e,$1e,t.backgroundColor),this.backgroundImage=dt(e,rwe,t.backgroundImage),this.backgroundOrigin=dt(e,nwe,t.backgroundOrigin),this.backgroundPosition=dt(e,awe,t.backgroundPosition),this.backgroundRepeat=dt(e,iwe,t.backgroundRepeat),this.backgroundSize=dt(e,Awe,t.backgroundSize),this.borderTopColor=dt(e,uwe,t.borderTopColor),this.borderRightColor=dt(e,fwe,t.borderRightColor),this.borderBottomColor=dt(e,lwe,t.borderBottomColor),this.borderLeftColor=dt(e,cwe,t.borderLeftColor),this.borderTopLeftRadius=dt(e,hwe,t.borderTopLeftRadius),this.borderTopRightRadius=dt(e,dwe,t.borderTopRightRadius),this.borderBottomRightRadius=dt(e,vwe,t.borderBottomRightRadius),this.borderBottomLeftRadius=dt(e,gwe,t.borderBottomLeftRadius),this.borderTopStyle=dt(e,pwe,t.borderTopStyle),this.borderRightStyle=dt(e,ywe,t.borderRightStyle),this.borderBottomStyle=dt(e,mwe,t.borderBottomStyle),this.borderLeftStyle=dt(e,wwe,t.borderLeftStyle),this.borderTopWidth=dt(e,Bwe,t.borderTopWidth),this.borderRightWidth=dt(e,Ewe,t.borderRightWidth),this.borderBottomWidth=dt(e,bwe,t.borderBottomWidth),this.borderLeftWidth=dt(e,xwe,t.borderLeftWidth),this.boxShadow=dt(e,pBe,t.boxShadow),this.color=dt(e,Cwe,t.color),this.direction=dt(e,_we,t.direction),this.display=dt(e,Swe,t.display),this.float=dt(e,Iwe,t.cssFloat),this.fontFamily=dt(e,ABe,t.fontFamily),this.fontSize=dt(e,sBe,t.fontSize),this.fontStyle=dt(e,lBe,t.fontStyle),this.fontVariant=dt(e,fBe,t.fontVariant),this.fontWeight=dt(e,uBe,t.fontWeight),this.letterSpacing=dt(e,Twe,t.letterSpacing),this.lineBreak=dt(e,Fwe,t.lineBreak),this.lineHeight=dt(e,Lwe,t.lineHeight),this.listStyleImage=dt(e,Dwe,t.listStyleImage),this.listStylePosition=dt(e,Owe,t.listStylePosition),this.listStyleType=dt(e,Ew,t.listStyleType),this.marginTop=dt(e,Uwe,t.marginTop),this.marginRight=dt(e,Nwe,t.marginRight),this.marginBottom=dt(e,kwe,t.marginBottom),this.marginLeft=dt(e,Pwe,t.marginLeft),this.opacity=dt(e,aBe,t.opacity);var i=dt(e,Qwe,t.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=dt(e,Rwe,t.overflowWrap),this.paddingTop=dt(e,Hwe,t.paddingTop),this.paddingRight=dt(e,Gwe,t.paddingRight),this.paddingBottom=dt(e,zwe,t.paddingBottom),this.paddingLeft=dt(e,Kwe,t.paddingLeft),this.paintOrder=dt(e,yBe,t.paintOrder),this.position=dt(e,$we,t.position),this.textAlign=dt(e,jwe,t.textAlign),this.textDecorationColor=dt(e,iBe,(n=t.textDecorationColor)!==null&&n!==void 0?n:t.color),this.textDecorationLine=dt(e,oBe,(a=t.textDecorationLine)!==null&&a!==void 0?a:t.textDecoration),this.textShadow=dt(e,Wwe,t.textShadow),this.textTransform=dt(e,Vwe,t.textTransform),this.transform=dt(e,Xwe,t.transform),this.transformOrigin=dt(e,eBe,t.transformOrigin),this.visibility=dt(e,tBe,t.visibility),this.webkitTextStrokeColor=dt(e,mBe,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=dt(e,wBe,t.webkitTextStrokeWidth),this.wordBreak=dt(e,rBe,t.wordBreak),this.zIndex=dt(e,nBe,t.zIndex)}return r.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},r.prototype.isTransparent=function(){return EA(this.backgroundColor)},r.prototype.isTransformed=function(){return this.transform!==null},r.prototype.isPositioned=function(){return this.position!==0},r.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},r.prototype.isFloating=function(){return this.float!==0},r.prototype.isInlineLevel=function(){return wn(this.display,4)||wn(this.display,33554432)||wn(this.display,268435456)||wn(this.display,536870912)||wn(this.display,67108864)||wn(this.display,134217728)},r}(),EBe=function(){function r(e,t){this.content=dt(e,cBe,t.content),this.quotes=dt(e,gBe,t.quotes)}return r}(),iT=function(){function r(e,t){this.counterIncrement=dt(e,hBe,t.counterIncrement),this.counterReset=dt(e,dBe,t.counterReset)}return r}(),dt=function(r,e,t){var n=new BQ,a=t!==null&&typeof t<"u"?t.toString():e.initialValue;n.write(a);var i=new EQ(n.read());switch(e.type){case 2:var o=i.parseComponentValue();return e.parse(r,Er(o)?o.value:e.initialValue);case 0:return e.parse(r,i.parseComponentValue());case 1:return e.parse(r,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(e.format){case"angle":return Fp.parse(r,i.parseComponentValue());case"color":return BA.parse(r,i.parseComponentValue());case"image":return nb.parse(r,i.parseComponentValue());case"length":var A=i.parseComponentValue();return FA(A)?A:Rn;case"length-percentage":var s=i.parseComponentValue();return ln(s)?s:Rn;case"time":return RQ.parse(r,i.parseComponentValue())}break}},bBe="data-html2canvas-debug",xBe=function(r){var e=r.getAttribute(bBe);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},bw=function(r,e){var t=xBe(r);return t===1||e===t},oo=function(){function r(e,t){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,bw(t,3))debugger;this.styles=new BBe(e,window.getComputedStyle(t,null)),_w(t)&&(this.styles.animationDuration.some(function(n){return n>0})&&(t.style.animationDuration="0s"),this.styles.transform!==null&&(t.style.transform="none")),this.bounds=Ip(this.context,t),bw(t,4)&&(this.flags|=16)}return r}(),CBe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",oT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",El=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var zd=0;zd<oT.length;zd++)El[oT.charCodeAt(zd)]=zd;var _Be=function(r){var e=r.length*.75,t=r.length,n,a=0,i,o,A,s;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),f=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<t;n+=4)i=El[r.charCodeAt(n)],o=El[r.charCodeAt(n+1)],A=El[r.charCodeAt(n+2)],s=El[r.charCodeAt(n+3)],f[a++]=i<<2|o>>4,f[a++]=(o&15)<<4|A>>2,f[a++]=(A&3)<<6|s&63;return u},SBe=function(r){for(var e=r.length,t=[],n=0;n<e;n+=2)t.push(r[n+1]<<8|r[n]);return t},MBe=function(r){for(var e=r.length,t=[],n=0;n<e;n+=4)t.push(r[n+3]<<24|r[n+2]<<16|r[n+1]<<8|r[n]);return t},Cs=5,ab=6+5,cm=2,IBe=ab-Cs,HQ=65536>>Cs,TBe=1<<Cs,hm=TBe-1,FBe=1024>>Cs,LBe=HQ+FBe,DBe=LBe,OBe=32,UBe=DBe+OBe,NBe=65536>>ab,kBe=1<<IBe,PBe=kBe-1,AT=function(r,e,t){return r.slice?r.slice(e,t):new Uint16Array(Array.prototype.slice.call(r,e,t))},QBe=function(r,e,t){return r.slice?r.slice(e,t):new Uint32Array(Array.prototype.slice.call(r,e,t))},RBe=function(r,e){var t=_Be(r),n=Array.isArray(t)?MBe(t):new Uint32Array(t),a=Array.isArray(t)?SBe(t):new Uint16Array(t),i=24,o=AT(a,i/2,n[4]/2),A=n[5]===2?AT(a,(i+n[4])/2):QBe(n,Math.ceil((i+n[4])/4));return new HBe(n[0],n[1],n[2],n[3],o,A)},HBe=function(){function r(e,t,n,a,i,o){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=a,this.index=i,this.data=o}return r.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>Cs],t=(t<<cm)+(e&hm),this.data[t];if(e<=65535)return t=this.index[HQ+(e-55296>>Cs)],t=(t<<cm)+(e&hm),this.data[t];if(e<this.highStart)return t=UBe-NBe+(e>>ab),t=this.index[t],t+=e>>Cs&PBe,t=this.index[t],t=(t<<cm)+(e&hm),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r}(),sT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",GBe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Kd=0;Kd<sT.length;Kd++)GBe[sT.charCodeAt(Kd)]=Kd;var zBe=1,dm=2,vm=3,uT=4,fT=5,KBe=7,lT=8,gm=9,pm=10,cT=11,hT=12,dT=13,vT=14,ym=15,jBe=function(r){for(var e=[],t=0,n=r.length;t<n;){var a=r.charCodeAt(t++);if(a>=55296&&a<=56319&&t<n){var i=r.charCodeAt(t++);(i&64512)===56320?e.push(((a&1023)<<10)+(i&1023)+65536):(e.push(a),t--)}else e.push(a)}return e},$Be=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var t=r.length;if(!t)return"";for(var n=[],a=-1,i="";++a<t;){var o=r[a];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(a+1===t||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},WBe=RBe(CBe),Ra="×",mm="÷",VBe=function(r){return WBe.get(r)},XBe=function(r,e,t){var n=t-2,a=e[n],i=e[t-1],o=e[t];if(i===dm&&o===vm)return Ra;if(i===dm||i===vm||i===uT||o===dm||o===vm||o===uT)return mm;if(i===lT&&[lT,gm,cT,hT].indexOf(o)!==-1||(i===cT||i===gm)&&(o===gm||o===pm)||(i===hT||i===pm)&&o===pm||o===dT||o===fT||o===KBe||i===zBe)return Ra;if(i===dT&&o===vT){for(;a===fT;)a=e[--n];if(a===vT)return Ra}if(i===ym&&o===ym){for(var A=0;a===ym;)A++,a=e[--n];if(A%2===0)return Ra}return mm},YBe=function(r){var e=jBe(r),t=e.length,n=0,a=0,i=e.map(VBe);return{next:function(){if(n>=t)return{done:!0,value:null};for(var o=Ra;n<t&&(o=XBe(e,i,++n))===Ra;);if(o!==Ra||n===t){var A=$Be.apply(null,e.slice(a,n));return a=n,{value:A,done:!1}}return{done:!0,value:null}}}},ZBe=function(r){for(var e=YBe(r),t=[],n;!(n=e.next()).done;)n.value&&t.push(n.value.slice());return t},qBe=function(r){var e=123;if(r.createRange){var t=r.createRange();if(t.getBoundingClientRect){var n=r.createElement("boundtest");n.style.height=e+"px",n.style.display="block",r.body.appendChild(n),t.selectNode(n);var a=t.getBoundingClientRect(),i=Math.round(a.height);if(r.body.removeChild(n),i===e)return!0}}return!1},JBe=function(r){var e=r.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",r.body.appendChild(e);var t=r.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,a=Tp(n.data).map(function(s){return an(s)}),i=0,o={},A=a.every(function(s,u){t.setStart(n,i),t.setEnd(n,i+s.length);var f=t.getBoundingClientRect();i+=s.length;var l=f.x>o.x||f.y>o.y;return o=f,u===0?!0:l});return r.body.removeChild(e),A},eEe=function(){return typeof new Image().crossOrigin<"u"},tEe=function(){return typeof new XMLHttpRequest().responseType=="string"},rEe=function(r){var e=new Image,t=r.createElement("canvas"),n=t.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),t.toDataURL()}catch{return!1}return!0},gT=function(r){return r[0]===0&&r[1]===255&&r[2]===0&&r[3]===255},nEe=function(r){var e=r.createElement("canvas"),t=100;e.width=t,e.height=t;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,t,t);var a=new Image,i=e.toDataURL();a.src=i;var o=xw(t,t,0,0,a);return n.fillStyle="red",n.fillRect(0,0,t,t),pT(o).then(function(A){n.drawImage(A,0,0);var s=n.getImageData(0,0,t,t).data;n.fillStyle="red",n.fillRect(0,0,t,t);var u=r.createElement("div");return u.style.backgroundImage="url("+i+")",u.style.height=t+"px",gT(s)?pT(xw(t,t,0,0,u)):Promise.reject(!1)}).then(function(A){return n.drawImage(A,0,0),gT(n.getImageData(0,0,t,t).data)}).catch(function(){return!1})},xw=function(r,e,t,n,a){var i="http://www.w3.org/2000/svg",o=document.createElementNS(i,"svg"),A=document.createElementNS(i,"foreignObject");return o.setAttributeNS(null,"width",r.toString()),o.setAttributeNS(null,"height",e.toString()),A.setAttributeNS(null,"width","100%"),A.setAttributeNS(null,"height","100%"),A.setAttributeNS(null,"x",t.toString()),A.setAttributeNS(null,"y",n.toString()),A.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(A),A.appendChild(a),o},pT=function(r){return new Promise(function(e,t){var n=new Image;n.onload=function(){return e(n)},n.onerror=t,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})},kn={get SUPPORT_RANGE_BOUNDS(){var r=qBe(document);return Object.defineProperty(kn,"SUPPORT_RANGE_BOUNDS",{value:r}),r},get SUPPORT_WORD_BREAKING(){var r=kn.SUPPORT_RANGE_BOUNDS&&JBe(document);return Object.defineProperty(kn,"SUPPORT_WORD_BREAKING",{value:r}),r},get SUPPORT_SVG_DRAWING(){var r=rEe(document);return Object.defineProperty(kn,"SUPPORT_SVG_DRAWING",{value:r}),r},get SUPPORT_FOREIGNOBJECT_DRAWING(){var r=typeof Array.from=="function"&&typeof window.fetch=="function"?nEe(document):Promise.resolve(!1);return Object.defineProperty(kn,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:r}),r},get SUPPORT_CORS_IMAGES(){var r=eEe();return Object.defineProperty(kn,"SUPPORT_CORS_IMAGES",{value:r}),r},get SUPPORT_RESPONSE_TYPE(){var r=tEe();return Object.defineProperty(kn,"SUPPORT_RESPONSE_TYPE",{value:r}),r},get SUPPORT_CORS_XHR(){var r="withCredentials"in new XMLHttpRequest;return Object.defineProperty(kn,"SUPPORT_CORS_XHR",{value:r}),r},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var r=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(kn,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:r}),r}},Gl=function(){function r(e,t){this.text=e,this.bounds=t}return r}(),aEe=function(r,e,t,n){var a=AEe(e,t),i=[],o=0;return a.forEach(function(A){if(t.textDecorationLine.length||A.trim().length>0)if(kn.SUPPORT_RANGE_BOUNDS){var s=yT(n,o,A.length).getClientRects();if(s.length>1){var u=ib(A),f=0;u.forEach(function(c){i.push(new Gl(c,No.fromDOMRectList(r,yT(n,f+o,c.length).getClientRects()))),f+=c.length})}else i.push(new Gl(A,No.fromDOMRectList(r,s)))}else{var l=n.splitText(A.length);i.push(new Gl(A,iEe(r,n))),n=l}else kn.SUPPORT_RANGE_BOUNDS||(n=n.splitText(A.length));o+=A.length}),i},iEe=function(r,e){var t=e.ownerDocument;if(t){var n=t.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var a=e.parentNode;if(a){a.replaceChild(n,e);var i=Ip(r,n);return n.firstChild&&a.replaceChild(n.firstChild,n),i}}return No.EMPTY},yT=function(r,e,t){var n=r.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(r,e),a.setEnd(r,e+t),a},ib=function(r){if(kn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(r)).map(function(t){return t.segment})}return ZBe(r)},oEe=function(r,e){if(kn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(r)).map(function(n){return n.segment})}return uEe(r,e)},AEe=function(r,e){return e.letterSpacing!==0?ib(r):oEe(r,e)},sEe=[32,160,4961,65792,65793,4153,4241],uEe=function(r,e){for(var t=Nme(r,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],a,i=function(){if(a.value){var o=a.value.slice(),A=Tp(o),s="";A.forEach(function(u){sEe.indexOf(u)===-1?s+=an(u):(s.length&&n.push(s),n.push(an(u)),s="")}),s.length&&n.push(s)}};!(a=t.next()).done;)i();return n},fEe=function(){function r(e,t,n){this.text=lEe(t.data,n.textTransform),this.textBounds=aEe(e,this.text,n,t)}return r}(),lEe=function(r,e){switch(e){case 1:return r.toLowerCase();case 3:return r.replace(cEe,hEe);case 2:return r.toUpperCase();default:return r}},cEe=/(^|\s|:|-|\(|\))([a-z])/g,hEe=function(r,e,t){return r.length>0?e+t.toUpperCase():r},GQ=function(r){wi(e,r);function e(t,n){var a=r.call(this,t,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return e}(oo),zQ=function(r){wi(e,r);function e(t,n){var a=r.call(this,t,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return e}(oo),KQ=function(r){wi(e,r);function e(t,n){var a=r.call(this,t,n)||this,i=new XMLSerializer,o=Ip(t,n);return n.setAttribute("width",o.width+"px"),n.setAttribute("height",o.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return e}(oo),jQ=function(r){wi(e,r);function e(t,n){var a=r.call(this,t,n)||this;return a.value=n.value,a}return e}(oo),Cw=function(r){wi(e,r);function e(t,n){var a=r.call(this,t,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return e}(oo),dEe=[{type:15,flags:0,unit:"px",number:3}],vEe=[{type:16,flags:0,number:50}],gEe=function(r){return r.width>r.height?new No(r.left+(r.width-r.height)/2,r.top,r.height,r.height):r.width<r.height?new No(r.left,r.top+(r.height-r.width)/2,r.width,r.width):r},pEe=function(r){var e=r.type===yEe?new Array(r.value.length+1).join("•"):r.value;return e.length===0?r.placeholder||"":e},wg="checkbox",Bg="radio",yEe="password",mT=707406591,ob=function(r){wi(e,r);function e(t,n){var a=r.call(this,t,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=pEe(n),(a.type===wg||a.type===Bg)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=gEe(a.bounds)),a.type){case wg:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=dEe;break;case Bg:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=vEe;break}return a}return e}(oo),$Q=function(r){wi(e,r);function e(t,n){var a=r.call(this,t,n)||this,i=n.options[n.selectedIndex||0];return a.value=i&&i.text||"",a}return e}(oo),WQ=function(r){wi(e,r);function e(t,n){var a=r.call(this,t,n)||this;return a.value=n.value,a}return e}(oo),VQ=function(r){wi(e,r);function e(t,n){var a=r.call(this,t,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=YQ(t,n.contentWindow.document.documentElement);var i=n.contentWindow.document.documentElement?Rl(t,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):Do.TRANSPARENT,o=n.contentWindow.document.body?Rl(t,getComputedStyle(n.contentWindow.document.body).backgroundColor):Do.TRANSPARENT;a.backgroundColor=EA(i)?EA(o)?a.styles.backgroundColor:o:i}}catch{}return a}return e}(oo),mEe=["OL","UL","MENU"],Ev=function(r,e,t,n){for(var a=e.firstChild,i=void 0;a;a=i)if(i=a.nextSibling,ZQ(a)&&a.data.trim().length>0)t.textNodes.push(new fEe(r,a,t.styles));else if(Nu(a))if(tR(a)&&a.assignedNodes)a.assignedNodes().forEach(function(A){return Ev(r,A,t,n)});else{var o=XQ(r,a);o.styles.isVisible()&&(wEe(a,o,n)?o.flags|=4:BEe(o.styles)&&(o.flags|=2),mEe.indexOf(a.tagName)!==-1&&(o.flags|=8),t.elements.push(o),a.slot,a.shadowRoot?Ev(r,a.shadowRoot,o,n):!Eg(a)&&!qQ(a)&&!bg(a)&&Ev(r,a,o,n))}},XQ=function(r,e){return Sw(e)?new GQ(r,e):JQ(e)?new zQ(r,e):qQ(e)?new KQ(r,e):EEe(e)?new jQ(r,e):bEe(e)?new Cw(r,e):xEe(e)?new ob(r,e):bg(e)?new $Q(r,e):Eg(e)?new WQ(r,e):eR(e)?new VQ(r,e):new oo(r,e)},YQ=function(r,e){var t=XQ(r,e);return t.flags|=4,Ev(r,e,t,t),t},wEe=function(r,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||Ab(r)&&t.styles.isTransparent()},BEe=function(r){return r.isPositioned()||r.isFloating()},ZQ=function(r){return r.nodeType===Node.TEXT_NODE},Nu=function(r){return r.nodeType===Node.ELEMENT_NODE},_w=function(r){return Nu(r)&&typeof r.style<"u"&&!bv(r)},bv=function(r){return typeof r.className=="object"},EEe=function(r){return r.tagName==="LI"},bEe=function(r){return r.tagName==="OL"},xEe=function(r){return r.tagName==="INPUT"},CEe=function(r){return r.tagName==="HTML"},qQ=function(r){return r.tagName==="svg"},Ab=function(r){return r.tagName==="BODY"},JQ=function(r){return r.tagName==="CANVAS"},wT=function(r){return r.tagName==="VIDEO"},Sw=function(r){return r.tagName==="IMG"},eR=function(r){return r.tagName==="IFRAME"},BT=function(r){return r.tagName==="STYLE"},_Ee=function(r){return r.tagName==="SCRIPT"},Eg=function(r){return r.tagName==="TEXTAREA"},bg=function(r){return r.tagName==="SELECT"},tR=function(r){return r.tagName==="SLOT"},ET=function(r){return r.tagName.indexOf("-")>0},SEe=function(){function r(){this.counters={}}return r.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},r.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},r.prototype.pop=function(e){var t=this;e.forEach(function(n){return t.counters[n].pop()})},r.prototype.parse=function(e){var t=this,n=e.counterIncrement,a=e.counterReset,i=!0;n!==null&&n.forEach(function(A){var s=t.counters[A.counter];s&&A.increment!==0&&(i=!1,s.length||s.push(1),s[Math.max(0,s.length-1)]+=A.increment)});var o=[];return i&&a.forEach(function(A){var s=t.counters[A.counter];o.push(A.counter),s||(s=t.counters[A.counter]=[]),s.push(A.reset)}),o},r}(),bT={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},xT={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},MEe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},IEe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},wu=function(r,e,t,n,a,i){return r<e||r>t?yc(r,a,i.length>0):n.integers.reduce(function(o,A,s){for(;r>=A;)r-=A,o+=n.values[s];return o},"")+i},rR=function(r,e,t,n){var a="";do t||r--,a=n(r)+a,r/=e;while(r*e>=e);return a},rn=function(r,e,t,n,a){var i=t-e+1;return(r<0?"-":"")+(rR(Math.abs(r),i,n,function(o){return an(Math.floor(o%i)+e)})+a)},ns=function(r,e,t){t===void 0&&(t=". ");var n=e.length;return rR(Math.abs(r),n,!1,function(a){return e[Math.floor(a%n)]})+t},Tu=1,aA=2,iA=4,bl=8,bo=function(r,e,t,n,a,i){if(r<-9999||r>9999)return yc(r,4,a.length>0);var o=Math.abs(r),A=a;if(o===0)return e[0]+A;for(var s=0;o>0&&s<=4;s++){var u=o%10;u===0&&wn(i,Tu)&&A!==""?A=e[u]+A:u>1||u===1&&s===0||u===1&&s===1&&wn(i,aA)||u===1&&s===1&&wn(i,iA)&&r>100||u===1&&s>1&&wn(i,bl)?A=e[u]+(s>0?t[s-1]:"")+A:u===1&&s>0&&(A=t[s-1]+A),o=Math.floor(o/10)}return(r<0?n:"")+A},CT="十百千萬",_T="拾佰仟萬",ST="マイナス",wm="마이너스",yc=function(r,e,t){var n=t?". ":"",a=t?"、":"",i=t?", ":"",o=t?" ":"";switch(e){case 0:return"•"+o;case 1:return"◦"+o;case 2:return"◾"+o;case 5:var A=rn(r,48,57,!0,n);return A.length<4?"0"+A:A;case 4:return ns(r,"〇一二三四五六七八九",a);case 6:return wu(r,1,3999,bT,3,n).toLowerCase();case 7:return wu(r,1,3999,bT,3,n);case 8:return rn(r,945,969,!1,n);case 9:return rn(r,97,122,!1,n);case 10:return rn(r,65,90,!1,n);case 11:return rn(r,1632,1641,!0,n);case 12:case 49:return wu(r,1,9999,xT,3,n);case 35:return wu(r,1,9999,xT,3,n).toLowerCase();case 13:return rn(r,2534,2543,!0,n);case 14:case 30:return rn(r,6112,6121,!0,n);case 15:return ns(r,"子丑寅卯辰巳午未申酉戌亥",a);case 16:return ns(r,"甲乙丙丁戊己庚辛壬癸",a);case 17:case 48:return bo(r,"零一二三四五六七八九",CT,"負",a,aA|iA|bl);case 47:return bo(r,"零壹貳參肆伍陸柒捌玖",_T,"負",a,Tu|aA|iA|bl);case 42:return bo(r,"零一二三四五六七八九",CT,"负",a,aA|iA|bl);case 41:return bo(r,"零壹贰叁肆伍陆柒捌玖",_T,"负",a,Tu|aA|iA|bl);case 26:return bo(r,"〇一二三四五六七八九","十百千万",ST,a,0);case 25:return bo(r,"零壱弐参四伍六七八九","拾百千万",ST,a,Tu|aA|iA);case 31:return bo(r,"영일이삼사오육칠팔구","십백천만",wm,i,Tu|aA|iA);case 33:return bo(r,"零一二三四五六七八九","十百千萬",wm,i,0);case 32:return bo(r,"零壹貳參四五六七八九","拾百千",wm,i,Tu|aA|iA);case 18:return rn(r,2406,2415,!0,n);case 20:return wu(r,1,19999,IEe,3,n);case 21:return rn(r,2790,2799,!0,n);case 22:return rn(r,2662,2671,!0,n);case 22:return wu(r,1,10999,MEe,3,n);case 23:return ns(r,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return ns(r,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return rn(r,3302,3311,!0,n);case 28:return ns(r,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",a);case 29:return ns(r,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",a);case 34:return rn(r,3792,3801,!0,n);case 37:return rn(r,6160,6169,!0,n);case 38:return rn(r,4160,4169,!0,n);case 39:return rn(r,2918,2927,!0,n);case 40:return rn(r,1776,1785,!0,n);case 43:return rn(r,3046,3055,!0,n);case 44:return rn(r,3174,3183,!0,n);case 45:return rn(r,3664,3673,!0,n);case 46:return rn(r,3872,3881,!0,n);case 3:default:return rn(r,48,57,!0,n)}},nR="data-html2canvas-ignore",MT=function(){function r(e,t,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=t,this.counters=new SEe,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return r.prototype.toIFrame=function(e,t){var n=this,a=TEe(e,t);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var i=e.defaultView.pageXOffset,o=e.defaultView.pageYOffset,A=a.contentWindow,s=A.document,u=DEe(a).then(function(){return Zn(n,void 0,void 0,function(){var f,l;return zn(this,function(c){switch(c.label){case 0:return this.scrolledElements.forEach(kEe),A&&(A.scrollTo(t.left,t.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(A.scrollY!==t.top||A.scrollX!==t.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(A.scrollX-t.left,A.scrollY-t.top,0,0))),f=this.options.onclone,l=this.clonedReferenceElement,typeof l>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:s.fonts&&s.fonts.ready?[4,s.fonts.ready]:[3,2];case 1:c.sent(),c.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,LEe(s)]:[3,4];case 3:c.sent(),c.label=4;case 4:return typeof f=="function"?[2,Promise.resolve().then(function(){return f(s,l)}).then(function(){return a})]:[2,a]}})})});return s.open(),s.write(UEe(document.doctype)+"<html></html>"),NEe(this.referenceElement.ownerDocument,i,o),s.replaceChild(s.adoptNode(this.documentElement),s.documentElement),s.close(),u},r.prototype.createElementClone=function(e){if(bw(e,2))debugger;if(JQ(e))return this.createCanvasClone(e);if(wT(e))return this.createVideoClone(e);if(BT(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return Sw(t)&&(Sw(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),t.loading==="lazy"&&(t.loading="eager")),ET(t)?this.createCustomElementClone(t):t},r.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return Bm(e.style,t),t},r.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var n=[].slice.call(t.cssRules,0).reduce(function(i,o){return o&&typeof o.cssText=="string"?i+o.cssText:i},""),a=e.cloneNode(!1);return a.textContent=n,a}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),i.name!=="SecurityError")throw i}return e.cloneNode(!1)},r.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var a=e.cloneNode(!1);try{a.width=e.width,a.height=e.height;var i=e.getContext("2d"),o=a.getContext("2d");if(o)if(!this.options.allowTaint&&i)o.putImageData(i.getImageData(0,0,e.width,e.height),0,0);else{var A=(t=e.getContext("webgl2"))!==null&&t!==void 0?t:e.getContext("webgl");if(A){var s=A.getContextAttributes();(s==null?void 0:s.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}o.drawImage(e,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return a},r.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var n=t.getContext("2d");try{return n&&(n.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||n.getImageData(0,0,t.width,t.height)),t}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var a=e.ownerDocument.createElement("canvas");return a.width=e.offsetWidth,a.height=e.offsetHeight,a},r.prototype.appendChildNode=function(e,t,n){(!Nu(t)||!_Ee(t)&&!t.hasAttribute(nR)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(t)))&&(!this.options.copyStyles||!Nu(t)||!BT(t))&&e.appendChild(this.cloneNode(t,n))},r.prototype.cloneChildNodes=function(e,t,n){for(var a=this,i=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;i;i=i.nextSibling)if(Nu(i)&&tR(i)&&typeof i.assignedNodes=="function"){var o=i.assignedNodes();o.length&&o.forEach(function(A){return a.appendChildNode(t,A,n)})}else this.appendChildNode(t,i,n)},r.prototype.cloneNode=function(e,t){if(ZQ(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&Nu(e)&&(_w(e)||bv(e))){var a=this.createElementClone(e);a.style.transitionProperty="none";var i=n.getComputedStyle(e),o=n.getComputedStyle(e,":before"),A=n.getComputedStyle(e,":after");this.referenceElement===e&&_w(a)&&(this.clonedReferenceElement=a),Ab(a)&&REe(a);var s=this.counters.parse(new iT(this.context,i)),u=this.resolvePseudoContent(e,a,o,zl.BEFORE);ET(e)&&(t=!0),wT(e)||this.cloneChildNodes(e,a,t),u&&a.insertBefore(u,a.firstChild);var f=this.resolvePseudoContent(e,a,A,zl.AFTER);return f&&a.appendChild(f),this.counters.pop(s),(i&&(this.options.copyStyles||bv(e))&&!eR(e)||t)&&Bm(i,a),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([a,e.scrollLeft,e.scrollTop]),(Eg(e)||bg(e))&&(Eg(a)||bg(a))&&(a.value=e.value),a}return e.cloneNode(!1)},r.prototype.resolvePseudoContent=function(e,t,n,a){var i=this;if(n){var o=n.content,A=t.ownerDocument;if(!(!A||!o||o==="none"||o==="-moz-alt-content"||n.display==="none")){this.counters.parse(new iT(this.context,n));var s=new EBe(this.context,n),u=A.createElement("html2canvaspseudoelement");Bm(n,u),s.content.forEach(function(l){if(l.type===0)u.appendChild(A.createTextNode(l.value));else if(l.type===22){var c=A.createElement("img");c.src=l.value,c.style.opacity="1",u.appendChild(c)}else if(l.type===18){if(l.name==="attr"){var h=l.values.filter(Er);h.length&&u.appendChild(A.createTextNode(e.getAttribute(h[0].value)||""))}else if(l.name==="counter"){var d=l.values.filter(lf),v=d[0],g=d[1];if(v&&Er(v)){var p=i.counters.getCounterValue(v.value),y=g&&Er(g)?Ew.parse(i.context,g.value):3;u.appendChild(A.createTextNode(yc(p,y,!1)))}}else if(l.name==="counters"){var m=l.values.filter(lf),v=m[0],w=m[1],g=m[2];if(v&&Er(v)){var B=i.counters.getCounterValues(v.value),E=g&&Er(g)?Ew.parse(i.context,g.value):3,b=w&&w.type===0?w.value:"",C=B.map(function(M){return yc(M,E,!1)}).join(b);u.appendChild(A.createTextNode(C))}}}else if(l.type===20)switch(l.value){case"open-quote":u.appendChild(A.createTextNode(aT(s.quotes,i.quoteDepth++,!0)));break;case"close-quote":u.appendChild(A.createTextNode(aT(s.quotes,--i.quoteDepth,!1)));break;default:u.appendChild(A.createTextNode(l.value))}}),u.className=Mw+" "+Iw;var f=a===zl.BEFORE?" "+Mw:" "+Iw;return bv(t)?t.className.baseValue+=f:t.className+=f,u}}},r.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},r}(),zl;(function(r){r[r.BEFORE=0]="BEFORE",r[r.AFTER=1]="AFTER"})(zl||(zl={}));var TEe=function(r,e){var t=r.createElement("iframe");return t.className="html2canvas-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=e.width.toString(),t.height=e.height.toString(),t.scrolling="no",t.setAttribute(nR,"true"),r.body.appendChild(t),t},FEe=function(r){return new Promise(function(e){if(r.complete){e();return}if(!r.src){e();return}r.onload=e,r.onerror=e})},LEe=function(r){return Promise.all([].slice.call(r.images,0).map(FEe))},DEe=function(r){return new Promise(function(e,t){var n=r.contentWindow;if(!n)return t("No window assigned for iframe");var a=n.document;n.onload=r.onload=function(){n.onload=r.onload=null;var i=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(i),e(r))},50)}})},OEe=["all","d","content"],Bm=function(r,e){for(var t=r.length-1;t>=0;t--){var n=r.item(t);OEe.indexOf(n)===-1&&e.style.setProperty(n,r.getPropertyValue(n))}return e},UEe=function(r){var e="";return r&&(e+="<!DOCTYPE ",r.name&&(e+=r.name),r.internalSubset&&(e+=r.internalSubset),r.publicId&&(e+='"'+r.publicId+'"'),r.systemId&&(e+='"'+r.systemId+'"'),e+=">"),e},NEe=function(r,e,t){r&&r.defaultView&&(e!==r.defaultView.pageXOffset||t!==r.defaultView.pageYOffset)&&r.defaultView.scrollTo(e,t)},kEe=function(r){var e=r[0],t=r[1],n=r[2];e.scrollLeft=t,e.scrollTop=n},PEe=":before",QEe=":after",Mw="___html2canvas___pseudoelement_before",Iw="___html2canvas___pseudoelement_after",IT=`{
    content: "" !important;
    display: none !important;
}`,REe=function(r){HEe(r,"."+Mw+PEe+IT+`
         .`+Iw+QEe+IT)},HEe=function(r,e){var t=r.ownerDocument;if(t){var n=t.createElement("style");n.textContent=e,r.appendChild(n)}},aR=function(){function r(){}return r.getOrigin=function(e){var t=r._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},r.isSameOrigin=function(e){return r.getOrigin(e)===r._origin},r.setContext=function(e){r._link=e.document.createElement("a"),r._origin=r.getOrigin(e.location.href)},r._origin="about:blank",r}(),GEe=function(){function r(e,t){this.context=e,this._options=t,this._cache={}}return r.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)||(bm(e)||$Ee(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),t},r.prototype.match=function(e){return this._cache[e]},r.prototype.loadImage=function(e){return Zn(this,void 0,void 0,function(){var t,n,a,i,o=this;return zn(this,function(A){switch(A.label){case 0:return t=aR.isSameOrigin(e),n=!Em(e)&&this._options.useCORS===!0&&kn.SUPPORT_CORS_IMAGES&&!t,a=!Em(e)&&!t&&!bm(e)&&typeof this._options.proxy=="string"&&kn.SUPPORT_CORS_XHR&&!n,!t&&this._options.allowTaint===!1&&!Em(e)&&!bm(e)&&!a&&!n?[2]:(i=e,a?[4,this.proxy(i)]:[3,2]);case 1:i=A.sent(),A.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(s,u){var f=new Image;f.onload=function(){return s(f)},f.onerror=u,(WEe(i)||n)&&(f.crossOrigin="anonymous"),f.src=i,f.complete===!0&&setTimeout(function(){return s(f)},500),o._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,A.sent()]}})})},r.prototype.has=function(e){return typeof this._cache[e]<"u"},r.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},r.prototype.proxy=function(e){var t=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=e.substring(0,256);return new Promise(function(i,o){var A=kn.SUPPORT_RESPONSE_TYPE?"blob":"text",s=new XMLHttpRequest;s.onload=function(){if(s.status===200)if(A==="text")i(s.response);else{var l=new FileReader;l.addEventListener("load",function(){return i(l.result)},!1),l.addEventListener("error",function(c){return o(c)},!1),l.readAsDataURL(s.response)}else o("Failed to proxy resource "+a+" with status code "+s.status)},s.onerror=o;var u=n.indexOf("?")>-1?"&":"?";if(s.open("GET",""+n+u+"url="+encodeURIComponent(e)+"&responseType="+A),A!=="text"&&s instanceof XMLHttpRequest&&(s.responseType=A),t._options.imageTimeout){var f=t._options.imageTimeout;s.timeout=f,s.ontimeout=function(){return o("Timed out ("+f+"ms) proxying "+a)}}s.send()})},r}(),zEe=/^data:image\/svg\+xml/i,KEe=/^data:image\/.*;base64,/i,jEe=/^data:image\/.*/i,$Ee=function(r){return kn.SUPPORT_SVG_DRAWING||!VEe(r)},Em=function(r){return jEe.test(r)},WEe=function(r){return KEe.test(r)},bm=function(r){return r.substr(0,4)==="blob"},VEe=function(r){return r.substr(-3).toLowerCase()==="svg"||zEe.test(r)},ut=function(){function r(e,t){this.type=0,this.x=e,this.y=t}return r.prototype.add=function(e,t){return new r(this.x+e,this.y+t)},r}(),Bu=function(r,e,t){return new ut(r.x+(e.x-r.x)*t,r.y+(e.y-r.y)*t)},jd=function(){function r(e,t,n,a){this.type=1,this.start=e,this.startControl=t,this.endControl=n,this.end=a}return r.prototype.subdivide=function(e,t){var n=Bu(this.start,this.startControl,e),a=Bu(this.startControl,this.endControl,e),i=Bu(this.endControl,this.end,e),o=Bu(n,a,e),A=Bu(a,i,e),s=Bu(o,A,e);return t?new r(this.start,n,o,s):new r(s,A,i,this.end)},r.prototype.add=function(e,t){return new r(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},r.prototype.reverse=function(){return new r(this.end,this.endControl,this.startControl,this.start)},r}(),Ga=function(r){return r.type===1},XEe=function(){function r(e){var t=e.styles,n=e.bounds,a=Bl(t.borderTopLeftRadius,n.width,n.height),i=a[0],o=a[1],A=Bl(t.borderTopRightRadius,n.width,n.height),s=A[0],u=A[1],f=Bl(t.borderBottomRightRadius,n.width,n.height),l=f[0],c=f[1],h=Bl(t.borderBottomLeftRadius,n.width,n.height),d=h[0],v=h[1],g=[];g.push((i+s)/n.width),g.push((d+l)/n.width),g.push((o+v)/n.height),g.push((u+c)/n.height);var p=Math.max.apply(Math,g);p>1&&(i/=p,o/=p,s/=p,u/=p,l/=p,c/=p,d/=p,v/=p);var y=n.width-s,m=n.height-c,w=n.width-l,B=n.height-v,E=t.borderTopWidth,b=t.borderRightWidth,C=t.borderBottomWidth,_=t.borderLeftWidth,x=Mr(t.paddingTop,e.bounds.width),M=Mr(t.paddingRight,e.bounds.width),S=Mr(t.paddingBottom,e.bounds.width),I=Mr(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||o>0?Or(n.left+_/3,n.top+E/3,i-_/3,o-E/3,mr.TOP_LEFT):new ut(n.left+_/3,n.top+E/3),this.topRightBorderDoubleOuterBox=i>0||o>0?Or(n.left+y,n.top+E/3,s-b/3,u-E/3,mr.TOP_RIGHT):new ut(n.left+n.width-b/3,n.top+E/3),this.bottomRightBorderDoubleOuterBox=l>0||c>0?Or(n.left+w,n.top+m,l-b/3,c-C/3,mr.BOTTOM_RIGHT):new ut(n.left+n.width-b/3,n.top+n.height-C/3),this.bottomLeftBorderDoubleOuterBox=d>0||v>0?Or(n.left+_/3,n.top+B,d-_/3,v-C/3,mr.BOTTOM_LEFT):new ut(n.left+_/3,n.top+n.height-C/3),this.topLeftBorderDoubleInnerBox=i>0||o>0?Or(n.left+_*2/3,n.top+E*2/3,i-_*2/3,o-E*2/3,mr.TOP_LEFT):new ut(n.left+_*2/3,n.top+E*2/3),this.topRightBorderDoubleInnerBox=i>0||o>0?Or(n.left+y,n.top+E*2/3,s-b*2/3,u-E*2/3,mr.TOP_RIGHT):new ut(n.left+n.width-b*2/3,n.top+E*2/3),this.bottomRightBorderDoubleInnerBox=l>0||c>0?Or(n.left+w,n.top+m,l-b*2/3,c-C*2/3,mr.BOTTOM_RIGHT):new ut(n.left+n.width-b*2/3,n.top+n.height-C*2/3),this.bottomLeftBorderDoubleInnerBox=d>0||v>0?Or(n.left+_*2/3,n.top+B,d-_*2/3,v-C*2/3,mr.BOTTOM_LEFT):new ut(n.left+_*2/3,n.top+n.height-C*2/3),this.topLeftBorderStroke=i>0||o>0?Or(n.left+_/2,n.top+E/2,i-_/2,o-E/2,mr.TOP_LEFT):new ut(n.left+_/2,n.top+E/2),this.topRightBorderStroke=i>0||o>0?Or(n.left+y,n.top+E/2,s-b/2,u-E/2,mr.TOP_RIGHT):new ut(n.left+n.width-b/2,n.top+E/2),this.bottomRightBorderStroke=l>0||c>0?Or(n.left+w,n.top+m,l-b/2,c-C/2,mr.BOTTOM_RIGHT):new ut(n.left+n.width-b/2,n.top+n.height-C/2),this.bottomLeftBorderStroke=d>0||v>0?Or(n.left+_/2,n.top+B,d-_/2,v-C/2,mr.BOTTOM_LEFT):new ut(n.left+_/2,n.top+n.height-C/2),this.topLeftBorderBox=i>0||o>0?Or(n.left,n.top,i,o,mr.TOP_LEFT):new ut(n.left,n.top),this.topRightBorderBox=s>0||u>0?Or(n.left+y,n.top,s,u,mr.TOP_RIGHT):new ut(n.left+n.width,n.top),this.bottomRightBorderBox=l>0||c>0?Or(n.left+w,n.top+m,l,c,mr.BOTTOM_RIGHT):new ut(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=d>0||v>0?Or(n.left,n.top+B,d,v,mr.BOTTOM_LEFT):new ut(n.left,n.top+n.height),this.topLeftPaddingBox=i>0||o>0?Or(n.left+_,n.top+E,Math.max(0,i-_),Math.max(0,o-E),mr.TOP_LEFT):new ut(n.left+_,n.top+E),this.topRightPaddingBox=s>0||u>0?Or(n.left+Math.min(y,n.width-b),n.top+E,y>n.width+b?0:Math.max(0,s-b),Math.max(0,u-E),mr.TOP_RIGHT):new ut(n.left+n.width-b,n.top+E),this.bottomRightPaddingBox=l>0||c>0?Or(n.left+Math.min(w,n.width-_),n.top+Math.min(m,n.height-C),Math.max(0,l-b),Math.max(0,c-C),mr.BOTTOM_RIGHT):new ut(n.left+n.width-b,n.top+n.height-C),this.bottomLeftPaddingBox=d>0||v>0?Or(n.left+_,n.top+Math.min(B,n.height-C),Math.max(0,d-_),Math.max(0,v-C),mr.BOTTOM_LEFT):new ut(n.left+_,n.top+n.height-C),this.topLeftContentBox=i>0||o>0?Or(n.left+_+I,n.top+E+x,Math.max(0,i-(_+I)),Math.max(0,o-(E+x)),mr.TOP_LEFT):new ut(n.left+_+I,n.top+E+x),this.topRightContentBox=s>0||u>0?Or(n.left+Math.min(y,n.width+_+I),n.top+E+x,y>n.width+_+I?0:s-_+I,u-(E+x),mr.TOP_RIGHT):new ut(n.left+n.width-(b+M),n.top+E+x),this.bottomRightContentBox=l>0||c>0?Or(n.left+Math.min(w,n.width-(_+I)),n.top+Math.min(m,n.height+E+x),Math.max(0,l-(b+M)),c-(C+S),mr.BOTTOM_RIGHT):new ut(n.left+n.width-(b+M),n.top+n.height-(C+S)),this.bottomLeftContentBox=d>0||v>0?Or(n.left+_+I,n.top+B,Math.max(0,d-(_+I)),v-(C+S),mr.BOTTOM_LEFT):new ut(n.left+_+I,n.top+n.height-(C+S))}return r}(),mr;(function(r){r[r.TOP_LEFT=0]="TOP_LEFT",r[r.TOP_RIGHT=1]="TOP_RIGHT",r[r.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",r[r.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(mr||(mr={}));var Or=function(r,e,t,n,a){var i=4*((Math.sqrt(2)-1)/3),o=t*i,A=n*i,s=r+t,u=e+n;switch(a){case mr.TOP_LEFT:return new jd(new ut(r,u),new ut(r,u-A),new ut(s-o,e),new ut(s,e));case mr.TOP_RIGHT:return new jd(new ut(r,e),new ut(r+o,e),new ut(s,u-A),new ut(s,u));case mr.BOTTOM_RIGHT:return new jd(new ut(s,e),new ut(s,e+A),new ut(r+o,u),new ut(r,u));case mr.BOTTOM_LEFT:default:return new jd(new ut(s,u),new ut(s-o,u),new ut(r,e+A),new ut(r,e))}},xg=function(r){return[r.topLeftBorderBox,r.topRightBorderBox,r.bottomRightBorderBox,r.bottomLeftBorderBox]},YEe=function(r){return[r.topLeftContentBox,r.topRightContentBox,r.bottomRightContentBox,r.bottomLeftContentBox]},Cg=function(r){return[r.topLeftPaddingBox,r.topRightPaddingBox,r.bottomRightPaddingBox,r.bottomLeftPaddingBox]},ZEe=function(){function r(e,t,n){this.offsetX=e,this.offsetY=t,this.matrix=n,this.type=0,this.target=6}return r}(),$d=function(){function r(e,t){this.path=e,this.target=t,this.type=1}return r}(),qEe=function(){function r(e){this.opacity=e,this.type=2,this.target=6}return r}(),JEe=function(r){return r.type===0},iR=function(r){return r.type===1},ebe=function(r){return r.type===2},TT=function(r,e){return r.length===e.length?r.some(function(t,n){return t===e[n]}):!1},tbe=function(r,e,t,n,a){return r.map(function(i,o){switch(o){case 0:return i.add(e,t);case 1:return i.add(e+n,t);case 2:return i.add(e+n,t+a);case 3:return i.add(e,t+a)}return i})},oR=function(){function r(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return r}(),AR=function(){function r(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new XEe(this.container),this.container.styles.opacity<1&&this.effects.push(new qEe(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new ZEe(n,a,i))}if(this.container.styles.overflowX!==0){var o=xg(this.curves),A=Cg(this.curves);TT(o,A)?this.effects.push(new $d(o,6)):(this.effects.push(new $d(o,2)),this.effects.push(new $d(A,4)))}}return r.prototype.getEffects=function(e){for(var t=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var i=n.effects.filter(function(s){return!iR(s)});if(t||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,i),t=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var o=xg(n.curves),A=Cg(n.curves);TT(o,A)||a.unshift(new $d(A,6))}}else a.unshift.apply(a,i);n=n.parent}return a.filter(function(s){return wn(s.target,e)})},r}(),Tw=function(r,e,t,n){r.container.elements.forEach(function(a){var i=wn(a.flags,4),o=wn(a.flags,2),A=new AR(a,r);wn(a.styles.display,2048)&&n.push(A);var s=wn(a.flags,8)?[]:n;if(i||o){var u=i||a.styles.isPositioned()?t:e,f=new oR(A);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var l=a.styles.zIndex.order;if(l<0){var c=0;u.negativeZIndex.some(function(d,v){return l>d.element.container.styles.zIndex.order?(c=v,!1):c>0}),u.negativeZIndex.splice(c,0,f)}else if(l>0){var h=0;u.positiveZIndex.some(function(d,v){return l>=d.element.container.styles.zIndex.order?(h=v+1,!1):h>0}),u.positiveZIndex.splice(h,0,f)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(f)}else a.styles.isFloating()?u.nonPositionedFloats.push(f):u.nonPositionedInlineLevel.push(f);Tw(A,f,i?f:t,s)}else a.styles.isInlineLevel()?e.inlineLevel.push(A):e.nonInlineLevel.push(A),Tw(A,e,t,s);wn(a.flags,8)&&sR(a,s)})},sR=function(r,e){for(var t=r instanceof Cw?r.start:1,n=r instanceof Cw?r.reversed:!1,a=0;a<e.length;a++){var i=e[a];i.container instanceof jQ&&typeof i.container.value=="number"&&i.container.value!==0&&(t=i.container.value),i.listValue=yc(t,i.container.styles.listStyleType,!0),t+=n?-1:1}},rbe=function(r){var e=new AR(r,null),t=new oR(e),n=[];return Tw(e,t,t,n),sR(e.container,n),t},FT=function(r,e){switch(e){case 0:return ja(r.topLeftBorderBox,r.topLeftPaddingBox,r.topRightBorderBox,r.topRightPaddingBox);case 1:return ja(r.topRightBorderBox,r.topRightPaddingBox,r.bottomRightBorderBox,r.bottomRightPaddingBox);case 2:return ja(r.bottomRightBorderBox,r.bottomRightPaddingBox,r.bottomLeftBorderBox,r.bottomLeftPaddingBox);case 3:default:return ja(r.bottomLeftBorderBox,r.bottomLeftPaddingBox,r.topLeftBorderBox,r.topLeftPaddingBox)}},nbe=function(r,e){switch(e){case 0:return ja(r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox,r.topRightBorderBox,r.topRightBorderDoubleOuterBox);case 1:return ja(r.topRightBorderBox,r.topRightBorderDoubleOuterBox,r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox);case 2:return ja(r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox,r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox);case 3:default:return ja(r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox,r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox)}},abe=function(r,e){switch(e){case 0:return ja(r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox,r.topRightBorderDoubleInnerBox,r.topRightPaddingBox);case 1:return ja(r.topRightBorderDoubleInnerBox,r.topRightPaddingBox,r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox);case 2:return ja(r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox,r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox);case 3:default:return ja(r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox,r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox)}},ibe=function(r,e){switch(e){case 0:return Wd(r.topLeftBorderStroke,r.topRightBorderStroke);case 1:return Wd(r.topRightBorderStroke,r.bottomRightBorderStroke);case 2:return Wd(r.bottomRightBorderStroke,r.bottomLeftBorderStroke);case 3:default:return Wd(r.bottomLeftBorderStroke,r.topLeftBorderStroke)}},Wd=function(r,e){var t=[];return Ga(r)?t.push(r.subdivide(.5,!1)):t.push(r),Ga(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},ja=function(r,e,t,n){var a=[];return Ga(r)?a.push(r.subdivide(.5,!1)):a.push(r),Ga(t)?a.push(t.subdivide(.5,!0)):a.push(t),Ga(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),Ga(e)?a.push(e.subdivide(.5,!1).reverse()):a.push(e),a},uR=function(r){var e=r.bounds,t=r.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},_g=function(r){var e=r.styles,t=r.bounds,n=Mr(e.paddingLeft,t.width),a=Mr(e.paddingRight,t.width),i=Mr(e.paddingTop,t.width),o=Mr(e.paddingBottom,t.width);return t.add(n+e.borderLeftWidth,i+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+a),-(e.borderTopWidth+e.borderBottomWidth+i+o))},obe=function(r,e){return r===0?e.bounds:r===2?_g(e):uR(e)},Abe=function(r,e){return r===0?e.bounds:r===2?_g(e):uR(e)},xm=function(r,e,t){var n=obe(Fu(r.styles.backgroundOrigin,e),r),a=Abe(Fu(r.styles.backgroundClip,e),r),i=sbe(Fu(r.styles.backgroundSize,e),t,n),o=i[0],A=i[1],s=Bl(Fu(r.styles.backgroundPosition,e),n.width-o,n.height-A),u=ube(Fu(r.styles.backgroundRepeat,e),s,i,n,a),f=Math.round(n.left+s[0]),l=Math.round(n.top+s[1]);return[u,f,l,o,A]},Eu=function(r){return Er(r)&&r.value===Ku.AUTO},Vd=function(r){return typeof r=="number"},sbe=function(r,e,t){var n=e[0],a=e[1],i=e[2],o=r[0],A=r[1];if(!o)return[0,0];if(ln(o)&&A&&ln(A))return[Mr(o,t.width),Mr(A,t.height)];var s=Vd(i);if(Er(o)&&(o.value===Ku.CONTAIN||o.value===Ku.COVER)){if(Vd(i)){var u=t.width/t.height;return u<i!=(o.value===Ku.COVER)?[t.width,t.width/i]:[t.height*i,t.height]}return[t.width,t.height]}var f=Vd(n),l=Vd(a),c=f||l;if(Eu(o)&&(!A||Eu(A))){if(f&&l)return[n,a];if(!s&&!c)return[t.width,t.height];if(c&&s){var h=f?n:a*i,d=l?a:n/i;return[h,d]}var v=f?n:t.width,g=l?a:t.height;return[v,g]}if(s){var p=0,y=0;return ln(o)?p=Mr(o,t.width):ln(A)&&(y=Mr(A,t.height)),Eu(o)?p=y*i:(!A||Eu(A))&&(y=p/i),[p,y]}var m=null,w=null;if(ln(o)?m=Mr(o,t.width):A&&ln(A)&&(w=Mr(A,t.height)),m!==null&&(!A||Eu(A))&&(w=f&&l?m/n*a:t.height),w!==null&&Eu(o)&&(m=f&&l?w/a*n:t.width),m!==null&&w!==null)return[m,w];throw new Error("Unable to calculate background-size for element")},Fu=function(r,e){var t=r[e];return typeof t>"u"?r[0]:t},ube=function(r,e,t,n,a){var i=e[0],o=e[1],A=t[0],s=t[1];switch(r){case 2:return[new ut(Math.round(n.left),Math.round(n.top+o)),new ut(Math.round(n.left+n.width),Math.round(n.top+o)),new ut(Math.round(n.left+n.width),Math.round(s+n.top+o)),new ut(Math.round(n.left),Math.round(s+n.top+o))];case 3:return[new ut(Math.round(n.left+i),Math.round(n.top)),new ut(Math.round(n.left+i+A),Math.round(n.top)),new ut(Math.round(n.left+i+A),Math.round(n.height+n.top)),new ut(Math.round(n.left+i),Math.round(n.height+n.top))];case 1:return[new ut(Math.round(n.left+i),Math.round(n.top+o)),new ut(Math.round(n.left+i+A),Math.round(n.top+o)),new ut(Math.round(n.left+i+A),Math.round(n.top+o+s)),new ut(Math.round(n.left+i),Math.round(n.top+o+s))];default:return[new ut(Math.round(a.left),Math.round(a.top)),new ut(Math.round(a.left+a.width),Math.round(a.top)),new ut(Math.round(a.left+a.width),Math.round(a.height+a.top)),new ut(Math.round(a.left),Math.round(a.height+a.top))]}},fbe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",LT="Hidden Text",lbe=function(){function r(e){this._data={},this._document=e}return r.prototype.parseMetrics=function(e,t){var n=this._document.createElement("div"),a=this._document.createElement("img"),i=this._document.createElement("span"),o=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=t,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",o.appendChild(n),a.src=fbe,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",i.style.fontFamily=e,i.style.fontSize=t,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(LT)),n.appendChild(i),n.appendChild(a);var A=a.offsetTop-i.offsetTop+2;n.removeChild(i),n.appendChild(this._document.createTextNode(LT)),n.style.lineHeight="normal",a.style.verticalAlign="super";var s=a.offsetTop-n.offsetTop+2;return o.removeChild(n),{baseline:A,middle:s}},r.prototype.getMetrics=function(e,t){var n=e+" "+t;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,t)),this._data[n]},r}(),fR=function(){function r(e,t){this.context=e,this.options=t}return r}(),cbe=1e4,hbe=function(r){wi(e,r);function e(t,n){var a=r.call(this,t,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new lbe(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return e.prototype.applyEffects=function(t){for(var n=this;this._activeEffects.length;)this.popEffect();t.forEach(function(a){return n.applyEffect(a)})},e.prototype.applyEffect=function(t){this.ctx.save(),ebe(t)&&(this.ctx.globalAlpha=t.opacity),JEe(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),iR(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return Zn(this,void 0,void 0,function(){var n;return zn(this,function(a){switch(a.label){case 0:return n=t.element.container.styles,n.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(t){return Zn(this,void 0,void 0,function(){return zn(this,function(n){switch(n.label){case 0:if(wn(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(t)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(t,n,a){var i=this;if(n===0)this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+a);else{var o=ib(t.text);o.reduce(function(A,s){return i.ctx.fillText(s,A,t.bounds.top+a),A+i.ctx.measureText(s).width},t.bounds.left)}},e.prototype.createFontStyle=function(t){var n=t.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),a=ybe(t.fontFamily).join(", "),i=Jc(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,n,t.fontWeight,i,a].join(" "),a,i]},e.prototype.renderTextNode=function(t,n){return Zn(this,void 0,void 0,function(){var a,i,o,A,s,u,f,l,c=this;return zn(this,function(h){return a=this.createFontStyle(n),i=a[0],o=a[1],A=a[2],this.ctx.font=i,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",s=this.fontMetrics.getMetrics(o,A),u=s.baseline,f=s.middle,l=n.paintOrder,t.textBounds.forEach(function(d){l.forEach(function(v){switch(v){case 0:c.ctx.fillStyle=In(n.color),c.renderTextWithLetterSpacing(d,n.letterSpacing,u);var g=n.textShadow;g.length&&d.text.trim().length&&(g.slice(0).reverse().forEach(function(p){c.ctx.shadowColor=In(p.color),c.ctx.shadowOffsetX=p.offsetX.number*c.options.scale,c.ctx.shadowOffsetY=p.offsetY.number*c.options.scale,c.ctx.shadowBlur=p.blur.number,c.renderTextWithLetterSpacing(d,n.letterSpacing,u)}),c.ctx.shadowColor="",c.ctx.shadowOffsetX=0,c.ctx.shadowOffsetY=0,c.ctx.shadowBlur=0),n.textDecorationLine.length&&(c.ctx.fillStyle=In(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(p){switch(p){case 1:c.ctx.fillRect(d.bounds.left,Math.round(d.bounds.top+u),d.bounds.width,1);break;case 2:c.ctx.fillRect(d.bounds.left,Math.round(d.bounds.top),d.bounds.width,1);break;case 3:c.ctx.fillRect(d.bounds.left,Math.ceil(d.bounds.top+f),d.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&d.text.trim().length&&(c.ctx.strokeStyle=In(n.webkitTextStrokeColor),c.ctx.lineWidth=n.webkitTextStrokeWidth,c.ctx.lineJoin=window.chrome?"miter":"round",c.ctx.strokeText(d.text,d.bounds.left,d.bounds.top+u)),c.ctx.strokeStyle="",c.ctx.lineWidth=0,c.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(t,n,a){if(a&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var i=_g(t),o=Cg(n);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,t.intrinsicWidth,t.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return Zn(this,void 0,void 0,function(){var n,a,i,o,A,s,y,y,u,f,l,c,w,h,d,B,v,g,p,y,m,w,B;return zn(this,function(E){switch(E.label){case 0:this.applyEffects(t.getEffects(4)),n=t.container,a=t.curves,i=n.styles,o=0,A=n.textNodes,E.label=1;case 1:return o<A.length?(s=A[o],[4,this.renderTextNode(s,i)]):[3,4];case 2:E.sent(),E.label=3;case 3:return o++,[3,1];case 4:if(!(n instanceof GQ))return[3,8];E.label=5;case 5:return E.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return y=E.sent(),this.renderReplacedElement(n,a,y),[3,8];case 7:return E.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof zQ&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof KQ))return[3,12];E.label=9;case 9:return E.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return y=E.sent(),this.renderReplacedElement(n,a,y),[3,12];case 11:return E.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof VQ&&n.tree?(u=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:f=E.sent(),n.width&&n.height&&this.ctx.drawImage(f,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),E.label=14;case 14:if(n instanceof ob&&(l=Math.min(n.bounds.width,n.bounds.height),n.type===wg?n.checked&&(this.ctx.save(),this.path([new ut(n.bounds.left+l*.39363,n.bounds.top+l*.79),new ut(n.bounds.left+l*.16,n.bounds.top+l*.5549),new ut(n.bounds.left+l*.27347,n.bounds.top+l*.44071),new ut(n.bounds.left+l*.39694,n.bounds.top+l*.5649),new ut(n.bounds.left+l*.72983,n.bounds.top+l*.23),new ut(n.bounds.left+l*.84,n.bounds.top+l*.34085),new ut(n.bounds.left+l*.39363,n.bounds.top+l*.79)]),this.ctx.fillStyle=In(mT),this.ctx.fill(),this.ctx.restore()):n.type===Bg&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+l/2,n.bounds.top+l/2,l/4,0,Math.PI*2,!0),this.ctx.fillStyle=In(mT),this.ctx.fill(),this.ctx.restore())),dbe(n)&&n.value.length){switch(c=this.createFontStyle(i),w=c[0],h=c[1],d=this.fontMetrics.getMetrics(w,h).baseline,this.ctx.font=w,this.ctx.fillStyle=In(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=gbe(n.styles.textAlign),B=_g(n),v=0,n.styles.textAlign){case 1:v+=B.width/2;break;case 2:v+=B.width;break}g=B.add(v,0,0,-B.height/2+1),this.ctx.save(),this.path([new ut(B.left,B.top),new ut(B.left+B.width,B.top),new ut(B.left+B.width,B.top+B.height),new ut(B.left,B.top+B.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Gl(n.value,g),i.letterSpacing,d),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!wn(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(p=n.styles.listStyleImage,p.type!==0)return[3,18];y=void 0,m=p.url,E.label=15;case 15:return E.trys.push([15,17,,18]),[4,this.context.cache.match(m)];case 16:return y=E.sent(),this.ctx.drawImage(y,n.bounds.left-(y.width+10),n.bounds.top),[3,18];case 17:return E.sent(),this.context.logger.error("Error loading list-style-image "+m),[3,18];case 18:return[3,20];case 19:t.listValue&&n.styles.listStyleType!==-1&&(w=this.createFontStyle(i)[0],this.ctx.font=w,this.ctx.fillStyle=In(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",B=new No(n.bounds.left,n.bounds.top+Mr(n.styles.paddingTop,n.bounds.width),n.bounds.width,rT(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Gl(t.listValue,B),i.letterSpacing,rT(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),E.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(t){return Zn(this,void 0,void 0,function(){var n,a,p,i,o,p,A,s,p,u,f,p,l,c,p,h,d,p,v,g,p;return zn(this,function(y){switch(y.label){case 0:if(wn(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:y.sent(),n=0,a=t.negativeZIndex,y.label=2;case 2:return n<a.length?(p=a[n],[4,this.renderStack(p)]):[3,5];case 3:y.sent(),y.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:y.sent(),i=0,o=t.nonInlineLevel,y.label=7;case 7:return i<o.length?(p=o[i],[4,this.renderNode(p)]):[3,10];case 8:y.sent(),y.label=9;case 9:return i++,[3,7];case 10:A=0,s=t.nonPositionedFloats,y.label=11;case 11:return A<s.length?(p=s[A],[4,this.renderStack(p)]):[3,14];case 12:y.sent(),y.label=13;case 13:return A++,[3,11];case 14:u=0,f=t.nonPositionedInlineLevel,y.label=15;case 15:return u<f.length?(p=f[u],[4,this.renderStack(p)]):[3,18];case 16:y.sent(),y.label=17;case 17:return u++,[3,15];case 18:l=0,c=t.inlineLevel,y.label=19;case 19:return l<c.length?(p=c[l],[4,this.renderNode(p)]):[3,22];case 20:y.sent(),y.label=21;case 21:return l++,[3,19];case 22:h=0,d=t.zeroOrAutoZIndexOrTransformedOrOpacity,y.label=23;case 23:return h<d.length?(p=d[h],[4,this.renderStack(p)]):[3,26];case 24:y.sent(),y.label=25;case 25:return h++,[3,23];case 26:v=0,g=t.positiveZIndex,y.label=27;case 27:return v<g.length?(p=g[v],[4,this.renderStack(p)]):[3,30];case 28:y.sent(),y.label=29;case 29:return v++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var n=this;t.forEach(function(a,i){var o=Ga(a)?a.start:a;i===0?n.ctx.moveTo(o.x,o.y):n.ctx.lineTo(o.x,o.y),Ga(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},e.prototype.renderRepeat=function(t,n,a,i){this.path(t),this.ctx.fillStyle=n,this.ctx.translate(a,i),this.ctx.fill(),this.ctx.translate(-a,-i)},e.prototype.resizeImage=function(t,n,a){var i;if(t.width===n&&t.height===a)return t;var o=(i=this.canvas.ownerDocument)!==null&&i!==void 0?i:document,A=o.createElement("canvas");A.width=Math.max(1,n),A.height=Math.max(1,a);var s=A.getContext("2d");return s.drawImage(t,0,0,t.width,t.height,0,0,n,a),A},e.prototype.renderBackgroundImage=function(t){return Zn(this,void 0,void 0,function(){var n,a,i,o,A,s;return zn(this,function(u){switch(u.label){case 0:n=t.styles.backgroundImage.length-1,a=function(f){var l,c,h,x,F,U,I,D,C,d,x,F,U,I,D,v,g,p,y,m,w,B,E,b,C,_,x,M,S,I,D,O,F,U,Q,N,R,J,re,ee,q,ve;return zn(this,function(Me){switch(Me.label){case 0:if(f.type!==0)return[3,5];l=void 0,c=f.url,Me.label=1;case 1:return Me.trys.push([1,3,,4]),[4,i.context.cache.match(c)];case 2:return l=Me.sent(),[3,4];case 3:return Me.sent(),i.context.logger.error("Error loading background-image "+c),[3,4];case 4:return l&&(h=xm(t,n,[l.width,l.height,l.width/l.height]),x=h[0],F=h[1],U=h[2],I=h[3],D=h[4],C=i.ctx.createPattern(i.resizeImage(l,I,D),"repeat"),i.renderRepeat(x,C,F,U)),[3,6];case 5:J1e(f)?(d=xm(t,n,[null,null,null]),x=d[0],F=d[1],U=d[2],I=d[3],D=d[4],v=V1e(f.angle,I,D),g=v[0],p=v[1],y=v[2],m=v[3],w=v[4],B=document.createElement("canvas"),B.width=I,B.height=D,E=B.getContext("2d"),b=E.createLinearGradient(p,m,y,w),eT(f.stops,g).forEach(function(Re){return b.addColorStop(Re.stop,In(Re.color))}),E.fillStyle=b,E.fillRect(0,0,I,D),I>0&&D>0&&(C=i.ctx.createPattern(B,"repeat"),i.renderRepeat(x,C,F,U))):ewe(f)&&(_=xm(t,n,[null,null,null]),x=_[0],M=_[1],S=_[2],I=_[3],D=_[4],O=f.position.length===0?[rb]:f.position,F=Mr(O[0],I),U=Mr(O[O.length-1],D),Q=X1e(f,F,U,I,D),N=Q[0],R=Q[1],N>0&&R>0&&(J=i.ctx.createRadialGradient(M+F,S+U,0,M+F,S+U,N),eT(f.stops,N*2).forEach(function(Re){return J.addColorStop(Re.stop,In(Re.color))}),i.path(x),i.ctx.fillStyle=J,N!==R?(re=t.bounds.left+.5*t.bounds.width,ee=t.bounds.top+.5*t.bounds.height,q=R/N,ve=1/q,i.ctx.save(),i.ctx.translate(re,ee),i.ctx.transform(1,0,0,q,0,0),i.ctx.translate(-re,-ee),i.ctx.fillRect(M,ve*(S-ee)+ee,I,D*ve),i.ctx.restore()):i.ctx.fill())),Me.label=6;case 6:return n--,[2]}})},i=this,o=0,A=t.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return o<A.length?(s=A[o],[5,a(s)]):[3,4];case 2:u.sent(),u.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(t,n,a){return Zn(this,void 0,void 0,function(){return zn(this,function(i){return this.path(FT(a,n)),this.ctx.fillStyle=In(t),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(t,n,a,i){return Zn(this,void 0,void 0,function(){var o,A;return zn(this,function(s){switch(s.label){case 0:return n<3?[4,this.renderSolidBorder(t,a,i)]:[3,2];case 1:return s.sent(),[2];case 2:return o=nbe(i,a),this.path(o),this.ctx.fillStyle=In(t),this.ctx.fill(),A=abe(i,a),this.path(A),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(t){return Zn(this,void 0,void 0,function(){var n,a,i,o,A,s,u,f,l=this;return zn(this,function(c){switch(c.label){case 0:return this.applyEffects(t.getEffects(2)),n=t.container.styles,a=!EA(n.backgroundColor)||n.backgroundImage.length,i=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],o=vbe(Fu(n.backgroundClip,0),t.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),EA(n.backgroundColor)||(this.ctx.fillStyle=In(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:c.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(h){l.ctx.save();var d=xg(t.curves),v=h.inset?0:cbe,g=tbe(d,-v+(h.inset?1:-1)*h.spread.number,(h.inset?1:-1)*h.spread.number,h.spread.number*(h.inset?-2:2),h.spread.number*(h.inset?-2:2));h.inset?(l.path(d),l.ctx.clip(),l.mask(g)):(l.mask(d),l.ctx.clip(),l.path(g)),l.ctx.shadowOffsetX=h.offsetX.number+v,l.ctx.shadowOffsetY=h.offsetY.number,l.ctx.shadowColor=In(h.color),l.ctx.shadowBlur=h.blur.number,l.ctx.fillStyle=h.inset?In(h.color):"rgba(0,0,0,1)",l.ctx.fill(),l.ctx.restore()}),c.label=2;case 2:A=0,s=0,u=i,c.label=3;case 3:return s<u.length?(f=u[s],f.style!==0&&!EA(f.color)&&f.width>0?f.style!==2?[3,5]:[4,this.renderDashedDottedBorder(f.color,f.width,A,t.curves,2)]:[3,11]):[3,13];case 4:return c.sent(),[3,11];case 5:return f.style!==3?[3,7]:[4,this.renderDashedDottedBorder(f.color,f.width,A,t.curves,3)];case 6:return c.sent(),[3,11];case 7:return f.style!==4?[3,9]:[4,this.renderDoubleBorder(f.color,f.width,A,t.curves)];case 8:return c.sent(),[3,11];case 9:return[4,this.renderSolidBorder(f.color,A,t.curves)];case 10:c.sent(),c.label=11;case 11:A++,c.label=12;case 12:return s++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(t,n,a,i,o){return Zn(this,void 0,void 0,function(){var A,s,u,f,l,c,h,d,v,g,p,y,m,w,B,E,B,E;return zn(this,function(b){return this.ctx.save(),A=ibe(i,a),s=FT(i,a),o===2&&(this.path(s),this.ctx.clip()),Ga(s[0])?(u=s[0].start.x,f=s[0].start.y):(u=s[0].x,f=s[0].y),Ga(s[1])?(l=s[1].end.x,c=s[1].end.y):(l=s[1].x,c=s[1].y),a===0||a===2?h=Math.abs(u-l):h=Math.abs(f-c),this.ctx.beginPath(),o===3?this.formatPath(A):this.formatPath(s.slice(0,2)),d=n<3?n*3:n*2,v=n<3?n*2:n,o===3&&(d=n,v=n),g=!0,h<=d*2?g=!1:h<=d*2+v?(p=h/(2*d+v),d*=p,v*=p):(y=Math.floor((h+v)/(d+v)),m=(h-y*d)/(y-1),w=(h-(y+1)*d)/y,v=w<=0||Math.abs(v-m)<Math.abs(v-w)?m:w),g&&(o===3?this.ctx.setLineDash([0,d+v]):this.ctx.setLineDash([d,v])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=In(t),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(Ga(s[0])&&(B=s[3],E=s[0],this.ctx.beginPath(),this.formatPath([new ut(B.end.x,B.end.y),new ut(E.start.x,E.start.y)]),this.ctx.stroke()),Ga(s[1])&&(B=s[1],E=s[2],this.ctx.beginPath(),this.formatPath([new ut(B.end.x,B.end.y),new ut(E.start.x,E.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(t){return Zn(this,void 0,void 0,function(){var n;return zn(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=In(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=rbe(t),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(fR),dbe=function(r){return r instanceof WQ||r instanceof $Q?!0:r instanceof ob&&r.type!==Bg&&r.type!==wg},vbe=function(r,e){switch(r){case 0:return xg(e);case 2:return YEe(e);case 1:default:return Cg(e)}},gbe=function(r){switch(r){case 1:return"center";case 2:return"right";case 0:default:return"left"}},pbe=["-apple-system","system-ui"],ybe=function(r){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?r.filter(function(e){return pbe.indexOf(e)===-1}):r},mbe=function(r){wi(e,r);function e(t,n){var a=r.call(this,t,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return e.prototype.render=function(t){return Zn(this,void 0,void 0,function(){var n,a;return zn(this,function(i){switch(i.label){case 0:return n=xw(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,wbe(n)];case 1:return a=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=In(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(fR),wbe=function(r){return new Promise(function(e,t){var n=new Image;n.onload=function(){e(n)},n.onerror=t,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})},Bbe=function(){function r(e){var t=e.id,n=e.enabled;this.id=t,this.enabled=n,this.start=Date.now()}return r.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,_d([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},r.prototype.getTime=function(){return Date.now()-this.start},r.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,_d([this.id,this.getTime()+"ms"],e))},r.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,_d([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},r.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,_d([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},r.instances={},r}(),Ebe=function(){function r(e,t){var n;this.windowBounds=t,this.instanceName="#"+r.instanceCount++,this.logger=new Bbe({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new GEe(this,e)}return r.instanceCount=1,r}(),DT=function(r,e){return e===void 0&&(e={}),bbe(r,e)};typeof window<"u"&&aR.setContext(window);var bbe=function(r,e){return Zn(void 0,void 0,void 0,function(){var t,n,a,i,o,A,s,u,f,l,c,h,d,v,g,p,y,m,w,B,b,E,b,C,_,x,M,S,I,D,O,F,U,Q,N,R,J,re,ee,q;return zn(this,function(ve){switch(ve.label){case 0:if(!r||typeof r!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(t=r.ownerDocument,!t)throw new Error("Element is not attached to a Document");if(n=t.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(C=e.allowTaint)!==null&&C!==void 0?C:!1,imageTimeout:(_=e.imageTimeout)!==null&&_!==void 0?_:15e3,proxy:e.proxy,useCORS:(x=e.useCORS)!==null&&x!==void 0?x:!1},i=uw({logging:(M=e.logging)!==null&&M!==void 0?M:!0,cache:e.cache},a),o={windowWidth:(S=e.windowWidth)!==null&&S!==void 0?S:n.innerWidth,windowHeight:(I=e.windowHeight)!==null&&I!==void 0?I:n.innerHeight,scrollX:(D=e.scrollX)!==null&&D!==void 0?D:n.pageXOffset,scrollY:(O=e.scrollY)!==null&&O!==void 0?O:n.pageYOffset},A=new No(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),s=new Ebe(i,A),u=(F=e.foreignObjectRendering)!==null&&F!==void 0?F:!1,f={allowTaint:(U=e.allowTaint)!==null&&U!==void 0?U:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:u,copyStyles:u},s.logger.debug("Starting document clone with size "+A.width+"x"+A.height+" scrolled to "+-A.left+","+-A.top),l=new MT(s,r,f),c=l.clonedReferenceElement,c?[4,l.toIFrame(t,A)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return h=ve.sent(),d=Ab(c)||CEe(c)?tme(c.ownerDocument):Ip(s,c),v=d.width,g=d.height,p=d.left,y=d.top,m=xbe(s,c,e.backgroundColor),w={canvas:e.canvas,backgroundColor:m,scale:(N=(Q=e.scale)!==null&&Q!==void 0?Q:n.devicePixelRatio)!==null&&N!==void 0?N:1,x:((R=e.x)!==null&&R!==void 0?R:0)+p,y:((J=e.y)!==null&&J!==void 0?J:0)+y,width:(re=e.width)!==null&&re!==void 0?re:Math.ceil(v),height:(ee=e.height)!==null&&ee!==void 0?ee:Math.ceil(g)},u?(s.logger.debug("Document cloned, using foreign object rendering"),b=new mbe(s,w),[4,b.render(c)]):[3,3];case 2:return B=ve.sent(),[3,5];case 3:return s.logger.debug("Document cloned, element located at "+p+","+y+" with size "+v+"x"+g+" using computed rendering"),s.logger.debug("Starting DOM parsing"),E=YQ(s,c),m===E.styles.backgroundColor&&(E.styles.backgroundColor=Do.TRANSPARENT),s.logger.debug("Starting renderer for element at "+w.x+","+w.y+" with size "+w.width+"x"+w.height),b=new hbe(s,w),[4,b.render(E)];case 4:B=ve.sent(),ve.label=5;case 5:return(!((q=e.removeContainer)!==null&&q!==void 0)||q)&&(MT.destroy(h)||s.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),s.logger.debug("Finished rendering"),[2,B]}})})},xbe=function(r,e,t){var n=e.ownerDocument,a=n.documentElement?Rl(r,getComputedStyle(n.documentElement).backgroundColor):Do.TRANSPARENT,i=n.body?Rl(r,getComputedStyle(n.body).backgroundColor):Do.TRANSPARENT,o=typeof t=="string"?Rl(r,t):t===null?Do.TRANSPARENT:4294967295;return e===n.documentElement?EA(a)?EA(i)?o:i:a:o};const Cbe=cf({__name:"index",setup(r){const e=Mp(),t=()=>{const a=e.graph.save();j3(a)},n=async()=>{const a=document.getElementById("graph"),i=document.getElementById("legend"),[o,A]=await Promise.all([DT(a),DT(i)]),s=document.createElement("canvas");s.width=Math.max(o.width,A.width),s.height=o.height+A.height;const u=s.getContext("2d");u.drawImage(o,0,0),u.drawImage(A,8,8);const f=s.toDataURL("image/png"),l=document.createElement("a");l.href=f,l.download="exported_image.png",l.click()};return(a,i)=>{const o=ia("el-button");return Qn(),oa(Sg,null,[kr(o,{onClick:t},{default:qn(()=>[qx(" 保存 ")]),_:1}),kr(o,{onClick:n},{default:qn(()=>[qx(" 导出 ")]),_:1})],64)}}}),_be=r=>(OT("data-v-82d8dda4"),r=r(),UT(),r),Sbe={class:"container"},Mbe={class:"top"},Ibe={class:"graph-container",id:"graph-container"},Tbe=_be(()=>yA("div",{id:"graph"},null,-1)),Fbe={class:"graph-component"},Lbe=cf({__name:"index",setup(r){let e;const t=Mp(),n=xl(),a=xl(),i=xl([{type:"image",content:"./assets/icons/交换机.svg",label:"交换机"},{type:"image",content:"./assets/icons/路由器.svg",label:"路由器"},{type:"image",content:"./assets/icons/防火墙.svg",label:"防火墙"},{type:"image",content:"./assets/icons/服务器.svg",label:"服务器"},{type:"line",color:"#B1B3B8",thickness:3,label:"万兆光纤链路"},{type:"line",color:"#B1B3B8",thickness:1,label:"千兆光纤链路"},{type:"line",color:"#FFD700",thickness:1,label:"千兆铜缆链路"}]),o={万兆光纤链路:{lineWidth:2,stroke:"#B1B3B8"},千兆光纤链路:{lineWidth:1,stroke:"#B1B3B8"},千兆铜缆链路:{lineWidth:1,stroke:"#FFD700"}};Fw(()=>{z3(async()=>{A(),s()})});const A=async()=>{const h=new us.SnapLine({line:{stroke:"#90c0ff"}});us.registerNode("custom",{afterDraw(v,g){const p=v.size,y=p-16,m=p-16;g.addShape("image",{attrs:{x:-y/2,y:-m/2,width:y,height:m,img:v.img},name:"image-shape"})},getAnchorPoints(){return[[0,.5],[1,.5],[.5,0],[.5,1]]}},"circle");const d=document.getElementById("graph-container");e=new us.Graph({container:"graph",width:d==null?void 0:d.offsetWidth,height:d==null?void 0:d.offsetHeight,fitView:!0,groupByTypes:!1,defaultCombo:{type:"rect"},defaultNode:{type:"custom",size:36,labelCfg:{position:"bottom",style:{fontSize:6}}},nodeStateStyles:{related:{stroke:"white",shadowColor:"blue",shadowBlur:5,lineWidth:2,opacity:1},selected:{opacity:1},dark:{opacity:.5}},edgeStateStyles:{selected:{opacity:1},dark:{opacity:.5}},defaultEdge:{},modes:{default:["drag-canvas","zoom-canvas","drag-combo",{type:"drag-node",onlyChangeComboSize:!0}]},layout:{type:"comboCombined",outerLayout:new us.Layout.dagre({nodesep:30,ranksep:30}),innerLayout:new us.Layout.dagre({nodesep:10,ranksep:10})},plugins:[h]}),t.graph=e,e.edge(v=>(v.style=o[v.sourceData.linkType],v)),await t.fetchData()},s=()=>{e.on("node:click",h=>{var g;const d=(g=h.item)==null?void 0:g.getModel();a.value="node",n.value=d,f(),l();const v=h.item;v!=null&&(e.setItemState(v,"selected",!v.hasState("selected")),v.toFront(),v.getEdges().forEach(p=>{e.setItemState(p,"selected",!0),p.toFront();const y=p.getSource();p.getSource().get("id")==v.get("id")&&(e.setItemState(y,"related",!0),y.toFront());const m=p.getTarget();p.getSource().get("id")==v.get("id")&&(e.setItemState(m,"related",!0),m.toFront())}))}),e.on("edge:click",h=>{var v;const d=(v=h.item)==null?void 0:v.getModel();a.value="edge",n.value=d,f(),l(),e.setItemState(h.item,"selected",!0),e.setItemState(h.item.getSource(),"related",!0),e.setItemState(h.item.getTarget(),"related",!0)})},u=()=>{a.value="",f(),c()},f=()=>{e.getNodes().forEach(function(h){e.clearItemStates(h)}),e.getEdges().forEach(function(h){e.clearItemStates(h)})},l=()=>{e.getNodes().forEach(function(h){e.setItemState(h,"dark",!0)}),e.getEdges().forEach(function(h){e.setItemState(h,"dark",!0)})},c=()=>{e.getNodes().forEach(function(h){h.toBack()}),e.getEdges().forEach(function(h){h.toBack()}),e.getCombos().forEach(function(h){h.toBack()})};return(h,d)=>(Qn(),oa("div",Sbe,[yA("div",Mbe,[kr(Cbe)]),yA("div",Ibe,[Tbe,yA("div",Fbe,[kr(Yye,{selectedData:n.value,selectedType:a.value,onClose:u},null,8,["selectedData","selectedType"]),kr(eme,{id:"legend",items:i.value},null,8,["items"])])])]))}});const Ube=mc(Lbe,[["__scopeId","data-v-82d8dda4"]]);export{Ube as default};
